(window.webpackJsonpecho=window.webpackJsonpecho||[]).push([[34],{2161:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9)),s=o(n(3)),r=o(n(4)),l=o(n(12)),u=o(n(6)),c=o(n(8)),d=o(n(7)),p=a(n(0)),f=n(259),m=(o(n(2)),o(n(18))),h=o(n(21)),_=o(n(13)),v=o(n(41));n(2661);var b=n(1228),E=o(n(2662));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,u.default)(n,e);var t=y(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).addBackButton=a.addBackButton.bind((0,l.default)(a)),a.goBack=a.goBack.bind((0,l.default)(a)),a.setMobileToolbar=a.setMobileToolbar.bind((0,l.default)(a)),a}return(0,r.default)(n,[{key:"componentDidMount",value:function(){this.setMobileToolbar(!1)}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch((0,b.setEditModeAction)("")),this.hideMobileToolbar()}},{key:"render",value:function(){return p.default.createElement(f.Provider,{store:this.props.store},p.default.createElement(E.default,{getData:this.props.getData,addBackButton:this.addBackButton,setMobileToolbar:this.setMobileToolbar,onClose:this.props.onClose,numberOfPages:this.props.numberOfPages,pagesIds:this.props.pagesIds,channelId:this.props.channelId,libraryItemId:this.props.libraryItemId,libraryItemType:this.props.libraryItemType}))}},{key:"hideMobileToolbar",value:function(){if(_.default.isMobile()){this.props.appApi.setConfig(void 0,{toolbar:{id:"qna",fromStore:!0}},(function(){}))}}},{key:"setMobileToolbar",value:function(e){if(_.default.isMobile()){var t=this.props.store.getState().appSettings,a={id:"qna",setStore:!0,cordova:{backId:e?"qna-back":"qna-close"},primary:[{type:h.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{iconName:e?"arrow-left":"close",id:e?"qna-back":"qna-close",isClickable:!0,onButtonClick:e?this.goBack.bind(this,t.selectedDiscussion):this.props.onClose,mixPanel:{params:(0,i.default)({},v.default.PARAMS.TYPE,e?v.default.TOOLBAR_ELEMENTS.BACK:v.default.TOOLBAR_ELEMENTS.CLOSE)}}},{type:h.default.TOOLBAR_ELEMENT_TYPE.TITLE,config:{title:n._getTitle(t)}}],secondary:[].concat(t.editMode?[]:[{type:h.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{iconName:"add-button",id:"add-button",className:"qna-header-mobile__add-button",isClickable:!0,onButtonClick:t.selectedDiscussion?this.openAddComment.bind(this,t.selectedDiscussion):this.openAddDiscussion.bind(this),mixPanel:{params:(0,i.default)({},v.default.PARAMS.TYPE,v.default.TOOLBAR_ELEMENTS.ADD_DISCUSSION)}}}])};this.props.appApi.setConfig(void 0,{toolbar:a},(function(){}))}}},{key:"goBack",value:function(e){e&&(this.props.changeTitle(m.default.translate("qna.title")),this.props.store.dispatch((0,b.toggleAddCommentAction)(e,!1))),"function"==typeof this.onBackClicked&&this.onBackClicked()}},{key:"addBackButton",value:function(e){_.default.isMobile()&&(this.onBackClicked=e,this.setMobileToolbar(!0))}},{key:"openAddDiscussion",value:function(){this.props.store.dispatch((0,b.setEditModeAction)("discussion")),this.setMobileToolbar()}},{key:"openAddComment",value:function(e){this.props.changeTitle(""),this.props.store.dispatch((0,b.setEditModeAction)("comment")),this.props.store.dispatch((0,b.toggleAddCommentAction)(e,!0))}}],[{key:"_getTitle",value:function(e){var t=m.default.translate("qna.title");return e.selectedDiscussion&&"comment"===e.editMode?t="".concat(m.default.translate("selection-page.add")," ").concat(m.default.translate("discussion-box.comment")):"discussion"===e.editMode?t="".concat(m.default.translate("qna.actions.add")):e.selectedDiscussion&&(t=""),t}}]),n}(p.Component);g.defaultProps={appApi:{},getData:function(){},numberOfPages:0,pagesIds:[],channelId:"",libraryItemId:"",libraryItemType:"",onClose:function(){},changeTitle:function(){}};var C=g;t.default=C},2237:function(e,t,n){var a=n(1232),o=n(2281),i=n(218),s=n(72);e.exports=function(e,t){return(s(e)?a:o)(e,i(t,3))}},2281:function(e,t,n){var a=n(504);e.exports=function(e,t){var n=[];return a(e,(function(e,a,o){t(e,a,o)&&n.push(e)})),n}},2359:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(6)),l=o(n(8)),u=o(n(7)),c=a(n(0)),d=(o(n(2)),o(n(11))),p=o(n(50)),f=o(n(21)),m=o(n(18)),h=o(n(13));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var v=function(e){(0,r.default)(n,e);var t=_(n);function n(e){var a;return(0,i.default)(this,n),a=t.call(this,e),n.setLocale(),a}return(0,s.default)(n,null,[{key:"setLocale",value:function(){var e=h.default.getAppdata().appConf.locale||"en_US",t=f.default.MOMENT_LOCALE_MAP[e]||e.split("_")[0].toLowerCase();p.default.locale(t)}}]),(0,s.default)(n,[{key:"render",value:function(){var e=h.default.isMobile(),t=this._getUserDisplayName(),n=this.props.modifiers.map((function(e){return"qna-item-header--".concat(e)})),a=(0,d.default)("qna-item-header",n),o=(0,d.default)("qna-item-header__creator",{"qna-item-header__creator--instructor":h.default.isInstructor(this.props.creator)||h.default.isEditor(this.props.creator)}),i=(0,p.default)(this.props.creationTimestamp),s=i.fromNow(),r=i.diff(new Date,"days"),l=i.format("L");return c.default.createElement("div",{className:a},c.default.createElement("div",{style:{display:"flex"}},c.default.createElement("span",{className:"qna-item-header__left-group"},c.default.createElement("span",{className:o},t)),c.default.createElement("span",{className:"qna-item-header__right-group"},!e&&this.props.groupName&&this._renderGroupName(),c.default.createElement("span",{className:"qna-item-header__timestamp",dir:"auto"},"".concat(r>=-1?s:l)))),e&&this.props.groupName&&c.default.createElement("div",null,this._renderGroupName()))}},{key:"_renderGroupName",value:function(){return c.default.createElement(c.default.Fragment,null,c.default.createElement("span",{className:"qna-item-header__group-name"},this.props.groupName),!h.default.isMobile()&&c.default.createElement("span",{className:"qna-item-header__separator"},"|"))}},{key:"_getUserDisplayName",value:function(){var e=m.default.translate("common.guest");return h.default.isLoggedInUser(this.props.creator)?e=m.default.translate("common.me"):void 0!==this.props.creator.nickname?e=this.props.creator.nickname:void 0!==this.props.creator.email&&(e=this.props.creator.email),e}}]),n}(c.Component);v.defaultProps={modifiers:[]};var b=v;t.default=b},2360:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(12)),r=o(n(4)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=a(n(0)),p=(o(n(2)),o(n(11))),f=o(n(18)),m=n(2669);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._toggleCollapseExpand=a._toggleCollapseExpand.bind((0,s.default)(a)),a.state={view:"ALL"},a}return(0,r.default)(n,null,[{key:"_getBoundingClientRect",value:function(e){return e.getBoundingClientRect()}}]),(0,r.default)(n,[{key:"componentDidMount",value:function(){n._getBoundingClientRect(this._paragraph).height>this._getMaxHeight()&&this._collapse()}},{key:"render",value:function(){var e=this,t=(0,p.default)("paragraph__text",{"paragraph__text--collapsed":this.state.view===m.VIEW_TYPE.COLLAPSED&&!this.props.alwaysExpanded,"paragraph__text--expanded":this.state.view===m.VIEW_TYPE.EXPANDED||this.props.alwaysExpanded}),n={fontSize:this.props.fontSize+"px",lineHeight:this._getLineHeight()+"px"},a="";return this.state.view===m.VIEW_TYPE.COLLAPSED?(n.maxHeight=this.props.alwaysExpanded?"inherit":this._getMaxHeight()+"px",a=this._getCollapseExpandButton(f.default.translate("global.paragraph.read-more"))):this.state.view===m.VIEW_TYPE.EXPANDED&&(a=this._getCollapseExpandButton(f.default.translate("global.paragraph.minimize"))),d.default.createElement("div",{className:"paragraph"},d.default.createElement("div",{className:t,ref:function(t){e._paragraph=t},style:n},this.props.text.split("\n").map((function(e,t){return 0===t?e:[d.default.createElement("br",{key:"line".concat(t)}),e]}))),!this.props.alwaysExpanded&&a)}},{key:"_getMaxHeight",value:function(){return 3*this._getLineHeight()}},{key:"_getLineHeight",value:function(){return this.props.lineHeight||this.props.fontSize+3}},{key:"_getCollapseExpandButton",value:function(e){return d.default.createElement("div",{className:"paragraph__collapse-expand-button"},d.default.createElement("span",{className:"paragraph__collapse-expand-button-span",onClick:this._toggleCollapseExpand},e))}},{key:"_toggleCollapseExpand",value:function(){this.state.view===m.VIEW_TYPE.COLLAPSED?this._expand():this.state.view===m.VIEW_TYPE.EXPANDED&&(this._collapse(),this.props.onCollapse())}},{key:"_collapse",value:function(){this.setState({view:m.VIEW_TYPE.COLLAPSED})}},{key:"_expand",value:function(){this.setState({view:m.VIEW_TYPE.EXPANDED})}}]),n}(d.Component);_.defaultProps={text:"",fontSize:12,onCollapse:function(){}};var v=_;t.default=v},2510:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(6)),l=o(n(8)),u=o(n(7)),c=a(n(0)),d=(o(n(2)),o(n(2359))),p=o(n(2360));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,r.default)(n,e);var t=f(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"comment"},c.default.createElement("div",{className:"comment__comment-box"},c.default.createElement(d.default,{creator:this.props.comment.creator,creationTimestamp:this.props.comment.sendTimestamp}),c.default.createElement("div",{className:"comment__content"},c.default.createElement(p.default,{text:this.props.comment.body,fontSize:14,lineHeight:18,onCollapse:function(){e.props.ensureComponentVisibility(e)}}))))}}]),n}(c.Component);m.defaultProps={ensureComponentVisibility:function(){}};var h=m;t.default=h},2661:function(e,t,n){},2662:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(259),i=a(n(13)),s=n(1228),r=a(n(2663)),l=(0,o.connect)((function(e){return{editMode:e.appSettings.editMode}}),(function(e,t){return{onNewDiscussionClick:function(){e((0,s.setEditModeAction)("discussion"))},onCancel:function(){e((0,s.setEditModeAction)("")),e((0,s.selectDiscussionAction)(null)),i.default.isMobile()&&t.setMobileToolbar()}}}))(r.default);t.default=l},2663:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(12)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=a(n(0)),p=(o(n(2)),o(n(261))),f=o(n(18)),m=o(n(13)),h=o(n(2664)),_=o(n(2666)),v=o(n(2671)),b=o(n(2674)),E=o(n(2677));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=y(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).onNewDiscussionClick=a.onNewDiscussionClick.bind((0,r.default)(a)),a.navigateBack=a.navigateBack.bind((0,r.default)(a)),a.onMobileDiscussionSelection=a.onMobileDiscussionSelection.bind((0,r.default)(a)),a.state={isExpanded:!1,currentView:"main-view-desktop"},a}return(0,s.default)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){"discussion"===e.editMode&&this.props.editMode!==e.editMode&&this.onNewDiscussionClick()}},{key:"render",value:function(){var e;switch(this.state.currentView){case"discussion-view-mobile":e=d.default.createElement(b.default,{addBackButton:this.props.addBackButton,navigateBack:this.navigateBack});break;case"compose-mobile":e=d.default.createElement(v.default,{navigateBack:this.navigateBack,libraryItemId:this.props.libraryItemId,channelId:this.props.channelId});break;case"main-view-desktop":e=[!m.default.isMobile()&&d.default.createElement(h.default,{key:"qna-header",getData:this.props.getData,numberOfPages:this.props.numberOfPages,pagesIds:this.props.pagesIds,libraryItemType:this.props.libraryItemType,onNewDiscussionClick:this.onNewDiscussionClick}),!m.default.isMobile()&&d.default.createElement("div",{className:"tool-module-title-separator qna-wrapper__title-separator",key:"qna-separator"}),!m.default.isMobile()&&this._getComposeHeader(),this._getBody(),m.default.isMobile()&&d.default.createElement(E.default,{key:"qna-filter"})]}return d.default.createElement("div",{className:"t2k-app__qna-wrapper"},d.default.createElement("div",{className:"qna-content-wrapper"},d.default.createElement("div",{className:"qna-content-wrapper__mask",onClick:this.props.onClose,onTouchStart:this.props.onClose}),d.default.createElement("div",{className:"qna-wrapper"},e)))}},{key:"_getBody",value:function(){return d.default.createElement("div",{className:"qna-main-view",key:"qna-main-view"},d.default.createElement(_.default,{numberOfPages:this.props.numberOfPages,focusOnQuestionId:this.state.focusOnQuestionId,pagesIds:this.props.pagesIds,onMobileDiscussionSelection:this.onMobileDiscussionSelection}))}},{key:"_getComposeHeader",value:function(){return"discussion"===this.props.editMode?d.default.createElement(v.default,{key:"qna-compose",discussionId:this.state.editQuestionId,navigateBack:this.navigateBack,libraryItemId:this.props.libraryItemId,pagesIds:this.props.pagesIds,channelId:this.props.channelId,libraryItemType:this.props.libraryItemType}):d.default.createElement("div",{className:"qna-wrapper__compose-header",key:"compose-header"},d.default.createElement("div",{className:"qna-wrapper__compose-header--input","data-automation-id":"qna-compose-input",onClick:this.onNewDiscussionClick},f.default.translate("qna.compose-question.input-placeholder")))}},{key:"onNewDiscussionClick",value:function(){var e=this;this.props.onNewDiscussionClick();var t=m.default.isMobile()?"compose-mobile":"main-view-desktop";this.setState({currentView:t},(function(){m.default.isMobile()&&e.props.addBackButton(e.navigateBack)}))}},{key:"navigateBack",value:function(e){var t=this;this.setState({currentView:"main-view-desktop",editQuestionId:null,focusOnQuestionId:e},(function(){t.props.onCancel()}))}},{key:"onMobileDiscussionSelection",value:function(){var e=this;this.setState({currentView:"discussion-view-mobile"},(function(){m.default.isMobile()&&e.props.addBackButton(e.navigateBack)}))}},{key:"handleClickOutside",value:function(e){"collaboration-icon"!==e.target.id&&this.props.onClose()}}]),n}(d.Component);var C=g=m.default.isMobile()?g:(0,p.default)(g);t.default=C},2664:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(259),i=a(n(2665)),s=n(1228),r=i.default,l=(0,o.connect)((function(e,t){return{currentPageIndex:e.currentPageIndex,visibilityFilter:e.visibilityFilter,pagesIds:t.pagesIds,libraryItemType:t.libraryItemType}}),(function(e,t){return{updateVisibilityFilter:function(t){e((0,s.updateVisibilityFilterAction)(t))},updatePageIndex:function(t){e((0,s.updatePageIndexAction)(t))},openMobileComposeMode:function(){t.onNewDiscussionClick()}}}))(r);t.default=l},2665:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(6)),l=o(n(8)),u=o(n(7)),c=a(n(0)),d=(o(n(2)),o(n(18))),p=o(n(21)),f=n(506);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,r.default)(n,e);var t=m(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this,t=[f.FILTERS.ALL,f.FILTERS.MY];return this.props.libraryItemType!==p.default.CI_TYPE.LESSON&&this.props.libraryItemType!==p.default.CI_TYPE.UCONTENT||t.push(f.FILTERS.PAGE),c.default.createElement("div",{className:"qna-wrapper__title"},c.default.createElement("div",{className:"tool-module-title"},d.default.translate("qna.title")),c.default.createElement("div",{className:"qna-wrapper__filters"},c.default.createElement("div",{className:"qna-header"},c.default.createElement("div",{className:"qna-header__primary-filters"},t.map((function(t,n){return[c.default.createElement("div",{className:"qna-header__spacer",key:"qna-header__primary-filter-spacer-".concat(n)}),c.default.createElement("div",{className:"qna-header__primary-filter".concat(e.props.visibilityFilter.filter===t?" qna-header__primary-filter--selected":""),"data-automation-id":"qna-filter-".concat(t),key:"qna-header__primary-filter-".concat(n),onClick:function(){e.props.updateVisibilityFilter(t)}},e._getFilterTitle(t))]}))))))}},{key:"_getFilterTitle",value:function(e){switch(e){case f.FILTERS.PAGE:return d.default.translate("discussion-box.page",{pageNumber:this.props.currentPageIndex});default:return d.default.translate("qna.filter."+e)}}}]),n}(c.Component);t.default=h},2666:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(217)),i=a(n(2237)),s=n(259),r=a(n(13)),l=a(n(2667)),u=n(1228),c=n(506),d=(0,s.connect)((function(e,t){return{discussionsIds:function(e,t){var n=e.discussionsOrder,a=e.discussions,s=e.commentsOrder,l=e.comments,u=e.visibilityFilter,d=e.currentPageIndex;switch(u.filter){case c.FILTERS.MY:n=(0,i.default)(n,(function(e){if(r.default.isLoggedInUser(a[e].creator))return!0;var t=s[e];return!!(0,o.default)(t,(function(e){return r.default.isLoggedInUser(l[e].creator)}))}));break;case c.FILTERS.PAGE:var p=null!==u.pageIdx?u.pageIdx:d;n=(0,i.default)(n,(function(e){return t.indexOf(a[e].context.pageId)+1===p}))}return n}(e,t.pagesIds),discussionsMap:e.discussions,commentsIdsMap:e.commentsOrder,commentsMap:e.comments,visibilityFilter:e.visibilityFilter,numberOfPages:t.numberOfPages,focusOnQuestionId:t.focusOnQuestionId}}),(function(e,t){var n=function(t){e((0,u.expandCommentsAction)(t))};return{postComment:function(t,n){var a={discussionId:t,type:"TEXT",body:n,sendTimestamp:(new Date).getTime()};e((0,u.postCommentAction)(a))},toggleAddComment:function(t,a){e((0,u.setEditModeAction)(a)),e((0,u.toggleAddCommentAction)(t,a)),a&&n(t)},collapseComments:function(t){e((0,u.collapseCommentsAction)(t))},expandComments:n,selectDiscussion:function(n){t.onMobileDiscussionSelection(),e((0,u.selectDiscussionAction)(n))}}}))(l.default);t.default=d},2667:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(12)),r=o(n(4)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=o(n(1227)),p=a(n(0)),f=(o(n(2)),o(n(24))),m=o(n(18)),h=o(n(11)),_=o(n(2668));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var b=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._questionRefs=new Map,a._prevFilter=a.props.visibilityFilter,a._shouldScrollBy=!1,a.expandComments=a._expandComments.bind((0,s.default)(a)),a.ensureComponentVisibility=a._ensureComponentVisibility.bind((0,s.default)(a)),a}return(0,r.default)(n,null,[{key:"_getBoundingClientRect",value:function(e){return e.getBoundingClientRect()}},{key:"_getComponentTopPosition",value:function(e){var t=f.default.findDOMNode(e);return n._getBoundingClientRect(t).top}}]),(0,r.default)(n,[{key:"componentDidUpdate",value:function(){if((0,d.default)(this.props.visibilityFilter,this._prevFilter)){if(this._shouldScrollBy){var e=this._getListScrollTop();this._setListScrollTop(e+5),this._shouldScrollBy=!1}}else this._setListScrollTop(0),this._prevFilter=this.props.visibilityFilter}},{key:"render",value:function(){var e=this,t=!this.props.discussionsIds.length,n=(0,h.default)("qna-body scrollable",{empty:t});return p.default.createElement("div",{className:n,ref:function(t){e._listRef=t}},this._getBody(t))}},{key:"_getBody",value:function(e){var t=this;return e?p.default.createElement("div",{className:"qna-body__message"},p.default.createElement("div",{className:"qna-body__message-title"},m.default.translate("qna.message.nothing-yet.title")),p.default.createElement("div",{className:"qna-body__message-body"},p.default.createElement("div",{className:"qna-body__message-icon qna-body__message-icon--balloon-emoji"}),p.default.createElement("div",{className:"qna-body__message-subtitle"},m.default.translate("qna.message.nothing-yet.subtitle")))):this.props.discussionsIds.map((function(e){var n=t.props.discussionsMap[e],a=t.props.commentsIdsMap[e];return p.default.createElement(_.default,{discussion:n,key:"discussion-".concat(e),ref:function(n){t._questionRefs.set(e,n)},ensureComponentVisibility:t.ensureComponentVisibility,postComment:t.props.postComment,toggleAddComment:t.props.toggleAddComment,collapseComments:t.props.collapseComments,expandComments:t.expandComments,commentsOrder:a,commentsMap:t.props.commentsMap,selectDiscussion:t.props.selectDiscussion})}))}},{key:"_ensureComponentVisibility",value:function(e){var t=n._getComponentTopPosition(e),a=n._getBoundingClientRect(this._listRef).top;t-a<0&&(this._setListScrollTop(0),t=n._getComponentTopPosition(e),this._setListScrollTop(t-a))}},{key:"_setListScrollTop",value:function(e){this._listRef.scrollTop=e}},{key:"_getListScrollTop",value:function(){return this._listRef.scrollTop}},{key:"_expandComments",value:function(e){this._shouldScrollBy=!0,this.props.expandComments(e)}}]),n}(p.Component);b.defaultProps={discussionsIds:[],discussionsMap:{},commentsIdsMap:{},commentsMap:{}};var E=b;t.default=E},2668:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9)),s=o(n(3)),r=o(n(4)),l=o(n(12)),u=o(n(6)),c=o(n(8)),d=o(n(7)),p=a(n(0)),f=(o(n(2)),o(n(11))),m=o(n(18)),h=o(n(13)),_=o(n(41)),v=o(n(2359)),b=o(n(2510)),E=o(n(2670)),y=o(n(2360)),g=n(506);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var T=function(e){(0,u.default)(n,e);var t=C(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).toggleAddComment=a._toggleAddComment.bind((0,l.default)(a),!0),a.toggleComments=a._toggleComments.bind((0,l.default)(a)),a.onAddComment=a._onAddComment.bind((0,l.default)(a)),a.onMobileClick=a._onMobileClick.bind((0,l.default)(a)),a.commentsExpanded=!1,a}return(0,r.default)(n,[{key:"render",value:function(){var e=this,t=this.props.discussion,n=h.default.isInstructor(t.creator)||h.default.isEditor(t.creator),a=(0,f.default)("discussion-box",{"discussion-box--instructor":n});this.commentsExpanded=this.props.commentsOrder.length>g.MAX_COMMENTS;var o=t.commentsCounter>g.MAX_COMMENTS,i=m.default.translate("discussion-box.comment");h.default.isMobile()&&t.commentsCounter>1&&(i=m.default.translate("discussion-box.comments"));var s=this.commentsExpanded?m.default.translate("discussion-box.close-comments"):m.default.translate("discussion-box.view-all-comments");return p.default.createElement("div",{className:a,onClick:h.default.isMobile()?this.onMobileClick:null},p.default.createElement("div",{className:"discussion-box__wrapper"},p.default.createElement("div",{className:"discussion-box__body"},p.default.createElement(v.default,{groupName:t.groupName,creator:t.creator,creationTimestamp:t.creationTimestamp,scopeIndex:t.scopeIndex,commentsCounter:t.commentsCounter}),p.default.createElement("div",{className:"discussion-box__content"},p.default.createElement(y.default,{text:t.title,fontSize:16,lineHeight:20,onCollapse:function(){e.props.ensureComponentVisibility(e)}}),p.default.createElement("div",{className:"discussion-box__comments-counter"},t.scopeIndex&&p.default.createElement("span",{className:"qna-item-header__scope-index",dir:"auto"},"".concat(m.default.translate("discussion-box.page",{pageNumber:t.scopeIndex}))),t.commentsCounter>0&&p.default.createElement("span",{className:"qna-item-header__comments-counter-wrapper"},p.default.createElement("span",{className:"qna-item-header__comments-counter"},t.commentsCounter),1===t.commentsCounter?m.default.translate("discussion-box.comment"):m.default.translate("discussion-box.comments"))))),!h.default.isMobile()&&p.default.createElement("div",{className:"discussion-box__actions"},p.default.createElement("span",{className:"discussion-box__actions--comment","data-automation-id":"qna-discussion-add-comment",onClick:this.toggleAddComment},t.replyExpanded?m.default.translate("discussion-box.discard"):i),o&&[p.default.createElement("span",{key:"actions-separator",className:"discussion-box__actions--separator"}),p.default.createElement("span",{key:"actions-expand",className:"discussion-box__actions--expand",onClick:this.toggleComments},s)])),!h.default.isMobile()&&p.default.createElement("div",{className:"discussion-box__comments-container"},t.replyExpanded&&p.default.createElement("div",{className:"discussion-box__new-comment"},p.default.createElement(E.default,{onSubmit:this.onAddComment,charLimitEnabled:!0,maxTextLength:g.MAX_TEXT_LENGTH,placeholder:m.default.translate("qna.compose-question.title-char-limit",{charactersCount:g.MAX_TEXT_LENGTH})})),t.commentsCounter>0&&p.default.createElement("div",{className:"discussion-box__comments"},this.props.commentsOrder.map((function(n){var a=e.props.commentsMap[n];return p.default.createElement(b.default,{comment:a,discussionCreator:t.creator,ensureComponentVisibility:e.props.ensureComponentVisibility,key:"comment-".concat(a.id)})})))))}},{key:"_onMobileClick",value:function(){this.props.selectDiscussion(this.props.discussion.id)}},{key:"_onAddComment",value:function(e){this._toggleAddComment(),this.props.postComment(this.props.discussion.id,e)}},{key:"_toggleComments",value:function(){this.commentsExpanded?this.props.collapseComments(this.props.discussion.id):this.props.expandComments(this.props.discussion.id)}},{key:"_toggleAddComment",value:function(e){!0===e&&(this.props.discussion.replyExpanded?_.default.sendEvent(_.default.TITLES.START_NEW_DISCUSSION,_.default.COMPONENTS.DISCUSSIONS_PANE,(0,i.default)({},_.default.PARAMS.USER_ACTION,"discard")):_.default.sendEvent(_.default.TITLES.START_NEW_DISCUSSION,_.default.COMPONENTS.DISCUSSIONS_PANE,(0,i.default)({},_.default.PARAMS.USER_ACTION,"comment"))),this.props.toggleAddComment(this.props.discussion.id,!this.props.discussion.replyExpanded)}}]),n}(p.Component);T.defaultProps={commentsOrder:[],commentsMap:{},ensureComponentVisibility:function(){},postComment:function(){},selectDiscussion:function(){},toggleAddComment:function(){},collapseComments:function(){},expandComments:function(){}};var I=T;t.default=I},2669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VIEW_TYPE=t.CONTAINER_TYPE=t.MESSAGE_TYPE=void 0;var a={MOVE:"MOVE",LESSON_METADATA:"LESSON_METADATA",STOP:"STOP",RESUME:"RESUME",BREAK:"BREAK",SIMULATION:"SIMULATION",CI_LOADED:"CI_LOADED",CI_TERMINATED:"CI_TERMINATED",USER_ACTIVITY:"USER_ACTIVITY",TOOL_BUTTONS:"TOOL_BUTTONS",CONTROL_TOOLBAR:"CONTROL_TOOLBAR",REGISTER_TOOL_INTERCEPTOR:"REGISTER_TOOL_INTERCEPTOR"};t.MESSAGE_TYPE=a;var o={NONE:"NONE",FILL:"FILL",PARTIAL:"PARTIAL"};t.CONTAINER_TYPE=o;var i={EXPANDED:"EXPANDED",COLLAPSED:"COLLAPSED"};t.VIEW_TYPE=i;var s={MESSAGE_TYPE:a,CONTAINER_TYPE:o,VIEW_TYPE:i};t.default=s},2670:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9)),s=o(n(3)),r=o(n(4)),l=o(n(12)),u=o(n(6)),c=o(n(8)),d=o(n(7)),p=a(n(0)),f=(o(n(2)),o(n(11))),m=o(n(18)),h=o(n(13)),_=o(n(41)),v=o(n(36));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=function(e){(0,u.default)(n,e);var t=b(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={text:e.text,placeholder:!e.text},a._onInput=a._onInput.bind((0,l.default)(a)),a._onCancel=a._onCancel.bind((0,l.default)(a)),a._onKeyUp=a._onKeyUp.bind((0,l.default)(a)),a._onPaste=a._onPaste.bind((0,l.default)(a)),a._onSubmit=a._onSubmit.bind((0,l.default)(a)),a}return(0,r.default)(n,[{key:"componentDidMount",value:function(){this._updateValue(this.state.text),h.default.isBrowserIE()&&this._input.addEventListener("textinput",this._onInput),this._focusInput()}},{key:"componentWillUnmount",value:function(){h.default.isBrowserIE()&&this._input.removeEventListener("textinput",this._onInput)}},{key:"render",value:function(){var e=this,t=(0,f.default)("comment-box__input scrollable",{"comment-box__input--placeholder":this.state.placeholder}),n="";return this.props.text&&(n=p.default.createElement("div",{onClick:this._onCancel,className:"comment-box__cancel-button"},m.default.translate("global.comment-box.cancel"))),p.default.createElement("div",{className:"comment-box"},p.default.createElement("div",{className:t,contentEditable:"true",placeholder:this.props.placeholder,onInput:this._onInput,onKeyUp:this._onKeyUp,onPaste:this._onPaste,ref:function(t){e._input=t}}),p.default.createElement("div",{className:"comment-box__toolbar"},p.default.createElement(v.default,{text:m.default.translate("qna.compose-question.add"),styleClass:"comment-box__submit-button-add",onClick:this._onSubmit,disabled:!this.state.text}),n))}},{key:"_focusInput",value:function(){this._input.focus()}},{key:"_updateValue",value:function(e){this._input.innerText=e,this.setState({text:e,placeholder:!e})}},{key:"_onInput",value:function(){var e=this._input.innerText?this._input.innerText.trim():"";this.props.charLimitEnabled&&e.length>this.props.maxTextLength?this._input.innerText=this.state.text:this.setState({text:e,placeholder:!e})}},{key:"_onPaste",value:function(e){e.preventDefault();var t=h.default.getPastedText(e);if(this.props.charLimitEnabled){var n=this._input.innerText?this._input.innerText.trim():"";if(n.length+t.length>this.props.maxTextLength){var a=this.props.maxTextLength-n.length;t=t.substring(0,a)}}h.default.pasteHtmlAtCaret(t),this._onInput()}},{key:"_onSubmit",value:function(){var e=this._input.innerText?this._input.innerText.trim():"";e.length>0&&(_.default.sendEvent(_.default.TITLES.START_NEW_DISCUSSION,_.default.COMPONENTS.DISCUSSIONS_PANE,(0,i.default)({},_.default.PARAMS.USER_ACTION,"add")),this._updateValue(""),this.props.onSubmit(e))}},{key:"_onCancel",value:function(){this._updateValue(""),this.props.onCancel(),this._input.blur()}},{key:"_onKeyUp",value:function(e){27===e.keyCode&&this._onCancel()}}]),n}(p.Component);E.defaultProps={text:"",placeholder:"",charLimitEnabled:!1,onSubmit:function(){},onCancel:function(){}};var y=E;t.default=y},2671:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(9)),i=n(259),s=a(n(21)),r=a(n(41)),l=a(n(2672)),u=n(1228),c=(0,i.connect)((function(e,t){return{currentPageIndex:e.currentPageIndex,libraryItemType:t.libraryItemType}}),(function(e,t){return{onOpen:function(){e((0,u.setEditModeAction)("discussion"))},onCancel:function(){r.default.sendEvent(r.default.TITLES.START_NEW_DISCUSSION,r.default.COMPONENTS.DISCUSSIONS_PANE,(0,o.default)({},r.default.PARAMS.USER_ACTION,"cancel")),t.navigateBack(),e((0,u.setEditModeAction)(""))},onSave:function(n,a,i,l){var c={title:n,creationTimestamp:(new Date).getTime(),context:{channelId:t.channelId,groupId:i},accessInfos:[{type:"CHANNEL",ids:[t.channelId]}]};t.libraryItemId&&(c.context.libraryItemId=t.libraryItemId),t.libraryItemType!==s.default.CI_TYPE.LESSON&&t.libraryItemType!==s.default.CI_TYPE.UCONTENT||!a||(c.context.pageId=t.pagesIds[a-1]),r.default.sendEvent(r.default.TITLES.START_NEW_DISCUSSION,r.default.COMPONENTS.DISCUSSIONS_PANE,(0,o.default)({},r.default.PARAMS.USER_ACTION,"post")),e((0,u.postDiscussionAction)(c,a,l)),e((0,u.setEditModeAction)("")),t.navigateBack()}}}))(l.default);t.default=c},2672:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(12)),r=o(n(4)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=o(n(236)),p=a(n(0)),f=(o(n(2)),o(n(11))),m=o(n(18)),h=o(n(21)),_=o(n(13)),v=o(n(36)),b=a(n(603)),E=o(n(2673)),y=n(506);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var C=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={valid:a.props.discussion.id,title:a.props.discussion.title||"",separatedGroupsForDdl:[]},a.selectedGroupId="",a.finishLoadGroups=!1,a.onTitleInput=a._onTitleInput.bind((0,s.default)(a)),a.onSave=a._onSave.bind((0,s.default)(a)),a.onTitlePaste=a._onTitlePaste.bind((0,s.default)(a)),a._onDropdownChange=a._onDropdownChange.bind((0,s.default)(a)),a}return(0,r.default)(n,null,[{key:"_getInput",value:function(e){return e&&e.innerText?e.innerText.trim():""}}]),(0,r.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.onOpen(),_.default.getChannelSeparatedGroups(this.props.channelId).then((function(t){if(1===t.length&&(e.selectedGroupId=t[0].id),t.length>1){var n=[{id:"",label:m.default.translate("qna.compose-question.group-ddl-placeholder"),selected:!0}];_.default.isInstructor()&&n.push({id:"allGroupsId",label:m.default.translate("qna.compose-question.group-ddl.select-all-text"),selected:!1}),(0,d.default)(t,(function(e){n.push({id:e.id,label:e.name,selected:!1})})),e.setState({separatedGroupsForDdl:n})}e.finishLoadGroups=!0})),this.props.discussion.id&&(this._titleInput.innerText=this.props.discussion.title?this.props.discussion.title:""),_.default.isBrowserIE()&&this._titleInput.addEventListener("textinput",this.onTitleInput),this._focusInput()}},{key:"componentWillUnmount",value:function(){_.default.isBrowserIE()&&this._titleInput.removeEventListener("textinput",this.onTitleInput)}},{key:"render",value:function(){var e=this,t=_.default.isMobile(),n=t?"compose-question-mobile":"compose-question",a=m.default.translate("qna.compose-question.title-char-limit",{charactersCount:y.MAX_TEXT_LENGTH}),o=m.default.translate("qna.compose-question.title-char-limit",{charactersCount:y.MAX_TEXT_LENGTH})+" ("+m.default.translate("qna.compose-question.input-placeholder")+")",i=p.default.createElement("div",{className:"".concat(n,"__title-input scrollable"),onInput:this.onTitleInput,onPaste:this.onTitlePaste,contentEditable:"true",ref:function(t){e._titleInput=t},"data-char-limit":t?o:a}),s=this._getOrgGroupsDdl("compose-question__org-groups-ddl-container__org-groups-ddl-mobile");return _.default.isMobile()?p.default.createElement("div",{className:"".concat(n)},i,s,this._getMobileActionButtons()):p.default.createElement("div",{className:"".concat(n)},p.default.createElement("div",{className:"".concat(n,"__body")},i),this._getToolbarButtons())}},{key:"_focusInput",value:function(){this._titleInput.focus()}},{key:"_getOrgGroupsDdl",value:function(e){var t=this,n=this.state.separatedGroupsForDdl;return n.length?p.default.createElement("div",{className:"compose-question__org-groups-ddl-container"},p.default.createElement(b.default,{ref:function(e){t._groupDdl=e},theme:b.DROPDOWN_THEME.CLASSIC,options:n,className:e,onChange:this._onDropdownChange,ignoreWidth:!0,isArrowByIcon:!0,noBorder:!0})):null}},{key:"_onDropdownChange",value:function(e){var t=e.id;this.selectedGroupId=t,this.setState({valid:this._validateInput()})}},{key:"_getToolbarButtons",value:function(){var e=this,t=!this.props.discussion.id,n=(0,f.default)("compose-question__scope",{"compose-question__scope--disabled":!t});return p.default.createElement("div",{className:"compose-question__toolbar"},p.default.createElement("div",{className:n},(this.props.libraryItemType===h.default.CI_TYPE.LESSON||this.props.libraryItemType===h.default.CI_TYPE.UCONTENT)&&p.default.createElement(E.default,{buttons:this._getScopeButtons(),initialSelection:!t&&this.props.discussion.context.pageId?y.SCOPE.PAGE:y.SCOPE.GENERAL,disabled:!t,ref:function(t){e._radioButtonPanel=t}})),this._getOrgGroupsDdl("compose-question__org-groups-ddl-container__org-groups-ddl"),this._getActionButtons())}},{key:"_getScopeButtons",value:function(){return[{value:y.SCOPE.PAGE,label:m.default.translate("qna.compose-question.scope.current-page",{pageNumber:this.props.currentPageIndex})},{value:y.SCOPE.GENERAL,label:m.default.translate("qna.compose-question.scope.general")}]}},{key:"_getActionButtons",value:function(){return p.default.createElement("div",{className:"compose-question__buttons"},p.default.createElement(v.default,{text:m.default.translate("qna.compose-question.cancel"),styleClass:"compose-question__button compose-question__button--cancel",type:v.default.TYPES.SECONDARY,onClick:this.props.onCancel}),p.default.createElement(v.default,{text:this.props.discussion.id?m.default.translate("qna.compose-question.save"):m.default.translate("qna.compose-question.post"),styleClass:"compose-question__button compose-question__button--save",onClick:this.onSave,disabled:!this.state.valid}))}},{key:"_getMobileActionButtons",value:function(){var e=(0,f.default)("compose-question-mobile__button",{"compose-question-mobile__button--disabled":!this.state.valid});return p.default.createElement("div",{className:"compose-question-mobile__buttons",dir:"ltr"},p.default.createElement("span",{className:"compose-question-mobile__button discard",onClick:this.props.onCancel},m.default.translate("discussion-box.discard")),p.default.createElement("span",{className:"compose-question-mobile__button--separator"}),p.default.createElement("span",{className:e,onClick:this.state.valid?this.onSave:null},m.default.translate("qna.compose-question.post")))}},{key:"_onTitleInput",value:function(){var e=this._titleInput.innerText||"";e.length>y.MAX_TEXT_LENGTH?this._titleInput.innerText=this.state.title:(!e.trim().length&&_.default.isBrowserFirefox()&&(this._titleInput.innerHTML=""),this.setState({title:e,valid:this._validateInput()}))}},{key:"_onTitlePaste",value:function(e){e.preventDefault();var t=this._titleInput.innerText||"",n=_.default.getPastedText(e);if(t.length+n.length>y.MAX_TEXT_LENGTH){var a=y.MAX_TEXT_LENGTH-t.length;n=n.substring(0,a)}_.default.pasteHtmlAtCaret(n),this.setState({title:this._titleInput.innerText,valid:this._validateInput()})}},{key:"_isGroupSelectedMiss",value:function(){var e=this.state.separatedGroupsForDdl;return!this.finishLoadGroups||!!e.length&&(!e.length||!this.selectedGroupId)}},{key:"_validateInput",value:function(){var e=n._getInput(this._titleInput),t=this._isGroupSelectedMiss();return e.length>0&&!t}},{key:"_onSave",value:function(){var e,t=!1,a=n._getInput(this._titleInput);this.props.libraryItemType!==h.default.CI_TYPE.LESSON&&this.props.libraryItemType!==h.default.CI_TYPE.UCONTENT||this._radioButtonPanel.getSelectedValue()===y.SCOPE.PAGE&&(e=this.props.currentPageIndex);"allGroupsId"===this.selectedGroupId&&(this.selectedGroupId="",t=!0),this.props.onSave(a,e,this.selectedGroupId,t)}}]),n}(p.Component);C.defaultProps={discussion:{},onCancel:function(){},onSave:function(){},onOpen:function(){}};var T=C;t.default=T},2673:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(6)),l=o(n(8)),u=o(n(7)),c=a(n(0)),d=(o(n(2)),o(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var o=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,r.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={selected:a.props.initialSelection},a}return(0,s.default)(n,[{key:"render",value:function(){var e=this,t=(0,d.default)("radio-buttons-panel",{"radio-buttons-panel--disabled":this.props.disabled});return c.default.createElement("div",{className:t},this.props.buttons.map((function(t){var n=(0,d.default)("radio-buttons-panel__button-radio",{"radio-buttons-panel__button-radio--selected":t.value===e.state.selected});return c.default.createElement("span",{className:"radio-buttons-panel__button",onClick:function(){e._select(t.value)},"data-automation-id":"radio-button-".concat(t.value),key:"button-".concat(t.value)},c.default.createElement("span",{className:n}),c.default.createElement("span",{className:"radio-buttons-panel__button-label"},t.label))})))}},{key:"_select",value:function(e){this.props.disabled||this.setState({selected:e})}},{key:"getSelectedValue",value:function(){return this.state.selected}}]),n}(c.Component);f.defaultProps={buttons:[]};var m=f;t.default=m},2674:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(259),i=a(n(2675)),s=n(1228),r=(0,o.connect)((function(e){var t=e.appSettings.selectedDiscussion;return{discussion:e.discussions[t],commentsOrder:e.commentsOrder[t],commentsMap:e.comments}}),(function(e){var t=function(t){e((0,s.expandCommentsAction)(t))};return{onOpen:function(t){e((0,s.expandCommentsAction)(t))},postComment:function(t,n){var a={discussionId:t,type:"TEXT",body:n,sendTimestamp:(new Date).getTime()};e((0,s.postCommentAction)(a))},toggleAddComment:function(n,a){e((0,s.setEditModeAction)(a)),e((0,s.toggleAddCommentAction)(n,a)),a&&t(n)},expandComments:t}}))(i.default);t.default=r},2675:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(12)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=a(n(0)),p=(o(n(2)),o(n(11))),f=o(n(18)),m=o(n(2359)),h=o(n(2510)),_=o(n(2676)),v=o(n(2360)),b=n(506);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=E(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={},a._toggleAddComment=a._toggleAddComment.bind((0,r.default)(a)),a.onAddComment=a._onAddComment.bind((0,r.default)(a)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.onOpen(this.props.discussion.id)}},{key:"render",value:function(){var e=this,t=this.props.discussion,n=!t.commentsCounter&&!t.replyExpanded,a=(0,p.default)("discussion-box__comments-container scrollable",{empty:n});return t.replyExpanded?d.default.createElement("div",{className:"discussion-mobile-box"},d.default.createElement(_.default,{onCancel:this._toggleAddComment,onSubmit:this.onAddComment,addBackButton:function(){e.props.addBackButton(e._toggleAddComment)},charLimitEnabled:!0,maxTextLength:b.MAX_TEXT_LENGTH,placeholder:f.default.translate("qna.compose-question.title-char-limit",{charactersCount:b.MAX_TEXT_LENGTH})})):d.default.createElement("div",{className:"discussion-mobile-box"},d.default.createElement("div",{className:"discussion-box__body"},d.default.createElement(m.default,{groupName:t.groupName,creator:t.creator,creationTimestamp:t.creationTimestamp}),d.default.createElement("div",{className:"discussion-box__content"},d.default.createElement(v.default,{text:t.title,fontSize:16,lineHeight:24,alwaysExpanded:!0})),d.default.createElement("div",{className:"discussion-box__comments-counter"},!t.replyExpanded&&t.commentsCounter>0&&d.default.createElement("span",{className:"qna-item-header__comments-counter-wrapper"},d.default.createElement("span",{className:"qna-item-header__comments-counter"},t.commentsCounter),1===t.commentsCounter?f.default.translate("discussion-box.comment"):f.default.translate("discussion-box.comments")))),d.default.createElement("div",{className:a},this._getComments(n)))}},{key:"_getComments",value:function(e){var t=this;return e?d.default.createElement("div",{className:"discussion-box__message"},d.default.createElement("div",{className:"discussion-box__message-title"},f.default.translate("qna.discussion-box.mobile.nothing-yet.title"))):d.default.createElement("div",{className:"discussion-box__comments"},this.props.commentsOrder.map((function(e){var n=t.props.commentsMap[e];return d.default.createElement(h.default,{comment:n,discussionCreator:t.props.discussion.creator,key:"comment-".concat(n.id)})})))}},{key:"_onAddComment",value:function(e){this._toggleAddComment(),this.props.postComment(this.props.discussion.id,e)}},{key:"_toggleAddComment",value:function(){var e=this.props.discussion.replyExpanded;this.props.toggleAddComment(this.props.discussion.id,!e),e&&this.props.addBackButton(this.props.navigateBack)}}]),n}(d.Component);y.defaultProps={commentsOrder:[],commentsMap:{},postComment:function(){},toggleAddComment:function(){},onOpen:function(){},addBackButton:function(){},navigateBack:function(){}};var g=y;t.default=g},2676:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(12)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=a(n(0)),p=(o(n(2)),o(n(11))),f=o(n(18)),m=o(n(13));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={text:e.text,placeholder:!e.text},a._onInput=a._onInput.bind((0,r.default)(a)),a._onCancel=a._onCancel.bind((0,r.default)(a)),a._onKeyUp=a._onKeyUp.bind((0,r.default)(a)),a._onPaste=a._onPaste.bind((0,r.default)(a)),a._onSubmit=a._onSubmit.bind((0,r.default)(a)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._updateValue(this.state.text),m.default.isBrowserIE()&&this._input.addEventListener("textinput",this._boundOnInput),this._focusInput(),this.props.addBackButton()}},{key:"componentWillUnmount",value:function(){m.default.isBrowserIE()&&this._input.removeEventListener("textinput",this._boundOnInput)}},{key:"render",value:function(){var e=this,t=(0,p.default)("comment-box__input scrollable",{"comment-box__input--placeholder":this.state.placeholder});return d.default.createElement("div",{className:"discussion-box__new-comment"},d.default.createElement("div",{className:"comment-box"},d.default.createElement("div",{className:t,contentEditable:"true",placeholder:this.props.placeholder,onInput:this._onInput,onKeyUp:this._onKeyUp,onPaste:this._onPaste,ref:function(t){e._input=t}})),this._getMobileActionButtons())}},{key:"_getMobileActionButtons",value:function(){var e=(0,p.default)("compose-question-mobile__button",{"compose-question-mobile__button--disabled":this.state.placeholder});return d.default.createElement("div",{className:"compose-question-mobile__buttons",dir:"ltr"},d.default.createElement("span",{className:"compose-question-mobile__button discard",onClick:this._onCancel},f.default.translate("discussion-box.discard")),d.default.createElement("span",{className:"compose-question-mobile__button--separator"}),d.default.createElement("span",{className:e,onClick:this._onSubmit},f.default.translate("qna.compose-question.post")))}},{key:"_focusInput",value:function(){this._input.focus()}},{key:"_updateValue",value:function(e){this._input.innerText=e,this.setState({text:e,placeholder:!e})}},{key:"_onInput",value:function(){var e=this._input.innerText?this._input.innerText.trim():"";this.props.charLimitEnabled&&e.length>this.props.maxTextLength?this._input.innerText=this.state.text:this.setState({text:e,placeholder:!e})}},{key:"_onPaste",value:function(e){e.preventDefault();var t=m.default.getPastedText(e);if(this.props.charLimitEnabled){var n=this._input.innerText?this._input.innerText.trim():"";if(n.length+t.length>this.props.maxTextLength){var a=this.props.maxTextLength-n.length;t=t.substring(0,a)}}m.default.pasteHtmlAtCaret(t),this._onInput()}},{key:"_onSubmit",value:function(){var e=this._input.innerText?this._input.innerText.trim():"";e.length>0&&(this._updateValue(""),this.props.onSubmit(e))}},{key:"_onCancel",value:function(){this._updateValue(""),this.props.onCancel(),this._input.blur()}},{key:"_onKeyUp",value:function(e){27===e.keyCode&&this._onCancel()}}]),n}(d.Component);_.defaultProps={text:"",placeholder:"",charLimitEnabled:!1,onSubmit:function(){},onCancel:function(){},addBackButton:function(){}};var v=_;t.default=v},2677:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(259),i=a(n(2678)),s=n(1228),r=(0,o.connect)((function(e,t){return{currentPageIndex:e.currentPageIndex,visibilityFilter:e.visibilityFilter,pagesIds:t.pagesIds,libraryItemType:t.libraryItemType}}),(function(e){return{updateVisibilityFilter:function(t){e((0,s.updateVisibilityFilterAction)(t))},updatePageIndex:function(t){e((0,s.updatePageIndexAction)(t))}}}))(i.default);t.default=r},2678:function(e,t,n){"use strict";var a=n(5),o=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),s=o(n(4)),r=o(n(12)),l=o(n(6)),u=o(n(8)),c=o(n(7)),d=a(n(0)),p=(o(n(2)),o(n(18))),f=n(506);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._onFilterChange=a._onFilterChange.bind((0,r.default)(a)),a}return(0,s.default)(n,[{key:"render",value:function(){var e=this,t=[{id:f.FILTERS.ALL,label:p.default.translate("qna.filter.mobile."+f.FILTERS.ALL),selected:this.props.visibilityFilter.filter===f.FILTERS.ALL},{id:f.FILTERS.MY,label:p.default.translate("qna.filter.mobile."+f.FILTERS.MY),selected:this.props.visibilityFilter.filter===f.FILTERS.MY}];return d.default.createElement("div",{className:"discussions-mobile-footer"},d.default.createElement("span",{key:t[0].id,className:"discussions-mobile-footer__button".concat(t[0].selected?" selected":""),onClick:function(){e._onFilterChange(t[0])}},t[0].label),d.default.createElement("span",{key:t[1].id,className:"discussions-mobile-footer__button".concat(t[1].selected?" selected":""),onClick:function(){e._onFilterChange(t[1])}},t[1].label))}},{key:"_onFilterChange",value:function(e){var t=e.id;this.props.updateVisibilityFilter(t)}}]),n}(d.Component);t.default=h}}]);