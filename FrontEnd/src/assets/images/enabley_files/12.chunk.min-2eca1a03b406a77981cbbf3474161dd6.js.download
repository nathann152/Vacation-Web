(window.webpackJsonpecho=window.webpackJsonpecho||[]).push([[12],{2173:function(e,t,a){"use strict";var r=a(1),n=r(a(33)),o=r(a(34)),l=r(a(9)),c=r(a(3)),s=r(a(4)),i=r(a(0)),u=r(a(24)),d=r(a(129)),f=r(a(21)),p=r(a(13)),g=r(a(18)),m=r(a(41)),h=r(a(2511));function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){(0,l.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=g.default.translate("course-catalog.view.role.learner"),_=g.default.translate("course-catalog.header"),v=f.default.CATALOG_ACTIONS.ROLE,w=g.default.translate("course-catalog.management.header");e.exports=function(){function e(t){var a=this;(0,c.default)(this,e),this.changeRole=function(){a.role=a.role===O?v:O,a.title=a.title===_?w:_,a._setHostToolbar(),a.setNav(),a.render()},this.setNav=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a._communicator.send("setNav",{id:f.default.STAGES.CATALOG+"".concat(a.role!==O?"/management":""),hash:e,queryParams:t,options:E(E({},r),{},{initUrl:!0})})},this._setHostToolbar=(0,o.default)(n.default.mark((function e(){var t,r,o,c,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=p.default.getAppdata().appConf.featureFlags,r={type:f.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{id:"back",iconName:"close",isSelected:!1,isClickable:!0,mixPanel:{params:(0,l.default)({},m.default.PARAMS.TYPE,m.default.TOOLBAR_ELEMENTS.CLOSE)}}},o={type:f.default.TOOLBAR_ELEMENT_TYPE.TITLE,config:{title:a.title}},c=[].concat([r]).concat([o]),s=[].concat(p.default.isTrainingManager()?[{type:f.default.TOOLBAR_ELEMENT_TYPE.CUSTOM,config:{id:"manage-catalog",title:a.role===O?g.default.translate("course-catalog.navbar.manage-catalog"):g.default.translate("course-catalog.navbar.browse-catalog"),isClickable:!0,customElement:i.default.createElement("div",{style:{cursor:"pointer",border:"2px solid white",borderRadius:"25px",padding:"3px 9px"}},i.default.createElement("span",{className:a.role===O?"icon--manage-course-catalog":"icon--course-catalog",style:{marginRight:"0.5rem"}}),a.role===O?g.default.translate("course-catalog.navbar.manage-catalog"):g.default.translate("course-catalog.navbar.browse-catalog"))}}]:[]).concat(t.help?[{type:f.default.TOOLBAR_ELEMENT_TYPE.HELP}]:[]),a._toolbarConfig={toolbar:{id:"catalog",cordova:{backId:"back"},primary:c,secondary:s}},a._communicator.send("setConfig",a._toolbarConfig);case 7:case"end":return e.stop()}}),e)}))),this.role=O,this.title=_,this._isInited=!0,this._communicator=new d.default(t,window,window,{open:this._open,terminate:function(e,t,r){a._isOpen=!1,a._el?u.default.render(i.default.createElement("div",null),a._el,r):r()},buttonClicked:function(e,t,r){"back"===t.id&&(a._communicator.send("close"),a.role=g.default.translate("course-catalog.view.role.learner"),a.title=g.default.translate("course-catalog.header")),"manage-catalog"===t.id&&a.changeRole(),r()}},this)}var t,a;return(0,s.default)(e,[{key:"_open",value:(a=(0,o.default)(n.default.mark((function e(t,a,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.default.isFeatureEnabled("courseCatalog")||p.default.isFeatureEnabled("learnersCourseCatalog")||this._communicator.send("setStage",{id:f.default.STAGES.LIBRARY},r),this._setHostToolbar(),this._currentRoute=a.hash,this._queryParams=a.queryParams,this.setNav(this._currentRoute,this._queryParams,a.options),this._el=document.getElementById(a.targetId),"management"===a.hash&&this.changeRole(),e.next=9,this.render();case 9:r();case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return a.apply(this,arguments)})},{key:"render",value:(t=(0,o.default)(n.default.mark((function e(){var t=this;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){u.default.render(i.default.createElement(h.default,{role:t.role,communicator:t._communicator}),t._el,e)})));case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}()}}]);