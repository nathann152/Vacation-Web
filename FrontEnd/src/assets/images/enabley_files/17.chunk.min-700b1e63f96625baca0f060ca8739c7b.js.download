var echo=(window.webpackJsonpecho=window.webpackJsonpecho||[]).push([[17],[,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(14)).default;t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(9)),s=a(n(43)),l=a(n(163)),u=a(n(146)),c=a(n(147)),d=a(n(82)),f=a(n(127)),p=a(n(48)),h=a(n(156)),m=a(n(155)),v=a(n(61)),g=a(n(11)),E=a(n(164)),_=a(n(50)),y=a(n(37)),k=a(n(78)),S=a(n(18)),T=a(n(44)),b=a(n(32)),C=n(39),I=a(n(21));function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N,w="AD73C03D82124E0CD4F657708C1C1CC21E6337A1BF69EBF8338813D8CF238F64",R="/PlayAppService/userContext",P="/PlayAppService/refreshAccessToken",M="/PlayAppService/cloudFront/signedUrlMap",L="/PlayAppService/dynamicLink/shortUrl",D="/PlayAppService/search",x="/PlayAppService/groups/channels/:channelId/separated",F="/PlayAppService/groups/types",U="".concat("utm_context","=").concat("pri");try{N=sessionStorage.tabID&&"2"!==sessionStorage.closedLastTab?sessionStorage.tabID:sessionStorage.tabID="tab_".concat(Date.now()),sessionStorage.closedLastTab="2"}catch(H){console.error(H)}var G=function(){sessionStorage.closedLastTab="1"};window.addEventListener("unload",G),window.addEventListener("beforeunload",G);var B={getHash:function(){return window.location.hash},getHref:function(){return window.location.href},getHostname:function(){return window.location.hostname},getURLParam:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.getHref(),n="[\\?&]"+(e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)",a=new RegExp(n),r=a.exec(t);return null!==r?r[1]:null},getURLParams:function(e){var t=B.getHrefWithoutHash(),n={};return t.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(t,a,r,i){a&&i&&(e&&-1===a.indexOf(e)||(n[a]=i))})),n},getHrefWithoutHash:function(){var e,t=B.getHref(),n=B.getHash();return n&&(e=t.lastIndexOf(n),t=t.substring(0,e)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t},jsonToQueryParams:function(e){var t="";return Object.keys(e).forEach((function(n){var a=e[n];a&&(t+="".concat(n,"=").concat(a,"&"))})),t&&(t="?".concat(t.substring(0,t.length-1))),t},setAnalyticsParamsToUrl:function(){var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(null===(e=r.appConf)||void 0===e||null===(t=e.featureFlags)||void 0===t?void 0:t.googleTagManager)||{};if(i.enabled&&i.linkedInPixel){var o=-1!==((null===(n=r.userDetails)||void 0===n||null===(a=n.roles)||void 0===a?void 0:a.possibleRoles)||[]).indexOf(I.default.ROLES.INSTRUCTOR);if(o){var s=B.getHrefWithoutHash(),l={};if(s.includes("?")){if((l=B.getURLParams()).utm_context)return;s=s.substring(0,s.indexOf("?"))}localStorage.getItem("utm_context")||localStorage.setItem("utm_context","pri"),l.utm_context="pri";var u="".concat(s).concat(B.jsonToQueryParams(l)).concat(B.getHash());window.location.replace(u)}else if(B.getHref().includes(U)){var c=B.getHrefWithoutHash(),d=B.getURLParams();d.utm_context&&(delete d.utm_context,c=c.substring(0,c.indexOf("?")),localStorage.getItem("utm_context")&&localStorage.removeItem("utm_context"),window.location.replace("".concat(c).concat(B.jsonToQueryParams(d)).concat(B.getHash())))}}},getHrefWithoutAnalyticsParams:function(){if(B.getHref().includes(U)){var e=B.getHrefWithoutHash(),t=B.getURLParams();if(t.utm_context)return delete t.utm_context,e=e.substring(0,e.indexOf("?")),"".concat(e).concat(B.jsonToQueryParams(t)).concat(B.getHash())}return B.getHref()},arrayMove:function(e,t,n){if(n>=e.length)for(var a=n-e.length+1;a--;)e.push(void 0);e.splice(n,0,e.splice(t,1)[0])},getSite:function(){if(B.site)return B.site;if(B.isCustomDomain()){var e=B._getAppDetails().site;B.site=e||B.getSiteFromUrl()}else B.site=B.getSiteFromUrl();return B.site},getSiteFromUrl:function(){return B.getURLParam("site")||B.getSiteFromHostname()},getSiteFromHostname:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.getHostname();if(/^(global\.echo|training15)\..*/.test(e))return e;var t=e.indexOf(".");return-1!==t?e.substring(0,t):e},clearCachedSite:function(){B.site=void 0},getPercentStr:function(e){return(0,v.default)(e)||-1===e?I.default.NO_VALUE:"".concat((0,m.default)(e,1),"%")},sortByLastName:function(e,t){var n=function(e){return"".concat(e.lastName.toLowerCase()," ").concat(e.firstName.toLowerCase())};return t?(0,h.default)(e,n):(0,h.default)(e,n).reverse()},getFullNameByFirstName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e," ").concat(t).trim()},isBrowserSafari:function(){return"safari"===B.getUserAgent().browser},isBrowserIE:function(){var e=B.getUserAgent().browser;return"ie"===e||"edge"===e},isBrowserIEOnly:function(){return"ie"===B.getUserAgent().browser},isBrowserEdge:function(){return"edge"===B.getUserAgent().browser},isBrowserChrome:function(){return"chrome"===B.getUserAgent().browser},isBrowserFirefox:function(){return"firefox"===B.getUserAgent().browser},isIos:function(){return"ios"===B.getUserAgent().platform||"ipad"===B.getUserAgent().deviceType},isAndroid:function(){return"android"===B.getUserAgent().platform},isPlatformHasSpecificVersion:function(e){return B.getUserAgent().platformVersion===e},isTablet:function(){return y.default.isTablet||"ipad"===B.getUserAgent().deviceType},isIpadSafari:function(){return"osx"===B.getUserAgent().platform&&"ipad"===B.getUserAgent().deviceType},isMobile:function(){return y.default.isPhone},isPC:function(){return!B.isTablet()&&!B.isMobile()},isLandscape:function(){return window.outerWidth>window.outerHeight},isStandalone:function(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone},isCordova:function(){return!!window.cordova},isCordovaOffline:function(){return""===location.hostname&&("file:"===location.protocol||"cdvfile:"===location.protocol)},_isExtension:!1,isExtension:function(e){return(0,v.default)(e)||(B._isExtension=e),B._isExtension},getPlatformClasses:function(){var e=B.isAndroid();return(0,g.default)({tablet:B.isTablet(),android:e,ios:B.isIos(),pc:B.isPC(),mobile:B.isMobile(),"android-6":e&&B.isPlatformHasSpecificVersion(6)})},getUserAgent:function(){if(!B.currentUserAgent){for(var e,t={},n=navigator.userAgent.toLowerCase(),a=[{name:"ie",regex:/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i},{name:"edge",regex:/(Edge)\/((\d+)?[\w\.]+)/i},{name:"ie",regex:/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i},{name:"opera",regex:/(opera\smini)\/((\d+)?[\w\.-]+)/i},{name:"opera",regex:/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i},{name:"opera",regex:/(opera).+version\/((\d+)?[\w\.]+)/i},{name:"opera",regex:/(opera)[\/\s]+((\d+)?[\w\.]+)/i},{name:"opera",regex:/\s(opr)\/((\d+)?[\w\.]+)/i},{name:"opera",regex:/\s(opr)\/((\d+)?[\w\.]+)/i},{name:"chrome",regex:/(chrome)\/v?((\d+)?[\w\.]+)/i},{name:"chrome",regex:/(crios)\/v?((\d+)?[\w\.]+)/i},{name:"firefox",regex:/(firefox)\/((\d+)?[\w\.-]+)/i},{name:"safari",regex:/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,versionIndex:1},{name:"firefox",regex:/fxios\/([\w\.-]+)/i,versionIndex:0}],r=0;r<a.length;r++)if(e=a[r].regex.exec(n)){t.browser=a[r].name;var i=Number.isInteger(a[r].versionIndex)?a[r].versionIndex:3;t.version=parseInt(e[i],10);break}-1!==n.indexOf("windows")?t.platform="windows":-1!==n.indexOf("android")||-1!==n.indexOf("ipad")&&-1!==navigator.platform.toLowerCase().indexOf("linux")?(t.platform="android",t.platformVersion=parseInt(B.getAndroidVersion(n),10)):-1!==n.indexOf("ipad")||-1!==n.indexOf("iphone")?t.platform="ios":-1!==n.indexOf("cros")?t.platform="chromeos":-1!==n.indexOf("mac os x")?(t.platform="osx",-1!==n.indexOf("macintosh")&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1&&(t.deviceType="ipad")):-1!==n.indexOf("linux")&&(t.platform="linux"),B.currentUserAgent=t}return B.currentUserAgent},getAndroidVersion:function(e){var t=e.match(/android\s([0-9\.]*)/i);return t?t[1]:void 0},getConfig:function(){return new Promise((function(e,t){if(B._config)e(B._config);else{var n=B.getURLParam("f2f_url");if(!n){var a=window.location.port?":".concat(window.location.port):"";n="//".concat(window.location.hostname).concat(a,"/f2f_config.json")}b.default.get(n,{},{},!0).then((function(t){var n=B.getURLParam("backend_url"),a=B.getURLParam("assets_prefix");t=B._changeAppsToSubdomain(t),n&&(t.backend_url=decodeURIComponent(n)),a&&(t.assets_prefix=decodeURIComponent(a)),B._config=t,e(t)})).catch((function(e){t(e)}))}}))},isCustomDomain:function(){var e=B.getHostname();return-1===e.indexOf("timetoknow.com")&&-1===e.indexOf("enabley.io")&&-1===e.indexOf("localhost")},getInitConfigParams:function(){return B.isCustomDomain()?{customDomain:B.getHostname()}:{site:B.getSite()}},redirectToCustomDomain:function(e){var t=e.customDomains;if(t&&t.length){var n=B.getHostname();if(-1===t.indexOf(n)){var a=B.getHrefWithoutHash(),r={};a.includes("?")&&((r=B.getURLParams()).site&&delete r.site,a=a.substring(0,a.indexOf("?"))),a=a.replace(n,t[0]),r=Object.keys(r).length?B.jsonToQueryParams(r):"";var i="".concat(a).concat(r).concat(B.getHash());window.location.replace(i)}}},_changeAppsToSubdomain:function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.default)(t,2),a=n[0],r=n[1];if((0,p.default)(r))e[a]=B._changeAppsToSubdomain(r);else if(0!==r.indexOf("//apps.")||-1===window.location.hostname.indexOf("timetoknow")&&-1===window.location.hostname.indexOf("rayzone")&&-1===window.location.hostname.indexOf("aurora50.com")&&-1===window.location.hostname.indexOf("birthrightisrael.com")&&-1===window.location.hostname.indexOf("inter-il")&&-1===window.location.hostname.indexOf("learning.msumain.edu.ph")&&-1===window.location.hostname.indexOf("socasesores.com")&&-1===window.location.hostname.indexOf("academia.heinekenbrasil.com.br")&&-1===window.location.hostname.indexOf("atualizatreinamento.com.br")&&-1===window.location.hostname.indexOf("maytronicsacademy.com")&&-1===window.location.hostname.indexOf("enabley")||window.location.port)e[a]=r;else{var i=new RegExp(/^\/\/[a-z0-9-]+(\.[a-z0-9-]+)*(\/)?/);e[a]=r.replace(i,"//".concat(window.location.hostname,"/")),"assets_prefix"===a&&(e[a]=e[a].slice(0,-1))}return e}),{})},_configForceHttps:function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.default)(t,2),a=n[0],r=n[1];return(0,p.default)(r)?e[a]=B._configForceHttps(r):0===r.indexOf("//")?e[a]="https:".concat(r):e[a]=r,e}),{})},getDeepSortFunc:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a,r){for(var i=0;i<e.length;i++){var o=e[i];if(n[o]){var s=n[o](a[o],r[o])*(t?-1:1);if(0!==s)return s}else{var l=(0,d.default)(a[o])?a[o].toLowerCase():a[o],u=(0,d.default)(r[o])?r[o].toLowerCase():r[o];if(l<u)return t?-1:1;if(l>u)return t?1:-1}}return 0}},getTaskTitle:function(e,t,n){return"".concat(e," ").concat(t.taskIndex+1).concat(n?"":" - ".concat(t.taskType))},isRtl:function(e){return e||(e=B.getLocale()),"rtl"===B.getLocaleDirection(e)},isLtr:function(){return!B.isRtl()},getLocaleDirection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en_US";return(e=e.substr(0,2).toLowerCase()).match(/hw|iw|he|ar|yi|ji/g)?"rtl":"ltr"},getLocale:function(){if(B._locale)return B._locale;var e=B.getURLParam("locale")||B.getAppdata().appConf.locale,t=S.default.getAvailableContentLocales();return e&&-1!==t.indexOf(e)?B._locale=e:B._locale="en_US",B._locale},getAccountLocale:function(){if(B._accountLocale)return B._accountLocale;var e=B.getAppdata().appConf.accountLocale,t=S.default.getAvailableContentLocales();return e&&-1!==t.indexOf(e)?B._accountLocale=e:B._accountLocale="en_US",B._accountLocale},setUser:function(e){B._user=e},getUser:function(){return B._user},getRolesByContext:function(e,t){return!t&&B.userContexts&&B.userContexts[JSON.stringify(e)]?Promise.resolve(B.userContexts[JSON.stringify(e)]):b.default.get("".concat(B.getAppdata().backend_url).concat(R),{},{params:e,failOnOffline:!0}).then((function(t){return B.userContexts||(B.userContexts={}),t.isManager&&t.roles.push(C.ROLES.MANAGER),B.userContexts[JSON.stringify(e)]=t,t}))},getUserRoleBySite:function(e){var t=B.getAppdata().siteDetails.id;this.getRolesByContext({siteId:t}).then((function(t){e(t)})).catch((function(e){console.error("Problem with loading user context role, ".concat(e&&e.message?e.message:JSON.stringify(e)))}))},getChannelSeparatedGroups:function(e){return b.default.get("".concat(B.getAppdata().backend_url).concat(x),{channelId:e})},isUserShowLeaderboardAndDiscussion:function(e){var t,n,a;if(!e)return!0;var r=null===(t=B.getAppdata())||void 0===t||null===(n=t.appConf)||void 0===n||null===(a=n.groupSeparation)||void 0===a?void 0:a.enabled;return!(!e.length&&r)},getChannelGroupTypes:function(){return b.default.get("".concat(B.getAppdata().backend_url).concat(F)).then((function(e){return e}))},setRoles:function(e){B._roles=e},setAppdata:function(e){B._appdata=e},getAppdata:function(){return B._appdata},getLiveSessionVendorType:function(e){var t,n,a,r;if(e){var i=B.parsePreset(e);if(i["liveSession.config.type"])return i["liveSession.config.type"].toUpperCase()}return null===(t=B._appdata)||void 0===t||null===(n=t.appConf)||void 0===n||null===(a=n.liveSession)||void 0===a||null===(r=a.config)||void 0===r?void 0:r.type.toUpperCase()},parsePreset:function(e){var t,n,a,r=null===(t=B.getAppdata().appConf)||void 0===t||null===(n=t.channel)||void 0===n||null===(a=n.preset)||void 0===a?void 0:a.types;if(!r)return{};var i=new RegExp("".concat(e,"::\\[(.*)\\]"),"g").exec(r);return(null==i?void 0:i[1])?i[1].split(",").reduce((function(e,t){var n=t.split(":"),a=(0,s.default)(n,2),r=a[0],i=a[1];return A(A({},e),{},(0,o.default)({},r,i))}),{}):{}},isFeatureEnabled:function(e){var t,n;if(!e)return!1;var a=B.getAppdata(),r=null==a||null===(t=a.appConf)||void 0===t||null===(n=t.featureFlags)||void 0===n?void 0:n[e];return!!r&&((0,f.default)(r)?r:!!r.enabled)},userHasRole:function(e){(0,d.default)(e)&&(e=[e]);var t=B.getUserRoles();return!!(0,u.default)(t,e).length},userHasAssignedRole:function(e){(0,d.default)(e)&&(e=[e]);var t=B.getUser().roles.assignedRoles;return!!(0,u.default)(t,e).length},userHasPossibleRole:function(e){(0,d.default)(e)&&(e=[e]);var t=B.getUser().roles.possibleRoles;return!!(0,u.default)(t,e).length},getAssignedRoles:function(){return B.isAnonymous()?[]:B.getUser().roles.assignedRoles},getUserRoles:function(){return B._roles},isLoggedInUser:function(e){return e.id===this.getUser().id},isInstructor:function(e){return e?(0,l.default)(e.roles,C.ROLES.INSTRUCTOR)>-1:B.userHasRole(C.ROLES.INSTRUCTOR)},isLearner:function(e){return e?(0,l.default)(e.roles,C.ROLES.LEARNER)>-1:B.userHasRole(C.ROLES.LEARNER)},isEditor:function(e){return e?(0,l.default)(e.roles,C.ROLES.EDITOR)>-1:B.userHasRole(C.ROLES.EDITOR)},isReviewer:function(e){return e?(0,l.default)(e.roles,C.ROLES.REVIEWER)>-1:B.userHasRole(C.ROLES.REVIEWER)},isGuest:function(){return!!B._user&&B._user.isGuest},isAnonymous:function(){var e=B.getCurrentToken();return e&&e.isAnonymous},hasRoleInAnyChannel:function(e){return k.default.getRoleByEntityType(C.ROLE_AND_PERMISSION_CONTEXT.CHANNEL).indexOf(e)>-1},getSiteRoles:function(){return B._user.roles.siteRoles},getAccountRoles:function(){return B._user.roles.accountRoles},getPossibleRoles:function(){return B._user.roles.possibleRoles},isTrainingManager:function(){return!!B.getSiteRoles()&&!!B.getSiteRoles().find((function(e){return e===C.ROLES.TRAINING_MANAGER}))},isAdministrator:function(){var e=B.getAccountRoles();return!!e&&!!e.find((function(e){return e===C.ROLES.ACCOUNT_ADMIN}))},isSubAccountAdmin:function(){var e=B.getSiteRoles();return!!e&&!!e.find((function(e){return e===C.ROLES.SITE_ADMIN}))},isManager:function(e){return e?(0,l.default)(e.roles,C.ROLES.MANAGER)>-1:B.userHasRole(C.ROLES.MANAGER)},isTrackableFile:function(e){var t=!1;return("SCORM"!==e.externalContentType||B.isScormSupportedVersion(e.externalContentVersion))&&(t=!0),t},isScormSupportedVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==e.indexOf("CAM 1.3")||-1!==e.indexOf("2004")||-1!==e.indexOf("1.2")},getPastedText:function(e){var t="";if(e.clipboardData){var n=B.isBrowserIE()?"Text":"text/plain";t=e.clipboardData.getData(n)}return t},pasteHtmlAtCaret:function(e){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount){var n=t.getRangeAt(0);n.deleteContents();var a=document.createElement("div");a.innerHTML=e;for(var r,i=document.createDocumentFragment(),o=a.firstChild;o;)r=i.appendChild(o),o=a.firstChild;n.insertNode(i),r&&(n.setStartAfter(r),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}},setDomainFactory:function(e,t,n){var a=this;return function(r){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=function(a){var o=t,s=a[e]||"";i&&n&&(o=n,r=""),Object.keys(o).forEach((function(e){(0,d.default)(o[e])&&0!==o[e].indexOf("http")&&(t[e]="".concat(s).concat(o[e]))}))};return new Promise((function(t,n){if(r){var i={};i[e]=r,o(i),t()}else a.getConfig().then((function(e){o(e),t()})).catch((function(e){n(e)}))}))}},getKeyWithHighestValue:function(e){return Object.keys(e).reduce((function(t,n){return e[t]>e[n]?t:n}))},getAppOverlay:function(){return document.getElementById("app-overlay")},setFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())},getContentIdsString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(n,a){var r=n.version?":".concat(n.version):"",i=a===e.length-1?"":",";t+="".concat(n.id).concat(r).concat(i)})),t},setIsLtiSession:function(e){B._isLtiSession=e},isLtiSession:function(){return B._isLtiSession},setIsXapiSession:function(e){B._isXapiSession=e},isXapiSession:function(){return B._isXapiSession},setXapiContext:function(e){B._xapiContext=e},getXapiContext:function(){return B._xapiContext},setIsLocked:function(e){B._isLocked=e},getIsLocked:function(){return B._isLocked},setIsReportLocked:function(e){B._isReportLocked=e},getIsReportLocked:function(){return B._isReportLocked},removeTokensFromURL:function(){history.replaceState(null,"",location.pathname+location.search.replace(/[\?&]access_token=[^&]+/,"").replace(/[\?&]invitation_token=[^&]+/,"").replace(/[\?&]user_self_service_site_token=[^&]+/,"").replace(/^&/,"?")+location.hash)},getToken:function(){return(0,i.default)(r.default.mark((function e(){var t,n,a,i,o,s,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(new Date).getTime()/1e3,a=B.getURLParam("user_self_service_site_token"),i=B.getURLParam("invitation_token"),o=B.getURLParam("access_token"),B.removeTokensFromURL(),s=B._getTokenFromStorage(),a?(t=B.decodeJWT(a),B.storeToken(t),B._replaceHistoryStateAfterSelfServiceLoginRedirect()):o?s&&o!==s.access_token||!s?(t={access_token:o,expires_in:B.getURLParam("expires_in")||14400,created_time:n},i&&(t.invitation_token=i),B.storeToken(t)):t=s:s&&(t=s),!B.isCordovaOffline()){e.next=14;break}return e.next=10,T.default.readFile("appData.json");case 10:l=e.sent,(t=l.token).expires_in=9999999999999,B.storeToken(t);case 14:if(!t){e.next=27;break}if(!t.refresh_token){e.next=20;break}if(B._tokenRefreshing||!(n+7200>t.created_time+t.expires_in)&&t.assets_token&&0!==Object.keys(t.assets_token).length){e.next=18;break}return e.abrupt("return",B.refreshToken().then((function(e){return e&&"offline"===e.message?t.assets_token:(t=e)?B._getAssetsToken(t.expires_in):void 0})).then((function(e){if(e||""===e)return t.assets_token=e,B.setAssetsCookie(e,t.created_time,t.expires_in),B.storeToken(t),t})).catch((function(){return Promise.resolve()})));case 18:e.next=22;break;case 20:if(!(n>t.created_time+t.expires_in)){e.next=22;break}return e.abrupt("return",B.invalidateToken());case 22:if(t.assets_token||""===t.assets_token){e.next=24;break}return e.abrupt("return",B._getAssetsToken(t.expires_in).then((function(e){return t.assets_token=e,B.setAssetsCookie(e,t.created_time,t.expires_in),B.storeToken(t),t})).catch((function(){return Promise.resolve()})));case 24:return t.assets_token&&B.setAssetsCookie(t.assets_token,t.created_time,t.expires_in),B.storeToken(t),e.abrupt("return",Promise.resolve(t));case 27:return e.abrupt("return",Promise.resolve());case 28:case"end":return e.stop()}}),e)})))()},_replaceHistoryStateAfterSelfServiceLoginRedirect:function(){var e=window.location,t=e.protocol,n=e.host;window.history.replaceState(void 0,void 0,"".concat(t,"//").concat(n))},_getAssetsToken:function(e){var t=4*Math.ceil(e/60);return b.default.get("".concat(B.getAppdata().backend_url).concat(M),{},{params:{minToLive:t}})},_getTokenFromStorage:function(){var e=B._getTokenKey(),t=localStorage.getItem(e);if(t)try{t=B.decodeJWT(t)}catch(n){return localStorage.removeItem(e),null}return t},getCodedTokenFromStorage:function(){var e=B._getTokenKey();return{key:e,token:localStorage.getItem(e)}},getCurrentToken:function(){var e=B._getTokenFromStorage();if(e){var t=(new Date).getTime()/1e3;return e.refresh_token&&!B._tokenRefreshing&&t+7200>=e.created_time+e.expires_in&&B.refreshToken().then((function(e){"offline"!==(null==e?void 0:e.message)&&B._getAssetsToken(e.expires_in).then((function(t){e.assets_token=t,B.setAssetsCookie(t,e.created_time,e.expires_in),B.storeToken(e)}))})),e}},getCurrentSessionAccessToken:function(){var e=B.getCurrentToken();return e?e.access_token:""},getCurrentSessionAssetsToken:function(){var e=B.getCurrentToken();return e?e.assets_token:""},refreshToken:function(){return B._tokenRefreshing=!0,new Promise((function(e){var t=B._getTokenFromStorage(),n=B._getAppDetails().site;return t?b.default.post("".concat(B.getAppdata().backend_url).concat(P),{},{},{params:{refresh_token:t.refresh_token,site:n},failOnOffline:!0},!0).then((function(n){return n.assets_token=t.assets_token,n.username=t.username,B.setAssetsCookie(t.assets_token,t.created_time,t.expires_in),B.storeToken(n),B._tokenRefreshing=!1,e(n)})).catch((function(t){return B._tokenRefreshing=!1,t&&"offline"===t.message?e(t):e()})):(B._tokenRefreshing=!1,e())}))},storeToken:function(e){var t=B._getTokenKey();e.created_time||(e.created_time=(new Date).getTime()/1e3),e.username&&(e.username=e.username.toLowerCase());var n=B.encodeJWT(e);localStorage.setItem(t,n)},encodeJWT:function(e){return E.default.encode(e,w)},decodeJWT:function(e){return e?E.default.decode(e,w,!1,"HS256"):""},_getTokenKey:function(){var e=B._getAppDetails(),t=e.appId,n=e.site;if(n===C.GENERIC_LOGIN_SITE_NAME)for(var a=0;a<localStorage.length;a++)if(0===localStorage.key(a).indexOf("token:".concat(t,":"))){var r=localStorage.key(a),i=r.split(":");return B.setAppDetails(i[2],t),r}return"token:".concat(t,":").concat(n)},checkAllowCookie:function(){if(navigator.cookieEnabled)return!0;document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e},setAssetsCookie:function(e,t,n){if(e){var a=B.getAppdata(),r=new Date(1e3*t+1e3*n*4),i=B.getDomainName(a.assets_prefix);B.deleteAssetsCookie();var o=window.location.protocol.includes("https")?" SameSite=None; Secure;":"";Object.keys(e).forEach((function(t){document.cookie="".concat(t,"=").concat(e[t],"; expires=").concat(r.toUTCString(),"; path=/; domain=").concat(i,";").concat(o)}))}},deleteAssetsCookie:function(){var e=new Date("Thu, 01-Jan-1970 00:00:01 GMT"),t=window.location.protocol.includes("https")?" SameSite=None; Secure;":"",n=B.getDomainName();document.cookie="CloudFront-Policy=; expires=".concat(e.toUTCString(),"; path=/; domain=").concat(n,";").concat(t),document.cookie="CloudFront-Signature=; expires=".concat(e.toUTCString(),"; path=/; domain=").concat(n,";").concat(t),document.cookie="CloudFront-Key-Pair-Id=; expires=".concat(e.toUTCString(),"; path=/; domain=").concat(n,";").concat(t)},getDomainName:function(e){var t=e||document.domain;if(!t.includes("timetoknow")&&!t.includes("enabley"))return document.domain;var n=t.split("."),a=n.length;return a<2?n[0]:"".concat(n[a-2],".").concat(n[a-1])},invalidateToken:function(e){var t=B._getAppDetails(),n=t.appId,a=t.site;return new Promise((function(t){e?b.default.post(e).then((function(e){B.removeStoredToken(n,a),t(e)})).catch((function(e){B.removeStoredToken(n,a),t(e)})):(B.removeStoredToken(n,a),t())}))},removeStoredToken:function(){var e=B._getTokenKey();localStorage.removeItem(e),B.deleteAssetsCookie()},setAppDetails:function(e,t){B.site=e,sessionStorage.setItem("site",e),sessionStorage.setItem("appId",t)},_getAppDetails:function(){return{site:sessionStorage.getItem("site"),appId:sessionStorage.getItem("appId")}},getAssetPath:function(e){var t,n;if(!e)return e;if(B.isCordovaOffline()){var a=localStorage.getItem("OfflineItemId"),r=e.split("/");2===r.length&&(a=r[0]);var i="http://127.0.0.1:8081/".concat(a,"/resources/").concat(e.replace(/^.*[\\\/]/,""));return console.log("asset path requested: ".concat(e,", return: ").concat(i)),i}var o=new RegExp(/^(http(s)?:)?\/\/[a-z0-9-_]+(\.[a-z0-9-_]+)*(\/)/),s=e.match(o),l=(null===(t=B.getAppdata())||void 0===t||null===(n=t.accountDetails)||void 0===n?void 0:n.customDomain)||"";if(!s||!s[0]||!s[0].match("/t2k|timetoknow|".concat(l,"/"))||e.match(/\/public\/|\/public%2F/))return e;var u=new URL("https:".concat(e));return e=e.replace(o,"/"),u.hostname===window.location.hostname||window.location.hostname.includes("localhost")?e="".concat(B.getAppdata().assets_prefix).concat(e):"".concat(window.location.origin).concat(e)},generateShortUrl:function(e){return new Promise((function(t,n){b.default.post("".concat(B.getAppdata().backend_url).concat(L),{},{longUrl:e},{failOnOffline:!0}).then((function(e){e?t(e):n(e)})).catch(n)}))},getWhatsappLink:function(e){return"whatsapp://send?text=".concat(e)},getCustomHeaderStyle:function(e){var t=B.getAppdata();return t.appConf&&t.appConf.toolbarCustomization&&t.appConf.toolbarCustomization.backgroundColor?(0,o.default)({},e,t.appConf.toolbarCustomization.backgroundColor):null},getCustomeHeaderBackgroundImage:function(){var e=B.getAppdata();if(e.appConf&&e.appConf.toolbarCustomization){var t=e.appConf.toolbarCustomization;if(B.isMobile()&&t.backgroundMobileImage)return{background:"url(".concat(t.backgroundMobileImage,") center / cover no-repeat")};if(!B.isMobile()&&t.backgroundFullImage)return{background:"url(".concat(t.backgroundFullImage,") center / cover no-repeat")}}return null},getDirectUrl:function(e,t,n,a){var r=a||B.getHref(),i=r.indexOf("#");if(-1!==i&&(r=r.substring(0,i)),r+="#/$/".concat(e),t){var o="";(0,c.default)(t,(function(e,t){e&&(o+="".concat(t,"=").concat(e,"&"))})),o&&(o=o.substring(0,o.length-1),r+="/params/".concat(o))}return n&&(r+="/".concat(n)),r},getTextWidth:function(e,t){if(!e||!t)return 0;var n=(this.getTextWidth.canvas||(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");if(n){n.font=t;var a=n.measureText(e);return Math.ceil(a.width)}return 15*e.length},debounce:function(e,t,n){var a,r=this;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=r,u=function(){a=null,n||e.apply(l,o)},c=n&&!a;clearTimeout(a),a=setTimeout(u,t),c&&e.apply(l,o)}},getOriginWithPath:function(){var e="".concat(window.location.origin).concat(window.location.pathname);if(-1!==e.indexOf(".html")){var t=e.lastIndexOf("/");e=e.substring(0,t)}var n=e.length-1;return e.lastIndexOf("/")===n&&(e=e.substring(0,n)),e},storageEstimate:function(){return navigator&&navigator.storage&&navigator.storage.estimate?navigator.storage.estimate():Promise.resolve({quota:1,usage:0})},getUserMediaPermissions:function(e){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):new Promise((function(t,n){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia(e,(function(){t()}),(function(){n({message:"disallow"})})):n({message:"not_support"})}))},getMediaPermissions:function(){return new Promise((function(e,t){if(B.isCordova()&&B.isAndroid()&&window.cordova&&window.cordova.plugins&&window.cordova.plugins.permissions){var n=window.cordova.plugins.permissions,a=[n.CAMERA,n.RECORD_AUDIO];n.checkPermission(a,(function(r){r.hasPermission?B.getUserMediaPermissions({video:!0,audio:!0}).then(e).catch((function(t){console.error(t),e()})):n.requestPermissions(a,(function(n){n.hasPermission?B.getUserMediaPermissions({video:!0,audio:!0}).then(e).catch((function(t){console.error(t),e()})):t()}),t)}),t)}else B.getUserMediaPermissions({video:!0,audio:!0}).then(e).catch((function(t){console.error(t),e()}))}))},_isOnline:!0,isOnline:function(e){return(0,v.default)(e)||(B._isOnline=e),B._isOnline},getFileType:function(e){var t=e.type;return t||(t=e.name?e.name.substring(e.name.lastIndexOf(".")+1):""),t},getFileTypeFromFileName:function(e){return e.name?e.name.substring(e.name.lastIndexOf(".")+1):this.getShortenedFileType(e.type)},getShortenedFileType:function(e){return e?e.substring(e.lastIndexOf("/")+1):""},validateImageFileType:function(e){var t=B.getFileType(e);return!!t&&!!I.default.IMAGE_VALID_TYPES.join(",").match(t)},getSearchItems:function(e){return b.default.get("".concat(B.getAppdata().backend_url).concat(D),{},{params:{phrase:e}})},formatSecondsToHMS:function(e,t){var n=!t||e<3600?"mm:ss":"HH:mm:ss",a=_.default.duration(e,"seconds");return(0,_.default)(a.asMilliseconds()).format(n)},getAssetsPrefix:function(){return B.getAppdata().assets_prefix},lockOrientationToLandscape:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.innerHTML="@media screen and (orientation: ".concat("portrait",") {\n\t\t\t\t#t2k-app {\n\t\t\t\t\ttransform: rotate(-90deg);\n\t\t\t\t    transform-origin: left top;\n\t\t\t\t    width: 100vh;\n\t\t\t\t    overflow-x: hidden;\n\t\t\t\t    position: absolute;\n\t\t\t\t    top: 100%;\n\t\t\t\t    left: 0;\n\t\t\t\t    height: 100vw;\n\t\t\t\t}\n\t\t\t}"),!e&&this.forceLandscapeStyleElementRef&&(t.removeChild(this.forceLandscapeStyleElementRef),this.forceLandscapeStyleElementRef=null),B.isMobile()&&e&&!this.forceLandscapeStyleElementRef&&(this.forceLandscapeStyleElementRef=t.appendChild(n))},addCloudFrontKeysToSrc:function(e){var t=B.getCurrentSessionAssetsToken();return t=t?Object.entries(t).reduce((function(e,t,n){var a=(0,s.default)(t,2),r=a[0],i=a[1];return e+=n?"&":"?",0===r.indexOf("CloudFront-")&&(r=r.substr("CloudFront-".length)),e+="".concat(r,"=").concat(i)}),""):"","".concat(e).concat(t)},getMomentTimeFromSeconds:function(e){var t=e%3600,n=e%60,a=Math.floor(t/60),r=Math.floor((e-t)/3600);return(0,_.default)("".concat(r,":").concat(a,":").concat(n),"HH:mm:ss")},setTermsOfUseAccepted:function(){sessionStorage.setItem("".concat("terms-of-use","-").concat(B.getSite()),B.getUser().id)},removeTermsOfUseAccepted:function(){B.getTermsOfUseAccepted()&&sessionStorage.removeItem("".concat("terms-of-use","-").concat(B.getSite()))},getTermsOfUseAccepted:function(){var e=sessionStorage.getItem("".concat("terms-of-use","-").concat(B.getSite()));return e&&(!B.getUser()||e===B.getUser().id)},setNewsPopupDontShowAgain:function(e){var t,n,a=e||(null===(t=B.getAppdata())||void 0===t||null===(n=t.appConf)||void 0===n?void 0:n.newsPopupId);a&&localStorage.setItem("".concat(a,"-").concat(B.getSite()),B.getUser().id)},getNewsPopupDontShowAgain:function(e){var t,n,a=e||(null===(t=B.getAppdata())||void 0===t||null===(n=t.appConf)||void 0===n?void 0:n.newsPopupId);if(!a)return!0;var r=localStorage.getItem("".concat(a,"-").concat(B.getSite()));return r&&(!B.getUser()||r===B.getUser().id)},getTabId:function(){return N},isInViewport:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},isElementVisible:function(e){return e.offsetWidth>0||e.offsetHeight>0},getThemeColors:function(){var e,t;return(null===(e=this.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t?void 0:t.themeColours)||B.getDefaultThemeColors()},getDefaultThemeColors:function(){return{lightThemeColor2:"#f1e9f3",lightThemeColor1:"#c0a9c7",primaryLightThemeColor:"#9a2496",primaryColor:"#7e3495",primaryDarkThemeColor:"#4e2b6a",iconCoverAltColor:"#f05a28"}},setWhiteLabelParams:function(e){var t,n,a,r,i,o,s,l;if(null==e||null===(t=e.appConf)||void 0===t||null===(n=t.featureFlags)||void 0===n?void 0:n.whiteLabel.enabled){var u=null==e||null===(a=e.appConf)||void 0===a||null===(r=a.whiteLabel)||void 0===r?void 0:r.favIconUrl,c=null==e||null===(i=e.appConf)||void 0===i||null===(o=i.whiteLabel)||void 0===o?void 0:o.title;u&&B.setWhiteLabelFavIcon(u),c&&(document.title=c),B.setThemeColors((null==e||null===(s=e.appConf)||void 0===s||null===(l=s.whiteLabel)||void 0===l?void 0:l.colorTheme)||{})}else B.setThemeColors()},setWhiteLabelFavIcon:function(e){var t=document.querySelector("link[rel~='icon']");t||((t=document.createElement("link")).rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=e},setThemeColors:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.primaryColor){var n=t.primaryColorGradientLight||this.lightenDarkenColor(t.primaryColor,30),a=t.primaryColorGradientDark||this.lightenDarkenColor(t.primaryColor,-50);e={lightThemeColor2:B.getLighterColor(n,.1),lightThemeColor1:B.getLighterColor(t.primaryColor,.4),primaryLightThemeColor:n,primaryColor:t.primaryColor,primaryDarkThemeColor:a,iconCoverAltColor:t.coverImageAltGradientDark||a}}else e=B.getDefaultThemeColors();B.getAppdata().appConf.themeColours=e,t.primaryColor&&B.addCustomStyleTag("body {\n\t\t\t\t\t--light-theme-color-2: ".concat(e.lightThemeColor2,";\n\t\t\t\t\t--light-theme-color-1: ").concat(e.lightThemeColor1,";\n\t\t\t\t\t--light-theme-color: ").concat(e.primaryLightThemeColor,";\n\t\t\t\t\t--primary-theme-color: ").concat(e.primaryColor,";\n\t\t\t\t\t--dark-theme-color: ").concat(e.primaryDarkThemeColor,";\n\t\t\t\t\t--icon-cover-alt-color: ").concat(e.iconCoverAltColor,";\n\t\t\t\t\t--generic-loader-color: ").concat(e.primaryColor,";\n\t\t\t\t}"))},addCustomStyleTag:function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("body")[0].appendChild(t)},getLighterColor:function(e,t){var n=B.hexToRgb(e);if(!n)return e;var a=A(A({},n),{},{a:t}),r=this.getSolidRgbColorFromRgba(a);return B.rgbToHex(r)},getSolidRgbColorFromRgba:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{r:255,g:255,b:255},n={r:e.r/255,g:e.g/255,b:e.b/255,a:e.a},a={r:t.r/255,g:t.g/255,b:t.b/255},r=1-e.a,i={r:r*a.r+e.a*n.r,g:r*a.g+e.a*n.g,b:r*a.b+e.a*n.b};return{r:Math.round(255*i.r),g:Math.round(255*i.g),b:Math.round(255*i.b)}},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgbToHex:function(e){var t=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t};return"#"+t(e.r)+t(e.g)+t(e.b)},lightenDarkenColor:function(e,t){var n=!1;"#"===e[0]&&(e=e.slice(1),n=!0);var a=parseInt(e,16),r=(a>>16)+t;r>255?r=255:r<0&&(r=0);var i=(a>>8&255)+t;i>255?i=255:i<0&&(i=0);var o=(255&a)+t;return o>255?o=255:o<0&&(o=0),(n?"#":"")+(o|i<<8|r<<16).toString(16)}};window.deleteAssetsCookie=B.deleteAssetsCookie;var j=B;t.default=j},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(22)).default;t.default=r},,,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(39)),i=Object.assign({},r);t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(157)),o=a(n(48)),s=a(n(172)),l=a(n(14)),u=a(n(32)),c=a(n(44));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={_nestedTranslations:{},_translations:{},_options:{},_availableContentLocales:["am","ar","cn_CN","de_DE","en_US","es_MX","fi_FI","fr_FR","he_IL","hu_HU","it_IT","jp_JP","ko_KR","nl_NL","pl_PL","pt_BR","ro_RO","ru_RU","vi_VN","zh_TW","th_TH"],set:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return p._setPseudoLocalization(),p._setUseKeys(),this._nestedTranslations=f(f({},this._nestedTranslations),t),t=this._flattenTranslations(t),this._options=r,new Promise((function(r,o){n?u.default.get(n,void 0,{params:a}).then((function(n){e._nestedTranslations=f(f({},e._nestedTranslations),n.translations),Object.assign(e._translations,n.translations),e._translations=Object.assign({},e._flattenTranslations(e._translations),t),i&&l.default.isCordova()&&!l.default.isCordovaOffline()&&c.default.writeFile("dictionary.json","",n,"object"),r()})).catch(o):(e._translations=Object.assign({},e._flattenTranslations(e._translations),t),r())}))},clear:function(){p._translations={}},isEmpty:function(){return!Object.keys(p._translations).length},_flattenTranslations:function(e){var t={};return Object.keys(e).forEach((function(n){var a=e[n];if((0,o.default)(a)){var r=p._flattenTranslations(a);Object.keys(r).forEach((function(e){t[n+"."+e]=r[e]}))}else t[n]=a})),t},get:function(){return p._translations},getNestedJSON:function(){return p._nestedTranslations},getAvailableContentLocales:function(){var e=l.default.getAppdata();return this._availableContentLocales.filter((function(t){var n,a;return!(null==e||null===(n=e.appConf)||void 0===n||null===(a=n.dictionary)||void 0===a?void 0:a.excludedLocales)||-1===e.appConf.dictionary.excludedLocales.indexOf(t)}))},_setPseudoLocalization:function(){if(p._usePseudoLocaliztion="true"===l.default.getURLParam("pl"),p._usePseudoLocaliztion){s.default.option.startDelimiter="{",s.default.option.endDelimiter="}";var e=l.default.getURLParam("plExtension");e=e?parseInt(e,10):55,s.default.option.extend=e/100}},_setUseKeys:function(){p._useUseKeys="true"===l.default.getURLParam("rawDictionary")&&-1!==l.default.getSite().indexOf("demo")},translate:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p._useUseKeys)return n;var r=null!==(e=p._translations[n])&&void 0!==e?e:n;return p._usePseudoLocaliztion&&(r=s.default.str(r)),Object.keys(a).forEach((function(e){var n=a[e],i=new RegExp("\\{"+e+"\\}","g"),o=t._options.ignoreXSS?n:p._htmlEntities(n);r=r.replace(i,o)})),r},translateWithItems:function(e,t){var n=[p.translate(e)],a=function(e,n){return e===n?t[e.slice(1,-1)]:n};return Object.keys(t).forEach((function(e){for(var t=0;t<n.length;t++)"string"==typeof n[t]&&(n[t]=n[t].split(new RegExp("({".concat(e,"})"),"g")),n[t]=n[t].map(a.bind(null,"{".concat(e,"}"))));n=(0,i.default)(n)})),n},_htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},h=p;t.default=h},,,,,,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i={Instance:r.default,Server:r._Server};t.default=i},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t._Server=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(9)),s=a(n(173)),l=a(n(134)),u=a(n(174)),c=a(n(61)),d=a(n(148)),f=n(62),p=n(20),h=a(n(44)),m=a(n(14));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E,_,y,k,S,T="GET",b="POST",C="PUT",I="DELETE",O="HEAD",A="/PlayAppService/ping",N={},w={},R={},P=!0,M=!1,L=[],D=function(){d.default.defaults.headers.common["Content-Type"]="application/json";var e=function(e,t,n,a){var r=m.default.getUser();if(r){var i=sessionStorage.getItem("Server_recover_".concat(r.id));(i=i?JSON.parse(i):[]).push({type:e,finalUrl:t,data:n,config:a}),sessionStorage.setItem("Server_recover_".concat(r.id),JSON.stringify(i))}},t=function(e){e.headers||(e.headers={}),Object.assign(e.headers,{correlationId:(0,f.v4)()})},n=function(e){e.headers||(e.headers={});var t=m.default.getUser();t&&Object.assign(e.headers,{userId:t.id}),N&&(e.headers=g(g({},e.headers),N))},a=function(e){Object.keys(w).length&&(e.params||(e.params={}),e.params=g(g({},e.params),w))},v=function(e){e&&Object.keys(e).forEach((function(t){((0,c.default)(e[t])||(0,u.default)(e[t]))&&delete e[t]}))},D=function(){var e=m.default.getCurrentToken(),t=m.default.getUser();if(!(t&&"anonymous"===t.id&&!m.default.isAnonymous()||t&&"anonymous"!==t.id&&m.default.isAnonymous()||t&&t.username&&e&&e.username&&e.username.toLowerCase()!==t.username.toLowerCase()))return e&&e.access_token?"Bearer ".concat(e.access_token):void 0;_&&_()},x=function(e,t){var n,a=e;if(Object.keys(t).forEach((function(e){n=new RegExp(":"+e,"g"),a=a.replace(n,t[e])})),-1!==a.indexOf("/:"))throw new Error("There are unresolved params in your request url: "+a);return a},F=function(){var e=m.default.getUser();e&&sessionStorage.removeItem("Server_recover_".concat(e.id));var t=L;L=[],t.forEach((function(e){var t=e.type,n=e.finalUrl,a=e.data,r=e.config,i=e.resolve,o=e.reject;j(t,{finalUrl:n,data:a,config:r},i,o,3)}))},U=function(e,t){Object.keys(R).forEach((function(n){R[n](e,t)}))},G=function e(){if(k&&(clearTimeout(k),k=null),!y){var t=m.default.getAppdata().backend_url;y="".concat(t).concat(A)}H(T,{url:y},1).then((function(){!P&&navigator.onLine&&(U(P=!0,M=!1),F())})).catch((function(t){401===t.status?E&&E(y):P||t.status||(k=setTimeout(e,5e3))}))},B=function(e,t){var n=t.finalUrl,a=t.data,r=t.config;switch(r&&r.params&&(r.params=new window.URLSearchParams(r.params),r.params.sort()),e){case T:return d.default.get(n,r);case C:return d.default.put(n,a,r);case b:return d.default.post(n,a,r);case I:return d.default.delete(n,r);case O:return d.default.head(n,r)}return null},j=function t(n,a,r,i,o){var s=a.finalUrl,l=a.data,u=a.config,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;B(n,{finalUrl:s,data:l,config:u}).then((function(e){r(n===O?e:e.data)})).catch((function(a){var d=(a=g(g({},a),a.response)).status;if(401===d)return E&&E(s),void i(a);if(s!==y)if(c<o&&void 0===d)setTimeout((function(){t(n,{finalUrl:s,data:l,config:u},r,i,o,c+1)}),5e3);else if(a.status&&console.error("Server Error","correlationId: ".concat(u&&u.headers&&u.headers.correlationId),"Error Status: ".concat(d),a.message?a.message:a),d>=400&&d<600)i(a);else{var f=function(){var t,a,o;if(m.default.isCordovaOffline()||u.failOnOffline&&"activated"===(null===(t=navigator)||void 0===t||null===(a=t.serviceWorker)||void 0===a||null===(o=a.controller)||void 0===o?void 0:o.state))return V(),void i({message:"offline"});(P||M)&&(U(P=!1,M=!1),G()),L.push({type:n,finalUrl:s,data:l,config:u,resolve:r,reject:i}),u.recover&&e(n,s,l,u)};if(navigator.onLine){if(!y){var p=m.default.getAppdata().backend_url;y="".concat(p).concat(A)}H(T,{url:y},1).then((function(){i(a)})).catch((function(e){var t,n;(null!==(t=null==e?void 0:e.status)&&void 0!==t?t:null==e||null===(n=e.response)||void 0===n?void 0:n.status)?i(a):f()}))}else f()}else i(a)}))},H=function(){var e=(0,i.default)(r.default.mark((function e(i,l){var u,c,d,f,g,E,_,y,k,C,I,O,A,N,w,R,P,M,L,F,U,G,B,H,V,W,z,Y,K,Q,X,q,Z,J,$,ee,te,ne,ae,re=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=l.url,c=l.params,d=void 0===c?{}:c,f=l.data,g=void 0===f?{}:f,E=l.config,_=void 0===E?{}:E,y=l.removeAuth,k=re.length>2&&void 0!==re[2]?re[2]:3,t(_),v(_.params),y||(C=D(),_.headers=_.headers||{},_.headers.Authorization=_.headers.Authorization||C,_.headers.Authorization||delete _.headers.Authorization),n(_),a(_),I=x(u,d),!m.default.isCordovaOffline()||I.includes("/PlayAppService/ping")){e.next=37;break}if(O=window.location.pathname.split("/"),A=O.findIndex((function(e){return"player"===e}))-1,N=O[A],S){e.next=15;break}return e.next=15,h.default.readFile("".concat(N,"/config.json")).then((function(e){console.log("got the file selectedOfflineItemConfig",{selectedOfflineItemConfig:e}),S=e,localStorage.setItem("OfflineItemId",S.itemId)}));case 15:if(i!==T||!I.includes("/Interactions/states/taskGroups/")){e.next=22;break}return w=I.split("/"),R=w[w.indexOf("taskGroups")+1],e.next=20,h.default.readFile("".concat(N,"/interactions/").concat(R,".json")).then((function(e){console.log("got the file taskGroupIdData",{taskGroupIdData:e}),P=e}));case 20:return console.log("Rest loaded ".concat(I),{finalUrl:I,interactionResponse:P}),e.abrupt("return",Promise.resolve(P));case 22:if(i!==T){e.next=26;break}return U=null===(M=S)||void 0===M||null===(L=M.rests)||void 0===L||null===(F=L.find((function(e){return e.offlineUrl===I||e.path===I})))||void 0===F?void 0:F.data,console.log("Rest loaded ".concat(I),{finalUrl:I,responseFromFile:U}),e.abrupt("return",Promise.resolve(U));case 26:if(i!==b){e.next=37;break}if(!I.includes("/Interactions/statesAndEvents")||!(null==g||null===(G=g.states)||void 0===G?void 0:G.taskStates)){e.next=35;break}return $=Object.keys(null==g||null===(B=g.states)||void 0===B?void 0:B.taskStates)[0],ee=null==g||null===(H=g.states)||void 0===H||null===(V=H.taskStates[$])||void 0===V||null===(W=V.identifiers)||void 0===W?void 0:W.taskGroupId,te=(null==g||null===(z=g.states)||void 0===z||null===(Y=z.taskStates[$])||void 0===Y||null===(K=Y.data)||void 0===K?void 0:K.interaction)||{},ne=Object.keys(te)[0],ae=ne?null==g||null===(Q=g.states)||void 0===Q||null===(X=Q.taskStates[$])||void 0===X||null===(q=X.data)||void 0===q?void 0:q.interaction[ne]:null==g||null===(Z=g.states)||void 0===Z||null===(J=Z.taskStates[$])||void 0===J?void 0:J.data,console.log({js:(0,p.toJS)(ae)}),e.abrupt("return",h.default.readFile("".concat(N,"/interactions/").concat(ee,".json")).then((function(e){var t,n,a,r,i,l;if(null===(t=e)||void 0===t||null===(n=t.states)||void 0===n?void 0:n.taskStates)if(null===(i=e)||void 0===i||null===(l=i.states)||void 0===l?void 0:l.taskStates[$])(0,s.default)(e.states.taskStates[$],g.states.taskStates[$],(function(e,t){return(0,p.isObservableObject)(t)?(0,p.toJS)(t):t}));else{var u=g.states.taskStates[$];e.states.taskStates[$]=(0,p.isObservableObject)(u)?(0,p.toJS)(u):u}else e=(0,p.isObservableObject)(g)?(0,p.toJS)(g):g;var c=null==g||null===(a=g.states)||void 0===a||null===(r=a.taskStates[$])||void 0===r?void 0:r.serverVersion;return h.default.writeFile("".concat(ee,".json"),"".concat(N,"/interactions/"),e,"object").then((function(){return Promise.resolve({taskStates:(0,o.default)({},$,{taskId:$,taskGroupId:ee,serverVersion:c+1})})}))})));case 35:return console.log("POST: ",{finalUrl:I,data:g}),e.abrupt("return",Promise.resolve({message:"offline"}));case 37:return e.abrupt("return",new Promise((function(e,t){j(i,{finalUrl:I,data:g,config:_},e,t,k)})));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(e){if(P||e){if(!y){var t=m.default.getAppdata().backend_url;y="".concat(t).concat(A)}H(T,{url:y},1,!0).then((function(){!P&&navigator.onLine&&(k&&(clearTimeout(k),k=null),U(P=!0,M=!1),F())})).catch((function(e){401===e.status?E&&E(y):!e.status&&P&&(U(P=!1,M=!0),G())}))}};return{get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return H(T,{url:e,params:t,config:n,removeAuth:a})},put:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return H(C,{url:e,params:t,data:n,config:a,removeAuth:r})},post:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return H(b,{url:e,params:t,data:n,config:a,removeAuth:r})},head:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return H(O,{url:e,params:t,config:n,removeAuth:a})},remove:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return H(I,{url:e,params:t,config:n,removeAuth:a})},setToken:function(){},setCustomHeaders:function(e){N=g(g({},N),e)},setCustomParams:function(e){w=g(g({},w),e)},setSessionExpiredHandler:function(e){(0,l.default)(e)&&(E=e)},setOfflineHandler:function(e){var t=(0,f.v4)();return(0,l.default)(e)&&(R[t]=e),t},removeOfflineHandler:function(e){delete R[e]},setChangeUserHandler:function(e){(0,l.default)(e)&&(_=e)},recover:function(){var e=m.default.getUser();if(e){var t=sessionStorage.getItem("Server_recover_".concat(e.id));if(sessionStorage.removeItem("Server_recover_".concat(e.id)),t=t?JSON.parse(t):void 0)return new Promise((function(e){Promise.all(t.map((function(e){var t=e.type,n=e.finalUrl,a=e.data,r=e.config;return new Promise((function(e,i){j(t,{finalUrl:n,data:a,config:r},e,i,3)}))}))).then(e).catch(e)}))}return Promise.resolve()},dismissRecover:function(){var e=m.default.getUser();e&&sessionStorage.removeItem("Server_recover_".concat(e.id));var t=L;L=[],U(P,M=!0),t.forEach((function(e){(0,e.reject)({message:"offline"})})),m.default.isCordova()&&h.default.goToOfflineHtml({workOffline:!0})},checkIfOnline:V}};t._Server=D;var x=D();t.default=x},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(178));n(196);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(66));t.default=r},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATALOG_ACTIONS=t.NO_VALUE=t.CERTIFICATE_LEARNER_STATE=t.FIREBASE_PUBLIC_KEY=t.FIREBASE_CONFIG=t.IFRAME_SANDBOX_PARAMS=t.CI_PAGE_BASE_SIZE=t.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES=t.CI_VIDEO_TYPES=t.CI_PAGE_TYPES=t.CHANNEL_TYPE=t.EQUALWEB_LOCALE_MAP=t.MOMENT_LOCALE_MAP=t.INTERACTIONS_THEME=t.IMAGE_VALID_TYPES=t.COVER_IMAGE_RATIO=t.NULL_VALUES=t.CERTIFICATION_ROUTING=t.LIVE_SESSION_TYPES=t.LIVE_SESSION_TOK_BOX=t.TOOLS_ID=t.MINIMIZED_HEADER_FLAG=t.STAGES=t.MY_PURCHASES_CHANNEL_TYPE=t.GENERIC_LOGIN_SITE_NAME=t.TEMPLATE_TYPE=t.LIBRARY_ITEM_TYPES=t.LIVE_SESSION_STATES=t.FUSE_API_EXTERNAL_FILE_UPLOAD_STATUS=t.PUSH_ENGINE=t.LOCAL_CHANNEL=t.SERVER_PUSH_TYPES=t.LIBRARY_ITEM_CONTEXT_TYPE=t.ROLE_AND_PERMISSION_CONTEXT=t.SEARCH_RESULT_TYPE=t.EVENT_TYPES=t.CI_TYPE=t.DISPATCHER_TYPES=t.TOOLBAR_ELEMENT_TYPE=t.TASK_STATUS=t.ROLES=void 0;t.ROLES={INSTRUCTOR:"INSTRUCTOR",LEARNER:"LEARNER",EDITOR:"EDITOR",REVIEWER:"PREVIEW",INDEPENDENT_INSTRUCTOR:"INDEPENDENT_INSTRUCTOR",TRAINING_MANAGER:"TRAINING_MANAGER",ACCOUNT_ADMIN:"ACCOUNT_ADMIN",SITE_ADMIN:"SITE_ADMIN",MANAGER:"MANAGER"};t.TASK_STATUS={UNANSWERED:"UNANSWERED",ANSWERED:"ANSWERED",ANSWERED_CORRECTLY:"ANSWERED_CORRECTLY",ANSWERED_PARTIALLY:"ANSWERED_PARTIALLY",ANSWERED_INCORRECTLY:"ANSWERED_INCORRECTLY",OPEN_QUESTION:"OPEN_QUESTION",MEDIA:"MEDIA",ANSWER_AVAILABLE:"ANSWER_AVAILABLE"};t.TOOLBAR_ELEMENT_TYPE={CUSTOM:1,LOGO:2,USER_MENU:3,TITLE:4,ICON:5,NOTIFICATIONS:6,MESSAGING:7,SELECT:8,HELP:9,BUTTON:10,DISCUSSIONS:11,LIVE_SESSION:12,LEADERBOARD:13,SEARCH:14,EDITABLE_TITLE:15};t.DISPATCHER_TYPES={URL:"URL",CALLBACK:"CALLBACK",ANALYTICS:"ANALYTICS",XAPI:"XAPI"};t.CI_TYPE={LESSON:"LESSON",WORK_SHEET:"WORK_SHEET",FUSE:"FUSE",ASSESSMENT:"ASSESSMENT",PATH:"PATH",UCONTENT:"UCONTENT",OFF_PLATFORM_EVENT:"OFF_PLATFORM_EVENT"};t.EVENT_TYPES={CI_LOADED:"CI_LOADED",CI_TERMINATED:"CI_TERMINATED",USER_ACTIVITY:"USER_ACTIVITY",TASK_ATTEMPT:"TASK_ATTEMPT",TASK_COMPLETED:"TASK_COMPLETED",MEDIA_START:"MEDIA_START",MEDIA_END:"MEDIA_END",MEDIA_ACTIVITY:"MEDIA_ACTIVITY",EVENT_START:"EVENT_START",EVENT_END:"EVENT_END",EVENT_ACTIVITY:"EVENT_ACTIVITY"};t.SEARCH_RESULT_TYPE={CHANNEL:"CHANNEL",LESSON:"LESSON",ASSESSMENT:"ASSESSMENT",WORK_SHEET:"WORK_SHEET",FILE:"FILE",PAGE:"PAGE",CI:"CI",FUSE:"FUSE",TASK:"TASK",OFF_PLATFORM_EVENT:"OFF_PLATFORM_EVENT",CATALOG_ITEM:"CATALOG_ITEM"};t.ROLE_AND_PERMISSION_CONTEXT={ACCOUNT:"ACCOUNT",SITE:"SITE",CHANNEL:"CHANNEL",GROUP:"GROUP"};t.LIBRARY_ITEM_CONTEXT_TYPE={LEARNING_PATH:"PATH"};t.SERVER_PUSH_TYPES={SUBSCRIBE:1,UNSUBSCRIBE:2,SEND:3};t.LOCAL_CHANNEL="LOCAL_CHANNEL";t.PUSH_ENGINE={SOCKET:1};t.FUSE_API_EXTERNAL_FILE_UPLOAD_STATUS={ABORTED:"ABORTED",NO_PROGRESS_ABORTED:"NO_PROGRESS_ABORTED"};t.LIVE_SESSION_STATES={NONE:"NONE",INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",BACKGROUND:"BACKGROUND"};t.LIBRARY_ITEM_TYPES={LESSON:0,BUZZ:1,WORK_SHEET:1,ASSESSMENT:3,FUSE:4,PRESENTATION:5,CHANNEL:6,FILE:7,PATH:8,CERTIFICATE:11,STRUCTURE:13,STREAM:14,UCONTENT:15,TEMPLATE:16,BI_REPORT:17,COURSE_TEMPLATE:19,OFF_PLATFORM_EVENT:20,MASTER_COURSE:21};t.TEMPLATE_TYPE={CHANNEL_TEMPLATE:"CHANNEL_TEMPLATE",MASTER_CHANNEL:"MASTER_CHANNEL"};t.GENERIC_LOGIN_SITE_NAME="login";t.MY_PURCHASES_CHANNEL_TYPE="CATALOG";t.STAGES={STORE:"store",PLAYER:"echoPlayer",LIBRARY:"library",DOWNLOADS:"downloads",LESSON_EDITOR:"lessonEditor",BUZZ_EDITOR:"buzz",FUSE_EDITOR:"fuseEditor",REPORTS:"reports",MANAGEMENT:"management",CI_EDITOR:"ciEditor",CATALOG:"catalog"};t.MINIMIZED_HEADER_FLAG="minimizedHeader";t.TOOLS_ID={LEADERBOARD:"leaderboard",NOTIFICATIONS:"notifications",MESSAGING:"messaging",LIVE_SESSION:"liveSession"};t.LIVE_SESSION_TOK_BOX={SCRIPT_URL:"https://static.opentok.com/v2/js/opentok.min.js"};t.LIVE_SESSION_TYPES={TOKBOX:"TOKBOX",NEWROW:"NEWROW",ZOOM:"ZOOM"};t.CERTIFICATION_ROUTING={MANAGEMENT:"management",MY_CERTIFICATES:"myCertificates",ALL:"all",USER_CERTIFICATE:"userCertificate"};var a={NUMBER:-1e6,DATE:new Date(Date.UTC(0,0,0,0,0,0)).toISOString()};t.NULL_VALUES=a;t.COVER_IMAGE_RATIO={HEIGHT:420,WIDTH:606};t.IMAGE_VALID_TYPES=["image/x-png","image/gif","image/jpeg","image/png","jpg","png","gif"];t.INTERACTIONS_THEME={V1:"V1",V2:"V2"};t.MOMENT_LOCALE_MAP={en_US:"en",he_IL:"he",cn_CN:"zh-cn",es_MX:"es",jp_JP:"ja",vi_VN:"vi",pt_BR:"pt-br",it_IT:"it",de_DE:"de",ru_RU:"ru",nl_NL:"nl",fr_FR:"fr",ro_RO:"ro",ko_KR:"ko",ar:"ar",am:"en",zh_TW:"zh-tw",hu_HU:"hu",pl_PL:"pl",fi_FI:"fi",th_TH:"th"};t.EQUALWEB_LOCALE_MAP={he_IL:"he",pt_BR:"pt",en_US:"en",cn_CN:"zh",es_MX:"es",jp_JP:"en",vi_VN:"en",it_IT:"it",de_DE:"de",ru_RU:"en",nl_NL:"en",fr_FR:"en",ro_RO:"en",ko_KR:"en",ar:"en",am:"en",zh_TW:"zh",hu_HU:"en",pl_PL:"en",fi_FI:"en",th_TH:"th"};t.CHANNEL_TYPE={PUBLIC:"PUBLIC",EDITOR:"EDITOR",COURSE:"COURSE",STREAM:"STREAM",COURSE_TEMPLATE:"COURSE_TEMPLATE",MASTER_COURSE:"MASTER_COURSE"};t.CI_PAGE_TYPES={BLANK:"BLANK",SCORM:"SCORM",HTML:"HTML",VIDEO_YOUTUBE:"VIDEO_YOUTUBE",VIDEO_VIMEO:"VIDEO_VIMEO",VIDEO_FILE:"VIDEO_FILE",PPT_FILE:"PPT_CONVERTED",PPT_IMAGE:"PPT_IMAGE",IMAGE:"IMAGE",PDF:"PDF",MS_OFFICE:"MS_OFFICE"};t.CI_VIDEO_TYPES={VIDEO_YOUTUBE:"video/youtube",VIDEO_VIMEO:"video/vimeo",VIDEO_FILE:"video/mp4"};t.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES={OVERLAY:"OVERLAY",HOTSPOT:"HOTSPOT",CUEPOINT:"CUEPOINT",FULL_PAGE:"FULL_PAGE"};t.CI_PAGE_BASE_SIZE={WIDTH:1920,HEIGHT:1080};t.IFRAME_SANDBOX_PARAMS="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-downloads";t.FIREBASE_CONFIG={apiKey:"AIzaSyDMGeLE8uuNKGkmOvGL0AaTudjK99Y7Dw8",appId:"1:318984018188:web:ac5b5416ab1fe92c20112",authDomain:"t2k-app-8292e.firebaseapp.com",databaseURL:"https://t2k-app-8292e.firebaseio.com",messagingSenderId:"318984018188",projectId:"t2k-app-8292e",storageBucket:"t2k-app-8292e.appspot.com"};t.FIREBASE_PUBLIC_KEY="BLP3U_vKe-1rf3wDO160nffsdj0cb8TQeZhbLkdV0ur6ctkkJ1UtHgbnya3NkLF1iX8yHW_Anlkkq_RiJVbDlA0";t.CERTIFICATE_LEARNER_STATE={IN_PROGRESS:"IN_PROGRESS",CERTIFIED:"CERTIFIED",ABOUT_TO_EXPIRE:"ABOUT_TO_EXPIRE",EXPIRED:"EXPIRED",REVOKED:"REVOKED"};t.NO_VALUE="- -";t.CATALOG_ACTIONS={ROLE:"manager",COURSE:"COURSE",STREAM:"STREAM",PUBLISHED:"PUBLISHED",NOTPUBLISHED:"UNPUBLISHED",COURSETEMPLATE:"COURSETEMPLATE"}},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(142)).default;t.default=r},,,function(e,t,n){"use strict";function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={init:function(){return new Promise((function(e,t){var n,a,r,i;if(!(null===(n=window)||void 0===n?void 0:n.cordova)||!(null===(a=window)||void 0===a||null===(r=a.cordova)||void 0===r||null===(i=r.file)||void 0===i?void 0:i.dataDirectory))return console.log("no cordova or file support, init failed"),t({message:"no cordova or file support"});var o=window.FS;o?e(o):window.resolveLocalFileSystemURL(window.cordova.file.dataDirectory,(function(t){window.FS=t.filesystem,e(t)}),(function(e){console.log("requestFileSystem error"+JSON.stringify(e)),t({error:e})}))}))},writeFile:function(e,t,n,a,r){return i.init().then((function(){return new Promise((function(i,o){var s=window.FS;return s?n?("object"===a&&(n=new Blob([JSON.stringify(n)],{type:"application/json"})),void s.root.getDirectory(t,{},(function(t){t.getFile(e,{create:!0,exclusive:!1},(function(t){t.createWriter((function(a){if(a.onwriteend=function(){!r&&console.log("Successful file write: ".concat(e),{fileEntry:t}),i(t)},a.onerror=function(t){!r&&console.log("Failed file write ".concat(e),{error:t}),o({error:t,message:"Failed file write"})},r)try{a.seek(a.length)}catch(s){}a.write(n)}))}))}),(function(e){!r&&console.log("get directory failed: ".concat(t," - ").concat(JSON.stringify(e))),o({error:e,message:"get directory failed"})}))):o({error:"missing dataObj argument"}):o({message:"no fileSystem"})}))}))},readFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.init().then((function(){return new Promise((function(n,a){var r=window.FS;r||a({message:"no fileSystem"}),e||a({message:"no path"}),r.root.getFile(e,{},(function(r){r.file((function(r){var i=new FileReader;i.onloadend=function(){console.log("Successful file read: ".concat(e));try{n(t?this.result:JSON.parse(this.result))}catch(r){a()}},i.readAsText(r)}),(function(t){console.log("error reading file: ".concat(e," - ").concat(JSON.stringify(t))),a({error:t,message:"error reading file"})}))}),(function(t){console.log("failed to get file: ".concat(e," - ").concat(JSON.stringify(t))),a({error:t,message:"failed to get file"})}))}))}))},readAllNamedFilesFromRootSubDirectories:function(e){return i.init().then((function(){return window.FS||Promise.reject({message:"no fileSystem"}),e||Promise.reject({message:"no file name"}),i.listDirectory(window.cordova.file.dataDirectory).then((function(t){var n,r=[],o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.isDirectory&&r.push(i.readFile("".concat(s.name,"/").concat(e)))}}catch(l){o.e(l)}finally{o.f()}return Promise.all(r)}))}))},createDirectory:function(e){return i.init().then((function(){return new Promise((function(t,n){window.FS||n({message:"no fileSystem"}),e||n({message:"no path"});var a=window.FS.root,r=e.split("/").reverse();return function i(o){a.getDirectory(o,{create:!0,exclusive:!1},(function(n){if(console.log("dir created "+n.fullPath),a=n,r.length>0)return i(r.pop());console.log("full path created "+e),t(e)}),(function(e){n({error:e,message:"failed to create dir"})}))}(r.pop())}))}))},listDirectory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.cordova.file.dataDirectory;return new Promise((function(t,n){window.resolveLocalFileSystemURL(e,(function(e){e.createReader().readEntries((function(e){console.log("list directories "+JSON.stringify(e)),t(e)}),(function(e){console.log("error getting list directories"+JSON.stringify(e)),n({message:"error getting list directories",error:e})}))}),(function(e){console.log(JSON.stringify(e)),n({message:"error resolveLocalFileSystemURL",error:e})}))}))},copyToLocation:function(e,t,n){return new Promise((function(a,r){window.resolveLocalFileSystemURL(t+e,(function(i){window.resolveLocalFileSystemURL(n,(function(o){i.copyTo(o,e,(function(){console.log("Successful Copy ".concat(e," from ").concat(t," to ").concat(n)),a()}),(function(a){console.log("Copying Unsuccessful ".concat(e," from ").concat(t," to ").concat(n," - ").concat(JSON.stringify(a))),r({err:a})}))}),null)}),null)}))},goToOfflineHtml:function(e){var t=e.workOffline,n=void 0!==t&&t?"?workOffline=1":"";i.listDirectory(window.cordova.file.applicationDirectory+"www").then((function(e){var t=e.find((function(e){return"offline.html"===e.name})).toURL();window.cordova.InAppBrowser.open(t+n)}))},isItemDownloaded:function(e){var t=e.itemId;return i.listDirectory().then((function(e){return Promise.resolve(!!e.find((function(e){return e.name===t&&e.isDirectory})))}))}},o=i;t.default=o},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLAYER=t.EDITOR=void 0;t.EDITOR="EDITOR";t.PLAYER="PLAYER"},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(75)),i={Logger:r.default,LogManager:r.LogManager,LogLevel:r.LogLevel};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_TYPES=t.CONTAINER_SUBTYPE=t.SUBTASK_SUBTYPE=t.EMBEDDED_WEBSITE_WIX_SUBTYPE=t.FREE_WRITING_SUBTYPE_E_SIGNATURE=t.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER=t.FREE_WRITING_SUBTYPE_CHECKABLE=t.WRITING_SUBTYPE=t.DND_SUBTYPE=t.DEFAULT_SUBTYPE=t.VIDEO=t.TEXT=t.TEXT_BOOLEAN=t.POLL=t.MC=t.MATCHING=t.LINKING=t.IMAGE=t.FREE_WRITING=t.FILL_IN_GAPS=t.EMBED_WEBSITE=t.RATING=t.CHOICE_MATRIX=t.AUDIO=void 0;t.AUDIO="AUDIO";t.CHOICE_MATRIX="CM";t.RATING="RATING";t.EMBED_WEBSITE="EMBED_WEBSITE";t.FILL_IN_GAPS="FITG";t.FREE_WRITING="FW";t.IMAGE="IMAGE";t.LINKING="LK";t.MATCHING="MATCHING";t.MC="MC";t.POLL="POLL";t.TEXT_BOOLEAN="TEXT_BOOLEAN";t.TEXT="TEXT";t.VIDEO="VIDEO";t.DEFAULT_SUBTYPE="default";t.DND_SUBTYPE="DND";t.WRITING_SUBTYPE="WRITING";t.FREE_WRITING_SUBTYPE_CHECKABLE="CHECKABLE";t.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER="INSTRUCTOR_ANSWER";t.FREE_WRITING_SUBTYPE_E_SIGNATURE="E_SIGNATURE";t.EMBEDDED_WEBSITE_WIX_SUBTYPE="wix";t.SUBTASK_SUBTYPE="SUBTASK";t.CONTAINER_SUBTYPE="CONTAINER";var a=["AUDIO","TEXT","EMBED_WEBSITE","IMAGE","VIDEO"];t.MEDIA_TYPES=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA=t.DEFAULT=void 0;t.DEFAULT=0;t.MEDIA=1},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(13)),i={GET_INIT_DATA:"/PlayAppService/initConfig",GET_DICTIONARY:"/PlayAppService/dictionary",GET_APP_DATA:"/PlayAppService/appConfig",GET_USER:"/PlayAppService/users/:userId",POST_LOGIN:"/PlayAppService/login",POST_LOGOUT:"/PlayAppService/logout",POST_VALIDATE_LOGIN:"/PlayAppService/validateLogin",POST_FORGOT_PASSWORD:"/PlayAppService/support/passwordRestore",POST_RESET_PASSWORD:"/PlayAppService/support/passwordReset/email",POST_RESET_PASSWORD_SMS:"/PlayAppService/support/passwordReset/sms",POST_CHANGE_PASSWORD_AFTER_RESET:"/PlayAppService/support/passwordReset",POST_CHANGE_MY_PASSWORD:"/PlayAppService/users/changePassword",LOGGER_URL:"/PlayAppService/log",USER_APP_STATE:"/PlayAppService/userAppState",GET_CHANNEL_LIBRARY_ITEMS_HEADERS:"/LibraryService/v2/channels/:channelId/items/headers",GET_CHANNEL:"/LibraryService/v2/channels/:channelId",GET_NOTIFICATION_COUNT:"/NotificationService/notifications/new/count",GET_ALL_NOTIFICATION_COUNT:"/NotificationService/notifications/new/count/all",RESET_NOTIFICATION_COUNT:"/NotificationService/notifications/new/reset",GET_NOTIFICATION_SUMMARY:"/NotificationService/notifications/summary",UPDATE_NOTIFICATION_STATE:"/NotificationService/notifications/:id",GET_NOTIFICATION_DETAIL:"/NotificationService/notifications/details/:notificationId",GET_NOTIFICATION_DETAIL_MOCK:"/NotificationService/notifications/details/:notificationId/mock",SENT_NOTIFICATION_MESSAGE:"/NotificationService/email/send",GET_CHANNEL_LIST:"/PlayAppService/channels",DEPLOY_DEMO_ALERTS:"/PlayAppService/demo/alerts",GET_MESSAGING_STATUS:"/NotificationService/messaging/conversations/status",GET_MESSAGING_CHANNEL_STATUS:"/NotificationService/messaging/channels/:channelId/conversations/status",GET_MESSAGING_CONVERSATIONS:"/NotificationService/messaging/conversations",GET_MESSAGES:"/NotificationService/messaging/messages",SEND_MESSAGE:"/NotificationService/messaging/messages/send",SEND_MASS_MESSAGE:"/NotificationService/messaging/messages/send/mass",RESET_MESSAGE_COUNT:"/NotificationService/messaging/conversations/status/reset",UPDATE_CONVERSATION_STATE:"/NotificationService/messaging/conversations/status/read/:id",GET_CONVERSATION:"/NotificationService/messaging/conversation",GET_INSTRUCTORS:"/NotificationService/messaging/instructors/v2",LOAD_VIDEOS:"https://s3-eu-west-1.amazonaws.com/t2k-pap-prod-demos/online-help-resources/online_help_videos.json",PUT_SIGNUP:"/PlayAppService/selfService/activateUser",PUT_SIGNUP_SELF_REGISTRATION:"/PlayAppService/selfService/signUpLearnerToChannel",POST_SIGNUP:"/PlayAppService/signUp",GET_CHECK_VALIDITY:"/PlayAppService/channels/invitationLink/checkValidity",POST_ADD_USER_TO_CHANNEL:"/PlayAppService/channels/invitationLink/addUserToChannel",BECOME_INSTRUCTOR:"/PlayAppService/selfService/becomeInstructor",PING:"/PlayAppService/ping",USER_PREFERENCES:"/PlayAppService/userPreferences",OPEN_SOCKET:"/MessagingService/websocket",GET_CHANNELS:"/LibraryService/v2/channels/withRoles",GET_QUESTION_REPORT:"/ReportsService/report/question",GET_NEW_DISCUSSION_COUNT_CHANNEL:"/NotificationService/discussion/channels/:channelId/badge",GET_NEW_DISCUSSION_COUNT:"/NotificationService/discussion/channels/:channelId/libraryItems/:libraryItemId/badge",GET_DISCUSSIONS:"/NotificationService/discussions",ADD_NEW_DISCUSSION:"/NotificationService/discussion",ADD_NEW_COMMENT:"/NotificationService/discussion/comment",GET_DISCUSSION_INFO:"/NotificationService/discussions/:discussionId/info",GET_ALL_DISCUSSION_COMMENTS:"/NotificationService/discussion/comments/discussions/:discussionId",CREATE_LIVE_SESSION_TOKBOX:"/PlayAppService/tokbox/session",GET_LIVE_SESSION_TOKBOX:"/PlayAppService/tokbox/session",GET_LIVE_SESSION_TOKEN_TOKBOX:"/PlayAppService/tokbox/token",TERMINATE_LIVE_SESSION_TOKBOX:"/PlayAppService/tokbox/session/end",GET_LIVE_SESSION:"/PlayAppService/liveSession/channel/:channelId",GET_LIVE_SESSION_CREATION_PARAMS_NEWROW:"/PlayAppService/liveSession/newrow/params/:channelId",GET_LIVE_SESSION_CREATION_PARAMS_ZOOM:"/PlayAppService/liveSession/zoom/params/:channelId",ACTIVATE_LIVE_SESSION:"/PlayAppService/liveSession/activate",TERMINATE_LIVE_SESSION_NEWROW:"/PlayAppService/liveSession/:sessionId/terminate",ZOOM_USER:"/PlayAppService/liveSession/zoom/user",SEND_EVENTS:"/Interactions/statesAndEvents",GET_LEARNERS_TO_MESSAGE:"/NotificationService/messaging/members",GET_LEADERBOARD:"/ReportsService/report/leaderboard",POST_CREATE_GUEST_USER:"/PlayAppService/channels/addGuest",PUT_SIGN_UP_GUEST:"/PlayAppService/selfService/becomeRegisteredUser",POST_LOGIN_GUEST:"/PlayAppService/selfService/loginAndConvertGuest",POST_RESEND_INVITATION:"/PlayAppService/selfService/resend",GET_CHANNEL_NICKNAMES:"/PlayAppService/user/data",SEND_EXTERNAL_TOKEN:"/NotificationService/externalToken",CHECK_FILE_EXISTS:"/PlayAppService/general/assets/exists",PUT_UPDATE_USER_NAMES:"/PlayAppService/users/changeNames",GET_CERTIFICATES_STATES:"/PlayAppService/certificates/states",CONFIRM_MY_CERTIFICATES:"/PlayAppService/certificates/confirm",S3_ASSET_METADATA:"/PlayAppService/general/assets/metadata",UPDATE_USER_DETAILS:"/PlayAppService/users/details",LOGIN_OTP_PASSCODE:"/PlayAppService/login/otp/dispatch",LOGIN_OTP:"/PlayAppService/login/otp/auth"};i.setDomain=r.default.setDomainFactory("backend_url",i);var o=i;t.default=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(689));n(691);var i=r.default;t.default=i},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(150));n(189);var i=r.default;t.default=i},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.isWebkit=t.isEdge=t.isIe=t.isSafari=t.isIphone=t.isPhone=t.isTablet=t.isMobile=void 0;var r=new(a(n(171)).default)(window.navigator.userAgent);var i=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var a=e.indexOf("Edge/");return a>0&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)}(),o=null!==r.phone()||null!==r.mobile();t.isMobile=o;var s=null!==r.tablet();t.isTablet=s;var l=o&&!s;t.isPhone=l;var u=r.is("iPhone");t.isIphone=u;var c="Safari"===r.userAgent();t.isSafari=c;var d=!1!==i&&i<12;t.isIe=d;var f=!1!==i&&i>=12;t.isEdge=f;var p="WebkitAppearance"in document.documentElement.style;t.isWebkit=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CORRECT=t.PARTIAL=t.WRONG=void 0;t.WRONG="wrong";t.PARTIAL="partial";t.CORRECT="correct"},,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EmptyStateWithBackgroundIcon=t.EmptyStateIcon=t.CollectionIcon=t.LinkIcon=t.PencilIcon=t.CertificateIcon=t.ClockIcon=t.CalendarIcon=t.UsersIcon=t.QuestionIcon=t.ZoomOffIcon=t.ZoomOnIcon=t.ExclamationMarkIcon=t.ArrowDownIcon=t.LockedIcon=t.CloseIcon=t.DownloadIcon=t.CalendarScheduledIcon=t.TrashIcon=t.QuestionsIcon=t.BigArrowIcon=t.ProfileIcon=t.UpIcon=t.SettingsIcon=t.InfoIcon=t.VIcon=t.SearchIcon=t.OpenInteractionDialogIcon=t.DeleteRoundIcon=t.DeleteIcon=t.UploadIcon=t.VideoOffIcon=t.VideoOnIcon=t.SpeakerOffIcon=t.SpeakerOnIcon=t.ParticipantsIcon=t.InstructorIcon=void 0;var r=a(n(402)),i=a(n(403)),o=a(n(404)),s=a(n(405)),l=a(n(406)),u=a(n(407)),c=a(n(408)),d=a(n(409)),f=a(n(410)),p=a(n(411)),h=a(n(412)),m=a(n(413)),v=a(n(414)),g=a(n(415)),E=a(n(416)),_=a(n(417)),y=a(n(418)),k=a(n(419)),S=a(n(420)),T=a(n(421)),b=a(n(422)),C=a(n(423)),I=a(n(424)),O=a(n(425)),A=a(n(426)),N=a(n(427)),w=a(n(428)),R=a(n(429)),P=a(n(430)),M=a(n(431)),L=a(n(432)),D=a(n(433)),x=a(n(434)),F=a(n(435)),U=a(n(436)),G=a(n(437)),B=a(n(438)),j=r.default;t.InstructorIcon=j;var H=i.default;t.ParticipantsIcon=H;var V=o.default;t.SpeakerOnIcon=V;var W=s.default;t.SpeakerOffIcon=W;var z=l.default;t.VideoOnIcon=z;var Y=u.default;t.VideoOffIcon=Y;var K=c.default;t.UploadIcon=K;var Q=d.default;t.DeleteIcon=Q;var X=f.default;t.DeleteRoundIcon=X;var q=p.default;t.OpenInteractionDialogIcon=q;var Z=h.default;t.SearchIcon=Z;var J=m.default;t.VIcon=J;var $=v.default;t.InfoIcon=$;var ee=g.default;t.SettingsIcon=ee;var te=E.default;t.UpIcon=te;var ne=_.default;t.ProfileIcon=ne;var ae=y.default;t.BigArrowIcon=ae;var re=k.default;t.QuestionsIcon=re;var ie=T.default;t.TrashIcon=ie;var oe=b.default;t.CalendarScheduledIcon=oe;var se=C.default;t.DownloadIcon=se;var le=I.default;t.CloseIcon=le;var ue=O.default;t.LockedIcon=ue;var ce=A.default;t.ArrowDownIcon=ce;var de=N.default;t.ExclamationMarkIcon=de;var fe=w.default;t.ZoomOnIcon=fe;var pe=R.default;t.ZoomOffIcon=pe;var he=S.default;t.QuestionIcon=he;var me=P.default;t.UsersIcon=me;var ve=M.default;t.CalendarIcon=ve;var ge=L.default;t.ClockIcon=ge;var Ee=D.default;t.CertificateIcon=Ee;var _e=x.default;t.PencilIcon=_e;var ye=F.default;t.LinkIcon=ye;var ke=U.default;t.CollectionIcon=ke;var Se=G.default;t.EmptyStateIcon=Se;var Te=B.default;t.EmptyStateWithBackgroundIcon=Te;var be={InstructorIcon:j,ParticipantsIcon:H,SpeakerOnIcon:V,SpeakerOffIcon:W,VideoOnIcon:z,VideoOffIcon:Y,UploadIcon:K,DeleteIcon:Q,DeleteRoundIcon:X,OpenInteractionDialogIcon:q,SearchIcon:Z,VIcon:J,InfoIcon:$,SettingsIcon:ee,UpIcon:te,ProfileIcon:ne,BigArrowIcon:ae,QuestionsIcon:re,TrashIcon:ie,CalendarScheduledIcon:oe,DownloadIcon:se,CloseIcon:le,LockedIcon:ue,ArrowDownIcon:ce,ExclamationMarkIcon:de,ZoomOnIcon:fe,ZoomOffIcon:pe,QuestionIcon:he,UsersIcon:me,CalendarIcon:ve,ClockIcon:ge,CertificateIcon:Ee,PencilIcon:_e,LinkIcon:ye,CollectionIcon:ke,EmptyStateIcon:Se,EmptyStateWithBackgroundIcon:Te};t.default=be},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.LogManager=t.default=t.LogLevel=void 0;var r=a(n(40)),i=a(n(3)),o=a(n(4)),s=a(n(190)),l=a(n(191)),u={LOG:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5};t.LogLevel=u;var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.userAgent,a=void 0===n?"":n,r=t.userId,o=void 0===r?"":r,l=t.appId,c=void 0===l?"":l,d=t.appVersion,f=void 0===d?"":d,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=p.verboseLevel,m=void 0===h?u.INFO:h,v=p.logLevel,g=void 0===v?u.LOG:v,E=p.batchLimit,_=void 0===E?15:E,y=p.intervalLimit,k=void 0===y?5e3:y,S=p.retryLimit,T=void 0===S?3:S,b=arguments.length>2?arguments[2]:void 0,C=arguments.length>3?arguments[3]:void 0;(0,i.default)(this,e),this._context={userAgent:a,userId:o,appId:c,appVersion:f},this._config={verboseLevel:m,logLevel:g,batchLimit:_,intervalLimit:k,retryLimit:T},this._tags=b,this._messages=[],this._dispatcher=new s.default(C),this._intervalTimer=void 0}return(0,o.default)(e,null,[{key:"logToConsole",value:function(e,t){var n;switch(e){case u.LOG:n="log";break;case u.DEBUG:n="debug";break;case u.INFO:n="info";break;case u.WARN:n="warn";break;case u.ERROR:n="error";break;default:n="log"}console[n](t)}}]),(0,o.default)(e,[{key:"setContext",value:function(e){this._context=Object.assign(this._context,e)}},{key:"setConfig",value:function(e){this._config=Object.assign(this._config,e)}},{key:"setTags",value:function(e){this._tags=Object.assign(this._tags,e)}},{key:"removeTag",value:function(e){delete this._tags[e]}},{key:"batchMessage",value:function(e){this._messages.push(e),this._messages.length>=this._config.batchLimit?(this.sendStoredMessages(),this.resetTimer()):1===this._messages.length&&this.setTimer()}},{key:"setTimer",value:function(){var e=this;this._intervalTimer=setTimeout((function(){e.resetTimer(),e.sendStoredMessages()}),this._config.intervalLimit)}},{key:"resetTimer",value:function(){void 0!==this._intervalTimer&&(clearTimeout(this._intervalTimer),this._intervalTimer=void 0)}},{key:"logMessage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.messageType,a=void 0===n?u.LOG:n,r=t.message,i=void 0===r?"":r;t.msgTags,t.forceSend;a>=this._config.verboseLevel&&e.logToConsole(a,i)}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,a=e.msgTags,r=void 0===a?{}:a,i=e.forceSend,o=void 0!==i&&i,s=u.LOG;this.logMessage({messageType:s,message:n,msgTags:r,forceSend:o})}},{key:"debug",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,a=e.msgTags,r=void 0===a?{}:a,i=e.forceSend,o=void 0!==i&&i,s=u.DEBUG;this.logMessage({messageType:s,message:n,msgTags:r,forceSend:o})}},{key:"info",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,a=e.msgTags,r=void 0===a?{}:a,i=e.forceSend,o=void 0!==i&&i,s=u.INFO;this.logMessage({messageType:s,message:n,msgTags:r,forceSend:o})}},{key:"warn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,a=e.msgTags,r=void 0===a?{}:a,i=e.forceSend,o=void 0!==i&&i,s=u.WARN;this.logMessage({messageType:s,message:n,msgTags:r,forceSend:o})}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=void 0===t?"":t,a=e.msgTags,r=void 0===a?{}:a,i=e.forceSend,o=void 0!==i&&i,s=u.ERROR;this.logMessage({messageType:s,message:n,msgTags:r,forceSend:o})}},{key:"sendStoredMessages",value:function(){this._messages=[]}},{key:"send",value:function(e){var t=(0,r.default)(e),n=Object.assign({},this._context,{messages:t});this._dispatcher.send(n,this._config.retryLimit)}}]),e}();t.default=c;var d=new l.default;t.LogManager=d},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionHoc=t.InteractionProvider=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=r(n(2)),f=r(n(226)),p=r(n(397)),h=r(n(550)),m=r(n(511));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var g=r(n(328)).default.Provider,E=d.default.shape({serviceUrl:d.default.string.isRequired,accessToken:d.default.shape({}).isRequired,uploadFile:d.default.func.isRequired,getScoreForStudent:d.default.func.isRequired,getTaskVotes:d.default.func.isRequired,loggerManager:d.default.instanceOf(p.default).isRequired,getIsCiResultsHidden:d.default.func.isRequired}),_=(0,h.default)({environment:E,ltr:d.default.bool,modalManager:d.default.instanceOf(f.default),language:d.default.object,getEventsContextPromise:d.default.func,defaultSettings:d.default.object}),y=_.Provider,k=_.Hoc,S=function(e){(0,s.default)(n,e);var t=v(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.ltr,a=e.modalManager,r=e.language,i=e.getEventsContextPromise,o=e.environment,s=e.defaultSettings;return c.default.createElement(y,{ltr:n,modalManager:a,language:r,getEventsContextPromise:i,environment:o,defaultSettings:s},c.default.createElement(m.default,{uploadFile:function(){o.uploadFile.apply(o,arguments)},language:r,ltr:n},c.default.createElement(g,null,t)))}}]),n}(c.Component);t.InteractionProvider=S;var T=k;t.InteractionHoc=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNAVAILABLE=t.AVAILABLE=void 0;t.AVAILABLE=0;t.UNAVAILABLE=1},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(81)).default;t.default=r},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(40)),i=a(n(9)),o=a(n(3)),s=a(n(4));function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=new(function(){function e(){(0,o.default)(this,e),this._setOfPermissions=null}return(0,s.default)(e,[{key:"getEntityCountByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CHANNEL",t=this.setOfPermissions&&this.setOfPermissions.filter?this.setOfPermissions.filter((function(t){return t.entityType===e})):[];return t.length}},{key:"getContextRoles",value:function(e){if(!this.setOfPermissions||!this.setOfPermissions.find)return null;var t=this.setOfPermissions.find((function(t){return t.entityId===e}));return t?d({},t.roles):null}},{key:"getContextPermissions",value:function(e){if(!this.setOfPermissions||!this.setOfPermissions.find)return null;var t=this.setOfPermissions.find((function(t){return t.entityId===e}));return t?d({},t.actions):null}},{key:"addPermissions",value:function(e){var t,n;if(e&&e.entityId){this.setOfPermissions||(this.setOfPermissions=[e]);var a=null!==(t=null===(n=this.setOfPermissions)||void 0===n?void 0:n.filter((function(t){return t.entityId!==e.entityId})))&&void 0!==t?t:[];a.push(e),this.setOfPermissions=a}}},{key:"getPermissionByContentType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[],r=this.setOfPermissions&&this.setOfPermissions.find?this.setOfPermissions.find((function(e){return e.entityId===t})):null;if(!r||!r.actions)return null;var i=r.actions;return Object.keys(i).forEach((function(t){var r=t.split(":");n&&r.length>2&&r.shift(1),i[t]&&2===r.length&&r[0]===e&&a.push(r[1])})),a}},{key:"getPermissionByActionType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"CHANNEL";if(!t)return null;var a=this.setOfPermissions&&this.setOfPermissions.find?this.setOfPermissions.find((function(e){return e.entityId===t&&e.entityType===n})):null;return a&&a.actions?!0===a.actions[e]:null}},{key:"getRoleByEntityType",value:function(e){var t;if(!this.setOfPermissions||!this.setOfPermissions.filter)return[];var n=(t=[]).concat.apply(t,(0,r.default)(this.setOfPermissions.filter((function(t){return t.entityType===e})).map((function(e){return e.roles}))));return(0,r.default)(new Set(n))}},{key:"hasOnlySpecificRole",value:function(e){var t,n=l(this.setOfPermissions);try{for(n.s();!(t=n.n()).done;){var a,r=l(t.value.roles);try{for(r.s();!(a=r.n()).done;){if(a.value!==e)return!1}}catch(i){r.e(i)}finally{r.f()}}}catch(i){n.e(i)}finally{n.f()}return!0}},{key:"hasSpecificRole",value:function(e){var t,n=l(this.setOfPermissions);try{for(n.s();!(t=n.n()).done;){var a,r=l(t.value.roles);try{for(r.s();!(a=r.n()).done;){if(a.value===e)return!0}}catch(i){r.e(i)}finally{r.f()}}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"setOfPermissions",get:function(){return this._setOfPermissions},set:function(e){this._setOfPermissions=e}}]),e}());t.default=f},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!i.default.isFeatureEnabled("sanitizeUserHtmlInput"))return{dangerouslySetInnerHTML:{__html:e}};if("string"==typeof e&&(null==e?void 0:e.length)>0){var n={allowedTags:[],allowedAttributes:{},disallowedTagsMode:"discard"};return t||(n.allowedAttributes=!1,n.allowedTags=!1),{dangerouslySetInnerHTML:{__html:(0,r.default)(e,n)}}}return""};var r=a(n(1104)),i=a(n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NONE_CHECKABLE=t.AUTOMATIC=t.MANUAL=void 0;t.MANUAL="MANUAL";t.AUTOMATIC="AUTOMATIC";t.NONE_CHECKABLE="NONE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHECKABLEOFF=t.SAVE=t.VOTE=t.NONE=t.CHECK=void 0;t.CHECK="CHECK";t.NONE="NONE";t.VOTE="VOTE";t.SAVE="SAVE";t.CHECKABLEOFF="CHECKABLEOFF"},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CORRECT_ANSWER_IS_SHOWN_FOR_EDITOR=t.HIDE_ANSWER_FOR_INSTRUCTOR=t.SHOW_ANSWER_FOR_INSTRUCTOR=t.TASK_FINISHED_STATUS_LIST=t.ASSESSMENT_UNANSWERED=t.PENDING_CHECK=t.SHOWING_CORRECT_ANSWER=t.COMPLETED_WRONG_DONT_SHOW_ANSWER=t.COMPLETED_WRONG=t.TRY_AGAIN=t.CHECK_VALIDATION=t.CHECK=t.COMPLETED_RIGHT=void 0;t.COMPLETED_RIGHT="done";t.CHECK="check";t.CHECK_VALIDATION="check_validation";t.TRY_AGAIN="try_again";t.COMPLETED_WRONG="show_answer";t.COMPLETED_WRONG_DONT_SHOW_ANSWER="checked_dont_show_answer";t.SHOWING_CORRECT_ANSWER="show_my_answer";t.PENDING_CHECK="pending_check";t.ASSESSMENT_UNANSWERED="assessment_unanswered";var a=["done","show_answer","show_my_answer","pending_check","assessment_unanswered"];t.TASK_FINISHED_STATUS_LIST=a;t.SHOW_ANSWER_FOR_INSTRUCTOR="show_answers_for_instructor";t.HIDE_ANSWER_FOR_INSTRUCTOR="hide_answers_for_instructor";t.CORRECT_ANSWER_IS_SHOWN_FOR_EDITOR="correct_answer_is_shown_for_editor"},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(194)).default;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERIFY_PASSWORD=t.SET_RANDOMIZED_TAGS=t.GET_RANDOMIZED_TAGS=t.FLAG_INTERACTION=t.RESET_CI=t.GET_IS_CI_RESULTS_HIDDEN=t.CONTENT_TYPE_TASK=t.DUPLICATE_TAGS=t.ANSWERS_PATH=t.SCORE_PATH=t.TAGS=t.EVENTS_PATH=t.USER_STATE_GET_PATH=t.USER_STATE_POST_PATH=t.MODEL_PATH=t.FILES_SIGN_PATH=t.PATH=void 0;t.PATH="/Interactions";t.FILES_SIGN_PATH="/getUploadLink";t.MODEL_PATH="/v2/taskGroups";t.USER_STATE_POST_PATH="/statesAndEvents";t.USER_STATE_GET_PATH="/states";t.EVENTS_PATH="/statesAndEvents";t.TAGS="/tags";t.SCORE_PATH="/ReportsService/report/taskGroup";t.ANSWERS_PATH="/ReportsService/report/poll";t.DUPLICATE_TAGS="/EditorService/tags/v2/clone";t.CONTENT_TYPE_TASK="TASK";t.GET_IS_CI_RESULTS_HIDDEN="/PlayAppService/library/items/report/lock";t.RESET_CI="/PlayAppService/reset/assessment";t.FLAG_INTERACTION="/EditorService/flagInteraction";t.GET_RANDOMIZED_TAGS="/EditorService/taskGroups/:taskGroupId/version/:taskGroupVersion/randomized";t.SET_RANDOMIZED_TAGS="/EditorService/taskGroups/randomized";t.VERIFY_PASSWORD="/PlayAppService/users/verifyPassword"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TAGGING=t.EMOJI=t.TOGGLE=t.TEXT=t.RANGE=t.MULTIPLE_SELECTION=t.SINGLE_SELECTION=void 0;t.SINGLE_SELECTION="single_selection";t.MULTIPLE_SELECTION="multiple_selection";t.RANGE="range";t.TEXT="text";t.TOGGLE="toggle";t.EMOJI="emoji";t.TAGGING="tagging"},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ComponentHoc=void 0;var r=a(n(2)),i=(0,a(n(204)).default)({uploadFile:r.default.func,language:r.default.shape({}),ltr:r.default.bool}),o=i.Provider,s=i.Hoc;t.ComponentHoc=s;var l=o;t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(32)),o=a(n(14)),s=n(39),l=n(75);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(new Date).getTime(),f={_loggerName:"login",setLoggerName:function(e){f._loggerName=e},getLoggerName:function(){return f._loggerName},onSignUpSubmitGuestRegistration:function(e,t,n,a,r,o,s){var l={email:e.email,firstName:e.firstName,lastName:e.lastName,password:e.password};i.default.put(n,{},l,{},!1).then((function(e){o(e)})).catch((function(e){s(e)}))},onSignUpSubmitSelfRegistration:function(e,t,n,a,r,o,s){var l={params:{token:e.token}};e.inviteByExternalId&&(l.params.inviteByExternalId=!0);var u=e.email,c=e.firstName,d=e.lastName,f=e.password,p=e.externalId,h={userName:u,firstName:c,lastName:d,password:f,phone:e.phone};p&&(h.externalId=p),i.default.post(n,{},h,l,!0).then((function(){o()})).catch((function(e){s(e)}))},onSignUpSubmitAfterInvitationByEmail:function(e,t,n,a,r,s){var l=this,u=e.firstName,c=e.lastName,d=e.password,f=e.token,p=e.externalId,h={params:{token:f}},m={firstName:u,lastName:c,password:d};p&&(m.externalId=p),i.default.post(n,{},m,h,!0).then((function(e){if(e.token){var n={token_type:e.token_type,expires_in:e.expires_in,access_token:e.token};o.default.storeToken(n),l.loginSuccess(t)}else{var a=window.location.href.split("?")[0];l._redirectToIndex(a)}})).catch((function(e){s(e)}))},onSignUpSubmit:function(e,t,n,a,r,s,l){var u={params:{siteDomain:o.default._getAppDetails().site,token:e.token}},c={email:e.email,firstName:e.firstName,lastName:e.lastName,password:e.password,redirectUrl:e.redirectUrl};i.default.post(n,{},c,u,!0).then((function(){s()})).catch((function(e){l(e)}))},onLoginSubmit:function(e,t,n,a,r,s,u,d,p){var h=this,m=o.default._getAppDetails().site;e.site&&e.site!==m&&(o.default.setAppDetails(e.site,a),m=e.site);var v={params:{site:m},failOnOffline:!0},g={username:e.username,password:e.password,phone:e.phone,isRememberMe:r};e.loginToken&&(v.params.login_token=e.loginToken),e.invitationToken&&(g.inviteeSignUpToken=e.invitationToken),i.default.post(n,{},g,v,!u).then((function(n){if(o.default.isAnonymous()&&o.default.removeStoredToken(),"function"==typeof d&&d(),n.site&&n.site!==m)h._handleGlobalSiteFlow(a,n,e.username,r,t);else{var i=c(c({},n),{},{username:n.username||e.username,site:m,isRememberMe:r});n.forceChangePassword?p(i):(o.default.storeToken(i),h.loginSuccess(t))}})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Failed to login ".concat(JSON.stringify(e))}),s(e)}))},_handleGlobalSiteFlow:function(e,t,n,a,r){var i=t.site,s=c(c({},t),{},{username:n,isRememberMe:a});if(o.default.getURLParam("site"))this._navigateToOtherSiteInSameDomain(e,i,s,r);else{var l=this._getRedirectHostname(i);l?this._navigateToOtherDomain(l,s):this._navigateToOtherSiteInSameDomain(e,i,s,r)}},_navigateToOtherSiteInSameDomain:function(e,t,n,a){o.default.setAppDetails(t,e),o.default.storeToken(n),this.loginSuccess(a)},_getRedirectHostname:function(e){var t,n=window.location.host,a=n.indexOf(".");return-1!==a&&(t="".concat(e).concat(n.substring(a))),t},_navigateToOtherDomain:function(e,t){var n=o.default.encodeToken(t),a=window.location.protocol,r="".concat(a,"//").concat(e,"?user_self_service_site_token=").concat(n);window.location.replace(r)},addUserToLearningGroup:function(e,t){return i.default.post(t,{},{},{params:{token:e}})},addGuestUser:function(e,t){return i.default.post(t,{},{},{params:{token:e}})},addAnonymousUser:function(e,t){o.default.setAppDetails(e,t),o.default.storeToken({access_token:"",assets_token:"",expires_in:1.1*d,token_type:"fake",username:"anonymous",site:e,isRememberMe:!1,isAnonymous:!0})},onGuestUserRegistered:function(e,t,n){this.onGuestUserCreated(e,e.site,t,n),window.location.reload()},onGuestUserCreated:function(e,t,n,a){o.default.setAppDetails(t,n),o.default.storeToken({access_token:e.access_token,expires_in:e.expires_in,token_type:e.token_type,username:e.username,site:t,isRememberMe:a||!1,invitation_token:e.invitationToken})},getChannelHashUrl:function(e,t){var n=encodeURIComponent(t);return"#/$/library/channel/".concat(e,"/").concat(n)},checkIfLinkWasNotExpired:function(e,t){return i.default.get(t,{},{params:{token:e}},!0)},loginSuccess:function(e,t,n){var a=o.default._getAppDetails().site,r={};a&&-1===window.location.hostname.indexOf(a)&&this._includeSiteRedirect&&(r.site=a),r.backend_url=o.default.getURLParam("backend_url"),r.assets_prefix=o.default.getURLParam("assets_prefix"),r.f2f_url=o.default.getURLParam("f2f_url");var i=sessionStorage.getItem("loginURLParams");i&&(sessionStorage.removeItem("loginURLParams"),delete(i=JSON.parse(i).urlParams).error_code,Object.assign(r,i)),localStorage.getItem("utm_context")&&(r.utm_context=localStorage.getItem("utm_context")),t&&Object.assign(r,t);var s=o.default.jsonToQueryParams(r),l="";if(n)l=n;else{var u=sessionStorage.getItem("loginHash");u&&(u=JSON.parse(u),Math.abs(d-u.timestamp)<15e3&&(l=u.hash))}l="".concat(l&&"#"!==l[0]?"#":"").concat(l),this._redirectToIndex("".concat(e).concat(s).concat(l))},_redirectToIndex:function(e){-1!==window.location.href.indexOf(e.split("#")[0])?-1===window.location.href.indexOf(e)?window.location.replace(e):-1!==window.location.href.indexOf("error_code")?window.location.replace(this._extractErrorParamFromUrl()):window.location.reload():window.location.replace(e)},_extractErrorParamFromUrl:function(){return window.location.href.replace(/&error_code=[0-9]+/,"")},onForgotPasswordSubmit:function(e,t,n,a){var r=o.default._getAppDetails().site;i.default.post(t,{},{},{params:{email:e,site:r}}).then((function(){n()})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Error on forgot password: ".concat(JSON.stringify(e))}),a(e)}))},onResetPasswordClicked:function(e,t,n,a,r,s){var u={site:o.default._getAppDetails().site};"1"===n?(u.identifier=e,u.phoneNumber=t):u.email=e,i.default.post(a,{},{},{params:u}).then((function(){r()})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Error on reset password: ".concat(JSON.stringify(e))}),s(e)}))},changePasswordAfterReset:function(e,t,n,a,r){var s=this,u=o.default._getAppDetails().site,d=o.default.getURLParam("token");i.default.post(t,{},e,{params:{token:d,site:u}}).then((function(e){var t=c(c({},e),{},{site:u,isRememberMe:a});o.default.storeToken(t),s.loginSuccess(n)})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Error on change password: ".concat(JSON.stringify(e))}),r(e)}))},changeMyPassword:function(e,t,n,a){i.default.post(e,{},t).then((function(){n()})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Error on change password: ".concat(JSON.stringify(e))}),a(e)}))},setSite:function(e,t){f._site=e,f._includeSiteRedirect=t},getSite:function(){return f._site},isGenericSitesLogin:function(){return f._site===s.GENERIC_LOGIN_SITE_NAME},initLogger:function(e,t,n,a){var r={userAgent:navigator.userAgent,userId:e,appId:n,appVersion:t},i={verboseLevel:l.LogLevel.LOG,logLevel:l.LogLevel.LOG,batchLimit:4,intervalLimit:2e3,retryLimit:2};l.LogManager.registerLogger(f._loggerName,r,i,{default_tag:"default_tag value"},a)},resendEmailInvitation:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};i.default.post(e,{},t).then((function(){n()})).catch((function(e){l.LogManager.error(f._loggerName,{message:"Invitation was not sent to user with email ".concat(t.email,": ").concat(JSON.stringify(e))}),a(e)}))},getOTP:function(e){var t=e.url,n=e.params,a=void 0===n?{}:n,r=e.data,o=void 0===r?{}:r,s=e.config,l=void 0===s?{}:s,u=e.removeAuth,c=void 0===u||u,d=e.successCallback;return i.default.post(t,a,o,l,c).then((function(e){"function"==typeof d&&d(e)}))},OTPLogin:function(e){var t=this,n=e.url,a=e.params,r=void 0===a?{}:a,s=e.data,l=void 0===s?{}:s,u=e.config,d=void 0===u?{}:u,f=e.removeAuth,p=void 0===f||f,h=e.appId,m=void 0===h?"echo":h,v=e.redirectLocation,g=void 0===v?"index.html":v,E=e.errorCallback;i.default.post(n,{},l,d,p).then((function(e){var n=o.default._getAppDetails().site;if((null==r?void 0:r.site)!==n&&(o.default.setAppDetails(r.site,m),n=r.site),e.site&&e.site!==n)t._handleGlobalSiteFlow(m,e,r.username,!1,g);else{var a=c(c({},e),{},{username:e.username||r.username,site:n,isRememberMe:!1});o.default.storeToken(a),t.loginSuccess(g)}})).catch((function(e){E(e)}))}},p=f;t.default=p},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(112));window.jQuery=r.default,n(551),n(552);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FLOATING=t.RAISED=t.FLAT=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0));r(n(2));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}t.FLAT=0;t.RAISED=1;t.FLOATING=2;var h=function(e){switch(e){case 0:return"";case 1:return"raised";case 2:return"floating";default:return""}},m=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.className,a=e.children,r=(0,o.default)(e,["type","className","children"]);return f.default.createElement("button",(0,i.default)({},r,{className:"t2k-button ".concat(n," ").concat(h(t))}),f.default.createElement("span",null,a))}}]),n}(f.Component);t.default=m,m.defaultProps={type:0}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(9)),s=a(n(29)),l=a(n(3)),u=a(n(4)),c=a(n(30)),d=(a(n(31)),n(20)),f=n(67);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(r=function(){function e(t){(0,l.default)(this,e),(0,s.default)(this,"data",i,this),this.taskApiForInteractions=void 0,this.data={},this.taskApiForInteractions=t}return(0,u.default)(e,[{key:"setUserState",value:function(e){this.data=h(h({},this.data),e)}},{key:"setData",value:function(e){if(this.taskApiForInteractions.isAssessment()){var t=this.getInteractionUserAnswers();this.setUserState(e);var n=this.getInteractionUserAnswers();this.updateTaskCompletedCount(t,n)}else this.setUserState(e);this.taskApiForInteractions.onInteractionUserStateChange()}},{key:"calcCurrentScore",value:function(e){switch(e){case f.PARTIAL:return 50;case f.CORRECT:return 100;case f.WRONG:default:return 0}}},{key:"getInteractionUserState",value:function(){return this.data}},{key:"updateTaskCompletedCount",value:function(e,t){var n=this.isInteractionStateNotEmpty(e),a=this.isInteractionStateNotEmpty(t);if(n!==a){var r=!n&&a?1:-1;this.taskApiForInteractions.updateCompletedTaskCount(r),this.taskApiForInteractions.updateUnAnsweredQuestionsIndex()}}},{key:"interactionHasState",value:function(){var e=this.getInteractionUserAnswers();return this.isInteractionStateNotEmpty(e)}},{key:"isInteractionStateNotEmpty",value:function(e){return!!(e&&Object.keys(e).length>0)||e&&e.length>=0}},{key:"getInteractionUserAnswers",value:function(){return this.data.answers||{}}}]),e}(),i=(0,c.default)(r.prototype,"data",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,c.default)(r.prototype,"setUserState",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"setUserState"),r.prototype),r);t.default=m},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(461)).default;t.default=r},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(179)).default;t.default=r},,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getClassNameByParagraphSize=t.getClassNameByType=t.REGULARPARAGRAPH=t.LONGPARAGRAPH=t.SHORTPARAGRAPH=t.BOXAREA_RICH_MEDIA=t.BOXAREA=t.LINEAREA_RICH_MEDIA=t.LINEAREA=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(1103))),m=r(n(101)),v=a(n(132));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}t.LINEAREA=0;t.LINEAREA_RICH_MEDIA=1;t.BOXAREA=2;t.BOXAREA_RICH_MEDIA=4;t.SHORTPARAGRAPH=1;t.LONGPARAGRAPH=2;t.REGULARPARAGRAPH=3;var E=function(e){switch(e){case 0:return"";case 1:return"line-rich";case 2:return"box";case 4:return"box-rich";default:return""}};t.getClassNameByType=E;var _=function(e){switch(e){case 1:return"small-paragraph";case 2:return"big-paragraph";case 3:default:return""}};t.getClassNameByParagraphSize=_;var y=function(e){(0,c.default)(n,e);var t=g(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFocus=e.handleFocus.bind((0,u.default)(e)),e.handleBlur=e.handleBlur.bind((0,u.default)(e)),e.updateCharCount=e.updateCharCount.bind((0,u.default)(e)),e}return(0,l.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.maxLength&&this.props.showCounter&&this.updateCharCount(this.props.defaultHtml)}},{key:"componentDidMount",value:function(){var e=this;this.props.disableAutosize||(0,h.default)(this._textAreaInputRef),this.props.bold&&""!==this._textAreaInputRef.value&&!this.props.disableAutosize&&setTimeout((function(){h.default.update(e.refs.textAreaInput)}),1),this.props.preventSwipeOnScroll&&this.props.preventSwipeOnScroll(this._textAreaInputRef)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){n.isTextEditor(e.type)||e.disabled||e.disableAutosize||(0,h.default)(this._textAreaInputRef)}},{key:"componentDidUpdate",value:function(){this.props.disableAutosize||h.default.update(this._textAreaInputRef)}},{key:"render",value:function(){var e=this,t=this.props,a=t.bold,r=t.paragraphSize,s=t.type,l=t.defaultHtml,u=t.focusOnCreation,c=t.maxLength,d=t.showCounter,f=t.toolbar,h=t.centered,g=(0,o.default)(t,["bold","paragraphSize","type","defaultHtml","focusOnCreation","maxLength","showCounter","toolbar","centered"]),y=l,k=n.isTextEditor(s),S=!k&&!this.props.disabled;return p.default.createElement("div",{className:"t2k-text-area"},S&&p.default.createElement("textarea",(0,i.default)({ref:function(t){e._textAreaInputRef=t}},g,{onBlur:this.handleBlur,placeholder:this.props.placeholder,defaultValue:y,type:"text",className:"".concat(a?"t2k-text-area-input-bold":"")+"".concat(h?"t2k-text-area-input-centered":"")+"".concat(this.props.pairs?" t2k-text-area-input-pairs":" t2k-text-area-input"," ")+"".concat(_(r)," ").concat(E(this.props.type)),onFocus:this.handleFocus,maxLength:c,onKeyUp:function(t){e.updateCharCount(t.target.value)}})),S&&c&&d&&p.default.createElement("div",{className:"counter"},this.state.charCount),!k&&this.props.disabled&&p.default.createElement("div",(0,i.default)({ref:function(t){e._textAreaInputRef=t}},g,{placeholder:this.props.placeholder,defaultValue:y,type:"text",className:"".concat(a?"t2k-text-area-input-bold":"")+"".concat(this.props.disabled?" disabled":"")+"".concat(this.props.pairs?" t2k-text-area-input-pairs":" t2k-text-area-input"," ")+"".concat(_(r)," ").concat(E(this.props.type))},(0,m.default)(y))),k&&p.default.createElement(v.default,{ref:function(t){e._textEditorRef=t},type:v.BOXAREA,placeholder:this.props.placeholder,className:this.props.className,paragraphSize:r,onBlur:this.props.onBlur,onHasContentChanged:this.props.onHasContentChanged,onChange:this.props.onChange,html:this.props.html,defaultHtml:y,keydownEventFn:this.props.keydownEventFn,focusOnCreation:u,onFocus:this.handleFocus,toolbar:f,insertImageAsLink:this.props.insertImageAsLink}))}},{key:"getInputValue",value:function(){return this._textAreaInputRef&&(""===this._textAreaInputRef.value?"":this._textAreaInputRef.value||this._textAreaInputRef.innerHTML)}},{key:"resetInputValue",value:function(){this._textAreaInputRef.value=""}},{key:"updateCharCount",value:function(e){var t=e?this.props.maxLength-e.length:this.props.maxLength;this.setState({charCount:t})}},{key:"getHTML",value:function(){return this._textEditorRef.getWrappedInstance().getHTML()}},{key:"handleFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur({html:e.target.value})}}],[{key:"isTextEditor",value:function(e){return 1===e||4===e}}]),n}(p.Component);t.default=y,y.defaultProps={type:0,paragraphSize:3,maxLength:1e4}},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UNICODE_NBSP=t.DEFAULT_FONT_SIZE=t.TOOLS_V2_EXTENDED=t.TOOLS_V2=t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=t.MINFORMAT_WITH_UPLOAD_FILES=t.MINFORMAT_PLUS_IMAGE=t.MINFORMAT=t.DEFAULT=t.REGULARPARAGRAPH=t.LONGPARAGRAPH=t.SHORTPARAGRAPH=t.BOXAREA=t.LINEAREA=void 0;var i,o,s,l,u=a(n(23)),c=a(n(3)),d=a(n(4)),f=a(n(12)),p=a(n(6)),h=a(n(8)),m=a(n(7)),v=a(n(9)),g=a(n(141)),E=r(n(0)),_=(a(n(2)),n(46)),y=a(n(122)),k=a(n(399)),S=a(n(37)),T=a(n(13)),b=a(n(60)),C=a(n(362)),I=r(n(441)),O=n(76),A=(a(n(226)),n(442)),N=a(n(101));function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}n(553),n(554),n(715),n(1110),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568);var M=S.default.isMobile;t.LINEAREA=0;t.BOXAREA=1;t.SHORTPARAGRAPH=1;t.LONGPARAGRAPH=2;t.REGULARPARAGRAPH=3;t.DEFAULT=0;t.MINFORMAT=1;t.MINFORMAT_PLUS_IMAGE=2;t.MINFORMAT_WITH_UPLOAD_FILES=5;t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=6;t.TOOLS_V2=7;t.TOOLS_V2_EXTENDED=8;t.DEFAULT_FONT_SIZE="14";var L=function(e){switch(e){case 0:return"";case 1:return"box";default:return""}},D=function(e){switch(e){case 1:return"small-paragraph";case 2:return"big-paragraph";case 3:default:return""}},x=["bold","italic","underline","undo","redo"],F=["bold","italic","underline","color","fontFamily","clearFormatting","undo","redo"],U=x.concat("fontFamily","fontSize","color","outdent","indent","align","formatOL","formatUL","insertLink","clearFormatting"),G=(i={},(0,v.default)(i,0,["bold","italic","underline","fontSize","color","fontFamily","subscript","superscript","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","|","insertLink","undo","redo","rightToLeft","leftToRight","clearFormatting","customUploadImage"]),(0,v.default)(i,1,F),(0,v.default)(i,2,F.concat("customUploadImage")),(0,v.default)(i,5,F.concat(["insertLink","customUploadImage","insertFile"])),(0,v.default)(i,6,x.concat(["insertLink","insertFile"])),(0,v.default)(i,7,["insertLink","undo","redo"]),(0,v.default)(i,8,U),i),B={toolbarInline:!1,toolbarSticky:!1,toolbarButtons:G[0],toolbarButtonsMD:G[0],toolbarButtonsSM:G[0],toolbarButtonsXS:G[1],theme:"custom",pastePlain:!1,linkAlwaysBlank:!0,imageMove:!0,htmlAllowedTags:[".*"],imageEditButtons:["imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"]};t.UNICODE_NBSP=" ";y.default.FroalaEditor.DefineIcon("customUploadImage",{NAME:"image"}),y.default.FroalaEditor.RegisterCommand("customUploadImage",{title:"Upload Image",focus:!1,undo:!1,refreshAfterCallback:!1,callback:function(){}});var j=(0,_.inject)("services")(o=(0,_.observer)((l=s=function(e){(0,p.default)(n,e);var t=P(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSimpleImageUploadInputChange=e.onSimpleImageUploadInputChange.bind((0,f.default)(e)),e.openImagePickerModal=e.openImagePickerModal.bind((0,f.default)(e)),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.initFroala()}},{key:"shouldComponentUpdate",value:function(e){return e.placeholder!==this.props.placeholder||(void 0!==e.html&&e.html!==this.getHTML()&&(0,y.default)(this._feditRef).froalaEditor("html.set",e.html),!1)}},{key:"componentDidUpdate",value:function(){(0,y.default)(this._feditRef).froalaEditor("destroy"),this.initFroala()}},{key:"componentWillUnmount",value:function(){var e=(0,y.default)(this._feditRef);e.off();var t=this._containerRefs.querySelector('[data-cmd="customUploadImage"]');t&&t.removeEventListener("click",this.openImagePickerModal),e.froalaEditor("destroy")}},{key:"render",value:function(){var e=this,t=void 0===this.props.defaultHtml?this.props.html:this.props.defaultHtml||"";return E.default.createElement("div",{id:this.props.id,ref:function(t){e._containerRefs=t},className:"text-component text-edit ".concat(D(this.props.paragraphSize)," ").concat(L(this.props.type))},E.default.createElement("div",{className:"fr-popup color-picker-container"}),E.default.createElement("div",(0,u.default)({className:"fedit",ref:function(t){e._feditRef=t}},(0,N.default)(t,!1))),E.default.createElement("div",{className:"msg",ref:function(t){e._msgRef=t}}),E.default.createElement(b.default,{size:b.default.Sizes.SMALL,ref:function(t){e._loader=t},isLoading:!1}))}},{key:"initFroala",value:function(){var e=this,t=this.textEditModel({placeholder:this.props.placeholder,toolbar:this.props.toolbar});y.default.FroalaEditor.DEFAULTS.key="2YRUFVRf1XPLEb1IFd1==";var n=(0,y.default)(this._feditRef);n.on("froalaEditor.beforeImageUpload",(function(){return!1})),n.on("froalaEditor.contentChanged",(function(t,n){var a=t.target.querySelector(".fr-view");"function"==typeof e.props.onChange?e.props.onChange({html:n.html.get(),innerHtml:a.innerHTML,gapId:e.findclassNameParent(a,"gap",5)}):void 0!==e.props.html&&(0,y.default)(e._feditRef).froalaEditor("html.set",e.props.html),0===a.textContent.trim().length?(n.$box.removeClass("show-froala"),e.props.onHasContentChanged&&e.props.onHasContentChanged(!1)):!n.$box.hasClass("show-froala")&&n.$box.hasClass("focus")&&(n.$box.addClass("show-froala"),e.props.onHasContentChanged&&e.props.onHasContentChanged(!0))})),n.on("froalaEditor.focus",(function(n,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.selection.restore();var i=n.target.getElementsByClassName("fr-view")[0],o=i.textContent.trim(),s=o.length>0&&(!a.$placeholder||o!==a.$placeholder[0].innerHTML)?"focus show-froala":"focus";a.$box.addClass(s),M&&(0,k.default)(i),(0,y.default)(e._msgRef).hide(),r.nonUserEvent||(t.multiLine&&a.$tb.css({"margin-top":-1*a.$tb.outerHeight()}),e.props.onFocus())})),n.on("froalaEditor.blur",(function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.$box.attr("data-ttk-editor-popup"))n.selection.save();else if(n.$box.removeClass("show-froala focus"),e.validate(),n.$box.find("div[contentEditable]").blur(),!a.nonUserEvent){var r=n.html.get(),i=n.el.innerHTML,o=-1===i.indexOf("<img")?r:i;e.props.onBlur({html:o})}})),n.on("froalaEditor.click",(function(){e.props.onClick()})),n.on("froalaEditor.image.beforeUpload froalaEditor.file.beforeUpload",(function(t,n,a){var r=a&&a[0];return r&&(e._loader.on(),e._uploadFile(r)),!1})),this.props.keydownEventFn&&n.on("froalaEditor.keydown",this.props.keydownEventFn),n.froalaEditor(t),(0,y.default)(this._feditRef).froalaEditor("core.isEmpty")&&this.props.defaultStyle&&6!==this.props.toolbar&&this.setDefaultStyle(this.props.defaultStyle),this.props.focusOnCreation&&(0,y.default)(this._containerRefs).find(".fr-element").focus(),this._addCustomButtonActions()}},{key:"findclassNameParent",value:function(e,t,n){return n>0?e&&e.classList.contains(t)?e.id:(n--,this.findclassNameParent(e.parentElement,t,n)):null}},{key:"setDefaultStyle",value:function(e){(0,y.default)(this._feditRef).froalaEditor("commands.selectAll"),e.fontFamily&&(0,y.default)(this._feditRef).froalaEditor("format.applyStyle","font-family",e.fontFamily),e.fontColor&&(0,y.default)(this._feditRef).froalaEditor("format.applyStyle","color",e.fontColor),(0,y.default)(this._feditRef).froalaEditor("selection.clear"),(0,y.default)(this._feditRef).froalaEditor("events.trigger","blur",[{nonUserEvent:!0}])}},{key:"getHTML",value:function(){return(0,y.default)(this._feditRef).froalaEditor("html.get")}},{key:"validate",value:function(){var e=this;if(this.props.validations){var t,n=(0,y.default)(this._feditRef).froalaEditor("html.get");this.props.validations.forEach((function(a){if(t=a.callback(n)){var r=(0,y.default)(e._msgRef);r.show(),r.removeClass().addClass("msg ".concat(t.type)),r.html(t.text)}}))}}},{key:"textEditModel",value:function(e){var t=(0,g.default)(B),n=Object.assign(I.default,T.default.isFeatureEnabled("froalaWithHebrewFonts")?I.HEBREW_FONTS:{}),a=Object.keys(n).map((function(e){return I.default[e]})).reduce((function(e,t){return R(R({},e),{},(0,v.default)({},t.value,t.name))}),{}),r=G[e.toolbar],i=G[1];return t.htmlAllowedEmptyTags=this.props.allowEmptySpans?["span"]:t.htmlAllowedEmptyTags,r&&(t.toolbarButtons=r,t.toolbarButtonsMD=r,t.toolbarButtonsSM=r,t.toolbarButtonsXS=0===e.toolbar?i:r),t.placeholderText=e.placeholder,t.fontSize=["8","9","10","11","12","14","15","16","17","18","20","22","24","26","30","32","36","42","60","72"],t.fontFamily=a,this.props.services.ConfigurationService.reducedEditorCapabilitiesV2&&(t.fontSizeDefaultSelection="14"),t.pasteDeniedAttrs=["contenteditable","class","id"],t.multiLine=!1!==this.props.multiLine,t.pastePlain=this.props.services.ConfigurationService.reducedEditorCapabilitiesV2,t.charCounterCount=!1,this.props.maxCharacters&&(t.charCounterCount=!0,t.charCounterMax=this.props.maxCharacters),t.multiLine||(t.enter=y.default.FroalaEditor.ENTER_BR,t.pastePlain=!0,t.shortcutsEnabled=[],t.htmlAllowedEmptyTags=[],t.toolbarInline=!0,t.toolbarVisibleWithoutSelection=!0),t}},{key:"onSimpleImageUploadInputChange",value:function(e){var t=e.match(/[^\\]*\.(\w+)$/),n=t[0],a=t[1];this._loader.on(),this._handleInsertImageOrFile(a,n,e)}},{key:"openImagePickerModal",value:function(e){var t=this,n=this.props,a=n.modalManager,r=n.ltr,i=n.uploadFile,o=n.language;-1===("button"===e.target.type?e.target:e.target.parentElement).className.split(" ").indexOf("fr-disabled")&&(this._unmountModal=a.mountModal({modalElement:E.default.createElement(C.default,{language:o,limitationConfiguration:this.props.services.ConfigurationService.sizeLimitation,allowCropping:!1,cropToSquare:!1,validTypes:A.IMAGE_VALID_TYPES,uploadFile:i,onCancel:function(){t._unmountModal()},onSubmit:function(e){t.onSimpleImageUploadInputChange(e),t._unmountModal()}}),modalWrapperProps:{ltr:r,hideCloseBtn:!0},onModalPostUnmount:function(){t._unmountModal=null}}))}},{key:"_addCustomButtonActions",value:function(){var e=this._containerRefs.querySelector('[data-cmd="customUploadImage"]');e&&e.addEventListener("click",this.openImagePickerModal)}},{key:"_uploadFile",value:function(e){var t=this,n=e.name,a=e.type.match(/image\/*/);this.props.uploadFile(e,void 0,(function(e,r){e?t._loader.off():t._handleInsertImageOrFile(a,n,r)}))}},{key:"_handleInsertImageOrFile",value:function(e,t,n){var a=this,r=(0,y.default)(this._feditRef);e?this.props.insertImageAsLink?(r.froalaEditor("link.insert","#",t,{"data-image-link":n}),this._loader.off(),r.on("froalaEditor.link.inserted",(function(){r.find(".fr-element").focus(),r.off("froalaEditor.link.inserted")}))):(r.froalaEditor("image.insert",n,!0,{"custom-added-image":!0}),r.on("froalaEditor.image.inserted",(function(){r.find(".fr-element").focus(),r.off("froalaEditor.image.inserted"),a._loader.off()}))):(r.froalaEditor("file.insert",n,t),this._loader.off(),r.on("froalaEditor.file.inserted",(function(){r.find(".fr-element").focus(),r.off("froalaEditor.file.inserted")})))}}],[{key:"_disableImageEdit",value:function(e){if("false"!==e.parentNode.getAttribute("contenteditable")&&!e.parentNode.classList.contains("gap")){var t=document.createElement("span");t.setAttribute("contenteditable","false"),t.setAttribute("class","fr-deletable"),e.replaceWith(t),t.appendChild(e);var n=document.createTextNode(" ");t.parentNode.insertBefore(n.cloneNode(),t),t.parentNode.insertBefore(n.cloneNode(),t.nextSibling)}}}]),n}(E.Component),s.defaultProps={placeholder:void 0,id:void 0,toolbar:0,type:0,paragraphSize:3,onHasContentChanged:void 0,onBlur:function(){},onFocus:function(){},onClick:function(){},insertImageAsLink:!1,language:{IMAGE_PICKER:{},CROPPER:{}},ltr:!1},o=l))||o)||o,H=function(e){var t,n=e.defaultSettings,a=(void 0===n?{}:n).theme;return a&&(a.fontColor||a.fontFamily)&&(t={fontColor:a.fontColor,fontFamily:a.fontFamily}),t},V=(0,O.InteractionHoc)((function(e){return{ltr:e.ltr,language:e.language.interaction.IMAGE,uploadFile:function(){var t;return(t=e.environment).uploadFile.apply(t,arguments)},defaultStyle:H(e),modalManager:e.modalManager}}),{withRef:!0})(j);t.default=V},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=function(){function e(t){var n=t.dispatchTo,a=t.events,i=void 0===a?[]:a,o=t.id;(0,r.default)(this,e),this._dispatchTo=n,this._events=i,this._id=o,this._logEventsQueue=[]}return(0,i.default)(e,[{key:"addEventToQueue",value:function(e,t){this._logEventsQueue.push(t)}},{key:"hasEventsInQueue",value:function(){return this.getLogEventsQueueSize()>0}},{key:"getLogEventsQueueSize",value:function(){return this._logEventsQueue.length}}]),e}();t.default=o},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=a(n(9)),o=a(n(3)),s=a(n(4)),l=a(n(14)),u="participants",c="student-report",d="task-report",f="task-comparison",p="reports-dashboard",h="live-session-participants",m="path-report",v=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"init",value:function(t){var n,a=null==t||null===(n=t.appConf)||void 0===n?void 0:n.mixPanel;a&&(!function(e,t){if(!t.__SV){var n,a,r=window;try{var i,o,s,l=r.location,u=l.hash;i=function(e,t){return(o=e.match(RegExp(t+"=([^&]*)")))?o[1]:null},u&&i(u,"state")&&("mpeditor"===(s=JSON.parse(decodeURIComponent(i(u,"state")))).action&&(r.sessionStorage.setItem("_mpcehash",u),history.replaceState(s.desiredHash||"",e.title,l.pathname+l.search)))}catch(c){}window.mixpanel=t,t._i=[],t.init=function(e,r,i){function o(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var s=t;for(void 0!==i?s=t[i]=[]:i="mixpanel",s.people=s.people||[],s.toString=function(e){var t="mixpanel";return"mixpanel"!==i&&(t+="."+i),e||(t+=" (stub)"),t},s.people.toString=function(){return s.toString(1)+".people (stub)"},n="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" "),a=0;a<n.length;a++)o(s,n[a]);t._i.push([e,r,i])},t.__SV=1.2,(r=e.createElement("script")).type="text/javascript",r.async=!0,r.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn4.mxpnl.com/libs/mixpanel-2-latest.min.js",(i=e.getElementsByTagName("script")[0]).parentNode.insertBefore(r,i)}}(document,window.mixpanel||[]),window.mixpanel&&"function"==typeof window.mixpanel.init&&(window.mixpanel.init(a),e._registerSuperProperties()))}},{key:"_registerSuperProperties",value:function(){var t;if(window.mixpanel&&"function"==typeof window.mixpanel.register){var n=l.default.getUser(),a=l.default.getAppdata().accountDetails,r=l.default.getAppdata().appConf,o=r&&r.mixPanelSuperProperties,s=l.default.getAssignedRoles(),u=(t={},(0,i.default)(t,e.PARAMS.USER_ID,n.id),(0,i.default)(t,e.PARAMS.CURRENT_ROLE,s&&s.length?s.sort().join(","):"undetermined"),t);o.accountDetails&&o.accountDetails.length&&o.accountDetails.split(",").forEach((function(t){u[e.SUPER_PROPERTIES_MAPPING.ACCOUNT[t.trim()]]=a[t.trim()]})),o.appConfig&&o.appConfig.length&&o.appConfig.split(",").forEach((function(t){u[e.SUPER_PROPERTIES_MAPPING.APP_CONFIG[t]]=r[t]})),window.mixpanel.register(u)}}},{key:"sendEvent",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(window.mixpanel&&"function"==typeof window.mixpanel.track){if([this.TITLES.USER_LOGIN,this.TITLES.CLICK_OVERVIEW_CARD,this.TITLES.CLICK_ICON_TOOLBAR].indexOf(t)>-1)a[e.PARAMS.CONTEXT_ROLE]="undetermined";else{var r=l.default.getUserRoles();a[e.PARAMS.CONTEXT_ROLE]=r&&r.length?r.sort().join(","):"undetermined"}a.component=n||void 0,window.mixpanel.track(t,a)}}}]),e}();t.default=v,v.TITLES={CLICK_FULL_SCREEN:"click_full_screen",CLICK_REPORTS:"click_reports",ADD_TEACHING_GROUP:"add_teaching_group",NEW_TEACHING_GROUP_CREATION:"new_teaching_group_creation",CLICK_LEARNING_GROUP:"enter_learning_group",INVITE_LEARNERS:"invite_learners",SEND_INVITATION:"send_invitations",EDIT_LINK_EXPIRATION:"edit_link_expiration",COPY_LINK:"copy_link",FILTER_REPORT_TYPE:"filter_report_type",DRILL_REPORT:"drill_report",MESSAGE_FOR_LEARNER:"write_message_to_learner",MESSAGE_TO_LEARNERS_SENT:"message_to_learners_sent",CLICK_QUICK_NAVIGATION:"click_quick_navigation",EDIT_EBOOK:"edit_ebook",UNANSWERED_QUESTIONS_DIALOG:"unanswered_questions_dialog",SUBMIT_ASSESSMENT:"submit_assessment",OPEN_PRODUCT_DETAILS:"open_product_details",OPEN_PRODUCT:"open_product",SHARE_PRODUCT:"share_product",PURCHASING_PRODUCT:"select_to_purchase",PRODUCT_PURCHASED:"continue_to_payment",CLOSE_PRODUCT_CHECKOUT:"left_purchase_process",USER_LOGIN:"user_login",SELECT_FROM_MENU:"select_from_menu",OPEN_MENU:"open_menu",SET_ASSIGNMENT:"set_assignment",SELECT_LEARNERS:"select_learners",PRESENT_QUESTION:"present_question",DOWNLOAD_REPORT:"download_report",CLICK_LEARNING_PATH:"click_learning_path",SET_PATH_DETAILS:"set_path_details",ADD_CONTENT_ITEMS:"add_content_items",SET_REQUIREMENTS:"set_requirements",CLICK_ICON_TOOLBAR:"click_icon_toolbar",INTERACT_WITH_OFFLINE_DIALOG:"interact_with_offline_dialog",MESSAGES_CLICK_DEEP_LINK:"messages_click_deep_link",CLICK_OVERVIEW_CARD:"click_overview_card",CLICK_CERTIFICATE_CARD:"click_certificate_card",INTERACT_WITH_CERTIFICATE:"interact_with_certificate",CREATE_NEW_CERTIFICATE:"create_new_certificate",ADD_ITEMS_CERTIFICATE:"add_items_certificate",SET_BASICS_CERTIFICATE:"set_basics_certificate",SET_DETAILS_CERTIFICATE:"set_details_certificate",CUSTOM_LOOK_CERTIFICATE:"custom_look_certificate",SELECT_RETRIES_MODE:"select_retries_mode",CLICK_TRY_AGAIN:"click_try_again",GUEST_SIGN_UP_CLICK_BANNER:"guest_sign_up_click_banner",CLICK_USER_MENU:"click_user_menu",CLICK_LEARN_ABOUT:"click_learn_about",SELECT_FROM_USER_MENU:"select_from_user_menu",SELECT_FROM_ACCOUNT_SETTINGS:"select_from_account_settings",SIGN_UP_PANE:"sign_up_pane",CLICK_FEEDBACK:"click_feedback",SEND_FEEDBACK:"send_feedback",OPEN_SCORING_PANEL:"open_scoring_panel",INTERACT_WITH_SCORING_PANEL:"interact_with_scoring_panel",ENTER_VALUES_SCORING_PANEL:"enter_values_scoring_panel",MANAGE_SCHEDULING_DIALOG:"manage_scheduling_dialog",NAVIGATE_TO_CONTENT:"navigate_to_content",CLICK_TAB:"click_tab",CLICK_TAG_MANAGEMENT:"click_tag_management",TAG_DIALOG_APPEARS:"tag_dialog_appears",ADD_ITEM:"add_item",SELECT_CREATE_CONTENT:"select_create_content",ENRICH_CONTENT:"enrich_content",IMPORT_CONTENT:"import_content",INTERACT_WITH_QUESTION:"interact_with_question",SELECT_DISCUSSION_TYPE:"select_discussions_type",START_NEW_DISCUSSION:"write_in_discussion",FILTER_LEARNING_GROUP:"messages_filter_learning_group",SELECT_RECIPIENT_FROM_LIST:"messages_select_recipient_from_list",START_NEW_CONVERSATION:"start_a_new_conversation",SELECT_RECIPIENT:"message_select_a_new_recipient",WRITE_MESSAGE_TO_RECIPIENT:"write_message_to_recipient",MESSAGE_SENT:"message_sent",PREVIEW_CONTENT_ITEM:"preview_content_item",MOVE_NOTIFICATION_TO_ARCHIVE:"move_notification_to_archive",SELECT_NOTIFICATION:"select_a_notification",FILTER_NOTIFICATION_LEARNING_GROUP:"select_notifications_learning_group",SELECT_NOTIFICATION_TYPE:"select_notifications_type",SEARCH_RESULTS:"search_results",NOTIFICATION_CLICK_DEEP_LINK:"notification_click_deep_link",SESSION_END:"session_end",SESSION_EXPIRED:"session_has_expired",INTERACT_WITH_CONTENT_ITEM_DIALOG:"Interact_with_content_item_dialog",INTERACT_WITH_CHANNEL_ITEM_DIALOG:"Interact_with_course_dialog",ORGANIZE_DASHBOARD:"organize_dashboard",SEARCH_IMAGES:"search_images",CROP_IMAGE:"crop_image",SORT_COLUMNS:"sort_columns",CLICK_MORE_MENU:"click_more_menu",COURSE_SETTINGS:"course_settings",ADD_EXISTING_CONTENT:"add_existing_content",TIME_PLANNING:"time_planning",INTERACT_WITH_CREATE_INTERACTION_DIALOG:"interact_with_create_interaction_dialog",CHANGE_TIME_PERIOD:"change_time_period",SCORM_WARNING:"scorm_warning",CLICK_CONTENT_SETTINGS:"click_content_settings",REPLACE_FILE:"replace_file",ENABLE_BLOCKING_QUESTIONS:"enable_blocking_questions",SELECT_CONTENT_REPLACE:"select_content_replace",CLICK_CLICKER:"click_clicker",CLICK_GENERATE_INTERACTIONS:"click_generate_interactions",INTERACT_WITH_INTERACTIONS_ALERT_DIAOG:"interact_with_interactions_alert_diaog",INTERACT_WITH_MAGIC_INTERACTIONS:"interact_with_magic_interactions",MAGIC_INTERACTIONS_CREATION:"magic_interactions_creation",INTERACT_WITH_EXTENSION:"interact_with_extension",RECOMMENDATIONS_RESULTS:"recommendations_results",QUESTION_DATA_LOSS_ALERT:"question_data_loss_alert",CHANNEL_ITEMS_SORT:"channel_items_sort",RUN_AS_ASSESSMENT_DISABLED:"run_as_assessment_disabled_popup",CREATE_OFF_PLATFORM_EVENT:"create_off_platform_event",SAVE_OFF_PLATFORM_EVENT:"save_off_platform_event",SAVE_AND_PUBLISH_OFF_PLATFORM_EVENT:"save_and_publish_off_platform_event",UNPUBLISH_OFF_PLATFORM_EVENT:"unpublish_off_platform_event",CLICK_OFF_PLATFORM_EVENT:"click_off_platform_event",UPDATE_SINGLE_USER_ATTENDANCE:"update_single_user_attendance",UPDATE_ALL_USERS_ATTENDANCE:"update_all_users_attendance",OPEN_EDIT_ALL_DIALOG:"open_edit_all_dialog",OPEN_EVENT_ATTENDANCE_REPORT:"open_event_attendance_report",CLICK_BULK_DUE_DATE:"click_bulk_due_date",APPLY_BULK_DUE_DATE:"apply_bulk_due_date",CLICK_BULK_AVAILABILITY:"click_bulk_availability",APPLY_BULK_AVAILABILITY:"apply_bulk_availability",INTERACTION_SIGNED_WITH_E_SIGNATURE:"interaction_signed_with_e_signature",INTERACTION_E_SIGNATURE_CREATED:"interaction_e_signature_created",UPLOAD_FILE_LEARNER:"upload_file_learner",USER_PROFILE_EDIT_AVATAR_DIALOG:"user_profile_edit_avatar_dialog",USER_PROFILE_EDIT_IMAGE_SELECTION_DIALOG:"user_profile_edit_image_selection_dialog",USER_PROFILE_IMAGE_CROPPER_DIALOG:"user_profile_image_cropper_dialog",WHATS_NEXT_CALENDAR:"whats_next_calendar",WHATS_NEXT:"WHATS_NEXT",KEEP_LEARNING:"keep_learning",SET_NOTIFICATIONS_CHANNEL:"channel_settings"},v.COMPONENTS={LEARNING_GROUP:"learning_group",TEACHING_GROUP_DIALOG:"teaching_group_dialog",INVITED_LEARNERS_DIALOG:"invited_learners_dialog",LIBRARY_ITEM:"library_item",TOOLBAR:"toolbar",OFFLINE_DIALOG:"offline_dialog",REPORTS:"reports",MESSAGES:"messages",WELCOME:"welcome",CI_PLAYER:"ci_player",ASSESSMENT:"assessment",EBOOK_EDITOR:"ebook_editor",STORE:"store",T2K_APP:"t2kApp",ASSIGNMENT_DIALOG:"assignment_dialog",PATH:"path",LEARNING_PATH_DIALOG:"learning_path_dialog",OVERVIEW:"overview",CERTIFICATE:"certificate",INTERACTIVE_VIDEO:"interactive_video",INTERACTIVE_POWER_POINT:"interactive_powerPoint",RETRIES_DIALOG:"retries_dialog",ASSESSMENT_SCORE_DIALOG:"assessment_score_dialog",GUEST_SIGN_UP_BANNER:"guest_sign_up_banner",USER_MENU:"user_menu",SIGN_UP_PANE:"sign_up_pane",FEEDBACK_DIALOG:"feedback_dialog",SCHEDULING_DIALOG:"scheduling_dialog",MY_ECHO:"myecho",NAVIGATION_BAR:"navigation_bar",LIBRARY_NAVIGATION_TREE:"library_navigation_tree",TAG_MANAGEMENT:"tag_management",CREATE_CONTENT_DIALOG:"create_content_dialog",CREATE_CHANNEL_DIALOG:"create_course_dialog",LIVE_SESSION:"live_session",GROUP_TOOLBAR:"group_toolbar",DISCUSSIONS_PANE:"discussions_pane",MESSAGE_PANE:"message_pane",CI_EDITOR:"ci_editor",NOTIFICATIONS_PANE:"notifications_pane",SEARCH_PANE:"search_pane",CREATE_INTERACTION_DIALOG:"create_interaction_dialog",REPLACE_CONTENT_DIALOG:"replace_content_dialog",HEADER:"header",INTERACTIONS_MENU:"interactions_menu",SIDE_DRAWER:"side_drawer",SEARCH_EXTENSION:"search_extension",CHANNEL_TOOLBAR:"channel_toolbar",OFF_PLATFORM_EVENT:"off_platform_event",OFF_PLATFORM_EVENT_REPORT:"off_platform_event_report",COURSE_STRUCTURE:"course_structure",INTERACTIONS:"interactions",HOMEPAGE:"homepage"},v.PARAMS={USER_ID:"user_id",CURRENT_ROLE:"current_role",CONTEXT_ROLE:"role_in_channel",POSSIBLE_ROLES:"possible_roles",ACCOUNT_ID:"account_id",ACCOUNT_NAME:"account_name",LEARNING_GROUP_ID:"learning_group_id",LEARNING_GROUP_NAME:"learning_group_name",EXPIRATION_PERIOD:"expiration_period",LIBRARY_ITEM_TYPE:"library_item_type",LIBRARY_ITEM_NAME:"library_item_name",REPORT_TYPE:"report_type",LEARNER_ID:"learner_id",CONTENT_ID:"content_id",CONTENT_NAME:"content_name",CHANNEL_NAME:"channel_name",USER_ACTION:"user_action",PRODUCT_ID:"product_id",PRODUCT_PRICE:"price",PRODUCT_TYPE:"product_type",PRODUCT_NAME:"product_name",PRODUCT_SOCIAL:"social",PICTURE:"picture",OPTION:"option",SET_DATE:"set_date",INSTRUCTIONS:"instructions",ASSIGNMENT:"assignment",LEARNING_PATH_NAME:"learning_path_name",ADAPTIVE_PATH:"adaptive_path",PROGRAMMED_UNLOCK_ITEMS_COUNT:"programmed_unlock_items_count",DELAY_DAYS:"delay_days",ITEM_DELAYED:"item_delayed",TYPE:"type",STATUS:"status",GRADE:"grade",CERTIFICATE_NAME:"certificate_name",CERTIFICATE_STATUS:"certificate_status",CERTIFICATE_EXPIRATION:"certificate_expiration",CERTIFICATE_PICTURE:"certificate_picture",GUEST:"guest",STATE:"state",VALUE:"value",END_DATE:"end_date",TIME_TO_COMPLETE:"time_to_complete",GROUP_ID:"group_id",GROUP_TYPE:"group_type",ACTIVATION_STATE:"activation_state",GROUP_NAME:"group_name",TAB_NAME:"tab_name",CONTENT_TYPE:"content_type",LANGUAGE:"language",LIVE_SESSION_LEADER:"live_session_leader",LIVE_SESSION_LEARNERS_AMOUNT:"live_session_learners_amount",LIVE_SESSION_LEARNER_ID:"live_session_learner_id",LIVE_SESSION_FILTER_CHANGED:"live_session_filter_changed",COMPONENT:"component",NAME:"name",MEDIA_TYPE:"MEDIA_TYPE",CONTENT_ITEM_TYPE:"content_item_type",NUMBER_OF_INTERACTION_SUGGESTED:"number_of_interaction_suggested",EXTRACT_ID:"extract_id",INTERACTION_TYPE:"interaction_type",HAS_SCORE:"has_score",ALL_DAY_EVENT:"all_day_event",LIVE_SESSION_EVENT:"live_session_event",CALENDAR_INVITE_ENABLED:"calendar_invite_enabled",SEND_INVITATION_RIGHT_NOW:"send_invitation_right_now",FILE_SIZE:"file_size",FILE_TYPE:"file_type",ADDED_RESOURCES:"added_resource"},v.CONDITIONS={YES:"yes",NO:"no"},v.LIBRARY_ITEM_TYPES={LESSON:"lesson",BUZZ:"practice",WORK_SHEET:"practice",ASSESSMENT:"assessment",FUSE:"fuse",PRESENTATION:"presentation",CHANNEL:"learning_group",FILE:"fuse",PATH:"learning_path",CERTIFICATE:"certificate"},v.LIBRARY_ITEM_MENU_TYPES={EDIT:"edit",SETTINGS:"settings",DELETE:"delete",REMOVE:"remove",UNPUBLISH:"unpublish",PUBLISH:"publish",SHARE:"share",REPORTS:"reports",PUBLISH_LINK:"publish_link",EXPORT:"export",CREATE:"create",SHOW:"show",PLAY:"play",PREVIEW:"preview",LOCK:"lock",UNLOCK:"unlock",DUPLICATE:"duplicate",INVITE_LEARNERS:"invite_learners",MANAGE_USERS:"invite_learners",ASSIGNMENT_CREATE:"create_assignment",ASSIGNMENT_EDIT:"edit_assignment",ASSIGNMENT_DELETE:"delete_assignment",PERMISSION:"permission",SCHEDULE:"schedule",RETRIES:"retries"},v.REPORT_TYPES=(r={},(0,i.default)(r,u,"multiple_learner_report"),(0,i.default)(r,c,"single_learner_report"),(0,i.default)(r,d,"single_question_report"),(0,i.default)(r,f,"multiple_question_report"),(0,i.default)(r,p,"overview"),(0,i.default)(r,h,"live_sessions"),(0,i.default)(r,m,"learning_path_report"),r),v.TOOLBAR_ELEMENTS={SEARCH:"search",LEADERBOARD:"leaderboard",DISCUSSIONS:"discussions",MESSAGES:"messages",NOTIFICATIONS:"notifications",LIVE_SESSION:"live_session",CREATE_CHANNEL:"create_channel",ASSIGNMENT_DONE:"assignment_done",ASSIGNMENT_INSTRUCTION:"assignment_instruction",MANAGE_STORE:"manage_store",ORDERS_REPORT:"orders_report",BACK:"back",CLOSE:"close",STORE:"store",REPORTS:"reports",HELP:"help",LIVE_SESSION_CLOSE:"live_session_close",LIVE_SESSION_MINIMIZE:"live_session_minimize",ADD_DISCUSSION:"add_discussion",LOCK:"lock",UNLOCK:"unlock",WHATSAPP_SHARE:"whatsapp_share",TOGGLE_TREE:"toggle_tree",PLATFORM_USAGE_DASHBOARD:"platform_usage_dashboard",PLATFORM_USAGE_DASHBOARD_EXTERNAL_COURSE:"platform_usage_dashboard_external_course",HEATMAP_REPORT:"heatmap_report",CERTIFICATIONS_EXPORT:"certifications_export"},v.NOTIFICATION_TYPE_MAP={USER_PERFORMANCE_ALERT:"alert_ low_success_rate",DIFFICULT_CI_PERFORMANCE_ALERT:"alert_difficult_content",ENGAGEMENT_DROP_ALERT:"alert_drop_in_engagament",ASSIGNMENT_NOTIFICATION:"notification_to_learner_assignment_scheduled",ASSIGNMENT_DUE_DATE_NOTIFICATION:"notification_to_instructor_assignment_due_date_soon+learner",ASSIGNMENTS_DUE_DATE_REPORT_NOTIFICATION:"alert_assignment_completion_user_report",NEW_CONTENT_ON_CHANNEL:"notification_new_content_item",CHANNEL_STATUS_SET_TO_SCHEDULED_INSTRUCTOR:"notification_to_instructor_course_has_start_date",CHANNEL_STATUS_SET_TO_STARTED_INSTRUCTOR:"notification_to_instructor_course_started",CHANNEL_STATUS_SOON_START_INSTRUCTOR:"notification_to_ instructor_course_will_start_soon",CHANNEL_STATUS_SOON_END_INSTRUCTOR:"notification_to_ instructor_course_will_end_soon",CHANNEL_STATUS_SET_TO_STARTED_LEARNER:"notification_to_learner_course_started",ITEM_SCHEDULED:"content_item_scheduled"},v.SUPER_PROPERTIES_MAPPING={ACCOUNT:{id:"account_id",name:"account_name",isTrial:"is_trial"},APP_CONFIG:{}}},,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Positions=t.Sizes=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(6)),s=a(n(8)),l=a(n(7)),u=a(n(0));a(n(2));n(73);var c=a(n(11)),d=a(n(346)),f=a(n(186)),p=a(n(187)),h=a(n(188));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var v={LARGE:1,SMALL:2};t.Sizes=v;var g={STATIC:"static",RELATIVE:"relative",ABSOLUTE:"absolute",FIXED:"fixed"};t.Positions=g;var E=function(e){(0,o.default)(n,e);var t=m(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).genericLoaderRender=function(){return u.default.createElement("div",{className:"generic-loader"},u.default.createElement("div",{className:"grid"},u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null),u.default.createElement("div",null)))},a.state={},a.state.isLoading=a.props.isLoading,a}return(0,i.default)(n,[{key:"render",value:function(){var e=(0,c.default)("t2k-loader",{small:this.props.size===n.Sizes.SMALL,static:this.props.position===n.Positions.STATIC,absolute:this.props.position===n.Positions.ABSOLUTE}),t=window.location.hostname;return t.indexOf("maytronicsacademy.com")>-1||t.indexOf("maytronics.echo.timetoknow.com")>-1?this.state.isLoading?u.default.createElement("div",{className:e},u.default.createElement("img",{src:p.default,alt:"maytronicsex"})):null:t.indexOf("rayzone")>-1?this.state.isLoading?this.genericLoaderRender():null:t.indexOf("learning.msumain.edu.ph")>-1?this.state.isLoading?u.default.createElement("div",{className:e},u.default.createElement("img",{src:f.default,alt:"Sarimanok"})):null:-1!==t.indexOf("enabley")||-1!==t.indexOf("timetoknow")?this.state.isLoading?u.default.createElement(d.default,{className:e,loop:!0,animationData:h.default,play:!0}):null:this.state.isLoading?this.genericLoaderRender():null}},{key:"on",value:function(){var e=this;return new Promise((function(t){return e.setState({isLoading:!0},t)}))}},{key:"off",value:function(){var e=this;return new Promise((function(t){return e.setState({isLoading:!1},t)}))}}]),n}(u.default.Component);t.default=E,E.defaultProps={isLoading:!0,size:v.LARGE,position:g.FIXED},E.Sizes=v,E.Positions=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ASSESSMENT=t.QUIZ=void 0;t.QUIZ=0;t.ASSESSMENT=1},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0));r(n(2));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.sensitive,a=e.block,r=(0,o.default)(e,["children","sensitive","block"]);return f.default.createElement("label",{className:"t2i-radio".concat(n?" sensitive":"").concat(a?" t2i-radio-block":"")},f.default.createElement("input",(0,i.default)({},r,{type:"radio"})),f.default.createElement("div",{className:"t2i-radio-container"},f.default.createElement("div",{className:"t2i-radio-indicator"}),t&&f.default.createElement("div",{"data-unittest-id":"children-container"},t)))}}]),n}(f.Component);t.default=h,h.defaultProps={children:void 0,sensitive:!1,block:!1}},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(381)).default;t.default=r},,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11))),p=r(n(202)),h=r(n(13)),m=r(n(41)),v=r(n(1163));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var E=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1},a.onClick=a._onClick.bind((0,s.default)(a)),a._isPc=h.default.isPC()&&!h.default.isIpadSafari(),a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.indicator,a=e.indicatorCallback;n&&a(t,n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.id,a=t.indicator,r=t.indicatorCallback;e.indicator!==a&&r(n,a)}},{key:"render",value:function(){return this.props.showAsOption?this._getOption():this._getIcon()}},{key:"_onClick",value:function(){this.props.isClickable&&(this.props.mixPanel&&this.props.mixPanel.params&&m.default.sendEvent(this.props.mixPanel.title||m.default.TITLES.CLICK_ICON_TOOLBAR,this.props.mixPanel.component||m.default.COMPONENTS.TOOLBAR,this.props.mixPanel.params),this.props.onButtonClick(this.props))}},{key:"_getIcon",value:function(){var e,t,n=this,a=this.props,r=a.ariaLabel,i=a.role,o=a.tabIndex,s=a.ariaExpanded,l=a.isSelected,u=(0,f.default)("element",this.props.className,{"element--selected":l,"element--clickable":this.props.isClickable}),c=(0,f.default)("element__icon","element__icon--".concat(this.props.iconName)),p=this._getTooltip();this.props.title&&this._isPc&&(e=this._toggleTooltip.bind(this,!0),t=this._toggleTooltip.bind(this,!1));var h=this.props.indicator?this._getIndicator(e,t):"";return d.default.createElement("div",{id:"".concat(this.props.id,"-element"),key:"".concat(this.props.id,"-element"),className:u,onMouseOver:this.props.onHover,ref:function(e){n._iconRef=e}},d.default.createElement("div",{className:"element__icon-wrapper",onClick:this.onClick,onMouseEnter:e,onMouseLeave:t,onKeyDown:function(e){return 13===e.keyCode&&n.onClick()},role:i,tabIndex:o,"aria-label":r,"aria-expanded":s?l?"true":"false":void 0},this.props.iconElement?this.props.iconElement:d.default.createElement("div",{id:"".concat(this.props.id,"-icon"),className:c})),h,p)}},{key:"_getIndicator",value:function(e,t){var n=this,a=(0,f.default)("element__indicator",this.props.indicatorCustomClass);return d.default.createElement("div",{className:a,onClick:this.onClick,onMouseEnter:e,onMouseLeave:t,onKeyDown:function(e){return 13===e.keyCode&&n.onClick()}},this.props.showIndicatorNumber&&this.props.indicator)}},{key:"_getOption",value:function(){var e=this.props,t=e.iconName,n=e.iconElement,a=e.label,r=e.title,i=e.indicator,o=e.isSelected,s=e.indicatorCustomClass,l=e.isDisabled,u=e.id;return d.default.createElement(v.default,{id:u,iconName:t,iconElement:n,title:a||r,indicator:i,isSelected:o,onClick:this.onClick,indicatorCustomClass:s,isDisabled:l})}},{key:"_getTooltip",value:function(){return this.state.showTooltip&&this.props.title?d.default.createElement(p.default,{content:this.props.title,parentOffsets:this._iconRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"tooltip--toolbar"}):""}},{key:"_toggleTooltip",value:function(e){this.setState({showTooltip:e})}}]),n}(d.Component);E.defaultProps={className:"",onButtonClick:function(){},onHover:void 0,indicatorCallback:function(){},indicatorCustomClass:"",showIndicatorNumber:!0,mixPanel:null,ariaLabel:null,role:void 0,tabIndex:void 0,ariaExpanded:void 0};var _=E;t.default=_},,,,,,,function(e,t){},function(e,t){},,function(e,t){},function(e,t){},function(e,t,n){var a={"./ar":83,"./ar.js":83,"./de":84,"./de.js":84,"./es":85,"./es.js":85,"./fi":86,"./fi.js":86,"./fr":87,"./fr.js":87,"./he":88,"./he.js":88,"./hu":89,"./hu.js":89,"./it":80,"./it.js":80,"./ja":90,"./ja.js":90,"./ko":91,"./ko.js":91,"./nl":92,"./nl.js":92,"./pl":93,"./pl.js":93,"./pt-br":94,"./pt-br.js":94,"./ro":95,"./ro.js":95,"./ru":96,"./ru.js":96,"./th":97,"./th.js":97,"./vi":98,"./vi.js":98,"./zh-cn":99,"./zh-cn.js":99,"./zh-tw":100,"./zh-tw.js":100};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=170},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(609)).default;t.default=r},,function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(23)),s=a(n(3)),l=a(n(4)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=a(n(9)),p=r(n(0)),h=(a(n(2)),a(n(11)));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v={PRIMARY:"primary",SECONDARY:"secondary"},g=(i={},(0,f.default)(i,v.PRIMARY,!0),(0,f.default)(i,v.SECONDARY,!0),i),E={LIGHT:"light"},_=(0,f.default)({},E.LIGHT,!0),y=v.PRIMARY,k=E.LIGHT,S=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r)))._onKeyDown=function(t){var n=e.props,a=n.disabled,r=n.onClick;13!==t.keyCode||a||r()},e}return(0,l.default)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.disabled,r=t.onClick,i=n.getButtonTheme(this.props.theme),s=n.getButtonType(this.props.type),l=(0,h.default)(n.getButtonClassesObj(s,i),this.props.styleClass),u=a?{disabled:"disabled"}:{onClick:r};return p.default.createElement("div",(0,o.default)({id:this.props.id,"data-automation-id":this.props.dataAutomationId,title:this.props.title,className:l},u,{role:"button",tabIndex:"0",onKeyDown:function(t){return e._onKeyDown(t)}}),this.getContent())}},{key:"getContent",value:function(){if(!this.props.icon)return this.props.text;var e,t=this.props.icon.displayAfterText;if(p.default.isValidElement(this.props.icon))e=p.default.createElement("span",{className:"icon icon--component"},this.props.icon);else{var n=(0,h.default)("icon icon--".concat(this.props.icon.classNames),{"icon-before":!t,"icon-after":t});e=p.default.createElement("span",{className:n})}var a=p.default.createElement("span",null,this.props.text),r=t?[a,e]:[e,a];return p.default.createElement("div",{className:"t2k-app-button__content"},r[0]," ",r[1])}}],[{key:"getButtonClassesObj",value:function(e,t){var n;return n={"t2k-app-button":!0},(0,f.default)(n,"t2k-app-button--".concat(e),!0),(0,f.default)(n,"t2k-app-button--".concat(e,"--").concat(t),!0),n}},{key:"getButtonTheme",value:function(e){return _[e]?e:k}},{key:"getButtonType",value:function(e){return g[e]?e:y}}]),n}(p.Component);S.TYPES=v,S.THEMES=E,S.defaultProps={text:"",icon:void 0,type:y,theme:k,onClick:function(){},styleClass:void 0,disabled:!1,id:null,dataAutomationId:null,title:null};var T=S;t.default=T},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(82)),s=n(62),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.parent,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;(0,r.default)(this,e),this._channel=t,this._listenerFrame=n,this._targetFrame=a,this._listenerCallback=i,this._context=o,this._listenerName="listenerFrame",this._targetName="targetFrame",this._currentCallbacks={},this._id=(0,s.v4)(),this._sameWindowMode=this._isSameWindowMode(),this._sameWindowMode?window.t2k.communicator.windowCommunicators.push(this):this._initOnReceive()}return(0,i.default)(e,null,[{key:"_log",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(t=console)[e].apply(t,a)}}]),(0,i.default)(e,[{key:"_isSameWindowMode",value:function(){return this._listenerFrame===this._targetFrame}},{key:"_initOnReceive",value:function(){var e=this;this._onReceiveCallback=function(t){e._receive(t)},this._listenerFrame.addEventListener("message",this._onReceiveCallback,!1)}},{key:"extendListenerCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this._listenerCallback,e)}},{key:"_receive",value:function(t){var n=this;if(this._sameWindowMode){var a=t.method,r=t.config,i=this._context||this._listenerCallback;this._logMessage("Message RECEIVED","FROM",t),this._listenerCallback[a]?this._listenerCallback[a].call(i,this._channel,r,t.callback):e._log("warn","CHANNEL ".concat(this._channel,": Unknown API method, or too late callback call --\x3e ").concat(a))}else if(t.source===this._targetFrame)try{var s=(0,o.default)(t.data)?JSON.parse(t.data):t.data;if(s.senderId===this._id||!this._channel||s.channel!==this._channel)return;var l=s.method,u=s.config;this._logMessage("Message RECEIVED","FROM",s);var c=this._currentCallbacks[l],d=c?c.callback:null,f=this._listenerCallback[l]||d;if(f){d&&this._clearCallbackTimeout(l,c);var p=this._context||this._listenerCallback,h=function(){};s.callback&&(h=function(e){n.send(s.callback,e)}),f.call(p,this._channel,u,h)}else e._log("warn","CHANNEL ".concat(this._channel,": Unknown API method, or too late callback call --\x3e ").concat(l))}catch(m){e._log("info","CHANNEL ".concat(this._channel,", Error: ").concat(m))}}},{key:"send",value:function(t,n,a,r){var i=this;if(this._sameWindowMode||this._targetFrame&&this._targetFrame.postMessage){var o=null,l=null;if(a){o=t+"_callback_"+(0,s.v4)();var u=r&&r.timeout||3e4;l=this._listenerFrame.setTimeout((function(){i._currentCallbacks[o].timeout=void 0,e._log("warn","CHANNEL ".concat(i._channel,": Timeout (").concat(u," ms) for api method callback --\x3e ").concat(o," sent by --\x3e ").concat(i._listenerName))}),u),this._currentCallbacks[o]={callback:a,timeout:l}}var c={method:t,config:n,callback:o,senderId:this._id,channel:this._channel};if(this._logMessage("Message SENT","TO",c),this._sameWindowMode){var d=this._getCorrespondCommunicator();d?(c.callback=a?function(t){i._currentCallbacks&&i._currentCallbacks[o]&&i._currentCallbacks[o].callback?(i._clearCallbackTimeout(o),a(i._channel,t)):e._log("warn","CHANNEL ".concat(i._channel,": Invalid callback call --\x3e ").concat(o))}:function(){},d._receive(c)):a&&a(this._channel,{error:"no correspond communicator found"})}else{var f=JSON.stringify(c);this._targetFrame.postMessage(f,"*")}}else e._log("warn","CHANNEL ".concat(this._channel,": [PMM - ").concat(this._listenerName,"] --\x3e sending to target: ").concat(this._targetName,", frame does not exist!"))}},{key:"_getCorrespondCommunicator",value:function(){for(var e=0;e<window.t2k.communicator.windowCommunicators.length;e++){var t=window.t2k.communicator.windowCommunicators[e];if(this._id!==t._id&&this._channel===t._channel)return t}return null}},{key:"_clearCallbackTimeout",value:function(e,t){var n=t||this._currentCallbacks[e];if(n&&n.timeout){var a=n.timeout;this._listenerFrame.clearTimeout(a)}delete this._currentCallbacks[e]}},{key:"_logMessage",value:function(t,n,a){e._log("debug","CHANNEL ".concat(this._channel,": ").concat(t," by ").concat(this._listenerName," ").concat(n," ").concat(this._targetName," --\x3e ").concat(a.method)),e._log("debug",JSON.stringify(a.config,null,"\t"))}},{key:"getChannel",value:function(){return this._channel}},{key:"destroy",value:function(){var e=this;Object.keys(this._currentCallbacks).forEach((function(t){e._currentCallbacks[t].timeout&&e._listenerFrame.clearTimeout(e._currentCallbacks[t].timeout)})),this._sameWindowMode||this._listenerFrame.removeEventListener("message",this._onReceiveCallback,!1),this._onReceiveCallback=null,this._currentCallbacks=null,this._listenerFrame=null,this._targetFrame=null,this._listenerCallback=null,this._context=null,this._listenerName=null,this._targetName=null,this._channel=null,this._sameWindowMode=null;for(var t=0;t<window.t2k.communicator.windowCommunicators.length;t++){var n=window.t2k.communicator.windowCommunicators[t];if(this._id===n._id){window.t2k.communicator.windowCommunicators.splice(t,1);break}}}}]),e}();window.t2k=window.t2k||{},window.t2k.communicator=window.t2k.communicator||{},window.t2k.communicator.windowCommunicators=window.t2k.communicator.windowCommunicators||[];var u=l;t.default=u},,,,,,,function(e,t,n){"use strict";n.r(t),t.default=n.p+"./asset/950bcb673623fae3a918b82d9435a54e.gif"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./asset/501efd2da20d6abaeb8617c971215a18.gif"},function(e){e.exports=JSON.parse('{"v":"5.5.7","meta":{"g":"LottieFiles AE 0.1.21","a":"","k":"","d":"","tc":""},"fr":29.9700012207031,"ip":0,"op":60.0000024438501,"w":1366,"h":768,"nm":"Pre-comp 1","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Y_logo Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[683,384,0],"ix":2},"a":{"a":0,"k":[26,36,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[1.16,0.048],[0.527,-1.103],[9.666,-14.837],[7.295,2.583],[-0.076,0.332],[-1.586,-0.341],[-1.552,-0.129],[-1.597,3.843],[0.09,3.281],[0,0],[-1.216,0.461],[-0.511,-3.791],[0,0],[0,0],[0.748,0.011],[0,0]],"o":[[0,0],[0,0],[-1.227,-0.051],[-8.154,15.707],[-4.515,6.637],[-0.364,-0.12],[0.26,-1.259],[1.533,0.3],[4.62,0.372],[-2.946,-0.153],[-0.001,0.001],[-0.103,-1.301],[2.536,-0.951],[0.241,1.546],[0,0],[0.248,-0.702],[0,0],[0,0]],"v":[[21.368,-36.023],[25.523,-21.387],[21.945,-21.397],[19.422,-19.822],[-4.483,27.695],[-25.106,33.441],[-25.447,32.798],[-21.888,27.15],[-17.266,27.917],[-7.743,20.141],[-13.088,15.868],[-15.374,-12.161],[-14.435,-13.648],[-6.401,-11.874],[-4.864,13.523],[10.801,-20.076],[9.914,-21.38],[4.621,-21.501]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.596000043084,0,0.620000023935,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25.977,36.523],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150.000006109625,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"fillpath Outlines 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[683,384,0],"ix":2},"a":{"a":0,"k":[25.5,35.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[5.25,-1],[4.042,0],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.97,0.756],[-2.833,0],[-10.125,0]],"v":[[-12.875,66.375],[0,70.616],[51,70.616],[41.75,68.375],[31.875,63.875],[22.812,70.063],[8.75,70.938],[-1.625,69.125]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":9,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[4.393,-1.097],[5.804,5.368],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.22,-1.167],[-0.43,-3.314],[-10.125,0]],"v":[[-10.756,57.023],[0.188,71.22],[51.187,71.22],[44.637,64.487],[37.743,56.438],[28.186,60.001],[17.055,55.939],[-1.54,61.281]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":27,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[2.68,-1.29],[26.209,-0.566],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-7.934,-2.753],[-2.82,0.061],[-10.125,0]],"v":[[-6.518,38.319],[0.563,72.428],[51.562,72.428],[50.412,56.712],[49.481,41.563],[38.934,39.878],[6.478,47.316],[-1.369,45.594]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":35,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[1.918,-1.376],[26.437,8.141],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-4.677,2.657],[-2.811,-0.082],[-10.125,0]],"v":[[-4.938,29.03],[0.426,71.989],[51.426,71.989],[50.555,48.813],[49.849,32.729],[42.944,23.563],[16.25,33.046],[6.724,24.317]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":47,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[0.775,-1.505],[15.487,4.563],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[0.208,10.771],[-2.798,-0.296],[-10.125,0]],"v":[[-2.568,15.095],[0.222,71.33],[51.221,71.33],[50.768,36.962],[61.026,-0.271],[47.473,4.128],[23.36,20.304],[14.657,14.925]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":56,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[6.686,-2.092],[7.275,1.88],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[8.499,15.345],[-2.788,-0.456],[-10.125,0]],"v":[[-0.79,4.645],[0.068,70.836],[51.068,70.836],[50.928,28.075],[54.085,3.465],[36.501,-3.22],[28.693,10.748],[20.606,7.881]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":58,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[3.112,-1.868],[5.45,1.284],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[1.375,15.047],[-2.786,-0.492],[-10.125,0]],"v":[[-0.395,2.323],[0.034,70.726],[51.034,70.726],[50.964,26.1],[52.542,4.295],[38.125,-6.297],[29.878,8.624],[21.928,6.316]],"c":true}]},{"t":60.0000024438501,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[-0.462,-1.645],[3.625,0.687],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[5.5,19.562],[-2.784,-0.528],[-10.125,0]],"v":[[0,0],[0,70.616],[51,70.616],[51,24.125],[51,5.125],[39.75,-9.375],[31.063,6.5],[23.25,4.75]],"c":true}]}],"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 2"}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[51.625,19.625]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.596000043084,0,0.620000023935,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[1.16,0.048],[0.527,-1.103],[9.666,-14.837],[7.295,2.583],[-0.076,0.332],[-1.586,-0.341],[-1.552,-0.129],[-1.597,3.843],[0.09,3.281],[0,0],[-1.216,0.461],[-0.511,-3.791],[0,0],[0,0],[0.748,0.011],[0,0]],"o":[[0,0],[0,0],[-1.227,-0.051],[-8.154,15.707],[-4.515,6.637],[-0.364,-0.12],[0.26,-1.259],[1.533,0.3],[4.62,0.372],[-2.946,-0.153],[-0.001,0.001],[-0.103,-1.301],[2.536,-0.951],[0.241,1.546],[0,0],[0.248,-0.702],[0,0],[0,0]],"v":[[21.345,-35.308],[25.5,-20.671],[21.922,-20.682],[19.399,-19.106],[-4.506,28.41],[-25.129,34.156],[-25.47,33.513],[-21.911,27.866],[-17.289,28.632],[-7.766,20.856],[-13.111,16.583],[-15.397,-11.446],[-14.458,-12.932],[-6.424,-11.158],[-4.887,14.239],[10.778,-19.36],[9.891,-20.665],[4.598,-20.785]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.596000043084,0,0.620000023935,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[25.5,35.308],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150.000006109625,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"dark","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[683,384,0],"ix":2},"a":{"a":0,"k":[25.5,35.5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":0,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[5.25,-1],[4.042,0],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.97,0.756],[-2.833,0],[-10.125,0]],"v":[[-12.875,66.375],[0,70.616],[51,70.616],[41.75,68.375],[31.875,63.875],[22.812,70.063],[8.75,70.938],[-1.625,69.125]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":3,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[4.965,-1.032],[4.629,1.789],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.72,0.115],[-2.032,-1.105],[-10.125,0]],"v":[[-12.168,63.258],[0.063,70.817],[51.062,70.817],[42.712,67.079],[33.831,61.396],[24.604,66.709],[11.518,65.938],[-1.222,60.073]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":9,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[4.393,-1.097],[7.882,5.186],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.22,-1.167],[-0.43,-3.314],[-10.125,0]],"v":[[-10.756,57.023],[0.188,71.22],[51.187,71.22],[44.637,64.487],[39.431,49],[34.061,47.314],[13.868,53.564],[-1.54,61.281]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":20,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[3.346,-1.215],[25.211,9.192],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-6.101,-2.136],[-1.891,-1.251],[-10.125,0]],"v":[[-8.166,45.593],[0.417,71.959],[51.416,71.959],[48.166,59.736],[45.573,44.455],[34.414,50.145],[4.102,41.371],[-1.435,51.695]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":27,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[2.68,-1.29],[26.209,-0.566],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-7.934,-2.753],[-2.82,0.061],[-10.125,0]],"v":[[-6.518,38.319],[0.563,72.428],[51.562,72.428],[50.412,56.712],[49.481,41.563],[38.934,39.878],[6.478,47.316],[-1.369,45.594]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":32,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[2.204,-1.344],[23.102,11.103],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-5.899,0.628],[-2.815,-0.028],[-10.125,0]],"v":[[-5.531,32.513],[0.478,72.154],[51.477,72.154],[50.501,51.775],[49.711,36.042],[41.44,29.681],[10.836,31.71],[3.689,32.296]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":35,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[1.918,-1.376],[26.437,8.141],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-4.677,2.657],[-2.811,-0.082],[-10.125,0]],"v":[[-4.938,29.03],[0.426,71.989],[51.426,71.989],[50.555,48.813],[49.849,32.729],[42.944,23.563],[16.25,33.046],[6.724,24.317]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":36,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[1.823,-1.387],[16.407,-9.609],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-4.27,3.333],[-2.81,-0.1],[-10.125,0]],"v":[[-4.741,27.868],[0.409,71.934],[51.409,71.934],[50.572,47.825],[50.781,29.979],[43.322,21.944],[16.843,31.984],[7.385,23.535]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":38,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[1.632,-1.408],[16.24,-7.032],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[-3.456,4.685],[-2.808,-0.135],[-10.125,0]],"v":[[-4.346,25.546],[0.375,71.824],[51.375,71.824],[50.608,45.85],[52.643,24.479],[44.077,18.704],[17.528,24.423],[8.707,21.969]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":47,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[0.775,-1.505],[15.487,4.563],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[0.208,10.771],[-2.798,-0.296],[-10.125,0]],"v":[[-2.568,15.095],[0.222,71.33],[51.221,71.33],[50.768,36.962],[61.026,-0.271],[47.473,4.128],[23.36,20.304],[14.657,14.925]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":51,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[3.402,-1.766],[11.837,3.371],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[3.893,12.804],[-2.794,-0.367],[-10.125,0]],"v":[[-1.778,10.451],[0.154,71.11],[51.153,71.11],[50.839,33.012],[57.941,1.389],[42.597,0.862],[27.355,8.619],[17.301,11.794]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":54,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[5.373,-1.962],[9.1,2.476],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[6.656,14.329],[-2.79,-0.421],[-10.125,0]],"v":[[-1.185,6.967],[0.103,70.946],[51.102,70.946],[50.893,30.05],[55.627,2.635],[36.002,-6.525],[29.783,5.584],[19.284,9.446]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":55,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[6.03,-2.027],[7.2,-6.541],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[7.578,14.837],[-2.789,-0.439],[-10.125,0]],"v":[[-0.987,5.806],[0.086,70.891],[51.085,70.891],[50.911,29.062],[54.856,3.05],[37.72,-2.404],[29.238,8.166],[19.945,8.664]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":56,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[6.686,-2.092],[7.275,1.88],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[0.749,12.095],[-2.788,-0.456],[-10.125,0]],"v":[[-0.79,4.645],[0.068,70.836],[51.068,70.836],[50.928,28.075],[54.085,3.465],[36.501,-3.22],[28.693,10.748],[20.606,7.881]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":58,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[3.112,-1.868],[5.45,1.284],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[1.375,15.047],[-2.786,-0.492],[-10.125,0]],"v":[[-0.395,2.323],[0.034,70.726],[51.034,70.726],[50.964,26.1],[52.542,4.295],[38.125,-6.297],[29.878,8.624],[21.928,6.316]],"c":true}]},{"t":60.0000024438501,"s":[{"i":[[0,0],[0,0],[0,0],[0,15.497],[0,0],[-0.462,-1.645],[3.625,0.687],[5.5,3.25]],"o":[[0,0],[0,0],[0,0],[0,-6.333],[0,0],[5.5,19.562],[-2.784,-0.528],[-10.125,0]],"v":[[0,0],[0,70.616],[51,70.616],[51,24.125],[51,5.125],[39.75,-9.375],[31.063,6.5],[23.25,4.75]],"c":true}]}],"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 2"}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0]],"o":[[0,0]],"v":[[51.625,19.625]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.302335252949,0,0.314509851792,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Shape 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[1.16,0.048],[0.527,-1.103],[9.666,-14.837],[7.295,2.583],[-0.076,0.332],[-1.586,-0.341],[-1.552,-0.129],[-1.597,3.843],[0.09,3.281],[-0.081,-4.189],[-1.216,0.461],[-0.511,-3.791],[0,0],[0,0],[0.748,0.011],[0,0]],"o":[[0,0],[0,0],[-1.227,-0.051],[-8.154,15.707],[-4.515,6.637],[-0.364,-0.12],[0.26,-1.259],[1.533,0.3],[4.62,0.372],[-2.946,-0.153],[-0.087,-4.477],[0.025,1.305],[2.536,-0.951],[0.241,1.546],[0,0],[0.248,-0.702],[0,0],[0,0]],"v":[[21.345,-35.308],[25.5,-20.671],[21.922,-20.682],[19.399,-19.106],[-4.506,28.41],[-25.129,34.156],[-25.47,33.513],[-21.911,27.866],[-17.289,28.632],[-7.766,20.856],[-13.111,16.583],[-15.397,-11.446],[-14.458,-12.932],[-6.424,-11.158],[-4.887,14.239],[10.778,-19.36],[9.891,-20.665],[4.598,-20.785]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.302335252949,0,0.314509851792,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[25.5,35.308],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":4,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150.000006109625,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"logofill","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[683,384,0],"ix":2},"a":{"a":0,"k":[683,384,0],"ix":1},"s":{"a":0,"k":[467.708,467.708,100],"ix":6}},"ao":0,"w":1366,"h":768,"ip":0,"op":150.000006109625,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[629,393,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[465,465],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.949803969439,0.011174163631,0.011174163631,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.941176470588,0.941176470588,0.941176470588,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[42.5,-10.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":150.000006109625,"st":0,"bm":0}],"markers":[]}')},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(32)),s=a(n(14)),l=function(){function e(t){(0,r.default)(this,e),this._loggerServer=t}return(0,i.default)(e,[{key:"send",value:function(e,t){var n=this;this._loggerServer||this.sendFailed(e,t,"missing logger server");try{var a,r,i,l=encodeURI(JSON.stringify(e)).split(/%..|./).length-1,u=null===(a=s.default.getAppdata().appConf)||void 0===a||null===(r=a.network)||void 0===r||null===(i=r.limits)||void 0===i?void 0:i.bodySize;(.9*l<u||void 0===u)&&o.default.post(this._loggerServer,{},e).then((function(){})).catch((function(a){n.sendFailed(e,t,a)}))}catch(c){console.log("couldn't send log, getting content size failed")}}},{key:"sendFailed",value:function(e,t,n){t>0?(console.log("sending msg was failed ".concat(n," - will try resending it")),t--,this.send(e,t)):console.log("sending msg was failed ".concat(n," - limit was exceed"))}}]),e}();t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(75)),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"registerLogger",value:function(e,t,n,a,r){4===arguments.length&&(r=a,a=n,n=t,t=e),this._logger||(this._logger=new o.default(t,n,a,r))}},{key:"getLogger",value:function(){return this._logger}},{key:"removeLogger",value:function(){this._logger=void 0}},{key:"log",value:function(e,t){1===arguments.length&&(t=e),this._logger?this._logger.log(t):console.log(t)}},{key:"debug",value:function(e,t){1===arguments.length&&(t=e),this._logger?this._logger.debug(t):console.log(t)}},{key:"info",value:function(e,t){1===arguments.length&&(t=e),this._logger?this._logger.info(t):console.info(t)}},{key:"warn",value:function(e,t){1===arguments.length&&(t=e),this._logger?this._logger.warn(t):console.warn(t)}},{key:"error",value:function(e,t){1===arguments.length&&(t=e),this._logger?this._logger.error(t):console.error(t)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EMBEDDED=t.BLOCKONEBYONE=t.ONEBYONE=t.SEQ=void 0;t.SEQ="sequence";t.ONEBYONE="one-by-one";t.BLOCKONEBYONE="block-one-by-one";t.EMBEDDED="embedded"},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l,u,c,d=a(n(40)),f=a(n(29)),p=a(n(9)),h=a(n(3)),m=a(n(4)),v=a(n(30)),g=(a(n(31)),n(20)),E=a(n(13)),_=a(n(113)),y=a(n(387)),k=r(n(54)),S=n(55),T=n(102),b=a(n(389)),C=a(n(684)),I=r(n(390)),O=a(n(685)),A=a(n(391)),N=a(n(392)),w=a(n(686)),R=a(n(393)),P=a(n(394)),M=a(n(264)),L=a(n(284)),D=a(n(395)),x=a(n(687)),F=a(n(396));function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=(i=function(){function e(t,n){var a=t.accountId,r=t.id,i=void 0===r?(0,_.default)():r,d=t.created,p=void 0===d?new Date:d,m=t.modified,v=void 0===m?new Date:m,g=t.version,E=t.serverVersion;(0,h.default)(this,e),this.accountId=void 0,this.id=void 0,this.created=void 0,this.modified=void 0,this.version=void 0,this.serverVersion=void 0,(0,f.default)(this,"data",o,this),(0,f.default)(this,"question",s,this),(0,f.default)(this,"interaction",l,this),(0,f.default)(this,"subtasks",u,this),(0,f.default)(this,"parentTaskId",c,this),this.taskApiForInteractions=void 0,this.modelStoreApi=void 0,this.iterator=0,this.accountId=a,this.id=i,this.created=p,this.modified=v,this.version=g,this.serverVersion=E,this.interaction={entry:"",interactions:{}},this.question={entry:"",interactions:{}},this.subtasks=[],this.parentTaskId=void 0,this.setQuestion=this.setQuestion.bind(this),this.setTaskData=this.setTaskData.bind(this),this.createInteractionDataByType=this.createInteractionDataByType.bind(this),this.removeInteractionFromQuestion=this.removeInteractionFromQuestion.bind(this),this.addInteraction=this.addInteraction.bind(this),this.addInteractionToQuestion=this.addInteractionToQuestion.bind(this),this.addInteractionsWithModel=this.addInteractionsWithModel.bind(this),this.removeInteraction=this.removeInteraction.bind(this),this.removeInteractions=this.removeInteractions.bind(this),this.getInteraction=this.getInteraction.bind(this),this.setInteractionFromTaskData=this.setInteractionFromTaskData.bind(this),this.getTaskData=this.getTaskData.bind(this),this.getEntryInteractionModel=this.getEntryInteractionModel.bind(this),this.getCheckingType=this.getCheckingType.bind(this),this.getTaskTypeAndPreset=this.getTaskTypeAndPreset.bind(this),this.taskApiForInteractions={createInteractionDataByType:this.createInteractionDataByType,addInteraction:this.addInteraction,addInteractionToQuestion:this.addInteractionToQuestion,addInteractionsWithModel:this.addInteractionsWithModel,removeInteractionFromQuestion:this.removeInteractionFromQuestion,getInteraction:this.getInteraction,removeInteraction:this.removeInteraction,removeInteractions:this.removeInteractions,onInteractionChange:this.onTaskChange.bind(this),onInteractionCheckableChange:this.onInteractionCheckableChange.bind(this),setMaxPoints:this.setMaxPoints.bind(this),addSubtask:this.addSubtask.bind(this),removeSubtask:this.removeSubtask.bind(this),changeSubtasksOrder:this.changeSubtasksOrder.bind(this)},this.modelStoreApi=n}return(0,m.default)(e,null,[{key:"getDefaultTaskData",value:function(t,n,a,r,i,o){var s,l=a.entry,u=null===(s=a.interactions[l])||void 0===s?void 0:s.data,c=e.getTaskInteractionStoreByType(t),d={checkingType:(null==u?void 0:u.checkingType)||T.NONE_CHECKABLE,taskType:k[t],subType:n};i&&(d.isSuggested=i);var f=(null==u?void 0:u.checkingType)===T.MANUAL;return d.maxPoints=f?100:0,d.exposure=(null==c?void 0:c.category)===S.MEDIA,o||(d.backgroundColor="rgba(255,255,255,1)",(null==u?void 0:u.checkingType)!==T.AUTOMATIC&&"MC"!==t||(d.maxAttempts=(0,b.default)(a),d.feedback={}),r.isMustCompleteQuestionsWithTimeSettings()&&(d.taskMustCompleteQuestionTime=r.getTaskMustCompleteQuestionDefaultTime())),d}},{key:"getTaskInteractionStoreByType",value:function(e){switch(e){case"TEXT":return C.default;case"MC":return I.default;case"IMAGE":return O.default;case"AUDIO":return A.default;case"VIDEO":return N.default;case"EMBED_WEBSITE":return w.default;case"RICHMEDIA":return R.default;case"CHOICE_MATRIX":return P.default;case"FREE_WRITING":return M.default;case"POLL":return L.default;case"FILL_IN_GAPS":return D.default;case"MATCHING":return x.default;case"RATING":return F.default;default:return null}}},{key:"createTask",value:function(t,n,a,r,i,o){var s=new e({accountId:r,version:1,serverVersion:1},i),l=!(!o||!o.suggestedData);if(null==o?void 0:o.parentTaskId)s.parentTaskId=o.parentTaskId,s.interaction.entry=o.parentInteractionId;else{var u=s.createInteractionDataByType(t,n,a,o);if(u?s.interaction.entry=s.addInteraction(u):s.interaction=(0,y.default)(t,n,a),l)s.setQuestion({translations:a,html:o.suggestedData.question});else if(null==o?void 0:o.imported){var c;s.setQuestion({translations:a,html:null==o||null===(c=o.data)||void 0===c?void 0:c.question})}else s.setQuestion({translations:a})}if(s.data=e.getDefaultTaskData(t,n,s.interaction,i,l,!!(null==o?void 0:o.parentTaskId)),null==o?void 0:o.imported){var d=null==o?void 0:o.data;if(null==d?void 0:d.attempts){var f=d.attempts,p="unlimited"===f?999999:f;s.setMaxAttempts(parseInt(p,10))}(null==d?void 0:d.feedbackCorrectAnswer)&&s.setTaskFeedback("correct",d.feedbackCorrectAnswer),(null==d?void 0:d.feedbackPartiallyCorrectAnswer)&&s.setTaskFeedback("partial",d.feedbackPartiallyCorrectAnswer),(null==d?void 0:d.feedbackIncorrectAnswer)&&s.setTaskFeedback("wrong",d.feedbackIncorrectAnswer)}return s}},{key:"createTaskFromTaskData",value:function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=new e(t,n);return a=r?G(G({},t.data),{},{maxPoints:0}):t.data,o.setTaskData(a,i),o.setInteractionFromTaskData("interaction",t.interaction,i),o.setInteractionFromTaskData("question",t.question,i),o.setSubtasks(t.subtasks),o.setParentTaskId(t.parentTaskId),o}}]),(0,m.default)(e,[{key:"setTaskData",value:function(e){var t=e.backgroundColor,n=e.checkingType,a=e.exposure,r=e.feedback,i=e.maxAttempts,o=e.taskType,s=e.subType,l=e.maxPoints,u=void 0===l?0:l,c=e.taskMustCompleteQuestionTime,d=e.isSuggested,f=void 0!==d&&d,p=e.opacity,h=e.hasTags;this.data={backgroundColor:t,checkingType:n,exposure:a,feedback:r,maxAttempts:i,taskType:o,subType:s,maxPoints:u,isSuggested:f,taskMustCompleteQuestionTime:c,opacity:p,hasTags:h}}},{key:"setSubtasks",value:function(e){(null==e?void 0:e.length)&&(this.subtasks=(0,d.default)(e))}},{key:"setParentTaskId",value:function(e){e&&(this.parentTaskId=e)}},{key:"setTaskTheme",value:function(e){var t=e.backgroundColor,n=void 0===t?this.data.backgroundColor:t;this.data.backgroundColor=n,this.onTaskChange()}},{key:"setTaskOpacity",value:function(e){this.data.opacity=e,this.onTaskChange()}},{key:"setTaskFeedback",value:function(e,t){this.data.feedback&&(this.data.feedback[e]=t),this.onTaskChange()}},{key:"createInteractionDataByType",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e.getTaskInteractionStoreByType(t);if(i){var o=new i(n,this.taskApiForInteractions,a,r);if(null==r?void 0:r.imported){var s;if("FREE_WRITING"===t){var l=r.data,u=null==l?void 0:l.plagiarismScanType,c="text"===u?"0":"file"===u?"1":void 0,d=void 0===c?["text","file"]:[],f="true"===(null==l?void 0:l.checkable),p=f?"CHECKABLE":"default",h=f?"MANUAL":"NONE",m=f&&(null==l?void 0:l.feedbackCorrectAnswer)?E.default.encodeJWT(l.feedbackCorrectAnswer):"";o.setModel({plagiarismScanType:c,subType:p,checkingType:h,guidelines:m,inputTypes:d})}if("MC"===t||"TEXT"===t&&"mc"===(null==r||null===(s=r.data)||void 0===s?void 0:s.type)){var v=null==r?void 0:r.data,g=null==v?void 0:v.correctAnswers.split(","),_=Object.keys(v).filter((function(e){return e.startsWith("answerOption_")}));if("MC"!==t||"TEXT"!==n&&"TEXT_BOOLEAN"!==n)"TEXT"===t&&"mc"===(null==v?void 0:v.type)&&this.iterator<_.length&&(o.setModel({html:v[_[this.iterator]]}),this.iterator++);else{var y="false"!==(null==v?void 0:v.checkable),k=y?"AUTOMATIC":"NONE",S="true"===(null==v?void 0:v.randomize);if(_.length>2)for(var T=2;T<_.length;T++)o.addInteraction();var b=I.McInteractionMode.SINGLE;g.length>1&&(b=I.McInteractionMode.MULTIPLE),o.setModel({checkingType:k,checkable:y,mode:b,showRandomAnswers:S}),o.resetCorrectAnswersIds(),g.forEach((function(e){var t=o.data.options;o.setCorrectAnswer(t[e-1])}))}}}return o}return null}},{key:"addInteraction",value:function(e){if(e){var t=(0,_.default)();return this.interaction.interactions[t]=e,t}}},{key:"addInteractionToQuestion",value:function(e){if(e){var t=this.question,n=(0,_.default)();return t.interactions[n]=e,n}}},{key:"setMaxAttempts",value:function(e){this.data.maxAttempts=e,this.onTaskChange()}},{key:"setMaxPoints",value:function(e){this.data.maxPoints=e,this.onTaskChange()}},{key:"setIsSuggested",value:function(e){this.data.isSuggested=e,this.onTaskChange()}},{key:"addInteractionsWithModel",value:function(e){var t=this.interaction;for(var n in e)e.hasOwnProperty(n)&&(t.interactions[n]=e[n])}},{key:"getInteraction",value:function(e){return this.interaction.interactions[e]}},{key:"removeInteraction",value:function(e){delete this.interaction.interactions[e]}},{key:"removeInteractionFromQuestion",value:function(e){delete this.question.interactions[e]}},{key:"removeInteractions",value:function(e){var t=this,n={},a=this.interaction.interactions;return e.forEach((function(e){n[e]=a[e],t.removeInteraction(e)})),n}},{key:"setQuestion",value:function(e){var t=e.questionInteractionType,n=void 0===t?"RICHMEDIA":t,a=e.translations,r=e.html,i=this.createInteractionDataByType(n,"default",a,{html:r,setToQuestion:!0});if(i){var o=(0,_.default)();this.question.interactions[o]=i,this.question.entry=o}this.onTaskChange()}},{key:"setInteractionFromTaskData",value:function(e,t,n){if(t)for(var a in this[e].entry=t.entry,t.interactions)if(t.interactions.hasOwnProperty(a)){var r=t.interactions[a],i=r.preset||r.data.subType||"default",o=this.createInteractionDataByType(r.type,i,void 0,G({onInteractionCreationFromServer:!0,setToQuestion:"question"===e},n));o?(this[e].interactions[a]=o,this[e].interactions[a].setModel(JSON.parse(JSON.stringify(r.data)))):this[e].interactions[a]=t.interactions[a]}}},{key:"onTaskChange",value:function(){this.modelStoreApi.onTaskChange(this.id)}},{key:"onInteractionCheckableChange",value:function(e,t){e&&(this.data.checkingType=e),t&&(this.data.subType=t),this.onTaskChange()}},{key:"getTaskData",value:function(){var t=this.id,n=this.version,a={data:this.getTaskModel(),id:t,version:n};if(this.subtasks.length){var r=this.subtasks.map((function(e){return e}));a.subtasks=r}return a.interaction=e.getInteractionModels(this.interaction),this.parentTaskId?a.parentTaskId=this.parentTaskId:a.question=e.getInteractionModels(this.question),a}},{key:"getTaskModel",value:function(){return JSON.parse(JSON.stringify(this.data))}},{key:"getIsSuggested",value:function(){return this.data.isSuggested}},{key:"getEntryInteractionModel",value:function(){var e=this.interaction.entry;return{model:this.interaction.interactions[e],id:e}}},{key:"getCheckingType",value:function(){return this.data.checkingType}},{key:"getSubType",value:function(){return this.data.subType}},{key:"isTaskCheckable",value:function(){return this.getCheckingType()!==T.NONE_CHECKABLE}},{key:"isTaskInstructorAnswer",value:function(){return this.getSubType()===k.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER}},{key:"isTaskAutomaticallyCheckable",value:function(){return this.getCheckingType()===T.AUTOMATIC}},{key:"getEntryInteraction",value:function(){var e=this.interaction.entry;return this.interaction.interactions[e]}},{key:"getTaskInteractionType",value:function(){return this.getEntryInteraction().type}},{key:"getTaskInteractionActionType",value:function(){return this.getEntryInteraction().getInteractionActionType&&this.getEntryInteraction().getInteractionActionType()}},{key:"getTaskTypeAndPreset",value:function(){var e=this.getEntryInteractionModel().model;return{type:e.type,preset:e.preset}}},{key:"getTaskQuestionText",value:function(){var e,t=this,n="",a=0;return this.getInteractionQuestionEntry().data.children.forEach((function(r){if("TEXT"===(e=t.question.interactions[r]).type){var i=e.data.html;if(i){i=i.replace(/<\/p><p>/g," ").replace(/<br>/g," ");var o=document.createElement("div");o.innerHTML=i;var s=o.textContent;s&&(n+="".concat(a>0?"<br>":""," ").concat(s))}a++}})),n.trim()}},{key:"getInteractionQuestionEntry",value:function(){var e=this.question.entry;return this.question.interactions[e]}},{key:"getTaskIndex",value:function(){return this.modelStoreApi.getTaskIndex(this.id)}},{key:"setTaskMustCompleteQuestionInTime",value:function(e){this.data.taskMustCompleteQuestionTime=e,this.onTaskChange()}},{key:"removeTaskMustCompleteQuestionInTime",value:function(){delete this.data.taskMustCompleteQuestionTime,this.onTaskChange()}},{key:"addSubtask",value:function(e,t,n){var a=this.modelStoreApi.addNewTask(e,t,n,{parentTaskId:this.id,parentInteractionId:this.interaction.entry});return this.subtasks.push(a),a}},{key:"removeSubtask",value:function(e){var t=this.subtasks[e];this.subtasks=this.subtasks.filter((function(e){return e!==t})),this.modelStoreApi.removeTask(t)}},{key:"changeSubtasksOrder",value:function(e,t){this.subtasks.splice(t,0,this.subtasks.splice(e,1)[0]);var n=this.modelStoreApi.getTaskIndex(this.id);this.modelStoreApi.changeTasksOrder(n+e,n+t)}},{key:"maxPoints",get:function(){return this.data.maxPoints}},{key:"opacity",get:function(){return this.data.opacity}}],[{key:"getInteractionModels",value:function(e){var t=e.entry,n=e.interactions,a={entry:t,interactions:{}};return Object.keys(n).forEach((function(e){var t=n[e],r=t.data,i=t.type;a.interactions[e]={data:r,type:i}})),a}}]),e}(),o=(0,v.default)(i.prototype,"data",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,v.default)(i.prototype,"question",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,v.default)(i.prototype,"interaction",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,v.default)(i.prototype,"subtasks",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=(0,v.default)(i.prototype,"parentTaskId",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,v.default)(i.prototype,"setTaskData",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskData"),i.prototype),(0,v.default)(i.prototype,"setSubtasks",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setSubtasks"),i.prototype),(0,v.default)(i.prototype,"setParentTaskId",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setParentTaskId"),i.prototype),(0,v.default)(i.prototype,"setTaskTheme",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskTheme"),i.prototype),(0,v.default)(i.prototype,"setTaskOpacity",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskOpacity"),i.prototype),(0,v.default)(i.prototype,"setTaskFeedback",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskFeedback"),i.prototype),(0,v.default)(i.prototype,"addInteraction",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"addInteraction"),i.prototype),(0,v.default)(i.prototype,"addInteractionToQuestion",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"addInteractionToQuestion"),i.prototype),(0,v.default)(i.prototype,"setMaxAttempts",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setMaxAttempts"),i.prototype),(0,v.default)(i.prototype,"setMaxPoints",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setMaxPoints"),i.prototype),(0,v.default)(i.prototype,"setIsSuggested",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setIsSuggested"),i.prototype),(0,v.default)(i.prototype,"removeInteraction",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"removeInteraction"),i.prototype),(0,v.default)(i.prototype,"removeInteractionFromQuestion",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"removeInteractionFromQuestion"),i.prototype),(0,v.default)(i.prototype,"setQuestion",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setQuestion"),i.prototype),(0,v.default)(i.prototype,"setInteractionFromTaskData",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setInteractionFromTaskData"),i.prototype),(0,v.default)(i.prototype,"getTaskQuestionText",[g.observable],Object.getOwnPropertyDescriptor(i.prototype,"getTaskQuestionText"),i.prototype),(0,v.default)(i.prototype,"setTaskMustCompleteQuestionInTime",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskMustCompleteQuestionInTime"),i.prototype),(0,v.default)(i.prototype,"removeTaskMustCompleteQuestionInTime",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"removeTaskMustCompleteQuestionInTime"),i.prototype),(0,v.default)(i.prototype,"addSubtask",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"addSubtask"),i.prototype),(0,v.default)(i.prototype,"removeSubtask",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"removeSubtask"),i.prototype),(0,v.default)(i.prototype,"changeSubtasksOrder",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"changeSubtasksOrder"),i.prototype),i);t.default=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s=a(n(9)),l=a(n(40)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=a(n(113)),m=a(n(13)),v=a(n(681)),g=a(n(193)),E=n(55),_=n(385);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var k=(r=function(){function e(){var t=this;(0,c.default)(this,e),(0,u.default)(this,"taskGroup",i,this),(0,u.default)(this,"tasks",o,this),this.taskApi={},this.saveModelQueue=void 0,this.itemInitInProcess=void 0,this.onDeleteTask=void 0,this.onDuplicateTask=void 0,this.onTaskRemovedFromSuggested=void 0,this.debouncedSaveModel=m.default.debounce((function(){t.onInteractionsEdit?t.sendSaveObjectToParent():t.saveModelQueue.saveModel()}),0),this.changeTasksOrder=this.changeTasksOrder.bind(this),this.duplicateTask=this.duplicateTask.bind(this),this.addNewTask=this.addNewTask.bind(this),this.removeTask=this.removeTask.bind(this),this.taskApi={onTaskChange:this.onTaskChange.bind(this),getTaskIndex:this.getTaskIndex.bind(this),getTaskMustCompleteQuestionDefaultTime:this.getTaskMustCompleteQuestionDefaultTime.bind(this),isMustCompleteQuestionsWithTimeSettings:this.isMustCompleteQuestionsWithTimeSettings.bind(this),addNewTask:this.addNewTask,removeTask:this.removeTask,changeTasksOrder:this.changeTasksOrder}}return(0,d.default)(e,[{key:"initialize",value:function(e,t,n,a,r,i,o,s){this.itemInitInProcess=!0,this.resetData(),this.additionalData={reducedEditor:s},this.setModelDataInStore(e),this.saveModelQueue=t,this.itemInitInProcess=!1,this.onDeleteTask=n,this.onDuplicateTask=a,this.onTaskRemovedFromSuggested=r,this.onInteractionsEdit=i,this.removeSuggestedTaskOnKeep=o}},{key:"updateModel",value:function(e){this.itemInitInProcess=!0,this.setModelDataInStore(e),this.itemInitInProcess=!1}},{key:"resetData",value:function(){this.saveModelQueue={},this.tasks={}}},{key:"setModelDataInStore",value:function(e){var t=this;this.taskGroup.setTaskGroupModelData(e.taskGroup);var n=e.taskGroup.structure.taskOrder,a=this.additionalData;n.forEach((function(n){var r=e.tasks[n];if(r){var i=g.default.createTaskFromTaskData(r,t.taskApi,!1,a);t.addTask(i)}}))}},{key:"addNewTask",value:function(e,t,n,a){var r;return this.itemInitInProcess=!0,r=a&&a.taskData?g.default.createTaskFromTaskData(a.taskData,this.taskApi):g.default.createTask(e,t,n,this.taskGroup.accountId,this.taskApi,a),this.addTask(r,r.parentTaskId),this.itemInitInProcess=!1,this.onAddTask(r.id),r.id}},{key:"addTask",value:function(e,t){e&&(this.tasks[e.id]=e,this.taskGroup.addTask(e),t&&this.placeNewTaskInSubtasksSequence(e))}},{key:"placeNewTaskInSubtasksSequence",value:function(e){var t=this,n=this.tasks[e.parentTaskId].subtasks,a=n.length?n[n.length-1]:void 0,r=a?this.taskGroup.structure.taskOrder.indexOf(a):void 0,i=this.taskGroup.structure.taskOrder.length-1,o=(r||t.taskGroup.structure.taskOrder.indexOf(e.parentTaskId))+1;i!==o&&this.taskGroup.structure.changeOrder(i,o)}},{key:"addTaskToIndex",value:function(e,t){e&&(this.tasks[e.id]=e,this.taskGroup.addTaskToIndex(e,t))}},{key:"removeTask",value:function(e){var t,n=this;if(e&&void 0!==this.tasks[e]){var a=[e];(null===(t=this.tasks[e].subtasks)||void 0===t?void 0:t.length)&&(a=a.concat((0,l.default)(this.tasks[e].subtasks))),a.forEach((function(e){n.taskGroup.removeTask(e),n.onDeleteTask&&n.onDeleteTask(e),delete n.tasks[e]})),this.onTaskGroupStructureChange(a)}}},{key:"duplicateTask",value:function(e,t){var n=this;if(e&&void 0!==this.tasks[e]){this.itemInitInProcess=!0;var a=g.default.createTaskFromTaskData(this.tasks[e],this.taskApi,!0),r=this.taskGroup.getTaskIndex(e)+1,i=t||function(){};return a.id=(0,h.default)(),this.itemInitInProcess=!1,Promise.resolve(i(a)).then((function(){return n.addTaskToIndex(a,r),n.onAddTask(a.id),n.onDuplicateTask(e,a.id),Promise.resolve(a.id)})).catch((function(e){return Promise.reject(e)}))}}},{key:"changeTasksOrder",value:function(e,t){this.taskGroup.structure.changeOrder(e,t),this.onTaskGroupStructureChange()}},{key:"setTaskGroupVersion",value:function(e){var t=e.version;this.taskGroup.setVersion(t),this.saveModelQueue.updateTaskGroupVersion(e)}},{key:"lockSaveWhenPublish",value:function(){this.saveModelQueue.lockSaveWhenPublish()}},{key:"unlockSaveAfterPublish",value:function(){this.saveModelQueue.unlockSaveAfterPublish()}},{key:"setTaskGroupProperty",value:function(e,t){this.taskGroup.properties.setTaskGroupProperty(e,t),this.onTaskGroupPropertyChange()}},{key:"setTaskTheme",value:function(e,t){e&&void 0!==this.tasks[e]&&this.tasks[e].setTaskTheme(t)}},{key:"onTaskChange",value:function(e){if(!this.itemInitInProcess){var t=this.getTaskData(e),n={tasks:(0,s.default)({},e,t)};this.updateServer(n)}}},{key:"getTaskData",value:function(e){return this.tasks[e].getTaskData()}},{key:"onAddTask",value:function(e){var t={taskGroup:{structure:this.taskGroup.structure},tasks:(0,s.default)({},e,this.tasks[e])};this.updateServer(t)}},{key:"onTaskGroupStructureChange",value:function(){var e={taskGroup:{structure:this.taskGroup.structure}};this.updateServer(e)}},{key:"onTaskGroupPropertyChange",value:function(){var e={taskGroup:{properties:this.taskGroup.properties}};this.updateServer(e)}},{key:"updateServer",value:function(e){this.itemInitInProcess||(this.onInteractionsEdit||this.saveModelQueue.updateModelToSave(e),this.debouncedSaveModel())}},{key:"getCheckableTaskCount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=0,a=this.taskGroup.structure.taskOrder;return a.forEach((function(a){!e.tasks[a].isTaskCheckable()||e.tasks[a].isTaskInstructorAnswer()&&!t||n++})),n}},{key:"getCheckableTasks",value:function(){var e=this;return this.taskGroup.structure.taskOrder.filter((function(t){return e.tasks[t].isTaskCheckable()}))}},{key:"getTaskGroupModel",value:function(){var e=this,t={taskGroup:JSON.parse(JSON.stringify(this.taskGroup)),tasks:{}};return this.taskGroup.structure.taskOrder.forEach((function(n){t.tasks[n]=e.getTaskData(n)})),t}},{key:"sendSaveObjectToParent",value:function(){var e=this.getTaskGroupModel();this.onInteractionsEdit(e)}},{key:"setOrder",value:function(e){this.taskGroup.structure.setOrder(e);var t={taskGroup:{structure:this.taskGroup.structure}};this.updateServer(t)}},{key:"getTaskIndex",value:function(e){return this.taskGroup.structure.getTaskIndex(e)+1}},{key:"setTaskMustCompleteQuestionInTime",value:function(e){var t=this;this.isMustCompleteQuestionsWithTimeSettings()&&(this.taskGroup.properties.setTaskGroupProperty("taskMustCompleteQuestionDefaultTime",e),this.taskGroup.structure.taskOrder.forEach((function(n){t.tasks[n].setTaskMustCompleteQuestionInTime(e)})),this.onTaskGroupPropertyChange())}},{key:"setIsMustCompleteQuestions",value:function(e){this.taskGroup.properties.setTaskGroupProperty("isMustCompleteQuestions",e),!1===e&&(this.taskGroup.properties.setTaskGroupProperty("isQuestionsTimePerTask",null),this.resetTimingSettings()),this.onTaskGroupPropertyChange()}},{key:"setIsQuestionsTimePerTask",value:function(e){this.taskGroup.properties.setTaskGroupProperty("isQuestionsTimePerTask",e),!1===e&&this.resetTimingSettings(),this.onTaskGroupPropertyChange()}},{key:"resetTimingSettings",value:function(){var e=this;this.taskGroup.properties.setTaskGroupProperty("taskMustCompleteQuestionDefaultTime",null),this.taskGroup.structure.taskOrder.forEach((function(t){e.tasks[t].removeTaskMustCompleteQuestionInTime()}))}},{key:"getTaskMustCompleteQuestionDefaultTime",value:function(){return this.taskGroup.properties.taskMustCompleteQuestionDefaultTime}},{key:"isMustCompleteQuestionsWithTimeSettings",value:function(){return this.taskGroup.properties.isMustCompleteQuestions&&this.taskGroup.properties.isQuestionsTimePerTask}}],[{key:"getTaskGroupPreset",value:function(t){var n=t.taskType,a=t.taskSubType,r=t.singleTaskMode,i=void 0!==r&&r,o=t.contentLanguage,l=void 0===o?"en_US":o,u=t.title,c=void 0===u?"":u,d=t.backgroundColor,f=void 0===d?"transparent":d,p=t.coverImageUrl,m=t.defaultSettings,v=t.language,k=t.createTaskGroupId,S=t.reducedEditor,T=t.additionalData,b=new e;b.itemInitInProcess=!0;var C,I=e.getInteractionCategoryByType(n)===E.MEDIA,O=i&&I;if(void 0!==n){var A=v&&v.interaction&&v.interaction[n]||{};C=g.default.createTask(n,a,A,b.taskGroup.accountId,b.taskApi,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({reducedEditor:S},T)),m&&m.theme&&C.setTaskTheme(m.theme)}b.itemInitInProcess=!1;var N={taskGroup:{properties:{title:c,type:_.QUIZ,isSingleMedia:O,displayNumbering:!O,displayQuestion:!O,backgroundColor:f,coverImageUrl:p,contentLanguage:l,isCustomPoints:!1,isMustCompleteQuestions:!1,maxPoints:100,isRandomized:!1},structure:{taskOrder:C?[C.id]:[],taskVersions:C?(0,s.default)({},C.id,{id:C.id,version:1}):{}},version:1},tasks:C?(0,s.default)({},C.id,C):{}};return k&&(N.taskGroup.id=(0,h.default)()),N}},{key:"getInteractionCategoryByType",value:function(e){var t=g.default.getTaskInteractionStoreByType(e);return t&&t.category}},{key:"getInteractionAnswersType",value:function(t){var n=g.default.getTaskInteractionStoreByType(t);return e.getAnswerTypeFromInteractionModel(n)}},{key:"getAnswerTypeFromInteractionModel",value:function(e){if(e.getAnswersTypes)return e.getAnswersTypes()}}]),e}(),i=(0,f.default)(r.prototype,"taskGroup",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v.default}}),o=(0,f.default)(r.prototype,"tasks",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,f.default)(r.prototype,"resetData",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"resetData"),r.prototype),(0,f.default)(r.prototype,"addNewTask",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"addNewTask"),r.prototype),(0,f.default)(r.prototype,"addTask",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"addTask"),r.prototype),(0,f.default)(r.prototype,"addTaskToIndex",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"addTaskToIndex"),r.prototype),(0,f.default)(r.prototype,"removeTask",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"removeTask"),r.prototype),(0,f.default)(r.prototype,"duplicateTask",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"duplicateTask"),r.prototype),(0,f.default)(r.prototype,"changeTasksOrder",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"changeTasksOrder"),r.prototype),(0,f.default)(r.prototype,"setTaskGroupProperty",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTaskGroupProperty"),r.prototype),(0,f.default)(r.prototype,"setTaskTheme",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTaskTheme"),r.prototype),(0,f.default)(r.prototype,"setOrder",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setOrder"),r.prototype),(0,f.default)(r.prototype,"setTaskMustCompleteQuestionInTime",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTaskMustCompleteQuestionInTime"),r.prototype),(0,f.default)(r.prototype,"setIsMustCompleteQuestions",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsMustCompleteQuestions"),r.prototype),(0,f.default)(r.prototype,"setIsQuestionsTimePerTask",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setIsQuestionsTimePerTask"),r.prototype),(0,f.default)(r.prototype,"resetTimingSettings",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"resetTimingSettings"),r.prototype),r);t.default=k},function(e,t,n){},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NO_RICH_MEDIA=t.WITH_RICH_MEDIA=void 0;var i,o,s,l=a(n(23)),u=a(n(68)),c=a(n(3)),d=a(n(4)),f=a(n(12)),p=a(n(6)),h=a(n(8)),m=a(n(7)),v=r(n(0)),g=(a(n(2)),n(46)),E=a(n(176)),_=a(n(37)),y=a(n(13)),k=r(n(333)),S=(r(n(451)),a(n(399)));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var b=_.default.isMobile;t.WITH_RICH_MEDIA=0;t.NO_RICH_MEDIA=1;var C=(0,g.inject)("services")((s=o=function(e){(0,p.default)(n,e);var t=T(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMobileInputFocus=e.handleMobileInputFocus.bind((0,f.default)(e)),e}return(0,d.default)(n,[{key:"render",value:function(){var e=this,t=this.props,a=t.showBottomBoldInFocus,r=t.className,i=(0,u.default)(t,["showBottomBoldInFocus","className"]),o=this.props.services.ConfigurationService.reducedEditorCapabilitiesV2?k.TOOLS_V2:k.DEFAULT;return v.default.createElement("div",null,1===this.props.type&&v.default.createElement("input",(0,l.default)({ref:function(t){e._textInputRef=t}},i,{type:"text",className:"t2k-text-input".concat(a?" show-bottom-bold-in-focus":"").concat(r?" ".concat(r):""),onFocus:b?this.handleMobileInputFocus:i.onFocus})),0===this.props.type&&v.default.createElement(k.default,{className:r,ref:function(t){e._textEditorRef=t},placeholder:this.props.placeholder,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onHasContentChanged:this.props.onHasContentChanged,onChange:this.props.onChange,html:this.props.html,defaultHtml:this.props.defaultHtml,keydownEventFn:this.props.keydownEventFn,multiLine:this.props.multiLine,focusOnCreation:this.props.focusOnCreation,toolbar:this.props.toolbar||o,maxCharacters:this.props.maxCharacters,uploadFile:n._uploadFileFroala}))}},{key:"handleMobileInputFocus",value:function(e){(0,S.default)(e.target),this.props.onFocus&&this.props.onFocus(e)}},{key:"getInputValue",value:function(){return this._textInputRef.value}},{key:"resetInputValue",value:function(){this._textInputRef.value=""}},{key:"getHTML",value:function(){return this._textEditorRef.getHTML()}}],[{key:"_uploadFileAndReturnDownloadLink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=y.default.getAppdata().backend_url;return E.default.uploadFileAndReturnDownloadLink(e,a,void 0,t,n,"LibraryService/getUploadLink",!0)}},{key:"_uploadFileFroala",value:function(e,t,a){n._uploadFileAndReturnDownloadLink(e).then((function(e){a(void 0,y.default.getAssetPath(e))})).catch(a)}}]),n}(v.Component),o.defaultProps={type:1},i=s))||i;t.default=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO=t.TEXT=t.RICHMEDIA=t.POLL=t.MC=t.MATCHING=t.IMAGE=t.FREE_WRITING=t.FILL_IN_GAPS=t.EMBED_WEBSITE=t.RATING=t.CHOICE_MATRIX=t.AUDIO=void 0;t.AUDIO="AUDIO";t.CHOICE_MATRIX="CHOICE_MATRIX";t.RATING="RATING";t.EMBED_WEBSITE="EMBED_WEBSITE";t.FILL_IN_GAPS="FILL_IN_GAPS";t.FREE_WRITING="FREE_WRITING";t.IMAGE="IMAGE";t.MATCHING="MATCHING";t.MC="MC";t.POLL="POLL";t.RICHMEDIA="RICHMEDIA";t.TEXT="TEXT";t.VIDEO="VIDEO"},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.viewModeEnum=t.modeEnum=void 0;var r=a(n(3)),i=a(n(4));t.modeEnum={EDITOR:"EDITOR",PLAYER:"PLAYER"};t.viewModeEnum={QUIZ:0,ASSESSMENT:1,0:"QUIZ",1:"ASSESSMENT"};var o=function(){function e(){(0,r.default)(this,e),this._ltr=void 0,this._mode=void 0,this._isPreview=void 0,this._singleTaskMode=void 0,this._hidePoweredBy=void 0,this._hideToolbar=void 0,this._hideTaskGroupTitle=!1,this._taskStartingIndex=void 0,this._interfaceLanguage=void 0,this._viewMode=void 0,this._featureFlags=void 0,this._sizeLimitation=void 0,this._fillInWritingMultiAnswersDelimiter=void 0,this._questionMaxCharacters=void 0,this._reducedEditorCapabilitiesV2=void 0}return(0,i.default)(e,[{key:"sizeLimitation",get:function(){return this._sizeLimitation},set:function(e){this._sizeLimitation=e}},{key:"featureFlags",get:function(){return this._featureFlags},set:function(e){this._featureFlags=e}},{key:"ltr",get:function(){return this._ltr},set:function(e){this._ltr=e}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e}},{key:"isPreview",get:function(){return this._isPreview},set:function(e){this._isPreview=e}},{key:"singleTaskMode",get:function(){return this._singleTaskMode},set:function(e){this._singleTaskMode=e}},{key:"hidePoweredBy",get:function(){return this._hidePoweredBy},set:function(e){this._hidePoweredBy=e}},{key:"hideToolbar",get:function(){return this._hideToolbar},set:function(e){this._hideToolbar=e}},{key:"hideTaskGroupTitle",get:function(){return this._hideTaskGroupTitle},set:function(e){this._hideTaskGroupTitle=e}},{key:"taskStartingIndex",get:function(){return this._taskStartingIndex},set:function(e){this._taskStartingIndex=e}},{key:"interfaceLanguage",get:function(){return this._interfaceLanguage},set:function(e){this._interfaceLanguage=e}},{key:"viewMode",get:function(){return this._viewMode},set:function(e){this._viewMode=e}},{key:"fillInWritingMultiAnswersDelimiter",get:function(){return this._fillInWritingMultiAnswersDelimiter},set:function(e){this._fillInWritingMultiAnswersDelimiter=e}},{key:"questionMaxCharacters",get:function(){return this._questionMaxCharacters},set:function(e){this._questionMaxCharacters=e}},{key:"reducedEditorCapabilitiesV2",get:function(){return this._reducedEditorCapabilitiesV2},set:function(e){this._reducedEditorCapabilitiesV2=e}}]),e}();t.default=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a,u=e.renderPhoneInputField,c=e.renderEmailSection,d=e.handleTabIndexChange,f=e.emailFirst,p=void 0===f||f,h=e.phoneOnly,m=void 0!==h&&h,v=e.formState,g=e.phoneTabKey,E=e.emailTabKey,_=g?s.default.translate(g):s.default.translate("login.forgot-password.sms-tab"),y=E?s.default.translate(E):s.default.translate("login.forgot-password.email-tab"),k=r.default.createElement(i.Tab,{key:"1"},y),S=r.default.createElement(i.Tab,{key:"2"},_),T=r.default.createElement(i.TabPanel,{key:"1",className:"email-tab"},c("email")),b=r.default.createElement(i.TabPanel,{key:"2",className:"sms-tab"},u(!!(null==v||null===(t=v.invalidInputRefs)||void 0===t?void 0:t.phone)),!!(null==v||null===(n=v.invalidInputRefs)||void 0===n?void 0:n.phone)&&r.default.createElement("div",{className:"input-message-phone"},null==v||null===(a=v.invalidInputRefs)||void 0===a?void 0:a.phone),!m&&r.default.createElement("div",{className:"identifier"},c("identifier"))),C=p?[k,S]:[S,k],I=p?[T,b]:[b,T];return r.default.createElement(l.default,{isRtl:o.default.isRtl()},r.default.createElement(i.Tabs,{onSelect:function(e){d(e.toString())},className:"forgot-password-tabs",direction:o.default.isRtl()?"rtl":"ltr"},r.default.createElement(i.TabList,null,C),I))};var r=a(n(0)),i=n(591),o=a(n(14)),s=a(n(22)),l=a(n(306));n(584)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={LOGIN:0,FORGOT:1,SIGNUP_AFTER_EMAIL_INVITATION:2,SIGNUP_SELF_REGISTRATION:3,SIGNUP_SELF_REGISTRATION_CHECK_YOUR_EMAIL:4,SIGNUP_SELF_REGISTRATION_LOGIN:5,SIGNUP_SELF_REGISTRATION_FORGOT_PASSWORD:6,SIGNUP_SELF_REGISTRATION_EXPIRED_LINK:7,RESET:8,CHANGE_PASSWORD_AFTER_RESET:9,CHANGED_PASSWORD_NOTIFICATION:10,CHANGE_MY_PASSWORD:11,LOGIN_REDIRECT_URL:12,NO_ENABLEY_LOGIN:13,OTP:14};t.default=a},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(708));n(709);var i=r.default;t.default=i},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(68)),i=a(n(3)),o=a(n(4)),s=a(n(6)),l=a(n(8)),u=a(n(7)),c=a(n(9)),d=a(n(194)),f=n(0),p=a(n(2)),h=a(n(398));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}t.default=function(e){var t="t2kContextProvider-".concat((0,d.default)()),n=(0,c.default)({},t,p.default.shape(e)),a=function(e){(0,s.default)(a,e);var n=m(a);function a(){return(0,i.default)(this,a),n.apply(this,arguments)}return(0,o.default)(a,[{key:"getChildContext",value:function(){var e=this.props,n=(e.children,(0,r.default)(e,["children"]));return(0,c.default)({},t,n)}},{key:"render",value:function(){return this.props.children}}]),a}(f.Component);return a.childContextTypes=n,a.defaultProps={children:void 0},{Provider:a,Hoc:(0,h.default)(n,(function(e){return e[t]}))}}},,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=r(n(9)),f=r(n(105)),p=r(n(238)),h=r(n(236)),m=a(n(0)),v=(r(n(2)),r(n(11))),g=r(n(22)),E=r(n(14)),_=r(n(41)),y=r(n(243)),k=a(n(251)),S=r(n(119)),T=r(n(301)),b=r(n(302)),C=r(n(303)),I=r(n(304)),O=r(n(307)),A=r(n(308)),N=r(n(309)),w=r(n(310)),R=r(n(311)),P=r(n(201)),M=r(n(312)),L=r(n(313)),D=r(n(314)),x=r(n(318)),F=r(n(319)),U=r(n(320)),G=r(n(321));n(585);var B=r(n(322));function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}function W(e,t){var n;_.default.sendEvent(_.default.TITLES.SIGN_UP_PANE,_.default.COMPONENTS.SIGN_UP_PANE,(n={},(0,d.default)(n,_.default.PARAMS.USER_ACTION,e),(0,d.default)(n,_.default.PARAMS.GUEST,t),n))}var z=function(e){(0,l.default)(n,e);var t=V(n);function n(e){var a;if((0,i.default)(this,n),(a=t.call(this,e)).handlePhonEmailIndexChange=function(e){a.setState({phoneEmailTabIndex:e,phoneNumberValue:""})},a.handleForgotPasswordEmailSMS=function(e){"1"===e?a.setState({sentBySMS:!0}):a.setState({sentBySMS:!1})},a._toggleOTP=function(){a.state.currentFormState===P.default.OTP?a.setState({currentFormState:P.default.LOGIN}):a.setState({currentFormState:P.default.OTP})},a._getRememberMeClicked=a._getRememberMeClicked.bind((0,o.default)(a)),a._renderPasswordRequirements=a._renderPasswordRequirements.bind((0,o.default)(a)),a._renderPasswordField=a._renderPasswordField.bind((0,o.default)(a)),a._togglePassword=a._togglePassword.bind((0,o.default)(a)),a._renderInputField=a._renderInputField.bind((0,o.default)(a)),a._renderPhoneInputField=function(e){var t,n,r,i,o=(0,v.default)("phone-number",{mobile:E.default.isMobile(),desktop:!E.default.isMobile(),"error-message":e});return m.default.createElement(k.default,{defaultCountry:(null===(t=a.appConf.featureFlags)||void 0===t||null===(n=t.selfRegistration)||void 0===n||null===(r=n.sms)||void 0===r||null===(i=r.countryCode)||void 0===i?void 0:i.toUpperCase())||"IL",className:o,placeholder:g.default.translate("login.forgot-password.phone-placeholder"),value:a.state.phoneNumberValue,onChange:function(e){return a.setState({phoneNumberValue:e})}})},a._getInputMessageClasses=a._getInputMessageClasses.bind((0,o.default)(a)),a._onClickOnMainButton=a._onClickOnMainButton.bind((0,o.default)(a)),a._onKeyPress=a._onKeyPress.bind((0,o.default)(a)),a._onChange=a._onChange.bind((0,o.default)(a)),a._clearFields=function(){(0,h.default)(a._refs,(function(e){e.value=""}))},a._onClickGoToForgotPassword=a._onClickGoToForgotPassword.bind((0,o.default)(a)),a._onClickGoToLoginFromForgotPassword=function(){a._clearFields(),a.setState({invalidInputRefs:{},submitMessage:{},currentFormState:P.default.LOGIN})},a._onClickGoToLoginFromSelfRegistrationForgotPassword=function(){a._clearFields(),a.setState({invalidInputRefs:{},submitMessage:{},currentFormState:P.default.SIGNUP_SELF_REGISTRATION_LOGIN})},a._refs={},a.isMobile=E.default.isMobile(),a.appConf=E.default.getAppdata().appConf,a.passwordPolicy=a.appConf.passwordPolicy,a.props.includeSiteRedirect){var r=E.default._getAppDetails().site;S.default.setSite(r,a.props.includeSiteRedirect)}a.state={submitting:!1,rememberMe:a.isRememberMeEnabled(),signUpSubmitData:"",resendMessage:"",invalidInputRefs:{},submitMessage:{},showCaptcha:!1,disableLogin:!1,showPassword:{},currentFormState:a._getFormStateAccordingToProps(),forcePasswordChange:!1,loginSuccessToken:void 0,phoneNumberValue:"",sentBySMS:!1,phoneEmailTabIndex:"0"};var s=a.props.loginErrorCode||a.props.loginQueryParams&&a.props.loginQueryParams.error_code;return s&&(a.state.submitMessage.errorMessage=n.getSubmitErrorMessage(s)),a.isManageTeamInviteById=a.props.loginQueryParams.inviteById,a}return(0,s.default)(n,null,[{key:"getLoginAttemptsDataFromLocalStorage",value:function(e,t){var a=0,r=localStorage.getItem("loginAttempts");if(r){var i=(r=JSON.parse(r))[e]&&r[e][t];i&&(a=n.wasLastAttemptWithinTimeframe(i.ts)?i.attempts:0)}return{data:r,noAttempts:a}}},{key:"setNewAttemptsDataInLocalStorage",value:function(e,t,n,a){var r=e&&e[n]?e[n]:{},i=H(H({},e),{},(0,d.default)({},n,H(H({},r),{},(0,d.default)({},a,{attempts:t,ts:Date.now()}))));i=JSON.stringify(i),localStorage.setItem("loginAttempts",i)}},{key:"wasLastAttemptWithinTimeframe",value:function(e){return!e||Date.now()-e<6e5}},{key:"getSubmitErrorMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(parseInt(e,10)){case U.default.SOCIAL_EMAIL_NOT_FOUND:return g.default.translate("login.messages.social.email-is-mandatory");case U.default.SOCIAL_REQUIRE_SIGNIN:return g.default.translate("login.messages.social.require-sign-up");case U.default.SOCIAL_EMAIL_MISMATCH:return g.default.translate("login.messages.social.email-mismatch");case U.default.SS_CHANNEL_IS_NOT_AVAILABLE:return g.default.translate("login.messages.social.channel-is-not-available");case U.default.INVITATION_LINK_TOKEN_EXPIRED:return g.default.translate("login.messages.social.link-token-expired")}return""}}]),(0,s.default)(n,[{key:"isRememberMeEnabled",value:function(){return!!E.default.isFeatureEnabled("rememberMe")&&((E.default.isStandalone()||E.default.isCordova())&&this.appConf.forceRememberMeInNativeApp||this.appConf.rememberMeAsDefault)}},{key:"componentDidMount",value:function(){this.props.logoutRedirectURL||(this.isManageTeamInviteById?this._focusOnExternalIdRef():this.state.currentFormState===P.default.CHANGE_PASSWORD_AFTER_RESET?this._focusOnPasswordRef():this.state.currentFormState===P.default.CHANGE_MY_PASSWORD?this._focusOnOldPasswordRef():this._focusOnEmailRef())}},{key:"render",value:function(){var e,t,a,r,i,o,s,l,u,c,d,f,p,h,v,_,y,k,S,M,L,D,x,F,U;this._refs={};var j=this.state.currentFormState,H="",V=m.default.createElement("span",null),W={shouldRender:!1,isSignUp:!1},z=!0;switch(j){case P.default.LOGIN:W.shouldRender=!0,V=I.default.renderForm(this.state,this.props,this._getInputMessageClasses,this._renderInputField,this._renderPasswordField,n._renderForgotPasswordLink,this._onClickGoToForgotPassword,this._getRememberMeClicked,this._onClickOnMainButton,this._onVerifyCaptcha.bind(this),n._renderFooterLink,void 0,this._renderPhoneInputField,this.handlePhonEmailIndexChange);break;case P.default.FORGOT:V=m.default.createElement(O.default,{formState:this.state,formProps:this.props,getInputMessageClasses:this._getInputMessageClasses,renderInputField:this._renderInputField,onClickGoToLoginFromForgotPassword:this._onClickGoToLoginFromForgotPassword,onClickOnMainButton:this._onClickOnMainButton,renderFooterLink:n._renderFooterLink,renderPhoneInputField:this._renderPhoneInputField,handleForgotPasswordEmailSMS:this.handleForgotPasswordEmailSMS});break;case P.default.RESET:H="login.reset-password.title",V=A.default.renderForm(this.state,this.props,this._onClickGoToLoginFromResetPassword.bind(this),n._renderFooterLink,this.state.sentBySMS);break;case P.default.CHANGE_PASSWORD_AFTER_RESET:case P.default.CHANGE_MY_PASSWORD:z=!this.props.changeMyPassword&&!this.state.forcePasswordChange;var Y=this.state.forcePasswordChange?E.default.getAppdata().appConf.passwordSecurity.forcePasswordChange.periodInDays:void 0;V=w.default.renderForm(this.state,this.props,this.passwordPolicy,this._renderPasswordField,this._renderPasswordRequirements,this._onClickOnMainButton,Y);break;case P.default.CHANGED_PASSWORD_NOTIFICATION:z=!this.props.changeMyPassword,V=N.default.renderForm(this.state,this.props);break;case P.default.SIGNUP_AFTER_EMAIL_INVITATION:W.shouldRender=!0,W.isSignUp=!0,V=C.default.renderForm(this.state,this.props,this._getInputMessageClasses,this._renderInputField,this.passwordPolicy,this._renderPasswordField,this._renderPasswordRequirements,this._onClickOnMainButton,!1,void 0,this.appConf.featureFlags.signup.fields.externalId.enabled);break;case P.default.SIGNUP_SELF_REGISTRATION:W.shouldRender=!E.default.isAnonymous(),W.isSignUp=!0,H="login.submit-button.register",V=C.default.renderForm(this.state,this.props,this._getInputMessageClasses,this._renderInputField,this.passwordPolicy,this._renderPasswordField,this._renderPasswordRequirements,this._onClickOnMainButton,n._renderFooterLink,this._onClickGoToSelfRegistrationLogin.bind(this),this.appConf.featureFlags.signup.fields.externalId.enabled,this.isManageTeamInviteById,(null===(e=this.appConf.featureFlags)||void 0===e||null===(t=e.selfRegistration)||void 0===t||null===(a=t.sms)||void 0===a?void 0:a.enabled)?this._renderPhoneInputField:void 0);break;case P.default.SIGNUP_SELF_REGISTRATION_CHECK_YOUR_EMAIL:H="login.submit-button.register",V=T.default.renderForm(this.state,this.props,this._selfRegistrationResendEmail.bind(this),this._onClickGoToSelfRegistrationSignupFromCheckEmail.bind(this),n._renderFooterLink,null===(r=this.appConf.featureFlags)||void 0===r||null===(i=r.selfRegistration)||void 0===i||null===(o=i.sms)||void 0===o?void 0:o.enabled);break;case P.default.SIGNUP_SELF_REGISTRATION_LOGIN:W.shouldRender=!0,W.isSignUp=!1,H="login.submit-button.login",V=I.default.renderForm(this.state,this.props,this._getInputMessageClasses,this._renderInputField,this._renderPasswordField,n._renderForgotPasswordLink,this._onClickGoToSelfRegistrationForgotPasswordFromLogin.bind(this),this._getRememberMeClicked,this._onClickOnMainButton,this._onVerifyCaptcha.bind(this),n._renderFooterLink,this._onClickGoToSelfRegistrationSignupFromLogin.bind(this),(null===(s=this.appConf.featureFlags)||void 0===s||null===(l=s.selfRegistration)||void 0===l||null===(u=l.sms)||void 0===u?void 0:u.enabled)?this._renderPhoneInputField:void 0,(null===(c=this.appConf.featureFlags)||void 0===c||null===(d=c.selfRegistration)||void 0===d||null===(f=d.sms)||void 0===f?void 0:f.enabled)?this.handlePhonEmailIndexChange:void 0);break;case P.default.SIGNUP_SELF_REGISTRATION_FORGOT_PASSWORD:H="login.reset-password.title",V=m.default.createElement(O.default,{formState:this.state,formProps:this.props,getInputMessageClasses:this._getInputMessageClasses,renderInputField:this._renderInputField,onClickGoToLoginFromForgotPassword:this._onClickGoToLoginFromSelfRegistrationForgotPassword,onClickOnMainButton:this._onClickOnMainButton,renderFooterLink:n._renderFooterLink,renderPhoneInputField:this._renderPhoneInputField,handleForgotPasswordEmailSMS:this.handleForgotPasswordEmailSMS});break;case P.default.SIGNUP_SELF_REGISTRATION_EXPIRED_LINK:z=!1,V=b.default.renderForm(this.props);break;case P.default.LOGIN_REDIRECT_URL:V=m.default.createElement(G.default,{logoutRedirectURL:this.props.logoutRedirectURL});break;case P.default.OTP:V=m.default.createElement(B.default,null);break;case P.default.NO_ENABLEY_LOGIN:W.shouldRender=!0}var K=this._renderFormTitle(H),Q=R.default.getLogo(j,this.props.logoImage),X=W.shouldRender&&(E.default.isFeatureEnabled("enableSocialFacebook")||E.default.isFeatureEnabled("enableSocialGoogle")),q=this.appConf.featureFlags.sso&&this.appConf.featureFlags.sso.saml,Z=q&&q.enabled,J=q&&q.loginUrl,$=null===(p=this.appConf.featureFlags)||void 0===p||null===(h=p.sso)||void 0===h||null===(v=h.oauth2)||void 0===v?void 0:v.enabled,ee=$&&(null===(_=this.appConf.featureFlags)||void 0===_||null===(y=_.sso)||void 0===y?void 0:y.oauth2.client_id),te=$&&(null===(k=this.appConf.featureFlags)||void 0===k||null===(S=k.sso)||void 0===S||null===(M=S.oauth2)||void 0===M?void 0:M.scope),ne=$&&(null===(L=this.appConf.featureFlags)||void 0===L||null===(D=L.sso)||void 0===D||null===(x=D.oauth2)||void 0===x?void 0:x.authUrl),ae=$&&(null===(F=this.appConf.featureFlags)||void 0===F||null===(U=F.sso)||void 0===U?void 0:U.oauth2.redirect_uri),re=E.default._getAppDetails().site,ie="".concat(ne,"?response_type=code&state=").concat(re,"&client_id=").concat(ee,"&redirect_uri=").concat(ae,"&scope=").concat(te),oe=Z&&J||$,se=j===P.default.NO_ENABLEY_LOGIN,le=E.default.isFeatureEnabled("otp"),ue=j===P.default.OTP?g.default.translate("login_otp_back"):g.default.translate("login_otp_show"),ce=(null==q?void 0:q.enabled)?J:ie;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:this.props.wrapperClass},K,Q,oe&&n._renderOrganizationalLogin(ce),X&&n._renderSocialLogin(W.isSignUp,se),V,le&&m.default.createElement("a",{className:"login__otp",onClick:this._toggleOTP},ue),z&&this._renderContactSupportSection()),!this.props.isInnerLoginForm&&this._renderPromptMobileAppBanner())}},{key:"_renderFormTitle",value:function(e){return this.props.showTitle&&m.default.createElement("div",{className:"login__form-title"},g.default.translate(e))}},{key:"_getFormStateAccordingToProps",value:function(){var e,t="true"===E.default.getURLParam("ischangepassword"),n=this.props.loginQueryParams.invitation_token&&this.appConf.accountDetails&&!this.appConf.accountDetails.isSelfService&&!(null===(e=E.default.getAppdata().appConf.manageLearnersAndMembers)||void 0===e?void 0:e.shareSelfRegisterLink),a=this.props.showSignUpPage&&this.props.selfRegistration,r=this.props.showSignUpPage&&!this.props.selfRegistration;return this.props.logoutRedirectURL?P.default.LOGIN_REDIRECT_URL:n?P.default.LOGIN:t?P.default.CHANGE_PASSWORD_AFTER_RESET:this.props.changeMyPassword?P.default.CHANGE_MY_PASSWORD:r?P.default.SIGNUP_AFTER_EMAIL_INVITATION:a?this.props.expiredLinkEmail?P.default.SIGNUP_SELF_REGISTRATION_EXPIRED_LINK:this.props.selfRegistrationLogin?P.default.SIGNUP_SELF_REGISTRATION_LOGIN:P.default.SIGNUP_SELF_REGISTRATION:E.default.isFeatureEnabled("hideEnableyLogin")?P.default.NO_ENABLEY_LOGIN:P.default.LOGIN}},{key:"_getRememberMeClicked",value:function(){this.setState({rememberMe:!this.state.rememberMe})}},{key:"_renderPasswordRequirements",value:function(){if(!this.state.showPasswordRequirements)return null;var e=(0,v.default)("login__change-password-requirements",{"login__change-password-requirements--desktop":!E.default.isMobile(),"login__change-password-requirements--mobile":E.default.isMobile()}),t=this.state.passwordMatchRequirements?"correct":"empty";return[m.default.createElement("div",{className:"".concat(e," bold"),key:"change-password-requirements"},g.default.translate("login.change-password.password-requirements.title")),m.default.createElement("div",{className:"".concat(e," ").concat(t),key:"change-password-requirements.note1"},g.default.translate("login.change-password.password-requirements.note-1")),m.default.createElement("div",{className:"".concat(e," ").concat(t),key:"change-password-requirements.note2"},g.default.translate("login.change-password.password-requirements.note-2")),m.default.createElement("div",{className:"".concat(e," ").concat(t),key:"change-password-requirements.note3"},g.default.translate("login.change-password.password-requirements.note-3"))]}},{key:"_renderPasswordField",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login.password.placeholder",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"password",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=(0,v.default)("login__password-wrapper",{"login__password-wrapper--mobile":this.isMobile,"login__password-wrapper--desktop":!this.isMobile});return[m.default.createElement("div",{className:r,key:"password-wrapper"},this._renderInputField(n,this.state.showPassword[n]?"text":"password",e,void 0,t),this._getTogglePasswordIcon(n)),!a&&m.default.createElement("div",{className:this._getInputMessageClasses(n),key:"".concat(n,"-error-message")},this.state.invalidInputRefs[n]||"")]}},{key:"_togglePassword",value:function(e){this.setState({showPassword:(0,d.default)({},e,!this.state.showPassword[e])})}},{key:"_getTogglePasswordIcon",value:function(e){var t=this,n={onClick:function(){t._togglePassword(e)},className:(0,v.default)("login__toggle-password",{"login__toggle-password--mobile":this.isMobile,"login__toggle-password--desktop":!this.isMobile})};return this.state.showPassword[e]?m.default.createElement(L.default,n):m.default.createElement(M.default,n)}},{key:"_renderInputField",value:function(e,t,n,a,r){var i=this,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=function(e,t){t&&(i._refs[e]=t)};return m.default.createElement("input",{className:this._getInputClasses(e),key:e,id:"login-input-".concat(e),"data-automation-id":"login-input-".concat(e),ref:function(t){s(e,t)},type:t,disabled:o,value:a,onKeyPress:function(t){i._onKeyPress(e,t)},onChange:function(){i._onChange(e)},placeholder:g.default.translate(n),pattern:r||void 0,title:g.default.translate(n),autoCapitalize:"off"})}},{key:"_renderContactSupportSection",value:function(){var e=this.appConf.contactSupportUrl;if(!e)return null;var t=this.appConf.contactSupportText||g.default.translate("login.contact-support.title");return m.default.createElement("div",{className:"login__contact-support-link"},m.default.createElement("a",{href:e,target:0===e.indexOf("mailto")?"_self":"_blank",rel:"noopener noreferrer"},t))}},{key:"_getInputClasses",value:function(e){var t="".concat(e,"-icon-").concat(this.props.direction,"-readonly");return(0,v.default)("login__input",{"login__input--mobile":this.isMobile,"login__input--desktop":!this.isMobile,"login__input--error":(0,p.default)(this.state.invalidInputRefs,e)},"".concat(e,"-icon-").concat(this.props.direction),"".concat(this.props.showSignUpPage&&!this.props.selfRegistration&&"email"===e?t:""))}},{key:"_getInputMessageClasses",value:function(e){return(0,v.default)("login__input-message",{"login__input-message--desktop":!this.isMobile,"login__input-message--mobile":this.isMobile,"login__input-message--error":(0,p.default)(this.state.invalidInputRefs,e),"login__input-message--no-height":this.state.currentFormState===P.default.FORGOT})}},{key:"_onClickOnMainButton",value:function(){var e=this;if(!this.state.disableLogin){var t=this._getInvalidInputs(),n=(0,f.default)(t);this.setState({invalidInputRefs:t,submitMessage:{},submitting:n},(function(){if(n)switch(e.state.currentFormState){case P.default.FORGOT:e._onClickGoToResetPassword();break;case P.default.CHANGE_PASSWORD_AFTER_RESET:e._onClickChangePasswordAfterReset();break;case P.default.CHANGE_MY_PASSWORD:e._onClickChangeMyPassword();break;case P.default.SIGNUP_AFTER_EMAIL_INVITATION:e._onSignUpSubmitAfterInvitationByEmail();break;case P.default.SIGNUP_SELF_REGISTRATION:var t,a,r,i=e._refs["full-user-name"].value.trim(),o=i.indexOf(" "),s={password:e._refs.password.value,email:null===(t=e._refs)||void 0===t||null===(a=t.email)||void 0===a?void 0:a.value,phone:e.state.phoneNumberValue};o>0?(s.firstName=i.substr(0,o),s.lastName=i.substr(o+1)):s.firstName=i,(null===(r=e._refs.externalId)||void 0===r?void 0:r.value)&&(s.externalId=e._refs.externalId.value.trim()),e.props.allowSignUpWithChannel?e._onSignUpSubmit(s):e.props.guestRegistration?e._onGuestSignUpSubmit(s):(e.isManageTeamInviteById&&(s.inviteByExternalId=!0),e._onSignUpSubmitSelfRegistration(s)),e.setState({signUpSubmitData:s});break;case P.default.LOGIN:e._onLoginSubmit();break;case P.default.SIGNUP_SELF_REGISTRATION_LOGIN:e.props.guestRegistration?e._onGuestLogin():e._onSignUpSelfRegistrationLogin();break;case P.default.SIGNUP_SELF_REGISTRATION_FORGOT_PASSWORD:e._onClickGoToResetPassword()}}))}}},{key:"_onLoginSubmit",value:function(){var e,t,n,a=Object.assign({username:null===(e=this._refs)||void 0===e||null===(t=e.email)||void 0===t?void 0:t.value,password:this._refs.password.value,loginToken:this.props.loginToken,phone:this.state.phoneNumberValue},this._refs.site?{site:null===(n=this._refs.site.value)||void 0===n?void 0:n.toLowerCase()}:{});S.default.onLoginSubmit(a,this.props.redirectLocation,this.props.rests.POST_LOGIN,this.props.appId,this.state.rememberMe,this._onLoginError.bind(this),!1,void 0,this._onForceChangePassword.bind(this))}},{key:"_onForceChangePassword",value:function(e){this.setState({currentFormState:P.default.CHANGE_MY_PASSWORD,submitMessage:{},submitting:!1,forcePasswordChange:!0,loginSuccessToken:e})}},{key:"_onSignUpSelfRegistrationLogin",value:function(){var e={username:this._refs.email.value,password:this._refs.password.value,loginToken:this.props.loginToken,invitationToken:this.props.loginQueryParams.invitation_token};S.default.onLoginSubmit(e,this.props.redirectLocation,this.props.rests.POST_LOGIN,this.props.appId,this.state.rememberMe,this._onLoginError.bind(this))}},{key:"_onGuestLogin",value:function(){var e=E.default.getCurrentToken(),t={username:this._refs.email.value,password:this._refs.password.value,invitationToken:e.invitation_token};S.default.onLoginSubmit(t,this.props.redirectLocation,this.props.rests.POST_LOGIN_GUEST,this.props.appId,this.state.rememberMe,this._onLoginError.bind(this),!0,(function(){W("login",!0)}))}},{key:"_onSignUpSubmit",value:function(e){var t=document.URL.split("#");t[0]+=window.location.search?"&":"?",t[0]+="access_token=__TOKEN__",e.redirectUrl=t.join("#"),S.default.onSignUpSubmit(e,this.props.redirectLocation,this.props.rests.POST_SIGNUP,this.props.appId,this.state.rememberMe,this._onSignUpSubmitSelfRegistrationSuccess.bind(this),this._onSignUpSelfRegistrationError.bind(this))}},{key:"_onSignUpSubmitSelfRegistration",value:function(e){e.token=this.props.loginQueryParams.invitation_token,S.default.onSignUpSubmitSelfRegistration(e,this.props.redirectLocation,this.props.rests.PUT_SIGNUP_SELF_REGISTRATION,this.props.appId,this.state.rememberMe,this._onSignUpSubmitSelfRegistrationSuccess.bind(this),this._onSignUpSelfRegistrationError.bind(this))}},{key:"_onSignUpSubmitAfterInvitationByEmail",value:function(){var e,t=this._refs["full-user-name"].value.trim(),n=t.indexOf(" "),a={password:this._refs.password.value,token:this.props.loginQueryParams.token};n>0?(a.firstName=t.substr(0,n),a.lastName=t.substr(n+1)):a.firstName=t,(null===(e=this._refs.externalId)||void 0===e?void 0:e.value)&&(a.externalId=this._refs.externalId.value.trim()),S.default.onSignUpSubmitAfterInvitationByEmail(a,this.props.redirectLocation,this.props.rests.PUT_SIGNUP,this.props.appId,this.state.rememberMe,this._onSignUpError.bind(this))}},{key:"_onGuestSignUpSubmit",value:function(e){S.default.onSignUpSubmitGuestRegistration(e,this.props.redirectLocation,this.props.rests.PUT_SIGN_UP_GUEST,this.props.appId,this.state.rememberMe,this._onGuestSignUpSubmitSuccess.bind(this),this._onSignUpSelfRegistrationError.bind(this))}},{key:"_onGuestSignUpSubmitSuccess",value:function(e){W("sign_up",!0),e&&e.access_token?S.default.onGuestUserRegistered(e,this.props.appId,this.state.rememberMe):this._onSignUpSubmitSelfRegistrationSuccess()}},{key:"_onClickChangePasswordAfterReset",value:function(){var e=this.props.rests.POST_CHANGE_PASSWORD_AFTER_RESET,t={newPassword:this._refs.password.value};S.default.changePasswordAfterReset(t,e,this.props.redirectLocation,this.state.rememberMe,this._onChangePasswordError.bind(this))}},{key:"_onClickChangeMyPassword",value:function(){var e=this.props.rests.POST_CHANGE_MY_PASSWORD,t={oldPassword:this._refs.oldPassword.value,newPassword:this._refs.password.value};this.state.forcePasswordChange&&(e+="?access_token=".concat(this.state.loginSuccessToken.access_token)),S.default.changeMyPassword(e,t,this._onChangePasswordSuccess.bind(this),this._onChangePasswordError.bind(this))}},{key:"_onLoginError",value:function(e){if(401===e.status||404===e.status){var t;if(e.data&&"User is disabled"===e.data.error_description){var n=E.default.isFeatureEnabled("catalog");if(this.appConf.accountDetails&&this.appConf.accountDetails.isSelfService||n)t={errorMessage:g.default.translate("login.messages.invalid-login-inactive-user"),linkTextKey:"login.messages.invalid-login-resend-invitation",linkHandler:this._onClickOnResendInviteLink.bind(this),styleClass:"resend-invite"};else{var a=this._refs.email.value,r=this._refs.site?this._refs.site.value:E.default._getAppDetails().site;t={errorMessage:g.default.translate("login.messages.invalid-login-inactive-user-corporate",{userEmail:a,siteName:r})}}}else t={errorMessage:g.default.translate("login.messages.invalid-login")};this.setState({submitMessage:t,submitting:!1}),this._checkLoginAttempts(e)}else if("offline"===e.message){var i={errorMessage:g.default.translate("offline-indicator.network-offline.text")};this.setState({submitMessage:i,submitting:!1})}}},{key:"_onSignUpError",value:function(){this.setState({submitMessage:{errorMessage:g.default.translate("login.messages.invalid-signup")},submitting:!1})}},{key:"_onForgotPasswordError",value:function(){this.setState({submitMessage:{errorMessage:g.default.translate("login.messages.invalid-forgot-password")},submitting:!1})}},{key:"_onChangePasswordSuccess",value:function(){this.props.changeMyPassword?this.setState({currentFormState:P.default.CHANGED_PASSWORD_NOTIFICATION,submitMessage:{},submitting:!1}):this.state.forcePasswordChange&&(E.default.storeToken(this.state.loginSuccessToken),S.default.loginSuccess(this.props.redirectLocation))}},{key:"_onChangePasswordError",value:function(e){var t={submitting:!1};switch(e.data.code){case 2:t.submitMessage={errorMessage:g.default.translate("login.change-password.no-repeat-password-error")};break;case 12:t.invalidInputRefs={oldPassword:g.default.translate("login.change-password.password-requirements.wrong-password")};break;default:t.submitMessage={errorMessage:g.default.translate("login.change-password.submit-error")}}this.setState(t)}},{key:"_onKeyPress",value:function(e,t){if(13===(t.which||t.keyCode)){if(this.isMobile){var n,a,r,i;if(!this._refs.email.value)return void(null===(r=this._refs.email)||void 0===r||r.focus());if(!this._refs.password.value)return void(null===(i=this._refs.password)||void 0===i||i.focus());null===(n=this._refs.email)||void 0===n||n.blur(),null===(a=this._refs.password)||void 0===a||a.blur()}this._onClickOnMainButton()}}},{key:"_checkPasswordRequirements",value:function(e){var t=this._refs[e];return t&&t.validity&&!t.validity.patternMismatch&&t.value.length}},{key:"_onChange",value:function(e){var t=this.state.invalidInputRefs,n={};if((0,p.default)(t,e)&&(delete t[e],n.invalidInputRefs=t),"password"===e&&this._shouldShowPasswordRequirements()){var a=this._checkPasswordRequirements(e);n.showPasswordRequirements=!0,n.passwordMatchRequirements=a}(0,f.default)(n)||this.setState(n)}},{key:"_shouldShowPasswordRequirements",value:function(){return this.passwordPolicy&&-1!==[P.default.CHANGE_PASSWORD_AFTER_RESET,P.default.CHANGE_MY_PASSWORD,P.default.SIGNUP_SELF_REGISTRATION,P.default.SIGNUP_AFTER_EMAIL_INVITATION].indexOf(this.state.currentFormState)}},{key:"_getInvalidInputs",value:function(){var e,t,n,a,r,i,o=this,s={},l=this.state,u=l.phoneNumberValue,c=l.currentFormState,d=l.phoneEmailTabIndex;return(0,h.default)(this._refs,(function(e,t){var n,a;e.value?e.validity&&e.validity.patternMismatch&&"full-user-name"===t?s[t]=g.default.translate("login.messages.required-full-user-name"):e.validity&&e.validity.patternMismatch&&"email"===t?s[t]=g.default.translate("login.messages.invalid-email"):e.validity&&e.validity.patternMismatch&&"externalId"===t&&!(null===(n=o.appConf.featureFlags)||void 0===n||null===(a=n.forgotPasswordSms)||void 0===a?void 0:a.validateExternalId)?s[t]=g.default.translate("login.messages.invalid-external-id"):"password"===t&&e.validity&&e.validity.patternMismatch?(s[t]="",o.setState({passwordMatchRequirements:!1})):"confirmPassword"===t&&o._refs.password&&o._refs[t].value!==o._refs.password.value&&(s[t]=g.default.translate("login.change-password.password-requirements.error")):s[t]=g.default.translate("login.messages.required-field")}),this),(c===P.default.SIGNUP_SELF_REGISTRATION&&(null===(e=this.appConf.featureFlags)||void 0===e||null===(t=e.selfRegistration)||void 0===t||null===(n=t.sms)||void 0===n?void 0:n.enabled)&&(u.length<1||!(0,k.isPossiblePhoneNumber)(u))||c===P.default.LOGIN&&(null===(a=this.appConf.featureFlags)||void 0===a||null===(r=a.login)||void 0===r||null===(i=r.byPhoneNumber)||void 0===i?void 0:i.enabled)&&"0"===d&&(u.length<1||!(0,k.isPossiblePhoneNumber)(u)))&&(s.phone=g.default.translate("login.messages.invalid-phone-number")),s}},{key:"_focusOnExternalIdRef",value:function(){var e;this._refs.externalId&&(null===(e=this._refs.externalId)||void 0===e||e.focus())}},{key:"_focusOnEmailRef",value:function(){var e,t;E.default.isAndroid()||E.default.isIos()||this.state.currentFormState===P.default.SIGNUP_SELF_REGISTRATION_EXPIRED_LINK||(this._refs.site?null===(e=this._refs.site)||void 0===e||e.focus():null===(t=this._refs.email)||void 0===t||t.focus())}},{key:"_focusOnPasswordRef",value:function(){var e;this._refs.password&&(null===(e=this._refs.password)||void 0===e||e.focus())}},{key:"_focusOnOldPasswordRef",value:function(){var e;this._refs.oldPassword&&(null===(e=this._refs.oldPassword)||void 0===e||e.focus())}},{key:"_onClickOnResendInviteLink",value:function(){var e=this,t={email:this._refs.email.value,locale:this.appConf.locale,domain:this.appConf.siteDetails.domain};S.default.resendEmailInvitation(this.props.rests.POST_RESEND_INVITATION,t,(function(){e.setState({submitMessage:{message:g.default.translate("login.messages.invalid-login-invitation-sent")}})}))}},{key:"_onClickGoToForgotPassword",value:function(){this._clearFields(),this.setState({invalidInputRefs:{},submitMessage:{},currentFormState:P.default.FORGOT})}},{key:"_onClickGoToResetPassword",value:function(){var e,t,n,a,r=this,i=this.props.rests,o=i.POST_RESET_PASSWORD,s=i.POST_RESET_PASSWORD_SMS,l=this.state.phoneNumberValue,u=null===(e=this._refs)||void 0===e||null===(t=e.email)||void 0===t?void 0:t.value,c=o;this.state.sentBySMS&&(c=s,u=null===(a=this._refs.externalId)||void 0===a?void 0:a.value,n="1");S.default.onResetPasswordClicked(u,l,n,c,(function(){r.setState({currentFormState:P.default.RESET,submitMessage:{message:g.default.translate("login.messages.forgot-password-success")},submitting:!1})}),this._onForgotPasswordError.bind(this))}},{key:"_onClickGoToLoginFromResetPassword",value:function(){this._clearFields(),this.setState({invalidInputRefs:{},submitMessage:{},currentFormState:this.props.selfRegistration?P.default.SIGNUP_SELF_REGISTRATION_LOGIN:P.default.LOGIN})}},{key:"_onClickGoToSelfRegistrationSignupFromLogin",value:function(){this.setState({invalidInputRefs:{},submitMessage:{},submitting:!1,currentFormState:P.default.SIGNUP_SELF_REGISTRATION})}},{key:"_onClickGoToSelfRegistrationLogin",value:function(){this.setState({invalidInputRefs:{},submitMessage:{},submitting:!1,currentFormState:P.default.SIGNUP_SELF_REGISTRATION_LOGIN})}},{key:"_onSignUpSubmitSelfRegistrationSuccess",value:function(){this.setState({submitting:!1,resendMessage:"",currentFormState:P.default.SIGNUP_SELF_REGISTRATION_CHECK_YOUR_EMAIL})}},{key:"_onSignUpSelfRegistrationError",value:function(e){var t;switch(e.data.code){case 1:t={errorMessage:g.default.translate("login.messages.invalid-signup-self-registration-already-exists"),linkTextKey:"login.messages.invalid-signup-self-registration-already-exists-link",linkHandler:this._onClickGoToSelfRegistrationLogin.bind(this),styleClass:"link-to-login"};break;case 3:t={errorMessage:g.default.translate("login.messages.invalid-signup-id-does-not-exist")};break;case 21:t={errorMessage:g.default.translate("login.messages.invalid-signup-id-already-exists")};break;default:t={errorMessage:g.default.translate("login.messages.invalid-signup")}}this.setState({submitMessage:t,submitting:!1})}},{key:"_selfRegistrationResendEmail",value:function(){this.setState({resendMessage:""});var e=this.props.allowSignUpWithChannel?this.props.rests.POST_SIGNUP:this.props.rests.PUT_SIGNUP_SELF_REGISTRATION;(this.props.allowSignUpWithChannel?S.default.onSignUpSubmit:S.default.onSignUpSubmitSelfRegistration)(this.state.signUpSubmitData,this.props.redirectLocation,e,this.props.appId,this.state.rememberMe,this._onSelfRegistrationResendSuccess.bind(this),this._onSelfRegistrationResendFail.bind(this))}},{key:"_onSelfRegistrationResendSuccess",value:function(){var e,t,n,a=null===(e=this.appConf.featureFlags)||void 0===e||null===(t=e.selfRegistration)||void 0===t||null===(n=t.sms)||void 0===n?void 0:n.enabled;this.setState({resendMessage:a?g.default.translate("login.self-registration-check-your-phone.resend-success"):g.default.translate("login.self-registration-check-your-email.resend-success")})}},{key:"_onSelfRegistrationResendFail",value:function(){this.setState({resendMessage:g.default.translate("login.self-registration-check-your-email.resend-fail")})}},{key:"_onClickGoToSelfRegistrationSignupFromCheckEmail",value:function(){this.setState({invalidInputRefs:{},submitMessage:{},submitting:!1,currentFormState:P.default.SIGNUP_SELF_REGISTRATION})}},{key:"_onClickGoToSelfRegistrationForgotPasswordFromLogin",value:function(){this._clearFields(),this.setState({invalidInputRefs:{},submitMessage:{},currentFormState:P.default.SIGNUP_SELF_REGISTRATION_FORGOT_PASSWORD})}},{key:"_onVerifyCaptcha",value:function(e){this.setState({disableLogin:!e})}},{key:"_checkLoginAttempts",value:function(e){var t,a,r,i,o=null===(t=e.config)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.get("username"),s=null===(r=e.config)||void 0===r||null===(i=r.params)||void 0===i?void 0:i.get("site"),l=n.getLoginAttemptsDataFromLocalStorage(s,o),u=l.noAttempts+1;u>=5&&(this.state.showCaptcha?(this.setState({disableLogin:!0}),I.default.resetCaptcha()):this.setState({showCaptcha:!0,disableLogin:!0})),n.setNewAttemptsDataInLocalStorage(l.data,u,s,o)}},{key:"_renderPromptMobileAppBanner",value:function(){var e=E.default.isFeatureEnabled("promptMobileApp"),t=E.default.isMobile()&&!E.default.isCordova()&&!E.default.isStandalone()&&!this.appConf.webappManifestUrl;return e&&t?m.default.createElement(y.default,{isLoginScreen:!0}):null}}],[{key:"_renderFooterLink",value:function(e,t,n,a){var r=(0,v.default)("login__bottom-form-link ".concat(n||""),{"login__bottom-form-link--mobile":E.default.isMobile(),"login__bottom-form-link--desktop":!E.default.isMobile()});return m.default.createElement("div",{className:r,onClick:e,"data-automation-id":a||"restore-password-link",key:t},g.default.translate(t))}},{key:"_renderForgotPasswordLink",value:function(e){return m.default.createElement("div",{className:"login__forgot-password-section","data-automation-id":"restore-password-link"},m.default.createElement("span",{className:"login__forgot-password-section--link",onClick:e},g.default.translate("login.forgot-password.link-title")))}},{key:"_renderSocialLogin",value:function(e,t){return m.default.createElement(D.default,{isSignUp:e,shouldRenderSeparator:!t})}},{key:"_renderOrganizationalLogin",value:function(e){var t=g.default.translate("login.default-login.title");return m.default.createElement(m.default.Fragment,null,m.default.createElement(x.default,{ssoSamlLoginUrl:e}),m.default.createElement(F.default,{text:g.default.translate("login.separation-line.or"),styleClass:"login__separation-line"}),!!t&&m.default.createElement("div",{className:"login__title"},t))}}]),n}(m.Component);t.default=z,z.defaultProps={formClass:"",showSignUpPage:!1,selfRegistration:!1,logoImage:null,wrapperClass:"",direction:"en_US",loginToken:"",loginQueryParams:{},expiredLinkEmail:"",changeMyPassword:!1,redirectLocation:"index.html",includeSiteRedirect:!1,allowSignUpWithChannel:!1,showTitle:!1,guestRegistration:!1,selfRegistrationLogin:!1,loginErrorCode:"",logoutRedirectURL:void 0,isInnerLoginForm:!1}},,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TOGGLE_THEME=void 0;var r=a(n(624));n(738);var i=r.TOGGLE_THEME;t.TOGGLE_THEME=i;var o=r.default;t.default=o},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SETTINGS_EVENT_MAP=t.EVENT_TASK_TYPE_MAP=t.ACTION_EVENTS=void 0;t.ACTION_EVENTS={TASK_COMPLETED:"TASK_COMPLETED",TASK_GROUP_COMPLETED:"TASK_GROUP_COMPLETED",TASK_ATTEMPT:"TASK_ATTEMPT",TASK_GROUP_LOADED:"TASK_GROUP_LOADED",TASK_NAVIGATED:"TASK_NAVIGATED",TASK_GROUP_TERMINATED:"TASK_GROUP_TERMINATED"};t.EVENT_TASK_TYPE_MAP={IMAGE:"ADD_IMAGE_TASK",VIDEO:"ADD_VIDEO_TASK",AUDIO:"ADD_AUDIO_TASK",RICHMEDIA:"ADD_RICHMEDIA_TASK",MC:{TEXT:"ADD_MC_TEXT_TASK",IMAGE:"ADD_MC_IMAGE_TASK",AUDIO:"ADD_MC_AUDIO_TASK",TEXT_BOOLEAN:"ADD_MC_TRUE_FALSE_TASK"},FILL_IN_GAPS:{DND:"ADD_FILL_IN_GAPS_DND_TASK",WRITING:"ADD_FILL_IN_GAPS_WRITING_TASK"},TEXT:"ADD_TEXT_TASK",FREE_WRITING:"ADD_FREE_WRITING_TASK",CHOICE_MATRIX:"ADD_CHOICE_MATRIX_TASK",POLL:"ADD_POLL_TASK",EMBED_WEBSITE:"ADD_URL_TASK"};t.SETTINGS_EVENT_MAP={hide_table:"SETTINGS_HIDE_TABLE",hide_numbers:"SETTINGS_HIDE_NUMBERS",randomize:{true:"SETTINGS_SELECT_RANDOMIZE",false:"SETTINGS_SELECT_UNRANDOMIZE"}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(113)).default;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CUSTOM=t.SHOW=void 0;t.SHOW="SHOW";t.CUSTOM="CUSTOM"},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),i=a(n(3)),o=a(n(4)),s=a(n(0)),l=a(n(24)),u=a(n(692)),c=function(){function e(t,n){(0,i.default)(this,e),this._host=void 0,this._contextProviderElement=t;var a=n||{},r=a.onModalMount,o=a.onModalUnmount;this._host=r&&o?{mountModal:r,unmountModal:o}:null}return(0,o.default)(e,null,[{key:"mountModalComponent",value:function(e){var t=e.modalManager,n=e.modalDOM,a=e.modalElement,i=e.modalWrapperProps,o=e.onUnmount,c=e.contextProviderElement;l.default.render(s.default.cloneElement(c,{modalManager:t,children:s.default.createElement(u.default,(0,r.default)({unmount:o},i),a)}),n)}},{key:"unmountModalComponent",value:function(e){var t=e.modalDOM,n=e.onModalPostUnmount;l.default.unmountComponentAtNode(t),n&&n()}}]),(0,o.default)(e,[{key:"mountModal",value:function(t){var n,a=t.modalElement,r=t.modalWrapperProps,i=void 0===r?{}:r,o=t.onModalPostUnmount,s=document.createElement("div"),l=e.unmountModalComponent.bind(null,{modalDOM:s,onModalPostUnmount:o});return this._host?(n=this._host.unmountModal.bind(null,{modalDOM:s,onModalUnmount:l}),e.mountModalComponent({modalManager:this,modalDOM:s,modalElement:a,modalWrapperProps:i,onUnmount:n,contextProviderElement:this._contextProviderElement}),this._host.mountModal({modalDOM:s,onModalUnmount:l})):(n=function(){document.body.removeChild(s),l()},e.mountModalComponent({modalManager:this,modalDOM:s,modalElement:a,modalWrapperProps:i,onUnmount:n,contextProviderElement:this._contextProviderElement}),document.body.appendChild(s)),n}}]),e}();t.default=c},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M15.918 6.667H1.224C.548 6.667 0 6.107 0 5.417s.548-1.25 1.224-1.25h14.694c.677 0 1.225.56 1.225 1.25s-.548 1.25-1.225 1.25zm-4.408-3.7a2.859 2.859 0 0 1-.04.366H9.985a1.5 1.5 0 0 0 .056-.37c0-.828-.658-1.5-1.47-1.5-.811 0-1.469.672-1.469 1.5.003.126.021.25.056.37H5.673a2.788 2.788 0 0 1-.04-.366C5.643 1.326 6.948 0 8.556 0h.031c1.607 0 2.913 1.326 2.923 2.967zm-5.796 6.2v6.666h-.816V9.167h.816zm3.266 0v6.666h-.817V9.167h.817zm3.265 0v6.666h-.816V9.167h.816zm-8.98 9.166h10.613V7.5h1.632v10c0 1.38-1.096 2.5-2.449 2.5h-8.98c-1.352 0-2.448-1.12-2.448-2.5v-10h1.632v10.833z",fill:"#FFF",fillRule:"evenodd"}))}r.defaultProps={width:"18",height:"20",viewBox:"0 0 18 20"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(727));n(731);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(23)),i=a(n(0)),o=a(n(11)),s=a(n(13)),l=a(n(197)),u=a(n(101)),c={getEditorCaption:function(e,t,n,a,r){var s=(0,o.default)("edit",{name:e}),u=r?60:140;return i.default.createElement("div",{className:"input-field"},i.default.createElement(l.default,{name:e,className:s,placeholder:t,defaultValue:n,maxLength:u,onBlur:a,onPaste:this.handlePaste,showBottomBoldInFocus:!0}))},getEditorMediaCaptions:function(e,t,n){var a=e.data,r=a.title,o=a.description,s=a.credit;return i.default.createElement("div",null,this.getEditorCaption("title",t.PLACEHOLDER_TITLE,r,(function(t){return e.setTitle(t.target.value)}),n),n&&this.getEditorCaption("description",t.PLACEHOLDER_DESCRIPTION,o,(function(t){return e.setDescription(t.target.value)}),n),this.getEditorCaption("credit",t.PLACEHOLDER_CREDITS,s,(function(t){return e.setCredit(t.target.value)}),n))},handlePaste:function(e){var t=window.clipboardData.getData("Text").replace(/(\r\n|\n|\r)/gm," ");e.target.value=t,e.preventDefault()},getPlayerMediaCaptions:function(e,t){var n=e.data,a=n.title,o=n.description,l=n.credit,c=s.default.isMobile()&&t,d=i.default.createElement("div",{className:"media-captions"},i.default.createElement("div",{className:"captions-wrapper"},a&&(c?i.default.createElement("div",(0,r.default)({className:"title"},(0,u.default)(this.enlargeCapitalLetter(a)))):i.default.createElement("div",{className:"title"},a)),o&&i.default.createElement("div",{className:"description"},o),l&&i.default.createElement("div",{className:"credit"},l)));return a||l?d:null},enlargeCapitalLetter:function(e){var t=e[0],n=e.slice(1);return"<span><b style='font-size: 30px'>".concat(t,"</b>").concat(n,"</span>")}};t.default=c},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(202))),p=r(n(13));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1},a._toggleTooltip=a._toggleTooltip.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClick,a=t.IconImage,r=t.dataUnitTestId,i=t.dataAutomationId,o=this._getTooltip();return d.default.createElement("div",{className:"task-header-icon",ref:function(t){e._iconRef=t},onClick:function(){e._toggleTooltip(!1),n()},onMouseEnter:function(){e._toggleTooltip(!0)},onMouseLeave:function(){e._toggleTooltip(!1)},"data-unittest-id":r,"data-automation-id":i},d.default.createElement(a,null),o)}},{key:"_getTooltip",value:function(){return this.state.showTooltip?d.default.createElement(f.default,{content:this.props.title,parentOffsets:this._iconRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"tooltip--toolbar"}):""}},{key:"_toggleTooltip",value:function(e){!this.props.title||p.default.isTablet()||p.default.isMobile()||this.setState({showTooltip:e})}}]),n}(d.Component);m.defaultProps={onClick:function(){}};var v=m;t.default=v},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(873)),s=function(){function e(t,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=i.isAutoSave,l=void 0===s||s,u=i.removeSuggestedTaskOnKeep,c=void 0!==u&&u,d=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,m=arguments.length>8?arguments[8]:void 0,v=arguments.length>9?arguments[9]:void 0,g=arguments.length>10?arguments[10]:void 0,E=arguments.length>11?arguments[11]:void 0;(0,r.default)(this,e),this._id=t,this._environment=a,this._options={isAutoSave:l,removeSuggestedTaskOnKeep:c};var _=new o.default(t,n,a,v,f,g);d.initialize(n,_,p,h,m,g,c,E),this._modelStore=d}return(0,i.default)(e,null,[{key:"getVersion",value:function(e){return e.taskGroup.version}},{key:"getContentLanguage",value:function(e){return e.taskGroup.properties.contentLanguage}},{key:"getTitle",value:function(e){return e.taskGroup.properties.title}},{key:"getBackgroundColor",value:function(e){return e.taskGroup.properties.backgroundColor}},{key:"getFirstTaskBackgroundColor",value:function(e){var t=e.taskGroup.structure.taskOrder[0];if(void 0!==t)return e.tasks[t].data.backgroundColor}},{key:"isSingleMedia",value:function(e){return e.taskGroup.properties.isSingleMedia}}]),(0,i.default)(e,[{key:"createNewVersion",value:function(t){var n=this;this._environment.createTaskGroupVersion(this._id,e.getVersion(this._modelStore)).then((function(e){n.setVersion(e,t)})).catch(t)}},{key:"setVersion",value:function(e,t){this._modelStore.setTaskGroupVersion(e),t&&t()}},{key:"lockSaveWhenPublish",value:function(){this._modelStore.lockSaveWhenPublish()}},{key:"unlockSaveAfterPublish",value:function(){this._modelStore.unlockSaveAfterPublish()}},{key:"addTask",value:function(t,n,a,r,i,o){var s=this,l=this._modelStore;this._environment.getLanguage(e.getContentLanguage(l)).then((function(e){var r=(null==e?void 0:e.interaction)?e.interaction[t]:{},l=s._modelStore.addNewTask(t,n,r,o);a.theme&&s._modelStore.setTaskTheme(l,a.theme);var u=s._extractModelData();i(l,!!(null==o?void 0:o.suggestedData),u)})).catch((function(e){return r(e)}))}},{key:"removeTask",value:function(e,t){this._modelStore.removeTask(e),t(this._extractModelData())}},{key:"setTitle",value:function(e,t){this._setTaskGroupProperty("title",e),t()}},{key:"setBackgroundColor",value:function(e,t){this._setTaskGroupProperty("backgroundColor",e),t()}},{key:"setCoverImageUrl",value:function(e,t){this._setTaskGroupProperty("coverImageUrl",e),t()}},{key:"setContentLanguage",value:function(e,t){this._setTaskGroupProperty("contentLanguage",e),t()}},{key:"setModelOptions",value:function(e,t){this._options=Object.assign(this._options,e),t()}},{key:"_setTaskGroupProperty",value:function(e,t){this._modelStore.setTaskGroupProperty(e,t)}},{key:"setOrder",value:function(e){this._modelStore.setOrder(e)}},{key:"updateModel",value:function(e){this._modelStore.updateModel(e)}},{key:"_extractModelData",value:function(){var e=this._modelStore;return{taskGroup:JSON.parse(JSON.stringify(e.taskGroup)),tasks:JSON.parse(JSON.stringify(e.tasks))}}},{key:"data",get:function(){return this._modelStore},set:function(e){this._modelStore=e}}]),e}();t.default=s},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(33)),o=a(n(34)),s=n(910),l=a(n(911));n(912);var u=a(n(13)),c=a(n(21)),d=a(n(53)),f=a(n(28)),p=a(n(57)),h=a(n(486));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=d.default.LogManager,E=f.default.Instance,_={setWebAppManifest:function(){var e=u.default.getAppdata();!e.appConf.webappManifestUrl||u.default.isStandalone()||u.default.isCordova()||(document.querySelector("#manifest-placeholder").setAttribute("href",e.appConf.webappManifestUrl),u.default.isIos()&&u.default.isBrowserSafari()&&["appleTouchIcons","appleTouchStartupImages"].forEach((function(t){var n=e.appConf[t];if(n){var a=document.documentElement.querySelector("head");Object.keys(n).forEach((function(e){if(n[e]){var r=document.createElement("link");r.rel="appleTouchIcons"===t?"apple-touch-icon":"apple-touch-startup-image","default"!==e&&r.setAttribute("sizes",e),r.href=n[e],a.appendChild(r)}}))}})),window.addEventListener("beforeinstallprompt",(function(e){e.userChoice.then((function(e){var t=navigator.userAgent,n=u.default.isMobile()||u.default.isTablet();"dismissed"===e.outcome?g.info({message:"User dismissed stanalone app installation: ".concat(JSON.stringify({userAgent:t,isMobile:n}))}):g.info({message:"User installed stanalone app: ".concat(JSON.stringify({userAgent:t,isMobile:n}))})}))})))},setCordovaEvents:function(){(u.default.isAndroid()||u.default.isIos())&&document.addEventListener("deviceready",_._onDeviceReady,!1)},_onDeviceReady:function(){document.removeEventListener("deviceready",_._onDeviceReady),_._checkPlugins(),u.default.isTablet()?window.screen&&window.screen.orientation&&window.screen.orientation.lock&&window.screen.orientation.lock("landscape"):window.addEventListener("orientationchange",(function(){window.screen&&window.StatusBar&&("portrait"===window.screen.orientation.type||"portrait-primary"===window.screen.orientation.type?window.StatusBar.show():window.StatusBar.hide())})),window.handleOpenURL=function(e){e&&-1!==e.indexOf("http")?window.location=e:window.location.hash=u.default.getHash(e)}},_checkPlugins:function(){var e=[];window.StatusBar||e.push("StatusBar"),!u.default.isAndroid()||window.cordova&&window.cordova.plugins&&window.cordova.plugins.ZoomControl||e.push("ZoomControl"),window.universalLinks||e.push("universalLinks"),window.PushNotification||e.push("PushNotification"),!u.default.isAndroid()||window.cordova&&window.cordova.plugins&&window.cordova.plugins.permissions||e.push("permissions"),navigator.splashscreen||e.push("splashscreen"),window.cordova&&window.cordova.InAppBrowser||e.push("InAppBrowser"),e.length&&g.warn({message:"Couldn't find some Cordova plugins: ".concat(e.join(","))})},initServiceWorker:function(){return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.protocol.includes("https")&&!window.location.origin.includes("localhost")||!("serviceWorker"in navigator)){e.next=17;break}if(u.default.isFeatureEnabled("serviceWorker")&&!u.default.isBrowserEdge()){e.next=6;break}return e.next=4,_.unregisterServiceWorker();case 4:e.next=17;break;case 6:return e.prev=6,_._wb=new s.Workbox("./workboxServiceWorker.js"),e.next=10,_._wb.register();case 10:_.registration=e.sent,l.default.messaging().useServiceWorker(_.registration),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),g.warn(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))()},unregisterServiceWorker:function(){return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.protocol.includes("https")&&!window.location.origin.includes("localhost")||!("serviceWorker"in navigator)){e.next=5;break}return e.next=3,navigator.serviceWorker.getRegistrations();case 3:e.sent.forEach((function(e){e.unregister()}));case 5:case"end":return e.stop()}}),e)})))()},sendMsgToServiceWorker:function(e){var t=arguments;return(0,o.default)(i.default.mark((function n(){var a,r;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:{},!_.registration||!_.registration.active||"activated"!==_.registration.active.state){n.next=5;break}return n.next=4,_._wb.messageSW(v({command:e},a));case 4:r=n.sent;case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},setServiceWorkerListener:function(e,t){_.registration&&_.registration.active&&"activated"===_.registration.active.state&&navigator.serviceWorker.addEventListener("message",(function(n){n.data&&n.data.command===e&&t(n.data)}))},startupBroadcast:function(e){if("BroadcastChannel"in window){var t=new BroadcastChannel("api-startup-update-".concat(e));t.addEventListener("message",_._onStartupBroadcastMsg,!0),(t=new BroadcastChannel("api-startup-update")).addEventListener("message",_._onStartupBroadcastMsg,!0)}},_onStartupBroadcastMsg:function(){window.location.reload()},setThemeColor:function(){var e=document.documentElement.querySelector("head"),t=document.createElement("meta");t.name="theme-color",t.content=this.getThemeColor(),e.appendChild(t)},getThemeColor:function(){var e,t,n,a=u.default.getAppdata();return null!==(e=null==a||null===(t=a.appConf)||void 0===t||null===(n=t.toolbarCustomization)||void 0===n?void 0:n.backgroundColor)&&void 0!==e?e:"#9a2496"},_urlB64ToUint8Array:function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);return a},subscribeNotifications:function(){return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_._isPushNotificationsEnabled()){e.next=2;break}return e.abrupt("return");case 2:if(!u.default.isCordova()){e.next=7;break}return e.next=5,_.subscribeNotificationsCordova();case 5:e.next=9;break;case 7:return e.next=9,_.subscribeNotificationsPWA();case 9:case"end":return e.stop()}}),e)})))()},subscribeNotificationsPWA:function(){return(0,o.default)(i.default.mark((function e(){var t,n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=l.default.messaging()).usePublicVapidKey(c.default.FIREBASE_PUBLIC_KEY),e.next=5,t.requestPermission();case 5:return e.next=7,t.getToken();case 7:if(n=e.sent,a=localStorage.getItem("".concat("firebaseToken","-").concat(u.default.getUser().id)),n===a){e.next=14;break}return e.next=12,_._getFireBaseToken(n);case 12:e.next=15;break;case 14:t.onTokenRefresh(_._getFireBaseToken);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),g.warn({message:e.t0&&e.t0.message?e.t0.message:JSON.stringify(e.t0)});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},subscribeNotificationsCordova:function(){return(0,o.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_._push=window.PushNotification.init({android:{icon:"ic_notification",iconColor:_.getThemeColor(),messageKey:"body"},browser:{},ios:{alert:!0,badge:!0,sound:!0,clearBadge:!0},windows:{}}),_._push.on("registration",function(){var e=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.registrationId,a=localStorage.getItem("".concat("firebaseToken","-").concat(u.default.getUser().id)),n===a){e.next=5;break}return e.next=5,_._getFireBaseToken(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_._push.on("notification",function(){var e=(0,o.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.additionalData).foreground||(a=h.default.getDeepLink(n),window.location.hash=a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_._push.on("replyMessage",function(){var e=(0,o.default)(i.default.mark((function e(t){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.additionalData).inlineReply||!n.conversationId){e.next=4;break}return e.next=4,E.post(p.default.SEND_MESSAGE,{},{context:null,message:n.inlineReply,conversationId:n.conversationId});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_._push.on("error",(function(e){g.error({message:e.message})}));case 5:case"end":return e.stop()}}),e)})))()},_getFireBaseToken:function(e){return(0,o.default)(i.default.mark((function t(){var n,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.default.isCordova()||e){t.next=5;break}return n=l.default.messaging(),t.next=4,n.getToken();case 4:e=t.sent;case 5:if(a=localStorage.getItem("".concat("firebaseToken","-").concat(u.default.getUser().id)),e===a){t.next=19;break}return t.prev=7,t.next=10,E.post(p.default.SEND_EXTERNAL_TOKEN,{},{token:e},{failOnOffline:!0});case 10:localStorage.setItem("".concat("firebaseToken","-").concat(u.default.getUser().id),e),t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(7),!t.t0||"offline"!==t.t0.message){t.next=17;break}return t.abrupt("return");case 17:localStorage.removeItem("".concat("firebaseToken","-").concat(u.default.getUser().id)),g.warn({message:t.t0&&t.t0.message?t.t0.message:JSON.stringify(t.t0)});case 19:case"end":return t.stop()}}),t,null,[[7,13]])})))()},initializeFirebase:function(){if(_._isPushNotificationsEnabled())try{l.default.initializeApp(c.default.FIREBASE_CONFIG)}catch(e){g.log({message:"failed to init firebase"})}},_isPushNotificationsEnabled:function(){return!u.default.isAnonymous()&&u.default.isFeatureEnabled("pushNotifications")&&!u.default.isLtiSession()&&((window.location.protocol.includes("https")||window.location.origin.includes("localhost"))&&"serviceWorker"in navigator&&u.default.isFeatureEnabled("serviceWorker")||u.default.isCordova()&&window.PushNotification)},unregisterPush:function(){_._isPushNotificationsEnabled()&&u.default.isCordova()&&_._push&&_._push.unregister((function(){localStorage.removeItem("".concat("firebaseToken","-").concat(u.default.getUser().id))}),(function(){localStorage.removeItem("".concat("firebaseToken","-").concat(u.default.getUser().id))}))}},y=_;t.default=y},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(820)).default;t.default=r},,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var r=a(n(287));n(401);var i=r.THEMES;t.THEMES=i;var o=r.default;t.default=o},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(277));n(280);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(106));t.default=function(e,t){return(0,r.default)({},e,t)}},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(105)),s=a(n(909)),l=a(n(13)),u=a(n(53)),c=a(n(28)),d=a(n(21)),f=a(n(57)),p=a(n(232)),h=u.default.LogManager,m=c.default.Instance,v={getAllURLParams:function(){return l.default.getURLParams()},getSite:function(){return l.default.getURLParam("site")||window.location.hostname},setHref:function(e){window.location.href=e},logout:function(e){var t=arguments;return(0,i.default)(r.default.mark((function n(){var a,i,s,u,c,h,m,g;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=!(t.length>1&&void 0!==t[1])||t[1],i=t.length>2&&void 0!==t[2]&&t[2],s=l.default.getSite(),u={},l.default.isCustomDomain()||s===l.default.getSiteFromHostname()||l.default.getSiteFromHostname()===d.default.GENERIC_LOGIN_SITE_NAME||(u.site=s),(c=l.default.getURLParams()).backend_url&&(u.backend_url=c.backend_url,delete c.backend_url),c.assets_prefix&&(u.assets_prefix=c.assets_prefix,delete c.assets_prefix),c.f2f_url&&(u.f2f_url=c.f2f_url,delete c.f2f_url),c.utm_context&&delete c.utm_context,h=l.default.jsonToQueryParams(u),delete c.site,delete c.access_token,(0,o.default)(c)?sessionStorage.removeItem("loginURLParams"):sessionStorage.setItem("loginURLParams",JSON.stringify({urlParams:c,timestamp:(new Date).getTime()})),l.default.removeTermsOfUseAccepted(),e&&(m=l.default.getHash())&&sessionStorage.setItem("loginHash",JSON.stringify({hash:m,timestamp:(new Date).getTime()})),p.default.unregisterPush(),n.next=19,p.default.unregisterServiceWorker();case 19:g=a?f.default.POST_LOGOUT:void 0,(i?Promise.resolve():l.default.invalidateToken(g)).then((function(){var e,t,n=null===(e=l.default.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t?void 0:t.logoutExternalLocationURL;if(n)window.location=n;else{var a=l.default.getAppdata().appConf.logoutRedirectURL?"logout.html":"login.html";v.setHref("".concat(a).concat(h))}}));case 22:case"end":return n.stop()}}),n)})))()},initLogger:function(e,t){var n={userAgent:navigator.userAgent,userId:e,appId:"Echo",appVersion:"0.6908.0"},a=t,r=f.default.LOGGER_URL;h.registerLogger("echo",n,a,{default_tag:"default_tag value"},r)},shouldLoadWalkme:function(e){return e&&e.featureFlags&&e.featureFlags.walkmeEnabled?e.walkme&&e.walkme.id?(h.debug("echo",{message:"Walkme is enabled here, with id : ".concat(e.walkme.id)}),!0):(h.error("echo",{message:"Walkme initiation not started - it is enabled, but no id was configured, check your appConfig configurations pls under appConf.walkme.id"}),!1):(h.debug("echo",{message:"Walkme is not enabled"}),!1)},getWalkmeVariables:function(e){var t,n,a;return{selfService:null==e||null===(t=e.accountDetails)||void 0===t?void 0:t.isSelfService,instructor:l.default.isInstructor(),editor:l.default.isEditor(),learner:l.default.isLearner(),userId:null==e||null===(n=e.userDetails)||void 0===n?void 0:n.id,email:null==e||null===(a=e.userDetails)||void 0===a?void 0:a.email}},sendToServer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=e.requestData;if(n&&n.method){var a,r=n.method.toLowerCase();switch(r){case"get":a=[n.url,n.params,n.config];break;case"delete":r="remove",a=[n.url,n.params,n.config];break;case"put":case"post":a=[n.url,n.params,e.messageData,n.config];break;default:return h.warn("Echo",{message:"sendToServer, send message to server - unsupported method sent: ".concat(r)}),void t()}m[r].apply(null,a).then((function(e){t({data:e})})).catch((function(e){t({error:e})}))}else t({error:""})},idleLogout:function(){var e=l.default.getCurrentToken();if(l.default.isFeatureEnabled("idleLogout")&&!e.isRememberMe){var t,n,a=60*l.default.getAppdata().appConf.idleLogout.minutes*1e3,r=!1;(0,s.default)({callback:function(){r=!0,t=setTimeout((function(){t=void 0,v.logout()}),5e3),"BroadcastChannel"in window&&n&&n.postMessage({cmd:"get-idle-state",tabId:l.default.getTabId(),userId:l.default.getUser().id})},activeCallback:function(){r=!1},idleTime:a}),"BroadcastChannel"in window&&(n=new BroadcastChannel("idle-logout-".concat(l.default.getSite()))).addEventListener("message",(function(e){var a=e.data,i=a.cmd,o=a.userId,s=a.tabId,u=a.idle;"get-idle-state"===i&&o===l.default.getUser().id&&l.default.getTabId()!==s&&n.postMessage({cmd:"idle-state",tabId:l.default.getTabId(),userId:l.default.getUser().id,idle:r}),"idle-state"===i&&o===l.default.getUser().id&&l.default.getTabId()!==s&&!u&&t&&(clearTimeout(t),t=void 0)}),!0)}}},g=v;t.default=g},,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1),i=r(n(281)),o=r(n(485)),s=r(n(897)),l=r(n(899)),u=a(n(54)),c=a(n(192));n(908),i.default.TaskGroup=o.default,i.default.TaskGroupEdit=s.default,i.default.OverlayTaskGroup=l.default,i.default.TASK_TYPE=u,i.default.TASK_GROUP_PLAYER_VIEW_TYPES=c,e.exports=i.default},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(717));n(719);var i=r.default;t.default=i},,function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.INPUT_TYPES_KEYS=t.INPUT_TYPES=t.FWAnswerType=t.paragraphSizeModes=void 0;var i,o,s,l,u=a(n(40)),c=a(n(9)),d=a(n(29)),f=a(n(3)),p=a(n(4)),h=a(n(30)),m=(a(n(31)),n(20)),v=a(n(113)),g=a(n(13)),E=n(55),_=n(102),y=n(54),k=n(103),S=r(n(115));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={SHORTPARAGRAPH:1,LONGPARAGRAPH:2};t.paragraphSizeModes=C;var I={ENABLE_TOOLBAR:(0,v.default)(),PARAGRAPH_SIZE_MODE:(0,v.default)(),INSTRUCTOR_ANSWER:(0,v.default)(),CHECKABLE_TASK:(0,v.default)(),FREE_TEXT:(0,v.default)(),UPLOAD_FILE:(0,v.default)(),INPUT_TYPES:(0,v.default)(),PLAGIARISM_SCAN:(0,v.default)()},O={DEFAULT:y.DEFAULT_SUBTYPE,CHECKABLE:y.FREE_WRITING_SUBTYPE_CHECKABLE,INSTRUCTOR_ANSWER:y.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER,E_SIGNATURE:y.FREE_WRITING_SUBTYPE_E_SIGNATURE};t.FWAnswerType=O;var A={FILE:"file",TEXT:"text"};t.INPUT_TYPES=A;var N={TEXT:"0",FILE:"1"};t.INPUT_TYPES_KEYS=N;var w=(l=s=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",a=arguments.length>1?arguments[1]:void 0;(0,f.default)(this,e),this.type="FREE_WRITING",this.taskApiForInteractions=void 0,(0,d.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,c.default)(t,I.ENABLE_TOOLBAR,this.enableToolbar.bind(this)),(0,c.default)(t,I.PARAGRAPH_SIZE_MODE,this.paragraphSizeMode.bind(this)),(0,c.default)(t,I.INSTRUCTOR_ANSWER,this.enableInstructorAnswer.bind(this)),(0,c.default)(t,I.CHECKABLE_TASK,this.enableCheckableTask.bind(this)),(0,c.default)(t,I.FREE_TEXT,this.enableFreeText.bind(this)),(0,c.default)(t,I.UPLOAD_FILE,this.enableUploadFile.bind(this)),(0,c.default)(t,I.PLAGIARISM_SCAN,this.enablePlagiarismScan.bind(this)),(0,c.default)(t,I.INPUT_TYPES,this.selectPlagiarismType.bind(this)),t),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.taskApiForInteractions=a,this.initialize(n)}return(0,p.default)(e,null,[{key:"getInteractionActionType",value:function(){return k.SAVE}},{key:"getAnswersTypes",value:function(){return[O.DEFAULT,O.E_SIGNATURE]}}]),(0,p.default)(e,[{key:"setModel",value:function(e){this.data=b(b({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e){this.setData({enableToolbar:!1,paragraphSizeMode:C.SHORTPARAGRAPH,checkingType:e===y.FREE_WRITING_SUBTYPE_CHECKABLE||e===y.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER?_.MANUAL:_.NONE_CHECKABLE,subType:e,inputTypes:[A.FILE,A.TEXT],plagiarismScanType:void 0})}},{key:"enableToolbar",value:function(e){this.setData({enableToolbar:e})}},{key:"enableInstructorAnswer",value:function(e){var t,n=this.data.checkingType;t=e?y.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER:n===_.MANUAL?y.FREE_WRITING_SUBTYPE_CHECKABLE:y.DEFAULT_SUBTYPE,this.setData({checkingType:n,subType:t}),this.taskApiForInteractions.onInteractionCheckableChange(n,t)}},{key:"enableCheckableTask",value:function(e){var t=e?_.MANUAL:_.NONE_CHECKABLE,n=this.data.subType;n!==y.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER&&(n=e?y.FREE_WRITING_SUBTYPE_CHECKABLE:y.DEFAULT_SUBTYPE),this.setData({checkingType:t,subType:n}),this.taskApiForInteractions.onInteractionCheckableChange(t,n),this.taskApiForInteractions.setMaxPoints(e?100:0)}},{key:"enableFreeText",value:function(e){var t;e?(t=[].concat((0,u.default)(this.data.inputTypes),[A.TEXT]),this.setData({inputTypes:t})):this.data.inputTypes.includes(A.FILE)&&(t=this.data.inputTypes.filter((function(e){return e!==A.TEXT})),this.setData({inputTypes:t}))}},{key:"enableUploadFile",value:function(e){var t;e?(t=[].concat((0,u.default)(this.data.inputTypes),[A.FILE]),this.setData({inputTypes:t})):this.data.inputTypes.includes(A.TEXT)&&(t=this.data.inputTypes.filter((function(e){return e!==A.FILE})),this.setData({inputTypes:t}))}},{key:"paragraphSizeMode",value:function(e){this.setData({paragraphSizeMode:e})}},{key:"setGuidelines",value:function(e){this.setData({guidelines:g.default.encodeJWT(e)})}},{key:"getInteractionActionType",value:function(){return k.SAVE}},{key:"enablePlagiarismScan",value:function(e){if(e)this.setData({plagiarismScanType:N.TEXT,inputTypes:[]});else{var t=[A.TEXT,A.FILE];this.setData({plagiarismScanType:void 0,inputTypes:t})}}},{key:"selectPlagiarismType",value:function(e){this.setData({plagiarismScanType:e})}},{key:"getSettingsSchemes",value:function(e,t){if(this.data.subType===y.FREE_WRITING_SUBTYPE_E_SIGNATURE)return[];var n=t.reducedEditorCapabilitiesV2;return[].concat(n?[]:[{id:I.PARAGRAPH_SIZE_MODE,label:e.SELECT_SIZE,values:[{key:C.SHORTPARAGRAPH,value:e.SHORT_TEXT},{key:C.LONGPARAGRAPH,value:e.LONG_TEXT}],currentValue:this.data.paragraphSizeMode,type:S.SINGLE_SELECTION,isSelect:!0},{id:I.ENABLE_TOOLBAR,label:e.ENABLE_TOOLBAR,currentValue:this.data.enableToolbar,type:S.TOGGLE}]).concat(n?[{id:I.INSTRUCTOR_ANSWER,label:e.INSTRUCTOR_ANSWER,currentValue:this.data.subType===y.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER,type:S.TOGGLE,hint:e.INSTRUCTOR_ANSWER_TOOLTIP},{id:I.CHECKABLE_TASK,label:e.CHECKABLE_TASK,currentValue:this.data.checkingType===_.MANUAL,type:S.TOGGLE,hint:e.CHECKABLE_TOOLTIP}].concat(g.default.isFeatureEnabled("antiPlagiarism")?[{id:I.PLAGIARISM_SCAN,label:e.PLAGIARISM_ENABLE,currentValue:!!this.data.plagiarismScanType,type:S.TOGGLE,hint:e.PLAGIARISM_ENABLE_TOOLTIP}].concat(this.data.plagiarismScanType?[{id:I.INPUT_TYPES,label:e.INPUT_TYPES,currentValue:this.data.plagiarismScanType,type:S.SINGLE_SELECTION,values:[e.INPUT_TYPE_TEXT,e.INPUT_TYPE_FILE]}]:[{id:I.FREE_TEXT,label:e.INPUT_TYPE_TEXT,currentValue:this.data.inputTypes.includes(A.TEXT),type:S.TOGGLE,hint:e.INPUT_TYPE_TEXT_TOOLTIP},{id:I.UPLOAD_FILE,label:e.INPUT_TYPE_FILE,currentValue:this.data.inputTypes.includes(A.FILE),type:S.TOGGLE,hint:e.INPUT_TYPE_FILE_TOOLTIP}]):[]):[])}}]),e}(),s.category=E.DEFAULT,i=l,o=(0,h.default)(i.prototype,"data",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{enableToolbar:!1,paragraphSizeMode:C.SHORTPARAGRAPH,checkingType:_.NONE_CHECKABLE,subType:y.DEFAULT_SUBTYPE,guidelines:"",inputTypes:[],plagiarismScanType:void 0}}}),(0,h.default)(i.prototype,"setModel",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,h.default)(i.prototype,"initialize",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),(0,h.default)(i.prototype,"enableToolbar",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enableToolbar"),i.prototype),(0,h.default)(i.prototype,"enableInstructorAnswer",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enableInstructorAnswer"),i.prototype),(0,h.default)(i.prototype,"enableCheckableTask",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enableCheckableTask"),i.prototype),(0,h.default)(i.prototype,"enableFreeText",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enableFreeText"),i.prototype),(0,h.default)(i.prototype,"enableUploadFile",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enableUploadFile"),i.prototype),(0,h.default)(i.prototype,"paragraphSizeMode",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"paragraphSizeMode"),i.prototype),(0,h.default)(i.prototype,"setGuidelines",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setGuidelines"),i.prototype),(0,h.default)(i.prototype,"enablePlagiarismScan",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"enablePlagiarismScan"),i.prototype),(0,h.default)(i.prototype,"selectPlagiarismType",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"selectPlagiarismType"),i.prototype),i);t.default=w},,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var i=r(n(43)),o=a(n(0)),s=(r(n(2)),r(n(11))),l=r(n(13)),u=r(n(18)),c=r(n(278)),d=r(n(279));function f(e){var t,n=e.hideBanner,a=e.isLoginScreen,r=(0,o.useState)(!1),f=(0,i.default)(r,2),p=f[0],h=f[1],m=(0,o.useState)(!1),v=(0,i.default)(m,2),g=v[0],E=v[1],_="prompt-mobile-app-banner",y=function(){var e=l.default.getAppdata(),t=null==e?void 0:e.appConf,n=t&&(l.default.isIos()?t.appStoreUrl:l.default.isAndroid()?t.googlePlayUrl:"");window.open(n,"_blank")};if(a)return o.default.createElement("div",{className:"".concat(_," ").concat(_,"__login")},o.default.createElement("div",{className:"logo-image"}),o.default.createElement("div",{className:"content-wrapper"},o.default.createElement("div",{className:"message"},u.default.translate("prompt-mobile-app.message-login")),o.default.createElement("div",{className:"get-app-button",onClick:y},u.default.translate("prompt-mobile-app.button-text"))));return o.default.createElement("div",{className:(0,s.default)("".concat(_," ").concat(_,"__app"),{minimized:p,"hide-animation":g})},o.default.createElement("div",{className:"prompt-mobile-app-layout"}),o.default.createElement("span",{className:"action-button",onClick:function(){var e;e=function(){p?n():h(!0)},t&&clearTimeout(t),E(!0),t=setTimeout((function(){E(!1),e()}),400)}},p?o.default.createElement(d.default,null):o.default.createElement(c.default,null)),!p&&o.default.createElement("span",{className:"mobile-img"}),o.default.createElement("div",{className:"content-wrapper"},!p&&o.default.createElement("div",{className:"message-1"},u.default.translate("prompt-mobile-app.message-1")),!p&&o.default.createElement("div",{className:"message-2"},u.default.translate("prompt-mobile-app.message-2")),o.default.createElement("div",{className:"get-app-button",onClick:y},"".concat(u.default.translate("prompt-mobile-app.button-text")).concat(p?"!":""))))}f.defaultProps={hideBanner:function(){},isLoginScreen:!1}},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#4EB2CA",fillRule:"evenodd",d:"M35 0c19.33 0 35 15.67 35 35S54.33 70 35 70 0 54.33 0 35 15.67 0 35 0z",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M50.822 27.309L35 41.767 19.178 27.309l-4.883 4.462L35 50.691l20.705-18.92-4.883-4.462z",key:1})])}r.defaultProps={viewBox:"0 0 70 70",width:"70",height:"70"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#4EB2CA",fillRule:"evenodd",d:"M23 0c12.703 0 23 10.297 23 23S35.703 46 23 46 0 35.703 0 23 10.297 0 23 0z",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M34.428 29.196l-3.564 3.518-7.507-7.408-7.506 7.408-3.565-3.518 7.507-7.407-7.082-6.988 3.564-3.518 7.082 6.989 7.082-6.989 3.565 3.518-7.082 6.988 7.506 7.407z",key:1})])}r.defaultProps={viewBox:"0 0 46 46",width:"46",height:"46"},e.exports=r,r.default=r},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n(127));var r=a(n(28));a(n(13));n(1094),n(1095),n(1096),n(549);var i=a(n(679)),o=a(n(896));r.default.Instance;var s={TASK_GROUP_PLAYER_VIEW_TYPES:o.default.TASK_GROUP_PLAYER_VIEW_TYPES,INTERACTION_CATEGORY:o.default.INTERACTION_CATEGORY,INTERACTION_FONT_FAMILIES:o.default.INTERACTION_FONT_FAMILIES,TASK_GROUP_VIEW_MODE:o.default.TASK_GROUP_VIEW_MODE,VIEW_MODE:o.default.TASK_GROUP_VIEW_MODE,TASK_BUTTONS:o.default.TASK_BUTTONS,getApi:function(e,t){var n,a;(n=e).authenticationToken,n.serviceHeaders,n.appData,n.isOnline,(a=e,Promise.resolve(new i.default({envParams:a}))).then((function(e){t(void 0,e)}),(function(e){t(e)}))}};t.default=s},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(9)),u=a(n(3)),c=a(n(12)),d=a(n(4)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=a(n(217)),v=a(n(105)),g=r(n(0)),E=(a(n(2)),a(n(11))),_=n(46),y=n(20),k=r(n(54)),S=n(52),T=n(102),b=n(223),C=r(n(192)),I=n(385),O=a(n(386)),A=n(110),N=r(n(151)),w=r(n(225)),R=a(n(688)),P=n(76),M=a(n(37)),L=a(n(698)),D=a(n(21)),x=a(n(58)),F=a(n(36)),U=a(n(13)),G=a(n(224)),B=a(n(41)),j=a(n(60)),H=a(n(701)),V=r(n(131)),W=n(132),z=a(n(720)),Y=a(n(830)),K=a(n(836)),Q=a(n(837)),X=a(n(838)),q=a(n(839)),Z=n(198),J=n(199),$=n(298),ee=a(n(859)),te=a(n(481)),ne=n(74);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var oe=M.default.isMobile,se=(0,P.InteractionHoc)((function(e){return{mountModal:function(){var t;return(t=e.modalManager).mountModal.apply(t,arguments)},getScoreForStudent:function(){var t;return(t=e.environment).getScoreForStudent.apply(t,arguments)},getEventsContextPromise:e.getEventsContextPromise,defaultSettings:e.defaultSettings,duplicateTags:function(){var t;return(t=e.environment).duplicateTags.apply(t,arguments)},getIsCiResultsHidden:function(){var t;return(t=e.environment).getIsCiResultsHidden.apply(t,arguments)},resetCI:function(){var t;return(t=e.environment).resetCI.apply(t,arguments)},flagInteraction:function(){var t;return(t=e.environment).flagInteraction.apply(t,arguments)},getRandomizedModel:function(){var t;return(t=e.environment).getRandomizedModel.apply(t,arguments)},setRandomizedModel:function(){var t;return(t=e.environment).setRandomizedModel.apply(t,arguments)}}}),{withRef:!0})(i=(0,_.inject)("services")(i=(0,_.observer)((s=o=function(e){(0,f.default)(n,e);var t=ie(n);function n(e){var a,r,i;(0,u.default)(this,n),(i=t.call(this,e)).handleTaskSwipeChange=i.handleTaskSwipeChange.bind((0,c.default)(i)),i.forceHideTaskGroupFooter=i.forceHideTaskGroupFooter.bind((0,c.default)(i)),i.backToQuestionsStudentScore=i.backToQuestionsStudentScore.bind((0,c.default)(i)),i.createTask=i.createTask.bind((0,c.default)(i)),i.duplicateTask=i.duplicateTask.bind((0,c.default)(i)),i.handleOnClickGetScorePopUp=i.handleOnClickGetScorePopUp.bind((0,c.default)(i)),i.getScore=i.getScore.bind((0,c.default)(i)),i.handleTitleChange=i.handleTitleChange.bind((0,c.default)(i)),i.handlePropertyChange=i.handlePropertyChange.bind((0,c.default)(i)),i.onTasksOrderChange=i.onTasksOrderChange.bind((0,c.default)(i)),i.handleTaskBackgroundChange=i.handleTaskBackgroundChange.bind((0,c.default)(i)),i.handleTaskButtonsClick=i.handleTaskButtonsClick.bind((0,c.default)(i)),i.__homePageFirstNavigation=i.__homePageFirstNavigation.bind((0,c.default)(i)),i._updateScroll=i._updateScroll.bind((0,c.default)(i)),i.showUnansweredQuestionsPanel=i.showUnansweredQuestionsPanel.bind((0,c.default)(i)),i.showConfirmSubmitAssessment=i.showConfirmSubmitAssessment.bind((0,c.default)(i)),i.renderConfirmSubmitAssessmentDialog=i.renderConfirmSubmitAssessmentDialog.bind((0,c.default)(i)),i.renderFlagInteractionDialog=i.renderFlagInteractionDialog.bind((0,c.default)(i)),i.handleSubmitAssessmentClicked=i.handleSubmitAssessmentClicked.bind((0,c.default)(i)),i.handleConfirmSubmitAssessmentTaskClick=i.handleConfirmSubmitAssessmentTaskClick.bind((0,c.default)(i)),i.handleConfirmSubmitAssessmentClose=i.handleConfirmSubmitAssessmentClose.bind((0,c.default)(i)),i.handleFlagInteractionDialogClose=i.handleFlagInteractionDialogClose.bind((0,c.default)(i)),i.handleConfirmSubmitAssessmentSubmitClick=i.handleConfirmSubmitAssessmentSubmitClick.bind((0,c.default)(i)),i.handleFlagInteractionSubmitClick=i.handleFlagInteractionSubmitClick.bind((0,c.default)(i)),i.handleAssessmentTryAgainClicked=i.handleAssessmentTryAgainClicked.bind((0,c.default)(i)),i.handleAssessmentTryAgainInPopupClicked=i.handleAssessmentTryAgainInPopupClicked.bind((0,c.default)(i)),i.showFeedbackClick=i.showFeedbackClick.bind((0,c.default)(i)),i.onNextByBlockOneByOne=i.onNextByBlockOneByOne.bind((0,c.default)(i)),i.showBlockingQuestionDialog=i.showBlockingQuestionDialog.bind((0,c.default)(i)),i.hideBlockingQuestionDialog=i.hideBlockingQuestionDialog.bind((0,c.default)(i)),i.renderNextByBlockOneByOne=i.renderNextByBlockOneByOne.bind((0,c.default)(i)),i.renderBlockQuestionDialog=i.renderBlockQuestionDialog.bind((0,c.default)(i)),i.getBlockingQuestionDialogActions=i.getBlockingQuestionDialogActions.bind((0,c.default)(i)),i.navigateToTaskByTaskId=i.navigateToTaskByTaskId.bind((0,c.default)(i)),i.isInteractionBlocked=i.isInteractionBlocked.bind((0,c.default)(i)),i.setTaskStartingTime=i.setTaskStartingTime.bind((0,c.default)(i)),i.preventUserFromAnswering=i.preventUserFromAnswering.bind((0,c.default)(i));var o=i.props,s=o.modelStore,d=(o.taskId,o.services.ConfigurationService),f=o.showTaskGroupReport,p=o.userStateStore;s.taskGroup;i.showAnswers=i.showAnswers.bind((0,c.default)(i)),i.handleTextChangeFlagInteraction=i.handleTextChangeFlagInteraction.bind((0,c.default)(i)),i.structure=n.getTasksStructureByProps(i.props),i.isOneByOneMode=e.taskGroupPlayerViewType===C.ONEBYONE,i.isBlockOneByOneAssessment=i.props.taskGroupPlayerViewType===C.BLOCKONEBYONE,i.isAssessment=d.viewMode===J.viewModeEnum.ASSESSMENT,i.mobileOneByOneStructure=n.getMobileOneByOneTasksStructureByProps(i.props),i.taskNavigatedData={taskNavigatedInitEventSend:!1,taskNavigatedEndEventSend:!1,lastTaskNavigated:n.getLastTaskNavigatedByProps(i.props)},i.showResultsForInstructor=!!i.props.taskGroupOptions&&i.props.taskGroupOptions.enableShowAnswers;var h=i.isAssessment&&i.props.canCiResultsBeHidden&&U.default.isLearner();i.state={ciResultsHidden:h,showAnswers:U.default.isEditor()&&(null===(a=i.props)||void 0===a||null===(r=a.taskGroupOptions)||void 0===r?void 0:r.showAnswers),movedToScorePageInBlockAssessmentMode:!1,disableNextInteraction:!1,focusedTask:"",showFlagInteractionDialog:!1,showFlagInteractionId:void 0,showFlagInteractionText:""},i.taskWrapperByTaskId={},d.mode===J.modeEnum.PLAYER&&f&&(i.reportsData=i._getReportsData(),i.state.checkableTasks=i.reportsData.checkableTasks,i.state.completedTasks=i.reportsData.completedTasks,i.isAssessment?(p.initializeCompletedTaskCount(),p.initUnAnsweredQuestionsIndex(i.reportsData.checkableQuestionsIds),i.checkAssessmentFullySubmitted()):e.dispatcherManager.addDispatcher(D.default.DISPATCHER_TYPES.CALLBACK,(0,l.default)({},b.ACTION_EVENTS.TASK_COMPLETED,(function(){var e=i.state.completedTasks+1;i.setState({completedTasks:e})})))),i.isBlockingAssessmentSubmitted()?i.lastLocation="":i.lastLocation=n.getLastLocationByProps(i.props);var m=i._getOneByOneTaskIndexById(i.lastLocation);return i.state.showTaskIndex=m,e.forceSubmitPromise&&e.forceSubmitPromise.then((function(){i.handleConfirmSubmitAssessmentSubmitClick()})),i}return(0,d.default)(n,null,[{key:"isMediaTaskType",value:function(e){return"NONE"===(0,O.default)(e)}},{key:"getTasksStructureByProps",value:function(e){var t,n;return e.taskId?(null===(t=e.modelStore.tasks[e.taskId])||void 0===t?void 0:t.parentTaskId)?[null===(n=e.modelStore.tasks[e.taskId])||void 0===n?void 0:n.parentTaskId]:[e.taskId]:e.singleTaskMode&&e.modelStore.taskGroup.structure.taskOrder.length>0?[e.modelStore.taskGroup.structure.taskOrder[0]]:e.modelStore.taskGroup.structure.taskOrder}},{key:"getLastLocationByProps",value:function(e){return e.mode===S.PLAYER&&e.userStateStore&&e.userStateStore.taskGroupState&&e.userStateStore.taskGroupState.data?e.userStateStore.taskGroupState.data.lastLocation:""}},{key:"getLastTaskNavigatedByProps",value:function(e){if(e.mode===S.PLAYER&&e.userStateStore&&e.userStateStore.taskGroupState&&e.userStateStore.taskGroupState.data){var t=e.userStateStore.taskGroupState.data.lastTaskNavigated,a=e.userStateStore.taskStates&&e.userStateStore.taskStates[t];if(a&&!n.checkProgressCompleted(a))return t}return null}},{key:"checkProgressCompleted",value:function(e){if(e&&e.data&&e.data.data&&e.data.data.progress){var t=e.data.data.progress;if(-1!==A.TASK_FINISHED_STATUS_LIST.indexOf(t))return!0}return!1}},{key:"getMobileOneByOneTasksStructureByProps",value:function(e){var t=n.getTasksStructureByProps(e),a=e.taskGroupPlayerViewType===C.ONEBYONE,r=e.taskGroupPlayerViewType===C.BLOCKONEBYONE;return oe&&(a||r)?(!Array.isArray(t)&&t.toJS&&(t=t.toJS()),e.showTaskGroupReport?["title"].concat(t).concat("tg-report-page"):["title"].concat(t)):t}},{key:"isLocationTask",value:function(e){return"title"!==e&&"tg-report-page"!==e}},{key:"getTaskType",value:function(e){var t=e.interactions[e.entry],n=t.type;return t.preset?"".concat(n,"_").concat(t.preset):n}},{key:"sendConfirmSubmitAssessmentMixPanelEvent",value:function(e){B.default.sendEvent(B.default.TITLES.UNANSWERED_QUESTIONS_DIALOG,B.default.COMPONENTS.ASSESSMENT,(0,l.default)({},B.default.PARAMS.USER_ACTION,e))}}]),(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.services.ConfigurationService.mode===J.modeEnum.PLAYER,n=this.props,a=n.isTaskGroupVisible,r=n.showTaskGroupReport;t?(a&&(this.sendTaskNavigatedAtInit(),this.lastLocation&&!this.isOneByOneMode&&this._updateScroll(this.lastLocation)),this.isAssessment&&r&&this.checkAssessmentHasResults()&&this.shouldHideLearnerResults((function(t){e.state.ciResultsHidden!==t&&e.setState((function(){return{ciResultsHidden:t}}))}))):this.disposeStructureOrderObserver=(0,y.observe)(this.props.modelStore.taskGroup.structure.taskOrder,(function(t){var n=t.added.length>0&&t.added[0],a=t.addedCount===t.removedCount;if(n&&!a){var r=e.props.modelStore.tasks;if(r)r[n].data.isSuggested||setTimeout((function(){return e._updateScroll(n)}),0)}})),this._loader.off()}},{key:"isBlockingAssessmentSubmitted",value:function(){var e=this.state.isAssessmentSubmitted;return this.isAssessment&&e&&this.isBlockOneByOneAssessment}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.services.ConfigurationService.mode===J.modeEnum.PLAYER&&(!0===e.isTaskGroupVisible&&!1===this.props.isTaskGroupVisible?this.sendTaskNavigatedAtInit():!1===e.isTaskGroupVisible&&!0===this.props.isTaskGroupVisible&&this.sendTaskNavigatedEndEvent())}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.structure=n.getTasksStructureByProps(e)}},{key:"componentDidUpdate",value:function(){this._loader.off()}},{key:"componentWillUnmount",value:function(){this.props.services.ConfigurationService.mode===J.modeEnum.PLAYER&&this.sendTaskNavigatedEndEvent(),this.disposeStructureOrderObserver&&this.disposeStructureOrderObserver()}},{key:"render",value:function(){var e,t=this.props,n=t.services.ConfigurationService,a=t.overrideTaskGroupBackgroundColor,r=t.taskGroupPlayerViewType,i=t.modelStore,o=n.mode,s=n.singleTaskMode;if(o===J.modeEnum.PLAYER&&!s)switch(r){case C.ONEBYONE:e=this.renderOneByOneView();break;case C.BLOCKONEBYONE:e=this.renderBlockOneByOneView();break;case C.SEQ:default:e=this.renderSequenceView()}else e=r===C.EMBEDDED?this.renderEmbeddedView():this.renderSequenceView();var l=n.isInteractionsThemeV2?null:{backgroundColor:a||i.taskGroup.properties.backgroundColor};return g.default.createElement("div",{"data-unittest-id":"backgroundContainer",className:"t2i-task-group-container",style:l},e,this.renderDialog(),this.renderLoader(),this.renderTaskPanel(),this.renderConfirmSubmitAssessmentDialog(),this.renderFlagInteractionDialog(),this.renderBlockQuestionDialog())}},{key:"renderEmbeddedView",value:function(){var e=this.structure[0];return this.renderTask(e)}},{key:"renderShowAnswerButton",value:function(){var e=this.props.language,t=this.state.showAnswers?e.taskGroup.HIDE_ANSWERS:e.taskGroup.SHOW_ANSWERS;return this.showResultsForInstructor?g.default.createElement(F.default,{onClick:this.showAnswers,theme:"light",type:"secondary",text:t}):null}},{key:"renderSequenceView",value:function(){var e=this,t=this.props,a=t.services.ConfigurationService,r=t.taskList,i=t.language,o=t.showTaskGroupReport,s=t.gamifyMode,l=t.userStateStore,u=t.externalControls,c=t.taskPresentationDisplayType,d=a.hideTaskGroupTitle,f=a.singleTaskMode,p=a.hideToolbar,h=a.mode,m=h===J.modeEnum.PLAYER,v=h===J.modeEnum.EDITOR,_=!f&&m&&o,y=v&&!f&&!p,k=m&&this.isAssessment&&!l.isAssessmentFullyChecked,S={};this.props.scale&&this.props.scale>0&&(S.transform="scale(".concat(this.props.scale,")"),S.transformOrigin="left top"),d&&!f&&(S={paddingTop:"85px"});var T=m?this.isAssessment?l.completedTasks:this.state.completedTasks:"",b=m&&this.isAssessment?l.unCompletedTasksIndexes:"",C=!(!this.props.taskGroupOptions||!this.props.taskGroupOptions.enableAssessmentTryAgain),I=null;u&&(I=u.task_group_bottom);var O=(0,E.default)("ttk-task-group",{"single-task-mode":f,"is-editor":v,mobile:oe,gamify:s,"display-overlay":c===D.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY}),A=(0,E.default)("task-group-scroll",{"display-overlay":c===D.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY});return g.default.createElement("div",{className:"t2i-task-group-container"},g.default.createElement("div",{className:A},g.default.createElement("div",{style:S,className:O},this._renderTaskGroupHeader(),this.renderSequenceTasks(),_&&g.default.createElement(R.default,{ref:function(t){e.studentReport=t},popUp:!0,showScore:!0,taskCount:this.state.checkableTasks,completedTasks:T,unCompletedTasksIndexes:b,taskStats:{},language:i.taskGroup.SCORE,backToQuestions:this.handleOnClickGetScorePopUp,getScore:this.getScore,isAssessment:this.isAssessment,isAssessmentSubmitted:this.state.isAssessmentSubmitted,ciResultsHidden:this.state.ciResultsHidden,showAssessmentFinalReport:!k,ltr:this.props.services.ConfigurationService.ltr,handleSubmitAssessmentClicked:this.handleSubmitAssessmentClicked,enableAssessmentTryAgain:C,handleAssessmentTryAgainClicked:this.handleAssessmentTryAgainClicked}),this.renderPoweredBy()),I),y&&g.default.createElement("div",{className:"task-group-header-container"},g.default.createElement(Y.default,{taskList:n.filterInteractionCategoryAndPreset(r),data:this.props.modelStore.taskGroup.properties,onDataChange:this.handlePropertyChange,onAddTask:this.createTask,defaultTaskGroupDialogOpen:0===this.structure.length})))}},{key:"_renderTaskGroupHeader",value:function(){return this.props.services.ConfigurationService.isInteractionsThemeV2?null:g.default.createElement("div",{className:"ttk-task-group-title-wrapper"},this.renderTaskGroupTitle(),this.renderShowAnswerButton())}},{key:"renderSequenceTasks",value:function(){var e=this.props,t=e.services.ConfigurationService,n=e.hideEmptyState,a=t.singleTaskMode,r=t.mode;return r!==S.EDITOR||a||0!==this.structure.length||n&&(!n||n())?r!==S.EDITOR||a||this.structure.length<2?g.default.createElement("div",{className:"tasks-container"},this.renderTasks()):g.default.createElement("div",{className:"tasks-container"},g.default.createElement(H.default,{order:this.structure.map((function(e,t){return t})),onOrderChangeOnlyChangedIndexes:this.onTasksOrderChange},this.renderTasks())):this.renderEditorEmptyState()}},{key:"renderEditorEmptyState",value:function(){var e=this.props.language.interaction.empty.state;return g.default.createElement("div",{className:"interactions-zero-state"},g.default.createElement("div",{className:"interactions-zero-state--first-line"},e.first.line),g.default.createElement("div",{className:"interactions-zero-state--second-line"},e.second.line),g.default.createElement(ne.BigArrowIcon,null))}},{key:"renderTasks",value:function(){var e=this,t=this.props,n=t.services.ConfigurationService,a=t.language,r=t.overrideTasksBackgroundColor,i=t.modelStore,o=t.userStateStore,s=t.taskButtons,l=t.taskGroupServerData,u=t.externalControls,c=t.highlightedTasks,d=n.singleTaskMode,f=n.taskStartingIndex,p=n.mode,h=n.featureFlags,v=n.isInteractionsThemeV2,E=n.reducedEditorCapabilitiesV2,_=i.tasks,y=o?o.taskStates:{},k=p===S.PLAYER,T=p===S.EDITOR,b=i.taskGroup.properties.displayNumbering,C=i.taskGroup.properties.displayQuestion,I=!T&&!b&&!C,O=this.state.focusedTask;return this.structure.map((function(t,n){var o=_[t];if(!o)return null;var p=y&&y[t]?y[t]:void 0,S=s?e.buildTaskButtonsObj(t,f+n):void 0,C=!!(0,m.default)(c,(function(e){return e.id===t})),A=!1;T&&l&&l.tasks&&l.tasks[t]&&(A=l.tasks[t].data.hasTags);var N=z.default.getSettingsSchemes(o,p,a,e.buildTaskSettingsSchemaConfiguration()),w=u&&u[t]?u[t]:null,R=o.data.isSuggested,P=!R&&O===t,M=e.shouldShowFeedbackButton(p,o);return g.default.createElement(q.default,{ref:function(n){e.taskWrapperByTaskId[t]=n},key:t,taskId:t,language:a.task,viewOnly:k,removePaddings:I,isHighlightedTask:C,taskActions:{onDeleteTask:!d||i.removeSuggestedTaskOnKeep?function(){return e.showTaskDeleteConfirmationDialog(t)}:void 0,onRemoveFromSuggested:function(){return e.removeFromSuggested(t)},onFlagTask:function(){return e.flagTask(t)},onDuplicateTask:d?void 0:function(){return e.duplicateTask(t)},onBackgroundColorChange:function(n){e.handleTaskBackgroundChange(t,n)},handleTaskOpacityChange:function(n){e.handleTaskOpacityChange(t,n)},defaultBackgroundColor:r||o.data.backgroundColor,customBar:{language:a.task,schema:N,onSettingsChange:function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e.handleSettingsChange.apply(e,[t].concat(a))},hasTags:A},suggestedActionsStyle:i.removeSuggestedTaskOnKeep?"-style2":""},taskType:o.data.taskType,subType:o.data.subType,backgroundColor:r||o.data.backgroundColor,opacity:o.data.opacity,taskNumbering:b?{taskNumber:f+n}:void 0,taskButtons:S,getEventsContextPromise:e.props.getEventsContextPromise,index:n,lazyLoad:!0,externalControl:w,disableDragOrdering:e.props.disableDragOrdering,scoreToDisplay:e.getTaskScore(t),focusClass:P,isSuggested:R,showFlagInteractionButton:e.props.showFlagInteractionButton,videoIframeOrigin:e.props.videoIframeOrigin,availableOffline:e.props.availableOffline,addShowFeedbackButton:M,showFeedbackClick:e.showFeedbackClick,featureFlags:h,closeOverlayTaskGroup:e.props.closeOverlayTaskGroup,preventSwipeOnScroll:e.props.preventSwipeOnScroll,isInteractionsThemeV2:v,reducedEditorCapabilitiesV2:E,taskPresentationDisplayType:e.props.taskPresentationDisplayType,taskPresentationProperties:e.props.taskPresentationProperties},e.renderTask(t,n))}))}},{key:"shouldShowFeedbackButton",value:function(e,t){var n=this.props.userStateStore;return!!n&&(n.isAssessment()?this.state.isAssessmentSubmitted&&!(0,v.default)(t.data.feedback)&&e.data.data.progress!==A.ASSESSMENT_UNANSWERED&&!this.state.ciResultsHidden:e.data.data.progress&&!(0,v.default)(t.data.feedback))}},{key:"showFeedbackClick",value:function(e){this._getTaskInstance(e).toggleFeedback()}},{key:"renderOneByOneView",value:function(){return oe?this.renderOneByOneMobile():this.renderOneByOneNotMobile()}},{key:"renderBlockOneByOneView",value:function(){return oe?this.renderBlockOneByOneMobile():this.renderBlockOneByOneDesktop()}},{key:"renderBlockOneByOneDesktop",value:function(){var e=this.props,t=e.services.ConfigurationService,n=e.showTaskGroupReport,a=t.mode===J.modeEnum.PLAYER&&n;return g.default.createElement("div",{className:"block-one-by-one-wrapper"},g.default.createElement("div",{className:"block-one-by-one-scroll"},g.default.createElement("div",{tabIndex:"-1",className:"ttk-task-group block-one-by-one one-by-one"},g.default.createElement("div",{className:"block-one-by-one-tasks-area"},g.default.createElement("div",{className:"tasks-container"},this.renderOneByOneTasks(),a&&this.renderStudentScore())))),!this.state.movedToScorePageInBlockAssessmentMode&&g.default.createElement("div",{className:"block-one-by-one-tasks-footer"},this.renderNextByBlockOneByOne(!a)))}},{key:"renderBlockOneByOneMobile",value:function(){var e=this,t=this.props,n=t.services.ConfigurationService,a=t.showTaskGroupReport,r=n.mode,i=!this.state.hideFooter,o=r===J.modeEnum.PLAYER&&a;return g.default.createElement("div",{tabIndex:"-1",className:"ttk-task-group one-by-one mobile"},g.default.createElement("div",{className:"tasks-container tasks-swipe-mobile-container"},g.default.createElement(L.default,{ref:function(t){e.swiper=t?t.getWrappedInstance():t},slideStartIndex:this.state.showTaskIndex,onChildChange:this.handleTaskSwipeChange,isInteractionBlocked:this.isInteractionBlocked,language:this.props.language,showBlockingQuestionDialog:this.showBlockingQuestionDialog,hideBlockingQuestionDialog:this.hideBlockingQuestionDialog,showNavigation:i,isBlockingQuestionMode:!0,lazyRendering:!0},this.renderMobileInitPage(),this.renderOneByOneTasks(),o?this.renderStudentScore():[])))}},{key:"renderNextByBlockOneByOne",value:function(e){var t=this.props.language,n=this.state.showTaskIndex===this.structure.length,a=t.taskGroup.BLOCKING_QUESTIONS.ASSESSMENT.CONTINUE;return e&&this.state.showTaskIndex+1===this.structure.length?null:n?(this.setState({movedToScorePageInBlockAssessmentMode:!0}),null):g.default.createElement(F.default,{onClick:this.onNextByBlockOneByOne,type:"primary",text:a})}},{key:"onNextByBlockOneByOne",value:function(){this.isInteractionBlocked()?this.showBlockingQuestionDialog(this.getBlockingQuestionDialogActions()):this.navigateToTask(1)}},{key:"showBlockingQuestionDialog",value:function(e){this.actions=e,this.setState({disableNextInteraction:!0})}},{key:"hideBlockingQuestionDialog",value:function(){this.setState({disableNextInteraction:!1})}},{key:"isInteractionBlocked",value:function(){if(!this.isBlockOneByOneAssessment)return!1;var e,t=this.props,a=t.modelStore,r=t.userStateStore,i=this.state,o=i.showTaskIndex,s=i.isAssessmentSubmitted,l=void 0!==o?o:0;if(oe){if(0===l||l===this.mobileOneByOneStructure.length-1)return!1;e=this.mobileOneByOneStructure}else e=this.structure;var u=e[l];return!!u&&(!(this.isAssessment&&s||n.isMediaTaskType(a.tasks[u].interaction)||!r.getUnansweredQuestionsIds().includes(u))&&!1!==r.taskStates[u].isEnabled)}},{key:"getBlockingQuestionDialogActions",value:function(){var e=this,t=this.props.language;return[{id:"back",text:t.taskGroup.BLOCKING_QUESTIONS_DIALOG.BACK,type:x.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.hideBlockingQuestionDialog()}},{id:"yes",text:t.taskGroup.BLOCKING_QUESTIONS_DIALOG.CONFIRM,type:x.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.navigateToTask(1),e.hideBlockingQuestionDialog()}}]}},{key:"renderBlockQuestionDialog",value:function(){if(!this.state.disableNextInteraction)return null;var e=this.props.language,t=g.default.createElement("div",null,g.default.createElement("div",null,e.taskGroup.BLOCKING_QUESTIONS_DIALOG.MESSAGE.PREFIX),g.default.createElement("div",{className:"blocking-question-bold-message"},e.taskGroup.BLOCKING_QUESTIONS_DIALOG.MESSAGE.SUFFIX));return g.default.createElement(x.default,{theme:x.default.THEMES.LIGHT,title:e.taskGroup.BLOCKING_QUESTIONS_DIALOG.TITLE,content:t,actions:this.actions})}},{key:"renderOneByOneNotMobile",value:function(){var e=!this.state.hideFooter;return g.default.createElement("div",{tabIndex:"-1",className:"ttk-task-group one-by-one"},this.renderTaskGroupTitle(),e&&this.renderOneByOneFooter(),g.default.createElement("div",{className:"tasks-container"},this.renderOneByOneTasks(),this.props.showTaskGroupReport&&this.renderStudentScore()))}},{key:"renderOneByOneMobile",value:function(){var e=this,t=!this.state.hideFooter;return g.default.createElement("div",{tabIndex:"-1",className:"ttk-task-group one-by-one mobile"},g.default.createElement("div",{className:"tasks-container tasks-swipe-mobile-container"},g.default.createElement(L.default,{ref:function(t){e.swiper=t?t.getWrappedInstance():t},slideStartIndex:this.state.showTaskIndex,onChildChange:this.handleTaskSwipeChange,showNavigation:t,lazyRendering:!0},this.renderMobileInitPage(),this.renderOneByOneTasks(),this.props.showTaskGroupReport?this.renderStudentScore():[])))}},{key:"renderOneByOneFooter",value:function(){var e=this,t=this.props,n=t.services.ConfigurationService,a=t.showTaskGroupReport,r=n.ltr,i=a&&"tg-report-page"===this.mobileOneByOneStructure[this.state.showTaskIndex],o=this.mobileOneByOneStructure[this.state.showTaskIndex]===this.structure[this.structure.length-1],s=i||!a&&o,l=0===this.state.showTaskIndex;return g.default.createElement(Q.default,{ltr:r,onPreviousClick:l?void 0:function(){return e.navigateToTask(-1)},onNextClick:s?void 0:function(){return e.navigateToTask(1)}})}},{key:"renderStudentScore",value:function(){var e=this,t=this.props.userStateStore,n=this.isAssessment&&!t.isAssessmentFullyChecked,a=this.isAssessment?t.completedTasks:this.state.completedTasks,r=!(!this.props.taskGroupOptions||!this.props.taskGroupOptions.enableAssessmentTryAgain);return g.default.createElement(R.default,{ref:function(t){e.studentReport=t},language:this.props.language.taskGroup.SCORE,popUp:!1,taskCount:this.state.checkableTasks,completedTasks:a,taskStats:{},getScore:this.getScore,forceHideTaskGroupFooter:this.forceHideTaskGroupFooter,backToQuestions:this.backToQuestionsStudentScore,isAssessment:this.isAssessment,isAssessmentSubmitted:this.state.isAssessmentSubmitted,ciResultsHidden:this.state.ciResultsHidden,showAssessmentFinalReport:!n,ltr:this.props.services.ConfigurationService.ltr,handleSubmitAssessmentClicked:this.handleSubmitAssessmentClicked,enableAssessmentTryAgain:r,handleAssessmentTryAgainClicked:this.handleAssessmentTryAgainClicked})}},{key:"renderMobileInitPage",value:function(){var e=this.props.language.taskGroup,t=this.props.services.ConfigurationService.ltr?"t2kInt-icon-swipe-left":"t2kInt-icon-swipe-right";return g.default.createElement("div",{className:"t2i-taskgroup-mobile-init-page"},this.renderTaskGroupTitle(),g.default.createElement("div",{className:"swipe-to-start"},g.default.createElement("div",{id:"swipeIcon",className:t,onClick:this.__homePageFirstNavigation}),g.default.createElement("div",{className:"swipe-to-start-text"},e.SWIPE_TO_START)))}},{key:"renderPoweredBy",value:function(){return this.props.services.ConfigurationService.hidePoweredBy||oe?null:g.default.createElement(X.default,null)}},{key:"renderTask",value:function(e,t){var n,a=this,r=this.props,i=r.services.ConfigurationService,o=r.rootWidth,s=r.language,l=r.readOnlyMode,u=r.modelStore,c=r.userStateStore,d=r.persistUserStateEvents,f=r.showSystemAnswers,p=r.scoreModification,h=r.showPollResults,m=r.gamifyMode,v=r.showResults,E=r.hideProgressBar,_=r.externalControls,y=r.videoIframeOrigin,k=r.availableOffline,S=r.pageSizeFactor,T=r.taskButtons,b=r.getEventsContextPromise,C=i.ltr,I=i.mode,O=i.viewMode,A=i.featureFlags,N=i.taskStartingIndex,w=c&&c.taskStates?c.taskStates:{},R=w&&w[e]?w[e]:void 0,P=u.tasks[e],M=[],L=[];(null===(n=P.subtasks)||void 0===n?void 0:n.length)&&(L=this.props.taskId&&this.props.taskId!==e&&u.tasks[this.props.taskId].parentTaskId===e?[this.props.taskId]:P.subtasks,w&&L.forEach((function(e){w[e]&&M.push(w[e])})));var D=_&&_[e]?_[e]:null;return g.default.createElement(z.default,{ref:function(t){t&&(a[e+"InstanceRef"]=t)},taskId:e,rootWidth:o,ltr:C,language:s,mode:I,model:P,showAnswers:this.state.showAnswers,userState:R,subtasksUserStates:M,subtasksToRender:L,displayProgress:!E&&!this.isAssessment,isEnabled:!l,showResults:v,readOnlyMode:l,scoreModification:p,displayQuestion:u.taskGroup.properties.displayQuestion,addEventLog:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.addEventLog.apply(a,[e].concat(n))},sendTaskNavigatedEvent:function(){return a.sendTaskNavigatedEvent.apply(a,arguments)},flushEventLog:function(){var e;return(e=a.props.dispatcherManager).dispatchEvents.apply(e,arguments)},persistUserStateEvents:d,showSystemAnswers:f,gamifyMode:m&&z.default.isInteractionSupportGamify(u.tasks[e]),showPollResults:h,viewMode:O,ciResultsHidden:this.state.ciResultsHidden,extendedFeedback:A.extendedFeedback,externalControl:D,showClimateResult:this.props.showClimateResult,showFlagInteractionButton:this.props.showFlagInteractionButton,hideUserStateOnClimatePoll:this.props.hideUserStateOnClimatePoll,updatedParticipants:this.props.updatedParticipants,videoIframeOrigin:y,availableOffline:k,closeOverlayTaskGroup:this.props.closeOverlayTaskGroup,getTaskGroupActions:this.props.getTaskGroupActions,preventSwipeOnScroll:this.props.preventSwipeOnScroll,taskPresentationDisplayType:this.props.taskPresentationDisplayType,taskPresentationProperties:this.props.taskPresentationProperties,pageSizeFactor:S,taskButtons:T?this.buildTaskButtonsObj(e,N+t):void 0,getEventsContextPromise:b,isSmallEmbeddedItem:this.props.isSmallEmbeddedItem})}},{key:"renderOneByOneTasks",value:function(){var e,t=this,a=this.props,r=a.services.ConfigurationService,i=a.taskButtons,o=a.modelStore,s=a.userStateStore,l=a.overrideTasksBackgroundColor,u=a.language,c=r.taskStartingIndex,d=r.mode,f=r.featureFlags,p=o.tasks||{},h=this.structure,m=oe?0!==this.state.showTaskIndex?this.mobileOneByOneStructure[this.state.showTaskIndex]:"":h[this.state.showTaskIndex],v=o.taskGroup.properties.displayNumbering,E=o.taskGroup.properties.displayQuestion,_=!v&&!E,y=Object.keys(p).length,k=s?s.taskStates:{};return h.map((function(a,r){var o=p[a],s=k&&k[a]?k[a]:void 0,h=t.shouldShowFeedbackButton(s,o);if(a===m&&!n.isMediaTaskType(o.interaction)){var E=t.setTaskStartingTime(m);e={startingTime:E,amountOfTime:o.data.taskMustCompleteQuestionTime,timerFinishedCallback:function(){return t.preventUserFromAnswering(a)}}}return g.default.createElement(q.default,{key:a,taskId:a,ref:function(e){t.taskWrapperByTaskId[a]=e},language:u.task,hideWrapper:!oe&&a!==m,hideProgressBar:m!==a,removePaddings:_,taskNumbering:v?{taskNumber:c+r,taskMaxNumber:y}:void 0,taskActions:{onFlagTask:function(){return t.flagTask(a)}},taskType:o.data.taskType,backgroundColor:l||o.data.backgroundColor,viewOnly:d===S.PLAYER,taskButtons:i?t.buildTaskButtonsObj(a,c+r):void 0,getEventsContextPromise:t.props.getEventsContextPromise,index:r,lazyLoad:!1,scoreToDisplay:t.getTaskScore(a),showFlagInteractionButton:t.props.showFlagInteractionButton,videoIframeOrigin:t.props.videoIframeOrigin,availableOffline:t.props.availableOffline,addShowFeedbackButton:h,showFeedbackClick:t.showFeedbackClick,featureFlags:f,timeCounter:e},t.renderTask(a))}))}},{key:"renderTaskGroupTitle",value:function(){var e=this.props,t=e.services.ConfigurationService,n=t.mode,a=t.singleTaskMode,r=t.hideTaskGroupTitle,i=e.language,o=e.modelStore;return!(a||r)?g.default.createElement(K.default,{value:o.taskGroup.properties.title,onDoneEditing:this.handleTitleChange,readonly:n===S.PLAYER,placeholder:i.taskGroup.TASK_TITLE}):null}},{key:"renderDialog",value:function(){var e=this,t=this.props,n=t.services,a=n.ConfigurationService.ltr,r=n.ConfirmDialogService,i=t.language;if(!r.displayDialog)return null;var o=i.taskGroup.DIALOGS[r.type]||{},s=[{id:"done",text:o.OK_BUTTON,type:x.default.BUTTON_TYPES.PRIMARY,onClick:function(){r.action&&r.action(),e.removeErrorDialog()}}];return r.allowCancel&&s.push({id:"cancel",text:o.CANCEL_BUTTON,type:x.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.removeErrorDialog()}}),g.default.createElement("div",{className:"interactions-modal"},g.default.createElement("div",{className:"interactions-modal-content"},g.default.createElement("div",{className:"conformation-dialog-wrapper ".concat(a?"ltr":"rtl")},g.default.createElement(x.default,{theme:x.default.THEMES.LIGHT,title:o.TITLE,content:o.MESSAGE,actions:s}))))}},{key:"renderLoader",value:function(){var e=this;return g.default.createElement(j.default,{ref:function(t){e._loader=t},isLoading:this.props.services.LoaderService.displayLoader})}},{key:"renderTaskPanel",value:function(){var e=this,t=this.props,n=t.services.ConfigurationService,a=n.mode,r=n.ltr,i=t.userStateStore,o=t.modelStore,s=t.language,l=a===J.modeEnum.PLAYER;if(!this.shouldRenderTaskPanel(l))return null;var u=l?i:o,c=this.isOneByOneMode,d=o.taskGroup.structure.taskOrder.length,f=this.props.services.randomizeService.tagChanged||0;return g.default.createElement(ee.default,{ltr:r,store:u,handleTaskClick:function(t){e.handleTaskListPanelClick(t)},isPlayer:l,handleSubmitAssessmentClicked:this.handleSubmitAssessmentClicked,ref:function(t){e._taskListPanel=t},centeredControl:this.isOneByOneMode,isListVisible:!this.isOneByOneMode,language:s.taskGroup.TASK_PANEL,closePanelOnItemClick:c,taskTypeStrings:s.taskGroup.TASK_TYPES,taskGroupId:this.props.modelStore.taskGroup.id,taskGroupVersion:this.props.modelStore.taskGroup.version,getRandomizedModel:this.props.getRandomizedModel,setRandomizedModel:this.props.setRandomizedModel,numberOfTasks:d,tagDateChanged:f})}},{key:"showAnswers",value:function(){this.setState({showAnswers:!this.state.showAnswers})}},{key:"removeErrorDialog",value:function(){this.props.services.ConfirmDialogService.displayDialog&&this.props.services.ConfirmDialogService.closeDialog()}},{key:"setTaskStartingTime",value:function(e){var t,n=this.props.userStateStore;return n.isMustCompleteQuestionsWithTimeSettings()&&!n.isTaskHaveStartingTime(e)?(t=Date.now(),n.setTaskStartingTime(e,t)):t=n.getTaskStartingTime(e),t}},{key:"assessmentTaskAnswered",value:function(e){var t=this.props.userStateStore.taskStates[e],n=t&&t.data&&t.data.data;return!n||n.progress!==A.ASSESSMENT_UNANSWERED}},{key:"handleTitleChange",value:function(e){this.handlePropertyChange("title",e)}},{key:"onTasksOrderChange",value:function(e,t){this.props.modelStore.changeTasksOrder(e,t)}},{key:"forceHideTaskGroupFooter",value:function(){this.setState({hideFooter:!0})}},{key:"backToQuestionsStudentScore",value:function(){if(this.setState({hideFooter:!1,movedToScorePageInBlockAssessmentMode:!1}),this.isBlockOneByOneAssessment){var e=this.props.modelStore.taskGroup.structure.taskOrder[0];this._updateScroll(e)}else this.swiper?this.swiper.slidePrev():this.navigateToTask(-1)}},{key:"getScore",value:function(e){var t=this;this.props.getEventsContextPromise().then((function(n){t.props.getScoreForStudent(t.props.modelStore.taskGroup.id,t.props.modelStore.taskGroup.version,t.props.userId,n.data.contentItemId,e)}))}},{key:"handleOnClickGetScorePopUp",value:function(){var e=this;this._onUnmountScoreModal?this._unmountScoreModal():this.getScore((function(t,n){if(t)throw new Error("error with score from server");var a=!(!e.props.taskGroupOptions||!e.props.taskGroupOptions.enableAssessmentTryAgain);e._unmountScoreModal(),e._onUnmountScoreModal=e.props.mountModal({modalElement:g.default.createElement(R.default,{popUp:!0,showScoreDetails:!0,score:n.score,taskCount:n.tasksCountWithNoneCheckable,taskStats:n.taskStats,completedTasks:n.completedTasksWithNoneCheckable,language:e.props.language.taskGroup.SCORE,backToQuestions:e.handleOnClickGetScorePopUp,isAssessment:e.isAssessment,isAssessmentSubmitted:e.state.isAssessmentSubmitted,getScore:e.getScore,ltr:e.props.services.ConfigurationService.ltr,enableAssessmentTryAgain:a,handleAssessmentTryAgainClicked:e.handleAssessmentTryAgainInPopupClicked}),modalWrapperProps:{ltr:e.props.services.ConfigurationService.ltr},onModalPostUnmount:function(){e._onUnmountScoreModal=null}})}))}},{key:"handleAssessmentTryAgainInPopupClicked",value:function(){var e=this;this.handleAssessmentTryAgainClicked().then((function(){e._onUnmountScoreModal&&e._unmountScoreModal()}))}},{key:"navigateToTask",value:function(e){var t=this.state.showTaskIndex,n=void 0!==t?t:0,a=void 0!==t?t+e:1;this.setState({showTaskIndex:a}),this._onTaskFocus(this.structure[a],this.structure[n]),this.sendTaskNavigatedEvent(this.structure[a],this.structure[n]),this.props.showTaskGroupReport&&this.structure.length===a&&this.studentReport.showStudentReportPage()}},{key:"navigateToTaskByTaskId",value:function(e){var t=this.structure.indexOf(e);this.studentReport&&this.studentReport.hideStudentReportPage(),this.setState({movedToScorePageInBlockAssessmentMode:!1,showTaskIndex:t}),this.sendTaskNavigatedEvent(this.structure[t])}},{key:"handleTaskSwipeChange",value:function(e,t){var n=this;this.sendTaskNavigatedEvent(this.mobileOneByOneStructure[e],this.mobileOneByOneStructure[t]),this.setState({showTaskIndex:e,hideFooter:!1},(function(){if(n.props.showTaskGroupReport){var a="tg-report-page"===n.mobileOneByOneStructure[e],r="tg-report-page"===n.mobileOneByOneStructure[t];a?n.studentReport.showStudentReportPage():r&&n.studentReport&&n.studentReport.hideStudentReportPage()}n.onFocusAfterNavigate(e,t)}))}},{key:"onFocusAfterNavigate",value:function(e,t){var a;n.isLocationTask(this.mobileOneByOneStructure[t])&&(a=this.mobileOneByOneStructure[t]),this._onTaskFocus(this.mobileOneByOneStructure[e],a)}},{key:"createTask",value:function(e,t){var n=this.props.language.interaction[e];this.props.modelStore.addNewTask(e,t,n)}},{key:"duplicateTask",value:function(e){var t=this,n=this.props.modelStore;this._loader.on(),n.duplicateTask(e,(function(n){var a=n.id;return t.duplicateTags(e,a)}))}},{key:"duplicateTags",value:function(e,t){return this.props.duplicateTags(e,t).catch((function(){console.error("Couldn't duplicate tags")}))}},{key:"handleSettingsChange",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];(t=this._getTaskInstance(e)).callSchemaFunction.apply(t,a)}},{key:"handlePropertyChange",value:function(e,t){this.props.modelStore.setTaskGroupProperty(e,t)}},{key:"handleTaskBackgroundChange",value:function(e,t){this.props.modelStore.tasks[e].setTaskTheme({backgroundColor:t})}},{key:"handleTaskOpacityChange",value:function(e,t){this.props.modelStore.tasks[e].setTaskOpacity(t)}},{key:"handleTaskButtonsClick",value:function(e){this.props.taskButtons&&this.props.taskButtons.callback&&this.props.taskButtons.callback(e,arguments.length<=1?void 0:arguments[1])}},{key:"showTaskDeleteConfirmationDialog",value:function(e){var t=this;this.props.services.ConfirmDialogService.showDialog($.DELETE_TASK,(function(){t.deleteTask(e)}),!0)}},{key:"deleteTask",value:function(e){this.props.modelStore.removeSuggestedTaskOnKeep&&this.props.modelStore.removeSuggestedTaskOnKeep("delete"),this.props.modelStore.removeTask(e)}},{key:"removeFromSuggested",value:function(e){var t=this.props.modelStore.tasks[e],n=t.getTaskData();this.props.modelStore.removeSuggestedTaskOnKeep?(this.props.modelStore.removeSuggestedTaskOnKeep("keep"),this.props.modelStore.removeTask(e),this.props.modelStore.onTaskRemovedFromSuggested(e,re({},n))):(t.setIsSuggested(!1),this.props.modelStore.onTaskRemovedFromSuggested(e))}},{key:"flagTask",value:function(e){this.setState({showFlagInteractionDialog:!0,showFlagInteractionId:e}),B.default.sendEvent(B.default.TITLES.CLICK_FEEDBACK,B.default.COMPONENTS.CI_PLAYER)}},{key:"buildEventDispatcherData",value:function(){return{type:"TG_PLAYER",id:this.props.modelStore.taskGroup.id,version:this.props.modelStore.taskGroup.version}}},{key:"buildTaskButtonsObj",value:function(e,t){var a,r=this,i=this.props,o=i.taskButtons,s=i.modelStore,l=n.getTaskType(s.tasks[e].interaction);if(o.type===w.SHOW&&z.default.isInteractionSupportGamify(s.tasks[e])){var u={taskId:e,taskType:l,taskVersion:s.tasks[e].version,taskGroupId:s.taskGroup.id,taskGroupVersion:s.taskGroup.version,taskIndex:t};a=re(re({},o),{},{callback:o.callback?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.handleTaskButtonsClick.apply(r,[u].concat(t))}:void 0})}else o.type===w.CUSTOM&&(a=re({},o));return a}},{key:"addEventLog",value:function(e,t,n,a,r){var i={eventData:e?this._getTaskDataById(e):{}};Object.assign(i,{dispatcher:this.buildEventDispatcherData()}),r&&Object.assign(i.eventData,r),this.props.dispatcherManager.addEventLog(t,i,n,a)}},{key:"_updateScroll",value:function(e){var t=oe&&this.isBlockOneByOneAssessment;if(this.isOneByOneMode||t){var n=this._getOneByOneTaskIndexById(e);this.swiper&&this.swiper.slideToIndex(n)}else if(this.isBlockOneByOneAssessment)e&&this.navigateToTaskByTaskId(e);else{var a=this.taskWrapperByTaskId[e];a&&a.scrollIntoView(),this.onTaskFocus(e)}}},{key:"onTaskFocus",value:function(e){var t=this;this.isOneByOneMode||this.setState({focusedTask:e},(function(){setTimeout((function(){t.setState({focusedTask:""})}),5e3)}))}},{key:"_shouldShowFooter",value:function(){return!oe||"title"!==this.mobileOneByOneStructure[this.state.showTaskIndex]}},{key:"getNextTaskId",value:function(e){for(var t=this.props.modelStore.taskGroup.structure.taskOrder,n=null,a=0;a<t.length;a++)t[a]===e&&(n=a);return null!==n&&void 0!==t[n+1]?t[n+1]:null}},{key:"_getOneByOneTaskIndexById",value:function(e){var t=oe?this.mobileOneByOneStructure:this.structure;return(this.isOneByOneMode||this.isBlockOneByOneAssessment)&&t.indexOf(e)>-1?t.indexOf(e):0}},{key:"_getTaskInstance",value:function(e){var t=this[e+"InstanceRef"],n=t&&t.getWrappedInstance();return n&&n.wrappedInstance}},{key:"_onTaskFocus",value:function(e,t){this.taskNavigatedData.lastTaskNavigated!==e&&this.sendTaskNavigatedEvent(e,this.taskNavigatedData.lastTaskNavigated);var a=this.props.userStateStore.taskGroupState;if(e&&this.lastLocation!==e&&n.isLocationTask(e)&&(this.props.gamifyMode||a.setLastLocation(e),this.lastLocation=e),t){var r=this._getTaskInstance(t);r&&r.componentLostFocus()}}},{key:"sendTaskNavigatedAtInit",value:function(){this.taskNavigatedData.taskNavigatedInitEventSend||this.shouldTaskNavigatedAtInit(null)}},{key:"shouldTaskNavigatedAtInit",value:function(e){if(oe)this.sendTaskNavigatedMobile(e);else{var t=this.props.modelStore.taskGroup.structure.taskOrder[0],n=this.taskNavigatedData.lastTaskNavigated||t;this.taskNavigatedData.taskNavigatedInitEventSend=!0,this.sendTaskNavigatedEvent(n,e)}}},{key:"sendTaskNavigatedMobile",value:function(e){this.taskNavigatedData.lastTaskNavigated&&(this.taskNavigatedData.taskNavigatedInitEventSend=!0,this.sendTaskNavigatedEvent(this.taskNavigatedData.lastTaskNavigated,e))}},{key:"sendTaskNavigatedEndEvent",value:function(){var e=this.taskNavigatedData.lastTaskNavigated?this.taskNavigatedData.lastTaskNavigated:this.props.modelStore.taskGroup.structure.taskOrder[0];!this.taskNavigatedData.taskNavigatedEndEventSend&&this.taskNavigatedData.taskNavigatedInitEventSend&&(this.taskNavigatedData.taskNavigatedEndEventSend=!0,this.sendTaskNavigatedEvent(null,e))}},{key:"sendTaskNavigatedEvent",value:function(e,t,a){var r=this,i=this.props,o=i.persistUserStateEvents,s=i.getEventsContextPromise,l=i.gamifyMode;if(this.isAssessment&&!l){if(void 0===e&&oe&&this.isOneByOneMode)return;o&&s().then((function(i){var o={taskInId:void 0===e?r.getNextTaskId(t):n.isLocationTask(e)?e:null,taskOutId:n.isLocationTask(t)?t:null};o.taskInId!==o.taskOutId&&r.sendEventLogTaskNavigated(o,a,i)}))}}},{key:"sendEventLogTaskNavigated",value:function(e,t,n){var a={};null!==e.taskInId&&this.taskNavigatedData.lastTaskNavigated!==e.taskInId&&(this.saveLastTaskNavigatedToUserState(e.taskInId),this.taskNavigatedData.lastTaskNavigated=e.taskInId),a.taskInId=this.getTaskAndTaskVersionStr(e.taskInId),a.taskOutId=this.getTaskAndTaskVersionStr(e.taskOutId);var r=void 0===t||t;this.addEventLog(void 0,b.ACTION_EVENTS.TASK_NAVIGATED,r,n,a)}},{key:"saveLastTaskNavigatedToUserState",value:function(e){this.props.gamifyMode||this.props.userStateStore.taskGroupState.setLastTaskNavigated(e)}},{key:"getTaskAndTaskVersionStr",value:function(e){return null==e?null:e.indexOf(":")>-1?e:this.props.modelStore.tasks[e]?"".concat(e,":").concat(this.props.modelStore.tasks[e].version):null}},{key:"buildTaskSettingsSchemaConfiguration",value:function(){var e=this.props,t=e.services.ConfigurationService,n=t.viewMode,a=t.featureFlags,r=t.reducedEditorCapabilitiesV2;return{tags:e.showTagging,feedback:n===N.QUIZ||n===N.ASSESSMENT,attempts:n===N.QUIZ,interaction:{checkableIndication:n===N.QUIZ,reducedEditorCapabilitiesV2:r},extendedFeedback:a.extendedFeedback}}},{key:"_getTaskDataById",value:function(e){var t=this.props.modelStore.tasks[e],n=t.version,a=t.interaction.interactions[t.interaction.entry],r=this.props.userStateStore.getTaskUserStateStore(e),i=r.getTaskAttempts()||1,o=r.getTaskScore(),s=t.data.checkingType||T.NONE_CHECKABLE,l=k[a.type],u={taskId:e,taskType:l,taskTitle:null,taskVersion:n,taskIndex:this.structure.indexOf(e),checkingType:s,attempts:{taken:i,max:t.data.maxAttempts}};return l!==Z.POLL&&l!==Z.MC||(u.optionIds=this.getOptionsIdsArray(e)),l!==Z.POLL&&(u.score={correctness:o,value:o}),u}},{key:"getOptionsIdsArray",value:function(e){var t=this.props.userStateStore,n=[],a=t.taskStates[e]&&t.taskStates[e].data?t.taskStates[e].data:{},r=a.interaction?a.interaction[this.props.modelStore.tasks[e].interaction.entry].answers:{};return(r=r&&r.toJS?r.toJS():r)&&!Array.isArray(r)?(Object.keys(r).map((function(e){return n.push(e)})),n):r||n}},{key:"_unmountScoreModal",value:function(){this._onUnmountScoreModal&&this._onUnmountScoreModal()}},{key:"_getReportsData",value:function(){var e=this,t=0,a=0,r=[];return this.structure.forEach((function(i){if(!n.isMediaTaskType(e.props.modelStore.tasks[i].interaction)&&(t+=1,r.push(i),e.props.userStateStore.taskStates)){var o=e.props.userStateStore.taskStates[i];n.checkProgressCompleted(o)&&(a+=1)}})),{completedTasks:a,checkableTasks:t,checkableQuestionsIds:r}}},{key:"__homePageFirstNavigation",value:function(e){e.altKey&&this.swiper.slideNext()}},{key:"checkAssessmentFullySubmitted",value:function(){this.reportsData&&this.reportsData.completedTasks===this.reportsData.checkableTasks&&(this.state.isAssessmentSubmitted=!0)}},{key:"checkAssessmentHasResults",value:function(){return this.reportsData&&this.reportsData.completedTasks>0}},{key:"handleAssessmentTryAgainClicked",value:function(){var e=this,t=this.props.modelStore;return this.props.getEventsContextPromise().then((function(t){var n=t.data,a=n.userId,r=n.channelId,i=n.contentItemId,o=n.contentItemVersion;return e.props.resetCI(a,i,o,r)})).then((function(){e.props.userStateStore.reset(),e.setState({isAssessmentSubmitted:!1},(function(){var n=t.taskGroup.structure.taskOrder[0];e._updateScroll(n)})),B.default.sendEvent(B.default.TITLES.CLICK_TRY_AGAIN,B.default.COMPONENTS.ASSESSMENT)}))}},{key:"handleSubmitAssessmentClicked",value:function(){var e=this.props.userStateStore.completedTasks,t=this.state.checkableTasks;this.isBlockOneByOneAssessment||e===t?(this.showUnansweredQuestionsPanel(!1),this.handleSubmitAssessment()):(this.showConfirmSubmitAssessment(!0),this.showUnansweredQuestionsPanel(!1))}},{key:"submitAssessment",value:function(e){var t=this,n=this.props,a=n.userStateStore,r=n.scoreModification,i=n.onAssessmentSubmit,o=n.services.ConfirmDialogService;return new Promise((function(n){t.shouldHideLearnerResults((function(s){t.setState((function(){return{ciResultsHidden:s}})),a.handleCheckAssessmentClick(r,e).then((function(){t.setState((function(){return{isAssessmentSubmitted:!0}}))})).catch((function(){o.showDialog($.SUBMIT_ASSESSMENT_ERROR)})).finally((function(){i(),n()})),t.sendAssessmentSubmittedEvent()}))}))}},{key:"handleSubmitAssessment",value:function(){var e=this;this.studentReport&&this.studentReport.disableSubmit(!0),this.submitAssessment().then((function(){setTimeout((function(){e.studentReport&&e.studentReport.disableSubmit(!1)}),1500)}))}},{key:"sendAssessmentSubmittedEvent",value:function(){var e=this;this.props.getEventsContextPromise().then((function(t){var n={eventData:[],dispatcher:e.buildEventDispatcherData()};e.props.dispatcherManager.addEventLog(b.ACTION_EVENTS.TASK_GROUP_COMPLETED,n,!0,t)}))}},{key:"shouldHideLearnerResults",value:function(e){var t=this;this.props.canCiResultsBeHidden?this.props.getEventsContextPromise().then((function(n){t.props.getIsCiResultsHidden(n.data.channelId,n.data.contentItemId,(function(t,n){e(!(!n||!n.isReportLocked))}))})):e(!1)}},{key:"showConfirmSubmitAssessment",value:function(e,t){this.setState({showConfirmSubmitAssessment:e},t)}},{key:"renderConfirmSubmitAssessmentDialog",value:function(){var e=this;if(!this.state.showConfirmSubmitAssessment)return null;var t=this.props,n=t.services.ConfigurationService.ltr,a=t.userStateStore,r=t.language,i=a.getUnansweredQuestionsIds(),o=a.getTasksModel(),s=g.default.createElement("div",{className:"assessment-submit-dialog"},g.default.createElement("div",{className:"submit-dialog-header"},r.taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT_DIALOG.MESSAGE),g.default.createElement(te.default,{ltr:n,taskIds:i,tasksModel:o,handleTaskClick:function(t){e.handleConfirmSubmitAssessmentTaskClick(t)},isPlayer:!0,taskTypeStrings:r.taskGroup.TASK_TYPES}));return g.default.createElement(x.default,{close:function(){e.handleConfirmSubmitAssessmentClose("exit")},actions:[{id:"cancel",text:r.taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT_DIALOG.CANCEL,type:"primary",onClick:function(){e.handleConfirmSubmitAssessmentClose("close")}},{id:"submit",text:r.taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT_DIALOG.DONE,type:"secondary",onClick:function(){e.handleConfirmSubmitAssessmentSubmitClick()}}],content:s,theme:x.default.THEMES.LIGHT,title:r.taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT_DIALOG.TITLE,styleClass:"confirm-assessment-submit"})}},{key:"renderFlagInteractionDialog",value:function(){var e=this,t=this.state,n=t.showFlagInteractionDialog,a=t.showFlagInteractionId,r=t.showFlagInteractionText,i=this.props,o=i.language,s=i.modelStore,l=i.getEventsContextPromise;if(!n)return null;var u,c=s.taskGroup.id,d=s.taskGroup.version,f=a,p=s.tasks[f].version,h=s.taskGroup.structure.taskOrder.indexOf(f)+1;l().then((function(e){var t=e.data,n=t.channelId,a=t.contentItemId,r=t.contentItemVersion;u={channelId:n,contentId:a,contentVersion:r,taskGroupId:c,taskGroupVersion:d,taskId:f,taskVersion:p,taskIndex:h}}));var m=g.default.createElement("div",{className:"flag-interaction-modal-wrapper"},g.default.createElement(V.default,{type:V.BOXAREA,paragraphSize:V.LONGPARAGRAPH,placeholder:o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG&&o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG.MESSAGE,ref:function(t){e._textAreaRef=t},onChange:this.handleTextChangeFlagInteraction,toolbar:W.MINFORMAT_WITH_UPLOAD_FILES}));return g.default.createElement(x.default,{close:function(){e.handleFlagInteractionDialogClose()},actions:[{id:"cancel",text:o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG&&o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG.CANCEL,type:x.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.handleFlagInteractionDialogClose()}},{id:"submit",text:o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG&&o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG.DONE,type:x.default.BUTTON_TYPES.PRIMARY,disabled:!r,onClick:function(){e.handleFlagInteractionSubmitClick(u)}}],content:m,theme:x.default.THEMES.LIGHT,title:o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG&&o.taskGroup.SCORE.FLAG_INTERACTION_DIALOG.TITLE,styleClass:"flag-interaction-modal"})}},{key:"handleConfirmSubmitAssessmentTaskClick",value:function(e){var t=this;this.showConfirmSubmitAssessment(!1,(function(){t._updateScroll(e)})),this.showUnansweredQuestionsPanel(!0),n.sendConfirmSubmitAssessmentMixPanelEvent("click_deep_link")}},{key:"handleConfirmSubmitAssessmentClose",value:function(e){this.showConfirmSubmitAssessment(!1),this.showUnansweredQuestionsPanel(!0),n.sendConfirmSubmitAssessmentMixPanelEvent(e)}},{key:"handleFlagInteractionDialogClose",value:function(e){this.setState({showFlagInteractionDialog:!1,showFlagInteractionId:void 0,showFlagInteractionText:""}),B.default.sendEvent(B.default.TITLES.SEND_FEEDBACK,B.default.COMPONENTS.FEEDBACK_DIALOG,(0,l.default)({},B.default.PARAMS.USER_ACTION,e?"send":"cancel"))}},{key:"handleConfirmSubmitAssessmentSubmitClick",value:function(){this.showConfirmSubmitAssessment(!1),this.handleSubmitAssessment(),n.sendConfirmSubmitAssessmentMixPanelEvent("submit_anyway")}},{key:"handleFlagInteractionSubmitClick",value:function(e){var t=this.state.showFlagInteractionText,n=this.props.flagInteraction;e.message=t,n(e);this.handleFlagInteractionDialogClose(!0)}},{key:"shouldRenderTaskPanel",value:function(e){return e?this.state.showUnansweredQuestionsPanel:this.isAssessment&&(U.default.isFeatureEnabled("customPoints")||U.default.isFeatureEnabled("createRandomizedCi"))}},{key:"handleTaskListPanelClick",value:function(e){this._updateScroll(e)}},{key:"showUnansweredQuestionsPanel",value:function(e){this.setState({showUnansweredQuestionsPanel:e})}},{key:"getTaskScore",value:function(e){var t=this.props,n=t.modelStore,a=t.userStateStore;return n.taskGroup.properties.isCustomPoints||n.tasks[e].data.checkingType===T.MANUAL?{maxScore:n.tasks[e].data.maxPoints||0,successRate:this.state.ciResultsHidden||!a?null:a.taskStates[e].data.data.score,isCustomPoints:n.taskGroup.properties.isCustomPoints}:null}},{key:"preventUserFromAnswering",value:function(e){this.props.userStateStore.preventTaskFromBeenAnswered(e)}},{key:"handleTextChangeFlagInteraction",value:function(){var e=this._textAreaRef&&this._textAreaRef.getInputValue();this.setState({showFlagInteractionText:e})}},{key:"handleChangeBackgroundTransparency",value:function(e,t){this.props.modelStore.tasks[t].setTaskTheme({backgroundColor:e})}},{key:"isBackgroundTransparent",value:function(e){return this.props.modelStore.tasks[e].isBackgroundTransparent}}]),n}(g.Component),o.MODE=z.default.MODE,o.interactionCategoryAndPreset=z.default.interactionCategoryAndPreset,o.isMediaCategoryByInteractionType=z.default.isMediaCategoryByInteractionType,o.filterInteractionCategoryAndPreset=z.default.filterInteractionCategoryAndPreset,o.getPresetNamesByType=z.default.getPresetNamesByType,o.getPreset=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.taskType,r=n.taskPreset,i=n.singleTaskMode,o=void 0!==i&&i,s=n.contentLanguage,u=void 0===s?"en_US":s,c=n.title,d=void 0===c?"":c,f=n.backgroundColor,p=void 0===f?"transparent":f,h=n.coverImageUrl,m=n.defaultSettings,v=n.language,g=void 0===v?{}:v,E={},_=!1;if(void 0!==a){var y=g.interaction&&g.interaction[a];e=z.default.getPreset(a,r,m,y),E[t=(0,G.default)()]=re({id:t,version:1},e),_=o&&se.isMediaCategoryByInteractionType(a)}var k={taskGroup:{properties:{title:d,type:I.QUIZ,isSingleMedia:_,displayNumbering:!_,displayQuestion:!_,backgroundColor:p,coverImageUrl:h,contentLanguage:u},structure:{taskOrder:e?[t]:[],taskVersions:e?(0,l.default)({},t,{id:t,version:1}):{}}},tasks:E};return k},o.defaultProps={taskStartingIndex:1,taskGroupPlayerViewType:C.SEQ,persistUserStateEvents:!0,isTaskGroupVisible:!0,showResults:!1,onAssessmentSubmit:function(){},externalControls:void 0,disableDragOrdering:!1,hideUserStateOnClimatePoll:!1,showClimateResult:!1,showFlagInteractionButton:!1,videoIframeOrigin:void 0,availableOffline:!1,closeOverlayTaskGroup:function(){},getTaskGroupActions:function(){},preventSwipeOnScroll:function(){},hideEmptyState:null,taskPresentationDisplayType:"",taskPresentationProperties:void 0,isSmallEmbeddedItem:!1},i=s))||i)||i)||i;t.default=se},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(388)),o=a(n(195));t.default=function(e){var t=i[e],n=o.default.getInteractionAnswersType(e);return n||(void 0===n||void 0===t?["default"]:Object.keys(i[e]))}},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PollInteractionMode=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(113)),v=n(55),g=n(103),E=r(n(115));function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={SINGLE:"single",MULTIPLE:"multiple"};t.PollInteractionMode=k;var S={POLL_MODE:(0,m.default)(),SHOW_RESULTS:(0,m.default)()},T=(l=s=function(){function e(){var t,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="POLL",this.language={},this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,c.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,u.default)(t,S.POLL_MODE,(function(e){n.setData({mode:e})})),(0,u.default)(t,S.SHOW_RESULTS,(function(e){n.setData({showResultsAfterSubmit:e})})),t),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.addOption=this.addOption.bind(this),this.removeOption=this.removeOption.bind(this),this.isInteractionSupportGamify=this.isInteractionSupportGamify.bind(this),this.getInteractionActionType=this.getInteractionActionType.bind(this),this.language=i,this.taskApiForInteractions=r,this.additionalData=s,this.data={mode:k.SINGLE,options:[],showResultsAfterSubmit:!0},this.initialize(a,i)}return(0,f.default)(e,null,[{key:"getInteractionActionType",value:function(){return g.VOTE}},{key:"isInteractionSupportGamify",value:function(){return!0}}]),(0,f.default)(e,[{key:"setModel",value:function(e){this.data=y(y({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"addOption",value:function(){var e=this.taskApiForInteractions.createInteractionDataByType("TEXT","TEXT",this.language),t=this.taskApiForInteractions.addInteraction(e);this.data.options.push(t),this.taskApiForInteractions.onInteractionChange()}},{key:"removeOption",value:function(e){var t=this.data.options.indexOf(e);this.data.options.splice(t,1),this.taskApiForInteractions.removeInteraction(e),this.taskApiForInteractions.onInteractionChange()}},{key:"setOptionIndex",value:function(e,t){var n=this.data.options;n.splice(t,0,n.splice(e,1)[0]),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){this.additionalData.onInteractionCreationFromServer||(this.addOption(),this.addOption())}},{key:"isInteractionSupportGamify",value:function(){return!0}},{key:"getInteractionActionType",value:function(){return g.VOTE}},{key:"getSettingsSchemes",value:function(e){var t;return[{id:S.POLL_MODE,values:(t={},(0,u.default)(t,k.SINGLE,e.SINGLE_ANSWER),(0,u.default)(t,k.MULTIPLE,e.MULTIPLE_ANSWERS),t),currentValue:this.data.mode,type:E.SINGLE_SELECTION},{id:S.SHOW_RESULTS,name:"show_results",label:e.SHOW_RESULTS_AFTER_SUBMISSION,currentValue:this.data.showResultsAfterSubmit,type:E.TOGGLE}]}}]),e}(),s.category=v.DEFAULT,i=l,o=(0,p.default)(i.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(i.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"addOption",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addOption"),i.prototype),(0,p.default)(i.prototype,"removeOption",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeOption"),i.prototype),(0,p.default)(i.prototype,"setOptionIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setOptionIndex"),i.prototype),(0,p.default)(i.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),i);t.default=T},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(286)).default;t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;a(n(63));var r=n(66),i=[],o=!1,s=function(e){i.forEach((function(t){t(e)}))},l=function(){var e=i.length;!o&&e>0?(window.addEventListener("resize",s),o=!0,r.isSafari&&window.addEventListener("orientationchange",s)):o&&0===e&&(window.removeEventListener("resize",s),r.isSafari&&window.removeEventListener("orientationchange",s),o=!1)},u={register:function(e){return i.push(e),l(),this.unregister.bind(this,e)},unregister:function(e){var t=i.indexOf(e);i.splice(t,1),l()}};t.default=u},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.THEMES=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11)));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m={TRANSPARENT:"transparent",LIGHT:"light"};t.THEMES=m;var v=function(e){(0,u.default)(n,e);var t=h(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={searchString:a.props.searchString||"",prevSearchString:a.props.searchString,disabled:a.props.disabled},a.timer=null,a.handleSearchChange=a.handleSearchChange.bind((0,l.default)(a)),a.clearSearch=a.clearSearch.bind((0,l.default)(a)),a.triggerChange=a.triggerChange.bind((0,l.default)(a)),a.refocusSearchInput=a.refocusSearchInput.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.focusInputOnMount&&this.searchInput.focus()}},{key:"render",value:function(){var e=this,t=null,n=null,a=this.props.ariaLabel;(this.state.searchString||this.state.inputFocused)&&this.props.showClearIcon?n=f.default.createElement("span",{className:"input-debounce__search-icon input-debounce__search-icon--close icon--close",onClick:this.clearSearch}):this.state.searchString||this.state.inputFocused||!this.props.showSearchIcon||(t=f.default.createElement("span",{className:"input-debounce__search-icon ".concat(this.props.iconClass)}));var r=(0,p.default)("input-debounce--wrapper",{"input-debounce--wrapper--focused":this.state.inputFocused},(0,i.default)({},this.props.styleClass,!!this.props.styleClass),"theme-".concat(this.props.theme));return f.default.createElement("div",{className:r},t,f.default.createElement("input",{type:"text","data-automation-id":"input-debounce-search",maxLength:this.props.maxLength,placeholder:this.props.searchPlaceholder,className:"input-debounce__search-input",onChange:this.handleSearchChange,value:this.state.searchString,ref:function(t){e.searchInput=t},onFocus:function(){e.setState({inputFocused:!0}),e.props.onInputFocus(!0)},onBlur:function(){e.setState({inputFocused:!1}),e.props.onInputFocus(!1)},onKeyPress:function(e){return 13===e.charCode&&e.preventDefault(),e},disabled:this.state.disabled,"aria-label":a}),n)}},{key:"handleSearchChange",value:function(e){var t=e.target.value;t.replace(/\s/g,"").length||(t=""),this.setState({searchString:t}),clearTimeout(this.timer),this.timer=setTimeout(this.triggerChange,700)}},{key:"triggerChange",value:function(){this.state.searchString&&this.state.searchString.length<this.props.minSearchLength||this.props.searchChanged(this.state.searchString)}},{key:"refocusSearchInput",value:function(){this.searchInput.focus()}},{key:"clearSearch",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""!==this.state.searchString&&(this.setState({searchString:""}),this.props.searchChanged(""),e&&this.refocusSearchInput())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.searchString!==t.prevSearchString?{searchString:e.searchString,prevSearchString:e.searchString}:null}}]),n}(f.Component);v.defaultProps={maxLength:40,minSearchLength:3,searchPlaceholder:"",searchChanged:function(){},onInputFocus:function(){},focusInputOnMount:!0,iconClass:"icon--search",styleClass:"",theme:m.LIGHT,showSearchIcon:!1,showClearIcon:!0,disabled:!1,ariaLabel:""};var g=v;t.default=g},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(9)),u=a(n(3)),c=a(n(4)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=r(n(0)),m=a(n(2)),v=a(n(11)),g=a(n(444)),E=a(n(723)),_=a(n(724)),y=a(n(387)),k=a(n(283)),S=a(n(812)),T=a(n(813)),b=a(n(389)),C=a(n(814)),I=a(n(815)),O=a(n(386)),A=a(n(443)),N=a(n(478)),w=a(n(816)),R=a(n(817)),P=r(n(52)),M=r(n(198)),L=r(n(67));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var U=(0,g.default)(["model","userState"],{withRef:!0})((s=o=function(e){(0,d.default)(n,e);var t=F(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getModelById=function(t){return e.props.model.interactions[t]},e.getUserStateById=function(t){return e.props.userState&&e.props.userState[t]},e.queueModelInteractionsChanges=function(){e._batchedModelInteractions=e.props.model.interactions},e.flushModelInteractionsChanges=function(){e.props.setModel(x(x({},e.props.model),{},{interactions:e._batchedModelInteractions})),delete e._batchedModelInteractions},e.addInteractions=function(t){void 0!==e._batchedModelInteractions?e._batchedModelInteractions=x(x({},e._batchedModelInteractions),t):e.props.setModel(x(x({},e.props.model),{},{interactions:x(x({},e.props.model.interactions),t)}))},e.removeInteractions=function(t){var n={},a=void 0!==e._batchedModelInteractions?e._batchedModelInteractions:e.props.model.interactions,r=Object.keys(a).reduce((function(e,r){return-1!==t.indexOf(r)?(n[r]=a[r],e):x(x({},e),{},(0,l.default)({},r,a[r]))}),{});return void 0!==e._batchedModelInteractions?e._batchedModelInteractions=r:e.props.setModel(x(x({},e.props.model),{},{interactions:r})),n},e.setUserStateById=function(t,n){return e.props.setUserState(x(x({},e.props.userState),{},(0,l.default)({},t,n)))},e}return(0,c.default)(n,[{key:"getChildContext",value:function(){var e=this.getModelById,t=this.getUserStateById,n=this.queueModelInteractionsChanges,a=this.flushModelInteractionsChanges,r=this.addInteractions,i=this.removeInteractions,o=this.setUserStateById,s=this.props,l=s.isModelControlled,u=s.isUserStateControlled,c=s.language,d=s.taskLanguage,f=s.ltr,p=s.mode,h=s.isEnabled,m=s.showAnswers,v=s.rootWidth,g=s.showClimateResult,E=s.showFlagInteractionButton,_=s.hideUserStateOnClimatePoll,y=s.onCheckingTypeChange,k=s.hideMediaOptions,S=s.isSingleMedia,T=s.isMobile,b=s.ciResultsHidden,C=s.toolbar,I=s.showResults,O=s.results;return{getModelById:e,getUserStateById:t,queueModelInteractionsChanges:n,flushModelInteractionsChanges:a,addInteractions:r,removeInteractions:i,setUserStateById:o,isModelControlled:l,isUserStateControlled:u,language:c,taskLanguage:d,ltr:f,mode:p,ciResultsHidden:b,toolbar:C,readOnlyMode:s.readOnlyMode,showResults:I,results:O,isEnabled:h,showAnswers:m,rootWidth:v,onCheckingTypeChange:y,hideMediaOptions:k,isSingleMedia:S,isMobile:T,showClimateResult:g,showFlagInteractionButton:E,hideUserStateOnClimatePoll:_,videoIframeOrigin:s.videoIframeOrigin,availableOffline:s.availableOffline,closeOverlayTaskGroup:s.closeOverlayTaskGroup,preventSwipeOnScroll:s.preventSwipeOnScroll,maxLinesCount:s.maxLinesCount,maxCharacters:s.maxCharacters,expandQuestion:s.expandQuestion,isMedia:s.isMedia,onlyShowAnswer:s.onlyShowAnswer,taskPresentationDisplayType:s.taskPresentationDisplayType,taskPresentationProperties:s.taskPresentationProperties,pageSizeFactor:s.pageSizeFactor,renderInteractionChangedAlert:s.renderInteractionChangedAlert,isSmallEmbeddedItem:s.isSmallEmbeddedItem,subtasksUserStates:s.subtasksUserStates,subtasksToRender:s.subtasksToRender,subtasks:s.subtasks}}},{key:"shouldComponentUpdate",value:function(e){var t=this;return e.isModelControlled&&e.model!==this.props.model||e.isUserStateControlled&&e.userState!==this.props.userState||["mode","ltr","isEnabled","showAnswers","showResults","language","rootWidth","results","ciResultsHidden","videoIframeOrigin","availableOffline","styleClass","pageSizeFactor","subtasksToRender"].some((function(n){return e[n]!==t.props[n]}))}},{key:"render",value:function(){var e,t=this,n=(0,v.default)("ttk-interaction",(e={"single-media-interaction":this.props.isSingleMedia},(0,l.default)(e,this.props.styleClass,this.props.styleClass),(0,l.default)(e,"ltr",this.props.ltr),(0,l.default)(e,"rtl",!this.props.ltr),e));return h.default.createElement("div",{className:n},h.default.createElement(_.default,{ref:function(e){t._mainInteractionRef=e},id:this.props.model.entry}))}},{key:"getMainInteractionInstance",value:function(){return this._mainInteractionRef}},{key:"getSettingsFunctions",value:function(){var e=this.getMainInteractionInstance();return e.model&&e.model.settingsFunctions?e.model.settingsFunctions:{}}},{key:"checkAnswer",value:function(e){return this.getMainInteractionInstance().controller.checkAnswer(e)}},{key:"tryAgain",value:function(){return this.getMainInteractionInstance().controller.tryAgain()}},{key:"calcCurrentScore",value:function(e){return this.getMainInteractionInstance().controller.calcCurrentScore?this.getMainInteractionInstance().controller.calcCurrentScore(e):(0,E.default)(e)}},{key:"componentLostFocus",value:function(){var e=this.getMainInteractionInstance().getWrappedInstance();if(e.componentLostFocus)return e.componentLostFocus()}}]),n}(h.Component),o.getPreset=y.default,o.getPresetNamesByType=k.default,o.getFeedbackFields=T.default,o.getSettingsSchemes=S.default,o.getInteractionMaxAttempts=b.default,o.getCheckAnswerStatus=C.default,o.getInteractionActionType=O.default,o.isInteractionSupportGamify=A.default,o.getInteractionUserAnswers=I.default,o.interactionCategoryAndPreset=N.default,o.isMediaCategoryByInteractionType=w.default,o.filterInteractionCategoryAndPreset=R.default,o.MODE=P,o.TYPE=M,o.ANSWER=L,o.childContextTypes={getModelById:m.default.func,getUserStateById:m.default.func,queueModelInteractionsChanges:m.default.func,flushModelInteractionsChanges:m.default.func,addInteractions:m.default.func,removeInteractions:m.default.func,setUserStateById:m.default.func,isModelControlled:m.default.bool,isUserStateControlled:m.default.bool,language:m.default.shape({}),taskLanguage:m.default.shape({}),ltr:m.default.bool,ciResultsHidden:m.default.bool,readOnlyMode:m.default.bool,showResults:m.default.bool,results:m.default.shape({}),mode:m.default.string,toolbar:m.default.number,isEnabled:m.default.bool,showAnswers:m.default.bool,rootWidth:m.default.number,onCheckingTypeChange:m.default.func,hideMediaOptions:m.default.bool,isSingleMedia:m.default.bool,isMobile:m.default.bool,hideUserStateOnClimatePoll:m.default.bool,showClimateResult:m.default.bool,showFlagInteractionButton:m.default.bool,videoIframeOrigin:m.default.string,availableOffline:m.default.bool,closeOverlayTaskGroup:m.default.func,preventSwipeOnScroll:m.default.func,maxLinesCount:m.default.number,maxCharacters:m.default.number,expandQuestion:m.default.func,isMedia:m.default.bool,onlyShowAnswer:m.default.func,taskPresentationDisplayType:m.default.string,taskPresentationProperties:m.default.shape({}),pageSizeFactor:m.default.number,renderInteractionChangedAlert:m.default.func,isSmallEmbeddedItem:m.default.bool,subtasksUserStates:m.default.shape({}),subtasksToRender:m.default.arrayOf(m.default.string),subtasks:m.default.arrayOf(m.default.string)},o.defaultProps={mode:P.EDITOR,ltr:!0,isEnabled:!0,ciResultsHidden:!1,showResults:!1,showAnswers:!1,hideUserStateOnClimatePoll:!1,showClimateResult:!1,showFlagInteractionButton:!1,videoIframeOrigin:void 0,availableOffline:!1,closeOverlayTaskGroup:function(){},preventSwipeOnScroll:function(){},styleClass:"",expandQuestion:function(){},isMedia:!1,onlyShowAnswer:function(){},taskPresentationDisplayType:"",taskPresentationProperties:void 0,isSmallEmbeddedItem:!1,subtasksUserStates:void 0,subtasksToRender:[],subtasks:[]},i=s))||i;t.default=U},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(48)),l=a(n(514)),u=a(n(217)),c=a(n(621)),d=a(n(735)),f=n(39),p=a(n(290));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={MEDIA_START:f.EVENT_TYPES.MEDIA_START,MEDIA_END:f.EVENT_TYPES.MEDIA_END,MEDIA_ACTIVITY:f.EVENT_TYPES.MEDIA_ACTIVITY},g=function(){function e(t){var n=t.eventData,a=t.interval,r=void 0===a?3e4:a,o=t.restUrl;if((0,i.default)(this,e),!o||!n)throw new Error("MediaKeepAlive must has restUrl and eventData");this._interval=r,this._eventData=n,this._mediaElements=[];var s=Object.keys(v).map((function(e){return v[e]}));this._dispatcherManager=new p.default(void 0,void 0,s),this._dispatcherManager.addDispatcher(f.DISPATCHER_TYPES.URL,o,s)}return(0,o.default)(e,[{key:"addElement",value:function(t){var n=t.element,a=t.taskData;if(!n)throw new Error("mediaKeepAlive should has a media element");var r="media-keep-alive-".concat(e._idCounter++),i={start:this._sendMediaStarted.bind(this,r),end:this._sendMediaEnded.bind(this,r),onStateChanged:this._onStateChanged.bind(this,r),timer:null,id:r,element:n,taskData:a};return"VIDEO"===n.nodeName||"AUDIO"===n.nodeName?(n.addEventListener("play",i.start,!0),n.addEventListener("pause",i.end,!0)):"IFRAME"===i.element.nodeName&&-1!==i.element.src.indexOf("youtube")?(i.player=(0,c.default)(n),this._playerListener=i.player.on("stateChange",i.onStateChanged)):"IFRAME"===i.element.nodeName&&-1!==i.element.src.indexOf("vimeo")?(i.player=new d.default(n),i.player.on("play",i.start),i.player.on("pause",i.end),i.player.on("ended",i.end)):(0,s.default)(i.element)&&(i.player=i.element,i.player.on("play",i.start),i.player.on("pause",i.end),i.player.on("ended",i.end)),this._mediaElements.push(i),r}},{key:"removeElement",value:function(e){var t=(0,u.default)(this._mediaElements,{id:e});t.timer&&(clearTimeout(t.timer),this._sendMediaEnded(e)),"VIDEO"===t.element.nodeName||"AUDIO"===t.element.nodeName?(t.element.addEventListener("play",t.start,!0),t.element.addEventListener("pause",t.end,!0)):"IFRAME"===t.element.nodeName&&-1!==t.element.src.indexOf("youtube")?(t.player.off(this._playerListener),t.player.destroy()):"IFRAME"===t.element.nodeName&&-1!==t.element.src.indexOf("vimeo")?(t.player.off("play"),t.player.off("pause"),t.player.off("ended")):(0,s.default)(t.element)&&(t.player.off("play",t.start),t.player.off("pause",t.end),t.player.off("ended",t.end)),(0,l.default)(this._mediaElements,{id:e})}},{key:"_onStateChanged",value:function(e,t){1===t.data?this._sendMediaStarted(e):0!==t.data&&2!==t.data||this._sendMediaEnded(e)}},{key:"_sendMediaStarted",value:function(e){var t=(0,u.default)(this._mediaElements,{id:e});t.timer=setTimeout(this._sendMediaPlaying.bind(this,e),this._interval),this._sendEvent(v.MEDIA_START,t.taskData)}},{key:"_sendMediaEnded",value:function(e){var t=(0,u.default)(this._mediaElements,{id:e});t&&(t.timer&&clearTimeout(t.timer),t.timer=null,this._sendEvent(v.MEDIA_END,t.taskData))}},{key:"_sendMediaPlaying",value:function(e){var t=(0,u.default)(this._mediaElements,{id:e});t.timer&&clearTimeout(t.timer),t.timer=setTimeout(this._sendMediaPlaying.bind(this,e),this._interval),this._sendEvent(v.MEDIA_ACTIVITY,t.taskId)}},{key:"_sendEvent",value:function(e,t){var n=this._eventData,a=n.providerId,r=n.channelId,i=n.contentItemId,o=n.lessonId,s=n.userId,l=n.playerType,u=n.contentSessionId,c=n.dispatcherId,d=n.version,f={eventContext:{providerId:a,data:{channelId:r,contentItemId:i,contentItemVersion:d,contentSessionId:u,userId:s}},eventData:Object.assign({dispatcher:{version:d,id:c,type:l}},t?{eventData:m({},t)}:{})};o&&(f.eventContext.data.lessonId=o),this._dispatcherManager.addEventLog(e,f.eventData,!0,f.eventContext)}}]),e}();g._idCounter=0;var E=g;t.default=E},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=n(62),s=n(39),l=a(n(446)),u=a(n(448)),c=a(n(449)),d=a(n(450)),f=function(){function e(t,n){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,e),this._dispatchersEvents={},this._dispatchers={},this._logger=o.logger,this._bulkSize=Number.MAX_VALUE,i.forEach((function(e){a._dispatchersEvents[e]=[]})),o.bulkSize&&(this._bulkSize=o.bulkSize,this._boundDestroy=this.destroy.bind(this),window.addEventListener("beforeunload",this._boundDestroy),this._dispatchInterval=this._createDispatchInterval(o.dispatchIteration))}return(0,i.default)(e,null,[{key:"createDataToDispatch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{action:e,timestamp:t.timestamp||Date.now(),dispatcher:t.dispatcher,eventData:t.eventData,contextProviderId:n.providerId,contextObject:n.data}}}]),(0,i.default)(e,[{key:"dispatchEvents",value:function(){var e=this;this._destroyed?this._log("error","DispatcherManager -> dispatchEvents: DispatcherManager destroyed, cannot dispatch events."):Object.keys(this._dispatchers).forEach((function(t){var n=e._dispatchers[t];n.hasEventsInQueue()&&n.send()}))}},{key:"addEventLog",value:function(t,n,a,r){var i=this;if(this._destroyed)this._log("error","DispatcherManager -> addEventLog: DispatcherManager destroyed, cannot add event log ".concat(t,"."));else{var o=e.createDataToDispatch(t,n,r);this._dispatchersEvents[t].forEach((function(e){i._dispatchers[e].addEventToQueue(t,o)})),(a||this._getAllEventsCount()>=this._bulkSize)&&this.dispatchEvents()}}},{key:"_getAllEventsCount",value:function(){var e=this,t=0;return Object.keys(this._dispatchers).forEach((function(n){var a=e._dispatchers[n];t+=a.getLogEventsQueueSize()})),t}},{key:"addDispatcher",value:function(e,t,n,a){var r,i=this;if(this._destroyed)return this._log("error","DispatcherManager -> addDispatcher: DispatcherManager destroyed, cannot add dispatcher ".concat(e,".")),null;var f=n,p=(0,o.v4)();switch(e){case s.DISPATCHER_TYPES.URL:r=new c.default({dispatchTo:t,events:n,id:p});break;case s.DISPATCHER_TYPES.CALLBACK:r=new u.default({dispatchTo:t,id:p}),f=Object.keys(t);break;case s.DISPATCHER_TYPES.ANALYTICS:r=new l.default({dispatchTo:t,id:p,params:a});break;case s.DISPATCHER_TYPES.XAPI:r=new d.default({dispatchTo:t,id:p,params:a})}return void 0!==r?(this._dispatchers[p]=r,f.forEach((function(t){i._dispatchersEvents[t]?i._dispatchersEvents[t].push(p):i._log("warn","DispatcherManager -> addDispatcher: ".concat(e," dispatcher attempted to register to an unknown event ").concat(t,"."))}))):this._log("warn","DispatcherManager -> addDispatcher: attempted to add a dispatcher of unknown type ".concat(e,".")),r}},{key:"_createDispatchInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return setTimeout((function(){e.dispatchEvents(),e._dispatchInterval=e._createDispatchInterval(t)}),t)}},{key:"_log",value:function(e,t){if(this._logger){var n,a=[t];this._logger.id&&a.unshift(this._logger.id),(n=this._logger.instance)[e].apply(n,a)}else console[e](t)}},{key:"destroy",value:function(){this._destroyed||(this.dispatchEvents(),clearTimeout(this._dispatchInterval),window.removeEventListener("beforeunload",this._boundDestroy),this._destroyed=!0)}}]),e}();t.default=f},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"evenodd"},[a.createElement("path",{d:"M4.808 11.532c0-3.492 2.57-5.708 5.946-5.724 3.382-.017 5.938 2.179 5.938 5.724v.903H18.5v-.903c0-4.611-3.425-7.553-7.754-7.532C6.43 4.021 3 6.978 3 11.532v.903h1.808v-.903z",fillRule:"nonzero",key:0}),a.createElement("path",{d:"M4 15l-3-3h6z",key:1})]))}r.defaultProps={width:"21",height:"20",viewBox:"0 0 21 20"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(112));window.jQuery=r.default,n(551),n(552);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0));r(n(2));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var p=r(n(37)).default.isMobile,h=function(e){(0,l.default)(n,e);var t=f(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).showList=e.showList.bind((0,s.default)(e)),e.hideOption=e.hideOption.bind((0,s.default)(e)),e.state={showList:!1},e}return(0,o.default)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this.props.disabled;e.disabled!==t&&!e.disabled&&this.state.showList&&this.setState({showList:!1})}},{key:"componentDidUpdate",value:function(e,t){t.showList!==this.state.showList&&this.bindEvents()}},{key:"componentWillUnmount",value:function(){this._clickHandler&&(document.removeEventListener("click",this._clickHandler),delete this._clickHandler)}},{key:"render",value:function(){var e=this.props.small;return d.default.createElement("div",{className:"t2k-select ".concat(e?"small":"")},this.renderContent())}},{key:"renderContent",value:function(){return p?this.renderNative():this.renderNonNative()}},{key:"renderNative",value:function(){var e=this,t=this.props,a=t.selected,r=t.label,i=t.disabled,o=void 0!==a&&-1!==a?a:r;return n.renderRelativeContainerWithCaret(d.default.createElement("select",{value:o,onChange:function(t){return e.handleSelectChange(t)},disabled:i},this.renderNativeOptions()))}},{key:"renderNonNative",value:function(){var e=this.props,t=e.disabled,a=e.label,r=void 0===a?"":a,i=this.getSelectedOption();return d.default.createElement("div",null,n.renderRelativeContainerWithCaret(d.default.createElement("div",{type:"text",className:"select-dropdown ".concat(t?"disabled":""),onClick:t?function(){}:this.showList},i&&d.default.createElement("span",{className:"select-value"},i.value),!i&&d.default.createElement("span",{className:"select-value"},r))),this.renderNonNativeMenu())}},{key:"renderNonNativeMenu",value:function(){var e=this,t=this.props.options;return d.default.createElement("div",{className:"dropdown-content ".concat(this.state.showList?"show":"")},t.map((function(t){return e.renderNonNativeOption(t)})))}},{key:"renderNonNativeOption",value:function(e){var t=this,n=this.props.selected,a=this.hideOption(e)?{display:"none"}:void 0;return d.default.createElement("div",{key:e.key,className:"dropdown-option ".concat(e.key===n?"selected":""),onClick:function(){return t.handleOptionClick(e.key)},style:a},d.default.createElement("span",{className:"dropdown-option-span"},e.value))}},{key:"renderNativeOptions",value:function(){var e=this.props,t=e.label,n=e.options;return[].concat(void 0!==t?d.default.createElement("option",{key:"",value:t},t):[]).concat(n.map(this.renderNativeOption.bind(this)))}},{key:"renderNativeOption",value:function(e){var t=this.hideOption(e)?{display:"none"}:void 0;return d.default.createElement("option",{key:e.key,value:e.key,style:t},e.value)}},{key:"hideOption",value:function(e){var t=this.props,n=t.hideSelected,a=t.selected;return n&&a===e.key}},{key:"getSelectedOption",value:function(){var e=this.props,t=e.options,n=e.selected;return t.find((function(e){return e.key===n}))}},{key:"bindEvents",value:function(){this.state.showList?(this._clickHandler=this.hideList.bind(this),document.addEventListener("click",this._clickHandler)):(document.removeEventListener("click",this._clickHandler),delete this._clickHandler)}},{key:"handleOptionClick",value:function(e){var t=this.props,n=t.selected,a=t.onChange;e!==n&&a(e)}},{key:"handleSelectChange",value:function(e){var t=this.props,n=t.label,a=t.onChange,r=t.options,i=e.target.selectedIndex-(n?1:0);a(r[i]?r[i].key:"")}},{key:"showList",value:function(){this.state.showList||this.setState({showList:!0})}},{key:"hideList",value:function(){this.state.showList&&this.setState({showList:!1})}}],[{key:"renderRelativeContainerWithCaret",value:function(e){return d.default.createElement("div",{className:"t2k-select-container"},e,d.default.createElement("span",{className:"caret"}))}}]),n}(d.Component);t.default=h},,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(327)));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,u.default)(n,e);var t=h(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.block,a=e.hint,r=(0,o.default)(e,["children","block","hint"]);return f.default.createElement("label",{className:"t2i-checkbox".concat(n?" t2i-checkbox-block":"")},f.default.createElement("input",(0,i.default)({},r,{type:"checkbox"})),f.default.createElement("div",{className:"t2i-checkbox-container"},t&&f.default.createElement("div",{"data-unittest-id":"children-container"},t)),a&&f.default.createElement(p.default,{tooltip:a},f.default.createElement("div",{className:"hint__icon--help"})))}}]),n}(f.Component);t.default=m,m.defaultProps={children:void 0,block:!1,hint:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DELETE_TASK=t.SAVE_ERROR=t.SUBMIT_ASSESSMENT_ERROR=t.OPTIMISTIC_LOCK=void 0;t.OPTIMISTIC_LOCK="OPTIMISTIC_LOCK";t.SUBMIT_ASSESSMENT_ERROR="SUBMIT_ASSESSMENT_ERROR";t.SAVE_ERROR="SAVE_ERROR";t.DELETE_TASK="DELETE_TASK"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){var n=!1;e.catch((function(e){n=!0,t(e)})).then((function(e){n||t(void 0,e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){switch(e){case"he_IL":case"ar":return!1;default:return!0}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(14)),l=a(n(22)),u=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(e,t,n,a,r,i){return o.default.createElement("div",{className:"login__user-form ".concat(t.formClass," ").concat(s.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"self-registration__check-email--fields"},o.default.createElement("div",{className:"self-registration__check-email--top-title"},l.default.translate("login.self-registration-check-your-email.top-title")),o.default.createElement("div",{className:"self-registration__check-email--part-one ".concat(t.direction)},i?l.default.translate("login.self-registration-check-your-phone.part-one"):l.default.translate("login.self-registration-check-your-email.part-one")),o.default.createElement("div",{className:"self-registration__check-email--part-two"},e.signUpSubmitData.email||e.signUpSubmitData.phone),o.default.createElement("div",{className:"self-registration__check-email--part-three ".concat(t.direction)},i?l.default.translate("login.self-registration-check-your-phone.part-three"):l.default.translate("login.self-registration-check-your-email.part-three")),o.default.createElement("div",{className:"self-registration__check-email--part-four ".concat(t.direction)},i?l.default.translate("login.self-registration-check-your-phone.part-four"):l.default.translate("login.self-registration-check-your-email.part-four"),o.default.createElement("div",{className:"self-registration__check-email--part-four-link ".concat(t.direction),onClick:n},l.default.translate("login.self-registration-check-your-email.part-four-link"))),o.default.createElement("div",{className:"self-registration__check-email--resend-message"},e.resendMessage)),r(a,"login.back-to-signup-self-registration"))}}]),e}();t.default=u},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11)),l=a(n(14)),u=a(n(22)),c=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t){var n="mailto:".concat(t.expiredLinkEmail,"?subject=").concat(u.default.translate("login.self-registration-expired-link.part-one-email-subject"));return o.default.createElement("div",{className:"login__user-form ".concat(t.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"self-registration__link-expired--fields"},e.renderStopImage(),o.default.createElement("div",{className:"self-registration__link-expired--top-title"},u.default.translate("login.self-registration-expired-link.top-title")),o.default.createElement("div",{className:"self-registration__link-expired--part-one ".concat(t.direction)},u.default.translate("login.self-registration-expired-link.part-one")),o.default.createElement("a",{href:n},o.default.createElement("div",{className:"self-registration__link-expired--part-one-link ".concat(t.direction)},t.expiredLinkEmail))))}},{key:"renderStopImage",value:function(){var e=(0,s.default)("link-expired-image",{"link-expired-image--desktop":!l.default.isMobile(),"link-expired-image--mobile":l.default.isMobile()});return o.default.createElement("div",{className:e})}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11));n(73);var l=a(n(14)),u=a(n(22)),c=a(n(36)),d=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t,n,a,r,i,s,u,c,d,f,p,h,m){return o.default.createElement("div",{className:"login__user-form ".concat(n.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"login__user-form--fields"},h&&e.renderIDSection(r,a,t),!m&&e.renderEmailSection(r,a,t,n),m&&e.renderPhoneNumberSection(m,a,t),e.renderUsernameSection(r,a,t),!h&&p&&e.renderIDSection(r,a,t),s("login.signup.password.placeholder",i),u(),e.renderSubmitErrorField(t,d),e.renderSubmitButton(t,c)),e.renderFooter(d,f))}},{key:"renderPhoneNumberSection",value:function(e,t,n){return[e(!!n.invalidInputRefs.phone),o.default.createElement("div",{key:"input-message-phone",className:t("full-user-name")},n.invalidInputRefs.phone||"")]}},{key:"renderEmailSection",value:function(e,t,n,a){var r=a.loginQueryParams&&a.loginQueryParams.email?{emailForceValue:a.loginQueryParams.email,emailDisabled:!0}:{emailPlaceholderDictKey:"login.email-self-registration.placeholder",emailPattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-z]{2,3}$"};return[e("email","email",r.emailPlaceholderDictKey,r.emailForceValue,r.emailPattern,r.emailDisabled),o.default.createElement("div",{key:"input-message-email",className:t("email")},n.invalidInputRefs.email||"")]}},{key:"renderUsernameSection",value:function(e,t,n){return[e("full-user-name","text","login.full-user-name.placeholder",void 0),o.default.createElement("div",{key:"input-message-username",className:t("full-user-name")},n.invalidInputRefs["full-user-name"]||"")]}},{key:"renderIDSection",value:function(e,t,n){return[e("externalId","text","login.external-id.placeholder",void 0,"^[0-9]{1,20}$"),o.default.createElement("div",{key:"input-message-username",className:t("externalId")},n.invalidInputRefs.externalId||"")]}},{key:"renderSubmitErrorField",value:function(e,t){var n=(0,s.default)("login__submit-message",{"login__submit-message--desktop":!l.default.isMobile(),"login__submit-message--mobile":l.default.isMobile(),"login__submit-message--error":e.submitMessage.errorMessage});return[o.default.createElement("div",{className:n,key:"submit-error-message"},e.submitMessage.errorMessage),e.submitMessage.linkTextKey&&t(e.submitMessage.linkHandler,e.submitMessage.linkTextKey,e.submitMessage.styleClass)]}},{key:"renderSubmitButton",value:function(e,t){var n=(0,s.default)("login__submit-section",{"login__submit-section--mobile":l.default.isMobile()});return o.default.createElement("div",{className:n},o.default.createElement(c.default,{id:"login-submit",dataAutomationId:"login-submit",onClick:t,text:u.default.translate("login.submit-button.register"),disabled:e.submitting}))}},{key:"renderFooter",value:function(t,n){return o.default.createElement("div",{className:"login__user-form--footer"},n&&e.getGoToLoginLink(t,n),e.getTermsOfService())}},{key:"getGoToLoginLink",value:function(e,t){return o.default.createElement("div",{className:"login__self-registration-goto-link"},o.default.createElement("span",{className:"login__bottom-form-link-text"},u.default.translate("login.go-to-login-self-registration")),e(t,"login.go-to-login-link-self-registration"))}},{key:"getTermsOfService",value:function(){var e=(0,s.default)("login__bottom-form-link",{"login__bottom-form-link--mobile":l.default.isMobile(),"login__bottom-form-link--desktop":!l.default.isMobile()});return o.default.createElement("div",{className:"login__terms"},o.default.createElement("span",{className:"login__terms-text"},u.default.translate("login.terms")),o.default.createElement("a",{className:e,href:"https://www.timetoknow.com/terms/","data-automation-id":"terms-link",target:"_blank"},u.default.translate("login.terms-link")))}}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11)),l=a(n(592));n(73);var u=a(n(14)),c=a(n(22)),d=a(n(36)),f=a(n(119)),p=a(n(305)),h=a(n(200)),m=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t,n,a,r,i,s,l,c,d,f,p,m,v,g){var E,_,y,k=null===(E=u.default.getAppdata().appConf.featureFlags)||void 0===E||null===(_=E.login)||void 0===_||null===(y=_.byPhoneNumber)||void 0===y?void 0:y.enabled;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"login__user-form ".concat(n.formClass," ").concat(u.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop"),key:"login-form"},o.default.createElement("div",{className:"login__user-form--fields"},e.renderSiteSection(r,a,t),!k&&e.renderEmailSection(r,a,t),k&&o.default.createElement(h.default,{renderPhoneInputField:v,renderEmailSection:function(){return e.renderEmailSection(r,a,t)},handleTabIndexChange:g,emailFirst:!1,phoneOnly:!0,formState:t,phoneTabKey:"login.phone-tab",emailTabKey:"login.emailusername-tab"}),i(),s(l),e.renderCaptcha(t,f),e.renderSubmitErrorField(t,p),e.renderSubmitButton(t,n,c,d)),e.renderFooter(p,m)),e.renderIosProgressiveWebAppToast())}},{key:"renderSiteSection",value:function(e,t,n){return f.default.isGenericSitesLogin()?[e("site","text","login.site.placeholder"),o.default.createElement("div",{key:"input-message-site",className:t("site")},n.invalidInputRefs.site||"")]:null}},{key:"renderEmailSection",value:function(e,t,n){return[e("email","email","login.email.placeholder"),o.default.createElement("div",{key:"input-message-email",className:t("email")},n.invalidInputRefs.email||"")]}},{key:"resetCaptcha",value:function(){window.grecaptcha&&window.grecaptcha.reset()}},{key:"renderCaptcha",value:function(e,t){return e.showCaptcha?o.default.createElement("div",{className:"login__captcha"},o.default.createElement(l.default,{sitekey:"6Le0kF0UAAAAAKhBTSfmE3R9ZUVikwphHylluHHv",onChange:t,size:"compact"})):null}},{key:"renderSubmitErrorField",value:function(e,t){var n=(0,s.default)("login__submit-message",{"login__submit-message--desktop":!u.default.isMobile(),"login__submit-message--mobile":u.default.isMobile(),"login__submit-message--error":e.submitMessage.errorMessage});return[o.default.createElement("div",{className:n,key:"submit-error-message"},e.submitMessage.errorMessage||e.submitMessage.message),e.submitMessage.linkTextKey&&t(e.submitMessage.linkHandler,e.submitMessage.linkTextKey,e.submitMessage.styleClass)]}},{key:"renderSubmitButton",value:function(e,t,n,a){var r=(0,s.default)("login__submit-section",{"login__submit-section--mobile":u.default.isMobile()});return o.default.createElement("div",{className:r},this.getRememberMe(e,t,n),o.default.createElement(d.default,{id:"login-submit",dataAutomationId:"login-submit",onClick:a,disabled:e.disableLogin||e.submitting,text:c.default.translate("login.submit-button.login")}))}},{key:"getRememberMe",value:function(e,t,n){var a=u.default.getAppdata();if(!u.default.isFeatureEnabled("rememberMe"))return null;if((u.default.isCordova()||u.default.isStandalone())&&a.appConf.forceRememberMeInNativeApp)return null;var r=(0,s.default)("remember-me",{"remember-me--mobile":u.default.isMobile()}),i=(0,s.default)("remember-me__icon",{"remember-me__icon--checked":e.rememberMe});return o.default.createElement("div",{className:r},o.default.createElement("div",{className:i,onClick:n}),o.default.createElement("div",{className:"remember-me__text",onClick:n},c.default.translate("login.remember-me")))}},{key:"renderFooter",value:function(t,n){return n?o.default.createElement("div",{className:"login__user-form--footer"},e.getGoToSignUpLink(t,n)):null}},{key:"renderIosProgressiveWebAppToast",value:function(){var e=u.default.getAppdata();return u.default.isIos()&&u.default.isMobile()&&u.default.isBrowserSafari()&&!u.default.isStandalone()&&!u.default.isCordova()&&e.appConf.webappManifestUrl?o.default.createElement("div",{className:"login__user-form--ios-progressive-web-toast"},o.default.createElement("div",{className:"ios-toast"},o.default.createElement("div",{className:"image-column"}),o.default.createElement("div",{className:"text-column"},c.default.translateWithItems("login.messages.iphone-pwa",{svg:o.default.createElement(p.default,null)})))):null}},{key:"getGoToSignUpLink",value:function(e,t){return o.default.createElement("div",{className:"login__self-registration-goto-link"},o.default.createElement("span",{className:"login__bottom-form-link-text"},c.default.translate("login.go-to-sign-up-self-registration")),e(t,"login.go-to-sign-up-link-self-registration"))}}]),e}();t.default=m},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M484.352 108.928v539.52h55.232v-539.52l101.312 101.248 40.64-40.64L512 0 342.464 169.536l40.64 40.64 101.248-101.248z",fill:"",key:0}),a.createElement("path",{d:"M594.88 280.064v55.232h220.992v607.808H208.064V335.296h221.056v-55.232H152.832V998.4h718.272V280.064H594.88z",fill:"",key:1})])}r.defaultProps={className:"icon",height:"25",width:"30",viewBox:"0 0 1024 1024",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(125)).default.div.withConfig({displayName:"EmailPhoneTabsStyled",componentId:"sc-11k35w0-0"})([".forgot-password-tabs{text-align:",";}.email-tab,.sms-tab{&.react-tabs__tab-panel--selected{padding:16px 0;}}.sms-tab{.identifier{margin-top:15px;}}.input-message-phone{font-size:12px;height:20px;color:#D3134F;}.phone-number{input{border:1px solid transparent;color:#42505D;padding:0 10px;box-sizing:border-box;border-radius:3px;width:100%;&::placeholder{color:#929da4;}&:invalid{box-shadow:none;}&--error{border:1px solid #D3134F;}}&.desktop{input{font-size:14px;height:40px;line-height:40px;padding:0 16px;border-radius:5px;border:solid 1px #BAC4CB;}}&.mobile{input{height:35px;&:focus{outline-color:var(--primary-theme-color);}}}.PhoneInputCountrySelectArrow{margin:",";}.PhoneInputCountry{margin:",";}}.react-tabs__tab{&--selected{border-color:var(--primary-theme-color);border-bottom:solid 1px #f1f1f1 !important;background:none;}&-list{font-size:14px;border-bottom-color:var(--primary-theme-color);}&:focus{box-shadow:none;border-color:var(--primary-theme-color);&::after{background:none;}}}"],(function(e){return e.isRtl?"right":"left"}),(function(e){return e.isRtl?"0 6px 0 0":"0 0 0 6px"}),(function(e){return e.isRtl?"0 0 0 6px":"0 6px 0 0"}));t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,a=e.formState,r=e.formProps,f=e.onClickOnMainButton,p=e.renderFooterLink,h=e.getInputMessageClasses,m=e.renderInputField,v=e.onClickGoToLoginFromForgotPassword,g=e.renderPhoneInputField,E=e.handleForgotPasswordEmailSMS,_=l.default.isFeatureEnabled("forgotPasswordSms"),y=(0,o.useState)("0"),k=(0,i.default)(y,2),S=k[0],T=k[1],b=function(e){var t="identifier"===e?"login.forgot.identifier.placeholder":"login.forgot.email.placeholder",n="identifier"===e?"text":"email",r="identifier"===e?"externalId":"email";return o.default.createElement(o.default.Fragment,null,m(r,n,t),o.default.createElement("div",{key:"input-message-email",className:h("email")},a.invalidInputRefs.email||""))};return o.default.createElement("div",{className:"login__user-form ".concat(r.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"login__user-form--fields"},(O=(0,s.default)("login__forgot-password-title",{"login__forgot-password-title--desktop":!l.default.isMobile(),"login__forgot-password-title--mobile":l.default.isMobile()}),A=(0,s.default)("login__forgot-password-subtitle",{"login__forgot-password-subtitle--desktop":!l.default.isMobile(),"login__forgot-password-subtitle--mobile":l.default.isMobile()}),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:O,key:"forgot-password-title"},u.default.translate("login.forgot-password.title")),o.default.createElement("div",{className:A,key:"forgot-password-subtitle"},_&&u.default.translate("login.forgot-password-with-sms.subtitle"),!_&&u.default.translate("login.forgot-password.subtitle")))),_&&o.default.createElement(d.default,{renderPhoneInputField:g,renderEmailSection:b,handleTabIndexChange:function(e){T(e),E(e.toString())},phoneOnly:null===(t=l.default.getAppdata().appConf.featureFlags)||void 0===t||null===(n=t.forgotPasswordSms)||void 0===n?void 0:n.validateExternalId,emailFirst:!1}),!_&&b("email"),(I=(0,s.default)("login__submit-message",{"login__submit-message--desktop":!l.default.isMobile(),"login__submit-message--mobile":l.default.isMobile(),"login__submit-message--error":a.submitMessage.errorMessage}),o.default.createElement("div",{className:I},a.submitMessage.message||a.submitMessage.errorMessage)),(C=(0,s.default)("login__submit-section",{"login__submit-section--mobile":l.default.isMobile()}),o.default.createElement("div",{className:C},o.default.createElement(c.default,{id:"login-submit",dataAutomationId:"login-submit",onClick:function(){return f(S)},disabled:a.submitting,text:u.default.translate("login.submit-button.send")})))),p(v,"login.back"));var C;var I;var O,A};var i=r(n(43)),o=a(n(0)),s=r(n(11));n(73);var l=r(n(14)),u=r(n(22)),c=r(n(36)),d=r(n(200))},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11)),l=a(n(14)),u=a(n(22)),c=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t,n,a,r,i){return o.default.createElement("div",{className:"login__user-form ".concat(n.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"login__user-form--fields"},e.renderResetPasswordInfo(i)),r(a,"login.back"))}},{key:"renderResetPasswordInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"login.reset-password.subtitle-sms":"login.reset-password.subtitle",n=e?"login.reset-password.note-sms":"login.reset-password.note",a=(0,s.default)("login__forgot-password-title",{"login__forgot-password-title--desktop":!l.default.isMobile(),"login__forgot-password-title--mobile":l.default.isMobile()}),r=(0,s.default)("login__forgot-password-subtitle",{"login__forgot-password-subtitle--desktop":!l.default.isMobile(),"login__forgot-password-subtitle--mobile":l.default.isMobile()});return[o.default.createElement("div",{className:a,key:"reset-password-title"},u.default.translate("login.reset-password.title")),o.default.createElement("div",{className:r,key:"reset-password-subtitle"},u.default.translate(t)),o.default.createElement("div",{className:"login__forgot-password-note",key:"reset-password-note"},u.default.translate(n))]}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11)),l=a(n(14)),u=a(n(22)),c=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t,n){return o.default.createElement("div",{className:"login__user-form ".concat(n.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"login__user-form--fields"},e.renderChangePasswordNotificationInfo()))}},{key:"renderChangePasswordNotificationInfo",value:function(){var e=(0,s.default)("login__password-changed-title",{"login__password-changed-title--desktop":!l.default.isMobile(),"login__password-changed-title--mobile":l.default.isMobile()}),t=(0,s.default)("login__password-changed-subtitle",{"login__password-changed-subtitle--desktop":!l.default.isMobile(),"login__password-changed-subtitle--mobile":l.default.isMobile()});return[o.default.createElement("div",{className:e,key:"change-password-title"},u.default.translate("login.changed-password-notification.title")),o.default.createElement("div",{className:t,key:"change-password-subtitle"},u.default.translate("login.changed-password-notification.subtitle"))]}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(11));n(73);var l=a(n(14)),u=a(n(22)),c=a(n(36)),d=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"renderForm",value:function(t,n,a,r,i,s,u){return o.default.createElement("div",{className:"login__user-form ".concat(n.formClass," ").concat(l.default.isMobile()?"login__user-form--mobile":"login__user-form--desktop")},o.default.createElement("div",{className:"login__user-form--fields"},e.renderChangePasswordTitle(t,n,u),e.renderOldPasswordSection(t,n,r),e.renderNewPasswordSection(t,r,a,i),e.renderConfirmPasswordSection(t,r,a),e.renderSubmitErrorField(t),e.renderSubmitButton(t,s)))}},{key:"renderChangePasswordTitle",value:function(e,t,n){if(t.changeMyPassword)return null;var a=(0,s.default)("login__change-password-title",{"login__change-password-title--desktop":!l.default.isMobile(),"login__change-password-title--mobile":l.default.isMobile(),"login__change-password-title--force-change":e.forcePasswordChange}),r=l.default.getURLParam("email");return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:a,key:"change-password-title"},e.forcePasswordChange?u.default.translate("login.force-password-change.title",{periodInDays:n}):u.default.translate("login.change-password.title")),!e.forcePasswordChange&&o.default.createElement("div",{className:"".concat(a," email"),key:"change-password-email"},r))}},{key:"renderOldPasswordSection",value:function(e,t,n){if(!e.forcePasswordChange&&!t.changeMyPassword)return null;var a=(0,s.default)("login__change-password-subtitle",{"login__change-password-subtitle--desktop":!l.default.isMobile(),"login__change-password-subtitle--mobile":l.default.isMobile()});return[o.default.createElement("div",{className:"".concat(a," input-field-title smaller"),key:"change-password-subtitle"},u.default.translate("login.change-password.old-password-field.title")),n(null,void 0,"oldPassword")]}},{key:"renderNewPasswordSection",value:function(e,t,n,a){var r=(0,s.default)("login__change-password-subtitle",{"login__change-password-subtitle--desktop":!l.default.isMobile(),"login__change-password-subtitle--mobile":l.default.isMobile()});return[o.default.createElement("div",{className:"".concat(r," input-field-title smaller"),key:"change-password-subtitle"},u.default.translate("login.change-password.password-field")),t(null,n,void 0,!0),a()]}},{key:"renderConfirmPasswordSection",value:function(e,t,n){var a=(0,s.default)("login__change-password-subtitle",{"login__change-password-subtitle--desktop":!l.default.isMobile(),"login__change-password-subtitle--mobile":l.default.isMobile()});return[o.default.createElement("div",{className:"".concat(a," input-field-title"),key:"change-password-confirm-password"},u.default.translate("login.change-password.password-confirm-field")),t(null,n,"confirmPassword")]}},{key:"renderSubmitErrorField",value:function(e){var t=(0,s.default)("login__submit-message",{"login__submit-message--desktop":!l.default.isMobile(),"login__submit-message--mobile":l.default.isMobile(),"login__submit-message--error":e.submitMessage.errorMessage});return o.default.createElement("div",{key:"submit-error-field",className:t},e.submitMessage.errorMessage)}},{key:"renderSubmitButton",value:function(e,t){var n=(0,s.default)("login__submit-section",{"login__submit-section--mobile":l.default.isMobile()});return o.default.createElement("div",{className:n},o.default.createElement(c.default,{id:"login-submit",dataAutomationId:"login-submit",onClick:t,disabled:e.submitting,text:u.default.translate("login.change-password.password-requirements.confirm-btn")}))}}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(14)),s=a(n(0)),l=a(n(11)),u=a(n(201)),c=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"getLogo",value:function(e,t){if(t&&e!==u.default.SIGNUP_SELF_REGISTRATION_EXPIRED_LINK){if(e===u.default.SIGNUP_SELF_REGISTRATION_CHECK_YOUR_EMAIL){var n=(0,l.default)("login__sunny-check-your-email",{"login__sunny-check-your-email--desktop":!o.default.isMobile(),"login__sunny-check-your-email--mobile":o.default.isMobile()}),a=(0,l.default)("login__sunny-check-your-email-image","login__sunny-check-your-email-image--default");return s.default.createElement("div",{key:"3",className:n},s.default.createElement("div",{className:a}))}var r=(0,l.default)("login__logo",{"login__logo--desktop":!o.default.isMobile(),"login__logo--mobile":o.default.isMobile()});return s.default.createElement("div",{key:"3",className:r},t)}}}]),e}();t.default=c},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"visibility-show",fill:"#536370",fillRule:"nonzero"},a.createElement("g",{id:"visibility-button-copy",transform:"translate(2.400000, 4.000000)"},a.createElement("path",{d:"M11,0.00979112272 C6,0.00979112272 1.7,3.10574413 0,7.5 C1.7,11.8942559 6,14.9902089 11,14.9902089 C16,14.9902089 20.3,11.8942559 22,7.5 C20.3,3.10574413 16,0.00979112272 11,0.00979112272 Z M11,12.4934726 C8.2,12.4934726 6,10.2963446 6,7.5 C6,4.70365535 8.2,2.50652742 11,2.50652742 C13.8,2.50652742 16,4.70365535 16,7.5 C16,10.2963446 13.8,12.4934726 11,12.4934726 Z M11,4.50391645 C9.3,4.50391645 8,5.80221932 8,7.5 C8,9.19778068 9.3,10.4960836 11,10.4960836 C12.7,10.4960836 14,9.19778068 14,7.5 C14,5.80221932 12.7,4.50391645 11,4.50391645 Z",id:"Shape"})))))}r.defaultProps={width:"26px",height:"24px",viewBox:"0 0 26 24",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("polygon",{id:"visibility-hide-path-1",points:"25.9577971 19.9811009 25.9577971 0.0727617106 7.53623188e-05 0.0727617106 7.53623188e-05 19.9811009 25.9577971 19.9811009"})),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{id:"visibility-hide"},a.createElement("g",{id:"Page-1",transform:"translate(-0.200000, 0.800000)"},[a.createElement("path",{d:"M18.5823507,11.6884336 C18.1806696,14.0345276 16.1779159,15.771949 13.6996261,15.771949 C13.4739159,15.771949 13.2525391,15.7563034 13.0354957,15.7282166 L10.2734667,17.7397197 C11.3583072,18.069975 12.5085246,18.2488632 13.6996261,18.2488632 C18.6571478,18.2488632 22.9205826,15.1776027 24.6064377,10.8183091 C24.2573217,9.91595084 23.7962928,9.07014308 23.2429449,8.294081 L18.5823507,11.6884336 Z",id:"Fill-1",fill:"#546370",key:0}),a.createElement("g",{id:"Group-5",transform:"translate(0.000000, 0.115740)",key:1},[a.createElement("mask",{id:"mask-2",fill:"white",key:0},a.createElement("use",{xlinkHref:"#visibility-hide-path-1"})),a.createElement("g",{id:"Clip-4",key:1}),a.createElement("path",{d:"M13.6996261,5.74902339 C14.4903652,5.74902339 15.2326841,5.92640363 15.8902203,6.24346372 L13.833771,7.7367753 C13.7889304,7.73507879 13.7450319,7.73036624 13.6996261,7.73036624 C12.2869594,7.73036624 11.1559594,8.63668309 10.8258725,9.92113464 L8.78995942,11.3995546 C8.75906087,11.1722214 8.74210435,10.9397986 8.74210435,10.7026633 C8.74210435,7.92867018 10.9234667,5.74902339 13.6996261,5.74902339 L13.6996261,5.74902339 Z M1.59474203,19.9811009 L25.9578725,2.2374226 L24.3875101,0.0726674596 L18.5459884,4.31490139 C17.0673797,3.64534285 15.4258,3.2721092 13.6996261,3.2721092 C8.74210435,3.2721092 4.47866957,6.3433697 2.7930029,10.7026633 C3.29416232,11.9988019 4.02461159,13.1795775 4.93216232,14.2012574 L7.53623188e-05,17.7829809 L1.59474203,19.9811009 Z",id:"Fill-3",fill:"#546370",mask:"url(#mask-2)",key:2})])])))])}r.defaultProps={width:"26px",height:"24px",viewBox:"0 0 26 24",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(22))),f=r(n(14)),p=r(n(315)),h=r(n(316)),m=r(n(317));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var g=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var a;(0,i.default)(this,n),(a=t.call(this,e)).handleOnClick=function(e){var t=a._getRedirectUrl(e);window.location.href=t};var r=f.default.getAppdata(),o=r.appConf;return a._siteDomain=(o.siteDetails||r.siteDetails).domain,a._socialGoogleRedirectUrl=f.default.isFeatureEnabled("enableSocialGoogle")?o.socialGoogleRedirectUrl:void 0,a._socialFacebookRedirectUrl=f.default.isFeatureEnabled("enableSocialFacebook")?o.socialFacebookRedirectUrl:void 0,a}return(0,o.default)(n,[{key:"render",value:function(){var e,t,n,a,r,i=this;if(!this._socialGoogleRedirectUrl&&!this._socialFacebookRedirectUrl)return null;var o=this.props.shouldRenderSeparator,s=void 0===o||o,l=this.props.isSignUp?"login.social-login.sign-up":"login.social-login.sign-in",u=(null===(e=f.default.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t||null===(n=t.featureFlags)||void 0===n||null===(a=n.sso)||void 0===a||null===(r=a.google)||void 0===r?void 0:r.enabled)&&"organizational.login.title"||l;return c.default.createElement("div",{className:"login__social-login",key:"social-login"},c.default.createElement("div",{className:"login__social-login-title"},d.default.translate(u)),c.default.createElement("div",{className:"login__social-login-icons"},this._socialGoogleRedirectUrl&&c.default.createElement(m.default,{onClick:function(){return i.handleOnClick(i._socialGoogleRedirectUrl)},onKeyDown:function(e){return 13===e.keyCode&&i.handleOnClick(i._socialGoogleRedirectUrl)}},c.default.createElement("div",{className:"icon"},c.default.createElement(h.default,null)),c.default.createElement("div",{className:"text"},d.default.translate("login.login.google"))),this._socialFacebookRedirectUrl&&c.default.createElement(m.default,{onClick:function(){return i.handleOnClick(i._socialFacebookRedirectUrl)},onKeyDown:function(e){return 13===e.keyCode&&i.handleOnClick(i._socialFacebookRedirectUrl)}},c.default.createElement("div",{className:"icon"},c.default.createElement(p.default,null)),c.default.createElement("div",{className:"text"},d.default.translate("login.login.facebook")))),s&&c.default.createElement("div",{className:"login__social-login-separator"},c.default.createElement("span",{className:"login__social-login-separator-text"},d.default.translate("login.social-login.or"))))}},{key:"_getRedirectUrl",value:function(e){var t="";if(f.default.isGuest())t="&state=guest&access_token=".concat(f.default.getCurrentSessionAccessToken());else{var n="site=".concat(this._siteDomain),a=f.default.getURLParam("token"),r=f.default.getURLParam("invitation_token");a?n+="&token=".concat(a):r&&(n+="&invitation_token=".concat(r)),t="&state=".concat(encodeURIComponent(n))}return e+t}}]),n}(c.Component);t.default=g},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("path",{id:"a",d:"M.001 0H24v23.854H.001z"})),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("mask",{id:"b",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#a"})),a.createElement("path",{d:"M24 12c0-6.627-5.373-12-12-12S0 5.373 0 12c0 5.99 4.388 10.954 10.125 11.854V15.47H7.078V12h3.047V9.356c0-3.007 1.792-4.668 4.533-4.668 1.312 0 2.686.234 2.686.234v2.953H15.83c-1.491 0-1.956.925-1.956 1.874V12h3.328l-.532 3.469h-2.796v8.385C19.612 22.954 24 17.99 24 12",fill:"#1877F2",mask:"url(#b)",key:1}),a.createElement("path",{d:"M16.671 15.469L17.203 12h-3.328V9.749c0-.949.465-1.874 1.956-1.874h1.513V4.922s-1.374-.234-2.686-.234c-2.741 0-4.533 1.66-4.533 4.668V12H7.078v3.469h3.047v8.385a12.09 12.09 0 003.75 0V15.47h2.796",fill:"#FFF",key:2})])])}r.defaultProps={viewBox:"0 0 24 24",style:{display:"block"}},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd"},[a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335",key:0}),a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4",key:1}),a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05",key:2}),a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853",key:3}),a.createElement("path",{d:"M0 0h18v18H0V0z",key:4})]))}r.defaultProps={viewBox:"0 0 18 18",style:{display:"block"}},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(125)).default.button.withConfig({displayName:"StyledSocialLoginButton",componentId:"sc-19ofljb-0"})(["border:solid 2px var(--primary-theme-color);background-color:white;border-radius:36px;height:40px;min-width:270px;display:flex;align-items:center;padding:0 16px;cursor:pointer;margin:10px 0;.icon > svg{height:21px;width:21px;margin:0;flex:0 1 0%;}.text{color:var(--primary-theme-color);font-size:18px;flex:1 1 0%;text-align:center;}:hover,:focus-visible{background-color:","}"],(function(e){return e.theme["grey-hover"]}));t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(36))),f=r(n(18));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._getRedirectUrl=function(){var t=e.props.ssoSamlLoginUrl;return location.pathname.includes("extension-login.html")?"".concat(t,"?returnTo=").concat(location.href):t},e}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:"login__organizational-login"},c.default.createElement("div",{className:"login__organizational-login__title"},f.default.translate("organizational.login.title")),c.default.createElement("a",{title:"OrganizationalLogin",href:this._getRedirectUrl()},c.default.createElement(d.default,{styleClass:"login__organizational-login__button",text:f.default.translate("organizational.login.button")})))}}]),n}(c.Component);t.default=h},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(0)),o=(a(n(2)),a(n(11)));var s=function(e){var t=(0,o.default)("separation-line",(0,r.default)({},e.styleClass,e.styleClass));return i.default.createElement("div",{className:t},i.default.createElement("div",{className:"line"}),e.text?i.default.createElement("div",{className:"text"},e.text):null,i.default.createElement("div",{className:"line"}))};t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={SOCIAL_EMAIL_NOT_FOUND:23,SOCIAL_REQUIRE_SIGNIN:24,SOCIAL_EMAIL_MISMATCH:25,SS_CHANNEL_IS_NOT_AVAILABLE:26,INVITATION_LINK_TOKEN_EXPIRED:27}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(a(n(2)),a(n(18))),o=a(n(36));function s(e){var t=e.logoutRedirectURL;return r.default.createElement("div",{className:"logout-redirect"},r.default.createElement("div",{className:"logout-redirect__title"},i.default.translate("logout-redirect.form.title")),r.default.createElement("div",{className:"logout-redirect__content"},i.default.translate("logout-redirect.form.content")),r.default.createElement(o.default,{text:i.default.translate("logout-redirect.form.button"),onClick:function(){window.location=t}}))}s.defaultProps={loginQueryParams:{}};var l=s;t.default=l},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useRef)(null),t=(0,o.useState)(""),n=(0,i.default)(t,2),a=n[0],r=n[1],v=(0,o.useState)(""),g=(0,i.default)(v,2),E=g[0],_=g[1],y=(0,o.useState)(!1),k=(0,i.default)(y,2),S=k[0],T=k[1],b=(0,o.useState)(""),C=(0,i.default)(b,2),I=C[0],O=C[1],A=(0,o.useState)({show:!1,text:""}),N=(0,i.default)(A,2),w=N[0],R=N[1],P=function(){T(!0)},M=function(){var e,t,n;h.default.getOTP({url:p.default.LOGIN_OTP_PASSCODE,config:{params:{siteId:null===(e=l.default.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t||null===(n=t.siteDetails)||void 0===n?void 0:n.id,externalUserId:I,phoneNumber:a}},successCallback:P}).catch((function(e){switch(e.status){case 401:R({show:!0,text:s.default.translate("login_otp_error")});break;case 429:R({show:!0,text:s.default.translate("login_otp_too-many-retries",{time:"10"})});break;default:R({show:!0,text:s.default.translate("login_otp_error_general")})}}))},L=function(){R({show:!0,text:s.default.translate("login_otp_error_general")})},D=(0,u.default)("phone-number",{mobile:l.default.isMobile(),desktop:!l.default.isMobile()});return o.default.createElement(m.default,{isRtl:l.default.isRtl()},o.default.createElement(c.default,{defaultCountry:"IL",className:D,placeholder:s.default.translate("login.forgot-password.phone-placeholder"),value:a,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";R({show:!1,text:""}),r(e)}}),o.default.createElement("input",{ref:e,className:(x=l.default.getLocale(),F=l.default.getLocaleDirection(x),(0,u.default)("login__input",{"login__input--mobile":l.default.isMobile(),"login__input--desktop":!l.default.isMobile()},"externalId-icon-".concat(F))),onChange:function(e){var t;R({show:!1,text:""}),O(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},value:I,type:"text",placeholder:s.default.translate("login_otp_enter-id"),autoCapitalize:"off",onKeyPress:function(e){13===(e.which||e.keyCode)&&I&&(0,c.isPossiblePhoneNumber)(a)&&M()}}),w.show&&o.default.createElement("div",null,o.default.createElement("span",{className:"error"},w.text)),S&&o.default.createElement(o.default.Fragment,null,o.default.createElement("p",{className:"codeSentTitle"},s.default.translate("login_otp_code-sent_title")),o.default.createElement(f.default,{value:E,onChange:function(){_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},numInputs:6,separator:o.default.createElement("span",null,"-"),inputStyle:"inputStyle",shouldAutoFocus:!0}),o.default.createElement(d.default,{text:s.default.translate("login_otp_button_log-in"),onClick:function(){var e,t,n,a,r,i;h.default.OTPLogin({params:{site:null===(e=l.default.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t||null===(n=t.siteDetails)||void 0===n?void 0:n.name},url:p.default.LOGIN_OTP,config:{params:{siteId:null===(a=l.default.getAppdata())||void 0===a||null===(r=a.appConf)||void 0===r||null===(i=r.siteDetails)||void 0===i?void 0:i.id,externalUserId:I,otp:E}},errorCallback:L})},disabled:E.length<6}),o.default.createElement("a",{onClick:function(){M()},className:"resend"},s.default.translate("login_otp_resend"))),!S&&o.default.createElement(d.default,{text:s.default.translate("login_otp_get-passcode"),onClick:M,disabled:!(I.length>1&&(0,c.isPossiblePhoneNumber)(a))}));var x,F};var i=r(n(43)),o=a(n(0)),s=r(n(22)),l=r(n(14)),u=r(n(11)),c=a(n(251)),d=r(n(36)),f=r(n(586)),p=r(n(57)),h=r(n(119)),m=r(n(323))},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(125)).default.div.withConfig({displayName:"OtpStyled",componentId:"sc-1299sd0-0"})(["display:flex;flex-direction:column;align-items:center;.phone-number{margin-bottom:20px;width:100%;input{border:1px solid transparent;color:#42505D;padding:0 10px;box-sizing:border-box;border-radius:3px;width:100%;&::placeholder{color:#929da4;}&:invalid{box-shadow:none;}&--error{border:1px solid #D3134F;}}&.desktop{input{font-size:14px;height:40px;line-height:40px;padding:0 16px;border-radius:5px;border:solid 1px #BAC4CB;}}&.mobile{input{height:35px;&:focus{outline-color:var(--primary-theme-color);}}}.PhoneInputCountrySelectArrow{margin:",";}.PhoneInputCountry{margin:",";}}.inputStyle{width:24px !important;height:30px;margin:0 6px;font-size:22px;border-radius:4px;border:1px solid rgba(0,0,0,0.3);}.t2k-app-button{margin-top:30px;}.resend{color:#D3134F;font-weight:bold;margin-top:15px;font-size:14px;cursor:pointer;}.codeSentTitle{font-size:14px;}.tooManyTries{color:#D3134F;font-weight:bold;margin-top:15px;font-size:14px;}.error{color:#D3134F;font-size:14px;}"],(function(e){return e.isRtl?"0 6px 0 0":"0 0 0 6px"}),(function(e){return e.isRtl?"0 0 0 6px":"0 6px 0 0"}));t.default=r},function(e,t,n){},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(707));n(710);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(694));n(697);var i=r;t.default=i},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(469));n(476);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_FONT_SIZE=t.TOOLS_V2_EXTENDED=t.TOOLS_V2=t.BASIC_FORMAT=t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=t.MINFORMAT_WITH_UPLOAD_FILES=t.MINFORMAT_PLUS_IMAGE=t.MINFORMAT=t.DEFAULT=t.REGULARPARAGRAPH=t.LONGPARAGRAPH=t.SHORTPARAGRAPH=t.BOXAREA=t.LINEAREA=void 0;var r=a(n(748));n(753);var i=r.LINEAREA;t.LINEAREA=i;var o=r.BOXAREA;t.BOXAREA=o;var s=r.SHORTPARAGRAPH;t.SHORTPARAGRAPH=s;var l=r.LONGPARAGRAPH;t.LONGPARAGRAPH=l;var u=r.REGULARPARAGRAPH;t.REGULARPARAGRAPH=u;var c=r.DEFAULT;t.DEFAULT=c;var d=r.MINFORMAT;t.MINFORMAT=d;var f=r.MINFORMAT_PLUS_IMAGE;t.MINFORMAT_PLUS_IMAGE=f;var p=r.MINFORMAT_WITH_UPLOAD_FILES;t.MINFORMAT_WITH_UPLOAD_FILES=p;var h=r.MINFORMATNOFONTS_WITH_UPLOAD_FILES;t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=h;var m=r.BASIC_FORMAT;t.BASIC_FORMAT=m;var v=r.TOOLS_V2;t.TOOLS_V2=v;var g=r.TOOLS_V2_EXTENDED;t.TOOLS_V2_EXTENDED=g;var E=r.DEFAULT_FONT_SIZE;t.DEFAULT_FONT_SIZE=E;var _=r.default;t.default=_},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(3)),s=a(n(4)),l=a(n(82)),u=a(n(28)),c=a(n(13)),d=a(n(355)),f=n(931),p=u.default.Instance,h=function(){function e(){(0,o.default)(this,e)}var t,n,a;return(0,s.default)(e,null,[{key:"inviteLearners",value:function(e,t){return p.post("".concat(d.default.instance.backendUrl,"/PlayAppService/selfService/:channelId/invite"),{channelId:e},t)}},{key:"getInvitedMembers",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"".concat(f.MEMBER_STATUS.ACTIVE,",").concat(f.MEMBER_STATUS.PENDING_ACTIVATION,",").concat(f.MEMBER_STATUS.INACTIVE),a=n?{status:n}:{};t&&(a.parentId=t);var r="".concat(d.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/members/status");return p.get(r,{channelId:e},{params:a})}},{key:"getInvitationToken",value:function(e,t){var n={channelId:e};t&&(n.tokenExpirationTime=t);var a="".concat(d.default.instance.backendUrl,"/PlayAppService/channels/invitationLink/token");return p.get(a,{},{params:n})}},{key:"removeMember",value:function(e,t){(0,l.default)(t)&&(t=[t]);var n="".concat(d.default.instance.backendUrl,"/PlayAppService/channels/:channelId/members");return p.remove(n,{channelId:e},{params:{memberIds:t.join(",")}})}},{key:"changeRoleInChannel",value:function(e,t,n){var a="".concat(d.default.instance.backendUrl,"/PlayAppService/channels/:channelId/members/:memberId/role?userRole=:newRole");return p.put(a,{channelId:e,memberId:t,newRole:n},{})}},{key:"changeUserStatusInEntity",value:function(e,t,n){var a="".concat(d.default.instance.backendUrl,"/PlayAppService/channels/:channelId/members/:memberId/status?status=:newStatus");return p.put(a,{channelId:e,memberId:t,newStatus:n},{})}},{key:"initiateLearnerPasswordReset",value:function(e){var t="".concat(d.default.instance.backendUrl,"/PlayAppService/users/:userId/passwordReset/email");return p.post(t,{userId:e})}},{key:"getAccountUsersToInvite",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r={params:{usernameSubstring:e,groupnameSubstring:e,roles:"LEARNER",limit:100,start:0,includeUsers:n,includeGroups:a,channelId:t}};return p.get("".concat(d.default.instance.backendUrl,"/LibraryService/v2/channels/account/users"),{},r)}},{key:"searchAccountUsersToInvite",value:function(e,t){var n={params:{channelId:t,role:"LEARNER",phrase:e||"*"}};return p.get("".concat(d.default.instance.backendUrl,"/PlayAppService/search/users"),{},n)}},{key:"getChannelEntities",value:(a=(0,i.default)(r.default.mark((function e(t){var n,a,i,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(d.default.instance.backendUrl,"/PlayAppService/v2/channels/members/status/all"),e.next=3,p.get(o,{},{params:{channelId:t}});case 3:return(s=e.sent).users=(null!==(n=s.users)&&void 0!==n?n:[]).filter((function(e){return e.memberId!==c.default.getUser().id&&!c.default.isInstructor(e)})),s.groups=null!==(a=s.groups)&&void 0!==a?a:[],s.profiles=null!==(i=s.profiles)&&void 0!==i?i:[],e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"saveAssignEntities",value:(n=(0,i.default)(r.default.mark((function e(t,n,a,i,o,s,l){var u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u="".concat(d.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/members/all"),e.abrupt("return",p.post(u,{channelId:t},{userIdsToAdd:n,userIdsToRemove:a,groupIdsToAdd:i,groupIdsToRemove:o,profileIdsToAdd:s,profileIdsToRemove:l}));case 2:case"end":return e.stop()}}),e)}))),function(e,t,a,r,i,o,s){return n.apply(this,arguments)})},{key:"getChannelCandidateMembers",value:(t=(0,i.default)(r.default.mark((function e(t){var n,a,i,o,s,l,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:[],a=u.length>2&&void 0!==u[2]?u[2]:[],i=u.length>3&&void 0!==u[3]?u[3]:[],o=u.length>4&&void 0!==u[4]&&u[4],s={},n.length&&(s.groupIds=n),a.length&&(s.profileIds=a),i.length&&(s.certificateStates=i),o&&(s.noCertificateState=o),l="".concat(d.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/instance/candidates/members/"),e.abrupt("return",p.get(l,{channelId:t},{params:s}));case 11:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})}]),e}();t.default=h},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(40)),i=a(n(3)),o=a(n(4)),s=a(n(13)),l=Symbol("service singleton"),u=Symbol("singleton enforcer"),c=function(){function e(t){if((0,i.default)(this,e),t!==u)throw new Error("Cannot construct singleton");this._user={},this._locale="",this._ltr="",this._accessToken={access_token:"",assets_token:""},this._backendUrl="",this._domain="",this._accountId="",this._isAccountSelfService=!1,this._featureFlags={},this._sizeLimitation={},this._imageMinReosolutionSize=0,this._siteId="",this._channelId="",this._loggerParams="",this._userId="",this._isSSO=!1,this._contextRole={contextId:"",roles:[]}}return(0,o.default)(e,null,[{key:"instance",get:function(){return this[l]||(this[l]=new e(u)),this[l]}}]),(0,o.default)(e,[{key:"setContextRole",value:function(e,t){var n=(0,r.default)(t);this._contextRole={contextId:e,roles:n},s.default.setRoles(n)}},{key:"isSameContext",value:function(e){return this._contextRole.contextId===(e||this._accountId)}},{key:"user",get:function(){return this._user},set:function(e){this._user=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"loggerParams",get:function(){return this._loggerParams},set:function(e){this._loggerParams=e}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"ltr",get:function(){return this._ltr},set:function(e){this._ltr=e}},{key:"accessToken",get:function(){return this._accessToken},set:function(e){this._accessToken=e}},{key:"backendUrl",get:function(){return this._backendUrl},set:function(e){this._backendUrl=e}},{key:"domain",get:function(){return this._domain},set:function(e){this._domain=e}},{key:"accountId",get:function(){return this._accountId},set:function(e){this._accountId=e}},{key:"siteId",get:function(){return this._siteId},set:function(e){this._siteId=e}},{key:"channelId",get:function(){return this._channelId},set:function(e){this._channelId=e}},{key:"isAccountSelfService",get:function(){return this._isAccountSelfService},set:function(e){this._isAccountSelfService=e}},{key:"featureFlags",get:function(){return this._featureFlags},set:function(e){this._featureFlags=e}},{key:"sizeLimitation",get:function(){return this._sizeLimitation},set:function(e){this._sizeLimitation=e}},{key:"imageMinResolutionSize",get:function(){return this._imageMinResolutionSize},set:function(e){this._imageMinResolutionSize=e}},{key:"contextRole",get:function(){return{contextId:this._contextRole.contextId,roles:(0,r.default)(this._contextRole.roles)}}},{key:"isSSO",get:function(){return this._isSSO},set:function(e){this._isSSO=e}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2040));n(2041);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(677)).default;t.default=r},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(379));n(380);var i=r.default;t.default=i},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(846));n(847);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(702));n(440);var i=r.default;t.default=i},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subTitle,a=e.icon;return c.default.createElement("div",{className:"error-page"},c.default.createElement("div",{className:"error-page__content"},a&&c.default.createElement("div",{className:"error-page__icon icon--".concat(a)}),t&&c.default.createElement("div",{className:"error-page__text error-page__text--big"},t),n&&c.default.createElement("div",{className:"error-page__text error-page__text--small"},n)))}}]),n}(c.Component);f.defaultProps={title:"",subTitle:"",icon:""};var p=f;t.default=p},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TOOL_SEPARATOR=t.SEPARATOR=void 0;var r=a(n(61)),i=a(n(13)),o=a(n(21));t.SEPARATOR="/$/";t.TOOL_SEPARATOR="/%/";var s,l,u,c,d,f,p,h,m,v,g,E,_,y,k,S,T,b=(c=!1,d=function(e){var t=e.lastIndexOf("/$/");return t<0?"":e.substring(t+"/$/".length)},f=function(e){var t=e.lastIndexOf("/$/");return t<0?"":e.substring(0,t)},p=function(e){var t;e=d(e);var n=h(e);e?t=E(e):(t={stageUrl:u[s]},n=s),i.default.isAnonymous()&&n!==o.default.STAGES.STORE&&(n=o.default.STAGES.STORE),l(t,n)},h=function(e){var t=new RegExp("(.*?)/").exec(e);return t&&t[1]?t[1]:e&&e.length?e:s},m=function(e,t,n,a){return"".concat(e).concat("/$/").concat(y(t,n,a))},v=function(e){var t="";if(e){var n=Object.keys(e);n.sort(),n.forEach((function(n){e[n]&&(t+="".concat(n,"=").concat(e[n],"&"))})),t&&(t=t.substring(0,t.length-1))}return t},g=function(e){var t=new RegExp(".*?/params/([^/]*)").exec(e);return t&&t[1]?t[1]:""},E=function(e){var t=h(e),n=u[t],a=function(e){var t=g(e),n={};if(t)for(var a=t.split("&"),r=0;r<a.length;r++){var i=a[r].split("=");n[i[0]]=i[1]}return n}(e);return{appId:t,stageUrl:n,hash:e=function(e){var t=(g(e)?new RegExp("[^/]*params/[^/]*/(.*)"):new RegExp("[^/]*/(.*)")).exec(e);return t&&t[1]?t[1]:""}(e),queryParams:a}},_=function(e,t,n){var a=d(i.default.getHash());return e===h(a)&&(n||v(t)===g(a))},y=function(e,t,n){n&&"#"===n[0]?n="/".concat(n.substring(1)):(0,r.default)(n)?n="":""!==n&&"/"!==n[0]&&(n="/".concat(n));var a=v(t);return a&&(a="/params/".concat(a)),"".concat(e).concat(a).concat(n)},T=function(e,t){var n=k(e);if(n.id&&n.hash){var a=k(t);a.id&&n.id===a.id&&(!a.hash||!a.hash.includes("isInboxExpanded/true")&&n.hash.includes("isInboxExpanded/true"))&&S(null)}return i.default.getHash()},{SEPARATOR:"/$/",TOOL_SEPARATOR:"/%/",set:function(e,t,n,a){window.onhashchange=function(e){c?c=!1:p(T(e.oldURL,e.newURL))},u=t,l=a,s=n,p(i.default.getHash())},prevStage:function(){c=!1,window.location.hash=f(i.default.getHash())},setNav:function(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n&&"#"===n[0]&&(n=n.substring(1)),n&&"/"===n[0]&&(n=n.substring(1)),a=r.initUrl?m("",e,t,n):_(e,t,r.ignoreParams)?m(f(i.default.getHash()),e,t,n):m(i.default.getHash(),e,t,n);var o=window.location.hash.split("/%/")[0];if(o!==a)if(r.replace||""===window.location.hash){var s=window.location,l=s.protocol,u=s.host,d=s.pathname,p=s.search;a&&"#"!==a[0]&&(a="#".concat(a)),window.history.replaceState(void 0,void 0,"".concat(l,"//").concat(u).concat(d).concat(p||"").concat(a))}else c=!r.dontPreventNav,window.location.hash=a},setStage:function(e,t,n){t&&Object.keys(t).forEach((function(e){void 0!==t[e]&&null!==t[e]||delete t[e]}));var a=v(t);a&&(a="?".concat(a)),l({stageUrl:u[e],queryParams:t,hash:n},e)},getStage:function(){return E(d(i.default.getHash()))},getAppUrl:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.default.getHref(),o=r.indexOf("#");return(a.href||-1!==o)&&(r=a.href||r.substring(0,o)),"".concat(r).concat(m(a.ignoreCurrentHash?"#":i.default.getHash(),e,t,n))},getActiveTool:k=function(e){e||(e=i.default.getHash());var t=null,n=null;if((e=d(e)).lastIndexOf("/%/")>-1){var a=e.substring(e.lastIndexOf("/%/")+"/%/".length,e.length),r=a.indexOf("/");r>-1?(t=a.substring(0,r),n=a.substring(r,a.length)):t=a}return{id:t,hash:n}},setToolNav:S=function(e,t){var n,a=i.default.getHash();if(e){var r=y(e,null,t);n="".concat(a).concat("/%/").concat(r)}else n=-1!==a.lastIndexOf("/%/")?a.substring(0,a.lastIndexOf("/%/")):a;c=!0,window.location.hash=n},addToolParams:function(e){var t=k().id;if(t){var n=i.default.getHash(),a=n.substring(0,n.lastIndexOf("/%/")),r="".concat(a).concat("/%/").concat(t).concat(e);c=!0,window.location.hash=r}},setDefaultStage:function(e){s=e}});t.default=b},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i=a(n(14)),o={getCoverImage:function(e,t,n){return r.default.get("".concat(e,"/LibraryService/v2/channels/:channelId/items/headers"),{channelId:t},{params:{id:n}}).then((function(e){if(e.length)return i.default.getAssetPath(e[0].image)}))},getConfigRestsList:function(e){var t;return[].concat([{url:"".concat(window.location.origin,"/f2f_config.json")}]).concat([{url:"".concat(e,"/PlayAppService/appConfig"),params:{site:i.default.getSite(),username:(null===(t=i.default.getCurrentToken())||void 0===t?void 0:t.username)||Date.now()}}]).concat([{url:"".concat(e,"/PlayAppService/user/allRolesAndPermissions")}]).concat([{url:"".concat(e,"/LibraryService/v2/channels/withRoles")}]).concat([{url:"".concat(e,"/PlayAppService/initConfig"),config:{params:{site:i.default.getSite()}}}]).concat([{url:"".concat(e,"/PlayAppService/dictionary"),config:{params:{locale:i.default.getLocale(),appName:"t2kapp",site:i.default.getSite()}}}])}};t.default=o},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.newStore=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=(0,i.applyMiddleware)((0,o.default)(e));t.store=r=n?(0,i.compose)(a)(i.createStore)(s.default,n):(0,i.compose)(a)(i.createStore)(s.default);return r},t.default=t.store=void 0;var r,i=n(177),o=a(n(1721)),s=a(n(1723));t.store=r;var l=function(e){if(e&&!r){var n=(0,i.applyMiddleware)((0,o.default)(e));t.store=r=(0,i.compose)(n)(i.createStore)(s.default)}return r};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUIZ=void 0;t.QUIZ="QUIZ"},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(103),i=a(n(193));t.default=function(e){var t=e.entry,n=e.interactions[t],a=i.default.getTaskInteractionStoreByType(n.type);return a&&a.getInteractionActionType?a.getInteractionActionType(n):r.NONE}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(68)),o=r(n(9)),s=a(n(388)),l=r(n(283)),u=r(n(224));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function e(t,n){if(void 0===t||0===Object.keys(t).length)return{};var a={},r={};return Object.keys(t).forEach((function(e){var n=t[e],u=s[n.type],c=n.preset||(0,l.default)(n.type)[0],f=d(d({},(void 0!==u?u[c]:function(){return{interactions:{}}})()),n);"default"!==c&&(f.preset=c);var p=f.interactions,h=(0,i.default)(f,["interactions"]);a=d(d({},a),{},(0,o.default)({},e,h)),r=d(d({},r),p)})),d(d({},a),e(r,n))};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0,a=s[e],r=void 0!==a?a[t]:function(){return{interactions:{}}},i=r(n),l=(0,u.default)(),c={entry:l,interactions:d((0,o.default)({},l,{type:e,data:i.data}),f(i.interactions,n))};return"default"!==t&&(c.interactions[l].preset=t),c}},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT=void 0;var r=a(n(680));t.TEXT=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=e.entry,n=e.interactions[t];return n&&n.getMaxAttempts?n.getMaxAttempts():2}},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.McAnswerType=t.McInteractionMode=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(113)),v=n(55),g=n(102),E=n(103),_=n(67),y=r(n(115));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={SELECTED:"selected",WRONG:"wrong",CORRECT:"correct",SINGLE:"single",MULTIPLE:"multiple",PREV_WRONG:"prev-wrong"};t.McInteractionMode=T;var b={TEXT:"TEXT",IMAGE:"IMAGE",AUDIO:"AUDIO",TEXT_BOOLEAN:"TEXT_BOOLEAN"};t.McAnswerType=b;var C={ANSWER_MODE:(0,m.default)(),RANDOMIZE:(0,m.default)(),CHECKABLE:(0,m.default)()},I=(l=s=function(){function e(){var t,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="MC",this.language={},this.taskApiForInteractions=void 0,this.additionalData=void 0,this.dataMap=void 0,(0,c.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,u.default)(t,C.ANSWER_MODE,(function(e){if(n.setData({mode:e}),0===n.data.correctAnswersIds.length)n.setCorrectAnswer(n.data.options[0]);else if(n.data.correctAnswersIds.length>1){var t=n.data.options.find((function(e){return-1!==n.data.correctAnswersIds.indexOf(e)}));n.setCorrectAnswer(t)}})),(0,u.default)(t,C.RANDOMIZE,(function(e){n.setData({showRandomAnswers:e})})),(0,u.default)(t,C.CHECKABLE,(function(e){var t=e?g.AUTOMATIC:g.NONE_CHECKABLE,a={checkingType:t,checkable:e};n.setData(a),n.taskApiForInteractions.onInteractionCheckableChange(t)})),t),this.setData=this.setData.bind(this),this.addInteraction=this.addInteraction.bind(this),this.removeInteraction=this.removeInteraction.bind(this),this.setCorrectAnswer=this.setCorrectAnswer.bind(this),this.setInteractionIndex=this.setInteractionIndex.bind(this),this.initialize=this.initialize.bind(this),this.setInteractionsData=this.setInteractionsData.bind(this),this.getMaxAttempts=this.getMaxAttempts.bind(this),this.isInteractionSupportGamify=this.isInteractionSupportGamify.bind(this),this.getInteractionActionType=this.getInteractionActionType.bind(this),this.resetCorrectAnswersIds=this.resetCorrectAnswersIds.bind(this),this.language=i,this.taskApiForInteractions=r,this.additionalData=s,this.data={mode:T.SINGLE,checkable:!0,answersType:b.TEXT,showRandomAnswers:!1,checkingType:g.AUTOMATIC,correctAnswersIds:[],options:[]},this.initialize(a,i)}return(0,f.default)(e,null,[{key:"getInteractionActionType",value:function(e){return e.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getFeedbackFields",value:function(e){return e.data.checkable?e.data.mode===T.MULTIPLE?[_.CORRECT,_.PARTIAL,_.WRONG]:[_.CORRECT,_.WRONG]:[]}},{key:"isInteractionSupportGamify",value:function(e){return e.data.checkable}},{key:"getAnswersTypes",value:function(){return Object.keys(b)}}]),(0,f.default)(e,[{key:"setModel",value:function(e){this.data=S(S({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"addInteraction",value:function(){var e=this.data.answersType===b.TEXT_BOOLEAN?b.TEXT:this.data.answersType,t=this.taskApiForInteractions.createInteractionDataByType(e,e,this.language,this.additionalData),n=this.taskApiForInteractions.addInteraction(t);this.data.options.push(n),this.taskApiForInteractions.onInteractionChange()}},{key:"removeInteraction",value:function(e){var t=this.data.options.indexOf(e),n=this.data.correctAnswersIds.filter((function(t){return t!==e}));this.data.options.splice(t,1),this.data.correctAnswersIds=n,0===n.length&&this.setCorrectAnswer(this.data.options[0]),this.taskApiForInteractions.removeInteraction(e),this.taskApiForInteractions.onInteractionChange()}},{key:"setCorrectAnswer",value:function(e){if(-1!==this.data.options.indexOf(e)){if(this.data.mode===T.SINGLE)this.data.correctAnswersIds=[e];else if(this.data.mode===T.MULTIPLE){var t=this.data.correctAnswersIds.indexOf(e);-1===t?this.data.correctAnswersIds.push(e):this.data.correctAnswersIds.length>1&&this.data.correctAnswersIds.splice(t,1)}this.taskApiForInteractions.onInteractionChange()}}},{key:"resetCorrectAnswersIds",value:function(){this.data.correctAnswersIds=[],this.taskApiForInteractions.onInteractionChange()}},{key:"setInteractionIndex",value:function(e,t){var n=this.data.options;n.splice(t,0,n.splice(e,1)[0]),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){var n=this.additionalData.reducedEditor?3:2;if(this.data.answersType=b[e]||b.TEXT,this.data.answersType===b.TEXT_BOOLEAN&&(n=2),!this.additionalData.onInteractionCreationFromServer){for(var a=0;a<n;a++)this.addInteraction();this.setInteractionsData(t)}this.data.options.length>0&&this.setCorrectAnswer(this.data.options[0])}},{key:"setInteractionsData",value:function(e){var t=this;if(this.data.answersType===b.TEXT_BOOLEAN){["TRUE","FALSE"].forEach((function(n,a){var r=t.data.options[a];t.taskApiForInteractions.getInteraction(r).setData({html:e[n]})}))}}},{key:"getMaxAttempts",value:function(){return this.data.answersType!==b.TEXT_BOOLEAN?2:1}},{key:"isInteractionSupportGamify",value:function(){return this.data.checkable}},{key:"getInteractionActionType",value:function(){return this.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getSettingsSchemes",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkableIndication:!0},a=[{id:C.CHECKABLE,label:e.CHECKABLE,currentValue:this.data.checkable,type:y.TOGGLE}];"TEXT_BOOLEAN"!==this.data.answersType&&(a=a.concat([{id:C.ANSWER_MODE,values:(t={},(0,u.default)(t,T.SINGLE,e.SINGLE_ANSWER),(0,u.default)(t,T.MULTIPLE,e.MULTIPLE_ANSWERS),t),currentValue:this.data.mode,type:y.SINGLE_SELECTION},{id:C.RANDOMIZE,name:"randomize",label:e.RANDOMIZE,currentValue:this.data.showRandomAnswers,type:y.TOGGLE}]));return a.filter((function(e){return!(!1===n.checkableIndication&&e.id===C.CHECKABLE)}))}},{key:"preset",get:function(){return this.data.answersType}}]),e}(),s.category=v.DEFAULT,i=l,o=(0,p.default)(i.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(i.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"addInteraction",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addInteraction"),i.prototype),(0,p.default)(i.prototype,"removeInteraction",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeInteraction"),i.prototype),(0,p.default)(i.prototype,"setCorrectAnswer",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setCorrectAnswer"),i.prototype),(0,p.default)(i.prototype,"resetCorrectAnswersIds",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"resetCorrectAnswersIds"),i.prototype),(0,p.default)(i.prototype,"setInteractionIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setInteractionIndex"),i.prototype),(0,p.default)(i.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),i);t.default=I},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.playerTypes=void 0;var r,i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=n(55);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={HTML_PLAYER:1,SINGLE_BUTTON:2};t.playerTypes=g;var E=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,e),this.type="AUDIO",this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,u.default)(this,"data",i,this),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.setTitle=this.setTitle.bind(this),this.setCredit=this.setCredit.bind(this),this.setPlayerMode=this.setPlayerMode.bind(this),this.setAudio=this.setAudio.bind(this),this.taskApiForInteractions=n,this.additionalData=r,this.initialize(t,a)}return(0,d.default)(e,[{key:"setModel",value:function(e){this.data=v(v({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){this.setModel({src:void 0,player:g.HTML_PLAYER})}},{key:"setSrc",value:function(e){this.setData({src:e})}},{key:"setTitle",value:function(e){this.setData({title:e})}},{key:"setDescription",value:function(e){this.setData({description:e})}},{key:"setCredit",value:function(e){this.setData({credit:e})}},{key:"setAutoPlay",value:function(e){this.setData({autoPlay:e})}},{key:"setPlayerMode",value:function(e){this.setData({player:e})}},{key:"setAudio",value:function(e,t){this.setSrc(e),void 0!==t&&this.setTitle(t)}}]),e}(),o.category=h.MEDIA,r=s,i=(0,f.default)(r.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{showTitle:!0,showCredit:!0,src:void 0,player:g.HTML_PLAYER,title:"",description:"",credit:"",autoPlay:!1}}}),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,f.default)(r.prototype,"setSrc",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setSrc"),r.prototype),(0,f.default)(r.prototype,"setTitle",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTitle"),r.prototype),(0,f.default)(r.prototype,"setDescription",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setDescription"),r.prototype),(0,f.default)(r.prototype,"setCredit",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setCredit"),r.prototype),(0,f.default)(r.prototype,"setAutoPlay",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setAutoPlay"),r.prototype),(0,f.default)(r.prototype,"setPlayerMode",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setPlayerMode"),r.prototype),(0,f.default)(r.prototype,"setAudio",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setAudio"),r.prototype),r);t.default=E},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.formatTypes=void 0;var r,i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=a(n(13)),m=n(55);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={HTML5:1,YOUTUBE:2,VIMEO:4};t.formatTypes=E;var _=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,e),this.type="VIDEO",this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,u.default)(this,"data",i,this),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.setTitle=this.setTitle.bind(this),this.setCredit=this.setCredit.bind(this),this.setVideo=this.setVideo.bind(this),this.resetData=this.resetData.bind(this),this.taskApiForInteractions=n,this.additionalData=r,this.initialize(t,a)}return(0,d.default)(e,[{key:"setModel",value:function(e){this.data=g(g({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){this.resetData()}},{key:"setTitle",value:function(e){this.setData({title:e})}},{key:"setDescription",value:function(e){this.setData({description:e})}},{key:"setCredit",value:function(e){this.setData({credit:e})}},{key:"setVideo",value:function(e,t){this.setData({src:e,format:E.HTML5,name:t.name})}},{key:"resetData",value:function(){this.setData({src:void 0,format:void 0,name:"",title:"",credit:""})}},{key:"generateEmbeddedLink",value:function(t){try{var n,a,r=e.generateEmbeddedId(t);switch(r.format){case E.YOUTUBE:n="//www.youtube.com/embed/"+r.id+"?wmode=opaque",(a=h.default.getURLParam("t",t))&&(a=parseInt(a,10)),this.setData({src:n,format:r.format,name:t,startTime:a});break;case E.VIMEO:n="//player.vimeo.com/video/"+r.id,this.setData({src:n,format:r.format,name:t})}}catch(i){throw new Error(i)}}}],[{key:"generateEmbeddedId",value:function(e){var t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,n=e.match(t);if(n&&11===n[2].length)return{format:E.YOUTUBE,id:n[2]};if(t=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,(n=e.match(t))&&n[3])return{format:E.VIMEO,id:n[3]};throw new Error("not a valid link")}}]),e}(),o.category=m.MEDIA,r=s,i=(0,f.default)(r.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{showTitle:!0,showCredit:!0,src:void 0,format:void 0,name:"",title:"",description:"",credit:"",startTime:void 0}}}),(0,f.default)(r.prototype,"setModel",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setModel"),r.prototype),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,f.default)(r.prototype,"setTitle",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTitle"),r.prototype),(0,f.default)(r.prototype,"setDescription",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setDescription"),r.prototype),(0,f.default)(r.prototype,"setCredit",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setCredit"),r.prototype),(0,f.default)(r.prototype,"setVideo",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setVideo"),r.prototype),(0,f.default)(r.prototype,"resetData",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"resetData"),r.prototype),(0,f.default)(r.prototype,"generateEmbeddedLink",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"generateEmbeddedLink"),r.prototype),r);t.default=_},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RichMediaType=void 0;var r,i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=n(55);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio"};t.RichMediaType=g;var E=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,e),this.type="RICHMEDIA",this.language={},this.taskApiForInteractions=void 0,this.onInteractionCreationFromServer=void 0,this.setToQuestion=!1,(0,u.default)(this,"data",i,this),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.addInteractionByType=this.addInteractionByType.bind(this),this.removeInteraction=this.removeInteraction.bind(this),this.language=a,this.taskApiForInteractions=n,this.setToQuestion=r.setToQuestion,this.onInteractionCreationFromServer=r.onInteractionCreationFromServer,this.data={children:[]},this.additionalData=void 0,r&&r.html&&(this.additionalData={html:r.html}),this.initialize(t,a)}return(0,d.default)(e,[{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"setModel",value:function(e){this.data=v(v({},this.data),e)}},{key:"addInteractionByType",value:function(t){if(!e.isValidChildType(t))throw new Error("interactionType is invalid argument in addChildByType");var n,a=this.taskApiForInteractions.createInteractionDataByType(t,t,this.language,this.additionalData);n=this.setToQuestion?this.taskApiForInteractions.addInteractionToQuestion(a):this.taskApiForInteractions.addInteraction(a),this.data.children.push(n),this.taskApiForInteractions.onInteractionChange()}},{key:"removeInteraction",value:function(e){var t=this.data.children[e];if(void 0===t)throw new Error("requested deleted child is not part of the model");this.data.children.splice(e,1),this.setToQuestion?this.taskApiForInteractions.removeInteractionFromQuestion(t):this.taskApiForInteractions.removeInteraction(t),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"TEXT",t="default"===e?"TEXT":e;this.onInteractionCreationFromServer||this.addInteractionByType(t)}}],[{key:"isValidChildType",value:function(e){return Object.keys(g).indexOf(e)>-1}}]),e}(),o.category=h.MEDIA,r=s,i=(0,f.default)(r.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,f.default)(r.prototype,"setModel",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setModel"),r.prototype),(0,f.default)(r.prototype,"addInteractionByType",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"addInteractionByType"),r.prototype),(0,f.default)(r.prototype,"removeInteraction",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"removeInteraction"),r.prototype),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),r);t.default=E},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_COLUMNS=t.MIN_ROWS=t.MIN_COLUMNS=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(113)),v=n(55),g=n(102),E=n(103),_=n(67),y=r(n(115));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={HIDE_TABLE:(0,m.default)(),HIDE_NUMBERS:(0,m.default)(),CHECKABLE:(0,m.default)()};t.MIN_COLUMNS=2;t.MIN_ROWS=2;t.MAX_COLUMNS=7;var b=(l=s=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="CHOICE_MATRIX",this.language={},this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,c.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,u.default)(t,T.HIDE_TABLE,this.setHideTable.bind(this)),(0,u.default)(t,T.HIDE_NUMBERS,this.setHideNumbers.bind(this)),(0,u.default)(t,T.CHECKABLE,this.setCheckable.bind(this)),t),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.addRow=this.addRow.bind(this),this.removeRow=this.removeRow.bind(this),this.setRowText=this.setRowText.bind(this),this.addColumn=this.addColumn.bind(this),this.removeColumn=this.removeColumn.bind(this),this.setColumnText=this.setColumnText.bind(this),this.setCorrectIndexForRowIndex=this.setCorrectIndexForRowIndex.bind(this),this.getInteractionActionType=this.getInteractionActionType.bind(this),this.language=r,this.taskApiForInteractions=a,this.additionalData=i,this.data={checkable:!0,hideNumbers:!0,hideTable:!1,checkingType:g.AUTOMATIC,columns:[],rows:[]},this.initialize(n,r)}return(0,f.default)(e,null,[{key:"getInteractionActionType",value:function(e){return e.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getFeedbackFields",value:function(e){return e.data.checkable?[_.CORRECT,_.PARTIAL,_.WRONG]:[]}}]),(0,f.default)(e,[{key:"setModel",value:function(e){this.data=S(S({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){for(var n=[],a=0;a<2;a++)n.push({correctIndex:0,text:""});for(var r=[],i=0;i<2;i++)r.push("");this.setModel({checkable:!0,hideNumbers:!0,hideTable:!1,checkingType:g.AUTOMATIC,columns:r,rows:n})}},{key:"addRow",value:function(){this.data.rows.push({correctIndex:0,text:""}),this.taskApiForInteractions.onInteractionChange()}},{key:"removeRow",value:function(e){if(2>=this.data.rows.length)throw new Error("Choice Matrix interaction - Can't remove the row, reached the minimum (".concat(2,")."));this.data.rows.splice(e,1),this.taskApiForInteractions.onInteractionChange()}},{key:"setRowText",value:function(e,t){e>-1&&e<this.data.rows.length&&(this.data.rows[e].text=t),this.taskApiForInteractions.onInteractionChange()}},{key:"setRowIndex",value:function(e,t){this.data.rows.splice(t,0,this.data.rows.splice(e,1)[0]),this.taskApiForInteractions.onInteractionChange()}},{key:"addColumn",value:function(){if(7<=this.data.columns.length)throw new Error("Choice Matrix interaction - Can't add another column, reached the max (".concat(7,")."));this.data.columns.push(""),this.taskApiForInteractions.onInteractionChange()}},{key:"removeColumn",value:function(e){if(2>=this.data.columns.length)throw new Error("Choice Matrix interaction - Can't remove the column, reached the minimum (".concat(2,")."));this.data.columns.splice(e,1),this.data.rows.map((function(t){t.correctIndex===e?t.correctIndex=0:t.correctIndex>e&&t.correctIndex--})),this.taskApiForInteractions.onInteractionChange()}},{key:"setColumnText",value:function(e,t){e>-1&&e<this.data.columns.length&&(this.data.columns[e]=t),this.taskApiForInteractions.onInteractionChange()}},{key:"setCorrectIndexForRowIndex",value:function(e,t){this.data.rows[e].correctIndex=t,this.taskApiForInteractions.onInteractionChange()}},{key:"setHideNumbers",value:function(e){this.setData({hideNumbers:e})}},{key:"setHideTable",value:function(e){this.setData({hideTable:e})}},{key:"setCheckable",value:function(e){var t=e?g.AUTOMATIC:g.NONE_CHECKABLE,n={checkingType:t,checkable:e};this.setData(n),this.taskApiForInteractions.onInteractionCheckableChange(t)}},{key:"getInteractionActionType",value:function(){return this.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getSettingsSchemes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkableIndication:!0};return[{id:T.CHECKABLE,label:e.CHECKABLE,currentValue:this.data.checkable,type:y.TOGGLE},{id:T.HIDE_TABLE,type:y.TOGGLE,name:"hide_table",label:e.HIDE_TABLE,currentValue:this.data.hideTable},{id:T.HIDE_NUMBERS,name:"hide_numbers",type:y.TOGGLE,label:e.HIDE_NUMBERS,currentValue:this.data.hideNumbers}].filter((function(e){return!(!1===t.checkableIndication&&e.id===T.CHECKABLE)}))}}]),e}(),s.category=v.DEFAULT,i=l,o=(0,p.default)(i.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(i.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),(0,p.default)(i.prototype,"addRow",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addRow"),i.prototype),(0,p.default)(i.prototype,"removeRow",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeRow"),i.prototype),(0,p.default)(i.prototype,"setRowText",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setRowText"),i.prototype),(0,p.default)(i.prototype,"setRowIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setRowIndex"),i.prototype),(0,p.default)(i.prototype,"addColumn",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addColumn"),i.prototype),(0,p.default)(i.prototype,"removeColumn",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeColumn"),i.prototype),(0,p.default)(i.prototype,"setColumnText",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setColumnText"),i.prototype),(0,p.default)(i.prototype,"setCorrectIndexForRowIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setCorrectIndexForRowIndex"),i.prototype),(0,p.default)(i.prototype,"setHideNumbers",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setHideNumbers"),i.prototype),(0,p.default)(i.prototype,"setHideTable",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setHideTable"),i.prototype),(0,p.default)(i.prototype,"setCheckable",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setCheckable"),i.prototype),i);t.default=b},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FITGAnswerMode=t.FITGInteractionMode=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(113)),v=n(102),g=n(55),E=n(103),_=n(67),y=r(n(115));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={SELECTED:"selected",WRONG:"wrong",CORRECT:"correct",SINGLE:"single",MULTIPLE:"multiple"};t.FITGInteractionMode=T;var b={WRITINGGAP:"WRITING",DNDGAP:"DND"};t.FITGAnswerMode=b;var C={CHECKABLE:(0,m.default)(),CASE_SENSITIVE:(0,m.default)(),DUPLICATE_ITEMS:(0,m.default)()},I=(l=s=function(){function e(){var t,n=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="FILL_IN_GAPS",this.taskApiForInteractions=void 0,this.additionalData=void 0,this.createDuplicates=void 0,(0,c.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,u.default)(t,C.CHECKABLE,(function(e){var t=e?v.AUTOMATIC:v.NONE_CHECKABLE,a={checkingType:t,checkable:e};n.setData(a),n.taskApiForInteractions.onInteractionCheckableChange(t)})),(0,u.default)(t,C.CASE_SENSITIVE,(function(e){n.setData({caseSensitive:e})})),(0,u.default)(t,C.DUPLICATE_ITEMS,(function(e){n.setData({displayDuplicates:e})})),t),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.addDistractorToModel=this.addDistractorToModel.bind(this),this.deleteDistractorFromModel=this.deleteDistractorFromModel.bind(this),this.editDistractorInModel=this.editDistractorInModel.bind(this),this.deleteGapFromModel=this.deleteGapFromModel.bind(this),this.updateModel=this.updateModel.bind(this),this.getInteractionActionType=this.getInteractionActionType.bind(this),this.createDuplicates=e.createDuplicates,this.taskApiForInteractions=r,this.additionalData=S(S({},this.additionalData),s),this.data={checkable:!0,checkingType:v.AUTOMATIC,caseSensitive:!1,displayDuplicates:!0,html:"",gaps:{},distractors:{},mode:T.SINGLE,answersType:b.WRITINGGAP},this.initialize(a,i)}return(0,f.default)(e,null,[{key:"createDuplicates",value:function(e){var t,n={};return Object.keys(e).forEach((function(a){t=e[a],n[e[a]]?n[t].push(a):n[t]=[a]})),n}},{key:"getInteractionActionType",value:function(e){return e.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getFeedbackFields",value:function(e){return e.data.checkable?[_.CORRECT,_.PARTIAL,_.WRONG]:[]}},{key:"getAnswersTypes",value:function(){var e=[];return Object.keys(b).forEach((function(t){e.push(b[t])})),e}}]),(0,f.default)(e,[{key:"setModel",value:function(e){this.data=S(S({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){var n=this;if(this.data.answersType=e,this.additionalData&&this.additionalData.suggestedData){var a=this.additionalData.suggestedData,r=a.html,i=a.gaps;r&&i&&(this.data.html=r,i.forEach((function(e){n.addGapToModel((0,m.default)(),e)})))}}},{key:"addDistractorToModel",value:function(e,t){this.data.distractors[e]=t,this.taskApiForInteractions.onInteractionChange()}},{key:"deleteDistractorFromModel",value:function(e){delete this.data.distractors[e],this.taskApiForInteractions.onInteractionChange()}},{key:"editDistractorInModel",value:function(e,t){this.addDistractorToModel(e,t)}},{key:"addGapToModel",value:function(e,t){this.data.gaps[e]=t;var n=this.data.html,a=new RegExp("\\b(".concat(t,")\\b"),"g");n=n.replace(a,'<span class="gap" contenteditable="false" id="'.concat(e,'">').concat(t,"</span>")),this.data.html=n,this.taskApiForInteractions.onInteractionChange()}},{key:"deleteGapFromModel",value:function(e,t){delete this.data.gaps[e],this.data.html=t,this.taskApiForInteractions.onInteractionChange()}},{key:"updateModel",value:function(e,t){this.setData({html:e,gaps:t})}},{key:"getInteractionActionType",value:function(){return this.data.checkable?E.CHECK:E.CHECKABLEOFF}},{key:"getSettingsSchemes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkableIndication:!0};return(this.data.answersType===b.WRITINGGAP?[{id:C.CHECKABLE,label:e.CHECKABLE,currentValue:this.data.checkable,type:y.TOGGLE},{id:C.CASE_SENSITIVE,label:e.CASE_SENSITIVE,currentValue:this.data.caseSensitive,type:y.TOGGLE,disabled:!this.data.checkable}]:this.additionalData.reducedEditor?[]:[{id:C.DUPLICATE_ITEMS,label:e.DUPLICATE_ITEMS,currentValue:this.data.displayDuplicates,type:y.TOGGLE}]).filter((function(e){return!(!1===t.checkableIndication&&e.id===C.CHECKABLE)}))}},{key:"preset",get:function(){return this.data.answersType}}]),e}(),s.category=g.DEFAULT,i=l,o=(0,p.default)(i.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(i.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),(0,p.default)(i.prototype,"addDistractorToModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addDistractorToModel"),i.prototype),(0,p.default)(i.prototype,"deleteDistractorFromModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"deleteDistractorFromModel"),i.prototype),(0,p.default)(i.prototype,"editDistractorInModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"editDistractorInModel"),i.prototype),(0,p.default)(i.prototype,"addGapToModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addGapToModel"),i.prototype),(0,p.default)(i.prototype,"deleteGapFromModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"deleteGapFromModel"),i.prototype),(0,p.default)(i.prototype,"updateModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"updateModel"),i.prototype),i);t.default=I},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MIN_ROWS=t.DEFAULT_COLUMNS_COUNT=t.MAX_COLUMNS=t.MIN_COLUMNS=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(113)),v=n(55),g=n(103),E=r(n(115)),_=n(54);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={SHOW_NUMBERS:(0,m.default)(),ALLOW_TEXT_ANSWERS:(0,m.default)(),OPTIONS_NUMBER:(0,m.default)(),INCLUDE_NOT_APPLICABLE_OPTION:(0,m.default)(),RANDOMIZE:(0,m.default)()};t.MIN_COLUMNS=2;t.MAX_COLUMNS=6;t.DEFAULT_COLUMNS_COUNT=5;t.MIN_ROWS=1;var T=(l=s=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="RATING",this.language={},this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,c.default)(this,"data",o,this),this.settingsFunctions=(t={},(0,u.default)(t,S.SHOW_NUMBERS,this.setShowNumbers.bind(this)),(0,u.default)(t,S.ALLOW_TEXT_ANSWERS,this.allowTextAnswers.bind(this)),(0,u.default)(t,S.OPTIONS_NUMBER,this.changeColumnsCount.bind(this)),(0,u.default)(t,S.INCLUDE_NOT_APPLICABLE_OPTION,this.includeNotApplicableOption.bind(this)),(0,u.default)(t,S.RANDOMIZE,this.randomizeAnswers.bind(this)),t),this.language=r,this.taskApiForInteractions=a,this.additionalData=i,this.initialize(n)}return(0,f.default)(e,[{key:"preset",get:function(){return this.data.answersType}}],[{key:"getInteractionActionType",value:function(){return g.SAVE}},{key:"getAnswersTypes",value:function(){return[_.CONTAINER_SUBTYPE]}}]),(0,f.default)(e,[{key:"setModel",value:function(e){this.data=k(k({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e){if(e===_.CONTAINER_SUBTYPE){for(var t=[],n=0;n<5;n++)t.push(n+1);t.push(0),this.data={answersType:_.CONTAINER_SUBTYPE,showNumbers:!1,allowTextAnswers:!0,includeNotApplicable:!0,columns:t,rows:[]}}}},{key:"addRow",value:function(){this.taskApiForInteractions.addSubtask(this.type,_.SUBTASK_SUBTYPE,this.language),this.data.rows.push({text:""}),this.taskApiForInteractions.onInteractionChange()}},{key:"removeRow",value:function(e){if(1>=this.data.rows.length)throw new Error("Rating interaction - Can't remove the row, reached the minimum (".concat(1,")."));this.taskApiForInteractions.removeSubtask(e),this.data.rows.splice(e,1),this.taskApiForInteractions.onInteractionChange()}},{key:"setRowText",value:function(e,t){e>-1&&e<this.data.rows.length&&(this.data.rows[e].text=t),this.taskApiForInteractions.onInteractionChange()}},{key:"setRowIndex",value:function(e,t){this.taskApiForInteractions.changeSubtasksOrder(e,t),this.data.rows.splice(t,0,this.data.rows.splice(e,1)[0]),this.taskApiForInteractions.onInteractionChange()}},{key:"changeColumnsCount",value:function(e){var t=parseInt(e,10),n=this.data.includeNotApplicable?this.data.columns.length-1:this.data.columns.length;t>n&&this.addColumns(t),t<n&&this.removeColumns(t)}},{key:"addColumns",value:function(e){if(e>6)throw new Error("Rating interaction - Can't add another column, reached the max (".concat(6,")."));this.data.includeNotApplicable&&this.data.columns.pop();for(var t=this.data.columns.length;t<e;t++)this.data.columns.push(t+1);this.data.includeNotApplicable&&this.data.columns.push(0),this.taskApiForInteractions.onInteractionChange()}},{key:"removeColumns",value:function(e){if(e<2)throw new Error("Rating interaction - Can't remove the column, reached the minimum (".concat(2,")."));var t=this.data.columns.length-e-(this.data.includeNotApplicable?1:0);this.data.columns.splice(e,t),this.taskApiForInteractions.onInteractionChange()}},{key:"setShowNumbers",value:function(e){this.setData({showNumbers:e})}},{key:"allowTextAnswers",value:function(e){this.setData({allowTextAnswers:e})}},{key:"includeNotApplicableOption",value:function(e){e?this.data.columns.push(0):0===this.data.columns[this.data.columns.length-1]&&this.data.columns.pop(),this.setData({includeNotApplicable:e})}},{key:"randomizeAnswers",value:function(e){this.setData({showRandomAnswers:e})}},{key:"getInteractionActionType",value:function(){return g.SAVE}},{key:"getSettingsSchemes",value:function(e){var t=this.data.includeNotApplicable?this.data.columns.length-1:this.data.columns.length;return[{id:S.OPTIONS_NUMBER,values:[{key:"2",value:2},{key:"3",value:3},{key:"4",value:4},{key:"5",value:5},{key:"6",value:6}],label:e.OPTIONS_NUMBER,currentValue:t.toString(),type:E.SINGLE_SELECTION},{id:S.INCLUDE_NOT_APPLICABLE_OPTION,name:"include_not_relevant",type:E.TOGGLE,label:e.INCLUDE_NOT_APPLICABLE_OPTION,currentValue:this.data.includeNotApplicable},{id:S.ALLOW_TEXT_ANSWERS,name:"allow_text_answers",type:E.TOGGLE,label:e.ALLOW_TEXT_ANSWERS,currentValue:this.data.allowTextAnswers},{id:S.SHOW_NUMBERS,name:"show_numbers",type:E.TOGGLE,label:e.SHOW_NUMBERS,currentValue:this.data.showNumbers},{id:S.RANDOMIZE,name:"randomize",type:E.TOGGLE,label:e.RANDOMIZE,currentValue:this.data.showRandomAnswers}]}}]),e}(),s.category=v.DEFAULT,i=l,o=(0,p.default)(i.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(i.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"addRow",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addRow"),i.prototype),(0,p.default)(i.prototype,"removeRow",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeRow"),i.prototype),(0,p.default)(i.prototype,"setRowText",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setRowText"),i.prototype),(0,p.default)(i.prototype,"setRowIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setRowIndex"),i.prototype),(0,p.default)(i.prototype,"addColumns",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"addColumns"),i.prototype),(0,p.default)(i.prototype,"removeColumns",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"removeColumns"),i.prototype),(0,p.default)(i.prototype,"setShowNumbers",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setShowNumbers"),i.prototype),(0,p.default)(i.prototype,"allowTextAnswers",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"allowTextAnswers"),i.prototype),(0,p.default)(i.prototype,"includeNotApplicableOption",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"includeNotApplicableOption"),i.prototype),(0,p.default)(i.prototype,"randomizeAnswers",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"randomizeAnswers"),i.prototype),i);t.default=T},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(53)).default.LogManager,s=function(){function e(t,n){(0,r.default)(this,e),this._environmentOptions=t,this._loggerId=this._getLoggerId(n)}return(0,i.default)(e,[{key:"_getLoggerId",value:function(e){return t=this._environmentOptions.serviceUrl,n=e.userDetails.id,a=e.appConf.loggerParams,r={userAgent:navigator.userAgent,userId:n,appId:"Interactions",appVersion:"0.6908.0"},i="".concat(t,"/Interactions/log"),s="Interactions-".concat(t,"-").concat(n),o.registerLogger(s,r,a,{},i),s;var t,n,a,r,i,s}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.log.apply(o,[this._loggerId].concat(t))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.debug.apply(o,[this._loggerId].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.info.apply(o,[this._loggerId].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.warn.apply(o,[this._loggerId].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.error.apply(o,[this._loggerId].concat(t))}}]),e}();t.default=s},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(6)),l=a(n(8)),u=a(n(7)),c=n(0),d=a(n(128));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}t.default=function(e,t){return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.withRef,l=void 0!==r&&r,u=a.mapFnForProperty,f=void 0===u?{}:u;return function(a){var r=function(e){(0,s.default)(u,e);var r=h(u);function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,o.default)(u,[{key:"render",value:function(){var e=this,r=t(this.context),i=void 0!==r?n(r):{},o=p(p({},i),this.props);return Object.keys(f).forEach((function(t){o[t]=f[t](i[t],e.props[t])})),(0,c.createElement)(a,p(p({},o),{},{ref:l?"wrappedInstance":void 0}))}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}}]),u}(c.Component);return r.contextTypes=e,(0,d.default)(r,a)}}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(285));t.default=function(e){window.setTimeout((function(){e.scrollIntoViewIfNeeded();var t=function(){document.activeElement===e&&e.scrollIntoViewIfNeeded()};r.default.register(t),window.setTimeout((function(){r.default.unregister(t)}),500)}))}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(703));n(704);var i=r.default;t.default=i},function(e,t,n){},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#36474f}.cls-2{fill:none;stroke:#36474f;stroke-width:.5px}\n        ")),a.createElement("g",{id:"Group_933","data-name":"Group 933",transform:"translate(-454 -389.243)",key:1},[a.createElement("path",{id:"Path_836",d:"M5.661 0v-1.5c0-1.65 2.867-3 6.37-3s6.37 1.35 6.37 3V0zm3.185-9a3.1 3.1 0 0 1 3.186-3 3.1 3.1 0 0 1 3.185 3 3.1 3.1 0 0 1-3.185 3 3.1 3.1 0 0 1-3.186-3z",className:"cls-1","data-name":"Path 836",transform:"translate(448.339 408)",key:0}),a.createElement("g",{id:"Group_932","data-name":"Group 932",transform:"translate(454.3 389.243)",key:1},[a.createElement("path",{id:"Path_837",d:"M2.139 2.139L8.485 0l-.713 7.772L0 8.485z",className:"cls-1","data-name":"Path 837",transform:"rotate(45 3 7.243)",key:0}),a.createElement("path",{id:"Line_37",d:"M0 0v4",className:"cls-2","data-name":"Line 37",transform:"translate(11.7 6.058)",key:1})])])])}r.defaultProps={width:"12.74",height:"18.761",viewBox:"0 0 12.74 18.761"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,".cls-1{fill:#37474f;}")),a.createElement("path",{className:"cls-1",d:"M40.6,33a2.2,2.2,0,0,1,2.2-2,2,2,0,1,1,0,4A2.2,2.2,0,0,1,40.6,33Zm-2.1,6V38c0-1.1,1.9-2,4.3-2s4.2.9,4.2,2v1Z",transform:"translate(-24 -29)",key:1}),a.createElement("path",{className:"cls-1",d:"M26.1,33a2.2,2.2,0,0,1,2.1-2,2.2,2.2,0,0,1,2.2,2,2.2,2.2,0,0,1-2.2,2A2.2,2.2,0,0,1,26.1,33ZM24,39V38c0-1.1,1.9-2,4.2-2s4.3.9,4.3,2v1Z",transform:"translate(-24 -29)",key:2}),a.createElement("path",{className:"cls-1",d:"M32.8,32A3.2,3.2,0,0,1,36,29a3,3,0,1,1,0,6A3.2,3.2,0,0,1,32.8,32Zm-3.1,9V39.5c0-1.6,2.8-3,6.3-3s6.4,1.4,6.4,3V41Z",transform:"translate(-24 -29)",key:3})])}r.defaultProps={id:"Layer_1","data-name":"Layer 1",viewBox:"0 0 23 12"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("g",{key:0},[a.createElement("path",{d:"M26.894,7.358c-0.551,0-1.097,0.153-1.579,0.444c-0.046,0.027-0.09,0.059-0.13,0.093L11.634,19.358H1c-0.553,0-1,0.447-1,1\n\t\tv19c0,0.266,0.105,0.52,0.293,0.707S0.734,40.358,1,40.358l10.61-0.005l13.543,12.44c0.05,0.046,0.104,0.086,0.161,0.12\n\t\tc0.482,0.291,1.028,0.444,1.579,0.444c1.713,0,3.106-1.416,3.106-3.156V10.514C30,8.774,28.606,7.358,26.894,7.358z M13,38.358\n\t\tc0,0.553-0.447,1-1,1s-1-0.447-1-1v-4c0-0.553,0.447-1,1-1s1,0.447,1,1V38.358z M13,25.358c0,0.553-0.447,1-1,1s-1-0.447-1-1v-4\n\t\tc0-0.553,0.447-1,1-1s1,0.447,1,1V25.358z",key:0}),a.createElement("path",{d:"M52.026,29.858c0-8.347-5.316-15.76-13.229-18.447c-0.522-0.177-1.091,0.103-1.269,0.626\n\t\tc-0.177,0.522,0.103,1.091,0.626,1.269c7.101,2.411,11.872,9.063,11.872,16.553c0,7.483-4.762,14.136-11.849,16.554\n\t\tc-0.522,0.178-0.802,0.746-0.623,1.27c0.142,0.415,0.53,0.677,0.946,0.677c0.107,0,0.216-0.017,0.323-0.054\n\t\tC46.721,45.611,52.026,38.198,52.026,29.858z",key:1}),a.createElement("path",{d:"M44.453,6.374c-0.508-0.213-1.095,0.021-1.312,0.53C42.926,7.413,43.163,8,43.672,8.216C52.376,11.909,58,20.405,58,29.858\n\t\tc0,9.777-5.894,18.38-15.015,21.914c-0.515,0.2-0.771,0.779-0.571,1.294c0.153,0.396,0.532,0.639,0.933,0.639\n\t\tc0.12,0,0.242-0.021,0.361-0.067C53.605,49.801,60,40.467,60,29.858C60,19.6,53.897,10.382,44.453,6.374z",key:2}),a.createElement("path",{d:"M43.026,29.858c0-5.972-4.009-11.302-9.749-12.962c-0.53-0.151-1.084,0.152-1.238,0.684\n\t\tc-0.153,0.53,0.152,1.085,0.684,1.238c4.889,1.413,8.304,5.953,8.304,11.04s-3.415,9.627-8.304,11.04\n\t\tc-0.531,0.153-0.837,0.708-0.684,1.238c0.127,0.438,0.526,0.723,0.961,0.723c0.092,0,0.185-0.013,0.277-0.039\n\t\tC39.018,41.159,43.026,35.829,43.026,29.858z",key:3})]),a.createElement("g",{key:1}),a.createElement("g",{key:2}),a.createElement("g",{key:3}),a.createElement("g",{key:4}),a.createElement("g",{key:5}),a.createElement("g",{key:6}),a.createElement("g",{key:7}),a.createElement("g",{key:8}),a.createElement("g",{key:9}),a.createElement("g",{key:10}),a.createElement("g",{key:11}),a.createElement("g",{key:12}),a.createElement("g",{key:13}),a.createElement("g",{key:14}),a.createElement("g",{key:15})])}r.defaultProps={version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 60 60",height:"24px",width:"24px",style:{enableBackground:"new 0 0 60 60"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("g",{key:0},[a.createElement("path",{d:"M46.414,26l7.293-7.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L45,24.586l-7.293-7.293\n\t\tc-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L43.586,26l-7.293,7.293c-0.391,0.391-0.391,1.023,0,1.414\n\t\tC36.488,34.902,36.744,35,37,35s0.512-0.098,0.707-0.293L45,27.414l7.293,7.293C52.488,34.902,52.744,35,53,35\n\t\ts0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L46.414,26z",key:0}),a.createElement("path",{d:"M26.894,4c-0.551,0-1.097,0.153-1.579,0.444c-0.046,0.027-0.09,0.059-0.13,0.093L11.634,16H1c-0.553,0-1,0.447-1,1v19\n\t\tc0,0.553,0.447,1,1,1h10.61l13.543,12.436c0.05,0.046,0.104,0.086,0.161,0.12C25.797,49.847,26.343,50,26.894,50\n\t\tC28.606,50,30,48.584,30,46.844V7.156C30,5.416,28.606,4,26.894,4z M13,35c0,0.553-0.447,1-1,1s-1-0.447-1-1v-4\n\t\tc0-0.553,0.447-1,1-1s1,0.447,1,1V35z M13,22c0,0.553-0.447,1-1,1s-1-0.447-1-1v-4c0-0.553,0.447-1,1-1s1,0.447,1,1V22z",key:1})]),a.createElement("g",{key:1}),a.createElement("g",{key:2}),a.createElement("g",{key:3}),a.createElement("g",{key:4}),a.createElement("g",{key:5}),a.createElement("g",{key:6}),a.createElement("g",{key:7}),a.createElement("g",{key:8}),a.createElement("g",{key:9}),a.createElement("g",{key:10}),a.createElement("g",{key:11}),a.createElement("g",{key:12}),a.createElement("g",{key:13}),a.createElement("g",{key:14}),a.createElement("g",{key:15})])}r.defaultProps={version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 54 54",height:"24px",width:"24px",style:{enableBackground:"new 0 0 54 54"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"m278.90625 0h-248.90625c-16.5625.0195312-29.9804688 13.4375-30 30v197.421875c.0195312 16.5625 13.4375 29.980469 30 30h248.90625c16.558594-.019531 29.980469-13.4375 30-30v-197.421875c-.019531-16.5625-13.441406-29.9804688-30-30zm0 0",key:0}),a.createElement("path",{d:"m328.90625 169.800781 103.09375 56.285157v-194.105469l-103.09375 56.285156zm0 0",key:1})])}r.defaultProps={height:"24px",width:"24px",viewBox:"0 -87 432 432"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("g",{key:0},a.createElement("g",{id:"videocam-off"},a.createElement("path",{d:"M484.5,114.75l-102,102V127.5c0-15.3-10.2-25.5-25.5-25.5H198.9l285.6,285.6V114.75z M33.15,0L0,33.15L68.85,102H51\n\t\t\tc-15.3,0-25.5,10.2-25.5,25.5v255c0,15.3,10.2,25.5,25.5,25.5h306c5.1,0,10.2-2.55,12.75-5.1l81.6,81.6l33.15-33.15L33.15,0z"}))),a.createElement("g",{key:1}),a.createElement("g",{key:2}),a.createElement("g",{key:3}),a.createElement("g",{key:4}),a.createElement("g",{key:5}),a.createElement("g",{key:6}),a.createElement("g",{key:7}),a.createElement("g",{key:8}),a.createElement("g",{key:9}),a.createElement("g",{key:10}),a.createElement("g",{key:11}),a.createElement("g",{key:12}),a.createElement("g",{key:13}),a.createElement("g",{key:14}),a.createElement("g",{key:15})])}r.defaultProps={version:"1.1",id:"Capa_1",x:"0px",y:"0px",height:"24px",width:"24px",viewBox:"0 0 484.5 484.5",style:{enableBackground:"new 0 0 484.5 484.5"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M6.4,4.4H4.8l2.3-2.7l2.3,2.7H7.8v4.7H6.4V4.4z M11.8,12.4H2.4c-0.3,0-0.6-0.2-0.7-0.6c0,0,0-0.1,0-0.1v-6\n\tc0-0.3,0.2-0.6,0.6-0.7c0,0,0.1,0,0.1,0h2v1.3H3.1v4.7h8V6.4H9.8V5.1h2c0.3,0,0.6,0.2,0.7,0.6c0,0,0,0.1,0,0.1v6\n\tC12.4,12.1,12.2,12.4,11.8,12.4C11.8,12.4,11.8,12.4,11.8,12.4L11.8,12.4z"}))}r.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 14.2 14.2",style:{enableBackground:"new 0 0 14.2 14.2"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M3.1,5.8h8v5.3c0,0.7-0.6,1.3-1.3,1.3H4.4c-0.7,0-1.3-0.6-1.3-1.3V5.8z M9.8,3.8h2.7v1.3H1.8V3.8h2.7V2.4\n\tc0-0.3,0.2-0.6,0.6-0.7c0,0,0.1,0,0.1,0h4c0.3,0,0.6,0.2,0.7,0.6c0,0,0,0.1,0,0.1L9.8,3.8z M8.4,3.8V3.1H5.8v0.7H8.4z"}))}r.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 14.2 14.2",style:{enableBackground:"new 0 0 14.2 14.2"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0},"delete"),a.createElement("desc",{key:1},"Created with Sketch."),a.createElement("g",{id:"delete",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{fillRule:"nonzero"},[a.createElement("circle",{id:"Ellipse_9",fill:"#8B8B8B",cx:"12",cy:"12",r:"12",key:0}),a.createElement("path",{d:"M8.215,10.832 L15.692,10.832 L15.692,15.785 C15.6802551,16.4511004 15.1431004,16.9882551 14.477,17 L9.43,17 C8.76389957,16.9882551 8.22674488,16.4511004 8.215,15.785 L8.215,10.832 Z M14.477,8.963 L17,8.963 L17,10.178 L7,10.178 L7,8.963 L9.523,8.963 L9.523,7.654 C9.53155218,7.33066447 9.76573276,7.05766251 10.084,7 L13.916,7 C14.2393355,7.00855218 14.5123375,7.24273276 14.57,7.561 L14.57,7.654 L14.477,8.963 Z M13.169,8.963 L13.169,8.308 L10.738,8.308 L10.738,8.962 L13.169,8.963 Z",id:"trash",fill:"#FFFFFF",key:1})]))])}r.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#37474f}.cls-2{fill:#fff}\n        ")),a.createElement("g",{id:"enlarge",transform:"translate(-417.24 8)",key:1},[a.createElement("rect",{id:"Rectangle_14",width:"18.034",height:"18.034",className:"cls-1","data-name":"Rectangle 14",rx:"9.017",transform:"rotate(180 217.637 5.017)",key:0}),a.createElement("path",{id:"Union_13",d:"M0 3.048l2-2.007H.339V0h3.468v3.468h-1.04V1.733L.728 3.78z",className:"cls-2","data-name":"Union 13",transform:"rotate(180 213.125 2.399)",key:1}),a.createElement("path",{id:"Union_12",d:"M0 3.048l2-2.007H.339V0h3.468v3.468h-1.04V1.733L.728 3.78z",className:"cls-2","data-name":"Union 12",transform:"translate(426.257 -2.798)",key:2})])])}r.defaultProps={width:"18.034",height:"18.034",viewBox:"0 0 18.034 18.034"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M31.832 31.074c-0.658 0.657-1.724 0.657-2.381 0l-6.515-6.515c-5.794 4.237-13.884 3.238-18.472-2.282s-4.094-13.656 1.13-18.578c5.224-4.923 13.375-4.934 18.613-0.026s5.755 13.043 1.181 18.575l6.444 6.444c0.657 0.658 0.657 1.724 0 2.381zM22.279 6.463c-2.89-2.891-7.237-3.756-11.013-2.192s-6.239 5.249-6.239 9.336c0 4.087 2.462 7.772 6.239 9.336s8.123 0.699 11.013-2.192c3.944-3.947 3.944-10.343-0.002-14.289h0.002z"}))}r.defaultProps={version:"1.1",width:"34",height:"32",viewBox:"0 0 34 32"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1,.cls-2,.cls-4{fill:none}.cls-1,.cls-2{stroke:#707070;stroke-width:2px}.cls-2{stroke-linecap:round}.cls-3{stroke:none}\n        ")),a.createElement("g",{id:"v",transform:"translate(-188 404)",key:1},[a.createElement("g",{id:"Ellipse_28",className:"cls-1","data-name":"Ellipse 28",transform:"translate(188 -404)",key:0},[a.createElement("circle",{cx:"13",cy:"13",r:"13",className:"cls-3",key:0}),a.createElement("circle",{cx:"13",cy:"13",r:"12",className:"cls-4",key:1})]),a.createElement("path",{id:"Line_58",d:"M0 0l3 3",className:"cls-2","data-name":"Line 58",transform:"translate(197.5 -390.5)",key:1}),a.createElement("path",{id:"Line_59",d:"M5 0L0 6",className:"cls-2","data-name":"Line 59",transform:"translate(200.5 -393.5)",key:2})])])}r.defaultProps={width:"26",height:"26",viewBox:"0 0 26 26"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{fill:"#8195A3",fillRule:"nonzero",d:"M6 0C2.7 0 0 2.7 0 6s2.7 6 6 6 6-2.7 6-6-2.7-6-6-6zm0 10.8c-2.64 0-4.8-2.16-4.8-4.8 0-2.64 2.16-4.8 4.8-4.8 2.64 0 4.8 2.16 4.8 4.8 0 2.64-2.16 4.8-4.8 4.8zM5.4 9h1.2V5.4H5.4V9zm0-4.8h1.2V3H5.4v1.2z"}))}r.defaultProps={width:"12",height:"12",viewBox:"0 0 12 12"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Toolbar",transform:"translate(-1268.000000, -15.000000)",fill:"#37474F"},a.createElement("g",{id:"Header"},a.createElement("g",{id:"Icon-Settings",transform:"translate(1268.000000, 15.000000)"},a.createElement("path",{d:"M9.97,14.1366667 C7.6725,14.1366667 5.80333333,12.2675 5.80333333,9.97 C5.80333333,7.6725 7.6725,5.80333333 9.97,5.80333333 C12.2675,5.80333333 14.1366667,7.6725 14.1366667,9.97 C14.1366667,12.2675 12.2675,14.1366667 9.97,14.1366667 M19.8966667,8.885 L17.92,8.55 C17.6758333,8.5125 17.4725,8.32916667 17.4116667,8.08416667 C17.2325,7.39333333 16.96,6.72916667 16.5925,6.11333333 C16.4658333,5.89666667 16.4758333,5.62333333 16.6208333,5.42083333 L17.7833333,3.78833333 C17.8166667,3.73666667 17.8116667,3.67083333 17.77,3.62833333 L16.3666667,2.22583333 C16.3333333,2.19333333 16.2958333,2.18833333 16.2775,2.18833333 C16.2541667,2.18833333 16.2308333,2.1975 16.2066667,2.21166667 L14.5833333,3.37916667 C14.4733333,3.45666667 14.345,3.495 14.2158333,3.495 C14.1033333,3.495 13.9933333,3.46583333 13.8916667,3.4075 C13.2616667,3.03583333 12.5833333,2.7575 11.8733333,2.57833333 C11.6283333,2.5175 11.4441667,2.315 11.4016667,2.06583333 L11.0733333,0.103333333 C11.0633333,0.0416666667 11.0116667,0 10.95,0 L8.96916667,0 C8.90833333,0 8.85666667,0.0416666667 8.84666667,0.103333333 L8.50833333,2.09416667 C8.46583333,2.33833333 8.2825,2.53666667 8.0425,2.6025 C7.35,2.78083333 6.68666667,3.06333333 6.075,3.43 C5.975,3.49 5.86166667,3.51916667 5.74916667,3.51916667 C5.61916667,3.51916667 5.48916667,3.48 5.37833333,3.4025 L3.755,2.24416667 C3.73666667,2.23 3.7125,2.22083333 3.685,2.22083333 C3.66166667,2.22083333 3.62833333,2.22583333 3.59583333,2.25916667 L2.1925,3.66083333 C2.15083333,3.70333333 2.145,3.77333333 2.17833333,3.82083333 L3.35083333,5.46833333 C3.49583333,5.67 3.51083333,5.93833333 3.38333333,6.155 C3.02166667,6.77166667 2.7525,7.44 2.57833333,8.13166667 C2.5175,8.37666667 2.315,8.56 2.06583333,8.6025 L0.103333333,8.93166667 C0.0416666667,8.94083333 0,8.99333333 0,9.05416667 L0,11.035 C0,11.0966667 0.0416666667,11.1483333 0.103333333,11.1583333 L2.09416667,11.4966667 C2.33916667,11.5391667 2.53583333,11.7225 2.6025,11.9633333 C2.78083333,12.6541667 3.06333333,13.3183333 3.43083333,13.93 C3.5575,14.1466667 3.54833333,14.4191667 3.4025,14.6266667 L2.245,16.2491667 C2.21166667,16.3025 2.21666667,16.3675 2.25916667,16.4108333 L3.66166667,17.8125 C3.69416667,17.845 3.73166667,17.85 3.75083333,17.85 C3.77416667,17.85 3.79833333,17.84 3.82083333,17.8266667 L5.46833333,16.6541667 C5.57666667,16.5741667 5.7075,16.5375 5.83583333,16.5375 C5.94333333,16.5375 6.05666667,16.565 6.155,16.6208333 C6.7625,16.97 7.41166667,17.2383333 8.08416667,17.4125 C8.325,17.4733333 8.50833333,17.6708333 8.55,17.9208333 L8.88,19.8966667 C8.88916667,19.9583333 8.94083333,20 9.00166667,20 L10.9833333,20 C11.045,20 11.0966667,19.9583333 11.1058333,19.8966667 L11.44,17.9208333 C11.4775,17.6758333 11.6608333,17.4733333 11.9058333,17.4125 C12.5975,17.2333333 13.2616667,16.9608333 13.8783333,16.5925 C13.9783333,16.5341667 14.0916667,16.505 14.2041667,16.505 C14.3325,16.505 14.4608333,16.5433333 14.5691667,16.6208333 L16.2025,17.7841667 C16.2208333,17.7983333 16.245,17.8066667 16.2733333,17.8066667 C16.2958333,17.8066667 16.3291667,17.8025 16.3616667,17.7691667 L17.7641667,16.3675 C17.8066667,16.325 17.8116667,16.255 17.7791667,16.2066667 L16.6166667,14.57 C16.47,14.3625 16.4616667,14.0941667 16.5883333,13.8775 C16.955,13.2608333 17.2275,12.5975 17.4066667,11.9058333 C17.4683333,11.6658333 17.6658333,11.4825 17.915,11.4408333 L19.8916667,11.1108333 C19.9525,11.1008333 19.9958333,11.05 19.9958333,10.9883333 L20,10.9883333 L20,9.0075 C20,8.94583333 19.9575,8.89333333 19.8966667,8.885",id:"Fill-1"}))))))}r.defaultProps={viewBox:"0 0 20 20",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#466975}\n        ")),a.createElement("g",{id:"up",transform:"translate(-333.499 -204)",key:1},[a.createElement("path",{id:"Path_696",d:"M15.24 5.44l.025.006H4.46l3.4-3.4a.892.892 0 0 0 0-1.254L7.328.258a.884.884 0 0 0-1.248 0L.257 6.08a.89.89 0 0 0 0 1.252l5.823 5.823a.885.885 0 0 0 1.248 0l.529-.529A.875.875 0 0 0 8.114 12a.848.848 0 0 0-.258-.612L4.422 7.967h10.83a.915.915 0 0 0 .9-.906v-.748a.9.9 0 0 0-.912-.873z",className:"cls-1","data-name":"Path 696",transform:"rotate(90 71.455 275.456)",key:0}),a.createElement("path",{id:"Path_894",d:"M12.464-29.936l.025.006H4.967l-.038 2.521h7.547a.915.915 0 0 0 .9-.906v-.748a.9.9 0 0 0-.912-.873z",className:"cls-1","data-name":"Path 894",transform:"translate(335.3 247.563)",key:1})])])}r.defaultProps={width:"15.172",height:"16.154",viewBox:"0 0 15.172 16.154"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("style",{key:0},"\n            .cls-1{fill:#466975}.cls-2{clip-path:url(#clip-path)}.cls-3{clip-path:url(#clip-path-2)}\n        "),a.createElement("clipPath",{id:"clip-path",key:1},a.createElement("path",{id:"Path_325",d:"M5.661 8V5.5c0-2.75 4.776-5 10.614-5s10.614 2.25 10.614 5V8zm5.306-15a5.166 5.166 0 0 1 5.308-5 5.166 5.166 0 0 1 5.306 5 5.166 5.166 0 0 1-5.306 5 5.166 5.166 0 0 1-5.308-5z",className:"cls-1","data-name":"Path 325",transform:"translate(-5.661 12)"})),a.createElement("clipPath",{id:"clip-path-2",key:2},a.createElement("path",{id:"Path_324",d:"M-653 1359.5h2366.42V-307H-653z",className:"cls-1","data-name":"Path 324",transform:"translate(653 307)"}))]),a.createElement("g",{id:"Group_463",className:"cls-2","data-name":"Group 463",key:1},a.createElement("g",{id:"Group_462",className:"cls-3","data-name":"Group 462",transform:"translate(-1097.654 -491.616)"},a.createElement("path",{id:"Path_323",d:"M.661-17h37.893v36.665H.661z",className:"cls-1","data-name":"Path 323",transform:"translate(1088.661 500.284)"})))])}r.defaultProps={width:"21.228",height:"20",viewBox:"0 0 21.228 20"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#00ae8e}\n        ")),a.createElement("g",{id:"Group_481","data-name":"Group 481",transform:"rotate(-15 111.354 14.66)",key:1},[a.createElement("g",{id:"Group_479","data-name":"Group 479",transform:"translate(9.408 21.749)",key:0},a.createElement("path",{id:"Path_898",d:"M441.146 459.719c-28.781 24.338-67.006 35.329-104.312 28.382-17.761-3.309-35.116-11.193-49.763-21.689-11.068-7.932-31.69-22.352-30.578-37.766.185-2.572 2.526-4.892 5.271-4.015 6.57 2.094 9.69 6.673 14.121 11.793a130.251 130.251 0 0 0 16.915 16.593 120.344 120.344 0 0 0 43.827 22.095c35.292 9.55 72.675 2.853 103.15-17.16 1.054-.694 2.349.937 1.366 1.767z",className:"cls-1","data-name":"Path 898",transform:"translate(-256.45 -424.441)"})),a.createElement("g",{id:"Group_480","data-name":"Group 480",key:1},a.createElement("path",{id:"Path_899",d:"M367.623 450.7a97.155 97.155 0 0 1-54.211-23l12.61-5.223c.555 10.439 1.4 20.858 2.882 31.21 1.179 8.256 4.414 15.714.319 23.351-1.575 2.944-5.329 2.9-7.6.98-7.053-5.965-6.4-16.766-7.545-25.411-1.33-10.011-2.25-20.047-2.827-30.13-.4-6.93 8.09-9.022 12.608-5.223a91.675 91.675 0 0 0 45.532 20.4c7.322 1.124 5.687 13.829-1.767 13.044z",className:"cls-1","data-name":"Path 899",transform:"translate(-311.237 -415.384)"}))])])}r.defaultProps={width:"210.464",height:"111.365",viewBox:"0 0 210.464 111.365"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with Sketch."),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fillRule:"evenodd",key:1},a.createElement("g",{id:"Add-Questions/regular",transform:"translate(-31.000000, -9.000000)"},a.createElement("g",{id:"circular-btn-/-white-B",transform:"translate(18.000000, 0.000000)"},a.createElement("g",{id:"left-pannel---icon-question",transform:"translate(12.000000, 8.000000)"},[a.createElement("g",{id:"icon/question",key:0},a.createElement("g",{id:"left-pannel---icon-question"},[a.createElement("path",{d:"M5.7,18 L8.3,18 L8.3,20.7 L5.7,20.7 L5.7,18 Z M1.2,7.5 C1.2,5.9 1.7,4.2 2.8,3 C4,1.8 5.6,1.2 7.2,1.3 C8.7,1.2 10.2,1.8 11.3,2.8 C12.3,3.8 12.9,5.1 12.9,6.6 C12.9,7.4 12.7,8.2 12.3,8.9 C11.6,9.8 10.8,10.7 10,11.4 C9.3,12 8.8,12.7 8.4,13.5 C8.1,14.2 8,15 8.1,15.9 L5.7,15.9 C5.7,14.9 5.8,13.8 6.1,12.9 C6.6,11.9 7.2,11 8.1,10.3 L9.1,9.3 C9.4,9 9.7,8.7 9.9,8.4 C10.2,7.9 10.4,7.3 10.4,6.6 C10.4,5.8 10.1,5 9.6,4.4 C9,3.6 8.1,3.2 7.2,3.3 C6,3.2 4.8,3.8 4.2,4.9 C3.8,5.7 3.6,6.6 3.6,7.5 L1.2,7.5 Z",id:"Shape",fillRule:"nonzero",key:0}),a.createElement("path",{d:"M8.5,21 L5.4,21 L5.4,17.8 L8.5,17.8 L8.5,21 Z M5.9,20.5 L8,20.5 L8,18.3 L5.9,18.3 L5.9,20.5 Z M8.3,16.1 L5.5,16.1 L5.5,15.9 C5.5,14.8 5.6,13.8 6,12.8 C6.5,11.7 7.2,10.8 8,10.1 L9,9.1 C9.3,8.8 9.5,8.5 9.7,8.2 C10,7.6 10.2,7.1 10.2,6.5 C10.2,5.7 10,5 9.5,4.4 C8.9,3.8 8.1,3.5 7.2,3.5 C6,3.4 4.9,4 4.3,5 C4,5.8 3.8,6.7 3.8,7.5 L3.8,7.8 L1,7.8 L1,7.6 C0.9,5.9 1.5,4.2 2.7,2.9 C3.9,1.6 5.5,0.9 7.3,1 C8.9,0.9 10.4,1.5 11.6,2.5 C12.7,3.5 13.3,5 13.2,6.5 C13.2,7.3 13,8.2 12.6,8.9 C11.9,9.9 11.1,10.7 10.3,11.5 C9.7,12.1 9.1,12.7 8.7,13.5 C8.4,14.2 8.3,15 8.4,15.9 L8.3,16.1 Z M6,15.6 L7.8,15.6 C7.8,14.8 7.9,14 8.2,13.3 C8.6,12.5 9.2,11.7 9.9,11.1 C10.7,10.3 11.5,9.5 12.2,8.6 C12.6,8 12.8,7.2 12.7,6.5 C12.7,5.1 12.2,3.8 11.2,2.9 C10.1,1.9 8.7,1.4 7.2,1.5 C5.7,1.4 4.1,2 3,3.2 C2,4.3 1.5,5.8 1.5,7.3 L3.3,7.3 C3.3,6.4 3.5,5.6 3.9,4.8 C4.5,3.6 5.8,2.9 7.2,3 C8.2,2.9 9.2,3.3 9.9,4 C10.5,4.7 10.8,5.5 10.7,6.4 C10.7,7.1 10.5,7.7 10.1,8.3 C9.9,8.7 9.6,9 9.3,9.3 L8.3,10.3 C7.5,11 6.9,11.9 6.4,12.9 C6.1,13.8 6,14.7 6,15.6 Z",id:"Shape",fillRule:"nonzero",key:1})])),a.createElement("g",{id:"icon-small",transform:"translate(12.000000, 11.000000)",fillRule:"nonzero",strokeWidth:"0.6",key:1},a.createElement("path",{d:"M3.37692308,13.5941547 L5.75470085,13.5941547 L5.75470085,16.0403085 L3.37692308,16.0403085 L3.37692308,13.5941547 Z M0.3,4.89130567 C0.3,3.6498546 0.707577432,2.44653075 1.48188506,1.60225056 C2.35552056,0.728615059 3.53062609,0.278157939 4.6826084,0.352653883 C5.76321366,0.280613533 6.87305654,0.696804612 7.71811494,1.46549842 C8.48064435,2.22802783 8.9,3.20017048 8.9,4.27592105 C8.9,4.88297861 8.74597053,5.47984282 8.42654925,6.03275281 C7.89615693,6.7146858 7.34272484,7.32167584 6.81233143,7.78574932 C6.38962419,8.14806981 6.06491292,8.58101816 5.79882043,9.11204556 C5.61511458,9.54069255 5.55322752,10.0357891 5.61611384,10.601766 L5.65312822,10.9348954 L3.37692308,10.9348954 L3.37692308,10.6348954 C3.37692308,9.82587955 3.46739167,9.08403712 3.68209919,8.44944928 C4.09067163,7.63230442 4.53400215,7.03551333 5.10581668,6.59370355 L5.78957737,5.90994287 C5.94030052,5.75921971 6.00531153,5.6928255 6.07970846,5.6116652 C6.17355416,5.50928808 6.24529634,5.42099001 6.29147007,5.35234156 C6.48594287,5.02822022 6.59059829,4.66940165 6.59059829,4.27592105 C6.59059829,3.80574696 6.41441877,3.32525737 6.10358974,2.95164755 C5.75937246,2.49269118 5.24889071,2.26065401 4.67765046,2.31847453 C3.95807599,2.25850999 3.25990405,2.62421909 2.91961021,3.24769197 C2.67086927,3.74517385 2.54102564,4.31323973 2.54102564,4.89130567 L2.54102564,5.19130567 L0.3,5.19130567 L0.3,4.89130567 Z",id:"Shape"}))]))))])}r.defaultProps={width:"21px",height:"27px",viewBox:"0 0 21 27",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"ic_help"},a.createElement("g",{id:"Group"},a.createElement("g",null,[a.createElement("polygon",{id:"Shape",points:"0 0 24 0 24 24 0 24",key:0}),a.createElement("path",{d:"M12,2 C6.48,2 2,6.48 2,12 C2,17.52 6.48,22 12,22 C17.52,22 22,17.52 22,12 C22,6.48 17.52,2 12,2 Z M13,19 L11,19 L11,17 L13,17 L13,19 Z M15.07,11.25 L14.17,12.17 C13.45,12.9 13,13.5 13,15 L11,15 L11,14.5 C11,13.4 11.45,12.4 12.17,11.67 L13.41,10.41 C13.78,10.05 14,9.55 14,9 C14,7.9 13.1,7 12,7 C10.9,7 10,7.9 10,9 L8,9 C8,6.79 9.79,5 12,5 C14.21,5 16,6.79 16,9 C16,9.88 15.64,10.68 15.07,11.25 Z",id:"Shape",fill:"#2C3034",key:1})])))))}r.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{id:"trash",fill:"#545454",d:"M3.1 5.8h8v5.3a1.324 1.324 0 0 1-1.3 1.3H4.4a1.324 1.324 0 0 1-1.3-1.3V5.8zm6.7-2h2.7v1.3H1.8V3.8h2.7V2.4a.73.73 0 0 1 .6-.7h4.1a.73.73 0 0 1 .7.6v.1zm-1.4 0v-.7H5.8v.7z",className:"cls-1",transform:"translate(-1.8 -1.7)"}))}r.defaultProps={width:"10.7",height:"10.7",viewBox:"0 0 10.7 10.7"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0},"icon automatic"),a.createElement("desc",{key:1},"Created with Sketch."),a.createElement("g",{id:"icon-automatic",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",null,[a.createElement("g",{id:"icon/calendar",key:0},a.createElement("g",{id:"Rectangle"},[a.createElement("rect",{fill:"#000000",x:"0",y:"1",width:"13",height:"12",rx:"1",key:0}),a.createElement("rect",{fill:"#FFFFFF",x:"0",y:"4",width:"13",height:"1",key:1}),a.createElement("rect",{fill:"#FFFFFF",x:"2",y:"7",width:"1",height:"1",key:2}),a.createElement("rect",{fill:"#FFFFFF",x:"2",y:"9",width:"1",height:"1",key:3}),a.createElement("rect",{fill:"#FFFFFF",x:"6",y:"7",width:"1",height:"1",key:4}),a.createElement("rect",{fill:"#FFFFFF",x:"10",y:"7",width:"1",height:"1",key:5}),a.createElement("rect",{fill:"#FFFFFF",x:"6",y:"10",width:"1",height:"1",key:6}),a.createElement("rect",{fill:"#FFFFFF",x:"8",y:"9",width:"1",height:"1",key:7}),a.createElement("rect",{fill:"#FFFFFF",x:"10",y:"9",width:"1",height:"1",key:8}),a.createElement("rect",{fill:"#000000",x:"3",y:"0",width:"2",height:"3",rx:"0.5",key:9}),a.createElement("rect",{fill:"#000000",x:"8",y:"0",width:"2",height:"3",rx:"0.5",key:10})])),a.createElement("g",{id:"icon/clock",transform:"translate(6.000000, 8.000000)",key:1},[a.createElement("circle",{id:"Oval",stroke:"#FFFFFF",fill:"#000000",cx:"4.5",cy:"4.5",r:"4",key:0}),a.createElement("rect",{id:"Rectangle",fill:"#FFFFFF",x:"4",y:"2",width:"1",height:"3",rx:"0.5",key:1}),a.createElement("rect",{id:"Rectangle",fill:"#FFFFFF",x:"4",y:"4",width:"2",height:"1",rx:"0.5",key:2})])]))])}r.defaultProps={width:"15px",height:"17px",viewBox:"0 0 15 17",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Download-A",transform:"translate(-853.000000, -100.000000)",fill:"#FFFFFF"},a.createElement("g",{id:"Group-2",transform:"translate(853.000000, 99.000000)"},[a.createElement("g",{id:"Group",transform:"translate(5.759373, 5.554393) rotate(-135.000000) translate(-5.759373, -5.554393) translate(2.759373, 2.054393)",fillRule:"nonzero",key:0},[a.createElement("rect",{id:"Rectangle_2201",x:"0.440334671",y:"0.489535464",width:"1.38461538",height:"5.53846154",rx:"0.692307692",key:0}),a.createElement("path",{d:"M3.09078422,-1.46860639 C3.4731352,-1.46860639 3.78309191,-1.15864968 3.78309191,-0.776298699 L3.78309191,3.37754745 C3.78309191,3.75989844 3.4731352,4.06985515 3.09078422,4.06985515 C2.70843324,4.06985515 2.39847653,3.75989844 2.39847653,3.37754745 L2.39847653,-0.776298699 C2.39847653,-1.15864968 2.70843324,-1.46860639 3.09078422,-1.46860639 Z",id:"Rectangle_2202",transform:"translate(3.090784, 1.300624) rotate(90.000000) translate(-3.090784, -1.300624) ",key:1})]),a.createElement("rect",{id:"Rectangle",x:"0",y:"9.75156094",width:"2",height:"4",rx:"1",key:1}),a.createElement("rect",{id:"Rectangle",x:"0",y:"12",width:"11",height:"2",rx:"1",key:2}),a.createElement("rect",{id:"Rectangle",x:"9",y:"10",width:"2",height:"4",rx:"1",key:3}),a.createElement("rect",{id:"Rectangle",x:"4.68181818",y:"1",width:"1.63636364",height:"7.36363636",rx:"0.818181818",key:4})]))))}r.defaultProps={width:"11px",height:"13px",viewBox:"0 0 11 13",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeLinecap:"round"},[a.createElement("path",{fill:"#FFF",d:"M11.354 1.354l-10 10m0-10l10 10",key:0}),a.createElement("path",{strokeWidth:"2",d:"M10.814 1.648l-9.166 9.166M1.648 1.65l9.166 9.166",key:1})]))}r.defaultProps={width:"12",height:"12",viewBox:"0 0 12 12"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M10.202 14.082c0-4.368 3.554-7.913 7.913-7.913 4.368 0 7.913 3.554 7.913 7.913v4.895H10.202v-4.895zm10.66 19.285c-.332.243-.42.476-.42.863.01 1.738.01 3.465.01 5.203.033.72-.332 1.428-.974 1.75-1.517.774-3.033-.31-3.033-1.75v-.01c0-1.739 0-3.477.01-5.215 0-.354-.077-.587-.387-.819-1.572-1.162-2.092-3.144-1.306-4.882.764-1.694 2.635-2.69 4.395-2.336 1.96.399 3.32 1.97 3.343 3.93 0 1.362-.542 2.469-1.638 3.266zM4.042 14.082v4.895h-.325A3.72 3.72 0 0 0 0 22.694v20.472a3.72 3.72 0 0 0 3.717 3.716h28.566A3.72 3.72 0 0 0 36 43.166V22.684a3.72 3.72 0 0 0-3.717-3.716h-.096v-4.896C32.187 6.312 25.874 0 18.115 0 10.355.01 4.043 6.323 4.043 14.082z"}))}r.defaultProps={width:"36",height:"47",viewBox:"0 0 36 47"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"arrow",transform:"matrix(0.707107,-0.707107,0.707107,0.707107,-0.160865,1.43016)"},[a.createElement("g",{id:"Rectangle_2201",transform:"matrix(1,0,0,1,0.0178385,0.00156146)",key:0},a.createElement("path",{d:"M2,1C2,0.448 1.552,0 1,0C0.448,0 0,0.448 0,1L0,7C0,7.552 0.448,8 1,8C1.552,8 2,7.552 2,7L2,1Z"})),a.createElement("g",{id:"Rectangle_2202",transform:"matrix(-3.82857e-16,1,-1,-3.82857e-16,11.0178,3.00156)",key:1},a.createElement("path",{d:"M5,4C5,3.448 4.552,3 4,3C3.448,3 3,3.448 3,4L3,10C3,10.552 3.448,11 4,11C4.552,11 5,10.552 5,10L5,4Z"}))]))}r.defaultProps={width:"100%",height:"100%",viewBox:"0 0 11 7",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#000"},[a.createElement("path",{d:"m37 42.4h-10l-4-40.4h18z",key:0}),a.createElement("ellipse",{cx:"32",cy:"54.4",rx:"7.7",ry:"7.6",key:1})]))}r.defaultProps={viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",id:"exclam-mark"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("clipPath",{id:"a",key:0},a.createElement("path",{d:"m-200-175h1000v562h-1000z"})),a.createElement("clipPath",{id:"b",key:1},a.createElement("circle",{cx:"107",cy:"106",r:"102"})),a.createElement("clipPath",{id:"c",key:2},a.createElement("circle",{cx:"107",cy:"106",r:"100"})),a.createElement("clipPath",{id:"d",key:3},a.createElement("circle",{cx:"107",cy:"106",r:"92"})),a.createElement("clipPath",{id:"e",key:4},a.createElement("path",{clipRule:"evenodd",d:"m135 94.06 26-19c2.27-1.85 4-1.42 4 2v57.94c0 3.84-2.16 3.4-4 2l-26-19zm-88-16.86v43.2a17.69 17.69 0 0 0 17.77 17.6h63a3.22 3.22 0 0 0 3.23-3.2v-43.2a17.69 17.69 0 0 0 -17.77-17.6h-63a3.22 3.22 0 0 0 -3.23 3.2z"})),a.createElement("g",{clipPath:"url(#a)",transform:"translate(0 -178)",key:5},a.createElement("path",{d:"m232 61h366v90h-366z",fill:"#4a8cff"})),a.createElement("g",{clipPath:"url(#a)",transform:"matrix(.156863 0 0 .156863 -.784314 -.627496)",key:6},[a.createElement("g",{clipPath:"url(#b)",key:0},a.createElement("path",{d:"m0-1h214v214h-214z",fill:"#e5e5e4"})),a.createElement("g",{clipPath:"url(#c)",key:1},a.createElement("path",{d:"m2 1h210v210h-210z",fill:"#fff"})),a.createElement("g",{clipPath:"url(#d)",key:2},a.createElement("path",{d:"m10 9h194v194h-194z",fill:"#4a8cff"})),a.createElement("g",{clipPath:"url(#e)",key:3},a.createElement("path",{d:"m42 69h128v74h-128z",fill:"#fff"}))]),a.createElement("g",{clipPath:"url(#a)",transform:"translate(0 -178)",key:7},a.createElement("path",{d:"m232 19.25h180v38.17h-180z",fill:"#90908f"}))])}r.defaultProps={height:"40",viewBox:"0 0 32 32",width:"40"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("clipPath",{id:"a",key:0},a.createElement("path",{d:"m-200-175h1000v562h-1000z"})),a.createElement("clipPath",{id:"b",key:1},a.createElement("circle",{cx:"107",cy:"106",r:"102"})),a.createElement("clipPath",{id:"c",key:2},a.createElement("circle",{cx:"107",cy:"106",r:"100"})),a.createElement("clipPath",{id:"d",key:3},a.createElement("circle",{cx:"107",cy:"106",r:"92"})),a.createElement("clipPath",{id:"e",key:4},a.createElement("path",{clipRule:"evenodd",d:"m135 94.06 26-19c2.27-1.85 4-1.42 4 2v57.94c0 3.84-2.16 3.4-4 2l-26-19zm-88-16.86v43.2a17.69 17.69 0 0 0 17.77 17.6h63a3.22 3.22 0 0 0 3.23-3.2v-43.2a17.69 17.69 0 0 0 -17.77-17.6h-63a3.22 3.22 0 0 0 -3.23 3.2z"})),a.createElement("g",{clipPath:"url(#a)",transform:"translate(0 -178)",key:5},a.createElement("path",{d:"m232 61h366v90h-366z",fill:"#37474F"})),a.createElement("g",{clipPath:"url(#a)",transform:"matrix(.156863 0 0 .156863 -.784314 -.627496)",key:6},[a.createElement("g",{clipPath:"url(#b)",key:0},a.createElement("path",{d:"m0-1h214v214h-214z",fill:"#e5e5e4"})),a.createElement("g",{clipPath:"url(#c)",key:1},a.createElement("path",{d:"m2 1h210v210h-210z",fill:"#fff"})),a.createElement("g",{clipPath:"url(#d)",key:2},a.createElement("path",{d:"m10 9h194v194h-194z",fill:"#37474F",id:"zoom-icon-bg"})),a.createElement("g",{clipPath:"url(#e)",key:3},a.createElement("path",{d:"m42 69h128v74h-128z",fill:"#fff"}))]),a.createElement("g",{clipPath:"url(#a)",transform:"translate(0 -178)",key:7},a.createElement("path",{d:"m232 19.25h180v38.17h-180z",fill:"#90908f"}))])}r.defaultProps={height:"40",viewBox:"0 0 32 32",width:"40"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("g",{key:0},a.createElement("path",{d:"M110.534,220.962c0-49.027,39.741-88.768,88.768-88.768s88.768,39.741,88.768,88.768c0,49.026-39.741,88.768-88.768,88.768\n\t\tS110.534,269.989,110.534,220.962z M236.968,315.783h-75.327c-62.668,0-113.655,50.986-113.655,113.646v92.143l0.236,1.437\n\t\tl6.36,1.985c59.796,18.679,111.764,24.914,154.531,24.914c83.531,0,131.94-23.82,134.938-25.333l5.94-3.015l0.626,0.006v-92.137\n\t\tC350.617,366.769,299.631,315.783,236.968,315.783z M350.617,177.533c49.024,0,88.768-39.741,88.768-88.768\n\t\tC439.385,39.741,399.642,0,350.617,0c-49.023,0-88.768,39.741-88.768,88.765C261.85,137.792,301.594,177.533,350.617,177.533z\n\t\t M388.28,183.585h-75.326c-1.797,0-3.547,0.189-5.32,0.275c6.81,14.295,10.74,30.225,10.74,47.094\n\t\tc0,31.129-13.057,59.205-33.922,79.23c48.823,14.523,86.144,55.986,94.638,107.08c71.999-3.145,113.504-23.49,116.265-24.885\n\t\tl5.94-3.015l0.626,0.012v-92.137C501.933,234.575,450.946,183.585,388.28,183.585z"})),a.createElement("g",{key:1}),a.createElement("g",{key:2}),a.createElement("g",{key:3}),a.createElement("g",{key:4}),a.createElement("g",{key:5}),a.createElement("g",{key:6}),a.createElement("g",{key:7}),a.createElement("g",{key:8}),a.createElement("g",{key:9}),a.createElement("g",{key:10}),a.createElement("g",{key:11}),a.createElement("g",{key:12}),a.createElement("g",{key:13}),a.createElement("g",{key:14}),a.createElement("g",{key:15})])}r.defaultProps={version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"549.907px",height:"549.908px",viewBox:"0 0 549.907 549.908",style:{enableBackground:"new 0 0 549.907 549.908"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0},"icon calendar"),a.createElement("desc",{key:1},"Created with Sketch."),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"drop-down/icon/watermark",transform:"translate(-15.000000, -10.000000)"},a.createElement("g",{id:"drop-down"},a.createElement("g",{id:"icon/calendar",transform:"translate(15.000000, 10.000000)"},a.createElement("g",{id:"Rectangle"},a.createElement("g",null,[a.createElement("rect",{stroke:"#CFCFCF",fill:"#FFFFFF",x:"0.5",y:"1.5",width:"12",height:"11",rx:"1",key:0}),a.createElement("rect",{fill:"#CFCFCF",x:"1",y:"4",width:"11",height:"1",key:1}),a.createElement("rect",{fill:"#CFCFCF",x:"2",y:"6",width:"1",height:"1",key:2}),a.createElement("rect",{fill:"#CFCFCF",x:"4",y:"6",width:"1",height:"1",key:3}),a.createElement("rect",{fill:"#CFCFCF",x:"6",y:"6",width:"1",height:"1",key:4}),a.createElement("rect",{fill:"#CFCFCF",x:"8",y:"6",width:"1",height:"1",key:5}),a.createElement("rect",{fill:"#CFCFCF",x:"10",y:"6",width:"1",height:"1",key:6}),a.createElement("rect",{fill:"#CFCFCF",x:"2",y:"8",width:"1",height:"1",key:7}),a.createElement("rect",{fill:"#CFCFCF",x:"4",y:"8",width:"1",height:"1",key:8}),a.createElement("rect",{fill:"#CFCFCF",x:"6",y:"8",width:"1",height:"1",key:9}),a.createElement("rect",{fill:"#CFCFCF",x:"8",y:"8",width:"1",height:"1",key:10}),a.createElement("rect",{fill:"#CFCFCF",x:"10",y:"8",width:"1",height:"1",key:11}),a.createElement("rect",{fill:"#CFCFCF",x:"2",y:"10",width:"1",height:"1",key:12}),a.createElement("rect",{fill:"#CFCFCF",x:"4",y:"10",width:"1",height:"1",key:13}),a.createElement("rect",{fill:"#CFCFCF",x:"6",y:"10",width:"1",height:"1",key:14}),a.createElement("rect",{fill:"#CFCFCF",x:"3",y:"0",width:"1",height:"3",rx:"0.5",key:15}),a.createElement("rect",{fill:"#CFCFCF",x:"9",y:"0",width:"1",height:"3",rx:"0.5",key:16})]))))))])}r.defaultProps={width:"13px",height:"13px",viewBox:"0 0 13 13",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",key:0}),a.createElement("path",{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z",key:1})])}r.defaultProps={viewBox:"64 64 896 896",focusable:"false",className:"",width:"13px",hight:"13px",fill:"#CFCFCF","aria-hidden":"true"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"currentcolor",fillRule:"evenodd"},[a.createElement("path",{d:"M21.237 22.877V35.01c0 .884-.71 1.6-1.587 1.6-.351 0-.693-.117-.97-.334L12.4 31.38l-6.628 4.985a1.579 1.579 0 0 1-2.22-.326 1.609 1.609 0 0 1-.316-.956V23.91a3.61 3.61 0 0 0 2.783.799l1.265-.173c.262-.036.876.167 1.067.352l.92.893a3.63 3.63 0 0 0 5.03.01l.924-.89c.191-.184.806-.384 1.068-.347l1.265.177c1.515.214 2.966-.57 3.678-1.855z",key:0}),a.createElement("path",{d:"M10.86.454a1.711 1.711 0 0 1 2.326.004l.937.894c.638.609 1.88 1.01 2.758.893l1.288-.173c.879-.118 1.724.493 1.879 1.357l.227 1.268c.155.865.92 1.912 1.7 2.328l1.146.61a1.674 1.674 0 0 1 .714 2.192l-.568 1.158c-.388.79-.39 2.082-.006 2.873l.564 1.16c.385.792.06 1.777-.723 2.19l-1.147.605c-.782.413-1.552 1.458-1.71 2.321l-.232 1.268c-.159.863-1.007 1.471-1.884 1.35l-1.288-.178c-.879-.121-2.12.276-2.762.883l-.94.89a1.71 1.71 0 0 1-2.325-.005l-.937-.894c-.638-.608-1.88-1.01-2.758-.893l-1.288.173c-.879.118-1.724-.493-1.88-1.357l-.226-1.268c-.155-.865-.92-1.912-1.701-2.328l-1.146-.61a1.675 1.675 0 0 1-.713-2.192l.568-1.158c.388-.79.39-2.082.006-2.873l-.564-1.16a1.674 1.674 0 0 1 .723-2.19l1.147-.605c.782-.414 1.552-1.458 1.71-2.321l.232-1.268c.159-.863 1.007-1.47 1.884-1.35l1.288.178c.878.121 2.12-.276 2.762-.883l.94-.89z",key:1})]))}r.defaultProps={width:"24",height:"37",viewBox:"0 0 24 37"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"Edit",fill:"#B7BEC2",fillRule:"nonzero"},a.createElement("g",{id:"pencil-edit-button"},a.createElement("path",{d:"M9.98506262,2.67552182 L13.2515522,5.94198102 L4.98316509,14.2103681 L1.71852751,10.9439089 L9.98506262,2.67552182 Z M15.730186,1.88772676 L14.2734573,0.430998102 C13.710482,-0.13197723 12.7963264,-0.13197723 12.2314383,0.430998102 L10.836038,1.82639848 L14.1025275,5.09288805 L15.730186,3.4652296 C16.1668311,3.02855408 16.1668311,2.32437192 15.730186,1.88772676 Z M0.00910815939,15.5351803 C-0.0503377609,15.8027173 0.191210626,16.042444 0.458777989,15.9773814 L4.09873245,15.0948311 L0.834094877,11.8283719 L0.00910815939,15.5351803 Z",id:"Shape"}))))])}r.defaultProps={width:"17px",height:"16px",viewBox:"0 0 17 16",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M220.118 317.883c-6.655 0-13.308-2.538-18.385-7.615-47.567-47.568-47.567-124.967 0-172.535l96-96c23.044-23.043 53.68-35.733 86.267-35.733s63.224 12.69 86.268 35.732c47.566 47.568 47.566 124.967 0 172.535l-43.883 43.883c-10.154 10.154-26.615 10.154-36.77 0-10.153-10.153-10.153-26.616 0-36.77l43.883-43.883c27.292-27.293 27.292-71.702 0-98.995-13.221-13.221-30.8-20.502-49.498-20.502s-36.276 7.281-49.498 20.503l-96 95.999c-27.293 27.293-27.293 71.703 0 98.996 10.154 10.153 10.153 26.616 0 36.77-5.075 5.076-11.731 7.615-18.384 7.615z",key:0}),a.createElement("path",{d:"M128 506c-32.588 0-63.225-12.69-86.267-35.732-47.567-47.568-47.567-124.967 0-172.535l43.882-43.882c10.154-10.153 26.617-10.153 36.77 0 10.154 10.153 10.154 26.616 0 36.77l-43.882 43.882c-27.293 27.293-27.293 71.703 0 98.996 13.22 13.22 30.799 20.501 49.497 20.501s36.276-7.281 49.499-20.503l96-95.999c27.292-27.293 27.292-71.703 0-98.996-10.154-10.154-10.153-26.616 0-36.77 10.153-10.153 26.616-10.153 36.77 0.001 47.566 47.567 47.566 124.966 0.001 172.534l-96.001 96c-23.045 23.044-53.682 35.733-86.269 35.733z",key:1})])}r.defaultProps={version:"1.1",width:"512",height:"512",viewBox:"0 0 512 512"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#666",fillRule:"evenodd"},[a.createElement("path",{d:"M12 0L0 7.031l12 7.032L24 7.03z",key:0}),a.createElement("path",{d:"M12 16.734L0 9.703v2.671l12 7.031 12-7.031V9.703z",key:1}),a.createElement("path",{d:"M12 22.077L0 15.045v2.672l12 7.03 12-7.03v-2.672z",key:2})]))}r.defaultProps={width:"24",height:"25",viewBox:"0 0 24 25"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M0.9786 37.129C1.04368 36.3535 1.53549 35.7167 2.26211 35.467L8.15769 33.4412L2.41817 26.7595C2.03712 26.316 1.87775 25.7295 1.98068 25.1505C2.08374 24.5716 2.4353 24.0787 2.94517 23.7984L10.3499 19.7275C10.8337 19.4616 11.438 19.6438 11.7004 20.1347C11.9624 20.6255 11.7827 21.2389 11.2991 21.5048L3.99612 25.5198L10.1126 32.6402L29.4317 22.0188L25.847 17.8458C25.4344 17.9994 24.989 18.0832 24.5247 18.0832C23.083 18.0832 21.8246 17.2742 21.1654 16.0806L15.6299 19.1239C15.479 19.2068 15.3166 19.2461 15.1563 19.2461C14.8025 19.2461 14.4599 19.0545 14.2795 18.7166C14.0174 18.2258 14.1971 17.6124 14.6808 17.3465L20.6792 14.0489C20.7468 11.9553 22.4451 10.273 24.5245 10.273C26.6466 10.273 28.3731 12.0248 28.3731 14.1781C28.3731 15.1262 28.0381 15.9961 27.4824 16.6733L30.9999 20.7681L37.2316 13.5137C37.8199 12.8287 38.7806 12.6526 39.5683 13.0854L42.0042 14.4246C42.2896 12.1342 44.2204 10.3567 46.5537 10.3567C49.083 10.3567 51.1409 12.4447 51.1409 15.0114C51.1409 16.4305 50.5109 17.7025 49.5208 18.5569L59.0547 23.7984C59.5644 24.0787 59.9158 24.5714 60.019 25.1505C60.122 25.7295 59.9626 26.316 59.5815 26.7594L53.8421 33.4411L59.7376 35.4668C60.4642 35.7165 60.956 36.3533 61.0211 37.1287C61.0862 37.9041 60.7077 38.6162 60.0332 38.987L53.1101 42.7931V46.6082C53.1101 47.1664 52.6642 47.6189 52.114 47.6189C51.5637 47.6189 51.1179 47.1664 51.1179 46.6082V43.8883L41.4321 49.2132C41.0189 49.4404 40.5579 49.5559 40.0952 49.5559C39.7926 49.5559 39.4891 49.5065 39.198 49.4065L31.9958 46.932V67.0421L50.6934 56.7624C50.9552 56.6185 51.1177 56.3414 51.1177 56.0393V51.5979C51.1177 51.0397 51.5636 50.5871 52.1138 50.5871C52.6641 50.5871 53.1099 51.0397 53.1099 51.5979V56.0393C53.1099 57.084 52.5477 58.042 51.6425 58.5397L32.3349 69.1549C31.9168 69.3848 31.4582 69.4996 30.9996 69.4996C30.541 69.4996 30.0824 69.3846 29.6643 69.1549L10.3567 58.5397C9.45156 58.042 8.88923 57.084 8.88923 56.0393V42.7929L1.9662 38.9869C1.29217 38.6165 0.913521 37.9045 0.9786 37.129V37.129ZM28.7978 29.3096C25.3109 30.3041 22.8757 33.5668 22.8757 37.2439C22.8757 38.2679 23.057 39.2616 23.4153 40.2033L30.9999 44.3731L38.5844 40.2033C38.9426 39.2616 39.124 38.2679 39.124 37.2439C39.124 33.5555 36.6795 30.29 33.1791 29.3028C32.6491 29.1534 32.3389 28.5961 32.4862 28.0584C32.6333 27.5205 33.1828 27.2058 33.7126 27.3552C38.0716 28.5846 41.1161 32.6509 41.1161 37.2439C41.1161 37.7978 41.0719 38.3446 40.9869 38.8825L50.023 33.9147L30.9996 23.456L11.9763 33.9148L21.0124 38.8827C20.9274 38.3447 20.8832 37.7979 20.8832 37.2441C20.8832 32.6651 23.916 28.6022 28.2585 27.3635C28.7881 27.2123 29.3381 27.5258 29.4868 28.063C29.6361 28.6004 29.3276 29.1585 28.7978 29.3096V29.3096ZM24.5247 12.2948C23.5011 12.2948 22.6682 13.1397 22.6682 14.1784C22.6682 15.217 23.5011 16.0621 24.5247 16.0621C25.5483 16.0621 26.381 15.217 26.381 14.1784C26.381 13.1397 25.5483 12.2948 24.5247 12.2948ZM46.5537 12.3784C45.123 12.3784 43.9587 13.5597 43.9587 15.0116C43.9587 16.4635 45.123 17.6448 46.5537 17.6448C47.9845 17.6448 49.1487 16.4636 49.1487 15.0116C49.1487 13.5597 47.9845 12.3784 46.5537 12.3784ZM47.2566 19.6116C47.0274 19.6476 46.7927 19.6663 46.5537 19.6663C44.6973 19.6663 43.0962 18.5409 42.3749 16.9278L38.6846 14.899L32.5682 22.0191L51.8874 32.6404L58.0038 25.5201L47.2566 19.6116ZM39.8371 47.4921C40.0501 47.5654 40.2858 47.5448 40.4831 47.4362L51.6351 41.3052C51.638 41.3036 51.641 41.302 51.644 41.3004L58.8974 37.3127L52.2065 35.0137L33.4812 45.3085L39.8371 47.4921ZM10.8818 56.0397C10.8818 56.3418 11.0445 56.6189 11.3062 56.7628L30.0038 67.0425V46.9324L22.8016 49.4069C22.5104 49.5069 22.2069 49.5563 21.9043 49.5563C21.4418 49.5563 20.9807 49.4407 20.5675 49.2136L10.8817 43.8887V56.0397H10.8818ZM21.5167 47.4362C21.7141 47.5448 21.9497 47.5654 22.1627 47.4921L28.5185 45.3085L9.79315 35.0137L3.10229 37.3127L21.5167 47.4362ZM2.90107 37.3818C2.90121 37.3818 2.90134 37.3817 2.9016 37.3817L2.90107 37.3818Z",fill:"#8195A3",key:0}),a.createElement("path",{d:"M23.5504 57.7331L25.8355 58.9894C26.3192 59.2553 26.4987 59.8688 26.2367 60.3596C26.0563 60.6973 25.7137 60.8891 25.3599 60.8891C25.1997 60.8891 25.037 60.8497 24.8863 60.7669L22.6012 59.5106C22.1175 59.2447 21.938 58.6312 22.2 58.1404C22.462 57.6496 23.0663 57.4671 23.5504 57.7331V57.7331Z",fill:"#8195A3",key:1}),a.createElement("path",{d:"M42.7281 9.01182C42.5335 9.20911 42.2785 9.3079 42.0236 9.3079C41.7687 9.3079 41.5137 9.20925 41.3192 9.01182L40.4975 8.17802L39.6758 9.01182C39.4812 9.20911 39.2262 9.3079 38.9713 9.3079C38.7165 9.3079 38.4615 9.20925 38.2669 9.01182C37.8779 8.61709 37.8779 7.97709 38.2669 7.58249L39.0887 6.74856L38.2669 5.91463C37.8779 5.5199 37.8779 4.8799 38.2669 4.48531C38.656 4.09058 39.2866 4.09058 39.6756 4.48531L40.4973 5.3191L41.319 4.48531C41.7082 4.09058 42.3388 4.09058 42.7278 4.48531C43.1168 4.88004 43.1168 5.52004 42.7278 5.91463L41.9059 6.74856L42.7278 7.58249C43.1171 7.97709 43.1171 8.61709 42.7281 9.01182V9.01182Z",fill:"#8195A3",key:2}),a.createElement("path",{d:"M13.2381 15.6329C13.0435 15.8302 12.7885 15.929 12.5336 15.929C12.2788 15.929 12.0238 15.8303 11.8292 15.6329L11.0075 14.7991L10.1858 15.6329C9.9912 15.8302 9.7362 15.929 9.48134 15.929C9.22647 15.929 8.97147 15.8303 8.7769 15.6329C8.38789 15.2382 8.38789 14.5982 8.7769 14.2036L9.59874 13.3696L8.7769 12.5357C8.38789 12.141 8.38789 11.501 8.7769 11.1064C9.16604 10.7117 9.79663 10.7117 10.1856 11.1064L11.0073 11.9402L11.8291 11.1064C12.2182 10.7117 12.8488 10.7117 13.2378 11.1064C13.6268 11.5011 13.6268 12.1411 13.2378 12.5357L12.416 13.3696L13.2378 14.2036C13.6271 14.5982 13.6271 15.2382 13.2381 15.6329V15.6329Z",fill:"#8195A3",key:3}),a.createElement("path",{d:"M18.7374 9.30707C16.3444 9.30707 14.3976 7.33167 14.3976 4.9036C14.3977 2.47539 16.3445 0.5 18.7374 0.5C21.1303 0.5 23.0771 2.47539 23.0771 4.9036C23.0771 7.33167 21.1304 9.30707 18.7374 9.30707ZM18.7374 2.52148C17.443 2.52148 16.3898 3.59004 16.3898 4.9036C16.3898 6.21703 17.443 7.28558 18.7374 7.28558C20.0318 7.28558 21.085 6.21703 21.085 4.9036C21.085 3.59004 20.0318 2.52148 18.7374 2.52148V2.52148Z",fill:"#8195A3",key:4}),a.createElement("path",{d:"M31.1123 38.304C32.072 38.304 32.9777 38.6269 33.6641 39.2142C34.0846 39.574 34.1381 40.2118 33.7834 40.6384C33.4289 41.0652 32.8004 41.1194 32.3798 40.7596C32.0571 40.4834 31.5954 40.3254 31.1121 40.3254H31.1055C30.6198 40.3268 30.1564 40.4879 29.8338 40.7673C29.6461 40.9298 29.4162 41.0092 29.1877 41.0092C28.9062 41.0092 28.6265 40.8888 28.4296 40.6546C28.0724 40.2301 28.1221 39.592 28.5405 39.2296C29.2263 38.6355 30.1353 38.3067 31.0998 38.3037C31.1039 38.304 31.1081 38.304 31.1123 38.304V38.304Z",fill:"#8195A3",key:5}),a.createElement("path",{d:"M35.3266 35.3107H35.3359C35.8865 35.3025 36.3302 35.7564 36.3342 36.3144C36.3379 36.8726 35.8905 37.3283 35.3404 37.3322H35.3333C34.7865 37.3322 34.3412 36.8842 34.3374 36.3285C34.3335 35.7703 34.7763 35.3146 35.3266 35.3107Z",fill:"#8195A3",key:6}),a.createElement("path",{d:"M26.8587 37.3114C26.8553 37.3121 26.8517 37.3125 26.8482 37.3132C26.8195 37.3188 26.7904 37.3236 26.761 37.3267C26.7514 37.3276 26.7417 37.3276 26.7321 37.3283C26.71 37.3299 26.6878 37.332 26.6651 37.3322H26.658C26.6238 37.3322 26.5899 37.3304 26.5564 37.3269C26.0535 37.2759 25.6609 36.8451 25.6609 36.3213C25.6609 35.8043 26.0435 35.3789 26.5369 35.3187C26.5414 35.3181 26.5458 35.317 26.5503 35.3166C26.573 35.3142 26.5963 35.3135 26.6195 35.3126C26.6301 35.3122 26.6405 35.3108 26.6513 35.3107H26.6564C26.6566 35.3107 26.6568 35.3107 26.657 35.3107H26.6606H26.6664C26.6668 35.3107 26.6672 35.3107 26.6676 35.3107C27.2144 35.3107 27.6551 35.7587 27.6589 36.3144C27.6622 36.8054 27.3164 37.2167 26.8587 37.3114V37.3114Z",fill:"#8195A3",key:7})])}r.defaultProps={width:"62",height:"70",viewBox:"0 0 62 70",fill:"none"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("circle",{cx:"47.5",cy:"47.5",r:"47.5",fill:"white",key:0}),a.createElement("g",{clipPath:"url(#clip0_1580_2126)",key:1},[a.createElement("path",{d:"M18.9786 49.129C19.0437 48.3535 19.5355 47.7167 20.2621 47.467L26.1577 45.4412L20.4182 38.7595C20.0371 38.316 19.8777 37.7295 19.9807 37.1505C20.0837 36.5716 20.4353 36.0787 20.9452 35.7984L28.3499 31.7275C28.8337 31.4616 29.438 31.6438 29.7004 32.1347C29.9624 32.6255 29.7827 33.2389 29.2991 33.5048L21.9961 37.5198L28.1126 44.6402L47.4317 34.0188L43.847 29.8458C43.4344 29.9994 42.989 30.0832 42.5247 30.0832C41.083 30.0832 39.8246 29.2742 39.1654 28.0806L33.6299 31.1239C33.479 31.2068 33.3166 31.2461 33.1563 31.2461C32.8025 31.2461 32.4599 31.0545 32.2795 30.7166C32.0174 30.2258 32.1971 29.6124 32.6808 29.3465L38.6792 26.0489C38.7468 23.9553 40.4451 22.273 42.5245 22.273C44.6466 22.273 46.3731 24.0248 46.3731 26.1781C46.3731 27.1262 46.0381 27.9961 45.4824 28.6733L48.9999 32.7681L55.2316 25.5137C55.8199 24.8287 56.7806 24.6526 57.5683 25.0854L60.0042 26.4246C60.2896 24.1342 62.2204 22.3567 64.5537 22.3567C67.083 22.3567 69.1409 24.4447 69.1409 27.0114C69.1409 28.4305 68.5109 29.7025 67.5208 30.5569L77.0547 35.7984C77.5644 36.0787 77.9158 36.5714 78.019 37.1505C78.122 37.7295 77.9626 38.316 77.5815 38.7594L71.8421 45.4411L77.7376 47.4668C78.4642 47.7165 78.956 48.3533 79.0211 49.1287C79.0862 49.9041 78.7077 50.6162 78.0332 50.987L71.1101 54.7931V58.6082C71.1101 59.1664 70.6642 59.6189 70.114 59.6189C69.5637 59.6189 69.1179 59.1664 69.1179 58.6082V55.8883L59.4321 61.2132C59.0189 61.4404 58.5579 61.5559 58.0952 61.5559C57.7926 61.5559 57.4891 61.5065 57.198 61.4065L49.9958 58.932V79.0421L68.6934 68.7624C68.9552 68.6185 69.1177 68.3414 69.1177 68.0392V63.5979C69.1177 63.0397 69.5636 62.5871 70.1138 62.5871C70.6641 62.5871 71.1099 63.0397 71.1099 63.5979V68.0392C71.1099 69.084 70.5477 70.042 69.6425 70.5397L50.3349 81.1549C49.9168 81.3848 49.4582 81.4996 48.9996 81.4996C48.541 81.4996 48.0824 81.3846 47.6643 81.1549L28.3567 70.5397C27.4516 70.042 26.8892 69.084 26.8892 68.0392V54.7929L19.9662 50.9869C19.2922 50.6165 18.9135 49.9045 18.9786 49.129ZM46.7978 41.3096C43.3109 42.3041 40.8757 45.5668 40.8757 49.2439C40.8757 50.2679 41.057 51.2616 41.4153 52.2033L48.9999 56.3731L56.5844 52.2033C56.9426 51.2616 57.124 50.2679 57.124 49.2439C57.124 45.5555 54.6795 42.29 51.1791 41.3028C50.6491 41.1534 50.3389 40.5961 50.4862 40.0584C50.6333 39.5205 51.1828 39.2058 51.7126 39.3552C56.0716 40.5846 59.1161 44.6509 59.1161 49.2439C59.1161 49.7978 59.0719 50.3446 58.9869 50.8825L68.023 45.9147L48.9996 35.456L29.9763 45.9148L39.0124 50.8827C38.9274 50.3447 38.8832 49.7979 38.8832 49.2441C38.8832 44.6651 41.916 40.6022 46.2584 39.3635C46.7881 39.2123 47.3381 39.5258 47.4868 40.063C47.6361 40.6004 47.3276 41.1585 46.7978 41.3096ZM42.5247 24.2948C41.5011 24.2948 40.6682 25.1397 40.6682 26.1784C40.6682 27.217 41.5011 28.0621 42.5247 28.0621C43.5483 28.0621 44.381 27.217 44.381 26.1784C44.381 25.1397 43.5483 24.2948 42.5247 24.2948ZM64.5537 24.3784C63.123 24.3784 61.9587 25.5597 61.9587 27.0116C61.9587 28.4635 63.123 29.6448 64.5537 29.6448C65.9845 29.6448 67.1487 28.4636 67.1487 27.0116C67.1487 25.5597 65.9845 24.3784 64.5537 24.3784ZM65.2566 31.6116C65.0274 31.6476 64.7927 31.6663 64.5537 31.6663C62.6973 31.6663 61.0962 30.5409 60.3749 28.9278L56.6846 26.899L50.5682 34.0191L69.8874 44.6404L76.0038 37.5201L65.2566 31.6116ZM57.8371 59.4921C58.0501 59.5654 58.2858 59.5448 58.4831 59.4362L69.6351 53.3052C69.638 53.3036 69.641 53.302 69.644 53.3004L76.8974 49.3127L70.2065 47.0137L51.4812 57.3085L57.8371 59.4921ZM28.8818 68.0397C28.8818 68.3418 29.0445 68.6189 29.3062 68.7628L48.0038 79.0425V58.9324L40.8016 61.4069C40.5104 61.5069 40.2069 61.5563 39.9043 61.5563C39.4418 61.5563 38.9807 61.4407 38.5675 61.2136L28.8817 55.8887V68.0397H28.8818ZM39.5167 59.4362C39.7141 59.5448 39.9497 59.5654 40.1627 59.4921L46.5185 57.3085L27.7932 47.0137L21.1023 49.3127L39.5167 59.4362ZM20.9011 49.3818C20.9012 49.3818 20.9013 49.3817 20.9016 49.3817L20.9011 49.3818Z",fill:"#8195A3",key:0}),a.createElement("path",{d:"M41.5504 69.7331L43.8355 70.9894C44.3192 71.2553 44.4987 71.8688 44.2367 72.3596C44.0563 72.6973 43.7137 72.8891 43.3599 72.8891C43.1997 72.8891 43.037 72.8497 42.8863 72.7669L40.6012 71.5106C40.1175 71.2447 39.938 70.6312 40.2 70.1404C40.462 69.6496 41.0663 69.4671 41.5504 69.7331Z",fill:"#8195A3",key:1}),a.createElement("path",{d:"M60.7281 21.0118C60.5335 21.2091 60.2785 21.3079 60.0236 21.3079C59.7687 21.3079 59.5137 21.2092 59.3192 21.0118L58.4975 20.178L57.6758 21.0118C57.4812 21.2091 57.2262 21.3079 56.9713 21.3079C56.7165 21.3079 56.4615 21.2092 56.2669 21.0118C55.8779 20.6171 55.8779 19.9771 56.2669 19.5825L57.0887 18.7486L56.2669 17.9146C55.8779 17.5199 55.8779 16.8799 56.2669 16.4853C56.656 16.0906 57.2866 16.0906 57.6756 16.4853L58.4973 17.3191L59.319 16.4853C59.7082 16.0906 60.3388 16.0906 60.7278 16.4853C61.1168 16.88 61.1168 17.52 60.7278 17.9146L59.9059 18.7486L60.7278 19.5825C61.1171 19.9771 61.1171 20.6171 60.7281 21.0118Z",fill:"#8195A3",key:2}),a.createElement("path",{d:"M31.2381 27.6329C31.0435 27.8302 30.7885 27.929 30.5336 27.929C30.2788 27.929 30.0238 27.8303 29.8292 27.6329L29.0075 26.7991L28.1858 27.6329C27.9912 27.8302 27.7362 27.929 27.4813 27.929C27.2265 27.929 26.9715 27.8303 26.7769 27.6329C26.3879 27.2382 26.3879 26.5982 26.7769 26.2036L27.5987 25.3696L26.7769 24.5357C26.3879 24.141 26.3879 23.501 26.7769 23.1064C27.166 22.7117 27.7966 22.7117 28.1856 23.1064L29.0073 23.9402L29.8291 23.1064C30.2182 22.7117 30.8488 22.7117 31.2378 23.1064C31.6268 23.5011 31.6268 24.1411 31.2378 24.5357L30.416 25.3696L31.2378 26.2036C31.6271 26.5982 31.6271 27.2382 31.2381 27.6329Z",fill:"#8195A3",key:3}),a.createElement("path",{d:"M36.7374 21.3071C34.3444 21.3071 32.3976 19.3317 32.3976 16.9036C32.3977 14.4754 34.3445 12.5 36.7374 12.5C39.1303 12.5 41.0771 14.4754 41.0771 16.9036C41.0771 19.3317 39.1304 21.3071 36.7374 21.3071ZM36.7374 14.5215C35.443 14.5215 34.3898 15.59 34.3898 16.9036C34.3898 18.217 35.443 19.2856 36.7374 19.2856C38.0318 19.2856 39.085 18.217 39.085 16.9036C39.085 15.59 38.0318 14.5215 36.7374 14.5215Z",fill:"#8195A3",key:4}),a.createElement("path",{d:"M49.1123 50.304C50.072 50.304 50.9777 50.6269 51.6641 51.2142C52.0846 51.574 52.1381 52.2118 51.7834 52.6384C51.4289 53.0652 50.8004 53.1194 50.3798 52.7596C50.0571 52.4834 49.5954 52.3254 49.1121 52.3254H49.1055C48.6198 52.3268 48.1564 52.4879 47.8338 52.7673C47.6461 52.9298 47.4162 53.0092 47.1877 53.0092C46.9062 53.0092 46.6265 52.8888 46.4296 52.6546C46.0724 52.2301 46.1221 51.592 46.5405 51.2296C47.2263 50.6355 48.1353 50.3067 49.0998 50.3037C49.1039 50.304 49.1081 50.304 49.1123 50.304Z",fill:"#8195A3",key:5}),a.createElement("path",{d:"M53.3266 47.3107H53.3359C53.8865 47.3025 54.3302 47.7564 54.3342 48.3144C54.3379 48.8726 53.8905 49.3283 53.3404 49.3322H53.3333C52.7865 49.3322 52.3412 48.8842 52.3374 48.3285C52.3335 47.7703 52.7763 47.3146 53.3266 47.3107Z",fill:"#8195A3",key:6}),a.createElement("path",{d:"M44.8587 49.3114C44.8553 49.3121 44.8517 49.3125 44.8482 49.3132C44.8195 49.3188 44.7904 49.3236 44.761 49.3267C44.7514 49.3276 44.7417 49.3276 44.7321 49.3283C44.71 49.3299 44.6878 49.332 44.6651 49.3322H44.658C44.6238 49.3322 44.5899 49.3304 44.5564 49.3269C44.0535 49.2759 43.6609 48.8451 43.6609 48.3213C43.6609 47.8043 44.0435 47.3789 44.5369 47.3187C44.5414 47.3181 44.5458 47.317 44.5503 47.3166C44.573 47.3142 44.5963 47.3135 44.6195 47.3126C44.6301 47.3122 44.6405 47.3108 44.6513 47.3107H44.6564V47.3107H44.6606H44.6664H44.6676C45.2144 47.3107 45.6551 47.7587 45.6589 48.3144C45.6622 48.8054 45.3164 49.2167 44.8587 49.3114Z",fill:"#8195A3",key:7})]),a.createElement("defs",{key:2},a.createElement("clipPath",{id:"clip0_1580_2126"},a.createElement("rect",{width:"68",height:"69",fill:"white",transform:"matrix(-1 0 0 1 83 12.5)"})))])}r.defaultProps={width:"95",height:"96",viewBox:"0 0 95 96",fill:"none"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("rect",{id:"t2i-mask-picture-1",x:"0",y:"0",width:"32",height:"32",rx:"2",key:0}),a.createElement("mask",{id:"t2i-mask-picture-2",maskContentUnits:"userSpaceOnUse",maskUnits:"objectBoundingBox",x:"0",y:"0",width:"32",height:"32",fill:"white",key:1},a.createElement("use",{xlinkHref:"#t2i-mask-picture-1"}))]),a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{transform:"translate(-131.000000, -538.000000)"},a.createElement("g",{transform:"translate(48.000000, 499.000000)"},a.createElement("g",{transform:"translate(83.456140, 39.447059)"},a.createElement("g",null,[a.createElement("polygon",{fill:"#FFFFFF",points:"5 26.6294438 5 23.8802887 11.2016453 16 16.1978829 21.4895633 20.5917173 19.1262719 27.0029718 23.8802887 27.0029718 26.6294438",key:0}),a.createElement("ellipse",{fill:"#FFFFFF",cx:"20.0142028",cy:"10.9974178",rx:"2.0142028",ry:"1.99741778",key:1}),a.createElement("use",{stroke:"#FFFFFF",mask:"url(#t2i-mask-picture-2)",strokeWidth:"3",xlinkHref:"#t2i-mask-picture-2",key:2})])))))])}r.defaultProps={width:"32px",height:"32px",viewBox:"0 0 32 32",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEBREW_FONTS=t.default=void 0;t.default={ARIAL:{name:"Arial",value:"Arial,Helvetica,sans-serif"},GEORGIA:{name:"Georgia",value:"Georgia,serif"},IMPACT:{name:"Impact",value:"Impact,Charcoal,sans-serif"},ROBOTO:{name:"Roboto",value:"Roboto,sans-serif"},TAHOMA:{name:"Tahoma",value:"Tahoma,Geneva,sans-serif"},TIMES_NEW_ROMAN:{name:"Times New Roman",value:"'Times New Roman',Times,serif"},VERDANA:{name:"Verdana",value:"Verdana,Geneva,sans-serif"},ALEF:{name:"Alef",value:"Alef,sans-serif"}};t.HEBREW_FONTS={DAVID:{name:"David",value:"David,Arial,sans-serif"},GUTTMAN_YAD_BRUSH:{name:"Guttman Yad-Brush",value:"GuttmanYadBrush,David"},OPEN_SANS_HEBREW:{name:"Open Sans Hebrew",value:"Open Sans Hebrew"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_VALID_TYPES=void 0;t.IMAGE_VALID_TYPES=["image/x-png","image/gif","image/jpeg","image/png","jpg","png","gif"]},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(193));t.default=function(e){var t=e.entry,n=e.interactions[t],a=r.default.getTaskInteractionStoreByType(n.type);return n&&n.isInteractionSupportGamify?n.isInteractionSupportGamify():!(!a||!a.isInteractionSupportGamify)&&a.isInteractionSupportGamify(n)}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(721)).default;t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(732));n(733);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(6)),s=a(n(8)),l=a(n(7)),u=a(n(447));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,o.default)(n,e);var t=c(n);function n(e){var a;(0,r.default)(this,n),a=t.call(this,e);var i=e.params,o=i.trackingName,s=i.customDimensions,l=i.customDimensionsValues;return a.t2kAnalytics=new u.default(e.dispatchTo,o,s,l),a}return(0,i.default)(n,[{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._logEventsQueue.forEach((function(t){var n=t.eventData,a=n.eventData,r=n.additionalData;e.t2kAnalytics.sendEvent(a,r)})),this._logEventsQueue=[],t()}}]),n}(a(n(136)).default);t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(48)),s=a(n(105)),l=a(n(622)),u=a(n(736)),c=a(n(180)),d=function(){function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,e),window.t2k_ga||e._initGA(),this.trackerName=n,window.t2k_ga("create",t,"auto",n),this.customDimensions=a,this.setGlobalFieldValues(i)}return(0,i.default)(e,null,[{key:"_initGA",value:function(){var e,t,n,a,r,i;e=window,t=document,n="script",a="t2k_ga",e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,r=t.createElement(n),i=t.getElementsByTagName(n)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(r,i)}},{key:"_formatEventLabel",value:function(e){var t=(0,c.default)(e,(function(e,t){return"".concat(t,"=").concat(e)}));return(0,u.default)(t,"&")}}]),(0,i.default)(e,[{key:"_formatTrackerCommand",value:function(e){return this.trackerName?"".concat(this.trackerName,".").concat(e):e}},{key:"_getFieldsObjectWithCustomDimensions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)(t,(function(t,n,a){var r=e.customDimensions.indexOf(a);return-1!==r?t["dimension".concat(r+1)]=n:t[a]=n,t}),{})}},{key:"setGlobalFieldValues",value:function(e){if(e&&!(0,s.default)(e)){var t=this._getFieldsObjectWithCustomDimensions(e);window.t2k_ga(this._formatTrackerCommand("set"),t)}}},{key:"sendEvent",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={eventCategory:t.category,eventAction:t.action};t.label&&((0,o.default)(t.label)?a.eventLabel=e._formatEventLabel(t.label):a.eventLabel=t.label),t.value&&(a.eventValue=t.value);var r=this._getFieldsObjectWithCustomDimensions(n);Object.assign(a,r),window.t2k_ga(this._formatTrackerCommand("send"),"event",a)}}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(6)),l=a(n(8)),u=a(n(7));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._callbacks=e.dispatchTo,a._events=Object.keys(e.dispatchTo),a}return(0,o.default)(n,[{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._logEventsQueue.forEach((function(t){var n=t.action,a=d(d({},t.dispatcher),t.eventData);e._callbacks[n](a)})),this._logEventsQueue=[],t()}}]),n}(a(n(136)).default);t.default=p},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(6)),s=a(n(8)),l=a(n(7)),u=a(n(141)),c=a(n(32)),d=a(n(136));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,o.default)(n,e);var t=f(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;a||(a=(0,u.default)(this._logEventsQueue),this._logEventsQueue=[]);var r={logEvents:a};c.default.post(this._dispatchTo,void 0,r,{recover:!0}).then((function(){t(e._id)})).catch((function(){if(n<3){var r=n+1;e.send(t,r,a)}else e._logEventsQueue=e._logEventsQueue.concat(a),t(e._id)}))}}]),n}(d.default);t.default=p},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(3)),s=a(n(4)),l=a(n(6)),u=a(n(8)),c=a(n(7)),d=a(n(9)),f=a(n(141)),p=a(n(737)),h=n(39),m=a(n(136));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=(r={},(0,d.default)(r,h.EVENT_TYPES.CI_LOADED,"launched"),(0,d.default)(r,h.EVENT_TYPES.CI_TERMINATED,"exited"),r),E=(i={},(0,d.default)(i,h.EVENT_TYPES.TASK_ATTEMPT,"attempted"),(0,d.default)(i,h.EVENT_TYPES.TASK_COMPLETED,"completed"),i),_={MC:"choice",CM:"choice",FITG:"fill-in",FW:"other"},y=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e))._xapiContext=e.params.xapiContext;var r=!a._xapiContext.auth.startsWith("Basic ");return a._lrs=new p.default.LRS({endpoint:a._dispatchTo,auth:"".concat(r?"Basic ":"").concat(a._xapiContext.auth),allowFail:!1}),a}return(0,s.default)(n,null,[{key:"_getActorProperty",value:function(e){return Array.isArray(e)?e[0]:e}}]),(0,s.default)(n,[{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;a||(a=(0,f.default)(this._logEventsQueue),this._logEventsQueue=[]);var r=a.map((function(t){return new p.default.Statement(e._convertEventToXapi(t))}));this._lrs.saveStatements(r,{callback:function(r){if(null!==r)if(n<3){var i=n+1;e.send(t,i,a)}else e._logEventsQueue=e._logEventsQueue.concat(a),t(e._id);else t(e._id)}})}},{key:"_convertEventToXapi",value:function(e){return g[e.action]?this._convertCIEvent(e):E[e.action]?this._convertTaskEvent(e):""}},{key:"_convertCIEvent",value:function(e){return{timestamp:new Date(e.timestamp).toISOString(),actor:{mbox:n._getActorProperty(this._xapiContext.actor.mbox),name:n._getActorProperty(this._xapiContext.actor.name)},verb:{id:"http://adlnet.gov/expapi/verbs/".concat(g[e.action]),display:{"en-US":g[e.action]}},object:{id:"http://timetoknow.com/tincan/activities/".concat(e.contextObject.contentItemId),objectType:"Activity",definition:{name:{"en-US":"CI Title"},type:"http://adlnet.gov/expapi/activities/lesson"}}}}},{key:"_convertTaskEvent",value:function(e){var t={timestamp:new Date(e.timestamp).toISOString(),actor:{mbox:n._getActorProperty(this._xapiContext.actor.mbox),name:n._getActorProperty(this._xapiContext.actor.name)},verb:{id:"http://adlnet.gov/expapi/verbs/".concat(E[e.action]),display:{"en-US":E[e.action]}},object:{id:"http://timetoknow.com/tincan/activity/task/".concat(e.eventData.taskId),definition:{type:"http://adlnet.gov/expapi/activities/interaction",interactionType:_[e.eventData.taskType]}},result:{score:{raw:e.eventData.score.correctness,min:0,max:100}}};return e.action===h.EVENT_TYPES.TASK_COMPLETED&&(t.result.completion=!0),t}}]),n}(m.default);t.default=y},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.checkFunctionPropType=function(e,t){var n=e[t],a=(0,r.default)(n);if(!n||"function"==typeof n)return;return new Error("Provided ".concat(t," with type ").concat(a,", must be 'function' or 'false'."))},t.element=function(e,t){var n=e[t];if(!("object"===("undefined"==typeof HTMLElement?"undefined":(0,r.default)(HTMLElement))?n instanceof HTMLElement:n&&"object"===(0,r.default)(n)&&null!==n&&1===n.nodeType&&"string"==typeof n.nodeName))return new Error('Expected "'.concat(t,'" to be HTMLElement'));return};var r=a(n(63))},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(112));t.default=function(e,t){return t.children().each((function(e,t){(0,r.default)(t).width((0,r.default)(t).width())})),t}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(756));n(778);var i=r.default;t.default=i},,,,,function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd"},[a.createElement("path",{d:"M11.979 2.717c-5.107 0-9.263 4.156-9.263 9.263 0 5.108 4.156 9.263 9.263 9.263s9.263-4.155 9.263-9.263c0-5.107-4.156-9.263-9.263-9.263m0 20c-5.921 0-10.737-4.816-10.737-10.737S6.058 1.242 11.979 1.242 22.716 6.059 22.716 11.98c0 5.92-4.816 10.737-10.737 10.737",fill:"#323232",key:0}),a.createElement("path",{d:"M15.58 17.359a.478.478 0 0 1-.271-.086l-3.313-2.333-3.314 2.333a.47.47 0 0 1-.54 0 .435.435 0 0 1-.164-.493l1.266-3.776L5.93 10.67a.43.43 0 0 1-.165-.492.453.453 0 0 1 .432-.306h4.098l1.265-3.775c.124-.367.745-.367.87 0l1.265 3.775h4.097c.197 0 .372.123.433.306a.432.432 0 0 1-.165.492l-3.314 2.334 1.266 3.776a.434.434 0 0 1-.165.493.472.472 0 0 1-.268.086",fill:"#313232",key:1})]))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(779));n(781);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(37)),v=r(n(58)),g=n(74),E=a(n(131)),_=r(n(101));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var k=m.default.isPhone,S=function(e){(0,c.default)(n,e);var t=y(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).onKeyDown=function(e){13===e.keyCode&&a._onClickClose()},a._onClickClose=a._onClickClose.bind((0,u.default)(a)),a._onCloseDialog=a._onCloseDialog.bind((0,u.default)(a)),a._onClickFeedback=a._onClickFeedback.bind((0,u.default)(a)),a.state={dialogContentSrc:""},a}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.currentAnswer,n=e.currentFeedback,a=e.showFeedback,r=e.extendedFeedback,s=e.isEditable,l=e.customStyleClass,u=e.placeholder,c=e.strictSanitize,d=(0,h.default)("feedback-element toaster",(0,o.default)({},t,t),{hide:!a},{extended:r},{phone:k},{editable:s},(0,o.default)({},l,l));return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{"data-unittest-id":"feedback-element",className:d},p.default.createElement("div",{className:"toast-text-container"},s?this.renderTextArea(n,u):p.default.createElement("div",(0,i.default)({className:"toast-text"},(0,_.default)(n,c),{onClick:this.props.extendedFeedback?this._onClickFeedback:null}))),this.props.isInteractionsThemeV2?p.default.createElement(g.CloseIcon,{className:"close-toast-button",onClick:this._onClickClose,tabIndex:"0",role:"button",onKeyDown:this.onKeyDown}):p.default.createElement("div",{"data-unittest-id":"close-feedback-btn",className:"t2kInt-icon-delete_close close-toast",onKeyDown:this.onKeyDown,onClick:this._onClickClose,tabIndex:"0",role:"button"})),this.renderDialog())}},{key:"renderTextArea",value:function(e,t){var n=this;return p.default.createElement(E.default,{name:"feedback-textarea",ref:function(e){n._textAreaRef=e},type:E.BOXAREA,paragraphSize:E.SHORTPARAGRAPH,placeholder:t,defaultHtml:e||"",onChange:this.props.onFeedbackChange,maxLength:this.props.maxLength,showCounter:this.props.showCounter,onFocus:this.props.onFocus,onBlur:this.props.onBlur})}},{key:"renderDialog",value:function(){var e=this.state.dialogContentSrc;return e?p.default.createElement(v.default,{theme:v.default.THEMES.LIGHT,close:this._onCloseDialog,styleClass:"image-modal"},p.default.createElement("img",{src:e,alt:e})):null}},{key:"_onClickClose",value:function(e){return"function"==typeof this.props.onClose?this.props.onClose(e):void 0}},{key:"_onCloseDialog",value:function(){this.setState({dialogContentSrc:""})}},{key:"_onClickFeedback",value:function(e){var t=e.target.getAttribute("data-image-link");t&&(e.preventDefault(),this.setState({dialogContentSrc:t}))}}]),n}(p.Component);t.default=S,S.defaultProps={currentFeedback:"",currentAnswer:"",showFeedback:!1,extendedFeedback:!1,onClose:null,isInteractionsThemeV2:!1,isEditable:!1,onFeedbackChange:function(){},maxLength:0,showCounter:!1,customStyleClass:"",placeholder:"",onFocus:null,onBlur:null}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),n(66)),p=r(n(286)),h=n(118);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=!f.isWebkit,g=function(e){(0,l.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){v&&(this._unregisterResizeEventListener=p.default.register(this.handleDotsForNonWebkit.bind(this)))}},{key:"componentDidMount",value:function(){v&&this.handleDotsForNonWebkit()}},{key:"componentWillUnmount",value:function(){v&&this._unregisterResizeEventListener()}},{key:"render",value:function(){return v?this.renderNoClamp():this.renderClamp()}},{key:"renderClamp",value:function(){var e=this.props,t=e.children,n=e.title,a=e.ltr,r=void 0===a||a,i=n||t;return d.default.createElement("div",{style:Object.assign({overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",display:"-webkit-box",wordBreak:"break-word"},this.props.clamp?{WebkitLineClamp:this.props.clamp,direction:r?"ltr":"rtl"}:{}),title:i},t)}},{key:"renderNoClamp",value:function(){var e,t=this,n=this.props,a=n.ltr,r=n.clamp,o=n.lineHeight,s=n.children,l=n.title,u=Number(r),c=isNaN(o)?1.2:Number(o),f=!isNaN(u),p=l||s;return d.default.createElement("div",{ref:function(e){t.container=e},title:p,style:f?{position:"relative",lineHeight:c?"".concat(c,"em"):"inherit",maxHeight:"".concat(f?u*c:c,"em"),overflow:"hidden"}:void 0},d.default.createElement("div",{style:{wordWrap:"break-word",whiteSpace:"pre-wrap",wordBreak:"break-all"},ref:function(e){t.textContainer=e}},this.props.children),d.default.createElement("span",{ref:function(e){t.dots=e},style:(e={position:"absolute",fontWeight:"bold",bottom:"0"},(0,i.default)(e,a?"right":"left","0"),(0,i.default)(e,"padding","0 20px 0 10px"),(0,i.default)(e,"background","linear-gradient(to ".concat(a?"right":"left",", transparent, #FFF, #FFF, #FFF, #FFF, #FFF)")),e)},"..."))}},{key:"handleDotsForNonWebkit",value:function(){var e=this.container,t=this.textContainer,n=this.dots,a=e.clientWidth<t.clientWidth||e.clientHeight<t.clientHeight;n.style.display=a?"initial":"none"}}]),n}(d.Component);g.defaultProps={clamp:void 0};var E=(0,h.ComponentHoc)((function(e){return{ltr:e.ltr}}))(g);t.default=E},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Draggable=t.gsap=void 0;var r=a(n(1205)),i=a(n(1207));r.default.registerPlugin(i.default);var o=r.default;t.gsap=o;var s=i.default;t.Draggable=s},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(23)),s=a(n(68)),l=a(n(3)),u=a(n(4)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=r(n(0));a(n(2));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var m=(0,a(n(444)).default)([{propName:"html",onChangePropName:"onChange",handleChangePropName:"onChange"}],{withRef:!0})(i=function(e){(0,c.default)(n,e);var t=h(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.handleChange=this.handleChange.bind(this),this.handleBlur=this.handleBlur.bind(this)}},{key:"componentDidMount",value:function(){this._setInnerHTML()}},{key:"shouldComponentUpdate",value:function(e){return e.placeholder!==this.props.placeholder||e.html!==this.props.html}},{key:"componentDidUpdate",value:function(e){e.placeholder!==this.props.placeholder&&this._containerRef.setAttribute("placeholder",this.props.placeholder),e.html!==this.props.html&&this._containerRef.innerHTML!==this.props.html&&this._setInnerHTML()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.html,t.isHtmlControlled,(0,s.default)(t,["html","isHtmlControlled"]));return p.default.createElement("div",(0,o.default)({},n,{ref:function(t){e._containerRef=t},onInput:this.handleChange,onBlur:this.handleBlur,contentEditable:!0}))}},{key:"handleChange",value:function(e){var t=this._containerRef.innerHTML;this.props.onChange(t,e)}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"insertNodeOverSelection",value:function(e){var t=this._containerRef;if(window.getSelection){var a=window.getSelection();if(a.getRangeAt&&a.rangeCount){var r=a.getRangeAt(0);n.isOrContainsNode(t,r.commonAncestorContainer)?(r.deleteContents(),r.insertNode(e),r.setStart(e,0),n.focusAfterNode(e)):(t.appendChild(e),n.focusAfterNode(e))}else t.appendChild(e),n.focusAfterNode(e)}else if(document.selection&&document.selection.createRange){var i=document.selection.createRange();if(n.isOrContainsNode(t,i.parentElement())){var o=3===e.nodeType?e.data:e.outerHTML,s="marker_"+(""+Math.random()).slice(2);o+='<span id="'+s+'"></span>',i.deleteContents(),i.pasteHTML(o);var l=document.getElementById(s);i.moveToElementText(l),i.select(),l.parentNode.removeChild(l)}else t.appendChild(e)}this.handleChange()}},{key:"_setInnerHTML",value:function(){var e=this.props.html,t=void 0===e?"":e;this._containerRef.innerHTML=t}}],[{key:"isOrContainsNode",value:function(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}},{key:"focusAfterNode",value:function(e){setTimeout((function(){var t=window.getSelection(),n=document.createRange();n.setStartAfter(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n)}),0)}}]),n}(p.Component))||i;t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DNDGAP=t.WRITINGGAP=t.MULTIPLE=t.SINGLE=t.CORRECT=t.WRONG=t.SELECTED=void 0;t.SELECTED="selected";t.WRONG="wrong";t.CORRECT="correct";t.SINGLE="single";t.MULTIPLE="multiple";t.WRITINGGAP="WRITING";t.DNDGAP="DND"},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#e4e4e4",fillRule:"evenodd",d:"M13.26 4.448a8.812 8.812 0 0 1 8.812 8.812 8.813 8.813 0 1 1-8.812-8.812z",key:0}),a.createElement("path",{fill:"none",stroke:"#e4e4e4",d:"M13.26 1.26c6.627 0 12 5.373 12 12s-5.373 12-12 12-11.999-5.373-11.999-12 5.372-12 11.999-12z",key:1}),a.createElement("path",{fill:"var(--primary-theme-color)",fillRule:"evenodd",d:"M8.106 9.173h2.803l2.156 2.553 2.233-2.553h2.649l-3.527 3.819 3.835 4.177h-2.88l-2.402-2.766-2.449 2.766h-2.71l3.834-4.188-3.542-3.808z",key:2})])}r.defaultProps={viewBox:"0 0 26 26",width:"26",height:"26"},e.exports=r,r.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UNCHECKED=t.CHECKED=t.CORRECT=t.WRONG=t.COLUMNB=t.COLUMNA=t.IMAGE=t.TEXT=void 0;t.TEXT="TEXT";t.IMAGE="IMAGE";t.COLUMNA="columnA";t.COLUMNB="columnB";t.WRONG="wrong";t.CORRECT="correct";t.CHECKED="checked";t.UNCHECKED="unchecked"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){var n={};return e.forEach((function(e){var a=t.optionsPartition[e]||0,r=0;if(t.totalVotes>0){var i=a/t.totalVotes*100;r=i%1>.5?Math.ceil(i):Math.floor(i)}n[e]={id:e,percent:r,numOfVotes:a}})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ANSWER_TYPE=void 0;var a={CORRECT:"correct",WRONG:"wrong",PARTIAL:"partial",UNANSWERED:"unanswered",PREV_WRONG:"prev-wrong",SELECTED:"selected"};t.ANSWER_TYPE=a;var r=a;t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(40)),s=r(n(33)),l=r(n(34)),u=r(n(3)),c=r(n(4)),d=r(n(12)),f=r(n(6)),p=r(n(8)),h=r(n(7)),m=r(n(9)),v=r(n(72)),g=a(n(0)),E=r(n(24)),_=(r(n(2)),r(n(11))),y=r(n(330)),k=n(62),S=r(n(15));n(805),n(806),n(807),n(808);var T=r(n(28)),b=r(n(289)),C=r(n(22)),I=r(n(14));n(470),n(472),n(473),n(474);var O=r(n(475));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var R=T.default.Instance,P=["WIDE","SQUARE","NONE"].reduce((function(e,t){return Object.assign(e,(0,m.default)({},t,t))}),{}),M={YOUTUBE:"video/youtube",VIMEO:"video/vimeo",MP4:"video/mp4",HLS:"application/x-mpegURL"},L=function(e){(0,f.default)(r,e);var t,n,a=w(r);function r(e){var t;(0,u.default)(this,r),(t=a.call(this,e))._onMarkerReached=t._onMarkerReached.bind((0,d.default)(t)),t._isVisible=t._isVisible.bind((0,d.default)(t)),t._handleFullscreenChange=t._handleFullscreenChange.bind((0,d.default)(t)),t._onResize=t._onResize.bind((0,d.default)(t));var n=((0,v.default)(e.src)?e.src:[e.src])[0].type;return t.state={isReady:!1,currentMarker:void 0,visibilitySensorActive:"none"===e.preload&&(n===M.MP4||n===M.HLS)||!!t.props.onVisibilityChange,isFullscreen:!1,updateCount:0,isMinWidth300:!1,isMinWidth165:!1,type:n},t._preventCloseOverlay=!1,t._reachedMarkers={},t._id=(0,k.v4)(),t.playStarted=!1,t.interactionsThemeV2=I.default.isFeatureEnabled("interactionsThemeV2")||I.default.isFeatureEnabled("unifiedContent"),t._lastTime=[0],t}return(0,c.default)(r,[{key:"componentDidMount",value:(n=(0,l.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._setSource();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_setSource",value:(t=(0,l.default)(s.default.mark((function e(){var t,n,a,r,i,l,u,c,d,f,p,h,m;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.src,a=t.rests,r=t.ignoreHls,i=(0,v.default)(n)?n:[n],this._setVideoState(),l=i,u="?fromCache=true",c="_cmp_",-1!==i[0].src.indexOf(u)||!i[0].src.endsWith(".mp4")&&!i[0].src.endsWith(".mov")||i[0].type!==M.MP4||!a.checkFileExists||!I.default.getAppdata().appConf.playHls||r){e.next=22;break}return d="".concat(i[0].src,"Mastier.m3u8"),e.prev=8,e.next=11,R.get(a.checkFileExists,{},{params:{filename:d.replace(/(^\w+:|^)/,"")}});case 11:f=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),f=!1;case 17:return e.prev=17,f&&(l=[{src:d,type:M.HLS}].concat((0,o.default)(i))),e.finish(17);case 20:e.next=33;break;case 22:if(-1===i[0].src.indexOf(u)){e.next=33;break}return p=i[0].src,-1===(h="".concat(p.substring(0,p.length-(4+u.length))).concat(c,".mp4")).indexOf("https:")&&(h="https:".concat(h)),e.next=28,caches.open("echo-offline-v1");case 28:return m=e.sent,e.next=31,m.match(h,{ignoreSearch:!0,ignoreVary:!0,ignoreMethod:!0});case 31:e.sent&&(l=[{src:"".concat(h).concat(u),type:i[0].type}]);case 33:this.setState({isReady:!0,src:l,type:l[0].type},this._init);case 34:case"end":return e.stop()}}),e,this,[[8,14,17,20]])}))),function(){return t.apply(this,arguments)})},{key:"_setVideoState",value:function(){var e=this.props,t=e.src,n=e.disabledSeekForward,a=(0,v.default)(t)?t:[t];if(n){this._videoStateKey="videoState-".concat(I.default.getUser().id);var r=localStorage.getItem(this._videoStateKey);if(r){try{(r=JSON.parse(r))[a[0].src]||(r[a[0].src]={max:0})}catch(u){r=(0,m.default)({},a[0].src,{max:0})}var i=Date.now();r[a[0].src].lastUpdated=i;for(var o=0,s=Object.keys(r);o<s.length;o++){var l=s[o];r[l].lastUpdated<i-6048e5&&delete r[l]}this._videosState=r}else this._videosState=(0,m.default)({},a[0].src,{max:0});this._videoState=this._videosState[a[0].src]}}},{key:"_init",value:function(){var e,t,n,a=this,r=this.props.isVioletTheme,i=this.state.src,o={language:this._getLocale(),playbackRates:[.5,.75,1,1.25,1.5,2],resizeManager:!(I.default.isMobile()&&I.default.isIos()),html5:{hls:{withCredentials:null===(e=i[0])||void 0===e||null===(t=e.src)||void 0===t||null===(n=t.includes)||void 0===n?void 0:n.call(t,I.default.getAppdata().assets_prefix),overrideNative:!S.default.browser.IS_SAFARI}}};r&&(o.controlBar={volumePanel:{inline:!1,vertical:!0},children:["playToggle","progressControl","currentTimeDisplay","timeDivider","durationDisplay","remainingTimeDisplay","playbackRateMenuButton","volumePanel","fullscreenToggle"]}),this._player=(0,S.default)(this._videoNode,o,(function(){var e=a.props,t=e.eventData,n=e.eventUrl,r=e.watermark,i=e.persistvolume,o=e.onReady,s=e.editorMode,l=a.state.type;a.setActivityEvents(t,n),a._setMarkers(),r&&a._player.watermark({image:r,position:"top-right",fadeTime:3e3}),a._player.persistvolume({persistvolume:i}),a._player.on("timeupdate",(function(){!a.playStarted&&l===M.VIMEO&&s&&(a.play(),a.playStarted=!0);var e=a.getVideoTime();e-a._lastTime[a._lastTime.length-1]<2?(a._lastTime.push(e),11===a._lastTime.length&&a._lastTime.shift()):a._lastTime=[e],a.props.disabledSeekForward&&10===a._lastTime.length&&a._videoState.max<e&&(a._videoState.max=e,localStorage.setItem(a._videoStateKey,JSON.stringify(a._videosState)))})),a._player.on("fullscreenchange",a._handleFullscreenChange),a._player.one("loadedmetadata",(function(){var e=a._player.duration();e&&a.props.setVideoDurationCallback(e)})),a._player.on("durationchange",(function(){var e=a._player.duration();e&&(a.props.setVideoDurationCallback(e),a._setMarkers())})),a._player.reloadSourceOnError(),o(),window.addEventListener("resize",a._onResize),a._onResize()}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!1;if(e.editorMode&&e.src){var n=e.src.src;this.props.src.src!==n&&(t=!0,this.setState({updateCount:this.state.updateCount+1,src:n}))}this._player&&!t&&JSON.stringify(e.markers)!==JSON.stringify(this.props.markers)&&this._setMarkers(e.markers)}},{key:"componentDidUpdate",value:function(e,t){this.state.updateCount!==t.updateCount&&this._setSource()}},{key:"componentWillUnmount",value:function(){this._resizeTimer&&clearTimeout(this._resizeTimer),window.removeEventListener("resize",this._onResize),this._dispose()}},{key:"_onResize",value:function(){var e=this;this._resizeTimer=setTimeout((function(){e._resizeTimer=null;var t=e.state,n=t.isMinWidth300,a=t.isMinWidth165,r=n,i=a;e._mainNode&&(e._mainNode.clientWidth<300&&!n||e._mainNode.clientWidth>=300&&n)&&(r=!n),e._mainNode&&(e._mainNode.clientWidth<165&&!a||e._mainNode.clientWidth>=165&&a)&&(i=!a),a===i&&n===r||e.setState({isMinWidth300:r,isMinWidth165:i})}),500)}},{key:"_dispose",value:function(){if(this._keepAliveId&&this._mediaKeepAlive.removeElement(this._keepAliveId),this._player)try{this._player.dispose()}catch(e){}}},{key:"render",value:function(){var e=this;if(!this.state.isReady)return null;var t,n=this.props,a=n.styleClass,i=n.allowDownloadMedia,o=n.preload,s=n.width,l=n.height,u=n.ratio,c=n.editorMode,d=n.isVioletTheme,f=n.showDefaultPoster,p=n.startTimeInSeconds,h=n.endTimeInSeconds,m=this.state,E=m.currentMarker,k=m.isFullscreen,S=m.src,T=m.isMinWidth300,b=m.isMinWidth165,C=m.visibilitySensorActive,A=(0,_.default)("video-js","vjs-default-skin",{"vjs-16-9":u===r.RATIO.WIDE,"vjs-4-3":u===r.RATIO.SQUARE,"vjs-progress-control-wide":c}),w={},R="video",P=(0,v.default)(S)?S:[S],L=1===P.length&&P[0].type===M.YOUTUBE,D=1===P.length&&P[0].type===M.VIMEO;L?(w={techOrder:["youtube"],sources:[{type:P[0].type,src:P[0].src}],youtube:{playsinline:1,start:p,end:h}},P=[],R="youtube",this.playStarted=this.playStarted||c):D?(w={techOrder:["vimeo"],sources:[{type:P[0].type,src:P[0].src}]},P=[],this.playStarted=this.playStarted||c,R="vimeo"):(P=P.map((function(e){return N(N({},e),{},{src:I.default.getAssetPath(e.src)})})),f&&(t=O.default));var x="".concat(this._id||"","-").concat(this.state.updateCount),F=E&&E.overlayElement,U=(0,_.default)("main-video-js",a,R,{"main-video-js--full-screen":k,"main-video-js__blurred":F&&this.interactionsThemeV2,"video-player-violet-theme":d,"small-panel-min-width-300":T,"small-panel-min-width-165":b});return g.default.createElement(y.default,{onChange:this._isVisible,active:C,partialVisibility:!0},g.default.createElement("div",{className:U,id:"main-video-js-".concat(this._id),style:{width:s,height:l},"data-automation-id":"video-component",ref:function(t){e._mainNode=t}},g.default.createElement("div",{"data-vjs-player":!0,style:{width:s,height:l},key:x},g.default.createElement("video",{id:"video-".concat(this._id),className:A,ref:function(t){e._videoNode=t},width:s,height:l,controls:!0,controlsList:i?"":"nodownload",preload:o,onContextMenu:function(e){e.preventDefault()},"data-setup":JSON.stringify(w),autoPlay:c,playsInline:!0,poster:t},P.map((function(e){return g.default.createElement("source",{src:e.src,type:e.type,key:"key-".concat(e.src,"-").concat(e.type)})}))),D&&(I.default.isMobile()||I.default.isTablet())&&g.default.createElement("div",{className:"vimeo-useractive-area"})),this.renderOverlayComponent()))}},{key:"renderOverlayComponent",value:function(){var e=this,t=this.state.currentMarker,n=this.props,a=n.showTaskOnFullScreen,r=n.isMustCompleteQuestions,o=t&&t.overlayElement;if(!o)return null;var s=this._getFirstNonDoneMarkerTime();if(r&&"number"==typeof s&&s<parseFloat(t.time)&&0!==s&&0!==parseFloat(t.time)&&!t.isCompleted)return null;var l=g.default.createElement(o.component,(0,i.default)({},o.props,{ref:function(t){e._overlayElementRef=t}}));return a?E.default.createPortal(l,I.default.getAppOverlay()):l}},{key:"getVideoTime",value:function(){return this._player.currentTime()}},{key:"play",value:function(){var e=this;this._removeOverlayFromView((function(){e.returnToFullScreen&&(e.returnToFullScreen=!1,e._player.requestFullscreen()),e._player.play()}))}},{key:"_removeOverlayFromView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.state.currentMarker&&this.setState({currentMarker:void 0},e)}},{key:"pause",value:function(){var e;null===(e=this._player)||void 0===e||e.pause()}},{key:"setActivityEvents",value:function(e,t){e&&t&&(this._keepAliveId&&this._mediaKeepAlive.removeElement(this._keepAliveId),this._mediaKeepAlive||(this._mediaKeepAlive=new b.default({eventData:e,restUrl:t})),this._keepAliveId=this._mediaKeepAlive.addElement({element:this._player}))}},{key:"_isVisible",value:function(e){var t=this;this.state.isFullscreen||(e&&this.setState({visibilitySensorActive:!!this.props.onVisibilityChange},(function(){t.state.type!==M.MP4&&t.state.type!==M.HLS||t._player.preload("auto")})),this.props.onVisibilityChange&&this.props.onVisibilityChange(e))}},{key:"_setMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.markers;t=t&&t.map((function(e){return"0"===e.time||0===e.time?N(N({},e),{},{time:"0.1"}):e}));var n=this.props.callbackByMarkerClick;t?this._player.markers.reset?this._player.markers.reset(t):(this._player.markers({markers:t,onMarkerReached:this._onMarkerReached,onMarkerClick:function(t){e.props.disabledSeekForward&&parseInt(t.time,10)>e._videoState.max||(n&&n(t.time,t.taskIds),e._preventCloseOverlay=!0,setTimeout((function(){e._preventCloseOverlay=!1}),1e3),e._onMarkerReached(t))},markerStyle:{width:"2px","background-color":"#FFF"},markerTip:{display:!0,text:function(e){return e.text}}}),this._player.on("play",(function(){e.playStarted=!0,e.returnToFullScreen&&(e.returnToFullScreen=!1,e._player.requestFullscreen()),e.state.currentMarker&&e.props.isMustCompleteQuestions&&e._overlayElementRef&&!e._overlayElementRef.isOverlayCompleted()&&e.triggerReturnUserToUncompletedMarker()})),this._player.on("seeked",(function(){e.state.currentMarker&&!e._preventCloseOverlay&&e._overlayElementRef&&e._overlayElementRef.closeOverlay(),e.props.disabledSeekForward&&e.getVideoTime()>e._videoState.max&&e.setVideoTime(e._videoState.max-.2),e.props.isMustCompleteQuestions&&e.triggerReturnUserToUncompletedMarker()}))):this._player.markers.destroy&&this._player.markers.destroy()}},{key:"triggerReturnUserToUncompletedMarker",value:function(){this._returnUserToUncompletedMarker()}},{key:"_returnUserToUncompletedMarker",value:function(){var e=this,t=this._getFirstNonDoneMarkerTime(),n=this.getVideoTime();if("number"==typeof t&&n&&t<=n){if(0===t){var a=this.state.currentMarker;a&&(this.pauseVideo(),this.setState({currentMarker:null},(function(){e.setState({currentMarker:a})})))}else this.setVideoTime(t-1);this.showTipOnFirstNotDoneMarker()}}},{key:"_onMarkerReached",value:function(e){var t,n,a,r=e.callback,i=e.overlayElement;if(!(this.props.disabledSeekForward&&parseInt(e.time,10)>this._videoState.max)){var o=this._player.currentTime();if((null!==(t=null===(n=this.state)||void 0===n||null===(a=n.currentMarker)||void 0===a?void 0:a.markerId)&&void 0!==t?t:null)!==e.markerId&&i&&!(Math.abs(o-e.time)>2)&&this.playStarted){if(!this.props.editorMode){var s=this.isCompletionChanged(e.time,e.isCompleted);if(this._reachedMarkers[e.time]={isCompleted:e.isCompleted},s)return}r&&r(e),this._player.isFullscreen()&&(this.returnToFullScreen=!0,this._player.exitFullscreen()),this.setState({currentMarker:e})}}}},{key:"isCompletionChanged",value:function(e,t){var n=this._reachedMarkers[e];return n&&!n.isCompleted&&t}},{key:"_getFirstNonDoneMarkerTime",value:function(){var e=this.props,t=e.markers,n=null;if(e.isMustCompleteQuestions&&t&&t.length){var a=t.find((function(e){return!e.isCompleted}));a&&(n=a.time,n=parseFloat(n))}return n}},{key:"_handleFullscreenChange",value:function(){var e=this._player.isFullscreen();this.setState({isFullscreen:e}),this.props.onFullScreenChanged(e)}},{key:"_getLocale",value:function(){var e;switch(this.props.locale){case"en-US":e="en";break;case"cn_CN":e="zh";break;case"es_MX":e="es";break;case"he_IL":e="he";break;case"jp_JP":e="ja";break;case"pt_BR":e="pt";break;case"vi_VN":e="vi";break;case"it_IT":e="it";break;case"de_DE":e="de";break;case"ru_RU":e="ru";break;case"nl_NL":e="nl";break;case"fr_FR":e="fr";break;case"ro_RO":e="ro";break;case"ko_KR":e="ko";break;case"ar":e="ar";break;case"am":e="am";break;case"zh_TW":e="zh";break;case"hu_HU":e="hu";break;case"pl_PL":e="pl";break;case"fi_FI":e="fi";break;case"th_TH":e="th";break;default:e="en"}return S.default.addLanguage(e,{"Play Video":C.default.translate("videojs.Play_Video"),Play:C.default.translate("videojs.Play"),Pause:C.default.translate("videojs.Pause"),Fullscreen:C.default.translate("videojs.Fullscreen"),"Non-Fullscreen":C.default.translate("videojs.Non-Fullscreen"),Mute:C.default.translate("videojs.Mute"),Unmute:C.default.translate("videojs.Unmute")}),e}},{key:"getVideoDuration",value:function(){return this._player.duration()}},{key:"pauseVideo",value:function(){var e;null===(e=this._player)||void 0===e||e.pause()}},{key:"setVideoTime",value:function(e){this._player.currentTime(e)}},{key:"showTipOnFirstNotDoneMarker",value:function(){var e=this.props,t=e.markers,n=e.shouldRenderMustCompleteMessage;if(e.isVioletTheme){var a=t.find((function(e){return!e.isCompleted}));this._player.markers.showMarkerTip(a),n()}}},{key:"hideMarkerTip",value:function(){this.props.isVioletTheme&&this._player.markers.hideMarkerTip()}}]),r}(g.Component);L.RATIO=P,L.defaultProps={styleClass:void 0,allowDownloadMedia:!1,eventData:void 0,eventUrl:void 0,preload:"none",width:"100%",height:"100%",markers:void 0,watermark:void 0,persistvolume:"persistvolume",ratio:P.NONE,locale:"en_US",editorMode:!1,isMustCompleteQuestions:!1,setVideoDurationCallback:function(){},verticalVolumeBar:!1,controlBarComponentOrder:null,onReady:function(){},callbackByMarkerClick:void 0,rests:{},isVioletTheme:!1,showTaskOnFullScreen:!1,shouldRenderMustCompleteMessage:function(){},ignoreHls:!1,showDefaultPoster:!1,onVisibilityChange:void 0,startTimeInSeconds:void 0,endTimeInSeconds:void 0,disabledSeekForward:!1,onFullScreenChanged:function(){}};var D=L;t.default=D},function(e,t,n){"use strict";var a=n(1)(n(63));Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;a=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,n=o,a=!0,s=u=void 0}};function o(e){return e&&e.__esModule?e:{default:e}}var s=o(n(15)),l=o(n(471)),u=o(n(10)),c=s.default.getComponent("Tech"),d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,a.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"createEl",value:function(){var e=null;"string"==typeof this.options_.source?e=this.options_.source:"object"===(0,a.default)(this.options_.source)&&(e=this.options_.source.src),e=this.parseSrc(e);var n=i(Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"iframe",{id:this.options_.techId,src:this.options_.embed+"/"+e+"?api=1&player_id="+this.options_.techId+"&loop=0&background=true&autoplay="+(this.options_.autoplay?1:0)+"&speed=1",allow:"autoplay"});return(0,s.default)(this.options_.playerId),n}},{key:"parseSrc",value:function(e){if(e){var t=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/)|(video\/))?([0-9]+)/);if(t&&t[6])return t[6]}}},{key:"isApiReady",value:function(){return u.default.Vimeo&&u.default.Vimeo.Player}},{key:"addScriptTag",value:function(){var e=this;if(u.default.requirejs){(0,u.default.requirejs)([this.options_.api],(function(t){u.default.Vimeo={Player:t},e.initTech()}))}else{var t=!1,n=document,a=n.getElementsByTagName("head")[0]||n.documentElement,r=n.createElement("script");r.async=!0,r.type="text/javascript",r.onload=r.onreadystatechange=function(){var n=this.readyState;t||n&&!/loaded|complete/.test(n)||(t=!0,r.onload=r.onreadystatechange=null,e.initTech())},r.src=this.options_.api,a.insertBefore(r,a.firstChild)}}},{key:"initTech",value:function(){if(this.isApiReady()){var e=null;"string"==typeof this.options_.source?e=this.options_.source:"object"===(0,a.default)(this.options_.source)&&(e=this.options_.source.src),e=this.parseSrc(e),this.featuresPlaybackRate=!0;var n=s.default.mergeOptions(this.options_,{id:e,byline:0,color:"#00adef",portrait:0,fullscreen:1});this.widgetPlayer=new u.default.Vimeo.Player(this.options_.techId,n),this.widgetPlayer.ready().then(s.default.bind(this,this.onReady)),i(Object.getPrototypeOf(t.prototype),"initTech",this).call(this),this.onStateChange({type:-1})}}},{key:"onReady",value:function(){i(Object.getPrototypeOf(t.prototype),"onReady",this).call(this),this.onStateChange({type:"loaded"})}},{key:"setupTriggers",value:function(){var e=this;this.widgetPlayer.vjsTech=this;for(var n=function(){var n=t.Events[a];e.widgetPlayer.on(n,(function(t){e.eventHandler(s.default.mergeOptions({type:n},t))}))},a=t.Events.length-1;a>=0;a--)n()}},{key:"onStateChange",value:function(e){var n=e.type;switch(this.lastState=n,i(Object.getPrototypeOf(t.prototype),"onStateChange",this).call(this,e),e.volume&&this.updateVolume(),e.duration&&void 0===this.duration_&&(this.duration_=e.duration,this.trigger("durationchange")),n){case"loaded":this.trigger("loadedmetadata"),this.trigger("durationchange"),this.trigger("canplay");break;case"timeupdate":e.seconds&&(this.currentTime_=e.seconds,this.trigger("timeupdate"));break;case"progress":e.percent&&(this.buffered_=e.percent,this.trigger("waiting"),this.trigger("progress"));break;case"pause":this.trigger("pause");break;case"play":this.triggeredOnPlay||(this.triggeredOnPlay=!0,this.trigger("loadedmetadata"),this.trigger("volumechange")),this.trigger("play");break;case"end":this.updateEnded()}this.updatePaused()}},{key:"updateVolume",value:function(){var e=this;this.widgetPlayer.getVolume().then((function(t){e.volume_=t,e.volume_!==t&&e.trigger("volumechange")}))}},{key:"updateEnded",value:function(){var e=this;this.widgetPlayer.getEnded().then((function(t){e.ended_=t,t&&e.trigger("ended")}))}},{key:"updatePaused",value:function(){var e=this;this.widgetPlayer.getPaused().then((function(t){t!==e.paused_&&(e.paused_=t,t&&e.trigger("pause"))}))}},{key:"updateDuration",value:function(){var e=this;this.widgetPlayer.getDuration().then((function(t){e.duration_=t}))}},{key:"playbackRate",value:function(){return this._playbackRate?this._playbackRate:1}},{key:"setPlaybackRate",value:function(e){if(this.widgetPlayer){var t=this;this.widgetPlayer.setPlaybackRate(e).then((function(){t._playbackRate=e,t.trigger("ratechange")}))}}},{key:"buffered",value:function(){return s.default.createTimeRange(0,this.buffered_*this.duration_||0)}},{key:"ended",value:function(){return this.ended_}},{key:"duration",value:function(){return this.duration_}},{key:"currentTime",value:function(){return this.currentTime_}},{key:"setCurrentTime",value:function(e){var t=this;this.widgetPlayer.setCurrentTime(e).then((function(e){t.currentTime_=e}))}},{key:"play",value:function(){this.trigger("waiting"),this.widgetPlayer.play()}},{key:"pause",value:function(){this.widgetPlayer.pause()}},{key:"paused",value:function(){return this.paused_}},{key:"muted",value:function(){return this.muted_}},{key:"volume",value:function(){return this.volume_}},{key:"setVolume",value:function(e){var t=this;e!==this.volume_&&this.widgetPlayer.setVolume(e).then((function(){t.updateVolume()}))}},{key:"setMuted",value:function(e){this.muted_=e,e&&(this.volumeBefore_=this.volume_),this.setVolume(e?0:this.volumeBefore_)}}]),t}(l.default);d.prototype.options_={api:"//player.vimeo.com/api/player.js",embed:"https://player.vimeo.com/video",visibility:"visible"},d.prototype.className_="Vimeo",d.isSupported=function(){return!0},c.withSourceHandlers(d),d.nativeSourceHandler={},d.nativeSourceHandler.canPlayType=function(e){return-1!==e.indexOf("vimeo")},d.nativeSourceHandler.canHandleSource=function(e){return e.type?d.nativeSourceHandler.canPlayType(e.type):e.src?d.nativeSourceHandler.canPlayType(e.src):""},d.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},d.nativeSourceHandler.dispose=function(){},d.registerSourceHandler(d.nativeSourceHandler),d.Events="loaded,play,ended,timeupdate,progress,seeked,texttrackchange,cuechange,volumechange,error".split(","),c.registerTech("Vimeo",d),t.default=d,e.exports=t.default},function(e,t,n){"use strict";var a=n(1)(n(63));Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i,o=n(15),s=(i=o)&&i.__esModule?i:{default:i},l=s.default.getComponent("Tech"),u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;a=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,n=o,a=!0,s=u=void 0}}(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.params={id:this.options_.techId,autoplay:parseInt(e.autoplay),chromeless:parseInt(e.controls),html:1,info:1,logo:1,controls:"html",wmode:"opaque",format:"json",url:e.source.src},"file:"!==window.location.protocol&&(this.params.origin=window.location.protocol+"//"+window.location.hostname),this.videoId=this.parseSrc(e.source.src),setTimeout(function(){this.loadApi()}.bind(this))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,a.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"injectCss",value:function(e){var t=".vjs-"+this.className_+" .vjs-iframe-blocker { display: none; }\n      .vjs-"+this.className_+".vjs-user-inactive .vjs-iframe-blocker { display: block; }\n      .vjs-"+this.className_+" .vjs-poster { background-size: cover; }";e&&(t+=e);var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),n.appendChild(a)}},{key:"parseSrc",value:function(e){return e}},{key:"createEl",value:function(e,t,n){var a=s.default.dom.createEl("div",{id:"vjs-tech"+this.options_.techId,className:"vjs-tech vjs-tech-"+this.className_}),r=s.default.dom.createEl(e,s.default.mergeOptions({id:this.options_.techId,scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:"",mozallowfullscreen:"",allowFullScreen:""},t));r.style.visibility=this.options_.visibility,r.style.width="100%",r.style.height="100%",r.style.top="0",r.style.left="0",r.style.position="absolute",a.appendChild(r);var i=this.isOnMobile();if(!i&&!1!==n||n){var o=s.default.dom.createEl("div",{className:"vjs-iframe-blocker",style:"position:absolute;top:0;left:0;width:100%;height:100%"});s.default.on(o,"click",s.default.bind(this,this.togglePlayPause)),s.default.on(o,"tap",s.default.bind(this,this.togglePlayPause)),s.default.on(o,"touchend",s.default.bind(this,this.togglePlayPause)),a.appendChild(o)}var l=(0,s.default)(this.options_.playerId);return l.addClass("vjs-"+this.className_),i&&l.addClass("vjs-"+this.className_+"-mobile"),a}},{key:"togglePlayPause",value:function(){this.paused()?this.play():this.pause()}},{key:"isOnMobile",value:function(){return s.default.browser.IS_EDGE||s.default.browser.IS_ANDROID||s.default.browser.IS_IOS}},{key:"addScriptTag",value:function(){var e=!1,t=this,n=document,a=n.getElementsByTagName("head")[0]||n.documentElement,r=n.createElement("script");r.async=!0,r.type="text/javascript",r.onload=r.onreadystatechange=function(){var n=this.readyState;e||n&&!/loaded|complete/.test(n)||(e=!0,r.onload=r.onreadystatechange=null,t.initTech())},r.src=this.options_.api,a.insertBefore(r,a.firstChild)}},{key:"loadApi",value:function(){this.isApiReady()?this.initTech():(t.apiReadyQueue.push(this),this.addScriptTag(),this.injectCss())}},{key:"isApiReady",value:function(){return!1}},{key:"initTech",value:function(){this.setupTriggers(),this.onStateChange({data:-1,type:-1})}},{key:"setupTriggers",value:function(){this.widgetPlayer.vjsTech=this;for(var e=t.Events.length-1;e>=0;e--){var n=s.default.bind(this,this.eventHandler);this.widgetPlayer.addEventListener(t.Events[e],n)}}},{key:"eventHandler",value:function(e){e&&(this.onStateChange(e),this.trigger(e))}},{key:"onStateChange",value:function(e){var t=e.type;switch(this.lastState=t,t){case-1:this.trigger("loadstart"),this.trigger("waiting");break;case"apiready":this.trigger("loadedmetadata"),this.trigger("canplay"),this.trigger("durationchange"),this.onReady();break;case"ended":break;case"play":this.trigger("playing");break;case"pause":case"seeked":case"timeupdate":break;case"error":this.onPlayerError()}}},{key:"onReady",value:function(){this.triggerReady()}},{key:"poster",value:function(){return this.poster_}},{key:"setPoster",value:function(e){this.poster_=e,this.trigger("posterchange")}},{key:"src",value:function(e){return void 0!==e&&(this.src_=this.parseSrc(e)),this.src_}},{key:"currentSrc",value:function(){return this.src_}},{key:"play",value:function(){}},{key:"ended",value:function(){return!!this.isReady_&&0===this.lastState}},{key:"pause",value:function(){}},{key:"paused",value:function(){return!1}},{key:"currentTime",value:function(){return 0}},{key:"setCurrentTime",value:function(e){this.currentTime=e}},{key:"duration",value:function(){return 0}},{key:"volume",value:function(){return this.volume_}},{key:"enterFullScreen",value:function(){}},{key:"exitFullScreen",value:function(){}},{key:"setVolume",value:function(e){void 0!==e&&e!==this.volume_&&(this.volume_=e,this.trigger("volumechange"))}},{key:"buffered",value:function(){return[]}},{key:"controls",value:function(){return!1}},{key:"muted",value:function(){return this.muted_}},{key:"setMuted",value:function(e){this.muted_=e}},{key:"supportsFullScreen",value:function(){return!0}},{key:"onPlayerError",value:function(e){this.errorNumber=e.data,this.trigger("error")}},{key:"error",value:function(){return{code:"External unknown error ("+this.errorNumber+")"}}}]),t}(l);u.prototype.className_=" vjs-externals",u.prototype.widgetPlayer={},u.prototype.options_={visibility:"hidden"},u.apiReadyQueue=[],u.isSupported=function(){return!0},u.prototype.featuresVolumeControl=!0,u.prototype.featuresPlaybackRate=!1,u.prototype.movingMediaElementInDOM=!1,u.prototype.featuresFullscreenResize=!1,u.prototype.featuresTimeupdateEvents=!1,u.prototype.featuresProgressEvents=!1,u.prototype.featuresNativeTextTracks=!0,u.prototype.featuresNativeAudioTracks=!0,u.prototype.featuresNativeVideoTracks=!1,u.Events="apiready,ad_play,ad_start,ad_timeupdate,ad_pause,ad_end,video_start,\n  'video_end,play,playing,pause,ended,canplay,canplaythrough,timeupdate,progress,seeking,\n  'seeked,volumechange,durationchange,fullscreenchange,error".split(","),l.registerTech("Externals",u),t.default=u,e.exports=t.default},function(e,t,n){"use strict";var a,r,i,o=n(1),s=o(n(63)),l=o(n(18));r=[n(15)],void 0===(i="function"==typeof(a=function(e){var t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}var a="function"==typeof Symbol&&"symbol"===(0,s.default)(Symbol.iterator)?function(e){return(0,s.default)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":(0,s.default)(e)},r={markerStyle:{width:"7px","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}function o(e){var t,n={top:0,bottom:0,left:0,width:0,height:0,right:0};try{t=e.getBoundingClientRect()}catch(a){t=n}return t}var u=-1;function c(e){if(!t.default.mergeOptions){var n=function(e){return!!e&&"object"===(void 0===e?"undefined":a(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object},s=function e(t,a){var r={};return[t,a].forEach((function(t){t&&Object.keys(t).forEach((function(a){var i=t[a];n(i)?(n(r[a])||(r[a]={}),r[a]=e(r[a],i)):r[a]=i}))})),r};t.default.mergeOptions=s}t.default.dom.createEl||(t.default.dom.createEl=function(e,n,a){var r=t.default.Player.prototype.dom.createEl(e,n);return a&&Object.keys(a).forEach((function(e){r.setAttribute(e,a[e])})),r});var c=t.default.mergeOptions(r,e),d={},f=[],p=u,h=this,m=null,v=null,g=u;function E(){f.sort((function(e,t){return c.markerTip.time(e)-c.markerTip.time(t)}))}function _(e){e.forEach((function(e){e.key=i(),h.el().querySelector(".vjs-progress-holder").appendChild(S(e)),d[e.key]=e,f.push(e)})),E()}function y(e){return c.markerTip.time(e)/h.duration()*100}function k(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(c.markerStyle).forEach((function(e){t.style[e]=c.markerStyle[e]}));var n=e.time/h.duration();if((n<0||n>1)&&(t.style.display="none"),t.style.left=y(e)+"%",e.duration)t.style.width=e.duration/h.duration()*100+"%",t.style.marginLeft="0px";else{var a=o(t);t.style.marginLeft=a.width/2+"px"}}function S(e){var n=t.default.dom.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":c.markerTip.time(e)});return k(e,n),n.addEventListener("mousedown",(function(t){var n=!1;if("function"==typeof c.onMarkerClick&&(n=!1===c.onMarkerClick(e)),!n){var a=this.getAttribute("data-marker-key");h.currentTime(c.markerTip.time(d[a]))}})),c.markerTip.display&&C(n),n}function T(e){f.forEach((function(t){var n=h.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),a=c.markerTip.time(t);(e||n.getAttribute("data-marker-time")!==a)&&(k(t,n),n.setAttribute("data-marker-time",a))})),E()}function b(e){v&&(g=u,v.style.visibility="hidden"),p=u;var t=[];e.forEach((function(e){var n=f[e];if(n){delete d[n.key],t.push(e);var a=h.el().querySelector(".vjs-marker[data-marker-key='"+n.key+"']");a&&a.parentNode.removeChild(a)}})),t.reverse(),t.forEach((function(e){f.splice(e,1)})),E()}function C(e){e.addEventListener("mouseover",(function(){var t=d[e.getAttribute("data-marker-key")];if(m){m.classList.remove("grey-style"),m.querySelector(".vjs-tip-inner").innerText=c.markerTip.text(t),m.style.left=y(t)+"%";var n=o(m),a=o(e);m.style.marginLeft=-parseFloat(n.width/2)+parseFloat(a.width/4)-4+"px",m.style.visibility="visible"}})),e.addEventListener("mouseout",(function(){m&&(m.style.visibility="hidden")}))}function I(){m=t.default.dom.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),h.el().querySelector(".vjs-progress-holder").appendChild(m)}function O(){if(c.breakOverlay.display&&!(p<0)){var e=h.currentTime(),t=f[p],n=c.markerTip.time(t);e>=n&&e<=n+c.breakOverlay.displayTime?(g!==p&&(g=p,v&&(v.querySelector(".vjs-break-overlay-text").innerHTML=c.breakOverlay.text(t))),v&&(v.style.visibility="visible")):(g=u,v&&(v.style.visibility="hidden"))}}function A(){v=t.default.dom.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(c.breakOverlay.style).forEach((function(e){v&&(v.style[e]=c.breakOverlay.style[e])})),h.el().appendChild(v),g=u}function N(){w(),O(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}function w(){if(f.length){var t=h.duration();if(0!==t){var n=function(e){return e<f.length-1?c.markerTip.time(f[e+1]):h.duration()},a=h.currentTime(),r=u;if(a===t&&0!==t)r=f.length-1;else{if(p!==u){var i=n(p);if(a>=c.markerTip.time(f[p])&&a<i)return;if(p===f.length-1&&a===t)return}if(a<c.markerTip.time(f[0]))r=u;else for(var o=0;o<f.length;o++)if(i=n(o),a>=c.markerTip.time(f[o])&&a<i){r=o;break}}r!==p&&(r!==u&&e.onMarkerReached&&e.onMarkerReached(f[r],r),p=r)}}}function R(){c.markerTip.display&&I(),h.markers.removeAll(),_(c.markers),c.breakOverlay.display&&A(),N(),h.on("timeupdate",N),h.off("loadedmetadata")}h.on("loadedmetadata",(function(){R()})),h.markers={getMarkers:function(){return f},hideMarkerTip:function(){m&&(m.querySelector(".vjs-tip-inner").innerHTML="",m.style.marginLeft="0px",m.querySelector(".vjs-tip-arrow").style.marginLeft="0px",m.classList.remove("grey-style"),m.style.visibility="hidden")},showMarkerTip:function(e){if(m){var t=h.el().querySelector(".vjs-marker[data-marker-key='"+e.key+"']");m.querySelector(".vjs-tip-inner").innerHTML='<div class="flex-box">\n\t\t\t\t        <div><svg xmlns="http://www.w3.org/2000/svg" width="13" height="17" viewBox="0 0 36 47">\n\t\t\t\t            <path fill="#545454" fill-rule="evenodd" d="M10.202 14.082c0-4.368 3.554-7.913 7.913-7.913 4.368 0 7.913 3.554 7.913 7.913v4.895H10.202v-4.895zm10.66 19.285c-.332.243-.42.476-.42.863.01 1.738.01 3.465.01 5.203.033.72-.332 1.428-.974 1.75-1.517.774-3.033-.31-3.033-1.75v-.01c0-1.739 0-3.477.01-5.215 0-.354-.077-.587-.387-.819-1.572-1.162-2.092-3.144-1.306-4.882.764-1.694 2.635-2.69 4.395-2.336 1.96.399 3.32 1.97 3.343 3.93 0 1.362-.542 2.469-1.638 3.266zM4.042 14.082v4.895h-.325A3.72 3.72 0 0 0 0 22.694v20.472a3.72 3.72 0 0 0 3.717 3.716h28.566A3.72 3.72 0 0 0 36 43.166V22.684a3.72 3.72 0 0 0-3.717-3.716h-.096v-4.896C32.187 6.312 25.874 0 18.115 0 10.355.01 4.043 6.323 4.043 14.082z"/>\n\t\t\t\t        </svg></div>\n\t\t\t\t        <div>'.concat(l.default.translate("video.message.continue-playing-video1"),"<br/>").concat(l.default.translate("video.message.continue-playing-video2"),"</div>\n\t\t\t\t        </div>"),m.classList.add("grey-style");var n=y(e),a=o(m),r=o(t);m.style.left=n+"%",m.style.marginLeft=-parseFloat(a.width/2)+parseFloat(r.width/4)-4+"px";var i=parseFloat(o(h.el()).left)-parseFloat(o(m).left);i>0&&(m.style.marginLeft=parseFloat(m.style.marginLeft)+i+"px",m.querySelector(".vjs-tip-arrow").style.marginLeft=-i+"px"),m.style.visibility="visible"}},next:function(){for(var e=h.currentTime(),t=0;t<f.length;t++){var n=c.markerTip.time(f[t]);if(n>e){h.currentTime(n);break}}},prev:function(){for(var e=h.currentTime(),t=f.length-1;t>=0;t--){var n=c.markerTip.time(f[t]);if(n+.5<e)return void h.currentTime(n)}},add:function(e){_(e)},remove:function(e){b(e)},removeAll:function(){for(var e=[],t=0;t<f.length;t++)e.push(t);b(e)},updateTime:function(e){T(e)},reset:function(e){h.markers.removeAll(),_(e)},destroy:function(){h.markers.removeAll(),v&&v.remove(),m&&m.remove(),h.off("timeupdate",O),delete h.markers}}}t.default.registerPlugin("markers",c)})?a.apply(t,r):a)||(e.exports=i)},function(e,t,n){"use strict";var a=n(1),r=a(n(15)),i=a(n(363)),o=r.default.browser.IS_IOS||r.default.browser.IS_NATIVE_ANDROID,s=r.default.getTech("Tech"),l=r.default.extend(s,{constructor:function(e,t){var n,a;s.call(this,e,t),"undefined"==typeof document||l.injected||(l.injected=!0,n="https://www.youtube.com/iframe_api",a=u,(0,i.default)(n,a),function(){var e=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e));t.appendChild(n)}()),this.setPoster(e.poster),this.setSrc(this.options_.source,!0),this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",o&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),l.isApiReady?this.initYTPlayer():l.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var e=l.apiReadyQueue.indexOf(this);-1!==e&&l.apiReadyQueue.splice(e,1)}this.ytPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",""),this.el_.parentNode.removeChild(this.el_),s.prototype.dispose.call(this)},createEl:function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute"),e.setAttribute("class","vjs-tech");var t=document.createElement("div");if(t.appendChild(e),!o&&!this.options_.ytControls){var n=document.createElement("div");n.setAttribute("class","vjs-iframe-blocker"),n.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),n.onclick=function(){this.pause()}.bind(this),t.appendChild(n)}return t},initYTPlayer:function(){var e={controls:0,modestbranding:1,rel:0,showinfo:0,loop:this.options_.loop?1:0,origin:window.location.origin};if(void 0!==this.options_.autohide&&(e.autohide=this.options_.autohide),void 0!==this.options_.cc_load_policy&&(e.cc_load_policy=this.options_.cc_load_policy),void 0!==this.options_.ytControls&&(e.controls=this.options_.ytControls),void 0!==this.options_.disablekb&&(e.disablekb=this.options_.disablekb),void 0!==this.options_.end&&(e.end=this.options_.end),void 0!==this.options_.color&&(e.color=this.options_.color),e.controls?void 0!==this.options_.fs&&(e.fs=this.options_.fs):e.fs=0,void 0!==this.options_.end&&(e.end=this.options_.end),void 0!==this.options_.hl?e.hl=this.options_.hl:void 0!==this.options_.language&&(e.hl=this.options_.language.substr(0,2)),void 0!==this.options_.iv_load_policy&&(e.iv_load_policy=this.options_.iv_load_policy),void 0!==this.options_.list?e.list=this.options_.list:this.url&&void 0!==this.url.listId&&(e.list=this.url.listId),void 0!==this.options_.listType&&(e.listType=this.options_.listType),void 0!==this.options_.modestbranding&&(e.modestbranding=this.options_.modestbranding),void 0!==this.options_.playlist&&(e.playlist=this.options_.playlist),void 0!==this.options_.playsinline&&(e.playsinline=this.options_.playsinline),void 0!==this.options_.rel&&(e.rel=this.options_.rel),void 0!==this.options_.showinfo&&(e.showinfo=this.options_.showinfo),void 0!==this.options_.start&&(e.start=this.options_.start),void 0!==this.options_.theme&&(e.theme=this.options_.theme),void 0!==this.options_.customVars){var t=this.options_.customVars;Object.keys(t).forEach((function(n){e[n]=t[n]}))}this.activeVideoId=this.url?this.url.videoId:null,this.activeList=e.list;var n={videoId:this.activeVideoId,playerVars:e,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};void 0!==this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(n.host="https://www.youtube-nocookie.com"),this.ytPlayer=new YT.Player(this.options_.techId,n)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute(),this.ytPlayer.getAvailablePlaybackRates().length>1&&(this.featuresPlaybackRate=!0),this.playerReady_=!0,this.triggerReady(),this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(e){var t=e.data;if(t!==this.lastState&&!this.errorNumber)switch(this.lastState=t,t){case-1:this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("durationchange"),this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate"),this.trigger("durationchange"),this.trigger("playing"),this.trigger("play"),this.isSeeking&&this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay"),this.isSeeking?this.onSeeked():this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(e){this.errorNumber=e.data,this.trigger("pause"),this.trigger("error")},error:function(){var e=1e3+this.errorNumber;switch(this.errorNumber){case 5:return{code:e,message:"Error while trying to play the video"};case 2:case 100:return{code:e,message:"Unable to find the video"};case 101:case 150:return{code:e,message:"Playback on other Websites has been disabled by the video owner."}}return{code:e,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(e){var t={videoId:e};this.options_.start&&(t.startSeconds=this.options_.start),this.options_.end&&(t.endEnd=this.options_.end),this.ytPlayer.loadVideoById(t)},cueVideoById_:function(e){var t={videoId:e};this.options_.start&&(t.startSeconds=this.options_.start),this.options_.end&&(t.endEnd=this.options_.end),this.ytPlayer.cueVideoById(t)},src:function(e){return e&&this.setSrc({src:e}),this.source},poster:function(){return o?null:this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){e&&e.src&&(delete this.errorNumber,this.source=e,this.url=l.parseUrl(e.src),this.options_.poster||this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay&&!o?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(e){this.options_.autoplay=e},loop:function(){return this.options_.loop},setLoop:function(e){this.options_.loop=e},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return!this.ytPlayer||this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(e){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime()),this.isSeeking||(this.wasPausedBeforeSeek=this.paused()),this.ytPlayer.seekTo(e,!0),this.trigger("timeupdate"),this.trigger("seeking"),this.isSeeking=!0,this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==e&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?r.default.createTimeRange(0,this.ytPlayer.getDuration()):r.default.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval),this.isSeeking=!1,this.wasPausedBeforeSeek&&this.pause(),this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(e){this.ytPlayer&&this.ytPlayer.setPlaybackRate(e)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return!!this.ytPlayer&&this.lastState===YT.PlayerState.ENDED},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(e){this.ytPlayer&&this.ytPlayer.setVolume(100*e)},muted:function(){return!!this.ytPlayer&&this.ytPlayer.isMuted()},setMuted:function(e){this.ytPlayer&&(this.muted(!0),e?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout((function(){this.trigger("volumechange")}),50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return r.default.createTimeRange();var e=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return r.default.createTimeRange(0,e)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 3:return 2;default:return 1}},readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case-1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return!0},checkHighResPoster:function(){var e="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var t=new Image;t.onload=function(){if("naturalHeight"in t){if(t.naturalHeight<=90||t.naturalWidth<=120)return}else if(t.height<=90||t.width<=120)return;this.poster_=e,this.trigger("posterchange")}.bind(this),t.onerror=function(){},t.src=e}catch(n){}}});function u(){YT.ready((function(){l.isApiReady=!0;for(var e=0;e<l.apiReadyQueue.length;++e)l.apiReadyQueue[e].initYTPlayer()}))}l.isSupported=function(){return!0},l.canPlaySource=function(e){return l.canPlayType(e.type)},l.canPlayType=function(e){return"video/youtube"===e},l.parseUrl=function(e){var t={videoId:null},n=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);n&&11===n[2].length&&(t.videoId=n[2]);return(n=e.match(/[?&]list=([^#\&\?]+)/))&&n[1]&&(t.listId=n[1]),t},l.apiReadyQueue=[],void 0!==r.default.registerTech?r.default.registerTech("Youtube",l):r.default.registerComponent("Youtube",l)},function(e,t,n){"use strict";var a=n(1)(n(15)),r=a.default.getPlugin("plugin"),i=function(e){return new RegExp("(?:^|;\\s*)"+window.escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},o=function(){try{return window.localStorage.setItem("persistVolume","persistVolume"),window.localStorage.removeItem("persistVolume"),!0}catch(e){return!1}},s=function(e){return o()?window.localStorage.getItem(e):function(e){if(!e||!i(e))return null;var t=new RegExp("(?:^|.*;\\s*)"+window.escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*");return window.unescape(document.cookie.replace(t,"$1"))}(e)},l=function(e,t){return o()?window.localStorage.setItem(e,t):function(e,t,n,a,r,i){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/i.test(e)){var o="";if(n)switch(n.constructor){case Number:o=n===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+n;break;case String:o="; expires="+n;break;case Date:o="; expires="+n.toGMTString()}document.cookie=window.escape(e)+"="+window.escape(t)+o+(r?"; domain="+r:"")+(a?"; path="+a:"")+(i?"; secure":"")}}(e,t,1/0,"/")},u={namespace:""},c=a.default.extend(r,{constructor:function(e,t){var n=function(e){var t,n,a;for(n=1;n<arguments.length;n++)for(a in t=arguments[n])t.hasOwnProperty(a)&&(e[a]=t[a]);return e}({},u,t||{}),a=n.namespace+"-volume",r=n.namespace+"-mute";e.on("volumechange",(function(){l(a,e.volume()),l(r,e.muted())}));var i=s(a);null!==i&&e.volume(i);var o=s(r);null!==o&&e.muted("true"===o)}});c.isSupported=function(){return!0},a.default.registerPlugin("persistvolume",c)},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./asset/f385429792599704e42c569c1365ff51.png"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(283)),o=a(n(195));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object.keys({TEXT:{},MC:{},IMAGE:{},AUDIO:{},VIDEO:{},EMBED_WEBSITE:{},RICHMEDIA:{},CHOICE_MATRIX:{},RATING:{},FREE_WRITING:{},POLL:{},FILL_IN_GAPS:{},MATCHING:{}}).reduce((function(e,t){var n=o.default.getInteractionCategoryByType(t);return l(l({},e),{},(0,r.default)({},n,l(l({},e[n]),{},(0,r.default)({},t,(0,i.default)(t)))))}),{});t.default=u},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(9)),u=a(n(3)),c=a(n(4)),d=a(n(12)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=r(n(0)),v=(a(n(2)),a(n(11))),g=n(46),E=a(n(13)),_=a(n(235)),y=a(n(123)),k=r(n(110)),S=n(77),T=n(468),b=n(102),C=n(103),I=a(n(41)),O=n(54),A=a(n(821)),N=a(n(822)),w=a(n(823)),R=a(n(824));function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var M=(0,g.inject)("services")((s=o=function(e){(0,f.default)(n,e);var t=P(n);function n(e){var a;(0,u.default)(this,n),(a=t.call(this,e)).progressBtnWrapperStyleClass="progress-btn-wrapper",a.progressBtnStyleClass="progress-btn";var r=e.services.ConfigurationService;return a.isInteractionsThemeV2=r.isInteractionsThemeV2,a.isCIEditor=r.isCIEditor,a.isMobile=E.default.isMobile()||E.default.isTablet()&&a.isInteractionsThemeV2,a.isESignature=e.model.data.subType===O.FREE_WRITING_SUBTYPE_E_SIGNATURE,a.state={showConfirmSignDialog:!1},a.handleCheckClick=a.handleCheckClick.bind((0,d.default)(a)),a}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props,t=e.progressBtnState,n=e.isOverlayDisplay,a=e.ltr;return e.displayProgressBar?m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"progress-bar section float-progress-bar ".concat(t," ").concat(a?"ltr":"rtl")},n?this._renderOverlayProgressBar(t):this._renderProgressBar(t)),this.renderConfirmSignDialog()):null}},{key:"_renderOverlayProgressBar",value:function(e){var t,a,r=this.props,i=r.language,o=r.isAssessment,s=r.answerAvailable,l=r.model,u=[k.COMPLETED_RIGHT,k.COMPLETED_WRONG,k.COMPLETED_WRONG_DONT_SHOW_ANSWER,k.PENDING_CHECK].includes(e),c=o&&s,d=(0,v.default)(this.progressBtnStyleClass,{"embedded-answered":u||c,check:!u&&!c}),f="";l.data.subType===O.FREE_WRITING_SUBTYPE_E_SIGNATURE?f=u||c?null===(t=i.task.embedded)||void 0===t?void 0:t.signed:null===(a=i.task.embedded)||void 0===a?void 0:a.sign:f=u||c?i.task.ANSWERED:i.task.ANSWER;return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("button",{className:d},n.renderProgressBarButtonContent(null,m.default.createElement("span",{className:"status"},f))))}},{key:"_renderProgressBar",value:function(e){switch(e){case k.CHECK:return this.props.isAssessment?this.renderAssessmentNext():this.renderCheck();case k.CHECK_VALIDATION:return this.renderCheckValidation();case k.TRY_AGAIN:return this.renderTryAgain();case k.COMPLETED_WRONG:case k.COMPLETED_WRONG_DONT_SHOW_ANSWER:return this.renderComplete(!0);case k.COMPLETED_RIGHT:return this.renderComplete();case k.SHOWING_CORRECT_ANSWER:return this.renderShowCorrectAnswer();case C.SAVE:case C.CHECKABLEOFF:case k.PENDING_CHECK:return this.renderSave();case C.VOTE:return this.renderVote();case k.ASSESSMENT_UNANSWERED:return this.renderAssessmentUnanswered();case k.SHOW_ANSWER_FOR_INSTRUCTOR:case k.HIDE_ANSWER_FOR_INSTRUCTOR:return this.renderShowHideAnswersForInstructorV2(e);case k.CORRECT_ANSWER_IS_SHOWN_FOR_EDITOR:return this.renderCorrectAnswerIsShownV2()}}},{key:"renderAssessmentNext",value:function(){var e=this.props,t=e.readOnlyMode,n=e.language;return t||!E.default.isMobile()&&!E.default.isTablet()?null:m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"check-answer-btn",onClick:this.props.handleNextClick,className:"progress-btn next"},n.task.NEXT))}},{key:"renderCheck",value:function(){var e=this.props,t=e.checkAnswerStatus,a=e.readOnlyMode,r=e.language,i=e.showSystemAnswers;if(!this.isInteractionsThemeV2)return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"check-answer-btn",disabled:t===S.UNAVAILABLE||a,onClick:this.handleCheckClick,className:"progress-btn"},r.task.CHECK_ANSWER),!a&&this.renderAttempts(),i&&this.renderShowSystemAnswer());var o=t===S.UNAVAILABLE||a,s=(0,v.default)("".concat(this.progressBtnStyleClass," check in-container"),{disabled:o});return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("div",{className:"progress-btn-container"},m.default.createElement("button",{disabled:o,className:s,onClick:o?null:this.handleCheckClick},n.renderProgressBarButtonContent(null,m.default.createElement("span",{className:"status"},r.task.CHECK_ANSWER))),!a&&this.renderAttempts()))}},{key:"renderCheckValidation",value:function(){var e=this.props.language;if(!this.isInteractionsThemeV2)return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"check-answer-btn",onClick:this.handleCheckClick,className:"progress-btn"},m.default.createElement("span",null,e.task.OOPS_MISSED_SPOT,m.default.createElement("b",null,e.task.CHECK_ANYWAY))));var t=(0,v.default)("".concat(this.progressBtnStyleClass," check-anyway in-container"));return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("div",{className:"progress-btn-container"},m.default.createElement("div",{className:"progress-btn-tip"},e.task.OOPS_MISSED_SPOT),m.default.createElement("button",{className:t,onClick:this.handleCheckClick},n.renderProgressBarButtonContent(null,e.task.CHECK_ANYWAY))))}},{key:"renderTryAgain",value:function(){var e=this.props,t=e.readOnlyMode,a=e.language,r=e.showSystemAnswers,i=e.closeFeedback;if(!this.isInteractionsThemeV2)return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"try-again-btn",disabled:t,className:"progress-btn try-again",onClick:i},m.default.createElement("span",{className:"progress-bar-icon-spinner"}),m.default.createElement("span",null,a.task.TRY_AGAIN)),!t&&this.renderAttempts(),r&&this.renderShowSystemAnswer());var o=(0,v.default)("".concat(this.progressBtnStyleClass," try-again"),{disabled:t});return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("button",{className:o},this.props.feedbackElement,n.renderProgressBarButtonContent(m.default.createElement(N.default,null),m.default.createElement(m.default.Fragment,null,m.default.createElement("span",{className:"status"},a.task.TRY_AGAIN),!t&&this.renderAttempts()),i)))}},{key:"renderComplete",value:function(e){var t=this.props,n=t.userState,a=t.model,r=n&&n.data&&n.data.currentAnswer,i=a.data&&a.data.checkingType,o=e&&i!==b.MANUAL;return this.isInteractionsThemeV2?this._renderCompleteButtonV2(r):m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement("div",null,m.default.createElement("div",{className:"t2k-button progress-btn disabled ".concat(r)}),o&&this.renderShowSystemAnswer()))}},{key:"_renderCompleteButtonV2",value:function(e){var t,a=this.props,r=a.language,i=a.progressBtnState,o=(0,v.default)("".concat(this.progressBtnStyleClass," complete"),(0,l.default)({},e,e));switch(e){case T.ANSWER_TYPE.WRONG:t=n.renderProgressBarButtonContent(m.default.createElement(N.default,null),m.default.createElement(m.default.Fragment,null,m.default.createElement("span",{className:"status"},r.task.INCORRECT_ANSWER),i!==k.COMPLETED_WRONG_DONT_SHOW_ANSWER&&m.default.createElement("span",{className:"answer-shown-text"}," ".concat(r.task.CORRECT_ANSWER_SHOWN))),this.props.showFeedback);break;case T.ANSWER_TYPE.PARTIAL:t=n.renderProgressBarButtonContent(m.default.createElement(w.default,null),m.default.createElement(m.default.Fragment,null,m.default.createElement("span",{className:"status"},r.task.PARTIAL_ANSWER),m.default.createElement("span",{className:"answer-shown-text"}," ".concat(r.task.CORRECT_ANSWER_SHOWN))),this.props.showFeedback);break;case T.ANSWER_TYPE.CORRECT:t=n.renderProgressBarButtonContent(m.default.createElement(A.default,null),m.default.createElement("span",{className:"status"},r.task.CORRECT_ANSWER),this.props.showFeedback)}return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("button",{className:o},this.props.feedbackElement,t))}},{key:"renderVote",value:function(){var e=this.props,t=e.checkAnswerStatus,n=e.language,a=e.handleVoteClick,r=e.showPollResults,i=e.readOnlyMode,o=e.presentButton,s=r&&!i,l=t===S.UNAVAILABLE&&!s;if(!this.isInteractionsThemeV2)return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"vote-btn",onClick:a,disabled:l,className:"progress-btn"},s?n.task.RESULTS:n.task.VOTE));var u=(0,v.default)("".concat(this.progressBtnStyleClass," vote"),{disabled:l});return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},o,m.default.createElement("button",{className:u,onClick:l?null:a},m.default.createElement("span",{className:"status"},n.task.SEND_VOTE)))}},{key:"isAllSubtasksAnswered",value:function(){var e=this.props.subtasksUserStates;if(!e.length)return!1;var t=e.filter((function(e){var t,n;return(null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.progress)===k.COMPLETED_RIGHT}));return e.length===t.length}},{key:"renderSave",value:function(){var e,t=this,n=this.props,a=n.disableSaveBtn,r=n.checkAnswerStatus,i=n.language,o=n.handleSaveClick,s=n.userState,l=n.model,u=n.isAssessment;if(!this.isInteractionsThemeV2){var c=a||r===S.UNAVAILABLE;return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement(y.default,{"data-unittest-id":"save-btn",disabled:c,onClick:o,className:"progress-btn"},i.task.SAVE))}var d=l.data.subType===O.CONTAINER_SUBTYPE;if(e=d?this.isAllSubtasksAnswered():s.data.progress===k.COMPLETED_RIGHT||s.data.progress===k.PENDING_CHECK||this.isESignature&&r===S.AVAILABLE,!this.isESignature&&!e&&u)return this.renderAssessmentNext();var f,p=this.isESignature?!this.isCIEditor&&!e:!e&&!a&&r!==S.UNAVAILABLE,h=(!e||d)&&!p,g=(0,v.default)(this.progressBtnStyleClass,"save",{"progress-btn__saved":e,"progress-btn__enabled":p,"progress-btn__disabled":h});p&&(f=this.isESignature?function(){return t.toggleConfirmSignDialog(!0,o)}:o);var E="";return E=this.isESignature?e?i.task.SIGNED:i.task.SIGN:e?i.task.SAVED:l.data.taskType===O.FREE_WRITING?i.task.SAVE_TEXT:i.task.SAVE,m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},m.default.createElement("button",{className:g,onClick:f,disabled:h,onKeyDown:function(e){return 13===e.keyCode&&p&&f()}},m.default.createElement("span",{className:"status"},E)))}},{key:"renderShowSystemAnswer",value:function(){var e=this.props,t=e.handleShowAnswersClick,n=e.language;return m.default.createElement("div",{className:"show-answer-container"},m.default.createElement(y.default,{"data-unittest-id":"show-system-answer-btn",className:"show-answer",onClick:t},m.default.createElement("u",null," ",n.task.SHOW_CORRECT_ANSWER," ")))}},{key:"renderShowCorrectAnswer",value:function(){var e=this.props,t=e.handleShowUserAnswersClick,n=e.language;return m.default.createElement("div",{className:"progress-bar-container"},m.default.createElement("div",null,m.default.createElement(y.default,{"data-unittest-id":"back-to-my-answer-btn",className:"my-answer",onClick:t},n.task.BACK_TO_MY_ANSWER)))}},{key:"renderAttempts",value:function(){var e=this.props,t=e.userState,n=e.model,a=e.language,r=n.data.maxAttempts,i=t&&t.data&&void 0!==t.data.attempts?t.data.attempts:1,o=(this.isInteractionsThemeV2||r>1)&&r<100?"".concat(i," ").concat(a.task.ATTEMPTS_OF," ").concat(r," ").concat(a.task.ATTEMPTS):"";return o?m.default.createElement("span",{className:"attempts","data-unittest-id":"attempts-text-element"},o):null}},{key:"renderAssessmentUnanswered",value:function(){var e=this.props,t=e.model.data.checkingType,n=e.language,a=!this.isInteractionsThemeV2&&t!==b.MANUAL,r=this.isInteractionsThemeV2&&t===b.AUTOMATIC,i=(0,v.default)("progress-bar-container",(0,l.default)({},this.progressBtnWrapperStyleClass,this.isInteractionsThemeV2));return m.default.createElement("div",{className:i},m.default.createElement("div",{className:"t2k-button progress-btn unanswered"},n.task.UNANSWERED),a&&this.renderShowSystemAnswer(),r&&m.default.createElement("span",{className:"answer-shown-text"}," ".concat(n.task.CORRECT_ANSWER_SHOWN)))}},{key:"handleCheckClick",value:function(){this.props.handleCheckClick&&this.props.handleCheckClick()}},{key:"renderShowHideAnswersForInstructorV2",value:function(e){var t=this.props,n=t.language,a=t.handleShowAnswersClick,r=t.handleShowUserAnswersClick,i=t.presentButton,o=e===k.SHOW_ANSWER_FOR_INSTRUCTOR,s=(0,v.default)(this.progressBtnStyleClass,{"show-answers":o,"hide-answers":!o});return m.default.createElement("div",{className:this.progressBtnWrapperStyleClass},i,m.default.createElement("button",{className:s,onClick:o?a:r},m.default.createElement("span",{className:"status"},o?n.taskGroup.SHOW_ANSWERS:n.taskGroup.HIDE_ANSWERS)))}},{key:"renderCorrectAnswerIsShownV2",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"".concat(this.progressBtnWrapperStyleClass)},m.default.createElement("div",{className:"".concat(this.progressBtnStyleClass," show-answers disabled")},m.default.createElement("span",{className:"status"},this.isESignature?e.task.SIGN:e.task.CORRECT_ANSWER_SHOWN)))}},{key:"toggleConfirmSignDialog",value:function(e,t){this.setState({showConfirmSignDialog:e,onSignConfirmFunction:t})}},{key:"renderConfirmSignDialog",value:function(){var e=this;if(!this.state.showConfirmSignDialog)return null;var t=this.props,n=t.language,a=t.verifyPassword,r=t.model,i=t.userState,o=t.isAssessment;return m.default.createElement(R.default,{language:n,hideDialog:function(){return e.toggleConfirmSignDialog(!1)},verifyPassword:a,onSignConfirm:function(){var t=_.default.getDateStringByLocale(new Date,E.default.getAppdata().appConf.locale,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),a=E.default.getUser(),s=n.eSignature.eSignature.replace("{userName}",a.nickname).replace("{userEmail}",a.email).replace("{date}",t),l=r.interaction.entry;i.interaction[l].setTextAnswer(s),o||e.state.onSignConfirmFunction(),I.default.sendEvent(I.default.TITLES.INTERACTION_SIGNED_WITH_E_SIGNATURE,I.default.COMPONENTS.INTERACTIONS),e.toggleConfirmSignDialog(!1)}})}}],[{key:"renderProgressBarButtonContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return m.default.createElement("div",{className:(0,v.default)("progress-btn-content",{clickable:n}),onClick:n,tabIndex:"0",role:"button",onKeyDown:function(e){return 13===e.keyCode&&n()}},e&&m.default.createElement("div",{className:"progress-btn-content-icon"},e),t&&m.default.createElement("div",{className:"progress-btn-content-text"},t))}}]),n}(m.Component),o.defaultProps={displayProgressBar:!0,closeFeedback:function(){},showFeedback:function(){},presentButton:null,handleShowUserAnswersClick:function(){},handleNextClick:function(){},verifyPassword:function(){},subtasksUserStates:[]},i=s))||i;t.default=M},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("path",{d:"M7.721 1.317c0 .17 0 .689-.76 1.128-.532.306-1.3.48-2.108.48-1.425 0-2.938-.564-2.938-1.608a.706.706 0 1 0-1.413 0c0 .967.532 1.8 1.5 2.347.768.435 1.78.675 2.851.675 2.522 0 4.281-1.243 4.281-3.022a.707.707 0 0 0-1.413 0z",id:"t2i-svg-feedback-1",key:0}),a.createElement("path",{d:"M.497 2.346a.604.604 0 0 0 1.206 0c0-.427.238-.578.458-.578.222 0 .459.151.459.578a.603.603 0 0 0 1.206 0c0-1.159-.832-1.739-1.665-1.739-.832 0-1.664.58-1.664 1.739z",id:"t2i-svg-feedback-3",key:1}),a.createElement("path",{d:"M.811 2.346a.603.603 0 0 0 1.207 0c0-.427.236-.578.457-.578.222 0 .459.151.459.578a.603.603 0 0 0 1.206 0c0-1.159-.833-1.739-1.665-1.739-.833 0-1.664.58-1.664 1.739z",id:"t2i-svg-feedback-5",key:2})]),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("g",{transform:"translate(7 12.7)",key:0},[a.createElement("mask",{fill:"#fff",id:"t2i-svg-feedback-2",key:0},a.createElement("use",{xlinkHref:"#t2i-svg-feedback-1"})),a.createElement("path",{d:"M-4.498 9.339h18.633V-4.39H-4.498z",fill:"#323232",mask:"url(#t2i-svg-feedback-2)",key:1})]),a.createElement("g",{transform:"translate(7 7.7)",key:1},[a.createElement("mask",{fill:"#fff",id:"t2i-svg-feedback-4",key:0},a.createElement("use",{xlinkHref:"#t2i-svg-feedback-3"})),a.createElement("path",{d:"M-4.503 7.949H8.826V-4.392H-4.503z",fill:"#323232",mask:"url(#t2i-svg-feedback-4)",key:1})]),a.createElement("g",{transform:"translate(12 7.7)",key:2},[a.createElement("mask",{fill:"#fff",id:"t2i-svg-feedback-6",key:0},a.createElement("use",{xlinkHref:"#t2i-svg-feedback-5"})),a.createElement("path",{d:"M-4.189 7.949H9.14V-4.392H-4.189z",fill:"#323232",mask:"url(#t2i-svg-feedback-6)",key:1})]),a.createElement("path",{d:"M12 2.714c-5.107 0-9.263 4.155-9.263 9.262 0 5.108 4.156 9.263 9.263 9.263s9.263-4.155 9.263-9.263c0-5.107-4.156-9.262-9.263-9.262m0 20c-5.92 0-10.737-4.817-10.737-10.738C1.263 6.056 6.08 1.239 12 1.239c5.921 0 10.737 4.817 10.737 10.737S17.921 22.714 12 22.714",fill:"#323232",key:3})])])}r.defaultProps={height:"24",viewBox:"0 0 24 24",width:"24"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(3)),u=a(n(12)),c=a(n(4)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=r(n(0)),m=(a(n(2)),n(46)),v=a(n(11)),g=a(n(126)),E=a(n(101));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var y=(0,m.observer)((s=o=function(e){(0,d.default)(n,e);var t=_(n);function n(){var e;return(0,l.default)(this,n),(e=t.call(this)).state={waitingForTagData:!0},e.handleTaskClick=e.handleTaskClick.bind((0,u.default)(e)),e}return(0,c.default)(n,null,[{key:"cleanHTMLTags",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent}},{key:"addTagGroupKey",value:function(e){Object.keys(e).forEach((function(t){e[t].groupKey=t}))}}]),(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.taskGroupId,r=t.taskGroupVersion,i=t.getRandomizedModel;t.isRandomized&&i(a,r).then((function(t){n.addTagGroupKey(t.tagCombinationSettingsMap),e.setState({waitingForTagData:!1,randomizedModel:t})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,a=this.props,r=a.taskGroupId,i=a.getRandomizedModel,o=a.isRandomized,s=a.numberOfTasks,l=a.tagDateChanged;if(e.isRandomized){var u=!o&&e.isRandomized,c=s!==e.numberOfTasks,d=e.tagDateChanged>l;(u||c||d)&&this.setState({waitingForTagData:!0},(function(){setTimeout((function(){i(r,e.taskGroupVersion).then((function(e){n.addTagGroupKey(e.tagCombinationSettingsMap),t.setState({waitingForTagData:!1,randomizedModel:e})}))}),1e3)}))}}},{key:"render",value:function(){var e=this.props,t=e.isPlayer,n=e.isManual,a=e.isRandomized;return t?this._renderPlayer():n?this._renderManualEditor():a?this._renderRandomizedEditor():null}},{key:"_renderPlayer",value:function(){var e=this,t=this.props.taskIds,n=this.getTaskListClasses();return h.default.createElement("div",{className:n},t.map((function(t){var n=e.getTaskData(t);return h.default.createElement("div",{className:"task-list-item",onClick:function(){e.handleTaskClick(t)},key:"task-list-".concat(t)},h.default.createElement("div",{className:"task-index"},n.index),h.default.createElement("div",{className:"task-question-text"},h.default.createElement(g.default,{clamp:"2",title:n.title},h.default.createElement("span",(0,E.default)(n.question)))))})))}},{key:"_renderManualEditor",value:function(){var e=this,t=this.props.taskIds,n=this.getTaskListClasses();return h.default.createElement("div",{className:n},t.map((function(t){var n=e.getTaskData(t);return h.default.createElement("div",{className:"task-list-item",onClick:function(){e.handleTaskClick(t)},key:"task-list-".concat(t)},h.default.createElement("div",{className:"task-index"},n.index),h.default.createElement("div",{className:"task-question-text"},h.default.createElement(g.default,{clamp:"2",title:n.title},h.default.createElement("span",(0,E.default)(n.question)))),e.renderTaskScoreInput(n.model,t))})))}},{key:"_renderRandomizedEditor",value:function(){var e=this,t=this.props.language,n=this.state,a=n.randomizedModel,r=n.waitingForTagData;if(!a)return null;var i=r,o=this.getTaskListClasses(),s=a.tagCombinationSettingsMap,l=s.untagged;0===l.numberOfTasks&&(l=null);var u=[];return Object.keys(s).forEach((function(e){"untagged"!==e&&u.push(s[e])})),l||u.length?h.default.createElement("div",{className:o},h.default.createElement("div",{className:"task-list__table-title"},h.default.createElement("span",{className:"task-list__table-title-item"},t.LIST.AMOUNT),h.default.createElement("span",{className:"task-list__table-title-item"},t.LIST.TAGS)),l&&this.displayTagGroup(l),u.map((function(t){return e.displayTagGroup(t)})),i&&h.default.createElement("div",{className:"task-list__loader"})):null}},{key:"displayTagGroup",value:function(e){var t,a=this.props.language;return t=e.tagNames?n.displayTagGroupName(e.tagNames):n.displayTagGroupName([a.LIST.UNTAGGED]),h.default.createElement("div",{className:"task-list__tag-group-row",key:e.groupKey},this.renderRandomSelectionInput(e),t)}},{key:"renderRandomSelectionInput",value:function(e){var t=this,n="/ ".concat(e.numberOfTasks);return h.default.createElement("div",{className:"task-list__random-selection-numbers"},h.default.createElement("div",{className:"task-list__random-selection-input-wrapper"},h.default.createElement("input",{className:"styled-number-input",type:"number",defaultValue:e.numberOfTasksPerUser,onBlur:function(n){t.randomSelectionChange(n,e)},onFocus:function(e){e.target.select()},onMouseUp:function(){return!1}})),h.default.createElement("div",{className:"task-list__random-selection-total"},n))}},{key:"getTaskListClasses",value:function(){return(0,v.default)("task-list",{"task-list--ltr":this.props.ltr,"task-list--rtl":!this.props.ltr})}},{key:"randomSelectionChange",value:function(e,t){var n=this.props,a=n.setRandomizedModel,r=n.store,i=this.state.randomizedModel,o=Math.max(0,Math.min(t.numberOfTasks,e.target.value));o!==e.target.valueAsNumber&&(e.target.value=o),t.numberOfTasksPerUser!==o&&(i.tagCombinationSettingsMap[t.groupKey].numberOfTasksPerUser=o,i.taskGroupVersion=r.taskGroup.version,r.setTaskGroupProperty("isRandomized",!0),a(i))}},{key:"getTaskData",value:function(e){var t=this.props.tasksModel[e],a=t.getTaskIndex(),r="",i=t.getTaskQuestionText();if(i)r=n.cleanHTMLTags(i);else{var o=this.getTaskTypeString(t);i=o,r=o}return{index:a,question:i,title:r,model:t,id:e}}},{key:"handleTaskClick",value:function(e){this.props.handleTaskClick&&this.props.handleTaskClick(e)}},{key:"getTaskTypeString",value:function(e){var t=this.props.taskTypeStrings,n=e.getTaskTypeAndPreset(),a=n.type,r=n.preset,i=a;return t&&t[a]&&(i=r&&"default"!==r?t[a][r]:t[a]),i}},{key:"renderTaskScoreInput",value:function(e,t){var n=this;return this.props.isPlayer?null:h.default.createElement("div",{className:"task-score"},h.default.createElement("input",{className:"styled-number-input",type:"number",defaultValue:e.maxPoints,onBlur:function(e){n.handleTaskScoreChange(e,t)},onFocus:function(e){e.target.select()},onMouseUp:function(){return!1}}))}},{key:"handleTaskScoreChange",value:function(e,t){var n=this.props.onTaskScoreChanged;n&&n(e,t)}}],[{key:"displayTagGroupName",value:function(e){return h.default.createElement("div",{className:"task-list__tag-group-wrapper"},e.map((function(e){return h.default.createElement("div",{className:"task-list__tag-name",key:e},e)})))}}]),n}(h.Component),o.defaultProps={ltr:!0,isManual:!1,isRandomized:!1},i=s))||i;t.default=y},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(875)),m=r(n(876)),v=r(n(226)),g=r(n(37)),E=n(76);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var y=g.default.isIe,k=function(e){(0,u.default)(n,e);var t=_(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).modalManager=new v.default(f.default.createElement(E.InteractionProvider,e.props)),e}return(0,l.default)(n,[{key:"renderSingleMedia",value:function(){return f.default.createElement("div",{className:"t2i-section"},this.props.children)}},{key:"renderInteractions",value:function(){var e=this;return this.props.isInteractionsThemeV2?this.props.children:f.default.createElement(h.default,{ref:function(t){e._rootWidthRef=t},elementToGetSizeOnMount:this.props.elementToGetSizeOnMount},this.props.children)}},{key:"render",value:function(){var e=this.props,t=e.displaySingleMedia,n=(0,o.default)(e,["displaySingleMedia"]),a=n.ltr,r="EDITOR"===this.props.mode&&y,s=(0,p.default)("t2i-app-wrapper",{v2:this.props.isInteractionsThemeV2,uc:this.props.isUC,ltr:a,rtl:!a});return f.default.createElement("div",{className:s},f.default.createElement(E.InteractionProvider,(0,i.default)({},n,{modalManager:this.modalManager}),f.default.createElement(m.default,null),f.default.createElement("div",{className:"t2k-taskGroup-wrapper ".concat(a?"t2k-ltr":"t2k-rtl").concat(t?" t2i-app-single-media":"")},t?this.renderSingleMedia():this.renderInteractions(),r&&f.default.createElement("div",{className:"t2k-taskGroup-wrapper-detect-ie"},"For an optimal Quiz editing experience, we recommend using",f.default.createElement("a",{href:"https://www.google.com/chrome/browser/desktop/index.html",target:"_blank",rel:"noopener noreferrer"},"Chrome"),"or",f.default.createElement("a",{href:"https://www.mozilla.org/en-US/firefox/new/",target:"_blank",rel:"noopener noreferrer"},"Firefox")," browsers."))))}},{key:"updateRootWidth",value:function(e){this._rootWidthRef&&this._rootWidthRef.updateRootWidth(e)}}]),n}(f.Component);t.default=k},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),n(52)),f=r(n(288));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"t2i-single-media-wrapper"},Object.keys(this.props.model.tasks).map((function(t,n){var a=e.props.model.tasks[t],r=a.interaction.interactions[a.interaction.entry]&&a.interaction.interactions[a.interaction.entry].type.toLowerCase(),i=a.data.backgroundColor;return c.default.createElement("div",{className:"t2i-single-media-task-wrapper ".concat(r),style:{backgroundColor:i}},c.default.createElement(f.default,{key:"".concat(t,"_").concat(n),language:e.props.language.interaction,mode:d.PLAYER,ltr:e.props.ltr,defaultModel:a.interaction,videoIframeOrigin:e.props.videoIframeOrigin,availableOffline:e.props.availableOffline,isSingleMedia:!0}))})))}}]),n}(c.Component);t.default=h},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s,l,u=a(n(29)),c=a(n(3)),d=a(n(30)),f=(a(n(31)),n(20)),p=a(n(199)),h=a(n(877)),m=a(n(878)),v=a(n(879)),g=(r=function e(){(0,c.default)(this,e),(0,u.default)(this,"ConfigurationService",i,this),(0,u.default)(this,"ConfirmDialogService",o,this),(0,u.default)(this,"LoaderService",s,this),(0,u.default)(this,"randomizeService",l,this)},i=(0,d.default)(r.prototype,"ConfigurationService",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p.default}}),o=(0,d.default)(r.prototype,"ConfirmDialogService",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h.default}}),s=(0,d.default)(r.prototype,"LoaderService",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new m.default}}),l=(0,d.default)(r.prototype,"randomizeService",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v.default}}),r);t.default=g},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(53))),p=r(n(13)),h=r(n(21)),m=r(n(281)),v=n(54),g=r(n(300));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var _=f.default.LogManager,y=function(e){(0,l.default)(n,e);var t=E(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._isTaskGroupVisible=e.isTaskGroupVisible,a._interactions=window.t2kinteraction||m.default,a.reloadTaskGroup=a.reloadTaskGroup.bind((0,o.default)(a)),a.submitAssessment=a.submitAssessment.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"_isTaskButtonsUpdated",value:function(e,t){return!(!e&&!t)&&(!!(e&&!t||!e&&t)||e.id!==t.id)}},{key:"_isContentLtr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,g.default)(e._taskGroupData&&e._taskGroupData.taskGroup.properties.contentLanguage)}}]),(0,s.default)(n,[{key:"componentDidMount",value:function(){this._loadInteractions()}},{key:"componentDidUpdate",value:function(e){e.taskGroupId!==this.props.taskGroupId||e.taskGroupVersion!==this.props.taskGroupVersion||e.taskGroupModified!==this.props.taskGroupModified?this._reloadTaskGroup():e.taskId!==this.props.taskId?e.userId!==this.props.userId?this._updateTask(this._updateUserState.bind(this,this.props.loadTaskGroupCallback)):this._updateTask(this.props.loadTaskGroupCallback):e.userId!==this.props.userId?n._isTaskButtonsUpdated(e.taskButtons,this.props.taskButtons)?this._updateUserState(this._updateTask.bind(this,this.props.loadTaskGroupCallback)):this._updateUserState(this.props.loadTaskGroupCallback):e.scale!==this.props.scale||e.showResults!==this.props.showResults||n._isTaskButtonsUpdated(e.taskButtons,this.props.taskButtons)||e.pageSizeFactor!==this.props.pageSizeFactor||e.isReadOnly!==this.props.isReadOnly||e.isPersistent!==this.props.isPersistent||this.props.updatedParticipants>e.updatedParticipants?this._updateTask(this.props.loadTaskGroupCallback):this.props.shouldReloadTaskGroup!==e.shouldReloadTaskGroup&&this._reloadTaskGroup()}},{key:"componentWillUnmount",value:function(){this.unmountView()}},{key:"isMediaOverlay",value:function(){var e=this.props,t=e.taskId,n=e.taskGroupData;if(e.taskPresentationDisplayType===h.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY){var a=n&&n.tasks&&n.tasks[t];if(a)return a.data&&-1!==v.MEDIA_TYPES.indexOf(a.data.taskType)}return!1}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"task-group-view",id:"task-group-view-interaction",ref:function(t){e._ref=t}})}},{key:"unmountView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._taskGroupPlayerView){var n=this._taskGroupPlayerView;delete this._taskGroupPlayerView,n.unmount((function(n){n&&_.error(e.props.loggerName,{message:"Failed to unmount task group: ".concat(n.message)}),t()}))}else t()}},{key:"_loadInteractions",value:function(){var e=this,t={serviceUrl:this.props.serviceUrl,authenticationToken:this.props.token,serviceHeaders:this.props.customHeaders,appData:p.default.getAppdata()};this.props.xapiContext&&(t.xapiContext=this.props.xapiContext),this._interactions.getApi(t,(function(t,n){t?_.error(e.props.loggerName,{message:"Failed to load interactions API: ".concat(t.message)}):(e._t2kinteractionApi=n,e._loadTaskGroup())}))}},{key:"submitAssessment",value:function(e){this._t2kinteractionApi&&this._t2kinteractionApi.submitAssessment(e)}},{key:"reloadTaskGroup",value:function(){this._reloadTaskGroup()}},{key:"_reloadTaskGroup",value:function(){this.unmountView(this._loadTaskGroup.bind(this))}},{key:"_loadTaskGroup",value:function(){var e=this,t=this.props,n=t.taskGroupId,a=t.taskGroupVersion,r=t.taskGroupData,i=t.context,o=t.isPreview,s=i&&i.contextObject&&i.contextObject.channelId;delete this._taskGroupPlayer,this._t2kinteractionApi&&this._t2kinteractionApi.playTaskGroup({taskGroupIdentity:{taskGroupId:n,taskGroupVersion:a,taskGroupData:r},userStateOptions:{userId:this.props.userId,channelId:s,isPersistent:this.props.isPersistent},getEventsContext:function(t){t({providerId:e.props.context.providerId||"",data:e.props.context.contextObject||{}}),e.props.doneCallback()},channelId:s,isPreview:o,updateCompletedTaskCountCallback:this.props.updateCompletedTaskCountCallback},this._getPlayTaskGroupCallback(this.props.userId))}},{key:"setActive",value:function(e){this._isTaskGroupVisible=e,this._taskGroupPlayerView&&this._taskGroupPlayerView.setOptions({isTaskGroupVisible:e},(function(){}))}},{key:"_getPlayTaskGroupCallback",value:function(e){var t=this;return function(a,r){a?_.error(t.props.loggerName,{message:"Failed loading task group player: ".concat(a.message)}):r.id!==t.props.taskGroupId||r.version!==t.props.taskGroupVersion&&t.props.taskGroupVersion||(t._taskGroupPlayer=r,t.props.onPlayerLoaded(r,e,n._isContentLtr(r)),e!==t.props.userId?t._updateUserState(t.unmountView.bind(t,t._mountTaskGroup.bind(t))):t.unmountView(t._mountTaskGroup.bind(t)))}}},{key:"_mountTaskGroup",value:function(){if(!this._isMounting){var e={isReadOnly:this.props.isReadOnly,showSystemAnswers:this.props.showSystemAnswers,singleTaskMode:this.props.singleTaskMode,hidePoweredBy:!0,viewTaskId:this.props.taskId,taskGroupPlayerViewType:this.props.viewType,showTaskGroupReport:this.props.showReport,ignoreEvents:this.props.ignoreEvents,isTaskGroupVisible:this._isTaskGroupVisible,viewMode:this.props.viewMode,scale:this.props.scale,overrideTasksBackgroundColor:this.props.overrideTasksBackgroundColor,overrideTaskGroupBackgroundColor:this.props.overrideTaskGroupBackgroundColor,onAssessmentSubmit:this.props.onAssessmentSubmit,taskButtons:this.props.taskButtons,hideProgressBar:this.props.hideProgressBar,gamifyMode:this.props.gamifyMode,showResults:this.props.showResults,showPollResults:this.props.showPollResults,taskGroupOptions:this.props.taskGroupOptions,isPreview:"true"===this.props.isPreview.toString(),forceSubmitPromise:this.props.forceSubmitPromise,showClimateResult:this.props.showClimateResult,showFlagInteractionButton:this.props.showFlagInteractionButton,hideUserStateOnClimatePoll:this.props.hideUserStateOnClimatePoll,updatedParticipants:this.props.updatedParticipants,videoIframeOrigin:this.props.videoIframeOrigin,isInteractionsThemeV2:this.props.isInteractionsThemeV2,closeOverlayTaskGroup:this.props.closeOverlayTaskGroup,getTaskGroupActions:this.props.getTaskGroupActions,preventSwipeOnScroll:this.props.preventSwipeOnScroll,availableOffline:this.props.availableOffline,taskPresentationDisplayType:this.props.taskPresentationDisplayType,taskPresentationProperties:this.props.taskPresentationProperties,pageSizeFactor:this.props.pageSizeFactor,isUC:this.props.isUC,isSmallEmbeddedItem:this.props.isSmallEmbeddedItem,isCIEditor:this.props.isCIEditor};this.props.taskStartingIndex&&(e.taskStartingIndex=this.props.taskStartingIndex),this._isMounting=!0;var t=this._ref;t&&this._taskGroupPlayer.mount({domElement:t,defaultViewOptions:e},this._getMountCallback(this.props.taskId,this._taskGroupPlayer))}}},{key:"_getMountCallback",value:function(e,t){var n=this;return function(a,r){n._isMounting=!1,a&&_.error(n.props.loggerName,{message:"Failed to mount task group view: ".concat(a.message)}),n._taskGroupPlayerView=r,!n._taskGroupPlayer||t.id===n._taskGroupPlayer.id&&t.version===n._taskGroupPlayer.version||n.props.taskGroupId!==n._taskGroupPlayer.id||n.props.taskGroupVersion!==n._taskGroupPlayer.version?e!==n.props.taskId&&t.id===n.props.taskGroupId&&t.version===n.props.taskGroupVersion?n._updateTask(n.props.loadTaskGroupCallback):n.props.loadTaskGroupCallback(!a):(n.props.loadTaskGroupCallback(!a),n.unmountView(n._mountTaskGroup.bind(n)))}}},{key:"_updateTask",value:function(e){var t=this;if(this._taskGroupPlayerView){var n={viewTaskId:this.props.taskId,showResults:this.props.showResults,showPollResults:this.props.showPollResults,taskButtons:this.props.taskButtons,hideProgressBar:this.props.hideProgressBar,gamifyMode:this.props.gamifyMode,showClimateResult:this.props.showClimateResult,showFlagInteractionButton:this.props.showFlagInteractionButton,hideUserStateOnClimatePoll:this.props.hideUserStateOnClimatePoll,updatedParticipants:this.props.updatedParticipants,videoIframeOrigin:this.props.videoIframeOrigin,availableOffline:this.props.availableOffline,taskPresentationDisplayType:this.props.taskPresentationDisplayType,taskPresentationProperties:this.props.taskPresentationProperties,pageSizeFactor:this.props.pageSizeFactor,isReadOnly:this.props.isReadOnly,isPersistent:this.props.isPersistent};this.props.taskStartingIndex&&(n.taskStartingIndex=this.props.taskStartingIndex),this.props.scale&&(n.scale=this.props.scale),this._taskGroupPlayerView.setOptions(n,(function(n){n&&_.error(t.props.loggerName,{message:"Failed to update task view: ".concat(n.message)}),e(!n)}))}else e(!1)}},{key:"_updateUserState",value:function(e){var t=this;if(this._taskGroupPlayer){var n=this.props,a=n.userId,r=n.context,i=r&&r.contextObject&&r.contextObject.channelId,o=this._taskGroupPlayer;this._taskGroupPlayer.setUserStateOptions({userId:a,channelId:i,isPersistent:this.props.isPersistent},(function(n){n&&_.error(t.props.loggerName,{message:"Failed updating task group state: ".concat(n.message)}),e(!n),t.props.onPlayerLoaded(o,a)}))}else e(!1)}}]),n}(d.Component);t.default=y,y.defaultProps={context:{},token:{},singleTaskMode:!0,ignoreEvents:!1,isTaskGroupVisible:!0,loadTaskGroupCallback:function(){},doneCallback:function(){},onPlayerLoaded:function(){},onAssessmentSubmit:function(){},taskId:void 0,taskGroupVersion:void 0,userId:void 0,viewType:void 0,isReadOnly:void 0,showSystemAnswers:void 0,isPersistent:void 0,showReport:void 0,taskStartingIndex:void 0,customHeaders:void 0,xapiContext:void 0,viewMode:void 0,scale:void 0,overrideTasksBackgroundColor:void 0,overrideTaskGroupBackgroundColor:void 0,taskButtons:void 0,hideProgressBar:void 0,gamifyMode:void 0,showResults:void 0,showPollResults:void 0,taskGroupOptions:{enableShowAnswers:!1},showClimateResult:!1,showFlagInteractionButton:!1,hideUserStateOnClimatePoll:!1,videoIframeOrigin:void 0,isInteractionsThemeV2:!1,closeOverlayTaskGroup:function(){},getTaskGroupActions:function(){},preventSwipeOnScroll:function(){},availableOffline:!1,taskPresentationDisplayType:"",taskPresentationProperties:void 0,taskGroupModified:null,shouldReloadTaskGroup:!1,isPreview:"false",isUC:!1,isSmallEmbeddedItem:!1,isCIEditor:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NOTIFICATION_TYPES=void 0;var a={NEW_CONTENT_ON_CHANNEL:"NEW_CONTENT_ON_CHANNEL",NEW_ALERT:"NEW_ALERT",NEW_CHANNEL_MEMBER:"NEW_CHANNEL_MEMBER",NEW_USER_ASSIGNMENT:"NEW_USER_ASSIGNMENT",NEW_MESSAGE:"NEW_MESSAGE",NEW_LIVE_SESSION:"NEW_LIVE_SESSION",PAST_ASSIGNMENT:"PAST_ASSIGNMENT"};t.NOTIFICATION_TYPES=a;var r={getDeepLink:function(e){var t=e.type,n=e.channelId,r=e.channelName,i=e.notificationId,o=e.conversationId,s="";switch(t){case a.NEW_USER_ASSIGNMENT:case a.NEW_CONTENT_ON_CHANNEL:case a.NEW_CHANNEL_MEMBER:case a.PAST_ASSIGNMENT:case a.NEW_ALERT:return n&&r?(s+="#/$/library/channel/".concat(n,"/").concat(encodeURIComponent(r)),i?s+="/%/notifications/isInboxExpanded/true/selectedFolder/inbox/selectedId/".concat(i,"/showConversation/true"):s):s;case a.NEW_MESSAGE:return n&&r?(s+="#/$/library/channel/".concat(n,"/").concat(encodeURIComponent(r)),o?s+="/%/messaging/isInboxExpanded/true/selectedFolder/inbox/selectedId/".concat(o,"/showConversation/true"):s):s;case a.NEW_LIVE_SESSION:return n&&r?s+="#/$/library/channel/".concat(n,"/").concat(encodeURIComponent(r),"/%/liveSession"):s;default:return""}}};t.default=r},,,,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Section=void 0;var r=a(n(918));n(927);var i=r.Section;t.Section=i;var o=r.default;t.default=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(28)),s=a(n(355)),l=n(931),u=o.default.Instance,c=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"getGroups",value:function(){var e="".concat(s.default.instance.backendUrl,"/PlayAppService/groups");return u.get(e)}},{key:"getInvitedMembers",value:function(e){var t="".concat(s.default.instance.backendUrl,"/PlayAppService/groups/:groupId");return u.get(t,{groupId:e})}},{key:"inviteLearners",value:function(e,t){var n="".concat(s.default.instance.backendUrl,"/PlayAppService/groups/:groupId/invite");return u.post(n,{groupId:e},t)}},{key:"getInvitationToken",value:function(e,t){var n={groupId:e};t&&(n.tokenExpirationTime=t);var a="".concat(s.default.instance.backendUrl,"/PlayAppService/groups/invitationLink/token");return u.get(a,{},{params:n})}},{key:"removeMember",value:function(e,t){var n="".concat(s.default.instance.backendUrl,"/PlayAppService/groups/:groupId/users/:userId");return u.remove(n,{groupId:e,userId:t},{})}},{key:"changeUserStatusInEntity",value:function(e,t,n){var a=n===l.MEMBER_STATUS.ACTIVE,r="".concat(s.default.instance.backendUrl,"/PlayAppService/users/:userId/changeStatus?isActive=:status");return u.put(r,{userId:t,status:a},{})}},{key:"getAccountProfiles",value:function(){return u.get("".concat(s.default.instance.backendUrl,"/PlayAppService/userProfile"))}},{key:"saveUserProfiles",value:function(e,t){var n="".concat(s.default.instance.backendUrl,"/PlayAppService/userProfile/users");return u.put(n,{},{userId:e,profileIds:t})}},{key:"getAccountUsersToInvite",value:function(e,t){var n={params:{usernameSubstring:e,roles:"LEARNER",limit:25,start:0}};return u.get("".concat(s.default.instance.backendUrl,"/PlayAppService/groups/:groupId/usersToInvite"),{groupId:t},n)}},{key:"addMembersToGroup",value:function(e,t){var n="".concat(s.default.instance.backendUrl,"/PlayAppService/groups/:groupId/users");return u.put(n,{groupId:e},{userIds:t})}}]),e}();t.default=c},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DELAY_BETWEEN_INIT=t.CONTENT_TYPE=t.MESSAGE_INPUT_STATE=t.COMPOSE_MODE=t.COMPOSE_STATE=t.POLLER_EVENTS=t.CONTEXT_TYPE=t.INBOX_TYPE=t.NOTIFICATION_TYPE=t.EXIT_APP_TIMEOUT=t.SINGLE_NO_VALUE=t.NO_VALUE=void 0;t.NO_VALUE="- -";t.SINGLE_NO_VALUE="—";t.EXIT_APP_TIMEOUT=15e3;t.NOTIFICATION_TYPE={USER_PERFORMANCE_ALERT:"USER_PERFORMANCE_ALERT",IMAGE_NOTIFICATION:"IMAGE_NOTIFICATION",DIFFICULT_CI_ALERT:"DIFFICULT_CI_PERFORMANCE_ALERT",ENGAGEMENT_DROP_ALERT:"ENGAGEMENT_DROP_ALERT",SUCCESS_RATE_DROP_ALERT:"SUCCESS_RATE_DROP_ALERT",ASSIGNMENT_NOTIFICATION:"ASSIGNMENT_NOTIFICATION",ASSIGNMENT_DUE_DATE_NOTIFICATION:"ASSIGNMENT_DUE_DATE_NOTIFICATION",ASSIGNMENTS_DUE_DATE_ALERT:"ASSIGNMENTS_DUE_DATE_REPORT_NOTIFICATION",NEW_CONTENT_NOTIFICATION:"NEW_CONTENT_ON_CHANNEL",CHANNEL_STATUS_SET_TO_SCHEDULED_INSTRUCTOR:"CHANNEL_STATUS_SET_TO_SCHEDULED_INSTRUCTOR",CHANNEL_STATUS_SET_TO_STARTED_INSTRUCTOR:"CHANNEL_STATUS_SET_TO_STARTED_INSTRUCTOR",CHANNEL_STATUS_SOON_START_INSTRUCTOR:"CHANNEL_STATUS_SOON_START_INSTRUCTOR",CHANNEL_STATUS_SOON_END_INSTRUCTOR:"CHANNEL_STATUS_SOON_END_INSTRUCTOR",CHANNEL_STATUS_SET_TO_STARTED_LEARNER:"CHANNEL_STATUS_SET_TO_STARTED_LEARNER",ITEM_SCHEDULED:"ITEM_SCHEDULED",ITEM_PURCHASE:"ITEM_PURCHASE",UPDATE_CONTENT_ON_CHANNEL:"UPDATE_CONTENT_ON_CHANNEL",CERTIFICATE_ABOUT_TO_EXPIRE:"CERTIFICATE_ABOUT_TO_EXPIRE",CERTIFICATE_EXPIRED:"CERTIFICATE_EXPIRED",PATH_ITEM_UNLOCKED:"UNLOCKED_PATH_ITEM_NOTIFICATION"};t.INBOX_TYPE={MESSAGING:1,NOTIFICATIONS:2};t.CONTEXT_TYPE={ALERT:"ALERT",ASSIGNMENT:"ASSIGNMENT",CONTENT:"CONTENT",COURSE:"COURSE"};t.POLLER_EVENTS={NEW_NOTIFICATIONS:1,NEW_MESSAGES:2,NEW_CONVERSATION_MESSAGES:3};t.COMPOSE_STATE={COMPOSE:1,SENDING:2,SENT:3,DISCARD:4,LOADING:5,ERROR:6};t.COMPOSE_MODE={SINGLE:1,MULTI:2};t.MESSAGE_INPUT_STATE={VALID:1,INVALID:2,ERROR:3};t.CONTENT_TYPE={FOLDER:"FOLDER",PATH:"PATH",FILE:"FILE",OFF_PLATFORM_EVENT:"OFF_PLATFORM_EVENT"};t.DELAY_BETWEEN_INIT=1e4},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIONS=t.SCOPE=t.FILTERS=t.DISCUSSIONS=t.MAX_TEXT_LENGTH=t.MAX_COMMENTS=void 0;t.MAX_COMMENTS=3;t.MAX_TEXT_LENGTH=320;t.DISCUSSIONS={DISCUSSION_CREATED:"DISCUSSION_CREATED",COMMENT_CREATED:"COMMENT_CREATED"};t.FILTERS={ALL:"all",MY:"my",PAGE:"page"};t.SCOPE={GENERAL:"general",PAGE:"page"};t.ACTIONS={SET_CURRENT_PAGE_INDEX:"SET_CURRENT_PAGE_INDEX",SET_VISIBILITY_FILTER:"SET_VISIBILITY_FILTER",UPDATE_VISIBILITY_FILTER:"UPDATE_VISIBILITY_FILTER",UPDATE_PAGE_INDEX:"UPDATE_PAGE_INDEX",SET_DISCUSSIONS:"SET_DISCUSSIONS",SET_DISCUSSIONS_INFO:"SET_DISCUSSIONS_INFO",POST_DISCUSSION:"POST_DISCUSSION",POST_DISCUSSION_SUCCESS:"POST_DISCUSSION_SUCCESS",POST_DISCUSSION_ERROR:"POST_DISCUSSION_ERROR",POST_COMMENT:"POST_COMMENT",POST_COMMENT_SUCCESS:"POST_COMMENT_SUCCESS",POST_COMMENT_ERROR:"POST_COMMENT_ERROR",TOGGLE_NEW_COMMENT_BOX:"TOGGLE_NEW_COMMENT_BOX",COLLAPSE_COMMENTS:"COLLAPSE_COMMENTS",EXPAND_COMMENTS:"EXPAND_COMMENTS",EXPAND_COMMENTS_SUCCESS:"EXPAND_COMMENTS_SUCCESS",EXPAND_COMMENTS_ERROR:"EXPAND_COMMENTS_ERROR",UPDATE_EDIT_MODE:"UPDATE_EDIT_MODE",UPDATE_SELECTED_DISCUSSION:"UPDATE_SELECTED_DISCUSSION"}},,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.toggleMessages=function(e,t){return function(n){M.getList={url:h.default.GET_MESSAGING_CONVERSATIONS},M.title=u.default.translate("messaging.title"),M.updateItem={url:h.default.UPDATE_CONVERSATION_STATE},M.onClose=function(){return n({type:m.TOGGLE_MESSAGES,inboxProps:{closeOnClickOutside:!0}})};var a=c.default.getAppdata().appConf;M.includeFilters=a.featureFlags&&a.featureFlags.enableMessagingFilters,M.channelId=e,M.closeOnToggle=t&&t.closeOnToggle,M.toolParams=t&&t.hashData,n(L(e)),n({type:m.TOGGLE_MESSAGES,inboxProps:M})}},t.toggleCompose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isSingleMode,n=void 0===t||t,a=e.recipients,r=e.notification,i=e.selectUserFromDialog,o=e.context;return function(e){(r?R(r,i,o):a?n&&a.length>1?i(a).then((function(e){return{recipients:[e],context:o,mode:p.COMPOSE_MODE.SINGLE}})):Promise.resolve({recipients:a,context:o,mode:a.length>1?p.COMPOSE_MODE.MULTI:p.COMPOSE_MODE.SINGLE}):Promise.resolve(null)).then((function(t){e({type:m.TOGGLE_COMPOSE,composeProps:t})})).catch((function(){}))}},t.resetMessageCount=L,t.loadMessageCount=function(e){var t=[h.default.GET_MESSAGING_STATUS,{},{failOnOffline:!0}];e&&(t=[h.default.GET_MESSAGING_CHANNEL_STATUS,{channelId:e},{failOnOffline:!0}]);return{types:[m.LOAD_MESSAGE_COUNT,m.LOAD_MESSAGE_COUNT_SUCCESS,D(v.COUNT_LOAD_ERROR,m.LOAD_MESSAGE_COUNT_ERROR)],promise:function(e){return e.get.apply(e,(0,i.default)(t))}}},t.loadMessages=function(e,t){return function(n){if("demo"===t.id)return n({type:m.LOAD_MESSAGES,conversation:t}),n({type:m.LOAD_MESSAGES_SUCCESS,result:{elements:[]}});n({types:[m.LOAD_MESSAGES,m.LOAD_MESSAGES_SUCCESS,D(v.MESSAGES_LOAD_ERROR,m.LOAD_MESSAGES_ERROR)],promise:function(t){return t.get(h.default.GET_MESSAGES,{},{params:e})},params:e,conversation:t})}},t.setInputMessage=function(e){return{type:m.SET_INPUT_MESSAGE,message:e}},t.closeConversationDetails=function(){return{type:m.CLOSE_CONVERSATION_DETAILS}},t.sendMessage=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.COMPOSE_MODE.SINGLE;return function(r){return n=n||null,a===p.COMPOSE_MODE.MULTI&&T(t)?r({types:[m.SEND_MESSAGE,m.SEND_MESSAGE_SUCCESS,D(v.MESSAGE_SEND_ERROR,m.SEND_MESSAGE_ERROR)],promise:function(a){return a.post(h.default.SEND_MASS_MESSAGE,{},{recipientsIds:t,message:e,context:n})},message:e,context:n}):a===p.COMPOSE_MODE.SINGLE&&"demo"!==t.id?r({types:[m.SEND_MESSAGE,m.SEND_MESSAGE_SUCCESS,D(v.MESSAGE_SEND_ERROR,m.SEND_MESSAGE_ERROR)],promise:function(a){return a.post(h.default.SEND_MESSAGE,{},{conversationId:t.id,message:e,context:n})},message:e,context:n}):(r({type:m.SEND_MESSAGE}),r({type:m.SEND_MESSAGE_SUCCESS,result:{message:C(e)},message:e,context:n}))}},t.loadConversation=function(e){return function(t){if(!T(e)&&b())return t({type:m.LOAD_CONVERSATION,userIds:e}),t({type:m.LOAD_CONVERSATION_SUCCESS,userIds:e,result:{id:"demo",title:"Demo conversation",participants:[{userId:"0000",displayName:"John Smith"}],lastMessage:{}}});t({types:[m.LOAD_CONVERSATION,m.LOAD_CONVERSATION_SUCCESS,D(v.CONVERSATION_LOAD_ERROR,m.LOAD_CONVERSATION_ERROR)],promise:function(t){return t.get(h.default.GET_CONVERSATION,{},{params:{userIds:e}})},userIds:e})}},t.openAttachPicker=function(){return{type:m.OPEN_ATTACH_PICKER}},t.closeAttachPicker=function(){return{type:m.CLOSE_ATTACH_PICKER}},t.loadAttachments=function(){return{type:m.LOAD_ATTACHMENTS}},t.logError=D,t.newMessageReceived=function(e){return function(t){t({type:m.NEW_MESSAGE_RECEIVED,updatedConversation:e})}},t.expandInbox=function(e){return function(t){t({type:m.EXPAND_INBOX,selectedItemId:e})}},t.collapseInbox=function(){return function(e){e({type:m.COLLAPSE_INBOX})}},t.resetUpdatedConversation=function(){return function(e){e({type:m.RESET_UPDATED_CONVERSATION})}},t.inboxProps=void 0;var i=r(n(40)),o=r(n(9)),s=r(n(63)),l=r(n(0)),u=r(n(18)),c=r(n(13)),d=r(n(53)),f=r(n(28)),p=n(503),h=r(n(57)),m=a(n(1092)),v=n(1728),g=r(n(1305));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=d.default.LogManager,k=function(){},S=f.default.Instance;function T(e){var t=[];"object"!==(0,s.default)(e)?t.push(e):t=e;for(var n=0;n<t.length;n++){var a=t[n];if("string"!=typeof a)return!1;if(36!==a.length||a.indexOf("-")<0)return!1}return!0}function b(){var e,t,n=c.default.getAppdata();return null==n||null===(e=n.appConf)||void 0===e||null===(t=e.featureFlags)||void 0===t?void 0:t.demo}function C(e){var t=c.default.getUser();return{id:"demo-"+Date.now(),read:!0,sentBy:{userId:t.id,displayName:t.firstName+" "+t.lastName},timestamp:Date.now(),body:e}}function I(e,t,n){return new Promise((function(a){(function(e,t){return new Promise((function(n,a){S.get(h.default.GET_INSTRUCTORS).then((function(r){var i=r.channelToInstructorsMap[e];if(1===i.length){var o=i[0];n({id:o.userId,nickname:o.displayName})}else t(i).then((function(e){n({id:e.userId,nickname:e.displayName})})).catch((function(){a()}))})).catch((function(e){y.error("echo",{message:"Error getting instructors: ".concat(e&&e.message?e.message:JSON.stringify(e))})}))}))})(e,n).then((function(e){a({recipients:[{id:e.id,nickname:e.nickname}],context:t,mode:p.COMPOSE_MODE.SINGLE})}))}))}function O(e,t,n,a,r){return c.default.getUser().id===t?I(e,a,r):Promise.resolve({recipients:[{id:t,nickname:n}],context:a,mode:p.COMPOSE_MODE.SINGLE})}function A(e,t,n){var a=_(_({},n),{},{type:p.CONTEXT_TYPE.ALERT,name:"notifications.alerts.performance.title"});return O(e.header.channelId,e.header.learnerId,e.header.nickname,a,t)}function N(e,t,n){var a=_(_({},n),{},{type:p.CONTEXT_TYPE.ALERT,name:"notifications.alerts.engagement-drop.title"});return O(e.header.channelId,e.header.userId,e.header.nickname,a,t)}function w(e,t,n){var a=_(_({},n),{},{type:p.CONTEXT_TYPE.CONTENT,name:"notifications.new-content.message-context.title"});return I(e.header.channelId,a,t)}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],r=_(_({},n),{},{id:e.id});switch(e.type){case p.NOTIFICATION_TYPE.USER_PERFORMANCE_ALERT:return A(e,t,r);case p.NOTIFICATION_TYPE.ENGAGEMENT_DROP_ALERT:return N(e,t,r);case p.NOTIFICATION_TYPE.SUCCESS_RATE_DROP_ALERT:a=[{id:e.header.userId,nickname:e.header.nickname}],r.type=p.CONTEXT_TYPE.ALERT,r.name="alerts.success-rate-drop.title";break;case p.NOTIFICATION_TYPE.DIFFICULT_CI_ALERT:a=e.header.userIds?e.header.userIds.reduce((function(e,t){return e.push({id:t}),e}),[]):b()?P(e.header.learnerWithDifficultiesCount):[{id:e.header.userId,nickname:e.header.nickname}],r.type=p.CONTEXT_TYPE.ALERT,r.name="notifications.alerts.difficult-ci.title";break;case p.NOTIFICATION_TYPE.ASSIGNMENTS_DUE_DATE_ALERT:e.header.userIds&&(a=e.header.userIds.reduce((function(e,t){return e.push({id:t}),e}),[])),r.type=p.CONTEXT_TYPE.ALERT,r.name="alerts.past-due-assignment.title";break;case p.NOTIFICATION_TYPE.ASSIGNMENT_NOTIFICATION:a=[{id:e.header.creatorId,nickname:e.header.creatorNickname}],r.type=p.CONTEXT_TYPE.ASSIGNMENT,r.name="notifications.assignment.message-context.title";break;case p.NOTIFICATION_TYPE.ASSIGNMENT_DUE_DATE_NOTIFICATION:a=[{id:e.header.creatorId,nickname:e.header.creatorNickname}],r.type=p.CONTEXT_TYPE.ASSIGNMENT,r.name="notifications.past-due-assignment.message-context.title";break;case p.NOTIFICATION_TYPE.NEW_CONTENT_NOTIFICATION:case p.NOTIFICATION_TYPE.UPDATE_CONTENT_ON_CHANNEL:return w(e,t,r);case p.NOTIFICATION_TYPE.ITEM_SCHEDULED:a=[{id:e.header.creatorId,nickname:e.header.creatorNickname}],r.type=p.CONTEXT_TYPE.CONTENT,r.name="notifications.schedule-item.inbox.title";break;default:y.warn("echo",{message:"Notification button: unknown notification type ".concat(e.type)}),a=[]}return Promise.resolve({recipients:a,context:a.length?r:null,mode:a.length>1?p.COMPOSE_MODE.MULTI:p.COMPOSE_MODE.SINGLE})}function P(e){for(var t=[],n=0;n<e;n++)t.push({id:"demo-"+n,nickname:"John Smith"});return t}var M={getMessageProps:function(e){var t={};if(e){var n,a="",r=e.lastMessage;if(r&&(n=r.timestamp,0===(a=r.body||"").indexOf("link:"))){a=a.split("link: ")[1];try{a=JSON.parse(a).url}catch(i){console.error("Failed to parse body of message ".concat(e.id))}}t={timestamp:n,body:a,title:e.title,id:e.id}}return t},getPreviewComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return l.default.createElement(g.default,{conversation:e,showPlaceholderMessage:t,context:n})},getComposeProps:k,getAvailableButtons:k,title:null,onClickOutsideIgnoreId:"messaging|help",inboxType:p.INBOX_TYPE.MESSAGING,includeFilters:!0,channelId:""};function L(e){var t={};return e&&(t.channelId=e),{types:[m.RESET_MESSAGE_COUNT,m.RESET_MESSAGE_COUNT_SUCCESS,D(v.COUNT_RESET_ERROR,m.RESET_MESSAGE_COUNT_ERROR)],promise:function(e){return e.put(h.default.RESET_MESSAGE_COUNT,{},{},{params:t,failOnOffline:!0})}}}function D(e,t){return function(n,a,r){var i="".concat(e," ").concat(JSON.stringify(r.error)),o=_(_({},r),{},{message:i});try{y.error("echo",{message:i})}catch(s){}return{type:t,error:o}}}t.inboxProps=M},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(118)).default;t.default=r},,,,,,,,function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0}),a.createElement("g",{id:"icomoon-ignore",key:1}),a.createElement("path",{d:"M364.308 238.946l-147.692-85.27c-13.129-7.58-29.538 1.895-29.538 17.053v170.54c0 15.159 16.41 24.635 29.538 17.055l147.692-85.272c13.129-7.579 13.129-26.528 0-34.106zM226.462 204.838l88.615 51.162-88.615 51.163v-102.325z",key:2}),a.createElement("path",{d:"M256 0c-141.385 0-256 114.615-256 256s114.615 256 256 256c141.385 0 256-114.615 256-256s-114.615-256-256-256zM39.385 256c0-119.633 96.982-216.615 216.615-216.615 119.632 0 216.615 96.982 216.615 216.615 0 119.632-96.983 216.615-216.615 216.615s-216.615-96.983-216.615-216.615z",key:3}),a.createElement("path",{d:"M498.788 13.149c-7.259-7.258-19.043-7.256-26.3 0.002l-459.339 459.399c-7.258 7.259-7.256 19.043 0.002 26.3s19.043 7.257 26.3-0.002l459.338-459.399c7.257-7.258 7.257-19.043-0.002-26.3z",key:4}),a.createElement("path",{d:"M349.834 255.983l-144.678 95.743-0.044-191.419 144.722 95.676z",key:5}),a.createElement("path",{d:"M289.362 244.513l8.747 7.678h-17.493l8.746-7.678z",key:6})])}r.defaultProps={version:"1.1",width:"100%",height:"100%",viewBox:"0 0 512 512"},e.exports=r,r.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(43)),i=a(n(963)),o=a(n(82)),s=a(n(48)),l=a(n(32)),u=a(n(14)),c=a(n(382)),d=function(e,t,n){var a,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},f=u.default.getAppdata(),p=f.backend_url,h=u.default.getUser().id;return l.default.get("".concat(p,"/Interactions/v2/taskGroups/:itemId/version/:version"),{itemId:t,version:n},{params:{channelId:e}}).then((function(n){return a=n,c.default.getCoverImage(p,e,t)})).then((function(l){var c={files:l?[l]:[],rests:[]},f=[];return function e(t){return Object.entries(t).forEach((function(t){var n=(0,r.default)(t,2),a=n[0],i=n[1];if((0,s.default)(i))e(i);else if("contentLanguage"===a)f.push(i);else if((0,o.default)(i)){var l=new RegExp(/^(http(s)?:)?\/\/[a-z0-9-]+(\.[a-z0-9-]+)*(\/)/),d=i.match(l);d&&d[0]&&d[0].match(/t2k|timetoknow/)&&c.files.push(u.default.getAssetPath(i))}}))}(a),c.rests=c.rests.concat([{url:"".concat(p,"/LibraryService/v2/channels/:channelId"),params:{channelId:e}},{url:"".concat(p,"/Interactions/v2/taskGroups/:itemId/version/:version"),params:{itemId:t,version:n},config:{params:{channelId:e}}},{url:"".concat(p,"/Interactions/v2/taskGroups/:itemId/version/:version"),params:{itemId:t,version:n}},{url:"".concat(p,"/PlayAppService/userContext"),config:{params:{channelId:e}}},{url:"".concat(p,"/Interactions/states/taskGroups/:itemId/version/:version"),params:{itemId:t,version:n},config:{params:{userId:h,channelId:e}}}]).concat(d.clk?[{url:"".concat(p,"/PlayAppService/play"),config:{params:{clk:d.clk,channelId:e}}}]:[]),(0,i.default)(f).forEach((function(e){c.rests=c.rests.concat([{url:"".concat(p,"/Interactions/dictionary"),config:{params:{locale:e,appName:"interactions"}}}])})),c}))};t.default=d},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(204)).default;t.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(53)),s=a(n(355)),l=o.default.LogManager,u=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"_getLoggerId",value:function(){var e,t,n,a;return this.loggerId||(this.loggerId=(e=s.default.instance.backendUrl,t=s.default.instance.userId,n={userAgent:navigator.userAgent,userId:t,appId:"Library",appVersion:"0.6908.0"},a="".concat(e,"/LibraryService/log"),l.registerLogger("Library",n,s.default.instance.loggerParams,{},a),"Library")),Promise.resolve(this.loggerId)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._getLoggerId().then((function(e){return l.log.apply(l,[e].concat(t))})).catch((function(e){return window.console.log(e)}))}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._getLoggerId().then((function(e){return l.debug.apply(l,[e].concat(t))})).catch((function(e){return window.console.debug(e)}))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._getLoggerId().then((function(e){return l.info.apply(l,[e].concat(t))})).catch((function(e){return window.console.info(e)}))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._getLoggerId().then((function(e){return l.warn.apply(l,[e].concat(t))})).catch((function(e){return window.console.warn(e)}))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._getLoggerId().then((function(e){return l.error.apply(l,[e].concat(t))})).catch((function(e){return window.console.error(e)}))}}]),e}());t.default=u},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(898)).default;t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(40)),o=a(n(3)),s=a(n(4)),l=a(n(28)),u=(a(n(13)),n(2065)),c=l.default.Instance,d=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"assignLanguageParameters",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=new RegExp(n.map((function(e,t){return"\\$".concat(t+1)})).join("|"),"g"),o=(e.match(r)||[]).concat("");var s=o.length,l=e;return o.reduce((function(e,t,a){var r=s===a+1,o=t.length,u=l.indexOf(t),c=l.substr(0,u),d=l.substr(u+o),f=(0,i.default)(e);if(r)d&&f.push(d);else{l=d;var p,h=Number(t.replace(/\$/g,""))-1,m=n[h];p="function"==typeof m?m(a):m,c&&f.push(c),p&&f.push(p)}return f}),[])}},{key:"generateShortUrl",value:function(e){if(null==e)throw new Error("Must provide parameters to generateShortUrl, got none.");return new Promise((function(t,n){c.post("https://www.googleapis.com/urlshortener/v1/url",{},e,{params:{key:"AIzaSyAPLGRDDiSVo23Aml2xIzSaF7_6rSUEO6w"}}).then((function(e){e.json().then((function(e){e.id?t(e.id):n(e.error)}))})).catch((function(e){return n(e)}))}))}},{key:"getRoleFromRolesArray",value:function(e){return-1!==e.indexOf("EDITOR")&&-1!==e.indexOf("INSTRUCTOR")?u.INDEPENDENT_INSTRUCTOR:-1!==e.indexOf("EDITOR")?u.EDITOR:-1!==e.indexOf("INSTRUCTOR")?u.INSTRUCTOR:-1!==e.indexOf("LEARNER")?u.LEARNER:-1}},{key:"parseServerResponse",value:function(e){return 200!==e.status?e.json().catch((function(){return{message:e.statusText}})).then((function(e){return Promise.reject(new Error(e.message))})):e.json().catch((function(e){return Promise.reject("Could not parse response from server as JSON.\n".concat(e))}))}},{key:"getValidateEmailPattern",value:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},{key:"parseEmailsInput",value:function(t){return e.parseListInput(t,e.getValidateEmailPattern(),"userName")}},{key:"getValidateIdsPattern",value:function(){return/^[0-9]{1,20}$/}},{key:"parseIdsInput",value:function(t){return e.parseListInput(t,e.getValidateIdsPattern(),"externalId")}},{key:"parseListInput",value:function(e,t,n){var a=!1,i=[],o=[",",";"],s=e,l=e.slice(-1);-1!==o.indexOf(l)&&(s=e.substring(0,e.length-1));for(var u=s.split(new RegExp(o.join("|"),"g")),c=new Set,d=0;d<u.length;d++){var f=u[d].trim();if(!c.has(f)){if(c.add(f),!f.match(t)){a=!0;break}i.push((0,r.default)({},n,f))}}return a?void 0:i}},{key:"createParamsHash",value:function(e){for(var t="",n=0;n<e.length;n++){var a=Object.keys(e[n])[0];e[n][a]&&(t+="/".concat(a,"/").concat(encodeURIComponent(e[n][a])))}return t}},{key:"getParentOffsets",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,bottom:t.bottom,left:t.left,right:t.right,height:t.height,width:t.width}}},{key:"getRouteParam",value:function(e,t){if(!e)return null;t=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)");e.startsWith&&!e.startsWith("?")&&(e="?"+e);var a=n.exec(e);return null!==a?a[1]:null}},{key:"arrayDiff",value:function(e,t){var n=new Set(e),a=new Set(t),r=new Set((0,i.default)(n).filter((function(e){return!a.has(e)})));return(0,i.default)(r)}},{key:"showNotification",value:function(){}},{key:"showErrorNotification",value:function(t){e.showNotification(t,"ERROR")}},{key:"isTextRTL",value:function(e){return!!(!!e&&e.match(/[\u0590-\u05FF\u0600-\u06FF]/gim))}},{key:"convertFileNameToCiName",value:function(e){return(e.substr(0,e.lastIndexOf("."))||e).replace(/_|-|\./g," ").replace(/  +/g," ").trim()}},{key:"treeSearchMethodByItemId",value:function(e){var t=e.node,n=e.searchQuery;return t&&t.cantHaveChildren&&t.id===n}}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DROPDOWN_THEME=void 0;var r=a(n(711));n(712);var i=r.DROPDOWN_THEME;t.DROPDOWN_THEME=i;var o=r.default;t.default=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1719)).default;t.default=r},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(920));n(926);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TIME_PICKER_THEME=void 0;var r=a(n(860));n(863);var i=r.TIME_PICKER_THEME;t.TIME_PICKER_THEME=i;var o=r.default;t.default=o},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(63)),i=a(n(1105)),o=a(n(14)),s=a(n(32)),l=a(n(194)),u=n(66),c=n(75),d=a(n(22)),f={getStorageLink:function(e,t,n){var a=e.serviceUrl,i="".concat(a,"/LibraryService/getUploadLink"),s=new XMLHttpRequest;return s.open("GET",i+"?filename="+function(e){return encodeURIComponent(e)}(t)),s.setRequestHeader("correlationId",(0,l.default)()),s.setRequestHeader("Authorization","Bearer ".concat(o.default.getCurrentSessionAccessToken())),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var e=JSON.parse(s.responseText),t="object"===(0,r.default)(e)?e.signedUrl:e;n(void 0,t)}else{28===(s.response?JSON.parse(s.response):{}).code?n(new Error(d.default.translate("interactions.file-type-not-supported"))):n(new Error(d.default.translate("interactions.failed-to-upload-file")))}},c.LogManager.info({message:"Getting Storage Link from REST URL - ".concat(a,", for filename - ").concat(t)}),s.send(),function(){return s.abort()}},uploadFileToLinkAndReturnDownloadLink:function(e,t,n){var a,r=e.file,o=e.link,s=new XMLHttpRequest;s.open("PUT",o);var l=function(){return setTimeout((function(){c.LogManager.error({message:"upload file (to link ".concat(o,") aborted due to no upload progress")}),s.abort(),clearTimeout(a),n(new Error("NO_PROGRESS_ABORTED"))}),18e5)};if(s.upload){var u=-1;a=l(),s.upload.addEventListener("progress",(function(e){var n=Math.ceil(e.loaded/e.total*100);u!==n&&(t&&t(n),u=n,clearTimeout(a),a=l())}),!1)}return s.setRequestHeader("Cache-Control","max-age=5184000"),s.setRequestHeader("Content-type",i.default.lookup(r.name)),s.onload=function(){a&&clearTimeout(a),200===s.status?(c.LogManager.info({message:"file uploaded successfully. returning the uploaded file (".concat(r.name,") full link - ").concat(o)}),n(void 0,o.split("?")[0])):n(new Error("Could not get upload file."))},s.onerror=function(){a&&clearTimeout(a),n(new Error("Could not get upload file."))},c.LogManager.info({message:"upload file to link - ".concat(o)}),s.send(r),function(){s.abort(),a&&clearTimeout(a)}},storeFile:function(e,t,n,a){var r,i=this,s=this.getStorageLink(e,t.name,(function(e,s){e?a(e):r=i.uploadFileToLinkAndReturnDownloadLink({link:s,file:t},n,(function(e,n){e?a(e):(n=o.default.getAssetPath(n),c.LogManager.info({message:"file uploaded successfully. returning the uploaded file (".concat(t.name,") download link - ").concat(n)}),a(void 0,n))}))}));return function(){r?r():s()}},handleServerResponse:function(e){return e.ok||e.status<400?Promise.resolve(e):Promise.reject(e)},getExternalFileUploadLink:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LibraryService/getUploadLink",a=arguments.length>3?arguments[3]:void 0;if(!e)return Promise.reject("no file name argument");var r="".concat(t,"/").concat(n);return c.LogManager.info({message:"Getting file-upload-link from REST URL - ".concat(n,", for filename - ").concat(e)}),s.default.get(r,{},{params:{filename:e,isPublicAsset:a}})},uploadFileToLinkAndReturnDownloadLinkPromise:function(e,t,n){var a=e.file,r=e.link;return new Promise((function(e,o){var s,l=new XMLHttpRequest;l.open("PUT",r);var u=function(){return setTimeout((function(){c.LogManager.error({message:"upload file (to link ".concat(r,") aborted due to no upload progress")}),l.abort(),n.cancel=void 0,clearTimeout(s),o("NO_PROGRESS_ABORTED")}),18e5)};if(l.upload){var d=-1;s=u(),l.upload.addEventListener("progress",(function(e){var n=Math.ceil(e.loaded/e.total*100);d!==n&&(t&&t(n),d=n,clearTimeout(s),s=u())}),!1)}l.setRequestHeader("Cache-Control","max-age=5184000"),l.setRequestHeader("Content-type",i.default.lookup(a.name)),l.onload=function(){200===l.status?(c.LogManager.info({message:"file uploaded successfully. returning the uploaded file (".concat(a.name,") full link - ").concat(r)}),e(r.split("?")[0])):(c.LogManager.error({message:"Could not get upload file"}),o(new Error("Could not get upload file."))),n.cancel=void 0,s&&clearTimeout(s)},l.onerror=function(){c.LogManager.error({message:"Failed to upload file to link - ".concat(r)}),n.cancel=void 0,s&&clearTimeout(s),o(new Error("Could not get upload file."))},n.cancel=function(){c.LogManager.info({message:"upload file (to link ".concat(r,") aborted by user")}),l.abort(),s&&clearTimeout(s),o("ABORTED")},c.LogManager.info({message:"upload file to link - ".concat(r)}),l.send(a)}))},uploadFileAndReturnDownloadLink:function(e,t,n,a,r){var i=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"LibraryService/getUploadLink",s=arguments.length>6?arguments[6]:void 0;return e?this.getExternalFileUploadLink(e.name,t,o,s).then((function(t){return i.uploadFileToLinkAndReturnDownloadLinkPromise({file:e,link:t},(function(e){a(e)}),r)})).catch((function(e){throw c.LogManager.error({message:"Failed to upload file due to: ".concat(e)}),e})):(c.LogManager.warn({message:"upload file called without a file"}),Promise.resolve(""))},getAnalyzedFileType:function(e,t){if(!e)return Promise.reject("no file-path argument");0===e.indexOf("//")&&(e="".concat(window.location.protocol).concat(e));var n="".concat(t,"/EditorService/externalContent/analyze");return s.default.post(n,{},{filepath:e})},dataUrlToFile:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"croppedFile",a=512,r=[];t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],o="".concat(n,".").concat(i.split("/").pop()),s=0;s<t.length;s+=a){for(var l=t.slice(s,s+a),c=new Array(l.length),d=0;d<l.length;d++)c[d]=l.charCodeAt(d);var f=new Uint8Array(c);r.push(f)}var p=new Blob(r,{type:i,name:o});return u.isIe||u.isEdge?(p.lastModifiedDate=new Date,p.name=o,p):new File([p],o)},stringContentToFile:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"croppedFile",a="".concat(n,".").concat(t.split("/").pop()),r=new TextEncoder("utf-8").encode(e),i=new Blob([r],{type:"".concat(t,";charset=utf-8"),name:a});return u.isIe||u.isEdge?(i.lastModifiedDate=new Date,i.name=a,i):new File([i],a)}};t.default=f},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(705));n(714);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(290)).default;t.default=r},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(678)).default;t.default=r},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WORD_TYPES=t.ALL_FILE_VALID_TYPES=t.ONLY_AUDIO_TYPE=t.ONLY_IMAGE_TYPE=t.ONLY_PDF_TYPE=t.ONLY_PPT_TYPE=t.ONLY_VIDEO_TYPE=t.FILE_VALID_TYPES=t.officedocumentXlsx=t.msExcel=t.officedocumentDocx=t.msWord=t.officedocumentPpt=t.msPowerpoint=void 0;var a="application/vnd.ms-powerpoint";t.msPowerpoint=a;var r="application/vnd.openxmlformats-officedocument.presentationml.presentation";t.officedocumentPpt=r;var i="application/msword";t.msWord=i;var o="application/vnd.openxmlformats-officedocument.wordprocessingml.document";t.officedocumentDocx=o;var s="application/vnd.ms-excel";t.msExcel=s;var l="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";t.officedocumentXlsx=l;var u=["application/zip","application/x-zip","application/x-zip-compressed",a,r,i,o,s,l,"zip","ppt","pptx","doc","docx","xls","xlsx","mp4","video/mp4","mov","video/quicktime"];t.FILE_VALID_TYPES=u;t.ONLY_VIDEO_TYPE=["video/mp4","video/quicktime"];var c=[a,r];t.ONLY_PPT_TYPE=c;var d=["pdf","application/pdf"];t.ONLY_PDF_TYPE=d;var f=["image/x-png","image/gif","image/jpeg","image/png","jpg","png","gif"];t.ONLY_IMAGE_TYPE=f;var p=["audio/mp3","audio/mpeg3","audio/mpeg","audio/ogg","audio/wav","audio/m4a","audio/x-m4a","mp3","mpeg","ogg","wav","m4a"];t.ONLY_AUDIO_TYPE=p;var h=u.concat(d).concat(f).concat(p);t.ALL_FILE_VALID_TYPES=h;var m=[o,i];t.WORD_TYPES=m},,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TOGGLE_THEME=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(22)),m=r(n(58)),v=r(n(36));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E={REGULAR:"regular",CLASSIC:"classic"};t.TOGGLE_THEME=E;var _=function(e){(0,u.default)(n,e);var t=g(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._onClick=a._onClick.bind((0,l.default)(a)),a._toggleState=a._toggleState.bind((0,l.default)(a)),a.state={isEnabled:e.isEnabled,animate:!1,showConfirmDialog:!1},a}return(0,s.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.state.isEnabled!==e.isEnabled&&this.setState({isEnabled:e.isEnabled})}},{key:"render",value:function(){var e=this,t=this.props.showTooltip?h.default.translate(this.state.isEnabled?this.props.disableTooltip:this.props.enableTooltip):null,n="t2k-toggle-button",a=(0,p.default)(n,(0,i.default)({},this.props.styleClass,this.props.styleClass),{"theme-classic":this.props.theme===E.CLASSIC},(0,i.default)({},"".concat(n,"--enabled"),this.state.isEnabled)),r=(0,p.default)("".concat(n,"__indicator"),(0,i.default)({},"".concat(n,"__indicator--enabled"),this.state.isEnabled),(0,i.default)({},"".concat(n,"__indicator--disabled"),!this.state.isEnabled),(0,i.default)({},"".concat(n,"__indicator--enabled--animate"),this.state.isEnabled&&this.state.animate),(0,i.default)({},"".concat(n,"__indicator--disabled--animate"),!this.state.isEnabled&&this.state.animate));return f.default.createElement("div",{className:a,onClick:this.props.beforeChangeCallback?function(){return e.props.beforeChangeCallback(e._onClick)}:this._onClick,title:t},f.default.createElement("div",{className:r}),this._getConfirmDialog())}},{key:"_onClick",value:function(){var e=this.state.isEnabled,t=this.props,n=t.enableConfirmMessage,a=t.disableConfirmMessage;e&&a||!e&&n?this.setState({showConfirmDialog:!0}):this._toggleState()}},{key:"_toggleState",value:function(){var e=this;this.setState((function(e){return{isEnabled:!e.isEnabled,animate:!0,showConfirmDialog:!1}}),(function(){e.props.onUserChangeState(e.state.isEnabled)}))}},{key:"_getConfirmDialog",value:function(){var e=this,t=this.state,n=t.isEnabled,a=t.showConfirmDialog,r=this.props,i=r.enableConfirmMessage,o=r.disableConfirmMessage;if(!a)return null;var s=n?o:i,l=[{id:"cancel",text:"Cancel",type:v.default.TYPES.SECONDARY,onClick:function(){e.setState({showConfirmDialog:!1})}},{id:"confirm",text:"Confirm",type:v.default.TYPES.PRIMARY,onClick:this._toggleState}];return f.default.createElement("div",{onClick:function(e){e.stopPropagation()}},f.default.createElement(m.default,{content:s,actions:l,close:function(){e.setState({showConfirmDialog:!1})}}))}}]),n}(f.Component);t.default=_,_.defaultProps={isEnabled:!1,enableTooltip:"toggle-button.enable",disableTooltip:"toggle-button.disable",enableConfirmMessage:null,disableConfirmMessage:null,styleClass:"",showTooltip:!0,beforeChangeCallback:null}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(626));n(627);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(21)),v=a(n(1116));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}n(1144);var y=function(e){return e.treeIndex},k=function(e){(0,c.default)(a,e);var t=_(a);function a(e){var r;return(0,s.default)(this,a),(r=t.call(this,e)).state={treeData:r.props.treeData},i=r.props.ltr?n(776):n(775),r._generateNodeProps=r._generateNodeProps.bind((0,u.default)(r)),r._canDrop=r._canDrop.bind((0,u.default)(r)),r.addNodeUnderParent=r.addNodeUnderParent.bind((0,u.default)(r)),r.handleVisibilityToggle=r.handleVisibilityToggle.bind((0,u.default)(r)),r.expandAll=r.expandAll.bind((0,u.default)(r)),r.collapseAll=r.collapseAll.bind((0,u.default)(r)),r}return(0,l.default)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isTreeExpanded&&this.props.isTreeExpanded!==e.isTreeExpanded?this.expandAll():e.isTreeExpanded||this.props.isTreeExpanded===e.isTreeExpanded||this.collapseAll()}},{key:"componentDidMount",value:function(){this.props.isTreeExpanded&&this.expandAll()}},{key:"render",value:function(){var e=this,t=this.props,n=t.ltr,a=t.rowHeight,r=t.maxDepth,o=t.styleClass,s=t.canDrag,l=t.placeholderComponent,u=t.onMoveNode,c=t.searchMethod,d=t.searchQuery,f=t.expandOnlySearchedNodes,h=t.searchFocusOffset,m=t.canNodeHaveChildren,g=t.style;return p.default.createElement("div",{className:"tree-wrapper ".concat(o),style:g},p.default.createElement(v.default,{className:"sortable-tree",rowDirection:n?"ltr":"rtl",style:{direction:n?"ltr":"rtl"},innerStyle:{direction:n?"ltr":"rtl"},canNodeHaveChildren:m,canDrag:s,canDrop:this._canDrop,rowHeight:a,maxDepth:r,scaffoldBlockPxWidth:26,treeData:this.state.treeData,onChange:function(t){return e.setState({treeData:t})},theme:i,generateNodeProps:this._generateNodeProps,placeholderRenderer:l,onMoveNode:function(e){var t=e.treeData,n=e.node,a=e.nextParentNode;u(t,n,a)},onVisibilityToggle:this.handleVisibilityToggle,searchMethod:c,searchQuery:d,expandOnlySearchedNodes:f,searchFocusOffset:h}))}},{key:"_generateButtons",value:function(e){var t=this,n=this.props.buttonsConfig,a=this.state.treeData,r=e.node,i=r.id,o=r.cantHaveChildren,s=r.cantEdit,l=r.isSelected,u=r.children,c=r.parentLearningPathId,d=r.childrenHaveLearningPath,f=r.type,p=!!o||!this.canNodeHaveChildren(e.node),h=[];return n.more_settings_action&&!p&&u&&u.length&&h.push(n.more_settings_action(e.node)),n.add_action&&!p&&h.push(n.add_action({parentId:e.node.id,parentDepth:e.path.length,parentKey:e.treeIndex,parentChildrenCount:u&&u.length})),n.add_level&&!p&&h.push(n.add_level((function(){return{parentKey:e.treeIndex,parentDepth:e.path.length,parentChildrenCount:u&&u.length,getNodeKey:function(e){return e.treeIndex},parentId:e.node.id}}))),!n.learning_path_action||p||c||d||h.push(n.learning_path_action((function(){return{node:e.node,path:e.path}}))),n.edit_action&&!s&&h.push(n.edit_action((function(){return{node:e.node,path:e.path}}))),n.event_attendance&&f===m.default.CI_TYPE.OFF_PLATFORM_EVENT&&h.push(n.event_attendance(e.node)),n.delete_action&&this.canNodeBeDeleted(e.node)&&h.push(n.delete_action((function(n){if(!n){var r=(0,v.removeNodeAtPath)({treeData:a,path:e.path,getNodeKey:y});return t.setState({treeData:r}),{id:i,treeIndex:e.treeIndex,newTreeData:r}}return{id:i,node:e.node,path:e.path}}))),n.select_action&&!l&&h.push(n.select_action((function(){var n=t.changeNodeAtPath({node:E(E({},e.node),{},{isSelected:!0}),path:e.path});return{id:e.node.id,label:e.node.label,newTreeData:n}}))),n.unselect_action&&l&&h.push(n.unselect_action((function(){var n=t.changeNodeAtPath({node:E(E({},e.node),{},{isSelected:!1}),path:e.path});return{id:e.node.id,newTreeData:n}}))),h}},{key:"_generateNodeProps",value:function(e){var t=e.node,n=(0,h.default)({disabled:!!t.isDisabled},{selected:!!t.isSelected},{"has-path":!!t.learningPathId&&"Level"===t.type},{"in-path":!!t.path&&t.learningPathId===t.path.id||t.parentLearningPathId},{"first-in-path":!!t.path&&t.learningPathId===t.path.id&&1===t.path.index},{"last-in-path":t.lastInPath});return{key:"node-row-".concat(e.node.id),buttons:this._generateButtons(e),className:n}}},{key:"_canDrop",value:function(e){var t=e.nextParent,n=this.props,a=n.canDrop,r=n.maxLength,i=this.state.treeData;return(!t||!t.cantHaveChildren)&&(!(t&&t.children.length+1>=r)&&(!(!t&&i.length+1>=r)&&("boolean"!=typeof a||a)))}},{key:"addNodeUnderParent",value:function(e,t){var n=e.parentKey,a=e.parentDepth,r=void 0===a?0:a,i=e.parentChildrenCount,o=void 0===i?0:i,s=e.node,l=this.props,u=l.maxLength,c=l.maxDepth,d=this.state.treeData;if(null!==n){if(r>=c)return void t(!1);if(o+1>=u)return void t(!1)}else if(d.length+1>=u)return void t(!1);var f=(0,v.addNodeUnderParent)({treeData:d,parentKey:n,expandParent:!0,getNodeKey:y,newNode:s}).treeData;this.setState({treeData:f},(function(){t(f)}))}},{key:"addNodesUnderParent",value:function(e,t){var n=this,a=e.parentKey,r=e.nodes,i=e.parentChildrenCount,o=void 0===i?0:i;if(r&&r.length){var s=this.props.maxLength,l=this.state.treeData,u=[l];if(null!==a){if(o+r.length>=s)return void t(!1)}else if(l.length+r.length>=s)return void t(!1);r.forEach((function(e){u.push((0,v.addNodeUnderParent)({treeData:u[u.length-1],parentKey:a,expandParent:!0,getNodeKey:y,newNode:e}).treeData)})),this.setState({treeData:u[u.length-1]},(function(){t(n.state.treeData)}))}}},{key:"changeNodeAtPath",value:function(e,t){var n=e.path,a=e.node,r=this.state.treeData,i=(0,v.changeNodeAtPath)({treeData:r,path:n,getNodeKey:y,newNode:a});this.setState({treeData:i}),t&&t(i)}},{key:"removeNodeAtPath",value:function(e,t){var n=e.path,a=this.state.treeData,r=(0,v.removeNodeAtPath)({treeData:a,path:n,getNodeKey:y});this.setState({treeData:r},(function(){t&&t(r)}))}},{key:"isDescendant",value:function(e,t){var n=this;return!!e.children&&"function"!=typeof e.children&&e.children.some((function(e){return e.id===t.id||n.isDescendant(e,t)}))}},{key:"toggleChildrenVisibility",value:function(e){var t=e.node,n=e.path,a=this.state.treeData,r=(0,v.changeNodeAtPath)({treeData:a,path:n,newNode:function(e){var t=e.node;return E(E({},t),{},{expanded:!t.expanded})},getNodeKey:function(e){return e.treeIndex}});this.setState({treeData:r});var i=this.props.onVisibilityToggle;i&&i({treeData:a,node:t,expanded:!t.expanded,path:n})}},{key:"toggleDisabledForBranch",value:function(e){var t=this,n=e.parentNode,a=e.treeData,r=e.isDisabled,i=void 0===r||r;return(0,v.map)({treeData:a,callback:function(e){var a=e.node,r=n&&t.isDescendant(n,a);return a.id===n.id||r?E(E({},a),{},{isDisabled:i}):a},getNodeKey:function(e){return e.treeIndex},ignoreCollapsed:!1})}},{key:"disableAll",value:function(e){var t=this.toggleDisabledForBranch({parentNode:e,treeData:this.state.treeData,isDisabled:!0});this.setState({treeData:t})}},{key:"enableAll",value:function(e){var t=this.toggleDisabledForBranch({parentNode:e,treeData:this.state.treeData,isDisabled:!1});this.setState({treeData:t})}},{key:"handleVisibilityToggle",value:function(e){var t=this.props.onVisibilityToggle;t&&t(e)}},{key:"expand",value:function(e){var t=(0,v.toggleExpandedForAll)({treeData:this.state.treeData,expanded:e});this.setState({treeData:t})}},{key:"expandAll",value:function(){this.expand(!0)}},{key:"collapseAll",value:function(){this.expand(!1)}},{key:"canNodeHaveChildren",value:function(e){var t=this.props.canNodeHaveChildren;return!t||t(e)}},{key:"canNodeBeDeleted",value:function(e){var t=this.props.canNodeBeDeleted;return!t||t(e)}},{key:"getFlatData",value:function(e){return(0,v.getFlatDataFromTree)({treeData:this.state.treeData,getNodeKey:function(e){return e.node.id},ignoreCollapsed:!1}).map((function(e){var t=e.node,n=e.path;return{id:t.id,name:t.name,type:t.type,image:t.image,isLocked:t.isLocked,parent:n.length>1?n[n.length-2]:null}})).filter((function(t){return e?t.parent===e:t}))}},{key:"getDescendants",value:function(e){var t=this,n=[];return(0,v.walk)({treeData:e.children,callback:function(a){var r=a.node,i=a.path,o=e&&t.isDescendant(e,r);"Level"!==r.type&&o&&n.push({id:r.id,name:r.name,type:r.type,image:r.image,isLocked:r.isLocked,parent:i.length>1?i[i.length-2]:null})},getNodeKey:function(e){return e.treeIndex},ignoreCollapsed:!1}),n}}]),a}(p.Component);k.defaultProps={treeData:[],buttonsConfig:{},ltr:!1,rowHeight:56,maxDepth:5,maxLength:20,styleClass:"",style:{},placeholderComponent:function(){return p.default.createElement("div",null)},onMoveNode:function(){},searchFocusOffset:0,isTreeExpanded:!1,canNodeHaveChildren:function(){return!0},canNodeBeDeleted:function(){return!0}};var S=k;t.default=S},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(22)),i=n(39),o=a(n(81)),s=a(n(14)),l={fromChannelNameToTitle:function(e){var t=e;if(new RegExp(/^(\$%)([A-Z_]+)/).test(e)){var n=e.replace(/^(\$%)/,""),a=r.default.translate(n);a!==n&&(t=a)}return t},onSearchItemClick:function(e){var t,n=e.context[i.SEARCH_RESULT_TYPE.CHANNEL].channelId,a=encodeURIComponent(e.context[i.SEARCH_RESULT_TYPE.CHANNEL].name),r=e.context[e.type]&&e.context[e.type].contentId;switch(e.type){case i.SEARCH_RESULT_TYPE.CHANNEL:t={appId:"library",hash:"channel/".concat(n,"/").concat(a,"?tab=library")};break;case i.SEARCH_RESULT_TYPE.FUSE:case i.SEARCH_RESULT_TYPE.LESSON:case i.SEARCH_RESULT_TYPE.ASSESSMENT:case i.SEARCH_RESULT_TYPE.WORK_SHEET:case i.SEARCH_RESULT_TYPE.CI:t=e.context[e.type]&&e.context[e.type].type===i.SEARCH_RESULT_TYPE.FILE?{appId:"library",hash:"channel/".concat(n,"/").concat(a,"?tab=files")}:{appId:"library",hash:"channel/".concat(n,"/").concat(a,"?tab=library&id=").concat(r)};break;case i.SEARCH_RESULT_TYPE.PAGE:t=this.getPagePath(e);break;case i.SEARCH_RESULT_TYPE.TASK:t=this.getTaskPath(e)}return{appId:t.appId,hash:t.hash,queryParams:t.queryParams}},getTaskPath:function(e){var t=e.context[i.SEARCH_RESULT_TYPE.CHANNEL].channelId,n=e.context[i.SEARCH_RESULT_TYPE.WORK_SHEET],a=e.context[i.SEARCH_RESULT_TYPE.FUSE],r=e.context[i.SEARCH_RESULT_TYPE.ASSESSMENT],l=e.context[i.SEARCH_RESULT_TYPE.CI],u=n||a||l||r||null,c=null==u?void 0:u.clk,d=o.default.getContextRoles(t),f=null,p=null,h="";if(Object.values(d).indexOf(i.ROLES.EDITOR)>-1&&s.default.isPC()&&this.hasEditingPermission(u)){if(n)f="buzz",p={channelId:t,contentLocale:n.locale},h="openBuzz/buzzId/".concat(n.contentId,"/buzzVersion/").concat(n.version);else if(r)f="buzz",p={channelId:t,contentLocale:r.locale},h="openAssessment/buzzId/".concat(r.contentId,"/buzzVersion/").concat(r.version);else if(a){var m=a.contentId,v=a.version;f="fuseEditor",h="openFuse/fuseId/".concat(m,"/fuseVersion/").concat(v),p={channelId:t}}else if(l){f="ciEditor",p={channelId:t,ciId:l.contentId}}return{appId:f,hash:h,queryParams:p}}if(f="echoPlayer",p={channelId:t,clk:c},l){var g,E,_=null===(g=e.context)||void 0===g||null===(E=g.PAGE)||void 0===E?void 0:E.contentId;return{appId:f,queryParams:p,hash:h="page/".concat(_)}}return{appId:f,queryParams:p}},getPagePath:function(e){var t=e.context[i.SEARCH_RESULT_TYPE.CHANNEL].channelId,n=e.context[i.SEARCH_RESULT_TYPE.FUSE],a=e.context[i.SEARCH_RESULT_TYPE.LESSON],r=e.context[i.SEARCH_RESULT_TYPE.CI],l=n||a||r||null,u=null==l?void 0:l.clk,c=null,d=null,f="",p=e.context[e.type].contentId;n&&(p=Number(p)+1);var h,m,v=o.default.getContextRoles(t);if(Object.values(v).indexOf(i.ROLES.EDITOR)>-1&&s.default.isPC()&&this.hasEditingPermission(l)){if(n){var g=n.contentId,E=n.version;c="fuseEditor",f="openFuse/fuseId/".concat(g,"/fuseVersion/").concat(E,"/pageId/").concat(p),d={channelId:t}}else if(a){var _=a.contentId,y=a.version;c="lessonEditor",d={channelId:t},f="openLesson/lessonId/".concat(_,"/lessonVersion/").concat(y,"/pageId/").concat(p)}else if(r){c="ciEditor",d={channelId:t,ciId:r.contentId}}return{appId:c,hash:f,queryParams:d}}(c="echoPlayer",d={channelId:t,clk:u},r)?(p=null===(h=e.context)||void 0===h||null===(m=h.PAGE)||void 0===m?void 0:m.contentId,f="page/".concat(p)):f=p?"activePageId/".concat(p):"";return{appId:c,queryParams:d,hash:f}},hasEditingPermission:function(e){return!e.contentItemPermission||!e.contentItemPermission.allowedActions||e.contentItemPermission.allowedActions.find((function(e){return"CONTENT_ITEM:EDIT"===e.action})).allowed}};t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(33)),o=a(n(34)),s=a(n(3)),l=a(n(4)),u=a(n(28)),c=a(n(14)),d=a(n(21));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=u.default.Instance,m=function(){function e(){(0,s.default)(this,e)}var t,n;return(0,l.default)(e,null,[{key:"getPermissions",value:(n=(0,o.default)(i.default.mark((function t(n,a,r){var o,s,l;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={entityType:n,entityId:a,roles:r},s=c.default.getAppdata().backend_url,t.next=4,h.get("".concat(s,"/PlayAppService/permissions"),{},{params:o});case 4:return l=t.sent,t.abrupt("return",e._addCourseTemplatePermissions(l));case 6:case"end":return t.stop()}}),t)}))),function(e,t,a){return n.apply(this,arguments)})},{key:"getAllPermissions",value:(t=(0,o.default)(i.default.mark((function t(){var n,a;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.default.getAppdata().backend_url,t.next=3,h.get("".concat(n,"/PlayAppService/user/allRolesAndPermissions"));case 3:return a=t.sent,t.abrupt("return",e._addCourseTemplatePermissions(a));case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})},{key:"_addCourseTemplatePermissions",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=e[n[t]];a.roles&&-1!==a.roles.indexOf(d.default.ROLES.EDITOR)&&(a.actions=p(p({},a.actions),{},{"CHANNEL:COURSE_TEMPLATE:ONCLICK":!0,"CHANNEL:COURSE_TEMPLATE:DELETE":!0,"CHANNEL:COURSE_TEMPLATE:SETTINGS":!0,"CHANNEL:COURSE_TEMPLATE:PUBLISH":!0,"CHANNEL:COURSE_TEMPLATE:UNPUBLISH":!0,"CHANNEL:COURSE_TEMPLATE:SHOW_PUBLISH_INFO":!0}))}return e}}]),e}();t.default=m},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(68)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(282)),c=r(n(865)),d=r(n(21)),f=r(n(612)),p=n(114),h=a(n(223)),m=r(n(872)),v=r(n(880)),g=r(n(195));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=h.ACTION_EVENTS;var k=function(){function e(t){var n=t.envParams;(0,s.default)(this,e),this._appData=n.appData,this._featureFlags=n.appData.appConf.featureFlags,this._environment=new c.default(this,n),this._dispatcherManager=this._initDispatcherManager()}return(0,l.default)(e,null,[{key:"buildGetEventsContextPromise",value:function(e){return function(){return new Promise((function(t){e((function(e){t(e)}))}))}}},{key:"extractTaskTypeAndPreset",value:function(e){if(!e)return{};var t=e.split("__");return{taskType:t[0],taskPreset:t[1]}}},{key:"mergeTaskGroupResponseWithGeneratedTemplate",value:function(e,t){var n=_(_({},e),{},{taskGroup:_(_({},e.taskGroup),{},{serverVersion:t.taskGroup.serverVersion,version:t.taskGroup.version,id:t.taskGroup.id})});return Object.keys(e.tasks).forEach((function(e){n.tasks[e]=_(_({},n.tasks[e]),{},{version:t.tasks[e].version,serverVersion:t.tasks[e].serverVersion})})),n}}]),(0,l.default)(e,[{key:"createTaskGroup",value:function(t,n,a){var r,o=this,s=t.initialData,l=void 0===s?{}:s,u=t.editorOptions,c=void 0===u?{}:u,d=t.saveStatus,f=void 0===d?void 0:d,p=t.onDeleteTask,h=void 0===p?function(){}:p,v=t.onDuplicateTask,E=void 0===v?function(){}:v,y=t.onTaskRemovedFromSuggested,k=void 0===y?function(){}:y,S=t.externalControls,T=t.disableDragOrdering,b=t.hideTaskGroupTitle,C=void 0!==b&&b,I=t.onInteractionsEdit,O=l.taskType,A=l.createTaskGroupId,N=(0,i.default)(l,["taskType","createTaskGroupId"]),w=e.extractTaskTypeAndPreset(O),R=w.taskType,P=w.taskPreset,M=c.defaultSettings;!R||this._isFeatureValid(R,P)?this._environment.getLanguage(N.contentLanguage||"en_US").then((function(e){return r=g.default.getTaskGroupPreset(_(_({taskType:R,taskSubType:P},N),{},{defaultSettings:M,language:e,createTaskGroupId:A,additionalData:a})),A?new m.default(r.taskGroup.id,r,o._environment,o._dispatcherManager,c,f,h,E,k,S,T,C,I):o._environment.saveTaskGroupEditorModelData(r).then((function(e){return o._createTaskGroupEditor(r,e,c,f,h,E,k,S,T,C)}))})).then((function(e){n&&n(void 0,e)})).catch((function(e){return n(e)})):n(new Error("Permission Denied. Feature is invalid."))}},{key:"editTaskGroup",value:function(e,t){var n=this,a=e.taskGroupIdentity,r=a.taskGroupId,i=a.taskGroupVersion,o=a.taskGroupData,s=e.editorOptions,l=e.saveStatus,u=void 0===l?void 0:l,c=e.onDeleteTask,d=void 0===c?function(){}:c,f=e.onDuplicateTask,p=void 0===f?function(){}:f,h=e.onTaskRemovedFromSuggested,m=void 0===h?function(){}:h,v=e.externalControls,g=e.disableDragOrdering,E=e.hideTaskGroupTitle,_=e.onInteractionsEdit;o?this._loadTaskGroupEdit(r,o,s,u,d,p,m,v,g,E,_,t):this._environment.getTaskGroupEditorModelData(r,i).then((function(e){n._loadTaskGroupEdit(r,e,s,u,d,p,m,v,g,E,_,t)})).catch((function(e){return t(e)}))}},{key:"_loadTaskGroupEdit",value:function(e,t,n,a,r,i,o,s,l,u,c,d){var f=new m.default(e,t,this._environment,this._dispatcherManager,n,a,r,i,o,s,l,u,c);d&&d(void 0,f)}},{key:"playTaskGroup",value:function(e,t){var n=this,a=e.taskGroupIdentity,r=a.taskGroupId,i=a.taskGroupVersion,o=a.taskGroupData,s=e.userStateOptions,l=e.getEventsContext,u=e.channelId,c=e.isPreview,d=e.updateCompletedTaskCountCallback;o?this._loadTaskGroup({taskGroupId:r,userStateOptions:s,getEventsContext:l,taskGroupData:o,updateCompletedTaskCountCallback:d,channelId:u},t):this._environment.getTaskGroupEditorModelData(r,i,u,c).then((function(e){n._loadTaskGroup({taskGroupId:r,userStateOptions:s,getEventsContext:l,taskGroupData:e,channelId:u},t)})).catch((function(e){return t(e)}))}},{key:"_loadTaskGroup",value:function(t,n){var a=t.taskGroupId,r=t.userStateOptions,i=t.getEventsContext,o=t.taskGroupData,s=t.updateCompletedTaskCountCallback,l=t.channelId,u=new v.default(a,o,l,this._environment,this._dispatcherManager,e.buildGetEventsContextPromise(i));if(s&&u.userStateStore.setUpdateCompletedTaskCountCallback(s),r){u.setUserStateOptions(r,(function(e){n&&(e?n(e):n(void 0,u))}))}else n&&n(void 0,u)}},{key:"duplicateTaskGroup",value:function(e,t){var n=e.taskGroupId,a=e.taskGroupVersion;this._environment.duplicateTaskGroup(n,a).then((function(e){t&&t(void 0,{taskGroupId:e.id,taskGroupVersion:e.version})})).catch((function(e){return t(e)}))}},{key:"deleteTaskGroup",value:function(e,t){var n=e.taskGroupId,a=e.taskGroupVersion;this._environment.deleteTaskGroup(n,a).then((function(){t&&t()})).catch((function(e){return t(e)}))}},{key:"createTaskGroupVersion",value:function(e,t){var n=e.taskGroupId,a=e.taskGroupVersion;this._environment.createTaskGroupVersion(n,a).then((function(e){t&&t(void 0,{taskGroupVersion:e.version})})).catch((function(e){return t(e)}))}},{key:"_isFeatureValid",value:function(e,t){return this._featureFlags.taskTypes[e][t]}},{key:"_createTaskGroupEditor",value:function(t,n,a,r,i,o,s,l,u,c){var d=e.mergeTaskGroupResponseWithGeneratedTemplate(t,n);return console.log("_createTaskGroupEditor editorOptions",a),new m.default(n.taskGroup.id,d,this._environment,this._dispatcherManager,a,r,i,o,s,l,u,c)}},{key:"_initDispatcherManager",value:function(){var e=this._environment,t=e.serviceUrl,n=e.xapiContext,a=[y.TASK_COMPLETED,y.TASK_ATTEMPT,y.TASK_NAVIGATED,y.TASK_GROUP_LOADED,y.TASK_GROUP_COMPLETED],r=[y.TASK_NAVIGATED,y.TASK_GROUP_LOADED,y.TASK_GROUP_COMPLETED],i=new f.default(this._environment.accessToken,this._environment.serviceHeaders,a);return i.addDispatcher(d.default.DISPATCHER_TYPES.URL,"".concat(t).concat(p.PATH).concat(p.EVENTS_PATH),r),n&&i.addDispatcher(d.default.DISPATCHER_TYPES.XAPI,n.endpoint,[y.TASK_COMPLETED,y.TASK_ATTEMPT],{xapiContext:n}),i}},{key:"getActiveTasksAndPresets",value:function(){return this._featureFlags.taskTypes}},{key:"sizeLimitation",get:function(){return this._appData.appConf.sizeLimitation}},{key:"featureFlags",get:function(){return this._appData.appConf.featureFlags}},{key:"taskTypes",get:function(){var e=u.default.filterInteractionCategoryAndPreset(this._featureFlags.taskTypes),t={};return Object.keys(e).forEach((function(n){var a=e[n];t[n]=[],Object.keys(a).forEach((function(e){var r=a[e];t[n]=t[n].concat(r.map((function(t){return"".concat(e,"__").concat(t)})))}))})),t}},{key:"appData",get:function(){return this._appData}},{key:"scoreModification",get:function(){return this._featureFlags.scoreModification}},{key:"tagging",get:function(){return this._featureFlags.tagging}},{key:"canCiResultsBeHidden",get:function(){return this._featureFlags.isCiResultsLocked}},{key:"allowDownloadMedia",get:function(){return!(!this._featureFlags.allowDownloadMedia||!this._featureFlags.allowDownloadMedia.enabled)}}],[{key:"submitAssessment",value:function(e){e&&e()}}]),e}();t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{data:{html:t}}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s=a(n(29)),l=a(n(3)),u=a(n(4)),c=a(n(30)),d=(a(n(31)),n(20)),f=a(n(682)),p=a(n(683)),h=(r=function(){function e(){(0,l.default)(this,e),this.accountId="",this.created=null,this.modified=null,this.id="",this.version=null,this.serverVersion=null,(0,s.default)(this,"properties",i,this),(0,s.default)(this,"structure",o,this)}return(0,u.default)(e,[{key:"setTaskGroupModelData",value:function(e){this.id=e.id,this.accountId=e.accountId,this.created=e.created,this.modified=e.modified,this.serverVersion=e.serverVersion,this.version=e.version,this.properties.setTaskGroupProperties(e.properties),this.structure.resetTaskGroupStructure()}},{key:"addTask",value:function(e){this.structure.addTask(e.id,e.version)}},{key:"addTaskToIndex",value:function(e,t){this.structure.addTaskToIndex(e.id,e.version,t)}},{key:"removeTask",value:function(e){this.structure.removeTask(e)}},{key:"getTaskIndex",value:function(e){return this.structure.getTaskIndex(e)}},{key:"setVersion",value:function(e){this.version=e}},{key:"getTaskGroupData",value:function(){return{id:this.id,version:this.version,properties:this.properties}}},{key:"getIsCustomPoints",value:function(){return this.properties.isCustomPoints}},{key:"getIsRandomized",value:function(){return this.properties.isRandomized}},{key:"getIsMustCompleteQuestions",value:function(){return this.properties.isMustCompleteQuestions}},{key:"getIsQuestionsTimePerTask",value:function(){return this.properties.isQuestionsTimePerTask}}]),e}(),i=(0,c.default)(r.prototype,"properties",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f.default}}),o=(0,c.default)(r.prototype,"structure",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p.default}}),(0,c.default)(r.prototype,"addTask",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"addTask"),r.prototype),(0,c.default)(r.prototype,"addTaskToIndex",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"addTaskToIndex"),r.prototype),(0,c.default)(r.prototype,"removeTask",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"removeTask"),r.prototype),r);t.default=h},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s,l,u,c,d,f,p,h,m,v,g=a(n(29)),E=a(n(3)),_=a(n(4)),y=a(n(30)),k=(a(n(31)),n(20)),S=(r=function(){function e(){(0,E.default)(this,e),(0,g.default)(this,"backgroundColor",i,this),(0,g.default)(this,"contentLanguage",o,this),(0,g.default)(this,"displayNumbering",s,this),(0,g.default)(this,"displayQuestion",l,this),(0,g.default)(this,"isSingleMedia",u,this),(0,g.default)(this,"title",c,this),(0,g.default)(this,"type",d,this),(0,g.default)(this,"coverImageUrl",f,this),(0,g.default)(this,"maxPoints",p,this),(0,g.default)(this,"isCustomPoints",h,this),(0,g.default)(this,"isMustCompleteQuestions",m,this),(0,g.default)(this,"isRandomized",v,this)}return(0,_.default)(e,[{key:"setTaskGroupProperties",value:function(e){var t=e.backgroundColor,n=e.contentLanguage,a=e.displayNumbering,r=e.displayQuestion,i=e.isSingleMedia,o=e.title,s=e.type,l=e.coverImageUrl,u=e.maxPoints,c=e.isCustomPoints,d=e.isRandomized,f=e.isMustCompleteQuestions,p=e.isQuestionsTimePerTask,h=e.taskMustCompleteQuestionDefaultTime;this.backgroundColor=t,this.contentLanguage=n,this.displayNumbering=a,this.displayQuestion=r,this.isSingleMedia=i,this.title=o,this.type=s,this.coverImageUrl=l,this.maxPoints=u||100,this.isCustomPoints=c||!1,this.isMustCompleteQuestions=f||!1,this.isQuestionsTimePerTask=p||!1,this.taskMustCompleteQuestionDefaultTime=h||null,this.isRandomized=d||!1}},{key:"setTaskGroupProperty",value:function(e,t){Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t)}}]),e}(),i=(0,y.default)(r.prototype,"backgroundColor",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"transparent"}}),o=(0,y.default)(r.prototype,"contentLanguage",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"en_US"}}),s=(0,y.default)(r.prototype,"displayNumbering",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=(0,y.default)(r.prototype,"displayQuestion",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=(0,y.default)(r.prototype,"isSingleMedia",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=(0,y.default)(r.prototype,"title",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=(0,y.default)(r.prototype,"type",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=(0,y.default)(r.prototype,"coverImageUrl",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),p=(0,y.default)(r.prototype,"maxPoints",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),h=(0,y.default)(r.prototype,"isCustomPoints",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=(0,y.default)(r.prototype,"isMustCompleteQuestions",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=(0,y.default)(r.prototype,"isRandomized",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,y.default)(r.prototype,"setTaskGroupProperties",[k.action],Object.getOwnPropertyDescriptor(r.prototype,"setTaskGroupProperties"),r.prototype),(0,y.default)(r.prototype,"setTaskGroupProperty",[k.action],Object.getOwnPropertyDescriptor(r.prototype,"setTaskGroupProperty"),r.prototype),r);t.default=S},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s=a(n(29)),l=a(n(3)),u=a(n(4)),c=a(n(30)),d=(a(n(31)),n(20)),f=(r=function(){function e(){(0,l.default)(this,e),(0,s.default)(this,"taskOrder",i,this),(0,s.default)(this,"taskVersions",o,this),this.taskOrder=[],this.taskVersions={}}return(0,u.default)(e,[{key:"addTask",value:function(e,t){-1===this.taskOrder.indexOf(e)&&(this.taskOrder.push(e),this.taskVersions[e]={id:e,version:t})}},{key:"addTaskToIndex",value:function(e,t,n){-1===this.taskOrder.indexOf(e)&&(this.taskOrder.splice(n,0,e),this.taskVersions[e]={id:e,version:t})}},{key:"removeTask",value:function(e){var t=this.taskOrder.indexOf(e);this.taskOrder.splice(t,1),delete this.taskVersions[e]}},{key:"getTaskIndex",value:function(e){return this.taskOrder.indexOf(e)}},{key:"changeOrder",value:function(e,t){if(e<0||e>this.taskOrder.length||t<0||t>this.taskOrder.length)throw new Error("ModelStoreTGStructure - change tasks order arguments are out of bound");this.taskOrder.splice(t,0,this.taskOrder.splice(e,1)[0])}},{key:"resetTaskGroupStructure",value:function(){this.taskOrder=[],this.taskVersions={}}},{key:"setOrder",value:function(e){var t={},n={},a=this.taskOrder;a.forEach((function(e){t[e]=!0})),e.forEach((function(e){n[e]=!0}));for(var r=0;r<a.length;r++)if(!n[a[r]])return!1;for(var i=0;i<e.length;i++)if(!t[e[i]])return!1;this.taskOrder.replace(e)}}]),e}(),i=(0,c.default)(r.prototype,"taskOrder",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=(0,c.default)(r.prototype,"taskVersions",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,c.default)(r.prototype,"addTask",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"addTask"),r.prototype),(0,c.default)(r.prototype,"addTaskToIndex",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"addTaskToIndex"),r.prototype),(0,c.default)(r.prototype,"removeTask",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"removeTask"),r.prototype),(0,c.default)(r.prototype,"changeOrder",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"changeOrder"),r.prototype),(0,c.default)(r.prototype,"setOrder",[d.action],Object.getOwnPropertyDescriptor(r.prototype,"setOrder"),r.prototype),r);t.default=f},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=n(55);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,e),this.type="TEXT",this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,u.default)(this,"data",i,this),this.setData=this.setData.bind(this),this.setModel=this.setModel.bind(this),this.initialize=this.initialize.bind(this),this.taskApiForInteractions=n,this.additionalData=r,this.initialize(t,a)}return(0,d.default)(e,[{key:"setModel",value:function(e){this.data=v(v({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"setHTML",value:function(e){void 0!==e&&this.setData({html:e})}},{key:"initialize",value:function(e,t){this.setData({html:this.additionalData.html||""})}}]),e}(),o.category=h.MEDIA,r=s,i=(0,f.default)(r.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{html:"",title:"",description:"",credit:""}}}),(0,f.default)(r.prototype,"setModel",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setModel"),r.prototype),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),r);t.default=g},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(4)),f=a(n(30)),p=(a(n(31)),n(20)),h=n(55);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,e),this.type="IMAGE",this.taskApiForInteractions=void 0,this.additionalData=void 0,(0,u.default)(this,"data",i,this),this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.setTitle=this.setTitle.bind(this),this.setCredit=this.setCredit.bind(this),this.setEditedImage=this.setEditedImage.bind(this),this.taskApiForInteractions=n,this.additionalData=r,this.initialize(t,a)}return(0,d.default)(e,[{key:"setModel",value:function(e){this.data=v(v({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e,t){this.setData({src:void 0,editedImage:void 0})}},{key:"setTitle",value:function(e){this.setData({title:e})}},{key:"setDescription",value:function(e){this.setData({description:e})}},{key:"setCredit",value:function(e){this.setData({credit:e})}},{key:"setEditedImage",value:function(e){var t=e.src;this.setData({src:t,editedImage:e})}}]),e}(),o.category=h.MEDIA,r=s,i=(0,f.default)(r.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{showTitle:!0,showCredit:!0,showShadowbox:!1,src:void 0,editedImage:void 0,title:"",description:"",credit:""}}}),(0,f.default)(r.prototype,"setModel",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setModel"),r.prototype),(0,f.default)(r.prototype,"initialize",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,f.default)(r.prototype,"setTitle",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setTitle"),r.prototype),(0,f.default)(r.prototype,"setDescription",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setDescription"),r.prototype),(0,f.default)(r.prototype,"setCredit",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setCredit"),r.prototype),(0,f.default)(r.prototype,"setEditedImage",[p.action],Object.getOwnPropertyDescriptor(r.prototype,"setEditedImage"),r.prototype),r);t.default=g},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l,u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),a(n(48))),m=n(20),v=r(n(54)),g=n(55);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(l=s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0;(0,d.default)(this,e),this.type="EMBED_WEBSITE",this.taskApiForInteractions=void 0,this.additionalData=void 0,this.subType=void 0,(0,c.default)(this,"data",o,this),this.subType=t,this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.taskApiForInteractions=n,this.initialize(t)}return(0,f.default)(e,null,[{key:"getAnswersTypes",value:function(){return[v.DEFAULT_SUBTYPE,v.EMBEDDED_WEBSITE_WIX_SUBTYPE]}}]),(0,f.default)(e,[{key:"setSrc",value:function(e){(0,h.default)(e)&&(e=JSON.stringify(e)),this.setData({src:e})}},{key:"setModel",value:function(e){this.data=_(_({},this.data),e)}},{key:"setTitle",value:function(e){this.setData({title:e})}},{key:"setDescription",value:function(e){this.setData({description:e})}},{key:"setCredit",value:function(e){this.setData({credit:e})}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"initialize",value:function(e){this.setData({src:"",subType:e})}},{key:"wixArticle",get:function(){var e;return(null===(e=this.data)||void 0===e?void 0:e.src)?JSON.parse(this.data.src):null}},{key:"preset",get:function(){return this.data.subType||"default"}}]),e}(),s.category=g.MEDIA,i=l,o=(0,p.default)(i.prototype,"data",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{src:"",title:"",description:"",credit:"",subType:""}}}),(0,p.default)(i.prototype,"setSrc",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setSrc"),i.prototype),(0,p.default)(i.prototype,"setModel",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setModel"),i.prototype),(0,p.default)(i.prototype,"setTitle",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setTitle"),i.prototype),(0,p.default)(i.prototype,"setDescription",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setDescription"),i.prototype),(0,p.default)(i.prototype,"setCredit",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"setCredit"),i.prototype),(0,p.default)(i.prototype,"wixArticle",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"wixArticle"),i.prototype),(0,p.default)(i.prototype,"initialize",[m.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),i);t.default=y},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TYPES=t.COLUMNS=void 0;var r,i,o,s,l=a(n(40)),u=a(n(9)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=n(102),v=n(55),g=n(67),E=n(103);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={COLUMNA:"columnA",COLUMNB:"columnB"};t.COLUMNS=k;var S={TEXT:"TEXT",IMAGE:"IMAGE"};t.TYPES=S;var T=(s=o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;(0,d.default)(this,e),this.type="MATCHING",this.language={},this.taskApiForInteractions=void 0,this.additionalData=void 0,this.tempModel=void 0,(0,c.default)(this,"data",i,this),this.settingsFunctions={},this.setData=this.setData.bind(this),this.initialize=this.initialize.bind(this),this.language=a,this.taskApiForInteractions=n,this.additionalData=r,this.initialize(t,a)}return(0,f.default)(e,null,[{key:"getInteractionActionType",value:function(){return E.CHECK}},{key:"getFeedbackFields",value:function(e){return e.data.checkable?[g.CORRECT,g.PARTIAL,g.WRONG]:[]}}]),(0,f.default)(e,[{key:"initialize",value:function(e,t){var n,a=this;this.data.checkable=!0,this.data.types=(n={},(0,u.default)(n,k.COLUMNA,S.TEXT),(0,u.default)(n,k.COLUMNB,S.TEXT),n),this.additionalData.onInteractionCreationFromServer||(this.additionalData&&this.additionalData.suggestedData&&this.additionalData.suggestedData.rows?this.additionalData.suggestedData.rows.forEach((function(e){a.addMatch(e)})):(this.addMatch(),this.addMatch(),this.addMatch()))}},{key:"setModel",value:function(e){this.data=y(y({},this.data),e)}},{key:"setData",value:function(e){this.setModel(e),this.taskApiForInteractions.onInteractionChange()}},{key:"addMatch",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{A:"",B:""},n=this.data[k.COLUMNA],a=this.data[k.COLUMNB],r=n.length,i=this.addInteraction(this.data.types[k.COLUMNA],{html:t.A}),o=this.addInteraction(this.data.types[k.COLUMNB],{html:t.B});this.setData((e={},(0,u.default)(e,k.COLUMNA,[].concat((0,l.default)(n),[i])),(0,u.default)(e,k.COLUMNB,[].concat((0,l.default)(a),[o])),(0,u.default)(e,"answers",[].concat((0,l.default)(this.data.answers),[[r]])),e))}},{key:"deleteMatch",value:function(e){var t;this.taskApiForInteractions.removeInteraction(this.data[k.COLUMNA][e]),this.taskApiForInteractions.removeInteraction(this.data[k.COLUMNB][e]);var n=this.data[k.COLUMNA].filter((function(t,n){return n!==e})),a=this.data[k.COLUMNB].filter((function(t,n){return n!==e})),r=(0,l.default)(this.data.answers);r.splice(e,1),this.setData((t={},(0,u.default)(t,k.COLUMNA,n),(0,u.default)(t,k.COLUMNB,a),(0,u.default)(t,"answers",r),t)),this.removeMatchFromTempModel(e)}},{key:"updateColumnType",value:function(e,t){for(var n=[],a={},r="",i="",o=this.tempModel[e][t]||[],s=0;s<this.data[e].length;s++)o[s]?(i=o[s],n.push(i),a[i]=this.tempModel.interactions[e][i]):(r=this.addInteraction(t),n.push(r));Object.keys(a).length>0&&this.taskApiForInteractions.addInteractionsWithModel(a),this.updateTempModel(e,t),this.setData((0,u.default)({types:y(y({},this.data.types),{},(0,u.default)({},e,t))},e,n))}},{key:"removeInteractionsFromModel",value:function(e,t){var n=this.taskApiForInteractions.removeInteractions(t);this.tempModel.interactions[e]=n}},{key:"createTempModel",value:function(){var e,t,n=this.data.types[k.COLUMNA],a=this.data.types[k.COLUMNB];this.tempModel=(t={},(0,u.default)(t,k.COLUMNA,(0,u.default)({},n,{})),(0,u.default)(t,k.COLUMNB,(0,u.default)({},a,{})),(0,u.default)(t,"interactions",(e={},(0,u.default)(e,k.COLUMNA,[]),(0,u.default)(e,k.COLUMNB,[]),e)),t)}},{key:"updateTempModel",value:function(e,t){var n=t===S.TEXT?S.IMAGE:S.TEXT,a=this.data[e];this.tempModel[e][n]=a,this.removeInteractionsFromModel(e,a)}},{key:"removeMatchFromTempModel",value:function(e){var t=this;[k.COLUMNA,k.COLUMNB].forEach((function(n){var a=t.data.types[n]===S.TEXT?S.IMAGE:S.TEXT,r=t.tempModel[n][a];if(r){var i=r.filter((function(t,n){return n!==e}));t.tempModel[n][a]=i}}))}},{key:"addInteraction",value:function(e,t){var n=this.taskApiForInteractions.createInteractionDataByType(e,e,this.language,t);return this.taskApiForInteractions.addInteraction(n)}},{key:"getInteractionActionType",value:function(){return E.CHECK}}]),e}(),o.category=v.DEFAULT,r=s,i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{checkable:!0,checkingType:m.AUTOMATIC,types:{},columnA:[],columnB:[],answers:[]}}}),(0,p.default)(r.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,p.default)(r.prototype,"setModel",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setModel"),r.prototype),(0,p.default)(r.prototype,"setData",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setData"),r.prototype),(0,p.default)(r.prototype,"addInteraction",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"addInteraction"),r.prototype),r);t.default=T},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(37))),h=r(n(58)),m=r(n(41));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var _=p.default.isMobile,y=p.default.isPhone,k=function(e){(0,u.default)(n,e);var t=E(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).openFinalScore=a.openFinalScore.bind((0,l.default)(a)),a.handleAssesmentFinalScoreClicked=a.handleAssesmentFinalScoreClicked.bind((0,l.default)(a)),a.handleSubmitAssessmentClicked=a.handleSubmitAssessmentClicked.bind((0,l.default)(a)),a.getCurrentOrFinalScorePage=a.getCurrentOrFinalScorePage.bind((0,l.default)(a)),a.getCurrentOrFinalScorePopUp=a.getCurrentOrFinalScorePopUp.bind((0,l.default)(a)),a._getTotalAnswersTemplate=a.getTotalAnswersTemplate.bind((0,l.default)(a)),a.handleBackToQuestionsClick=a.handleBackToQuestionsClick.bind((0,l.default)(a)),a.statsDisplayByOrder=["correct","partial","wrong","unanswered","nonCheckable"],a.state={score:a.props.score,taskCount:a.props.taskCount,completedTasks:a.props.completedTasks,showScore:a.props.showScore,showScoreDetails:a.props.showScoreDetails,taskStats:a.buildTaskStats(),shouldShowConfirmationDialogue:!1},a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.updateQuestionBar()}},{key:"UNSAFE_componentWillUpdate",value:function(e){this.state.completedTasks!==e.completedTasks&&this.setState({completedTasks:e.completedTasks})}},{key:"componentDidUpdate",value:function(e,t){this.state.showScoreDetails&&this.state.showScoreDetails!==t.showScoreDetails&&this.updateQuestionBar()}},{key:"render",value:function(){var e=this.props,t=e.popUp;if(!e.taskCount)return null;var n=this.state,a=n.showScoreDetails,r=n.showScore,i=["ttk-task-group-student-score-wrapper",t?"student-report-popup":"student-report-page",r?"pre-student-score-display":"",t||_||r||a?"":"hide",_?"mobile":"",y?"phone":""];return f.default.createElement("div",{className:i.join(" ")},r&&this.renderShowScore(),a&&this.renderShowScoreDetails(),this.renderReportNotFinalDialog())}},{key:"renderShowScore",value:function(){var e=this.props.popUp?"student-report-popup":"student-report-page";return f.default.createElement("div",{className:"pre-student-score ".concat(e)},this.renderShowScoreContent(),f.default.createElement("div",{className:"student-score-button-wrapper ".concat(e)},this.renderButton(),this.renderTryAgainButton()))}},{key:"renderShowScoreContent",value:function(){var e=this.props,t=e.isAssessment,n=e.isAssessmentSubmitted;return t&&n?this.renderAssessmentSubmittedSuccessfullyMsg():this.renderYouHaveAnsweredMsg()}},{key:"renderYouHaveAnsweredMsg",value:function(){var e=this.props.language,t=this.state,n=t.completedTasks,a=t.taskCount,r=" "+n+" "+" "+(e.ANSWERED_ON_2+" "+a+" "+e.ANSWERED_ON_3);return f.default.createElement("div",{className:"message_container"},f.default.createElement("div",{className:"message_regular"},e.ANSWERED_ON_1),f.default.createElement("div",{className:"message_large",id:"questions-string"},f.default.createElement("div",null,r)))}},{key:"renderAssessmentSubmittedSuccessfullyMsg",value:function(){var e=this.props.language;return f.default.createElement("div",{className:"message_container"},f.default.createElement("div",{className:"message_large"},e.ASSESSMENT_SUBMITTED_SUCCESSFULLY))}},{key:"renderShowScoreDetails",value:function(){var e=this,t=this.props,n=t.language,a=t.popUp,r=t.isAssessment,i=t.isAssessmentSubmitted,o=this.state,s=o.completedTasks,l=o.taskStats,u=o.taskCount,c=o.score,d=a?"student-report-popup":"student-report-page",p=n.ANSWERED_ON_2+" "+u+" "+n.ANSWERED_ON_3,h=r?i:u&&s===u,m=" "+s+" ",v=l.partial>0||l.correct>0||l.wrong>0||l.nonCheckable>0,g=a?n.CLOSE:n.BACK_TO_QUESTIONS,E=c>=0?"".concat(Math.round(c),"%"):"0",_=h?"final":"current";return f.default.createElement("div",{className:"student-score-details"},f.default.createElement("div",{className:"score-container ".concat(_)},f.default.createElement("div",{className:"your-score ".concat(d),id:"your-score-string"},h?n.FINAL_SCORE:n.CURRENT_SCORE),f.default.createElement("div",{className:"score-value ".concat(d),id:"score-value-string"},E)),f.default.createElement("div",{className:"total-details"},f.default.createElement("div",{className:"message_container"},f.default.createElement("div",{className:"message_regular"},f.default.createElement("div",null,n.ANSWERED_ON_1,f.default.createElement("b",null,m),p))),v&&f.default.createElement("div",{ref:function(t){e.questionBar=t},className:"question-bar"},this.renderQuestionBar()),f.default.createElement("div",{ref:function(t){e.totalResults=t},className:"total-results hide"},this._getTotalAnswersTemplate())),f.default.createElement("div",{className:"student-score-button-wrapper ".concat(d),id:"student-score-btn"},f.default.createElement("button",{className:"student-score-button back-to-questions ".concat(d),id:"back-to-questions",onClick:this.handleBackToQuestionsClick},g),this.renderTryAgainButton()))}},{key:"renderQuestionBar",value:function(){var e=this;return this.statsDisplayByOrder.map((function(t,n){var a=e.state.taskStats[t];return a>0?f.default.createElement("div",{key:t+n,className:"".concat(t," graph"),"data-width":"".concat(100*a/e.state.taskCount,"%")}):null}))}},{key:"renderButton",value:function(){var e=this.props,t=e.language,n=e.popUp,a=e.isAssessment,r=e.taskCount,i=e.completedTasks,o=e.ciResultsHidden,s=e.isAssessmentSubmitted,l=a?s:r&&i===r,u=this.state.disableSubmit||l&&o&&a,c=function(){},d=n?"student-report-popup":"student-report-page",p=t.SUBMIT_TASK_GROUP;if(!u){var h=n?this.getCurrentOrFinalScorePopUp:this.getCurrentOrFinalScorePage;l?(c=a?this.handleAssesmentFinalScoreClicked:h,d+=" final",p=t.FINAL_SCORE):(c=a?this.handleSubmitAssessmentClicked:h,d+=" current",p=a?t.SUBMIT_TASK_GROUP:t.CURRENT_SCORE)}return f.default.createElement("button",{className:"student-score-button ".concat(d),id:"student-score-btn",onClick:c,disabled:u},p)}},{key:"renderTryAgainButton",value:function(){var e=this.props,t=e.isAssessment,n=e.enableAssessmentTryAgain,a=e.isAssessmentSubmitted,r=e.handleAssessmentTryAgainClicked,i=e.language;return t&&a&&n&&!this.state.disableSubmit?f.default.createElement("button",{className:"student-reset-assessment-button",onClick:r},i.TRY_AGAIN):null}},{key:"handleBackToQuestionsClick",value:function(e){e.stopPropagation(),this.props.popUp?this.props.backToQuestions():this.backToQuestionsPage()}},{key:"updateQuestionBar",value:function(){var e=this;this.questionBar&&setTimeout((function(){Array.from(e.questionBar.children).forEach((function(e){var t=e;t.style.width=t.getAttribute("data-width")})),e.totalResults.className="total-results"}),0)}},{key:"showStudentReportPage",value:function(){var e=this;this.setState({showScore:!0,showScoreDetails:!1},(function(){e.props.isAssessment||e.handleOnClickGetScore()}))}},{key:"hideStudentReportPage",value:function(){this.setState({showScore:!1,showScoreDetails:!1})}},{key:"openFinalScore",value:function(){this.props.popUp?this.getCurrentOrFinalScorePopUp():this.getCurrentOrFinalScorePage()}},{key:"getCurrentOrFinalScorePopUp",value:function(){this.props.backToQuestions()}},{key:"getCurrentOrFinalScorePage",value:function(){var e=this;this.setState({showScore:!1,showScoreDetails:!0},(function(){!e.state.popUp&&e.props.forceHideTaskGroupFooter&&e.props.forceHideTaskGroupFooter()}))}},{key:"handleOnClickGetScore",value:function(){var e=this;this.props.getScore((function(t,n){if(t)throw new Error("error with score from server");e.setState({showScore:!0,showScoreDetails:!1,score:n.score,taskCount:n.tasksCountWithNoneCheckable,successRateGroup:n.successRateGroup,completedTasks:n.completedTasksWithNoneCheckable,taskStats:g(g({},n.taskStats),{},{unanswered:n.tasksCountWithNoneCheckable-n.completedTasksWithNoneCheckable})})}))}},{key:"handleOnClickGetScoreAssessment",value:function(e){var t=this;this.props.getScore((function(n,a){if(n)throw new Error("error with score from server");t.setState({score:a.score,taskCount:a.tasksCountWithNoneCheckable,successRateGroup:a.successRateGroup,completedTasks:a.completedTasksWithNoneCheckable,taskStats:g(g({},a.taskStats),{},{unanswered:a.tasksCountWithNoneCheckable-a.completedTasksWithNoneCheckable})},(function(){return e()}))}))}},{key:"backToQuestionsPage",value:function(){var e=this;this.setState({showScore:!1,showScoreDetails:!1},(function(){e.props.backToQuestions&&e.props.backToQuestions()}))}},{key:"getTotalAnswersTemplate",value:function(){var e=this,t=this.props.language;return this.statsDisplayByOrder.map((function(n){return e.state.taskStats[n]>0?"nonCheckable"===n?f.default.createElement("div",{key:n,className:"total-answers open"},f.default.createElement("div",{className:"qestion-counter","data-automation-id":"qestion-counter-open"},e.state.taskStats.nonCheckable),f.default.createElement("div",null,f.default.createElement("div",{className:"totals-answers open-questions"},t.OPEN_QUESTIONS),f.default.createElement("div",null,t.OPEN_QUESTIONS_MSG))):f.default.createElement("div",{key:n,className:"total-answers ".concat(n)},f.default.createElement("div",{className:"qestion-counter","data-automation-id":"qestion-counter-".concat(n)},e.state.taskStats[n]),f.default.createElement("div",null,t[n.toUpperCase()])):null}))}},{key:"handleAssesmentFinalScoreClicked",value:function(){this.props.showAssessmentFinalReport?this.handleOnClickGetScoreAssessment(this.openFinalScore):this.setState({showReportNotFinalDialog:!0})}},{key:"handleSubmitAssessmentClicked",value:function(){this.props.handleSubmitAssessmentClicked(),m.default.sendEvent(m.default.TITLES.SUBMIT_ASSESSMENT,m.default.COMPONENTS.ASSESSMENT)}},{key:"renderReportNotFinalDialog",value:function(){var e=this;if(!this.state.showReportNotFinalDialog)return null;var t=this.props.language,n=[{id:"done",text:t.REPORT_NOT_FINAL_DIALOG.DONE,type:h.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.setState({showReportNotFinalDialog:!1})}}];return f.default.createElement(h.default,{theme:h.default.THEMES.LIGHT,title:t.REPORT_NOT_FINAL_DIALOG.TITLE,content:t.REPORT_NOT_FINAL_DIALOG.MESSAGE,actions:n})}},{key:"buildTaskStats",value:function(){var e=this.props.taskCount-this.props.completedTasks;return g(g({},this.props.taskStats),{},{unanswered:e})}},{key:"disableSubmit",value:function(e){this.setState({disableSubmit:e})}}]),n}(f.Component);t.default=k,k.defaultProps={showScore:!1,showScoreDetails:!1,enableAssessmentTryAgain:!1,taskStats:{},handleSubmitAssessmentClicked:function(){},handleAssessmentTryAgainClicked:function(){}}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(40)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(950))),m=r(n(11)),v=r(n(14)),g=r(n(36));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var _={LIGHT:"light",UC:"uc"},y={light:"t2k-app-modal--light",uc:"t2k-app-modal--uc"},k=function(e){(0,c.default)(n,e);var t=E(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onKeyUp=e.onKeyUp.bind((0,u.default)(e)),e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e={},t=this.props,n=t.actions,a=t.secondaryActions;[].concat((0,o.default)(null!=n?n:[]),(0,o.default)(null!=a?a:[])).forEach((function(t){void 0!==t.keyCode&&(e[t.keyCode]=t.onClick)})),Object.keys(e).length&&(this.keyCodes=e,window.addEventListener("keyup",this.onKeyUp))}},{key:"componentWillUnmount",value:function(){this.keyCodes&&window.removeEventListener("keyup",this.onKeyUp)}},{key:"onKeyUp",value:function(e){this.keyCodes&&this.keyCodes[e.keyCode]&&this.keyCodes[e.keyCode]()}},{key:"UNSAFE_componentWillMount",value:function(){h.default.setAppElement("body")}},{key:"render",value:function(){var e=this.props.styleClass,t=n.getDialogTheme(this.props.theme),a=(0,m.default)("t2k-app-modal",{"t2k-app-modal__mobile":v.default.isMobile(),"t2k-app-modal__pc":!v.default.isMobile()},e,n.getDialogThemeClass(t),v.default.getPlatformClasses()),r=(0,m.default)("t2k-app-modal__overlay",this.props.overlayStyleClass),i=this._renderTitleArea(),o=this.props.content||this.props.children?p.default.createElement("div",{className:"t2k-app-modal__content"},this.props.content,this.props.children):"",s=this._renderActionArea(t);return p.default.createElement(h.default,{className:a,overlayClassName:r,isOpen:!0,contentLabel:"Dialog",onRequestClose:this.props.close},i,o,s)}},{key:"_renderTitleArea",value:function(){var e=this.props.close&&"function"==typeof this.props.close?p.default.createElement("div",{onClick:this.props.close,className:"t2k-app-modal__close-button"},p.default.createElement("span",{className:"t2k-app-modal__icon--close"})):null;return p.default.createElement("div",{className:"t2k-app-modal__title-area"},p.default.createElement("div",{className:"t2k-app-modal__title"},this.props.title),e)}},{key:"_renderActionArea",value:function(e){var t=this.props.actions&&this.props.actions.length,n=this.props.secondaryActions&&this.props.secondaryActions.length,a=!!this.props.customActions;return t||n||a?p.default.createElement("div",{className:"t2k-app-modal__actions-area"},this._renderSecondaryActions(e),a&&p.default.createElement("div",{className:"t2k-app-modal__custom-actions"},this.props.customActions),this._renderPrimaryActions(e)):null}},{key:"_renderSecondaryActions",value:function(e){return this.props.secondaryActions&&this.props.secondaryActions.length?p.default.createElement("div",{className:"t2k-app-modal__secondary-actions"},this.props.secondaryActions.map((function(t){return p.default.createElement(g.default,{id:t.id,text:t.text,icon:t.icon,type:t.type,theme:n.getButtonTheme(e),onClick:t.onClick,key:t.id,disabled:t.disabled})}))):null}},{key:"_renderPrimaryActions",value:function(e){return this.props.actions||this.props.actions.length?p.default.createElement("div",{className:"t2k-app-modal__primary-actions"},this.props.actions.map((function(t){return p.default.createElement(g.default,{id:t.id,text:t.text,icon:t.icon,type:t.type,theme:n.getButtonTheme(e),onClick:t.onClick,key:t.id,disabled:t.disabled})}))):null}}],[{key:"getDialogTheme",value:function(e){return y[e]?e:"light"}},{key:"getDialogThemeClass",value:function(e){return y[e]}},{key:"getButtonTheme",value:function(e){var t;return(t={},(0,i.default)(t,n.THEMES.LIGHT,g.default.THEMES.LIGHT),(0,i.default)(t,n.THEMES.UC,g.default.THEMES.LIGHT),t)[e]}}]),n}(p.Component);k.THEMES=_,k.BUTTON_TYPES=g.default.TYPES,k.defaultProps={title:"",content:"",actions:[],secondaryActions:[],styleClass:"",overlayStyleClass:"",theme:_.LIGHT,close:null,children:null,customActions:null};var S=k;t.default=S},,function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.modalContentTypes=void 0;var r=a(n(0)),i=(a(n(2)),a(n(693))),o={STRETCH:1};t.modalContentTypes=o;var s=function(e){switch(e){case o.STRETCH:return"t2i-modal-content-type-stretch";default:return""}};var l=function(e){var t=e.children,n=e.modalContentType,a=e.unmount,o=e.ltr,l=e.hideCloseBtn;return r.default.createElement(i.default,{show:!0,onClose:a},r.default.createElement("div",{className:"t2i-modal-wrapper ".concat(o?"t2k-ltr":"t2k-rtl"," ").concat(l?"hide-close-btn":""," ").concat(s(n))},r.default.createElement("div",{className:"t2i-close-wrapper"},r.default.createElement("div",{className:"pull-right t2i-close t2kInt-icon-delete_close"})),r.default.createElement("div",{className:"t2i-modal-content-wrapper",onClick:function(e){return e.stopPropagation()}},t)))};t.default=l},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0));r(n(2));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.children,a=e.onClose,r=(0,o.default)(e,["show","children","onClose"]);return f.default.createElement("div",(0,i.default)({},r,{className:"t2i-shadowbox ".concat(!t&&"invisible"),onClick:a}),n)}}]),n}(f.Component);t.default=h},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.Hoc=t.POSITION=t.LEVEL=t.Action=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=r(n(2)),h=r(n(204)),m=r(n(1100)),v=r(n(194)),g=r(n(696));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var k=(0,h.default)({add:p.default.func,remove:p.default.func,clear:p.default.func}),S=k.Provider,T=k.Hoc,b=g.default;t.Action=b;t.LEVEL={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"};t.POSITION={TOP_RIGHT:"tr",TOP_LEFT:"tl",TOP_CENTER:"tc",BOTTOM_RIGHT:"br",BOTTOM_LEFT:"bl",BOTTOM_CENTER:"bc"};var C=T;t.Hoc=C;var I=function(e){(0,u.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).add=e.add.bind((0,l.default)(e)),e.clear=e.clear.bind((0,l.default)(e)),e.remove=e.remove.bind((0,l.default)(e)),e._notificationsQueue=[],e._notificationSystemRef=(0,f.createRef)(),e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._schedulePendingNotifications()}},{key:"render",value:function(){var e=this.props.children;return f.default.createElement(S,{add:this.add,remove:this.remove,clear:this.clear},f.default.createElement("div",{className:"notification-provider"},e,f.default.createElement(m.default,{ref:this._notificationSystemRef,style:!1})))}},{key:"add",value:function(e){var t=(0,v.default)(),n={isPending:!0,displayTimeoutId:void 0,options:_(_({},e),{},{uid:t})};if(this._notificationsQueue.length>=3){var a=this._notificationsQueue[0];this.remove(a.options.uid)}return this._notificationsQueue.push(n),this._notificationSystemRef.current&&this._schedulePendingNotifications(),t}},{key:"clear",value:function(){this._notificationSystemRef.current.clearNotifications()}},{key:"remove",value:function(e){var t=this._notificationsQueue.find((function(t){return t.options.uid===e}));if(t){this._notificationsQueue=this._notificationsQueue.filter((function(e){return e!==t}));var n=t.isPending,a=t.displayTimeoutId;n?void 0!==a&&clearTimeout(a):this._notificationSystemRef.current.removeNotification(e)}}},{key:"_displayNotification",value:function(e){var t=e.uid,a=e.message,r=e.level,i=e.position,o=e.autoDismiss,s=void 0===o?5:o,l=e.notificationEmbeddedComponents;this._notificationSystemRef.current.addNotification({uid:t,title:void 0,message:a,level:r,position:i,autoDismiss:s,dismissible:!1,children:n.renderNotificationCustomContent(l)})}},{key:"_scheduleQueuedNotification",value:function(e,t,n){var a=this;return setTimeout((function(){a._displayNotification(e.options),n()}),t)}},{key:"_schedulePendingNotifications",value:function(){var e=this,t=0;this._notificationsQueue.filter((function(e){return e.isPending})).forEach((function(n){var a=n.displayTimeoutId;void 0!==a&&clearTimeout(a);var r=e._scheduleQueuedNotification(n,t,(function(){Object.assign(n,{displayTimeoutId:void 0,isPending:!1})}));Object.assign(n,{displayTimeoutId:r}),t+=1e3}))}}],[{key:"renderNotificationCustomContent",value:function(e){return f.default.createElement("div",{className:"notification-custom-content"},f.default.createElement("div",{className:"notification-custom-actions"}," ",e," "))}}]),n}(f.Component);t.Provider=I,I.defaultProps={children:void 0}},,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(68)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0));r(n(2));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.useDivider,a=(0,o.default)(e,["children","useDivider"]);return f.default.createElement("div",(0,i.default)({},a,{className:"notification-custom-action"}),n&&f.default.createElement("div",{"data-unittest-id":"notification-custom-action-divider",className:"notification-custom-action-divider"}),f.default.createElement("div",{"data-unittest-id":"notification-custom-action-content",className:"notification-custom-action-content"},t))}}]),n}(f.Component);t.default=h,h.defaultProps={useDivider:!0}},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(699));n(700);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),n(118)),h=r(n(58));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).mode=n.mode.idle,e.prevPoints=[],e.gestureStart=e.gestureStart.bind((0,l.default)(e)),e.resetValues=e.resetValues.bind((0,l.default)(e)),e.handleTouchStart=e.handleTouchStart.bind((0,l.default)(e)),e.handleTouchEnd=e.handleTouchEnd.bind((0,l.default)(e)),e.handleTouchMove=e.handleTouchMove.bind((0,l.default)(e)),e.handleSlideNext=e.handleSlideNext.bind((0,l.default)(e)),e.showBlockingDialog=e.showBlockingDialog.bind((0,l.default)(e)),e.slideNext=e.slideNext.bind((0,l.default)(e)),e.slidePrev=e.slidePrev.bind((0,l.default)(e)),e.getBlockingQuestionDialogActions=e.getBlockingQuestionDialogActions.bind((0,l.default)(e)),e._slideIndex=e.props.slideStartIndex,e}return(0,s.default)(n,[{key:"getBlockingQuestionDialogActions",value:function(){var e=this,t=this.props,n=t.language,a=t.hideBlockingQuestionDialog;return[{id:"back",text:n.taskGroup.BLOCKING_QUESTIONS_DIALOG.BACK,type:h.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.slideToIndex(e._slideIndex),a()}},{id:"yes",text:n.taskGroup.BLOCKING_QUESTIONS_DIALOG.CONFIRM,type:h.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.slideNext(),a()}}]}},{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("gesturestart",this.gestureStart)}},{key:"componentDidMount",value:function(){this._sliderRef.addEventListener("touchstart",this.handleTouchStart,!1,{passive:!0}),this.slideToIndex(this._slideIndex)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("gesturestart",this.gestureStart),this._hasWindowEvents&&this.removeWindowEventListeners()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.showNavigation,r=t.ltr,i=t.isBlockingQuestionMode;return f.default.createElement("div",{className:"t2i-swiper",ref:function(t){e._containerRef=t}},f.default.createElement("div",{className:"t2i-swiper-slider-container"},f.default.createElement("div",{className:"t2i-swiper-slider",style:{width:"".concat(100*f.default.Children.count(n),"%")},ref:function(t){e._sliderRef=t}},this.renderChildren())),a&&f.default.createElement("div",{className:"t2i-swiper-navigation"},!i&&f.default.createElement("span",{ref:function(t){e._navigateBackRef=t},onClick:this.slidePrev,className:"t2i-swiper-navigate t2kInt-icon-chevron-".concat(r?"left":"right")}),f.default.createElement("span",{className:"t2i-swiper-navigation-filler"}),f.default.createElement("span",{ref:function(t){e._navigateForwardRef=t},onClick:this.handleSlideNext,className:"t2i-swiper-navigate t2kInt-icon-chevron-".concat(r?"right":"left")})))}},{key:"showBlockingDialog",value:function(){var e=this.props,t=e.isBlockingQuestionMode,n=e.isInteractionBlocked,a=e.showBlockingQuestionDialog;return!(!t||!n())&&(a(this.getBlockingQuestionDialogActions()),!0)}},{key:"handleSlideNext",value:function(){this.showBlockingDialog()||this.slideNext()}},{key:"renderChildren",value:function(){return this.props.lazyRendering?this.lazyRender():this.nonLazyRender()}},{key:"nonLazyRender",value:function(){return f.default.Children.map(this.props.children,(function(e){return f.default.createElement("div",{className:"t2i-swiper-wrapper"},e)}))}},{key:"lazyRender",value:function(){var e=[this._slideIndex-1,this._slideIndex,this._slideIndex+1];return f.default.Children.map(this.props.children,(function(t,n){return-1!==e.indexOf(n)?f.default.createElement("div",{className:"t2i-swiper-wrapper"},t):f.default.createElement("div",{className:"t2i-swiper-wrapper"})}))}},{key:"gestureStart",value:function(e){this._zoomInProgress=!0,e.stopPropagation()}},{key:"addWindowEventListeners",value:function(){this._hasWindowEvents=!0,window.addEventListener("touchend",this.handleTouchEnd,!1,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,!1,{passive:!0})}},{key:"removeWindowEventListeners",value:function(){this._hasWindowEvents=!1,window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchmove",this.handleTouchMove)}},{key:"setXForSpeedCalculation",value:function(e){var t={time:Date.now(),x:e},n=(0,i.default)(this.prevPoints,1)[0],a=void 0===n?t:n;this.prevPoints=[t,a]}},{key:"getSpeedOfX",value:function(){var e=(0,i.default)(this.prevPoints,2),t=e[0],a=e[1];return n.getSpeedOfXByPoints(t,a)}},{key:"resetValues",value:function(){this._zoomInProgress=!1,this.startingX=null,this.startingY=null,this.mode=n.mode.idle,this.removeWindowEventListeners()}},{key:"handleTouchStart",value:function(e){var t=e.target.tagName,a=n.ignoreSwipeOnTags.indexOf(t)>-1;if(this.mode===n.mode.idle&&!this._zoomInProgress&&!a){var r=e.touches[0],i=r.clientX,o=r.clientY;this.startingX=i,this.lastX=i,this.startingY=o,this.mode=n.mode.waitToReachThreshhold,this.setXForSpeedCalculation(i),this._sliderRef.classList.add("t2i-swipper-no-transition"),this.addWindowEventListeners()}}},{key:"handleTouchMove",value:function(e){var t=this.props.isBlockingQuestionMode,a=e.touches[0],r=a.clientX,i=a.clientY,o=r-this.startingX;if(!this._zoomInProgress){if(t&&o>0)return void this.resetValues();if(o<-80&&this.showBlockingDialog())return}if(!this._zoomInProgress&&-1!==[n.mode.waitToReachThreshhold,n.mode.followFinger].indexOf(this.mode))if(this.lastX=r,this.setXForSpeedCalculation(r),this.mode===n.mode.waitToReachThreshhold){var s=i-this.startingY;Math.abs(o)>=n.pixelsThreshhold&&(this.startingX=r,this.startingY=i,this.mode=n.mode.followFinger),Math.abs(s)>=n.pixelsThreshhold&&this.resetValues()}else e.preventDefault(),this.setSliderLeftMidSwipe(o)}},{key:"handleTouchEnd",value:function(e){var t=this._slideIndex,a=f.default.Children.count(this.props.children)-1;if(!(this._zoomInProgress&&e.touches.length>0)){var r=this.lastX,i=this._containerRef.clientWidth,o=r-this.startingX;if(o<0&&this.showBlockingDialog())this.handleSlideNext();else{var s=Math.floor(Math.abs(o)/i);if(Math.abs(o%i)>=n.nextSlideRatioThreshold*i&&s++,0===s){var l=this.getSpeedOfX();Math.abs(l)>=n.nextSlideSpeedThreshold&&s++}o>0&&(s*=-1),this.props.ltr||(s*=-1),(t+=s)<0?t=0:t>a&&(t=a),this.slideToIndex(t)}}this._sliderRef.classList.remove("t2i-swipper-no-transition"),this.resetValues()}},{key:"slideNext",value:function(){this.slideToIndex(this._slideIndex+1)}},{key:"slidePrev",value:function(){this.slideToIndex(this._slideIndex-1)}},{key:"slideToIndex",value:function(e){var t=this.props.ltr,n=this._slideIndex;this._slideIndex=e,this._sliderRef.style.transform="translate3d(".concat(t?"-":"").concat(100/f.default.Children.count(this.props.children)*e,"%, 0, 0)");var a=this._navigateBackRef,r=this._navigateForwardRef;if(a){var i=0===e;a.classList.toggle("disabled",i)}if(r){var o=e===f.default.Children.count(this.props.children)-1;r.classList.toggle("disabled",o)}this.props.onChildChange&&e!==n&&this.props.onChildChange(e,n)}},{key:"setSliderLeftMidSwipe",value:function(e){var t=this.props.ltr;this._sliderRef.style.transform="translate3d(calc(".concat(t?"-":"").concat(100/f.default.Children.count(this.props.children)*this._slideIndex,"% + ").concat(e,"px), 0, 0)")}},{key:"slideIndex",get:function(){return this._slideIndex}}],[{key:"getSpeedOfXByPoints",value:function(e,t){return(t.x-e.x)/(t.time-e.time)}}]),n}(f.Component);v.ignoreSwipeOnTags=["AUDIO","VIDEO"],v.pixelsThreshhold=15,v.nextSlideRatioThreshold=.25,v.nextSlideSpeedThreshold=1,v.mode={idle:0,waitToReachThreshhold:1,followFinger:2},v.defaultProps={ltr:!0,slideStartIndex:0,onChildChange:void 0,language:{},isInteractionBlocked:function(){return!1},showBlockingQuestionDialog:function(){},hideBlockingQuestionDialog:function(){},showNavigation:!1,isBlockingQuestionMode:!1,children:void 0,lazyRendering:!1};var g=(0,p.ComponentHoc)((function(e){return{ltr:e.ltr}}),{withRef:!0})(v);t.default=g},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(40)),i=a(n(3)),o=a(n(4)),s=a(n(6)),l=a(n(8)),u=a(n(7)),c=a(n(0)),d=(a(n(2)),a(n(948))),f=a(n(977));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._drake=void 0,e._acceptedDragHandlers={},e.state={currentlyDraggedHandlerId:void 0},e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this;this._drake=(0,d.default)([this._itemsContainerRef],{moves:function(t,a,r){var i=n.getDragHandlerId(t);return(e._acceptedDragHandlers[i]||[]).some((function(e){return e.contains(r)}))},direction:"vertical",revertOnSpill:!0,mirrorContainer:this._mirrorContainerRef});var t=this._drake;this.scroll=(0,f.default)([document.querySelector(".task-group-scroll")],{margin:20,maxSpeed:5,scrollWhenOutside:!0,autoScroll:function(){return this.down&&t.dragging}}),this._iniateEvents()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this._drake.cancel()}},{key:"componentWillUnmount",value:function(){this._drake.cancel()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.order,i=this.state.currentlyDraggedHandlerId,o=c.default.Children.toArray(n),s=(0,r.default)(o);return c.default.createElement("div",{className:"t2i-sortable"},c.default.createElement("div",{className:"t2i-sortable-container",ref:function(t){e._itemsContainerRef=t}},o.sort((function(e,t){return a.indexOf(s.indexOf(e))-a.indexOf(s.indexOf(t))})).map((function(t){return c.default.createElement("div",{key:"draggable_".concat(t.key),"data-drag-handler-map-id":t.key,className:"t2i-sortable-item"},c.default.cloneElement(t,{isDragging:i===t.key,registerDragHandler:function(n){e.registerDragHandler(t.key,n)},unregisterDragHandler:function(n){e.registerDragHandler(t.key,n)}}))}))),c.default.createElement("div",{className:"t2i-sortable-mirror-container",ref:function(t){e._mirrorContainerRef=t}}))}},{key:"unregisterDragHandler",value:function(e,t){var n=this._acceptedDragHandlers[e];n.splice(n.indexOf(t),1)}},{key:"registerDragHandler",value:function(e,t){this._acceptedDragHandlers[e]||(this._acceptedDragHandlers[e]=[]),this._acceptedDragHandlers[e].push(t)}},{key:"_iniateEvents",value:function(){var e=this,t=this.props,a=t.onOrderChangeOnlyChangedIndexes,r=t.onOrderChange;this._drake.on("drag",(function(t){var a=0;a+=t.clientHeight-2,e._itemsContainerRef.style.paddingBottom="".concat(a,"px");var r=n.getDragHandlerId(t);e.setState({currentlyDraggedHandlerId:r})})),this._drake.on("drop",(function(t){var n=e._getDOMIndexOfChild(t);e._drake.cancel();var i=e._getDOMIndexOfChild(t),o=e._buildNewOrderByIndexChange(i,n);a&&a(i,n),r&&r(o)})),this._drake.on("dragend",(function(){e._itemsContainerRef.style.paddingBottom=0,e.setState({currentlyDraggedHandlerId:void 0})}))}},{key:"_getDOMIndexOfChild",value:function(e){return Array.from(this._itemsContainerRef.childNodes).indexOf(e)}},{key:"_buildNewOrderByIndexChange",value:function(e,t){var n=this.props.order,a=n.filter((function(t,n){return n!==e}));return a.splice(t,0,n[e]),a}}],[{key:"getDragHandlerId",value:function(e){return e.getAttribute("data-drag-handler-map-id")}}]),n}(c.default.Component);t.default=h},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=r(n(11)),h=r(n(505)),m=r(n(2)),v=r(n(58)),g=r(n(400)),E=r(n(611)),_=r(n(176)),y=r(n(13)),k=r(n(41)),S=r(n(36)),T=r(n(439)),b=r(n(227)),C=r(n(18)),I=r(n(60)),O=n(74);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}n(440);var N=0,w=1,R=2,P=function(e){(0,u.default)(n,e);var t=A(n);function n(e){var a;(0,o.default)(this,n),a=t.call(this,e);var r=e.defaultValues,i=e.locale,s=C.default.getAvailableContentLocales(),u=i;return-1===s.indexOf(u)&&(u=s[0]),a.state={language:r.itemLanguage||u,imageUrl:r.imageUrl,mode:N,uploadProgress:!1,searchOpen:!0,lastSearchString:r.itemName,errorText:""},a._onUploadDone=a._onUploadDone.bind((0,l.default)(a)),a._handleUploadProgress=a._handleUploadProgress.bind((0,l.default)(a)),a._handleClose=a._handleClose.bind((0,l.default)(a)),a._toggleImageSearch=a._toggleImageSearch.bind((0,l.default)(a)),a._handleImageSuggestionSelection=a._handleImageSuggestionSelection.bind((0,l.default)(a)),a._handleFileUploadChange=a._handleFileUploadChange.bind((0,l.default)(a)),a._handleImageCropped=a._handleImageCropped.bind((0,l.default)(a)),a._handleImagePicked=a._handleImagePicked.bind((0,l.default)(a)),a._uploadImageIfAble=a._uploadImageIfAble.bind((0,l.default)(a)),a._handleDeleteImage=a._handleDeleteImage.bind((0,l.default)(a)),a._handleCancelCropper=a._handleCancelCropper.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props.language,t=e.IMAGE_PICKER,n=e.CROPPER,a=[{id:"done",text:t.DONE_BTN,type:S.default.TYPES.PRIMARY,disabled:!(this.state.mode===N),onClick:this._handleImagePicked}];this.state.mode===w&&(a=[{id:"cancel",text:n.CANCEL_BTN,type:S.default.TYPES.SECONDARY,onClick:this._handleCancelCropper},{id:"crop",text:n.CROP_BTN,type:S.default.TYPES.PRIMARY,onClick:this._handleImageCropped}]);var r=(0,p.default)("image-picker-modal",{"cropper-mode":this.state.mode===w}),i=this.props.useSimpleModal?g.default:v.default;return f.default.createElement(i,{styleClass:r,title:this.state.mode===w?n.TITLE:t.TITLE,content:this.state.mode===w?this._renderCropper():this._renderContent(),actions:a,close:this.state.mode!==w?this._handleClose:null})}},{key:"_handleCancelCropper",value:function(){k.default.sendEvent(k.default.TITLES.CROP_IMAGE,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"cancel")),this.setState({imageUrl:this.previousImgUrl,selectedSuggestionImage:this.previousSelectedSuggestionImage,mode:N,uploadProgress:!1})}},{key:"_renderCropper",value:function(){var e=this,t=this.props,n=t.cropToSquare,a=t.minCropSize,r=t.cropperCanvasStyle,i=t.language.CROPPER;return f.default.createElement("div",{"data-automation-id":"image-cropper",className:"image-picker-modal__image-cropper"},f.default.createElement("div",{className:"image-picker-modal__image-cropper--text"},i.INSTRUCTIONS),f.default.createElement("div",{className:"image-picker-modal__image-cropper--content"},f.default.createElement(h.default,{onInitialized:function(t){e._cropperRef=t},src:this._source,style:r,minCropBoxWidth:a.width,minCropBoxHeight:a.height,minContainerWidth:r.width,minContainerHeight:r.height,minCanvasWidth:r.width,minCanvasHeight:r.height,zoomOnWheel:!1,guides:!1,toggleDragModeOnDblclick:!1,viewMode:2,autoCropArea:1,initialAspectRatio:n?1:a.width/a.height})))}},{key:"_handleClose",value:function(){this.state.mode===R&&(this._abortUpload(),this._abortUpload=void 0),k.default.sendEvent(k.default.TITLES.INTERACT_WITH_CREATE_INTERACTION_DIALOG,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"exit")),this.props.onCancel()}},{key:"validateFileType",value:function(e){var t=this.props.validTypes,a=n.getFileType(e);return!!a&&!!t.join(",").match(a)}},{key:"validateFileSize",value:function(e){var t=e.size,n=e.type;return!this.props.limitationConfiguration||!!this.props.limitationConfiguration[n]&&t/1024/1024<=this.props.limitationConfiguration[n]}},{key:"_handleImageFileUpload",value:function(e,t){var n=this,a=this.props.uploadFile;this.setState({mode:R,uploadProgress:0},(function(){n._abortUpload=a(e,n._handleUploadProgress,n._onUploadDone.bind(n,e),t)}))}},{key:"_handleImageCropped",value:function(){var e=this.props.minCropSize,t=Object.assign({},{imageSmoothingEnabled:!0,imageSmoothingQuality:"high"},e),n=this._cropperRef.getCroppedCanvas(t).toDataURL(),a=_.default.dataUrlToFile(n);this._handleImageFileUpload(a,!0)}},{key:"_handleImagePicked",value:function(){this.state.imageUrl&&k.default.sendEvent(k.default.TITLES.INTERACT_WITH_CREATE_INTERACTION_DIALOG,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"done")),this.props.onSubmit(this.state.imageUrl)}},{key:"_handleUploadProgress",value:function(e){this.setState({uploadProgress:e})}},{key:"_onUploadDone",value:function(e,t,n){var a=this.props.allowCropping;if(this._source=void 0,t)throw t;a&&k.default.sendEvent(k.default.TITLES.CROP_IMAGE,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"done"));var r=y.default.getAssetPath(n);this.setState({imageUrl:r,mode:N,uploadProgress:!1})}},{key:"_handleFileUploadChange",value:function(e){var t=this,n=this.props.allowCropping;if(e.target.files[0]){var a=e.target.files[0];if(this.validateFileType(a))if(this.validateFileSize(a)){var r=new FileReader;r.readAsDataURL(a),r.onload=function(){t._source=r.result,n?t.setState({mode:w,errorText:""}):t._handleImageFileUpload(a,!1)},r.onerror=function(){t.setState({mode:N})}}else{var i=this.props.limitationConfiguration[a.type];this.setState({errorText:C.default.translate("interaction.IMAGE.IMAGE_PICKER.ERROR.FILE_SIZE",{fileSizeLimit:i})})}else this.setState({errorText:C.default.translate("interaction.IMAGE.IMAGE_PICKER.ERROR.FILE_TYPE")})}}},{key:"_renderContent",value:function(){return f.default.createElement("div",{className:"image-picker-modal__content"},this._renderImageSection(),this.state.searchOpen?this._renderImageSuggestionSection():null,this.state.errorText?f.default.createElement("div",{className:"error-message"},this.state.errorText):null)}},{key:"_toggleImageSearch",value:function(){k.default.sendEvent(k.default.TITLES.INTERACT_WITH_CREATE_INTERACTION_DIALOG,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,this.state.searchOpen?"exit_search":"search")),this.setState({searchOpen:!this.state.searchOpen})}},{key:"_uploadImageIfAble",value:function(){this.state.mode===R||(k.default.sendEvent(k.default.TITLES.INTERACT_WITH_CREATE_INTERACTION_DIALOG,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"upload_image")),this._uploadImageRef.click())}},{key:"_handleDeleteImage",value:function(){var e=this;k.default.sendEvent(k.default.TITLES.INTERACT_WITH_CREATE_INTERACTION_DIALOG,k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},k.default.PARAMS.USER_ACTION,"deleted")),this.setState({mode:N,imageUrl:void 0,uploadProgress:!1,selectedSuggestionImage:null},(function(){e._uploadImageRef.value="",e._source=void 0}))}},{key:"_renderImageSection",value:function(){var e=this,t=this.state.mode===R,n=!!this.state.imageUrl;return f.default.createElement("div",{"data-automation-id":"input-form-image",className:"image-picker-modal__image-section"},f.default.createElement("input",{type:"file",accept:this.props.validTypes.join(","),className:"input-form-image-input",ref:function(t){e._uploadImageRef=t},onChange:function(t){e._handleFileUploadChange(t)}}),f.default.createElement("div",{onClick:this._uploadImageIfAble,"data-automation-id":"image-wrapper",className:"image-wrapper"},this._renderImage()),f.default.createElement("div",{className:"btn-wrapper"},f.default.createElement("span",{onClick:this._toggleImageSearch,"data-automation-id":"search-btn-wrapper",className:"search-btn-wrapper ".concat(this.state.searchOpen?" disabled":"")},f.default.createElement(O.SearchIcon,null)),f.default.createElement("span",{"data-automation-id":"upload-btn-wrapper",className:"upload-btn-wrapper",onClick:this._uploadImageIfAble},f.default.createElement(O.UploadIcon,null)),f.default.createElement("span",{onClick:n&&!t?this._handleDeleteImage:void 0,"data-automation-id":"delete-btn-wrapper",className:"delete-btn-wrapper"},f.default.createElement(b.default,null))))}},{key:"_renderImage",value:function(){return this.state.mode===R?f.default.createElement(I.default,{size:I.default.Sizes.SMALL}):this.state.imageUrl?f.default.createElement("img",{className:"image",alt:"selected-image",src:this.state.imageUrl}):f.default.createElement("div",{className:"image image-empty"},f.default.createElement("span",{className:"image-icon"},f.default.createElement(T.default,null)))}},{key:"_renderImageSuggestionSection",value:function(){return f.default.createElement("div",{className:"image-suggestion-search"},f.default.createElement(E.default,{searchString:this.state.lastSearchString,onImgSelected:this._handleImageSuggestionSelection,selectedImageId:this.state.selectedSuggestionImage,mixPanelComponent:k.default.COMPONENTS.CREATE_INTERACTION_DIALOG,focusInputOnMount:!1,selectedLanguage:this.state.language}),f.default.createElement("div",{className:"arrow-after"}))}},{key:"_handleImageSuggestionSelection",value:function(e){var t=this,n=this.props.allowCropping,a=new XMLHttpRequest,r=new FileReader;this.previousImgUrl=this.state.imageUrl,this.previousSelectedSuggestionImage=this.state.selectedSuggestionImage,a.open("GET",e.url,!0),a.responseType="blob",a.onload=function(){r.readAsDataURL(a.response),r.onload=function(a){if(t._source=a.target.result,n)t.setState({mode:w,imageUrl:e.url,selectedSuggestionImage:e.id,lastSearchString:e.searchString});else{var r=_.default.dataUrlToFile(a.target.result);t._handleImageFileUpload(r,!0)}}},a.send()}}],[{key:"getFileType",value:function(e){var t=e.type;return t||(t=e.name.substring(e.name.lastIndexOf(".")+1)),t}}]),n}(f.Component);P.defaultProps={locale:"en_US",allowCropping:!1,cropToSquare:!1,defaultValues:m.default.shape({imageUrl:"",itemLanguage:void 0,itemName:""}),minCropSize:{width:300,height:200},cropperCanvasStyle:{width:450,height:350,margin:"auto"},useSimpleModal:!0};var M=P;t.default=M},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(14)),p=r(n(36));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.styleClass,t=(0,d.default)("t2k-app-modal",{"t2k-app-modal__mobile":f.default.isMobile(),"t2k-app-modal__pc":!f.default.isMobile()},e,f.default.getPlatformClasses()),n=this._renderTitleArea(),a=this.props.content||this.props.children?c.default.createElement("div",{className:"t2k-app-modal__content"},this.props.content,this.props.children):"",r=this._renderActionArea();return c.default.createElement("div",{className:"simple-modal"},c.default.createElement("div",{className:t},n,a,r))}},{key:"_renderTitleArea",value:function(){var e=this.props.close&&"function"==typeof this.props.close?c.default.createElement("div",{onClick:this.props.close,className:"t2k-app-modal__close-button","data-automation-id":"close-button"},c.default.createElement("span",{className:"t2k-app-modal__icon--close"})):null;return c.default.createElement("div",{className:"t2k-app-modal__title-area"},c.default.createElement("div",{className:"t2k-app-modal__title"},this.props.title),e)}},{key:"_renderActionArea",value:function(){return this.props.actions&&this.props.actions.length?c.default.createElement("div",{className:"t2k-app-modal__actions-area"},this._renderActions()):null}},{key:"_renderActions",value:function(){return this.props.actions||this.props.actions.length?c.default.createElement("div",{className:"t2k-app-modal__actions"},this.props.actions.map((function(e){return c.default.createElement(p.default,{id:e.id,text:e.text,icon:e.icon,type:e.type,onClick:e.onClick,key:e.id,disabled:e.disabled})}))):null}}]),n}(c.Component);t.default=m},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(706))),h=r(n(327)),m=r(n(603)),v=r(n(237)),g=r(n(18)),E=r(n(713)),_=n(74),y=r(n(142));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var S=function(e){(0,u.default)(n,e);var t=k(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={searchString:a.props.searchString,userSearchString:null,images:[],selectedImageId:a.props.selectedImageId,searchLanguage:a.props.selectedLanguage,outerSelectedLanguage:a.props.selectedLanguage},a.handleSearchChange=a._handleSearchChange.bind((0,l.default)(a)),a.handleSelectedLanguageChange=a._handleSelectedLanguageChange.bind((0,l.default)(a)),a.selectImage=a.selectImage.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.searchImages(this.props.searchString)}},{key:"componentDidUpdate",value:function(e,t){var n;this.state.searchLanguage!==t.searchLanguage&&(n=this.state.userSearchString||this.state.searchString),this.props.searchString!==e.searchString&&this.props.searchString!==t.searchString&&this.debounceSearchStringChange(this.props.searchString),void 0!==n&&this.searchImages(n)}},{key:"debounceSearchStringChange",value:function(e){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){return t.searchImages(e.trim())}),700)}},{key:"render",value:function(){return f.default.createElement("div",{className:"image-search"},f.default.createElement("div",{className:"search-area"},f.default.createElement(v.default,{searchString:this.state.searchString,searchPlaceholder:g.default.translate("image.suggestion.search.placeholder"),minSearchLength:this.props.minSearchLength,searchChanged:this.handleSearchChange,onInputFocus:this.handleInputFocus,focusInputOnMount:this.props.focusInputOnMount}),f.default.createElement(m.default,{className:"image-search-select-language",options:[{id:"en_US",label:"EN",selected:-1!==["en_US","he_IL","ar","am"].indexOf(this.state.searchLanguage)},{id:"es_MX",label:"ES",selected:"es_MX"===this.state.searchLanguage},{id:"pt_BR",label:"PT",selected:"pt_BR"===this.state.searchLanguage},{id:"jp_JP",label:"JP",selected:"jp_JP"===this.state.searchLanguage},{id:"cn_CN",label:"CN",selected:"cn_CN"===this.state.searchLanguage},{id:"vi_VN",label:"VN",selected:"vi_VN"===this.state.searchLanguage},{id:"it_IT",label:"IT",selected:"it_IT"===this.state.searchLanguage},{id:"de_DE",label:"DE",selected:"de_DE"===this.state.searchLanguage},{id:"ru_RU",label:"RU",selected:"ru_RU"===this.state.searchLanguage},{id:"nl_NL",label:"NL",selected:"nl_NL"===this.state.searchLanguage},{id:"fr_FR",label:"FR",selected:"fr_FR"===this.state.searchLanguage},{id:"ro_RO",label:"RO",selected:"ro_RO"===this.state.searchLanguage},{id:"ko_KR",label:"KO",selected:"ko_KR"===this.state.searchLanguage},{id:"zh_TW",label:"ZH",selected:"zh_TW"===this.state.searchLanguage},{id:"hu_HU",label:"HU",selected:"hu_HU"===this.state.searchLanguage},{id:"pl_PL",label:"PL",selected:"pl_PL"===this.state.searchLanguage},{id:"fi_FI",label:"FI",selected:"fi_FI"===this.state.searchLanguage},{id:"th_TH",label:"TH",selected:"th_TH"===this.state.searchLanguage}],onChange:this.handleSelectedLanguageChange,ignoreWidth:!0,noBorder:!0,showOptionsArrow:!0,hideSelectedFromOptionsList:!0})),f.default.createElement("div",{className:"results-area"},this.renderResults()),f.default.createElement("div",{className:"footer-area"},f.default.createElement(h.default,{tooltip:g.default.translate("image.suggestion.allow.commercial.use")},f.default.createElement(_.InfoIcon,null))))}},{key:"_handleSearchChange",value:function(e){var t;y.default.sendEvent(y.default.TITLES.SEARCH_IMAGES,this.props.mixPanelComponent,(t={},(0,i.default)(t,y.default.PARAMS.USER_ACTION,"type"),(0,i.default)(t,y.default.PARAMS.NAME,e),t)),this.setState({userSearchString:e}),this.searchImages(e)}},{key:"_handleSelectedLanguageChange",value:function(e){this.setState({searchLanguage:e.id})}},{key:"searchImages",value:function(e){var t=this;p.default.searchImages(e,this.state.searchLanguage).then((function(e){t.setState({images:e.images})})).catch((function(){t.setState({images:[]})}))}},{key:"renderResults",value:function(){var e=this;return this.state.images&&0!==this.state.images.length?f.default.createElement("div",{className:"search-image-preview-results"},this.state.images.map((function(t){return f.default.createElement(E.default,{selected:e.state.selectedImageId===t.id,onClick:e.selectImage,image:t})}),this)):n.renderZeroState()}},{key:"selectImage",value:function(e){y.default.sendEvent(y.default.TITLES.SEARCH_IMAGES,this.props.mixPanelComponent,(0,i.default)({},y.default.PARAMS.USER_ACTION,"select_image_from_search")),this.props.onImgSelected({url:e.webformatURL,id:e.id,searchString:this.state.userSearchString?this.state.userSearchString:this.state.searchString})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return"string"==typeof e.searchString&&e.searchString!==t.searchString&&(n.searchString=e.searchString),e.selectedImageId!==t.selectedImageId&&(n.selectedImageId=e.selectedImageId),e.selectedLanguage!==t.outerSelectedLanguage&&(n.searchLanguage=e.selectedLanguage,n.outerSelectedLanguage=e.selectedLanguage,-1!==["he_IL","ar","am"].indexOf(e.selectedLanguage)&&(n.searchLanguage="en_US")),0===Object.keys(n).length?null:n}},{key:"renderZeroState",value:function(){return f.default.createElement("div",{className:"zero-state"},g.default.translate("image.suggestion.search.none.found"))}}]),n}(f.Component);t.default=S,S.defaultProps={searchString:"",minSearchLength:1,focusInputOnMount:!0,selectedImageId:null,onImgSelected:function(){},mixPanelComponent:"",selectedLanguage:"en_US"}},function(e,t,n){"use strict";(function(e){var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(14)),s=new(function(){function t(){(0,r.default)(this,t),this.pixabayURL="https://pixabay.com/api/"}return(0,i.default)(t,null,[{key:"extractImagesDataFromResponse",value:function(e,t,n){var a={images:[],hasNext:t*n<e.totalHits};return e.hits.forEach((function(e){var t={imageHeight:e.imageHeight,imageWidth:e.imageWidth,smallImageURL:e.previewURL,largeImageUrl:e.largeImageURL,webformatURL:e.webformatURL,id:e.id};a.images.push(t)})),a}},{key:"getSearchLanguageFromLocale",value:function(e){switch(e){case"cn_CN":return"cn";case"es_MX":return"es";case"jp_JP":return"ja";case"pt_BR":return"pt";case"vi_VN":return"vi";case"it_IT":return"it";case"de_DE":return"de";case"ru_RU":return"ru";case"nl_NL":return"nl";case"fr_FR":return"fr";case"ro_RO":return"ro";case"ko_KR":return"ko";case"zh_TW":return"zh";case"hu_HU":return"hu";case"pl_PL":return"pl";case"fi_FI":return"fi";case"th_TH":return"th";case"he_IL":case"en_US":case"ar":case"am":default:return"en"}}}]),(0,i.default)(t,[{key:"searchImages",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_US",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,s=t.generatePixabayUrlParams(n,!0,i,r,a),l=this.pixabayURL+"".concat(o.default.jsonToQueryParams(s));return e(l).then((function(e){return e.json()})).then((function(e){return Promise.resolve(t.extractImagesDataFromResponse(e,i,r))})).catch((function(e){if(429===e.status)return Promise.reject("API number of searches per hour limit exceeded");throw new Error(e)}))}}],[{key:"generatePixabayUrlParams",value:function(e,n,a,r,i){var s=t.getSearchLanguageFromLocale(i);return{key:o.default.getAppdata().appConf.pixabayApiKey,per_page:a,safesearch:n,q:e.replace(/ /g,"|"),page:r,lang:s}}}]),t}());t.default=s}).call(this,n(512))},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(202))),p=r(n(14));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._showTooltip=a._toggleTooltip.bind((0,o.default)(a),!0),a._hideTooltip=a._toggleTooltip.bind((0,o.default)(a),!1),a.state={showTooltip:!1},a}return(0,s.default)(n,null,[{key:"getParentOffsets",value:function(e,t){var n=e.getBoundingClientRect();return n={top:n.top,bottom:n.bottom+t,left:n.left,right:n.right,height:n.height+t,width:n.width}}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this;return d.default.createElement("span",{className:"text-tooltip-wrapper"},d.default.createElement("span",{className:"text-tooltip-wrapper__content",ref:function(t){e._contentRef=t},onMouseEnter:p.default.isMobile()?void 0:this._showTooltip,onMouseLeave:p.default.isMobile()?void 0:this._hideTooltip,onClick:p.default.isMobile()?void 0:this._hideTooltip},this.props.children),this.state.showTooltip?this._getTooltip(this.props.tooltip,this._contentRef):"")}},{key:"_toggleTooltip",value:function(e){this.setState({showTooltip:e})}},{key:"_getTooltip",value:function(e,t){return d.default.createElement(f.default,{content:e,parentOffsets:n.getParentOffsets(t,this.props.lowerBy),position:"bottom"})}}]),n}(d.Component);m.defaultProps={lowerBy:0};var v=m;t.default=v},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),n(75));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={contentStyles:{},arrowStyles:{},arrowDirection:e.position},a}return(0,o.default)(n,null,[{key:"_fitInVerticalBounds",value:function(e,t){return Math.min(Math.max(e,0),window.innerHeight-t)}},{key:"_fitInHorizontalBounds",value:function(e,t){return Math.min(Math.max(e,0),window.innerWidth-t)}},{key:"_onTooltipWrapperClick",value:function(e){e.stopPropagation()}}]),(0,o.default)(n,[{key:"componentDidMount",value:function(){this._updatePositionData(this.props.position)}},{key:"render",value:function(){var e=this,t=this.props.tooltipClasses||"",a=this.props.clickedOutside?c.default.createElement("div",{className:"tooltip__mask",onClick:this.props.clickedOutside,onTouchStart:this.props.clickedOutside}):"";return c.default.createElement("div",{className:"tooltip ".concat(t)},a,c.default.createElement("div",{className:"tooltip__arrow--".concat(this.state.arrowDirection),ref:function(t){e._arrow=t},style:this.state.arrowStyles}),c.default.createElement("div",{className:"tooltip__wrapper",ref:function(t){e._content=t},style:this.state.contentStyles,onClick:n._onTooltipWrapperClick},c.default.createElement("div",{className:"tooltip__content"},this.props.content)))}},{key:"_updatePositionData",value:function(e){var t,a=this._content.getBoundingClientRect(),r=this._arrow.getBoundingClientRect(),i={},o=this.props.parentOffsets.top+this.props.parentOffsets.height/2,s=this.props.parentOffsets.left+this.props.parentOffsets.width/2;switch(e){case"left":i.arrowStyles={top:o-r.height/2,left:this.props.parentOffsets.left-r.width},i.contentStyles={top:n._fitInVerticalBounds(o-a.height/2,a.height),left:this.props.parentOffsets.left-r.width-a.width},i.arrowDirection="right",t=i.contentStyles.left<0?"right":t;break;case"right":i.arrowStyles={top:o-r.height/2,left:this.props.parentOffsets.right},i.contentStyles={top:n._fitInVerticalBounds(o-a.height/2,a.height),left:this.props.parentOffsets.right+r.width},i.arrowDirection="left",t=i.contentStyles.left+a.width>window.innerWidth?"left":t;break;case"top":i.arrowStyles={top:this.props.parentOffsets.top-r.height,left:s-r.width/2},i.contentStyles={top:this.props.parentOffsets.top-r.height-a.height,left:n._fitInHorizontalBounds(s-a.width/2,a.width)},i.arrowDirection="bottom",t=i.contentStyles.top<0?"bottom":t;break;case"bottom":i.arrowStyles={top:this.props.parentOffsets.bottom,left:s-r.width/2},i.contentStyles={top:this.props.parentOffsets.bottom+r.height,left:n._fitInHorizontalBounds(s-a.width/2,a.width)},i.arrowDirection="top",t=i.contentStyles.top+a.height>window.innerHeight?"top":t;break;default:d.LogManager.warn("playanywhere",{message:"Unsupported tooltip position: ".concat(e,". Using 'right' position as default")}),t="right"}t?this._updatePositionData(t):this.setState(i)}}]),n}(c.Component);t.default=p},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DROPDOWN_THEME=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(261))),p=r(n(11)),h=n(62);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v={REGULAR:"regular",LIGHT:"light",CLASSIC:"classic",REGULAR_COMPACT:"regular_compact"};t.DROPDOWN_THEME=v;var g=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._optionRefs={},a._innerHeight=window.innerHeight,a._boundResize=a._onResize.bind((0,o.default)(a)),a._toggleOpen=a._toggleOpen.bind((0,o.default)(a)),a.state={selected:n._getSelectedOption(e.options),isOpen:e.isOpen,options:e.options,noBorder:e.noBorder},a}return(0,s.default)(n,null,[{key:"_getSelectedOption",value:function(e){var t=e.filter((function(e){return!!e.selected}));return t.length?t[0]:null}}]),(0,s.default)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._boundResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({selected:n._getSelectedOption(e.options),isOpen:e.isOpen,options:e.options})}},{key:"componentDidUpdate",value:function(){this.state.isOpen&&(this.state.hideOptions?this.state.options.length&&this._getOptionsPosition():this.state.selected&&this.state.optionsStyle&&this.state.optionsStyle.maxHeight&&this._scrollToOption())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._boundResize)}},{key:"renderArrow",value:function(){return this.props.isArrowByIcon?d.default.createElement("div",{className:"dropdown-component__icon-arrow"}):d.default.createElement("div",{className:"dropdown-component__arrow"})}},{key:"render",value:function(){var e=this,t=this.props.ariaLabel,n=this.state.isOpen?this._getOptions():"",a=this._getToggleContent(),r=(0,p.default)("dropdown-component",this.props.className,{"theme-classic":this.props.theme===v.CLASSIC},{"theme-light":this.props.theme===v.LIGHT},{"theme-compact":this.props.theme===v.REGULAR_COMPACT},{disabled:this.props.disabled});return d.default.createElement("div",{className:r},this.props.title&&d.default.createElement("div",{className:"dropdown-component__title"},this.props.title),d.default.createElement("div",{className:"dropdown-component__box"},d.default.createElement("div",{tabIndex:"0",role:"button",className:"dropdown-component__toggle",onKeyDown:function(t){return 13===t.keyCode&&e._toggleOpen()},onClick:this._toggleOpen,ref:function(t){e._toggle=t},"aria-label":t},d.default.createElement("div",{className:"dropdown-component__toggle-content"},a),this.renderArrow()),n))}},{key:"_onResize",value:function(){var e=this;this.setState({isOpen:!1,hideOptions:!1,flipOptions:!1,optionsStyle:null},(function(){e._innerHeight=window.innerHeight}))}},{key:"_getToggleContent",value:function(){var e=this.props.staticPlaceholder;if((null==e?void 0:e.length)>0)return e;if(this.props.getOptionContent){var t=this.state.selected||this.props.placeholder;return this.props.getOptionContent(t,!0)}return this.state.selected?this.state.selected.label:this.props.placeholder}},{key:"handleClickOutside",value:function(){var e=this.props.onClose;this.state.isOpen&&(this._toggleOpen(),"function"==typeof e&&e())}},{key:"_toggleOpen",value:function(){this.props.disabled||this.setState({isOpen:!this.state.isOpen,hideOptions:!this.state.isOpen,flipOptions:!1,optionsStyle:null})}},{key:"_getOptions",value:function(){var e=this,t=(0,p.default)("dropdown-component__options",{"dropdown-component__options--hide":this.state.hideOptions,"dropdown-component__options--flip":this.state.flipOptions,"dropdown-component__options--limit-height":this.state.optionsStyle&&this.state.optionsStyle.maxHeight,scrollable:this.state.optionsStyle&&this.state.optionsStyle.maxHeight}),n=this.state.optionsStyle||{};return[d.default.createElement("div",{key:"options",className:t,style:n,ref:function(t){e._optionsRef=t}},this.props.showOptionsArrow&&d.default.createElement("div",{className:"dropdown-component__options__arrow"}),d.default.createElement("ul",{className:"dropdown-component__list"},this.state.options.map((function(t,n){var a=e.props.getOptionContent?e.props.getOptionContent(t):t.label,r=t.separator?"dropdown-component__separator":(0,p.default)("dropdown-component__option",{"dropdown-component__option--selected":t.selected},t.className||null),i=n===e.state.options.length-1||e.state.options[n+1].separator||e.state.noBorder?null:d.default.createElement("div",{className:"dropdown-component__option-border"});return t.selected&&(e._selectedOptionIndex=n,e.props.hideSelectedFromOptionsList)?null:d.default.createElement("li",{key:"option-key-".concat((0,h.v4)()),ref:function(t){e._optionRefs["option-".concat(n)]=t},className:r,onClick:t.separator?void 0:function(){e._onChange(t,n)},onKeyDown:function(a){return 13===a.keyCode&&!t.separator&&e._onChange(t,n)}},d.default.createElement("div",{tabIndex:"0",role:"button"},a),i)}),this)))]}},{key:"_onChange",value:function(e,t){var n={isOpen:!1};e!==this.state.selected&&(n.options=this.state.options.map((function(e,n){return e.selected=n===t,e})),n.selected=e,this.props.onChange(e)),this.setState(n)}},{key:"_getOptionsPosition",value:function(){var e={hideOptions:!1},t="bottom";(this._optionRefs["option-0"]?this._optionRefs["option-0"]:this._optionRefs["option-1"]).getBoundingClientRect().bottom+20>this._innerHeight&&(e.flipOptions=!0,t="top"),e.optionsStyle=this._getOptionsStyle(t),this.setState(e)}},{key:"_getOptionsStyle",value:function(e){var t=this._toggle.getBoundingClientRect(),n={};this.props.ignoreWidth?n.minWidth=t.width:n.width=t.width;var a=this._optionsRef.getBoundingClientRect().height,r=t[e];return"bottom"===e?a+20+r>this._innerHeight&&(n.maxHeight=this._innerHeight-r-20):a+20>r&&(n.maxHeight=r-20),n}},{key:"_scrollToOption",value:function(){this._optionsRef.scrollTop=this._optionRefs["option-".concat(this._selectedOptionIndex)].offsetTop}}]),n}(d.Component);g.defaultProps={className:"",isArrowByIcon:!1,options:[],onChange:function(){},placeholder:"",title:null,ignoreWidth:!1,showOptionsArrow:!1,hideSelectedFromOptionsList:!1,theme:v.REGULAR,ariaLabel:"",staticPlaceholder:"",onClose:void 0,disabled:!1};var E=(0,f.default)(g);t.default=E},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43)),o=a(n(0)),s=(r(n(2)),r(n(11))),l=n(74);function u(e){var t=e.selected,n=e.image,a=e.onClick,r=(0,o.useState)(!0),u=(0,i.default)(r,2),c=u[0],d=u[1],f=(0,s.default)("search-image-preview",{"search-image-preview--selected":t,"search-image-preview--loading":c});return o.default.createElement("div",{className:f,key:"image-result-".concat(n.id),onClick:function(){return a(n)}},o.default.createElement("img",{className:"image-preview",alt:"",src:n.smallImageURL,loading:"lazy",width:"100%",height:"100%",onLoad:function(){d(!1)}}),t&&o.default.createElement(l.VIcon,null))}u.defaultProps={selected:!1,onClick:function(){}};var c=u;t.default=c},function(e,t,n){},function(e,t,n){"use strict";var a=n(1),r=a(n(122)),i=a(n(716));r.default.FE.DefineIcon("colors",{NAME:"tint"}),r.default.FE.RegisterCommand("color",{plugin:"colors",title:"Colors",popup:!0,undo:!1,focus:!1,refreshOnCallback:!1,callback:function(){this.colors.toggleColorsPopup()}}),r.default.FE.PLUGINS.colors=i.default},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(24)),l=a(n(262)),u=a(n(122)),c=function(){function e(t){var n=this;if((0,r.default)(this,e),this._onClickOutside=this._onClickOutside.bind(this),this._onClickTab=this._onClickTab.bind(this),this._onColorPickerChangeComplete=this._onColorPickerChangeComplete.bind(this),!(this instanceof e))return new e(t);this.isVisible=!1,this.editor=t,this.colorTabs={text:"rgba(0,0,0,1)",background:"rgba(255,255,255,1)",selected:"text"},this.colorPickerContainer=t.$el.parents(".text-component.text-edit").find(".color-picker-container"),this.colorPickerRef=o.default.createRef(),s.default.render(this._renderColorPicker(),this.colorPickerContainer[0],(function(){var e=n._renderTabs();n.colorPickerContainer.prepend(e)}))}return(0,i.default)(e,[{key:"_renderColorPicker",value:function(){return o.default.createElement("div",{className:"t2i-color-picker"},o.default.createElement(l.default,{ref:this.colorPickerRef,color:this.colorTabs.text,updateState:this._onColorPickerChangeComplete,styleClass:"t2i-color-picker-sketch",pickerClassName:"sketch-picker"}))}},{key:"_renderTabs",value:function(){var e=this,t=["text","background"].map((function(t){var n=e.colorTabs.selected===t?"fr-selected-tab":"",a=e.editor.language.translate(t);return'<span\n\t\t\t\tdata-param1="text"\n\t\t\t\tdata-cmd="colorChangeSet"\n\t\t\t\tclass="fr-colors-tab '.concat(t," ").concat(n,'"\n\t\t\t\ttitle="').concat(a,'"\n\t\t\t>').concat(a,"</span>")})).join("");return'<div class="fr-colors-tabs fr-group">'.concat(t,"</div>")}},{key:"_onClickOutside",value:function(e){var t=(0,u.default)(e.target);t.closest(".color-picker-container")[0]===this.colorPickerContainer[0]||(this._hidePopup(),t.closest(".fr-box")[0]===this.editor.$box[0]||this.editor.events.trigger("blur"))}},{key:"_onClickTab",value:function(e){this._applyColor();var t=e.target.classList.contains("text")?"text":"background";if(t!==this.colorTabs.selected){this.colorTabs.selected=t;var n=this.colorTabs[t];this.colorPickerRef.current.setColor(n),this.colorPickerContainer.find(".fr-colors-tabs .fr-selected-tab").removeClass("fr-selected-tab"),this.colorPickerContainer.find(".fr-colors-tabs ."+t).addClass("fr-selected-tab")}}},{key:"_onColorPickerChangeComplete",value:function(e){this._setStateColor(e)}},{key:"toggleColorsPopup",value:function(){this.isVisible?this._hidePopup():this._showPopup()}},{key:"_showPopup",value:function(){this.isVisible||(this.colorPickerContainer.show(),this.colorPickerContainer[0].style.top="36px",this.isVisible=!0,this.editor.$box.attr("data-ttk-editor-popup","color"),this.colorPickerContainer.find(".fr-colors-tabs").on("click",this._onClickTab),(0,u.default)(window.document).on("click",this._onClickOutside))}},{key:"_hidePopup",value:function(){this.isVisible&&(this.colorPickerContainer.hide(),this.isVisible=!1,this.editor.$box.attr("data-ttk-editor-popup",""),this.colorPickerContainer.find(".fr-colors-tabs").off("click",this._onClickTab),(0,u.default)(window.document).off("click",this._onClickOutside),this._applyColor())}},{key:"_setStateColor",value:function(e){this.colorTabs[this.colorTabs.selected]=e}},{key:"_applyColor",value:function(){var e=this.colorTabs[this.colorTabs.selected],t="text"===this.colorTabs.selected?"color":"background-color";this.editor.events.trigger("focus"),this.editor.format.applyStyle(t,e)}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=n(1106),p=(r(n(2)),r(n(11)));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={color:a.props.color},a.handleChangeComplete=a.handleChangeComplete.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"getSketchColorsList",value:function(){return[{color:"#D0021B",title:"D0021B"},{color:"#F5A623",title:"F5A623"},{color:"#F8E71C",title:"F8E71C"},{color:"#8B572A",title:"#8B572A"},{color:"#7ED321",title:"#7ED321"},{color:"#417505",title:"#417505"},{color:"#BD10E0",title:"#BD10E0"},{color:"#9013FE",title:"#9013FE"},{color:"#4A90E2",title:"#4A90E2"},{color:"#50E3C2",title:"#50E3C2"},{color:"#B8E986",title:"#B8E986"},{color:"#000000",title:"#000000"},{color:"#4A4A4A",title:"#4A4A4A"},{color:"#9B9B9B",title:"#9B9B9B"},{color:"#FFFFFF",title:"#FFFFFF"},{color:"transparent",title:"transparent"}]}},{key:"getSwatchesColorsList",value:function(){return[["#ffffff","#cccccc","#333333","#424242"],["#e62565","#c35e7e","#a37c82","#a29497"],["#fc464b","#9d44b6","#983bca","#a969ca"],["#1a57b6","#6568c9","#754cb2","#8266c9"],["#1789ce","#1993e7","#199aca","#3cb6e3"],["#70b3b8","#1897a6","#66b393","#20aa66"],["#13874b","#67971b","#53a527","#87b043"],["#ca7620","#c79c38","#c8b654","#9aca28"],["#fd8a26","#ec6c20","#ca4318","#c41915"]]}}]),(0,s.default)(n,[{key:"render",value:function(){var e=(0,p.default)("select-color",this.props.styleClass);return d.default.createElement("div",{className:e},this.props.title&&d.default.createElement("div",{className:"title"},this.props.title),this.renderPicker())}},{key:"renderPicker",value:function(){switch(this.props.pickerType){case"circles":return d.default.createElement(f.SwatchesPicker,{className:this.props.pickerClassName,color:this.state.color,onChangeComplete:this.handleChangeComplete,height:this.props.height,width:this.props.width,colors:n.getSwatchesColorsList()});case"sketch":default:return d.default.createElement(f.SketchPicker,{className:this.props.pickerClassName,color:this.state.color,onChangeComplete:this.handleChangeComplete,presetColors:n.getSketchColorsList()})}}},{key:"handleChangeComplete",value:function(e){var t=this.props.updateState,n="rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")");this.setState({color:n}),"function"==typeof t&&t(n)}},{key:"setColor",value:function(e){this.setState({color:e})}}]),n}(d.Component);m.defaultProps={color:"transparent",title:null,updateState:function(){},styleClass:"",pickerClassName:"",pickerType:"sketch",width:void 0,height:void 0};var v=m;t.default=v},,function(e,t,n){},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l,u=a(n(33)),c=a(n(34)),d=a(n(3)),f=a(n(12)),p=a(n(4)),h=a(n(6)),m=a(n(8)),v=a(n(7)),g=a(n(9)),E=a(n(61)),_=r(n(0)),y=(a(n(2)),a(n(11))),k=n(46),S=n(76),T=a(n(224)),b=n(52),C=r(n(115)),I=r(n(110)),O=r(n(151)),A=n(55),N=n(67),w=r(n(54)),R=a(n(443)),P=n(103),M=n(223),L=n(102),D=a(n(288)),x=a(n(13)),F=a(n(21)),U=a(n(818)),G=a(n(819)),B=a(n(123)),j=r(n(225)),H=n(77),V=a(n(28)),W=a(n(479)),z=a(n(827)),Y=a(n(193)),K=a(n(460)),Q=a(n(828)),X=n(54),q=n(264);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var ee=V.default.Instance,te=D.default.TYPE,ne=D.default.MODE,ae=D.default.getPreset,re=D.default.getPresetNamesByType,ie=D.default.getCheckAnswerStatus,oe=D.default.getFeedbackFields,se=D.default.getSettingsSchemes,le=D.default.getInteractionUserAnswers,ue=D.default.getInteractionActionType,ce=(i={NUM_OF_ATTEMPTS:(0,T.default)(),TAGGING:(0,T.default)()},(0,g.default)(i,N.CORRECT,(0,T.default)()),(0,g.default)(i,N.PARTIAL,(0,T.default)()),(0,g.default)(i,N.WRONG,(0,T.default)()),i),de=(0,S.InteractionHoc)((function(e){return{getEventsContextPromise:e.getEventsContextPromise,getTaskVotes:function(){var t;return(t=e.environment).getTaskVotes.apply(t,arguments)},verifyPassword:function(){var t;return(t=e.environment).verifyPassword.apply(t,arguments)}}}),{withRef:!0})(o=(0,k.inject)("services")(o=(0,k.observer)((l=s=function(e){(0,h.default)(o,e);var t,n,a,r,i=$(o);function o(e){var t;(0,d.default)(this,o),(t=i.call(this,e))._renderInteractionChangedAlert=t._renderInteractionChangedAlert.bind((0,f.default)(t)),t.prevProgress=null,t.isPlayer=e.mode===b.PLAYER,t.isAssessment=e.viewMode===O.ASSESSMENT,t.taskInteractionType=t.isPlayer?e.userState.getTaskInteractionType():e.model.getTaskInteractionType(),t.taskInteractionActionType=t.isPlayer?e.userState.getTaskInteractionActionType():e.model.getTaskInteractionActionType(),t.isMedia=-1!==w.MEDIA_TYPES.indexOf(e.model.data.taskType),t.isOverlayDisplay=e.taskPresentationDisplayType===F.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY,t.handleNextClick=t.handleNextClick.bind((0,f.default)(t)),t.handleCheckClick=t.handleCheckClick.bind((0,f.default)(t)),t.handleVoteClick=t.handleVoteClick.bind((0,f.default)(t)),t.handleShowUserAnswersClick=t.handleShowUserAnswersClick.bind((0,f.default)(t)),t.handleShowAnswersClick=t.handleShowAnswersClick.bind((0,f.default)(t)),t.handleSaveClick=t.handleSaveClick.bind((0,f.default)(t)),t.handleCloseFeedback=t.handleCloseFeedback.bind((0,f.default)(t)),t.handleShowFeedback=t.handleShowFeedback.bind((0,f.default)(t)),t.getOnContainerClickFunction=t.getOnContainerClickFunction.bind((0,f.default)(t)),t._expandQuestion=t._expandQuestion.bind((0,f.default)(t)),t._onlyShowAnswer=t._onlyShowAnswer.bind((0,f.default)(t)),t.onTaskButtonsClicked=t.onTaskButtonsClicked.bind((0,f.default)(t));var n=e.services.ConfigurationService;return t.isInteractionsThemeV2=n.isInteractionsThemeV2,t.isMobile=x.default.isMobile()||x.default.isTablet()&&t.isInteractionsThemeV2,t.state={showAnswers:t.props.showAnswers,disableSave:!!ie(t.props.model&&t.props.model.interaction,t.props.userState&&t.props.userState.data.interaction),clearUserState:!1,expandQuestion:!1,onlyShowAnswer:!1,showCheckValidation:!1,showFeedbackToast:t.isInteractionsThemeV2},t}return(0,p.default)(o,null,[{key:"getSettingsSchemes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:{}},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{tags:!0,feedback:!0,attempts:!0,interaction:void 0,extendedFeedback:!1},r=se(e.interaction,t.data.interaction,n.interaction,a.interaction),i=[],o=e.data.subType===X.CONTAINER_SUBTYPE;if(!o&&a.tags&&i.push({id:ce.TAGGING,value:e.id,type:C.TAGGING}),a.feedback&&oe(e.interaction,t.data.interaction).map((function(t){return{id:ce[t],feedback:t,currentText:e.data.feedback[t],type:C.EMOJI,extendedFeedback:a.extendedFeedback}})).forEach((function(e){i.push(e)})),a.attempts){var s=ue(e.interaction);-1!==[P.CHECK,P.CHECKABLEOFF].indexOf(s)&&1!==D.default.getInteractionMaxAttempts(e.interaction)&&i.push({id:ce.NUM_OF_ATTEMPTS,values:[{key:"1",value:"1"},{key:"2",value:"2"},{key:"3",value:"3"},{key:"4",value:"4"},{key:"5",value:"5"},{key:"999999",value:n.task.UNLIMITED_ATTEMPTS}],label:n.task.NUM_OF_ATTEMPTS,currentValue:e.data.maxAttempts.toString(),type:C.SINGLE_SELECTION,disabled:s===P.CHECKABLEOFF})}var l={TASK:i,INTERACTION:r};return l}},{key:"isInteractionSupportGamify",value:function(e){return(0,R.default)(e.interaction)}},{key:"getInteractionUserAnswers",value:function(e,t){return le(e.interaction,t&&t.interaction)}},{key:"getTaskTypeAndPresetForTask",value:function(e){var t=e.interaction.entry,n=e.interaction.interactions[t];return{type:n.type,preset:n.preset}}},{key:"shouldDisplayResultsByProgress",value:function(e){var t=e.model,n=e.userState;if(n&&n.data.data&&(ue(t.interaction)===P.VOTE&&n.data.data.progress===I.COMPLETED_RIGHT))return!0;return!1}},{key:"getProgress",value:function(e){return(((e.userState||{}).data||{}).data||{}).progress}}]),(0,p.default)(o,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.userState,n=e.gamifyMode,a=e.showResults;this.isPlayer&&(n&&(t.isTaskCompleted()||(t.clearTaskData(),this.setState({clearUserState:!0}))),(o.shouldDisplayResultsByProgress(this.props)||a)&&this.setResultsDataToState(),this.prevProgress=o.getProgress(this.props),this.displayProgressBar=this.isDisplayProgressBar(),this.enableTask=this.isTaskEnabled())}},{key:"UNSAFE_componentWillReceiveProps",value:(r=(0,c.default)(u.default.mark((function e(t){var n,a,r,i,o,s,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.showResults,r=n.updatedParticipants,i=t.mode,o=t.showResults,s=t.showAnswers,l=t.updatedParticipants,i!==b.PLAYER){e.next=8;break}if(void 0!==s&&this.setState({showAnswers:s}),!(o&&a!==o||o&&r<l)){e.next=8;break}return e.next=8,this.setResultsDataToState(!1);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"componentWillReact",value:function(){this.isPlayer&&(this.checkProgressChanged()&&(this.displayProgressBar=this.isDisplayProgressBar(),this.enableTask=this.isTaskEnabled()))}},{key:"componentDidMount",value:function(){if(this.isInteractionsThemeV2&&this.isMedia){var e,t=this.props.userState;null!==(e=null==t?void 0:t.getPersistent())&&void 0!==e&&e&&t.setIsOpened(!0)}}},{key:"checkProgressChanged",value:(a=(0,c.default)(u.default.mark((function e(){var t,n,a,r,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.showPollResults,n=o.getProgress(this.props),a=this.prevProgress!==n,r=!1,i=!1,this.prevProgress=n,this.isAssessment||a&&(o.shouldDisplayResultsByProgress(this.props)&&(r=!0),n!==I.CHECK&&(i=!0)),!r){e.next=10;break}return e.next=10,this.setResultsDataToState(!t);case 10:return i&&this._fireEventLog(n),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"render",value:function(){var e,t=this.props.model,n=this.isInteractionsThemeV2&&t.data.taskType&&t.data.taskType.toLowerCase(),a=n?U.default[t.data.taskType][t.data.subType]:"",r=(0,y.default)("ttk-task-wrapper",(e={"ttk-task-wrapper-player":this.isPlayer},(0,g.default)(e,"sections-".concat(a),this.isInteractionsThemeV2&&!this.isOverlayDisplay),(0,g.default)(e,"ltr",this.isInteractionsThemeV2&&this.props.ltr),(0,g.default)(e,"rtl",this.isInteractionsThemeV2&&!this.props.ltr),(0,g.default)(e,"transparent",this.isInteractionsThemeV2&&"0"===t.data.opacity),e)),i=(0,y.default)("ttk-task",(0,g.default)({"ttk-task-player":this.isPlayer,"ttk-task-editor":!this.isPlayer},n,n)),o=this._shouldDisplayQuestion();if(this.isOverlayDisplay)return _.default.createElement("div",{className:r,onClick:this._isAnswerEmbedded()?this.getOnContainerClickFunction:null},this._renderEmbeddedTask());var s=this.displayProgressBar?this.renderFeedBack():null;return _.default.createElement(_.default.Fragment,null,this._renderBackgroundSections(a),_.default.createElement("div",{className:r,onClick:this.getOnContainerClickFunction,"data-clickable":!1},_.default.createElement("div",{className:i,"data-automation-id":"ttk-task"},o&&this._renderQuestion(),!this.state.expandQuestion&&this._renderAnswers()),!this.isInteractionsThemeV2&&s,!this.isInteractionsThemeV2&&this.displayProgressBar&&this.renderProgressBar(),this.isInteractionsThemeV2&&this._renderTaskGroupActionsV2(a,s)))}},{key:"_renderEmbeddedTask",value:function(){var e,t,n=this.props,a=n.model,r=n.language,i=n.ltr,o=n.userState;if(this.isMedia)return this._renderAnswers("embedded");var s=this._isAnswerEmbedded();return s&&(e=this._renderAnswers("embedded"),t=this.renderProgressBar()),_.default.createElement(Q.default,{model:a,language:r,ltr:i,progressBtnState:this.getProgressButtonState(!0),answerAvailable:o.getTaskCheckAnswerStatus()===H.AVAILABLE,isAssessment:this.isAssessment,isAnswerEmbedded:s,answer:e,progressBar:t})}},{key:"_renderQuestion",value:function(){var e,t=this,n=this.props,a=n.model,r=n.userState,i=this.isInteractionsThemeV2&&a.data.taskType&&a.data.taskType.toLowerCase(),o=this.isInteractionsThemeV2?(0,y.default)("question",(e={},(0,g.default)(e,i,i),(0,g.default)(e,"media",this.isMedia),e)):"";return _.default.createElement(D.default,{rootWidth:this.props.rootWidth,ref:function(e){t._questionAeraInteractionRef=e},language:this.props.language.interaction,mode:this.props.mode,ltr:this.props.ltr,model:this.props.isModelControlled?a&&a.question:void 0,defaultModel:this.props.isModelControlled?void 0:a&&a.question,userState:this.props.isUserStateControlled?r&&r.question:void 0,defaultUserState:this.props.isUserStateControlled?void 0:r&&r.question,hideMediaOptions:this._shouldHideMediaOptions(),taskState:this.state,isMobile:this.isMobile,showClimateResult:this.props.showClimateResult,showFlagInteractionButton:this.props.showFlagInteractionButton,hideUserStateOnClimatePoll:this.props.hideUserStateOnClimatePoll,videoIframeOrigin:this.props.videoIframeOrigin,availableOffline:this.props.availableOffline,styleClass:o,maxCharacters:this.props.services.ConfigurationService.questionMaxCharacters,expandQuestion:this._expandQuestion,taskPresentationDisplayType:this.props.taskPresentationDisplayType})}},{key:"_renderAnswers",value:function(){var e,t,n,a=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=this.props,o=i.gamifyMode,s=i.model,l=i.userState,u=i.readOnlyMode,c=i.ciResultsHidden,d=i.closeOverlayTaskGroup,f=i.preventSwipeOnScroll,p=i.subtasksUserStates,h=i.subtasksToRender,m=this.isInteractionsThemeV2&&(null===(e=s.data.taskType)||void 0===e?void 0:e.toLowerCase()),v=this.isInteractionsThemeV2?(0,y.default)("answer",(t={},(0,g.default)(t,m,m),(0,g.default)(t,"check_validation",this.state.showCheckValidation),(0,g.default)(t,"media",this.isMedia),(0,g.default)(t,r,r),t)):"",E=this.isInteractionsThemeV2&&x.default.isLearner()?l.isTaskCompleted():this.state.showAnswers;return p.length&&(n={},p.forEach((function(e){e&&(n[e.taskId]=e)}))),_.default.createElement(D.default,{rootWidth:this.props.rootWidth,ref:function(e){a._interactionRef=e},language:this.props.language.interaction,taskLanguage:this.props.language.task,mode:this.props.mode,ltr:this.props.ltr,task:!0,showResults:this.state.showResults||this.props.showResults,results:this.state.results,showAnswers:E,model:this.props.isModelControlled?s&&s.interaction:void 0,defaultModel:this.props.isModelControlled?void 0:s&&s.interaction,userState:l&&l.data.interaction,defaultUserState:l&&l.data.interaction,subtasksUserStates:n,subtasksToRender:h,subtasks:s.subtasks,isEnabled:this.enableTask,readOnlyMode:u,ciResultsHidden:o||c,isMobile:this.isMobile,showClimateResult:this.props.showClimateResult,showFlagInteractionButton:this.props.showFlagInteractionButton,hideUserStateOnClimatePoll:this.props.hideUserStateOnClimatePoll,videoIframeOrigin:this.props.videoIframeOrigin,availableOffline:this.props.availableOffline,styleClass:v,closeOverlayTaskGroup:d,preventSwipeOnScroll:f,isMedia:this.isMedia,onlyShowAnswer:this._onlyShowAnswer,taskPresentationDisplayType:this.props.taskPresentationDisplayType,taskPresentationProperties:this.props.taskPresentationProperties,pageSizeFactor:this.props.pageSizeFactor,renderInteractionChangedAlert:this._renderInteractionChangedAlert,isSmallEmbeddedItem:this.props.isSmallEmbeddedItem})}},{key:"_renderBackgroundSections",value:function(e){return!this.isInteractionsThemeV2||this.isMobile?null:_.default.createElement("div",{className:"sections-wrapper sections-".concat(e," ").concat(this.props.ltr?"ltr":"rtl")},_.default.createElement("div",{className:"section bottom-section"}),_.default.createElement("div",{className:"section middle-section"}),_.default.createElement("div",{className:"section upper-section"}))}},{key:"_renderOkButtonV2",value:function(){var e=this.props,t=e.language,n=e.ltr,a=e.closeOverlayTaskGroup;return this.isInteractionsThemeV2&&this.isMedia?_.default.createElement("div",{className:"progress-bar ".concat(n?"ltr":"rtl")},_.default.createElement("div",{className:"progress-btn-wrapper"},_.default.createElement("button",{className:"progress-btn media",onClick:a,onKeyDown:function(e){return 13===e.keyCode&&a()}},t.task.OK_BUTTON))):null}},{key:"_renderTaskGroupActionsV2",value:function(e,t){var n;if(!this.isInteractionsThemeV2||this.state.onlyShowAnswer)return null;var a=this.props.userState,r=!!this.isMedia||a.isTaskCompleted(),i=!this.isMobile&&this.isMedia,o=!x.default.isMobile()&&!x.default.isTablet()&&this.renderPresentButton(),s=this.isMedia?this.isMobile?null:this._renderOkButtonV2():this.renderProgressBar(!this.isMobile&&t,o),l=this.props.getTaskGroupActions(this.isMedia,r,e)||{},u=(0,y.default)("task-group-actions",(n={},(0,g.default)(n,"sections-".concat(e),!this.isMobile),(0,g.default)(n,"task-completed",r),(0,g.default)(n,"media",this.isMedia),(0,g.default)(n,"ltr",this.props.ltr),(0,g.default)(n,"rtl",!this.props.ltr),n));return _.default.createElement(_.default.Fragment,null,l.header,!this.isMobile&&s,this.isMobile||!i&&l.actions?_.default.createElement("div",{className:u},this.isMobile&&t,this.isMobile&&s,!i&&l.actions):null)}},{key:"renderPresentButton",value:function(){var e=this.props,t=e.language,n=e.taskButtons;return n&&n.type===j.SHOW?_.default.createElement(B.default,{"data-automation-id":"show-button",className:"show-button",onClick:this.onTaskButtonsClicked},_.default.createElement("span",null,t.task.TASK_BUTTONS.PRESENT," "),_.default.createElement(G.default,null)):null}},{key:"onTaskButtonsClicked",value:function(){var e=this;this.props.taskButtons.callback&&this.props.getEventsContextPromise().then((function(t){e.props.taskButtons.callback(t)}))}},{key:"renderFeedBack",value:function(){var e=this.props,t=e.extendedFeedback,n=e.userState,a=this.getCurrentFeedback(),r=!(!this.state.showFeedbackToast||!a);return r?_.default.createElement(K.default,{currentAnswer:n.data.data.currentAnswer,currentFeedback:a,extendedFeedback:t,showFeedback:r,onClose:this.handleCloseFeedback,isInteractionsThemeV2:this.isInteractionsThemeV2,strictSanitize:!1}):null}},{key:"handleShowFeedback",value:function(){this.toggleFeedback(!0)}},{key:"handleCloseFeedback",value:function(){this.toggleFeedback(!1)}},{key:"toggleFeedback",value:function(e){(0,E.default)(e)&&(e=!this.state.showFeedbackToast),this.setState({showFeedbackToast:e})}},{key:"renderProgressBar",value:function(e,t){var n=this.props,a=n.model,r=n.language,i=n.readOnlyMode,o=n.showPollResults,s=n.userState,l=n.subtasksUserStates,u=n.gamifyMode,c=n.showSystemAnswers,d=n.ltr,f=n.verifyPassword,p=this.state.disableSave,h=!!i||p,m=s.getTaskCheckAnswerStatus(),v=this.getProgressButtonState();return u?_.default.createElement(z.default,{language:r.task,progressBtnState:v,checkAnswerStatus:m,handleCheckClick:this.handleCheckClick,handleVoteClick:this.handleVoteClick,handleSaveClick:this.handleSaveClick,disableSaveBtn:h,readOnlyMode:i}):_.default.createElement(W.default,{language:r,model:a,progressBtnState:v,checkAnswerStatus:m,userState:s.data,subtasksUserStates:l,handleCheckClick:this.handleCheckClick,handleVoteClick:this.handleVoteClick,handleShowUserAnswersClick:this.handleShowUserAnswersClick,handleShowAnswersClick:this.handleShowAnswersClick,showPollResults:o,handleSaveClick:this.handleSaveClick,disableSaveBtn:h,readOnlyMode:i,showSystemAnswers:c,closeFeedback:this.handleCloseFeedback,showFeedback:this.handleShowFeedback,feedbackElement:e,isOverlayDisplay:this.isOverlayDisplay&&!this._isAnswerEmbedded(),displayProgressBar:this.displayProgressBar,ltr:d,presentButton:t,handleNextClick:this.handleNextClick,isAssessment:this.isAssessment,verifyPassword:f})}},{key:"callSchemaFunction",value:function(e,t){for(var n,a=this.getSettingsFunctions(),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=a[e])[t].apply(n,i)}},{key:"getSettingsFunctions",value:function(){var e,t=this,n=this.props.model||this.state.model;return{TASK:J((e={},(0,g.default)(e,ce.NUM_OF_ATTEMPTS,(function(e){n.setMaxAttempts(e)})),(0,g.default)(e,ce.TAGGING,(function(){})),e),[N.CORRECT,N.PARTIAL,N.WRONG].reduce((function(e,n){return J(J({},e),{},(0,g.default)({},ce[n],t.setFeedbackAsHtml.bind(t,n)))}),{})),INTERACTION:this._interactionRef.getWrappedInstance().getSettingsFunctions()}}},{key:"setFeedbackAsHtml",value:function(e,t){this.props.model.setTaskFeedback(e,t)}},{key:"setResultsDataToState",value:(n=(0,c.default)(u.default.mark((function e(t){var n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._resultsBeforeMyVote){e.next=4;break}n=this._resultsBeforeMyVote,e.next=7;break;case 4:return e.next=6,this._getTaskResults();case 6:n=e.sent;case 7:t&&(n=this.getNewResultsWithUserAnswer(n)),this.setState({results:n,showResults:!0});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_shouldDisplayQuestion",value:function(){var e=this.props,t=e.displayQuestion,n=e.services.ConfigurationService;return!this.state.onlyShowAnswer&&(t&&this.taskInteractionType!==D.default.TYPE.RICHMEDIA&&(!n.reducedEditorCapabilitiesV2||!this.isMedia))}},{key:"_shouldHideMediaOptions",value:function(){return this.props.services.ConfigurationService.reducedEditorCapabilitiesV2||Y.default.getTaskInteractionStoreByType(this.taskInteractionType).category===A.MEDIA}},{key:"shouldValidateBeforeCheck",value:function(){return this.props.userState.shouldValidateBeforeCheck()}},{key:"handleNextClick",value:function(){this.props.closeOverlayTaskGroup(!0)}},{key:"handleCheckClick",value:function(){var e=this;this.shouldValidateBeforeCheck()&&!this.state.showCheckValidation?this.setState({showCheckValidation:!0}):this.setState({showFeedbackToast:!0,showCheckValidation:!1},(function(){e.props.userState.handleCheck(e.props.gamifyMode,e.props.scoreModification)}))}},{key:"handleTryAgainClick",value:function(){(this.props.userState||this.state.userState).handleTryAgain()}},{key:"handleShowAnswersClick",value:function(){this.setState({showAnswers:!0,showFeedbackToast:!1})}},{key:"handleShowUserAnswersClick",value:function(){this.setState({showAnswers:!1,showFeedbackToast:!1})}},{key:"activateInteractionAction",value:function(e,t){switch(e){case P.CHECK:this.props.userState.checkAnswer(t);break;case P.VOTE:this.setState({results:t,showResults:!0});break;default:t()}}},{key:"handleSaveClick",value:function(){var e,t=this.props.model.data.checkingType===L.MANUAL?I.PENDING_CHECK:I.COMPLETED_RIGHT;(null===(e=this.props.subtasksUserStates)||void 0===e?void 0:e.length)?this.props.subtasksUserStates.forEach((function(e){e.setTaskData({progress:t})})):this.props.userState.setTaskData({progress:t});if(this.setState({disableSave:!0}),x.default.isFeatureEnabled("antiPlagiarism")){var n,a,r,i=null===(n=this.props.model)||void 0===n?void 0:n.interaction,o=null==i?void 0:i.entry,s=null==i||null===(a=i.interactions[o])||void 0===a||null===(r=a.data)||void 0===r?void 0:r.plagiarismScanType;if(o&&s){var l,u,c,d,f,p=x.default.getAppdata(),h=this.props.taskId,m=s===q.INPUT_TYPES_KEYS.FILE?"fileUrl":"textAnswer",v=this.props.userState,E=s===q.INPUT_TYPES_KEYS.FILE?null===(l=v.data)||void 0===l||null===(u=l.interaction[o])||void 0===u||null===(c=u.data)||void 0===c||null===(d=c.files[0])||void 0===d?void 0:d.src:v.data.interaction[o].data.textAnswer,_=x.default.getAppdata().backend_url;ee.post("".concat(_,"/PlayAppService/antiPlagiarism/scan/submit"),{},(f={accountId:p.accountDetails.id,siteId:p.siteDetails.id,taskId:h},(0,g.default)(f,m,E),(0,g.default)(f,"userId",p.userDetails.id),f))}}}},{key:"_getTaskResults",value:function(){var e=this;return new Promise((function(t,n){var a=e.props.model.id,r=e.props.model.version;e.props.getEventsContextPromise().then((function(i){var o=i.data;e.props.services.ConfigurationService.isPreview?t({optionsPartition:{},totalVotes:0}):e.props.getTaskVotes(a,r,o,(function(e,a){e?n(e):t(a)}))}))}))}},{key:"enableSaveBtn",value:function(){this.state.disableSave&&this.setState({disableSave:!1})}},{key:"_fireEventLog",value:function(e){this.props.persistUserStateEvents&&(e===I.COMPLETED_RIGHT||e===I.COMPLETED_WRONG?this.props.addEventLog(M.ACTION_EVENTS.TASK_COMPLETED):this.props.addEventLog(M.ACTION_EVENTS.TASK_ATTEMPT),this.props.userState.isTaskCompleted()&&this.props.sendTaskNavigatedEvent(void 0,this.props.model.id,!1),this.props.flushEventLog())}},{key:"handleVoteClick",value:(t=(0,c.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getTaskResults();case 2:this._resultsBeforeMyVote=e.sent,this.props.userState.setTaskData({progress:I.COMPLETED_RIGHT,isEnabled:!1});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentLostFocus",value:function(){this._interactionRef.getWrappedInstance().componentLostFocus(),this._questionAeraInteractionRef&&this._questionAeraInteractionRef.getWrappedInstance().componentLostFocus()}},{key:"getNewResultsWithUserAnswer",value:function(e){var t=this.props,n=t.userState,a=t.model,r=le(a.interaction,n&&n.data.interaction),i={};return r.forEach((function(t){var n=e.optionsPartition[t]||0;i[t]=n+1})),J(J({},e),{},{totalVotes:e.totalVotes+r.length,optionsPartition:J(J({},e.optionsPartition),i)})}},{key:"isTaskEnabled",value:function(){var e=this.props,t=e.isEnabled,n=e.userState,a=e.model,r=e.subtasksUserStates,i=e.subtasksToRender;if(!1===t)return!1;if(this.isTryAgainInGamify())return!0;var o=function(e){var t=e.isEnabled;return void 0===t||t};if(a.data.subType===X.CONTAINER_SUBTYPE){var s=r.filter((function(e){return o(e)}));return i.length===s.length}return o(n)}},{key:"isDisplayProgressBar",value:function(){var e=this.props,t=e.hideProgressBar,n=e.ciResultsHidden,a=e.userState,r=e.model,i=a.getTaskProgress(),o=!0;return!1!==t&&this.taskInteractionActionType!==P.NONE&&void 0!==this.taskInteractionActionType&&(this.isAssessment?r.data.subType===X.FREE_WRITING_SUBTYPE_E_SIGNATURE?o=!0:a.taskHasStateWithoutTimeSettings()?(n||i===I.PENDING_CHECK)&&(o=!1):o=this.isInteractionsThemeV2&&(x.default.isInstructor()||x.default.isMobile()||x.default.isTablet()):this.isCompletedPoll()&&!this.isInteractionsThemeV2&&(o=!1),o)}},{key:"isCompletedPoll",value:function(){var e=this.props.userState;return this.taskInteractionActionType===P.VOTE&&e.getTaskProgress()===I.COMPLETED_RIGHT}},{key:"getCurrentFeedback",value:function(){var e,t=this.props,n=t.model,a=t.userState.data.data.currentAnswer;return this.taskInteractionActionType===P.CHECK&&(e=n.data.feedback&&n.data.feedback[a]),e}},{key:"getOnContainerClickFunction",value:function(){var e=this.props,t=e.userState,n=e.readOnlyMode,a=e.isEnabled,r=e.model;if(this.isPlayer){var i=t.getTaskProgress();if(!n&&a){this.state.showCheckValidation&&this.setState({showCheckValidation:!1});var o=r.data.subType===X.FREE_WRITING_SUBTYPE_E_SIGNATURE;i===I.TRY_AGAIN?this.handleTryAgainClick():(this.taskInteractionActionType===P.CHECKABLEOFF||this.taskInteractionActionType===P.SAVE&&!o)&&this.state.disableSave&&this.enableSaveBtn()}}}},{key:"getProgressButtonState",value:function(e){var t,n=this.props,a=n.userState,r=n.gamifyMode,i=n.model,o=this.state.showAnswers;return a.isTaskCheckable()&&(t=this.isInteractionsThemeV2&&!x.default.isLearner()&&a.isTaskAutomaticallyCheckable()&&!this.props.services.ConfigurationService.isPreview?o?I.HIDE_ANSWER_FOR_INSTRUCTOR:I.SHOW_ANSWER_FOR_INSTRUCTOR:o?this.props.services.ConfigurationService.isPreview?I.CORRECT_ANSWER_IS_SHOWN_FOR_EDITOR:I.SHOWING_CORRECT_ANSWER:a.getTaskProgress()),t||(t=!e||a.getTaskProgress()!==I.COMPLETED_RIGHT&&a.getTaskProgress()!==I.PENDING_CHECK?o&&i.data.subType===X.FREE_WRITING_SUBTYPE_E_SIGNATURE?I.CORRECT_ANSWER_IS_SHOWN_FOR_EDITOR:this.taskInteractionActionType:I.COMPLETED_RIGHT),t===P.CHECK?t=I.CHECK:t===I.COMPLETED_WRONG&&a.dontShowCorrectAnswers()&&(t=I.COMPLETED_WRONG_DONT_SHOW_ANSWER),this.state.showCheckValidation&&(t=I.CHECK_VALIDATION),r&&t===I.TRY_AGAIN?I.CHECK:t}},{key:"isTryAgainInGamify",value:function(){var e=this.props,t=e.gamifyMode,n=e.userState;if(t&&n.getTaskProgress()===I.TRY_AGAIN)return!0;return!1}},{key:"_expandQuestion",value:function(e){this.setState({expandQuestion:e})}},{key:"_onlyShowAnswer",value:function(e){this.isInteractionsThemeV2&&this.setState({onlyShowAnswer:e})}},{key:"_renderInteractionChangedAlert",value:function(){var e=this.props.language;return _.default.createElement("div",{className:"task-warning-alert"},e.task.INTERACTION_CHANGED_ALERT.learner)}},{key:"_isAnswerEmbedded",value:function(){var e;return!!(null===(e=this.props.taskPresentationProperties)||void 0===e?void 0:e.embeddedAnswer)&&x.default.isPC()}}]),o}(_.Component),s.defaultProps={displaySettings:!0,displayQuestion:!0,hideProgressBar:!0,ltr:!0,persistUserStateEvents:!0,hideUserStateOnClimatePoll:!1,showClimateResult:!1,showFlagInteractionButton:!1,updatedParticipants:0,videoIframeOrigin:void 0,availableOffline:!1,extendedFeedback:!1,closeOverlayTaskGroup:function(){},getTaskGroupActions:function(){},preventSwipeOnScroll:function(){},taskPresentationDisplayType:"",taskPresentationProperties:void 0,taskButtons:{},getEventsContextPromise:function(){},isSmallEmbeddedItem:!1,verifyPassword:function(){},subtasksUserStates:[],subtasksToRender:[]},s.interactionCategoryAndPreset=D.default.interactionCategoryAndPreset,s.isMediaCategoryByInteractionType=D.default.isMediaCategoryByInteractionType,s.filterInteractionCategoryAndPreset=D.default.filterInteractionCategoryAndPreset,s.MODE=ne,s.TYPE=te,s.getPresetNamesByType=re,s.getPreset=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r=ae(e,t,a),i=r.entry,o=r.interactions[i].data,s=o&&o.checkingType?o.checkingType:L.NONE_CHECKABLE;o&&o.checkingType&&delete o.checkingType;var l=n.theme||{};return{data:{maxAttempts:D.default.getInteractionMaxAttempts(r),feedback:{},exposure:de.isMediaCategoryByInteractionType(e),checkingType:s,taskType:w[e],backgroundColor:l.backgroundColor||"rgba(255,255,255,1)"},question:ae(te.RICHMEDIA),interaction:r}},o=l))||o)||o)||o;t.default=de},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(6)),s=a(n(8)),l=a(n(7)),u=a(n(40)),c=a(n(63)),d=a(n(9)),f=n(0),p=(a(n(2)),a(n(128))),h=a(n(722));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.withRef,a=void 0!==n&&n,s=e.map((function(e){var t="string"==typeof e?e:e.propName,n=(0,h.default)(t);return g({propName:t,defaultPropName:"default".concat(n),onChangePropName:"on".concat(n,"Change"),handleChangePropName:"set".concat(n),controlledPropIndicatorName:"is".concat(n,"Controlled")},"object"===(0,c.default)(e)?e:void 0)})),l=s.reduce((function(e,t){return[].concat((0,u.default)(e),[t.propName,t.defaultPropName,t.onChangePropName])}),[]);return function(e){var t=function(t){(0,o.default)(u,t);var n=m(u);function u(e){var t;return(0,r.default)(this,u),(t=n.call(this,e)).state={},t}return(0,i.default)(u,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this._handlerProps={},s.forEach((function(t){var n=e.props[t.defaultPropName];void 0!==n&&(e.state[t.propName]=n),e._handlerProps[t.handleChangePropName]=function(n){if(e.props[t.onChangePropName]){for(var a,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(a=e.props)[t.onChangePropName].apply(a,[n].concat(i))}var s=void 0!==e.props[t.propName];s||e.setState((0,d.default)({},t.propName,n))}}))}},{key:"render",value:function(){var t=this,n=s.reduce((function(e,n){var a,r=void 0!==t.props[n.propName];return g(g({},e),{},(a={},(0,d.default)(a,n.propName,t[r?"props":"state"][n.propName]),(0,d.default)(a,n.controlledPropIndicatorName,r),a))}),{}),r={};return Object.keys(this.props).forEach((function(e){var n=t.props[e];-1===l.indexOf(e)&&(r[e]=n)})),(0,f.createElement)(e,g(g(g(g({},n),this._handlerProps),r),{},{ref:a?"wrappedInstance":void 0}))}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}},{key:"forceUpdateDefaultProps",value:function(e,t){this.setState(e,t)}}]),u}(f.Component);return(0,p.default)(t,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(67);t.default=function(e){switch(e){case a.PARTIAL:return 50;case a.CORRECT:return 100;case a.WRONG:default:return 0}}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(68)),l=r(n(3)),u=r(n(4)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=r(n(2)),m=a(n(725)),v=a(n(477));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var y=function(e){(0,c.default)(n,e);var t=_(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).queueModelInteractionsChanges=function(){e.context.isModelControlled||(e._batchedModel=!0),e.context.queueModelInteractionsChanges()},e.flushModelInteractionsChanges=function(){e.context.flushModelInteractionsChanges(),void 0!==e._batchedModel&&(e.setState({model:e._batchedModel}),delete e._batchedModel)},e.addInteractions=function(t,n){e.context.addInteractions(t);var a=t[e.props.id];void 0!==a&&(void 0!==e._batchedModel?e._batchedModel=a:e.context.isModelControlled||e.setState({model:a},n))},e.setUserState=function(t,n){e.context.setUserStateById(e.props.id,t),e.context.isUserStateControlled||e.setState({userState:t},n)},e}return(0,u.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.id;this.setState({model:this.context.getModelById(e),userState:this.context.getUserStateById(e)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t={},n=!1;this.context.isModelControlled&&(t.model=this.context.getModelById(e.id),n=!0),this.context.isUserStateControlled&&(t.userState=this.context.getUserStateById(e.id),n=!0),n&&this.setState(t)}},{key:"render",value:function(){var e=this,t=this.state,a=t.model,r=t.userState,o=this.queueModelInteractionsChanges,l=this.flushModelInteractionsChanges,u=this.addInteractions,c=this.setUserState,d=this.context,f=d.language,h=d.removeInteractions,g=(0,s.default)(d,["language","removeInteractions"]);if(!a)return"";var _=a.type,y=m[_],k=f[_],S=v[_];if(S)if(this._interactionType!==_){var T=new S(E(E(E({},this.props),g),{},{removeInteractions:h,queueModelInteractionsChanges:o,flushModelInteractionsChanges:l,addInteractions:u,setUserState:c,model:a,userState:r,language:k}));this._interactionType=_,this.controller=T}else{var b=E(E(E({},this.props),g),{},{model:a,userState:r,language:k});Object.keys(b).forEach((function(t){e.controller.props[t]=b[t]}))}return this.model=a,p.default.createElement(y,(0,i.default)({interaction:n},g,this.props,{model:this.state.model,userState:this.state.userState,language:k},this.controller&&this.controller.props,{ref:function(t){e._interactionRef=t}}))}},{key:"getWrappedInstance",value:function(){return this._interactionRef.refs&&this._interactionRef.refs.wrappedInstance?this._interactionRef.getWrappedInstance():this._interactionRef}},{key:"controller",get:function(){return this._controller},set:function(e){this._controller=e}},{key:"model",get:function(){return this._model},set:function(e){this._model=e}}]),n}(p.Component);t.default=y,y.contextTypes={queueModelInteractionsChanges:h.default.func.isRequired,flushModelInteractionsChanges:h.default.func.isRequired,addInteractions:h.default.func.isRequired,setUserStateById:h.default.func.isRequired,isUserStateControlled:h.default.bool,getModelById:h.default.func.isRequired,getUserStateById:h.default.func.isRequired,isModelControlled:h.default.bool,removeInteractions:h.default.func,language:h.default.shape({}),taskLanguage:h.default.shape({}),ltr:h.default.bool,mode:h.default.string,isEnabled:h.default.bool,ciResultsHidden:h.default.bool,toolbar:h.default.number,readOnlyMode:h.default.bool,showAnswers:h.default.bool,showResults:h.default.bool,results:h.default.shape({}),rootWidth:h.default.number,onCheckingTypeChange:h.default.func,hideMediaOptions:h.default.bool,isSingleMedia:h.default.bool,isMobile:h.default.bool,showClimateResult:h.default.bool,showFlagInteractionButton:h.default.bool,hideUserStateOnClimatePoll:h.default.bool,videoIframeOrigin:h.default.string,availableOffline:h.default.bool,closeOverlayTaskGroup:h.default.func,preventSwipeOnScroll:h.default.func,maxLinesCount:h.default.number,maxCharacters:h.default.number,expandQuestion:h.default.func,isMedia:h.default.bool,onlyShowAnswer:h.default.func,taskPresentationDisplayType:h.default.string,taskPresentationProperties:h.default.shape({}),pageSizeFactor:h.default.number,renderInteractionChangedAlert:h.default.func,isSmallEmbeddedItem:h.default.bool,subtasksUserStates:h.default.shape({}),subtasksToRender:h.default.arrayOf(h.default.string),subtasks:h.default.arrayOf(h.default.string)}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AUDIO",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"CHOICE_MATRIX",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"RATING",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"EMBED_WEBSITE",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"FILL_IN_GAPS",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"FREE_WRITING",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"IMAGE",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"MATCHING",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"MC",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"POLL",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"RICHMEDIA",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"TEXT",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"VIDEO",{enumerable:!0,get:function(){return v.default}});var r=a(n(726)),i=a(n(754)),o=a(n(755)),s=a(n(782)),l=a(n(784)),u=a(n(788)),c=a(n(792)),d=a(n(794)),f=a(n(797)),p=a(n(799)),h=a(n(800)),m=a(n(801)),v=a(n(802))},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.validTypes=void 0;var i=a(n(9)),o=a(n(3)),s=a(n(12)),l=a(n(4)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=r(n(0)),p=n(46),h=(a(n(2)),a(n(11))),m=a(n(330)),v=a(n(1111)),g=a(n(228)),E=a(n(154));n(549);var _,y,k,S=a(n(37)),T=a(n(445)),b=a(n(13)),C=a(n(734)),I=a(n(216)),O=a(n(739)),A=a(n(740)),N=a(n(741)),w=a(n(742)),R=a(n(743)),P=a(n(744)),M=a(n(745)),L=a(n(746)),D=a(n(747)),x=a(n(227)),F=a(n(291)),U=n(52),G=a(n(152)),B=n(76),j=a(n(229)),H=n(114),V=a(n(21)),W=n(391);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var Q=S.default.isMobile;t.validTypes=["audio/mp3","audio/mpeg","audio/ogg","audio/wav","audio/m4a"];var X=(0,B.InteractionHoc)((function(e){return{allowDownloadMedia:e.environment.api.allowDownloadMedia,getEventsContextPromise:e.getEventsContextPromise,serviceUrl:e.environment.serviceUrl}}),{withRef:!0})(_=(0,p.inject)("services")(_=(0,p.observer)((k=y=function(e){(0,u.default)(n,e);var t=K(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleFileUploaded=e.handleFileUploaded.bind((0,s.default)(e)),e.handlePauseAudio=e.handlePauseAudio.bind((0,s.default)(e)),e.handlePlayAudio=e.handlePlayAudio.bind((0,s.default)(e)),e.handleEditClicked=e.handleEditClicked.bind((0,s.default)(e)),e.handlePlayToggleButtonClicked=e.handlePlayToggleButtonClicked.bind((0,s.default)(e)),e.handleTitleBlur=e.handleTitleBlur.bind((0,s.default)(e)),e.handleUploadFileStarted=e.handleUploadFileStarted.bind((0,s.default)(e)),e.handleAutoPlay=e.handleAutoPlay.bind((0,s.default)(e)),e.isVisible=e.isVisible.bind((0,s.default)(e)),e.handleDocumentClicked=e.handleDocumentClicked.bind((0,s.default)(e)),e.state={playing:!1,currentTime:0},e}return(0,l.default)(n,null,[{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"getIsMiniView",value:function(e){return!0===e.hideTexts}},{key:"isInEditor",value:function(){try{var e,t=E.default.getStage();return-1!==(null==t||null===(e=t.appId)||void 0===e?void 0:e.toLowerCase().indexOf("editor"))}catch(n){return!1}}}]),(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.mode,a=t.services.ConfigurationService,r=this._audioPlayerRef;n===U.PLAYER&&r&&this.props.getEventsContextPromise().then((function(t){if(t&&t.data&&t.providerId){var n=Y(Y({},t.data),{},{providerId:t.providerId,version:t.data.contentItemVersion,dispatcherId:t.data.contentItemId,playerType:"TG_PLAYER"}),a="".concat(e.props.serviceUrl).concat(H.PATH).concat(H.EVENTS_PATH);e._mediaKeepAlive=new C.default({eventData:n,restUrl:a}),e._keepAliveId=e._mediaKeepAlive.addElement({element:r})}})),a.isInteractionsThemeV2&&b.default.isMobile()&&this.props.preventSwipeOnScroll(this.audioProgressBarV2)}},{key:"componentWillUnmount",value:function(){this._keepAliveId&&this._mediaKeepAlive.removeElement(this._keepAliveId),document.removeEventListener("click",this.handleDocumentClicked),this._audioPlayerRef&&this._audioPlayerRef.pause()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.mode!==this.props.mode&&(this.setState({playing:e.playing?e.playing:this.state.playing}),this._audioPlayerRef&&(this._audioPlayerRef.pause(),this._audioPlayerRef.currentTime=0))}},{key:"handleDocumentClicked",value:function(){this.isVisible(this.state.playing),document.removeEventListener("click",this.handleDocumentClicked)}},{key:"isVisible",value:function(e){var t=this;this.props.model.data.autoPlay&&this.props.mode!==U.EDITOR&&!n.isInEditor()&&(e?this._audioPlayerRef?this._audioPlayerRef.play().catch((function(){document.addEventListener("click",t.handleDocumentClicked)})):document.addEventListener("click",this.handleDocumentClicked):this._audioPlayerRef&&this._audioPlayerRef.pause(),this.setState({playing:e}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.model,r=t.services.ConfigurationService,i=t.isMultiple;if(r.isInteractionsThemeV2)return i?this.renderAudioV2ForMC():this.renderAudioMediaV2();var o=n.getIsMiniView(this.props),s=a.data.player||W.playerTypes.HTML_PLAYER,l=a.data,u=a.cId,c=this.props.mode===U.EDITOR,d=this.props.language,p=void 0!==l.src,h=!c&&!p;return f.default.createElement("div",{id:u,className:"t2k-audio-component ".concat(c?"audio-edit":"audio-play","\n\t\t\t     ").concat(this.props.isSingleMedia?"single-media":"","\n\t\t\t     ").concat(h?"audio-with-no-content":"")},c&&f.default.createElement("div",{className:"t2i-int-audio-fileupload-container".concat(p?" t2i-hide":"")},f.default.createElement(g.default,{icon:f.default.createElement("span",{className:"t2i-int-audio-fileupload-icon"},f.default.createElement(O.default,null)),validTypes:["audio/mp3","audio/mpeg3","audio/mpeg","audio/ogg","audio/wav","audio/m4a","audio/x-m4a","mp3","mpeg","ogg","wav","m4a"],onFileUploaded:this.handleFileUploaded,limitationConfiguration:this.props.services.ConfigurationService.sizeLimitation,uploadFileStarted:this.handleUploadFileStarted})),c&&!p&&this.renderButtons(),p&&this.renderPlayer(),c&&!o&&f.default.createElement("div",null,f.default.createElement("form",{name:"playerMode",className:"player-mode-form audio-editor-configurations"},!r.reducedEditorCapabilitiesV2&&f.default.createElement("label",{className:"display-configurations"},f.default.createElement("div",{className:"audio-config-title"},d.DISPLAY,":"),f.default.createElement("div",{className:"display-options"},f.default.createElement(G.default,{checked:s===W.playerTypes.HTML_PLAYER,name:"fullPlayerMode",id:"fullPlayerBtn",onChange:function(){e.handleRadioChange(W.playerTypes.HTML_PLAYER)}},d.FULL_PLAYER),f.default.createElement("div",{className:"space-between-radio-buttons"}),f.default.createElement(G.default,{checked:s===W.playerTypes.SINGLE_BUTTON,name:"minPlayerMode",id:"minPlayerBtn",onChange:function(){e.handleRadioChange(W.playerTypes.SINGLE_BUTTON)}},d.MIN_PLAYER))),f.default.createElement("div",{className:"auto-play-configurations"},f.default.createElement("div",{className:"audio-config-title middle-audio-config-title"},d.AUTO_PLAY,":"),f.default.createElement(I.default,{onUserChangeState:this.handleAutoPlay,isEnabled:a.data.autoPlay,styleClass:"toggle-button-autoplay"}))),j.default.getEditorMediaCaptions(a,d,r.reducedEditorCapabilitiesV2)))}},{key:"renderPlayer",value:function(){return n.getIsMiniView(this.props)?this.renderMiniPlayer():this.renderDefaultPlayer()}},{key:"renderDefaultPlayer",value:function(){var e=this,t=this.props,n=t.mode,a=t.model,r=t.allowDownloadMedia,i=t.services.ConfigurationService,o=a.data,s=o.player||W.playerTypes.HTML_PLAYER,l=n===U.EDITOR;return f.default.createElement(m.default,{onChange:this.isVisible,active:!0},f.default.createElement("div",{className:"upper-panel-wrapper".concat(Q?"-mobile":""," player-wrapper ").concat(s===W.playerTypes.HTML_PLAYER?"full-player-mode":"min-player-mode")},this.renderButtons(),f.default.createElement("div",{className:"upper-panel".concat(Q?"-mobile":"")},f.default.createElement("audio",{className:"t2k-audio-component-tag".concat(Q?"-mobile":""),ref:function(t){e._audioPlayerRef=t},src:b.default.getAssetPath(o.src),onPlay:this.handlePlayAudio,onPause:this.handlePauseAudio,controls:!0,controlsList:r?"":"nodownload"}),f.default.createElement("button",{ref:function(t){e._audioButtonRef=t},className:"min-player ".concat(this.state.playing?"t2kInt-icon-pause":"t2kInt-icon-play"),onClick:this.handlePlayToggleButtonClicked})),!l&&j.default.getPlayerMediaCaptions(a,i.isInteractionsThemeV2)))}},{key:"renderMiniPlayer",value:function(){var e=this,t=this.props,a=t.model,r=t.mode,i=t.language,o=t.allowDownloadMedia,s=this.state,l=s.playing,u=s.duration,c=s.currentTime,d=a.data,p=r===U.EDITOR,h=Math.floor(c/u*100);return f.default.createElement(T.default,{ratio:1},f.default.createElement("div",{className:"t2i-int-audio-mini-view"},f.default.createElement("audio",{ref:function(t){e._audioPlayerRef=t},src:b.default.getAssetPath(d.src),onLoadedMetadata:function(t){e.setState({duration:t.target.duration})},onTimeUpdate:function(t){e.setState({currentTime:t.target.currentTime})},onPlay:this.handlePlayAudio,onPause:this.handlePauseAudio,controls:!0,controlsList:o?"":"nodownload"}),f.default.createElement("div",{className:"t2i-int-audio-mini-view-top"},f.default.createElement("div",{className:"t2i-int-audio-mini-view-top-container"},f.default.createElement("span",{className:"t2i-int-audio-fileupload-icon"},f.default.createElement(O.default,null)),p?f.default.createElement("input",{className:"t2i-int-audio-mini-view-top-text t2i-int-audio-mini-view-top-text-edit",type:"text",placeholder:i.PLACEHOLDER_TITLE,maxLength:140,defaultValue:d.title,onClick:n.stopPropagation,onBlur:this.handleTitleBlur}):f.default.createElement("div",{className:"t2i-int-audio-mini-view-top-text t2i-int-audio-mini-view-top-text-view"},d.title)),this.renderButtons()),f.default.createElement("div",{className:"t2i-int-audio-mini-view-progress"},f.default.createElement("div",{className:"t2i-int-audio-mini-view-progress-inner",style:{width:"".concat(h,"%")}})),f.default.createElement("div",{className:"t2i-int-audio-mini-view-bottom",onClick:this.handlePlayToggleButtonClicked},f.default.createElement("span",null,f.default.createElement("span",{className:"t2i-int-audio-mini-view-bottom-icon"},l?f.default.createElement(N.default,null):f.default.createElement(A.default,null)),l?i.PAUSE:i.PLAY))))}},{key:"renderButtons",value:function(){var e=this.props,t=e.mode,n=e.onDelete,a=void 0!==e.model.data.src;return t===U.EDITOR?f.default.createElement("div",{className:"t2i-int-audio-btn-container"},a&&f.default.createElement("span",{onClick:this.handleEditClicked},f.default.createElement(F.default,null)),n&&f.default.createElement("span",{onClick:n},f.default.createElement(x.default,null))):null}},{key:"renderAudioV2ForMC",value:function(){return f.default.createElement("div",{className:"audio-container multiple"},this.renderHTMLAudioPlayerV2(),this.renderPlayIconV2(),f.default.createElement("div",{className:"media-captions"},this.renderAudioTitleV2(),this.renderAudioDurationV2()),this.renderProgressBarV2())}},{key:"renderAudioMediaV2",value:function(){return f.default.createElement(m.default,{onChange:this.isVisible,active:!0},f.default.createElement("div",{className:(0,h.default)("audio-container media",{ltr:this.props.ltr,rtl:!this.props.ltr})},f.default.createElement("div",{className:"media-content"},this.renderHTMLAudioPlayerV2(),this.renderPlayIconV2(),!this.props.isSmallEmbeddedItem&&f.default.createElement("div",{className:"progress-container"},this.renderAudioDurationV2(),this.renderProgressBarV2())),this.renderMediaCaptionsV2()))}},{key:"renderMediaCaptionsV2",value:function(){var e=this.props,t=e.model,n=e.services.ConfigurationService;return!(e.taskPresentationDisplayType===V.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY)&&j.default.getPlayerMediaCaptions(t,n.isInteractionsThemeV2)}},{key:"renderProgressBarV2",value:function(){var e=this,t=this.props.services.ConfigurationService,a=this.state,r=a.playing,i=a.duration,o=a.currentTime;return f.default.createElement("div",{className:"audio-progress-bar-holder",onClick:n.stopPropagation,ref:function(t){e.audioProgressBarV2=t}},f.default.createElement(v.default,{className:"audio-progress-bar ".concat(r?"playing":""),max:i,value:o,step:1,onChange:function(t){return e.updateCurrentTime(t)},tooltip:!1,reverse:!t.ltr}))}},{key:"renderHTMLAudioPlayerV2",value:function(){var e=this,t=this.props.model.data;return f.default.createElement("audio",{ref:function(t){e._audioPlayerRef=t},src:b.default.getAssetPath(t.src),onLoadedMetadata:function(t){e.setState({duration:t.target.duration})},onTimeUpdate:function(t){e.setState({currentTime:t.target.currentTime})},onPlay:this.handlePlayAudio,onPause:this.handlePauseAudio,controls:!0,style:{display:"none"},onEnded:function(){e.updateCurrentTime(0)}})}},{key:"renderPlayIconV2",value:function(){var e=this.props,t=e.isMultiple,n=e.isSmallEmbeddedItem,a=this.state.playing,r=n?f.default.createElement(L.default,null):t?f.default.createElement(w.default,null):f.default.createElement(P.default,null),i=n?f.default.createElement(D.default,null):t?f.default.createElement(R.default,null):f.default.createElement(M.default,null);return f.default.createElement("div",{className:(0,h.default)("play-icon",{"small-embedded":n}),onClick:this.handlePlayToggleButtonClicked},a?i:r)}},{key:"renderAudioDurationV2",value:function(){var e=this.props.isMedia,t=this.state,n=t.duration,a=t.currentTime,r=b.default.formatSecondsToHMS(a,!1),i=b.default.formatSecondsToHMS(n,!1),o=!e;return f.default.createElement("div",{className:"audio-duration"},f.default.createElement("span",null,r),o&&"/",f.default.createElement("span",null,i))}},{key:"renderAudioTitleV2",value:function(){var e=this.props.model.data;return f.default.createElement("div",{className:"title"},e.title)}},{key:"handleFileUploaded",value:function(e,t){var a=this.props.services.LoaderService,r=n.getIsMiniView(this.props);a.displayLoader&&a.hideLoader(),r?this.props.model.setAudio(e,t.name):this.props.model.setAudio(e)}},{key:"handleEditClicked",value:function(){this.props.model.setSrc(void 0)}},{key:"handleRadioChange",value:function(e){this.props.model.setPlayerMode(e),this.state.playing&&this._audioPlayerRef.pause(),this.setState({playing:!1})}},{key:"handleAutoPlay",value:function(e){this.props.model.setAutoPlay(e)}},{key:"handlePauseAudio",value:function(){this.setState({playing:!1})}},{key:"handlePlayAudio",value:function(){this.setState({playing:!0})}},{key:"handlePlayToggleButtonClicked",value:function(e){e.stopPropagation(),this._audioPlayerRef["".concat(this.state.playing?"pause":"play")]()}},{key:"handleTitleBlur",value:function(e){var t=e.target.value;this.props.model.setTitle(t)}},{key:"handleUploadFileStarted",value:function(){var e=this.props.services.LoaderService;e.displayLoader||e.showLoader()}},{key:"updateCurrentTime",value:function(e){this.setState({currentTime:e}),this._audioPlayerRef.currentTime=e}},{key:"componentLostFocus",value:function(){this._audioPlayerRef&&this._audioPlayerRef.pause(),this.setState({playing:!1})}}]),n}(f.Component),y.defaultProps={hideTexts:!1,preventSwipeOnScroll:function(){},ltr:!0,taskPresentationDisplayType:""},_=k))||_)||_)||_;t.default=X},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(13))),h=r(n(728)),m=n(118),v=r(n(244)),g=r(n(60)),E=r(n(58)),_=r(n(41));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var k=0,S=1,T=2,b=4,C=function(e){(0,u.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={mode:k},e.handleCancelClick=e.handleCancelClick.bind((0,l.default)(e)),e.handleFileSelected=e.handleFileSelected.bind((0,l.default)(e)),e}return(0,s.default)(n,[{key:"render",value:function(){var e,t=this.state.mode,n=this.props.generalSizeLimit;switch(t){case k:default:e=this.renderUploadMode();break;case S:e=n?f.default.createElement(f.default.Fragment,null,this.renderUploadMode(),this.renderErrorPopup()):this.renderWrongSizeMode();break;case T:e=this.renderUploadingMode();break;case b:e=this.renderErrorMode()}return f.default.createElement("div",{className:"t2i-file-upload"},e)}},{key:"renderUploadMode",value:function(){var e=this.props,t=e.validTypes,n=e.dropzoneLanguage,a=e.icon,r=e.openModalCallback,i=e.disabled;return f.default.createElement(h.default,{icon:a,validTypes:t,language:n,openModalCallback:r,onFileSelected:this.handleFileSelected,disabled:i})}},{key:"renderWrongSizeMode",value:function(){var e=this.props.language;return f.default.createElement("div",null,e.WRONG_SIZE)}},{key:"renderUploadingMode",value:function(){return this.props.showWhileUploading?this.renderUploadMode():this.props.hideSpinner?null:f.default.createElement(g.default,{size:g.default.Sizes.SMALL})}},{key:"renderErrorMode",value:function(){var e=this.props.language;return f.default.createElement("div",null,e.MISC_ERROR)}},{key:"uploadFile",value:function(e){for(var t=this,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var i=this.props.uploadFile;this.setState({mode:T,progress:0},(function(){t.props.uploadFileStarted(),t._abortFn=i.apply(void 0,[e,t._handleUploadFileProgress.bind(t),t._handleUploadFileDone.bind(t,e)].concat(a))}))}},{key:"ValidateFileSizeBeforeUpload",value:function(e,t){var n=this.props,a=n.limitationConfiguration,r=n.generalSizeLimit;if(a)return!!a[t]&&e/1024/1024<=a[t];if(r){var o,s=e/1024/1024,l=s<=r;return _.default.sendEvent(_.default.TITLES.UPLOAD_FILE_LEARNER,_.default.COMPONENTS.INTERACTIONS,(o={},(0,i.default)(o,_.default.PARAMS.FILE_SIZE,"".concat(s," MB")),(0,i.default)(o,_.default.PARAMS.FILE_TYPE,t),o)),l}return!0}},{key:"handleCancelClick",value:function(){var e=this;this.setState({mode:k},(function(){e._abortFn(),e._abortFn=void 0}))}},{key:"handleFileSelected",value:function(e){this.ValidateFileSizeBeforeUpload(e.size,e.type)?this.uploadFile(e):this.setState({mode:S})}},{key:"_handleUploadFileProgress",value:function(e){this.setState({progress:e})}},{key:"_handleUploadFileDone",value:function(e,t,n){if(this._abortFn=void 0,t)this.setState({mode:b,progress:void 0});else{this.setState({mode:k,progress:void 0});var a=this.props.onFileUploaded;a&&a(p.default.getAssetPath(n),e)}}},{key:"renderErrorPopup",value:function(){var e=this,t=this.props,n=t.language,a=t.generalSizeLimit;return f.default.createElement(E.default,{styleClass:"t2i-file-upload-error-dialog",theme:E.default.THEMES.LIGHT,content:f.default.createElement(f.default.Fragment,null,f.default.createElement("div",null,n.WRONG_SIZE_LEARNER.replace("{maxSize}",a)),f.default.createElement("div",null,n.WRONG_SIZE_LEARNER_NOTE)),close:function(){e.setState({mode:k})}})}}],[{key:"isValidUploadSize",value:function(e){return e.size/1024/1024<=40}}]),n}(f.Component);C.defaultProps={icon:void 0,hideSpinner:!1,uploadFileStarted:function(){},dropzoneLanguage:void 0,limitationConfiguration:void 0,openModalCallback:void 0,showWhileUploading:!1,disabled:!1,generalSizeLimit:void 0};var I=(0,m.ComponentHoc)((function(e){return{uploadFile:e.uploadFile,language:e.language.react.component.fileUpload}}),{withRef:!0,mapFnForProperty:{language:v.default}})(C);t.default=I},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(729));n(730);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(13))),h=n(118),m=r(n(244));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var g=0,E=1,_=2,y=4,k=function(e){(0,u.default)(n,e);var t=v(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleDrop=e.handleDrop.bind((0,l.default)(e)),e.showFileChooser=e.showFileChooser.bind((0,l.default)(e)),e.handleFileChosen=e.handleFileChosen.bind((0,l.default)(e)),e.handleMouseOver=e.handleMouseOver.bind((0,l.default)(e)),e.handleDragOver=e.handleDragOver.bind((0,l.default)(e)),e.handleMouseLeave=e.handleMouseLeave.bind((0,l.default)(e)),e.state={mode:g},e.handleKeyDown=function(t){var n=e.props.openModalCallback;13===t.keyCode&&(n?n(t):e.showFileChooser(t))},e}return(0,s.default)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.language,r=n.children,o=n.icon,s=n.openModalCallback,l=n.disabled,u="";switch(this.state.mode){case g:default:e=a.DEFAULT,l&&(u+=" disabled");break;case E:e=a.HOVER,u+=" active";break;case _:e=a.DRAG,u+=" active";break;case y:e=a.ERROR}var c=e,d=c.TITLE,h=c.SUBTITLE,m=c.DISCLAIMER,v=l?{}:{onDrop:this.handleDrop,onClick:s||this.showFileChooser,onMouseOver:this.handleMouseOver,onDragOver:this.handleDragOver,onMouseLeave:this.handleMouseLeave,onDragLeave:this.handleMouseLeave,onKeyDown:this.handleKeyDown};return f.default.createElement("div",(0,i.default)({className:"t2i-dropzone".concat(u)},v,{tabIndex:"0",role:"button","aria-controls":"filename"}),f.default.createElement("div",{className:"t2i-dropzone-info"},f.default.createElement("div",{className:"t2i-dropzone-icon"},o),f.default.createElement("div",{className:"t2i-dropzone-title"},d),f.default.createElement("div",{className:"t2i-dropzone-subtitle"},h),f.default.createElement("div",{className:"t2i-dropzone-disclaimer"},m)),f.default.createElement("div",{className:"t2i-dropzone-input-container"},f.default.createElement("input",{ref:function(e){t._uploadInputRef=e},type:"file",accept:p.default.isCordova()?"*":this.props.validTypes,onChange:!l&&this.handleFileChosen,onClick:l?void 0:function(){t._uploadInputRef.value=null},tabIndex:"-1"})),r)}},{key:"handleDrop",value:function(e){n.preventDragEvent(e);var t=e.dataTransfer.files[0];this._onFileSelected(t)}},{key:"handleFileChosen",value:function(e){var t=e.target.files[0];this._onFileSelected(t)}},{key:"handleMouseOver",value:function(e){n.preventDragEvent(e),this.setState({mode:E})}},{key:"handleDragOver",value:function(e){n.preventDragEvent(e),this.setState({mode:_})}},{key:"handleMouseLeave",value:function(e){n.preventDragEvent(e),this.setState({mode:g})}},{key:"showFileChooser",value:function(e){e.stopPropagation(),this._uploadInputRef.click()}},{key:"_onFileSelected",value:function(e){var t,a=this.state.mode,r=this.props,i=r.onFileSelected,o=r.validTypes,s=r.onFileTypeInvalidCb;n.isFileValidByValidTypes(e,o)?(i&&i(e),t=g):(t=y,s&&s()),a!==t&&this.setState({mode:t})}}],[{key:"preventDragEvent",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"getFileType",value:function(e){var t=e.type;return t||(t=e.name.substring(e.name.lastIndexOf(".")+1)),t}},{key:"isFileValidByValidTypes",value:function(e,t){var a=n.getFileType(e);return!!a&&!!t.join(",").match(a)}}]),n}(f.Component);k.defaultProps={children:void 0,icon:void 0,onFileSelected:void 0,onFileTypeInvalidCb:void 0,disabled:!1};var S=(0,h.ComponentHoc)((function(e){return{language:e.language.react.component.dropzone}}),{mapFnForProperty:{language:m.default}})(k);t.default=S},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.ratio,n=e.heightAdjustment,a=e.children;return c.default.createElement("div",{className:"t2k-ratio-container"},c.default.createElement("div",{style:{paddingBottom:"calc(".concat(100*t,"% + (").concat(n,"))")}}),c.default.createElement("div",{className:"t2k-ratio-container-content"},a))}}]),n}(c.Component);t.default=f,f.defaultProps={heightAdjustment:"0px",children:void 0}},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(289)).default;t.default=r},,,,function(e,t,n){},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"evenodd"},[a.createElement("path",{d:"M21.554 20.814c0 5.288.011 10.576-.02 15.864-.004.487-.291.971-.446 1.457-.426-.196-.916-.306-1.268-.599-2.956-2.466-5.907-4.94-8.816-7.466-1.388-1.205-2.888-1.881-4.72-1.787-1.382.072-2.771.036-4.157.009-1.433-.028-2.115-.764-2.119-2.267-.01-3.368-.01-6.737-.002-10.106.005-1.556.61-2.209 2.115-2.243 1.46-.033 2.922-.018 4.384-.008 1.56.012 2.915-.495 4.114-1.57a808.402 808.402 0 0 1 9.185-8.114c.365-.317.888-.435 1.337-.645.138.498.393.995.395 1.493.03 5.327.018 10.654.018 15.982M32.122 2.854L34.909 0c10.738 10.302 11.816 30.496.069 42.405l-2.813-2.947c9.3-9.518 9.658-26.575-.043-36.604",key:0}),a.createElement("path",{d:"M29.146 6.094c8.032 8.083 7.877 22.312.01 30.18l-2.803-2.954c6.107-6.74 6.36-17.206-.082-24.347l2.875-2.88",key:1})]))}r.defaultProps={width:"44",height:"43",viewBox:"0 0 44 43"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M6 4l20 12-20 12z"}))}r.defaultProps={version:"1.1",width:"32",height:"32",viewBox:"0 0 32 32"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M4 4h10v24h-10zM18 4h10v24h-10z"}))}r.defaultProps={version:"1.1",width:"32",height:"32",viewBox:"0 0 32 32"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fillRule:"evenodd",d:"M19.938 0c10.493 0 19 8.507 19 19s-8.507 19-19 19C9.444 38 .937 29.493.937 19S9.444 0 19.938 0z",opacity:".702",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M27.161 18.005l-9.315-5.874c-.275-.164-.617-.137-.876-.137-1.033 0-1.028.799-1.028 1.001v12.006c0 .171-.004 1.001 1.028 1.001.259 0 .601.027.876-.137l9.315-5.874c.764-.456.632-.993.632-.993s.132-.537-.632-.993z",key:1})])}r.defaultProps={width:"39",height:"38"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fillRule:"evenodd",d:"M19.938 0c10.493 0 19 8.507 19 19s-8.507 19-19 19C9.444 38 .937 29.493.937 19S9.444 0 19.938 0z",opacity:".702",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M23.5 26a1.5 1.5 0 0 1-1.5-1.5v-11a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-1.5 1.5zm-7 0a1.5 1.5 0 0 1-1.5-1.5v-11a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-1.5 1.5z",key:1})])}r.defaultProps={width:"39",height:"38"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#c4c4c4",fillRule:"evenodd",d:"M35.823 0c19.33 0 35 15.67 35 35s-15.67 35-35 35-35-15.67-35-35 15.67-35 35-35z",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M46.753 33.325L31.024 23.278c-.465-.281-1.042-.234-1.479-.234-1.744 0-1.736 1.365-1.736 1.711v20.537c0 .291-.008 1.71 1.736 1.71.437 0 1.014.047 1.479-.233l15.729-10.048c1.291-.779 1.068-1.698 1.068-1.698s.223-.919-1.068-1.698z",key:1})])}r.defaultProps={width:"60",height:"60",viewBox:"1 0 70 70"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#c4c4c4",fillRule:"evenodd",d:"M29.959 0c16.546 0 29.959 13.413 29.959 29.959S46.505 59.918 29.959 59.918 0 46.505 0 29.959 13.413 0 29.959 0z",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M36.442 40.997h-1.731a1.5 1.5 0 0 1-1.5-1.5V20.422a1.5 1.5 0 0 1 1.5-1.5h1.731a1.5 1.5 0 0 1 1.5 1.5v19.075a1.5 1.5 0 0 1-1.5 1.5zm-11.038 0h-1.73a1.5 1.5 0 0 1-1.5-1.5V20.422a1.5 1.5 0 0 1 1.5-1.5h1.73a1.5 1.5 0 0 1 1.5 1.5v19.075a1.5 1.5 0 0 1-1.5 1.5z",key:1})])}r.defaultProps={width:"60",height:"60",viewBox:"0 0 60 60"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M19.938 0c10.493 0 19 8.507 19 19s-8.507 19-19 19C9.444 38 .937 29.493.937 19S9.444 0 19.938 0z",opacity:".702",key:0}),a.createElement("g",{id:"icon_sound",transform:"translate(-150 -160)",key:1},[a.createElement("rect",{id:"bg_icon",width:"95",height:"60",transform:"translate(122 149)",fill:"none",opacity:"0.5",key:0}),a.createElement("path",{id:"Path_935",d:"M8.621.038a.445.445,0,0,0-.482.085L3.562,4.446H.444A.444.444,0,0,0,0,4.89v6.222a.444.444,0,0,0,.444.444H3.562L8.139,15.88a.445.445,0,0,0,.75-.323V.446A.445.445,0,0,0,8.621.038Z",transform:"translate(161.27 171.268)",key:1}),a.createElement("path",{id:"Path_936",d:"M244.959,129.274l-.791.791a.536.536,0,0,0-.079.686,2.772,2.772,0,0,1,0,3.272.536.536,0,0,0,.079.686l.791.791a.565.565,0,0,0,.848-.066,4.99,4.99,0,0,0,0-6.094A.565.565,0,0,0,244.959,129.274Z",transform:"translate(-71.019 46.773)",opacity:"0.3",key:2}),a.createElement("path",{id:"Path_937",d:"M306.6,68.67a.54.54,0,0,0-.8-.013l-.786.819a.6.6,0,0,0-.014.8,7.754,7.754,0,0,1,0,9.826.6.6,0,0,0,.014.8l.786.819a.54.54,0,0,0,.8-.013,10.138,10.138,0,0,0,0-13.037Z",transform:"translate(-128.702 104.351)",opacity:"0.3",key:3})])])}r.defaultProps={width:"25",height:"25",viewBox:"0 0 40 38"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M19.938 0c10.493 0 19 8.507 19 19s-8.507 19-19 19C9.444 38 .937 29.493.937 19S9.444 0 19.938 0z",opacity:".702",key:0}),a.createElement("path",{fillRule:"evenodd",d:"M23.5 26a1.5 1.5 0 0 1-1.5-1.5v-11a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-1.5 1.5zm-7 0a1.5 1.5 0 0 1-1.5-1.5v-11a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-1.5 1.5z",key:1})])}r.defaultProps={width:"25",height:"25",viewBox:"0 0 39 38"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DEFAULT_FONT_SIZE=t.TOOLS_V2_EXTENDED=t.TOOLS_V2=t.BASIC_FORMAT=t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=t.MINFORMAT_WITH_UPLOAD_FILES=t.MINFORMAT_PLUS_IMAGE=t.MINFORMAT=t.DEFAULT=t.REGULARPARAGRAPH=t.LONGPARAGRAPH=t.SHORTPARAGRAPH=t.BOXAREA=t.LINEAREA=void 0;var i=a(n(23)),o=a(n(3)),s=a(n(4)),l=a(n(12)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=a(n(9)),p=a(n(141)),h=r(n(0)),m=(a(n(2)),a(n(37))),v=a(n(60)),g=a(n(14)),E=a(n(101));n(73),n(553),n(554),n(555),n(556),n(557),n(558),n(559),n(560),n(561),n(562),n(563),n(564),n(565),n(566),n(567),n(568);var _=a(n(292)),y=a(n(749));n(750);var k,S=a(n(752));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var I=m.default.isMobile;t.LINEAREA=0;t.BOXAREA=1;t.SHORTPARAGRAPH=1;t.LONGPARAGRAPH=2;t.REGULARPARAGRAPH=3;t.DEFAULT=0;t.MINFORMAT=1;t.MINFORMAT_PLUS_IMAGE=2;t.MINFORMAT_WITH_UPLOAD_FILES=5;t.MINFORMATNOFONTS_WITH_UPLOAD_FILES=6;t.BASIC_FORMAT=7;t.TOOLS_V2=8;t.TOOLS_V2_EXTENDED=9;t.DEFAULT_FONT_SIZE="14";var O=function(e){switch(e){case 0:return"";case 1:return"box";default:return""}},A=function(e){switch(e){case 1:return"small-paragraph";case 2:return"big-paragraph";case 3:default:return""}},N=["bold","italic","underline","undo","redo"],w=["bold","italic","underline","color","fontFamily","clearFormatting","undo","redo"],R=N.concat("fontFamily","fontSize","color","outdent","indent","align","formatOL","formatUL","insertLink","clearFormatting","customUploadFile"),P=(k={},(0,f.default)(k,0,["bold","italic","underline","fontSize","color","fontFamily","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","|","insertLink","undo","redo","rightToLeft","leftToRight","clearFormatting","customUploadImage"]),(0,f.default)(k,1,w),(0,f.default)(k,2,w.concat("customUploadImage")),(0,f.default)(k,5,w.concat(["insertLink","customUploadImage","insertFile"])),(0,f.default)(k,6,N.concat(["insertLink","insertFile"])),(0,f.default)(k,7,["bold","italic","underline","customUploadFile"]),(0,f.default)(k,8,["insertLink","undo","redo"]),(0,f.default)(k,9,R),k),M={toolbarInline:!1,toolbarButtons:P[0],toolbarButtonsMD:P[0],toolbarButtonsSM:P[0],toolbarButtonsXS:P[1],theme:"custom",pastePlain:!1,linkAlwaysBlank:!0,imageMove:!0,htmlAllowedTags:[".*"],imageEditButtons:["imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"]},L=function(e){(0,u.default)(n,e);var t=C(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSimpleImageUploadInputChange=e.onSimpleImageUploadInputChange.bind((0,l.default)(e)),e.onSimpleFileUploadInputChange=e.onSimpleFileUploadInputChange.bind((0,l.default)(e)),e.addImage=e.addImage.bind((0,l.default)(e)),e.addFile=e.addFile.bind((0,l.default)(e)),e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.initFroala()}},{key:"shouldComponentUpdate",value:function(e){return e.placeholder!==this.props.placeholder||(void 0!==e.html&&e.html!==this.getHTML()&&(0,_.default)(this._feditRef).froalaEditor("html.set",e.html),!1)}},{key:"componentDidUpdate",value:function(){(0,_.default)(this._feditRef).froalaEditor("destroy"),this.initFroala()}},{key:"componentWillUnmount",value:function(){var e=(0,_.default)(this._feditRef);e.off("froalaEditor.contentChanged"),e.off(),e.froalaEditor("destroy")}},{key:"render",value:function(){var e=this,t=void 0===this.props.defaultHtml?this.props.html:this.props.defaultHtml||"";return h.default.createElement("div",{id:this.props.id,ref:function(t){e._containerRefs=t},className:"text-component text-edit ".concat(A(this.props.paragraphSize)," ").concat(O(this.props.type))},h.default.createElement("div",{className:"fr-popup color-picker-container"}),h.default.createElement("div",(0,i.default)({className:"fedit",ref:function(t){e._feditRef=t}},(0,E.default)(n.ParseSrcAssetPath(t),!1))),h.default.createElement("div",{className:"msg",ref:function(t){e._msgRef=t}}),h.default.createElement("input",{type:"file",ref:function(t){e._simpleImageUploadInputRef=t},accept:["image/*"],onClick:function(){e._simpleImageUploadInputRef.value=null},onChange:this.onSimpleImageUploadInputChange,style:{display:"none"}}),h.default.createElement("input",{type:"file",ref:function(t){e._simpleFileUploadInputRef=t},accept:["*"],onClick:function(){e._simpleFileUploadInputRef.value=null},onChange:this.onSimpleFileUploadInputChange,style:{display:"none"}}),h.default.createElement(v.default,{size:v.default.Sizes.SMALL,ref:function(t){e._loader=t},isLoading:!1}))}},{key:"addCustomButtons",value:function(){_.default.FroalaEditor.DefineIcon("customUploadImage",{NAME:"image"}),_.default.FroalaEditor.RegisterCommand("customUploadImage",{title:"Upload Image",focus:!1,undo:!1,refreshAfterCallback:!1,callback:this.addImage}),_.default.FroalaEditor.DefineIcon("customUploadFile",{NAME:"paperclip"}),_.default.FroalaEditor.RegisterCommand("customUploadFile",{title:"Upload File",focus:!1,undo:!1,refreshAfterCallback:!1,callback:this.addFile})}},{key:"initFroala",value:function(){var e=this;this.addCustomButtons();var t=this.textEditModel({placeholder:this.props.placeholder,toolbar:this.props.toolbar});_.default.FroalaEditor.DEFAULTS.key="2YRUFVRf1XPLEb1IFd1==";var a=(0,_.default)(this._feditRef);a.on("froalaEditor.beforeImageUpload",(function(){return!1})),a.on("froalaEditor.contentChanged",(function(t,n){var r=t.target.getElementsByClassName("fr-view")[0],i=r.textContent.trim();e.props.onChange?e.props.onChange({html:n.html.get()}):void 0!==e.props.html&&(0,_.default)(e._feditRef).froalaEditor("html.set",e.props.html),0===i.length?(n.$box.removeClass("show-froala"),e.props.onHasContentChanged&&e.props.onHasContentChanged(!1)):!n.$box.hasClass("show-froala")&&n.$box.hasClass("focus")&&(n.$box.addClass("show-froala"),e.props.onHasContentChanged&&e.props.onHasContentChanged(!0)),e.props.useEnterKeyForSave&&(a.froalaEditor("edit.on"),r.focus())})),a.on("froalaEditor.focus",(function(n,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.selection.restore();var i=n.target.getElementsByClassName("fr-view")[0],o=i.textContent.trim(),s=o.length>0&&(!a.$placeholder||o!==a.$placeholder[0].innerHTML)?"focus show-froala":"focus";a.$box.addClass(s),I&&(0,S.default)(i),e.props.onFocus&&!r.nonUserEvent&&e.props.onFocus(),(0,_.default)(e._msgRef).hide(),t.multiLine&&a.$tb.css({"margin-top":-1*a.$tb.outerHeight()})})),a.on("froalaEditor.blur",(function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.$box.attr("data-ttk-editor-popup"))n.selection.save();else{n.$box.removeClass("show-froala focus"),e.validate(),n.$box.find("div[contentEditable]").blur();var r=n.html.get(),i=n.el.innerHTML,o=-1===i.indexOf("<img")?r:i;e.props.onBlur&&!a.nonUserEvent&&e.props.onBlur({html:o})}})),a.on("froalaEditor.click",(function(){e.props.onClick&&e.props.onClick()})),a.on("froalaEditor.image.beforeUpload froalaEditor.file.beforeUpload",(function(t,n,r){var i=r&&r[0];if(i){var o=a.froalaEditor("image.get");o&&a.froalaEditor("image.remove",o),e._loader.on(),e._uploadFile(i)}return!1})),a.on("froalaEditor.keydown",(function(t,r,i){var o=i.which;e.props.keydownEventFn&&e.props.keydownEventFn(t,r,i),n.isDeletionKey(o)&&n.handleContentDeletion(a),e.props.useEnterKeyForSave&&13===o&&!i.shiftKey&&g.default.isPC()&&(a.froalaEditor("cursor.backspace"),a.froalaEditor("edit.off"),a.froalaEditor("events.trigger","contentChanged",[t,r],!0))})),a.froalaEditor(t),(0,_.default)(this._feditRef).froalaEditor("core.isEmpty")&&this.props.defaultStyle&&6!==this.props.toolbar&&this.setDefaultStyle(this.props.defaultStyle),this.props.focusOnCreation&&(0,_.default)(this._containerRefs).find(".fr-element").focus()}},{key:"findclassNameParent",value:function(e,t,n){return n>0?e&&e.classList.contains(t)?e.id:(n--,this.findclassNameParent(e.parentElement,t,n)):null}},{key:"setDefaultStyle",value:function(e){(0,_.default)(this._feditRef).froalaEditor("commands.selectAll"),e.fontFamily&&(0,_.default)(this._feditRef).froalaEditor("format.applyStyle","font-family",e.fontFamily),e.fontColor&&(0,_.default)(this._feditRef).froalaEditor("format.applyStyle","color",e.fontColor),(0,_.default)(this._feditRef).froalaEditor("selection.clear"),(0,_.default)(this._feditRef).froalaEditor("events.trigger","blur",[{nonUserEvent:!0}])}},{key:"getHTML",value:function(){return(0,_.default)(this._feditRef).froalaEditor("html.get")}},{key:"validate",value:function(){var e=this;if(this.props.validations){var t,n=(0,_.default)(this._feditRef).froalaEditor("html.get");this.props.validations.forEach((function(a){if(t=a.callback(n)){var r=(0,_.default)(e._msgRef);r.show(),r.removeClass().addClass("msg ".concat(t.type)),r.html(t.text)}}))}}},{key:"textEditModel",value:function(e){var t=(0,p.default)(M),n=Object.keys(y.default).map((function(e){return y.default[e]})).reduce((function(e,t){return b(b({},e),{},(0,f.default)({},t.value,t.name))}),{}),a=P[e.toolbar],r=P[1];return t.toolbarSticky=this.props.toolbarSticky,t.toolbarBottom=this.props.toolbarBottom,t.htmlAllowedEmptyTags=this.props.allowEmptySpans?["span"]:t.htmlAllowedEmptyTags,a&&(t.toolbarButtons=a,t.toolbarButtonsMD=a,t.toolbarButtonsSM=a,t.toolbarButtonsXS=0===e.toolbar?r:a),t.placeholderText=e.placeholder,t.fontSize=["8","9","10","11","12","14","15","16","17","18","20","22","24","26","30","32","36","42","60","72"],t.fontFamily=n,t.pasteDeniedAttrs=["contenteditable","class","id"],t.multiLine=!1!==this.props.multiLine,t.multiLine||(t.enter=_.default.FroalaEditor.ENTER_BR,t.pastePlain=!0,t.shortcutsEnabled=[],t.htmlAllowedEmptyTags=[],t.toolbarInline=!0,t.toolbarVisibleWithoutSelection=!0),t}},{key:"onSimpleImageUploadInputChange",value:function(e){var t=e.target.files[0];t&&(this._loader.on(),this._uploadFile(t))}},{key:"onSimpleFileUploadInputChange",value:function(e){var t=e.target.files[0];t&&(this._loader.on(),this._uploadFile(t))}},{key:"addImage",value:function(){this._simpleImageUploadInputRef.click()}},{key:"addFile",value:function(){this._simpleFileUploadInputRef.click()}},{key:"_uploadFile",value:function(e){var t=this,n=e.name;e instanceof Blob&&(e=new File([e],n,{type:e.type}));var a=e.type.match(/image\/*/);this.props.uploadFile(e,void 0,(function(e,r){var i=(0,_.default)(t._feditRef);e?(t._loader.off(),i.froalaEditor("image.insert",void 0)):a?t.props.insertImageAsLink?(i.froalaEditor("link.insert",r,n,{"data-image-link":r}),t._loader.off(),i.on("froalaEditor.link.inserted",(function(){i.find(".fr-element").focus(),i.off("froalaEditor.link.inserted")}))):t.props.insertImageAsFile?t._insertFileToEditor(n,r):(i.froalaEditor("image.insert",r,!0,{"custom-added-image":!0}),i.on("froalaEditor.image.inserted",(function(){i.find(".fr-element").focus(),i.off("froalaEditor.image.inserted"),t._loader.off()}))):t._insertFileToEditor(n,r)}))}},{key:"_insertFileToEditor",value:function(e,t){var n=(0,_.default)(this._feditRef);n.froalaEditor("file.insert",t,e),this._loader.off(),n.on("froalaEditor.file.inserted",(function(){n.find(".fr-element").focus(),n.off("froalaEditor.file.inserted")}))}}],[{key:"ParseSrcAssetPath",value:function(e){if(e&&-1!==e.indexOf("src=")){var t=e.match(/src\=([^\s]*)\s/);if(null===t)return e;var n=(t=t[1]).substring(1,t.length-1);return e=e.replace(n,g.default.getAssetPath(n))}return e}},{key:"isDeletionKey",value:function(e){return 8===e||46===e}},{key:"handleContentDeletion",value:function(e){var t=e.froalaEditor("link.get");t&&(0,_.default)(t).remove()}}]),n}(h.Component);L.defaultProps={placeholder:void 0,id:void 0,toolbar:0,type:0,paragraphSize:3,onHasContentChanged:void 0,insertImageAsLink:!1,insertImageAsFile:!1,useEnterKeyForSave:!1,toolbarSticky:!1,toolbarBottom:void 0};var D=L;t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={ARIAL:{name:"Arial",value:"Arial,Helvetica,sans-serif"},GEORGIA:{name:"Georgia",value:"Georgia,serif"},IMPACT:{name:"Impact",value:"Impact,Charcoal,sans-serif"},TAHOMA:{name:"Tahoma",value:"Tahoma,Geneva,sans-serif"},TIMES_NEW_ROMAN:{name:"Times New Roman",value:"'Times New Roman',Times,serif"},VERDANA:{name:"Verdana",value:"Verdana,Geneva,sans-serif"},ROBOTO:{name:"Roboto",value:"Roboto,sans-serif"},OSWALD:{name:"Oswald",value:"Oswald,sans-serif"},MONTSERRAT:{name:"Montserrat",value:"Montserrat,sans-serif"},OPEN_SANS:{name:"Open Sans Condensed",value:"'Open Sans Condensed',sans-serif"},ALEF:{name:"Alef",value:"Alef,sans-serif"}}},function(e,t,n){"use strict";var a=n(1),r=a(n(292)),i=a(n(751));r.default.FE.DefineIcon("colors",{NAME:"tint"}),r.default.FE.RegisterCommand("color",{plugin:"colors",title:"Colors",popup:!0,undo:!1,focus:!1,refreshOnCallback:!1,callback:function(){this.colors.toggleColorsPopup()}}),r.default.FE.PLUGINS.colors=i.default},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(0)),s=a(n(24)),l=a(n(262)),u=a(n(292)),c=function(){function e(t){var n=this;if((0,r.default)(this,e),this._onClickOutside=this._onClickOutside.bind(this),this._onClickTab=this._onClickTab.bind(this),this._onColorPickerChangeComplete=this._onColorPickerChangeComplete.bind(this),!(this instanceof e))return new e(t);this.isVisible=!1,this.editor=t,this.colorTabs={text:"rgba(0,0,0,1)",background:"rgba(255,255,255,1)",selected:"text"},this.colorPickerContainer=t.$el.parents(".text-component.text-edit").find(".color-picker-container"),this.colorPickerRef=o.default.createRef(),s.default.render(this._renderColorPicker(),this.colorPickerContainer[0],(function(){var e=n._renderTabs();n.colorPickerContainer.prepend(e)}))}return(0,i.default)(e,[{key:"_renderColorPicker",value:function(){return o.default.createElement("div",{className:"t2i-color-picker"},o.default.createElement(l.default,{ref:this.colorPickerRef,color:this.colorTabs.text,updateState:this._onColorPickerChangeComplete,styleClass:"t2i-color-picker-sketch",pickerClassName:"sketch-picker"}))}},{key:"_renderTabs",value:function(){var e=this,t=["text","background"].map((function(t){var n=e.colorTabs.selected===t?"fr-selected-tab":"",a=e.editor.language.translate(t);return'<span\n\t\t\t\tdata-param1="text"\n\t\t\t\tdata-cmd="colorChangeSet"\n\t\t\t\tclass="fr-colors-tab '.concat(t," ").concat(n,'"\n\t\t\t\ttitle="').concat(a,'"\n\t\t\t>').concat(a,"</span>")})).join("");return'<div class="fr-colors-tabs fr-group">'.concat(t,"</div>")}},{key:"_onClickOutside",value:function(e){var t=(0,u.default)(e.target);t.closest(".color-picker-container")[0]===this.colorPickerContainer[0]||(this._hidePopup(),t.closest(".fr-box")[0]===this.editor.$box[0]||this.editor.events.trigger("blur"))}},{key:"_onClickTab",value:function(e){this._applyColor();var t=e.target.classList.contains("text")?"text":"background";if(t!==this.colorTabs.selected){this.colorTabs.selected=t;var n=this.colorTabs[t];this.colorPickerRef.current.setColor(n),this.colorPickerContainer.find(".fr-colors-tabs .fr-selected-tab").removeClass("fr-selected-tab"),this.colorPickerContainer.find(".fr-colors-tabs ."+t).addClass("fr-selected-tab")}}},{key:"_onColorPickerChangeComplete",value:function(e){this._setStateColor(e)}},{key:"toggleColorsPopup",value:function(){this.isVisible?this._hidePopup():this._showPopup()}},{key:"_showPopup",value:function(){this.isVisible||(this.colorPickerContainer.show(),this.colorPickerContainer[0].style.top="36px",this.isVisible=!0,this.editor.$box.attr("data-ttk-editor-popup","color"),this.colorPickerContainer.find(".fr-colors-tabs").on("click",this._onClickTab),(0,u.default)(window.document).on("click",this._onClickOutside))}},{key:"_hidePopup",value:function(){this.isVisible&&(this.colorPickerContainer.hide(),this.isVisible=!1,this.editor.$box.attr("data-ttk-editor-popup",""),this.colorPickerContainer.find(".fr-colors-tabs").off("click",this._onClickTab),(0,u.default)(window.document).off("click",this._onClickOutside),this._applyColor())}},{key:"_setStateColor",value:function(e){this.colorTabs[this.colorTabs.selected]=e}},{key:"_applyColor",value:function(){var e=this.colorTabs[this.colorTabs.selected],t="text"===this.colorTabs.selected?"color":"background-color";this.editor.events.trigger("focus"),this.editor.format.applyStyle(t,e)}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(285));t.default=function(e){window.setTimeout((function(){e.scrollIntoViewIfNeeded();var t=function(){document.activeElement===e&&e.scrollIntoViewIfNeeded()};r.default.register(t),window.setTimeout((function(){r.default.unregister(t)}),500)}))}},function(e,t,n){},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MIN_WIDTH=void 0;var i,o=a(n(40)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=r(n(0)),h=n(46),m=(a(n(2)),a(n(37))),v=n(52),g=a(n(152)),E=a(n(293)),_=a(n(122)),y=a(n(452)),k=r(n(131)),S=n(394);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var b=m.default.isPhone;t.MIN_WIDTH=320;var C=(0,h.observer)(i=function(e){(0,c.default)(n,e);var t=T(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).addRow=e.addRow.bind((0,u.default)(e)),e.addColumn=e.addColumn.bind((0,u.default)(e)),e.removeRow=e.removeRow.bind((0,u.default)(e)),e.removeColumn=e.removeColumn.bind((0,u.default)(e)),e.calcColumnsAndRowsWidth=e.calcColumnsAndRowsWidth.bind((0,u.default)(e)),e.dragMode=!1,e.state={colWidth:void 0,rowWidth:void 0},e}return(0,l.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.calcColumnsAndRowsWidth()}},{key:"componentDidMount",value:function(){this.props.mode===v.EDITOR&&(0,_.default)(this._sortContainerRef).sortable({helper:y.default.bind(this),cursor:"move",handle:".drag-handle",start:this.handleSortStart.bind(this),stop:this.handleSortStop.bind(this),containment:this._sortContainerRef,tolerance:"pointer"})}},{key:"render",value:function(){var e=this,t=this.state||{},a=t.rowWidth,r=t.colWidth,i=this.props.model.data.columns,o=this.props.mode===v.EDITOR,s=!o&&!this.props.ciResultsHidden&&void 0!==this.props.userState&&!0===this.props.userState.checkMode,l=this.props.isEnabled&&!s;o&&!this.props.model.data.checkable&&(l=!1);var u=S.MAX_COLUMNS<=this.props.model.data.columns.length,c=this.props.showAnswers&&!o&&this.props.model.data.checkable,d=o&&S.MIN_ROWS<this.props.model.data.rows.length,f=o,h=o&&S.MIN_COLUMNS<this.props.model.data.columns.length,m=!this.props.model.data.hideNumbers,g=!(!o&&(b||this.props.rootWidth<320)),E=!this.props.model.data.hideTable&&g;return p.default.createElement("div",{className:"choice-matrix".concat(E?" show":"").concat(o?" choice-matrix-editor":" choice-matrix-player")},p.default.createElement("div",{className:"choice-matrix-container"},p.default.createElement("table",{className:"choice-matrix-table".concat(o?"-editor":"").concat(g?"":"-mobile")},g&&p.default.createElement("thead",null,(g||o)&&p.default.createElement("tr",null,o&&p.default.createElement("th",{className:"non-displayed"}),p.default.createElement("th",{style:{width:a+"%"},className:"choice-matrix-th-first"}),g&&this.props.model.data.columns.map((function(t,n){return p.default.createElement("th",{key:n,className:"onlyOnlyBigScreen",style:{width:r+"%"},onMouseLeave:h?function(){return e.showColumnButtons(n,!1)}:void 0,onMouseOver:h?function(){return e.showColumnButtons(n,!0)}:void 0},h&&p.default.createElement("div",{onClick:function(){return e.removeColumn(n)},className:"choice-matrix-column-del",ref:function(t){e["_colRemove".concat(n,"Ref")]=t},style:{visibility:"hidden"}},"×"),p.default.createElement("span",{className:"choice-matrix-column-text"},o&&p.default.createElement(k.default,{type:k.LINEAREA,maxLength:100,style:{textAlign:"center",lineHeight:"100%"},bold:void 0!==i[n]&&""!==i[n],placeholder:e.props.language.COL_TEXT,value:i[n]?i[n]:"",onChange:function(t){return e.handleColumnInputChange(n,t)},onBlur:function(t){return e.handleColumnInputBlur(n,t)}}),!o&&p.default.createElement("div",{className:"choice-matrix-column-text-player"},t)))})),!g&&p.default.createElement("th",null),d&&p.default.createElement("th",{className:"non-displayed"}))),(g||o)&&p.default.createElement("tbody",{className:"choice-matrix-tbody".concat(g?"":"-mobile"),ref:function(t){e._sortContainerRef=t}},this.props.model.data.rows.map((function(t,n){return p.default.createElement("tr",{key:n,onMouseOver:d?function(){return e.showDeleteRow(n,!0)}:f?function(){return e.showDragRow(n,!0)}:void 0,onMouseLeave:d?function(){return e.showDeleteRow(n,!1)}:f?function(){return e.showDragRow(n,!1)}:void 0},o&&p.default.createElement("td",{className:"drag-handle ui-sortable-helper"},p.default.createElement("div",{ref:function(t){e["_rowDrag".concat(n)]=t},className:"drag-picture",style:{visibility:"hidden"}})),p.default.createElement("td",{style:{backgroundColor:"".concat(n%2==0?"#FAFAFA":"#EDEDED")}},p.default.createElement("div",{className:"choice-matrix-row-first".concat(g?"":"-mobile")},m&&p.default.createElement("div",{className:"choice-matrix-numbering".concat(o?"-editor":"-player")},n+1),p.default.createElement("span",{className:"choice-matrix-row-text".concat(m?g?"-with-number":"-with-number-mobile":g?"-without-number":"-without-number-mobile").concat(o?"":"-player")},o&&p.default.createElement(k.default,{type:k.LINEAREA,maxLength:300,placeholder:e.props.language.ROW_TEXT,value:t.text?t.text:"",ref:function(t){e["_rowInputs_".concat(n,"Ref")]=t},onChange:function(t){return e.handleRowInputChange(n,t)},onBlur:function(t){return e.handleRowInputBlur(n,t)}}),!o&&p.default.createElement("div",{className:"choice-matrix-row-first-player"},t.text)))),g&&e.props.model.data.columns.map((function(a,r){return p.default.createElement("td",{style:{backgroundColor:"".concat(n%2==0?"#FAFAFA":"#EDEDED")},className:"onlyOnlyBigScreen",key:n+"_"+r,onMouseLeave:h?function(){return e.showColumnButtons(r,!1)}:void 0,onMouseOver:h?function(){return e.showColumnButtons(r,!0)}:void 0},o||c?o&&!e.props.model.data.checkable?e.renderCellForEditor(!c,t,n,a,r,!1):e.renderCellForEditor(!c,t,n,a,r,!0):s?e.renderCellForCheckMode(t,n,a,r):e.renderCellForPlayer(l,t,n,a,r))})),d&&p.default.createElement("td",{onClick:function(){return e.removeRow(n)},className:"choice-matrix-delete-td"},p.default.createElement("span",{ref:function(t){e["_rowRemove".concat(n,"Ref")]=t},style:{visibility:"hidden"}},"×")))}))),!(g||o)&&p.default.createElement("tbody",{className:"choice-matrix-tbody".concat(g?"":"-mobile"),ref:function(t){e._sortContainerRef=t}},this.props.model.data.rows.map((function(t,a){return[n.renderRowTextForMobileInPlayer(t.text),e.renderRowSelectForMobileInPlayer(a,t,s,c)]})))),o&&p.default.createElement("div",{className:"choice-matrix-add-column-container".concat(u?" choice-matrix-add-column-disabled":""),onClick:u?function(){}:this.addColumn},this.props.language.ADD_COLUMN)),o&&p.default.createElement("div",{className:"choice-matrix-row-container",onClick:this.addRow},this.props.language.ADD_ROW))}},{key:"renderRowSelectForMobileInPlayer",value:function(e,t,n,a){return p.default.createElement("tr",null,p.default.createElement("td",{className:"choice-matrix-table-td-for-select"},n&&!a?this.renderSelectForCheckMode(e):a?this.renderSelectForShowAnswer(e,t):this.renderSelectForPlayMode(e,t)))}},{key:"renderSelectForCheckMode",value:function(e){var t=this.props.userState||{},n=t.selectedIndexes,a=t.correctRowIndexes,r=void 0!==a&&-1!==a.indexOf(e),i=r?this.props.model.data.rows[e].correctIndex:-1;r||(void 0!==n&&void 0!==n[e]&&(i=n[e]),this.props.model.data.rows[e].correctIndex===i&&(r=!0));var o=-1!==i?this.props.model.data.columns[i]:"";return p.default.createElement("div",{className:"choice-matrix-select-checkmode-warper"},p.default.createElement("div",{className:"choice-matrix-select-checkmode"},o),p.default.createElement("div",{className:"choice-matrix-select-checkmode-feedback".concat(r?"-pos":"-neg")}))}},{key:"renderSelectForPlayMode",value:function(e,t){var n=this,a=this.props.userState||{},r=a.selectedIndexes,i=a.correctRowIndexes,o=void 0!==i&&-1!==i.indexOf(e),s=-1;return void 0!==r&&void 0!==r[e]&&(s=r[e]),o?(s=t.correctIndex,this.renderSelectForCheckMode(e)):p.default.createElement(E.default,{small:!0,label:this.props.language.SELECT_ANSWER,options:this.props.model.data.columns.map((function(e,t){return{key:t,value:e}})),selected:s,onChange:function(t){return n.handleSelectChange(e,t)}})}},{key:"renderSelectForShowAnswer",value:function(e,t){var n=t.correctIndex;return p.default.createElement(E.default,{small:!0,options:this.props.model.data.columns.map((function(e,t){return{key:t,value:e}})),selected:n,onChange:function(){},disabled:!0})}},{key:"renderCellForEditor",value:function(e,t,n,a,r,i){var o=this;return p.default.createElement(g.default,{id:"".concat(this.props.model.cId,"_").concat(n,"_").concat(r),checked:i&&t.correctIndex===r,onChange:i&&e?function(){o.props.model.setCorrectIndexForRowIndex(n,r)}:function(){},disabled:!e||!i})}},{key:"renderCellForPlayer",value:function(e,t,n,a,r){var i=this,o=this.props.userState||{},s=o.selectedIndexes,l=o.correctRowIndexes,u=t.correctIndex===r,c=void 0!==s&&r===s[n];return void 0!==l&&-1!==l.indexOf(n)?p.default.createElement("div",{className:u?"choice-matrix-correct":""}):p.default.createElement(g.default,{id:"".concat(this.props.model.cId,"_").concat(n,"_").concat(r),sensitive:!0,checked:c,onChange:e?function(){return i.props.userState.setSelectedIndexForRowIndex(n,r)}:function(){},disabled:!e})}},{key:"renderCellForCheckMode",value:function(e,t,n,a){var r=this.props.userState,i=r.selectedIndexes,o=r.correctRowIndexes,s=e.correctIndex===a,l=void 0!==i&&a===i[t],u=s&&void 0!==o&&-1!==o.indexOf(t);if(l||u)return p.default.createElement("div",{className:"choice-matrix-".concat(s?"correct":"wrong")})}},{key:"removeRow",value:function(e){this.props.model.removeRow(e)}},{key:"removeColumn",value:function(e){this.props.model.removeColumn(e),this.calcColumnsAndRowsWidth()}},{key:"addRow",value:function(){this.props.model.addRow()}},{key:"addColumn",value:function(){this.props.model.addColumn(),this.calcColumnsAndRowsWidth()}},{key:"handleSortStart",value:function(e,t){this._originalSortedItemIndex=t.item.index(),this.dragMode=!0,this.showDeleteRow(this._originalSortedItemIndex,!1)}},{key:"handleSortStop",value:function(e,t){var n=this._originalSortedItemIndex;delete this._originalSortedItemIndex;var a=t.item.index();(0,_.default)(this._sortContainerRef).sortable("cancel"),this.dragMode=!1,n!==a&&this.props.model.setRowIndex(n,a)}},{key:"handleColumnInputChange",value:function(e,t){var n=t.target.value;this.props.model.setColumnText(e,n),this.calcColumnsAndRowsWidth()}},{key:"handleRowInputChange",value:function(e,t){var n=t.target.value;this.props.model.setRowText(e,n),this.calcColumnsAndRowsWidth()}},{key:"handleColumnInputBlur",value:function(e,t){var n=t.html;void 0!==this.props.model.data.columns&&void 0!==this.props.model.data.columns[e]&&this.props.model.setColumnText(e,n)}},{key:"handleRowInputBlur",value:function(e,t){var n=t.html;this.props.model.setRowText(e,n)}},{key:"handleSelectChange",value:function(e,t){this.props.mode===v.EDITOR?this.props.model.setCorrectIndexForRowIndex(e,t):this.props.userState.setSelectedIndexForRowIndex(e,t)}},{key:"showColumnButtons",value:function(e,t){this["_colRemove".concat(e,"Ref")].style.visibility=t?"visible":"hidden"}},{key:"showDeleteRow",value:function(e,t){this.dragMode||(void 0!==this["_rowRemove".concat(e,"Ref")]&&(this["_rowRemove".concat(e,"Ref")].style.visibility=t?"visible":"hidden"),t?this.showDragRow(e,!0):this.showDragRow(e,!1))}},{key:"showDragRow",value:function(e,t){void 0!==this["_rowDrag".concat(e,"Ref")]&&(this["_rowDrag".concat(e,"Ref")].style.visibility=t?"visible":"hidden")}},{key:"calcColumnsAndRowsWidth",value:function(){var e=this.props.model.data.columns.length,t=this.getColWidthByColNumber(),n=this.getColWidthFromColText(),a=Math.min(t,n),r=100-e*a;this.setState({colWidth:a,rowWidth:r})}},{key:"getColWidthByColNumber",value:function(){var e=this.props.model.data.columns.length;return Math.max(10,Math.min(70/e,30))}},{key:"getColWidthFromColText",value:function(){var e=Math.max.apply(Math,(0,o.default)(this.props.model.data.columns.map((function(e){return e?e.length:0}))))/.8;return e>30?30:e<10?15:Math.max(15,e)}}],[{key:"renderRowTextForMobileInPlayer",value:function(e){return p.default.createElement("tr",null,p.default.createElement("td",null,p.default.createElement("div",{className:"choice-matrix-row-first-player-mobile"},e)))}}]),n}(p.Component))||i;t.default=C},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(40)),s=a(n(9)),l=a(n(3)),u=a(n(4)),c=a(n(12)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=r(n(0)),m=n(46),v=(a(n(2)),a(n(11))),g=a(n(13)),E=a(n(453)),_=a(n(458)),y=a(n(230)),k=a(n(459)),S=n(52),T=a(n(152)),b=a(n(122)),C=a(n(452)),I=r(n(131)),O=n(76),A=n(74),N=n(110),w=n(396),R=a(n(460));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var D=(0,m.inject)("services")(i=(0,m.observer)(i=function(e){(0,d.default)(n,e);var t=L(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];(e=t.call.apply(t,[this].concat(r))).dragMode=!1,e.state={showTagger:"",showTextAnswerPopup:""};var o=e.props,s=o.services.ConfigurationService,u=o.mode,d=o.model,f=o.userState;return e.isEditMode=u===S.EDITOR,e.isTagsEnabled=s.featureFlags.tagging&&e.isEditMode,e.skillsIconIndicationRefs={},e.isMobile=g.default.isMobile()||g.default.isTablet(),e.isAndroid=e.isMobile&&g.default.isAndroid(),e.isInteractionsThemeV2=s.isInteractionsThemeV2,e.handleSortStart=e.handleSortStart.bind((0,c.default)(e)),e.handleSortStop=e.handleSortStop.bind((0,c.default)(e)),u===S.PLAYER&&d.data.rows.length>1&&d.data.showRandomAnswers&&(e.shuffledIndexes=(null==f?void 0:f.shuffledIndexes)||n.ShuffleAnswers(d.data.rows.map((function(e,t){return t})))),e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){this.isEditMode&&(this.props.model.data.rows.length?this.checkAllSubtasksTagsIndication():this.addRow(),(0,b.default)(this._sortContainerRef).sortable({helper:C.default.bind(this),cursor:"move",handle:".drag-handle",start:this.handleSortStart,stop:this.handleSortStop,containment:this._sortContainerRef,tolerance:"pointer"}))}},{key:"getSelectedValues",value:function(e){var t=this.props.subtasksUserStates,n={};return t&&e.forEach((function(e,a){var r=t[e.subtaskId],i=null==r?void 0:r.data.interaction[r.interactionId].selectedValue;i&&(n[a]=i)})),n}},{key:"getRows",value:function(){var e=this.props,t=e.subtasksToRender,n=e.subtasks,a=e.model.data.rows.map((function(e,t){return M(M({},e),{},{rowNumber:t+1,subtaskId:n[t]})}));return t.length&&(a=a.filter((function(e){return-1!==t.indexOf(e.subtaskId)}))),a.length>1&&this.shuffledIndexes&&(a=this.shuffledIndexes.map((function(e){return a[e]}))),a}},{key:"render",value:function(){var e=this.getRows(),t=this.getSelectedValues(e);return this.isMobile?this.renderMobileTable(e,t):this.renderTable(e,t)}},{key:"renderMobileTable",value:function(e,t){var n=this,a=this.props,r=a.model,i=a.direction,o=r.data.allowTextAnswers;return h.default.createElement("div",{className:(0,v.default)("rating-container rating-container-mobile",(0,s.default)({},i,i))},h.default.createElement("table",{className:"rating-table"},h.default.createElement("tbody",null,e.map((function(e,a){return h.default.createElement(h.default.Fragment,null,h.default.createElement("tr",null,n.renderTextCell(e,a,r.data.columns.length+(o?1:0))),h.default.createElement("tr",null,n.renderMobileAnswerOptions(),h.default.createElement("th",{className:"non-displayed"})),h.default.createElement("tr",null,n.renderAnswerCells(e,a,t),o&&n.renderTextAnswerButton(e,a,t)),h.default.createElement("tr",null,h.default.createElement("td",{colSpan:r.data.columns.length,className:"rating-mobile-separator"})))})))))}},{key:"renderMobileAnswerOptions",value:function(){var e=this;return this.props.model.data.columns.map((function(t,n){return h.default.createElement("td",{key:n,className:"rating-answer-option".concat(0===t?" na":"")},h.default.createElement("div",{className:"rating-column-text"},0===t?e.props.language.NOT_APPLICABLE:t))}))}},{key:"renderTable",value:function(e,t){var n=this,a=this.isEditMode&&w.MIN_ROWS<e.length;return h.default.createElement("div",{className:(0,v.default)("rating-container",(0,s.default)({},this.props.direction,this.props.direction))},h.default.createElement("table",{className:"rating-table".concat(this.isEditMode?"-editor":"")},this.renderTableHeader(a),this.renderTableBody(a,e,t)),this.isEditMode&&h.default.createElement("div",{className:"rating-row-container",onClick:function(){return n.addRow()}},"+"))}},{key:"renderTableHeader",value:function(e){var t=this;return h.default.createElement("thead",null,h.default.createElement("tr",null,this.isEditMode&&h.default.createElement("th",{className:"non-displayed"}),this.isEditMode&&this.isTagsEnabled&&h.default.createElement("th",{className:"rating-tagger-cell non-displayed"}),h.default.createElement("th",{className:"rating-question-cell"}),this.props.model.data.columns.map((function(e,n){return h.default.createElement("th",{key:n,className:"rating-answer-option".concat(0===e?" na":"")},h.default.createElement("div",{className:"rating-column-text"},0===e?t.props.language.NOT_APPLICABLE:e))})),e&&h.default.createElement("th",{className:"non-displayed"}),!this.isEditMode&&h.default.createElement("th",{className:"non-displayed"})))}},{key:"renderTableBody",value:function(e,t,n){var a=this,r=this.props.model.data.allowTextAnswers;return h.default.createElement("tbody",{className:"rating-tbody",ref:function(e){a._sortContainerRef=e}},t.map((function(t,i){return h.default.createElement("tr",{key:t.subtaskId,onMouseOver:a.isEditMode?function(){return function(t){e&&a.toggleDeleteRow(t,!0),a.toggleDragRow(t,!0)}(i)}:null,onMouseLeave:a.isEditMode?function(){return function(t){e&&a.toggleDeleteRow(t,!1),a.toggleDragRow(t,!1)}(i)}:null},a.isEditMode&&a.renderDragHelper(i),a.isEditMode&&a.isTagsEnabled&&a.renderTags(t.subtaskId),a.renderTextCell(t,i),a.renderAnswerCells(t,i,n),e&&a.renderDeleteRowButton(i),r&&!a.isEditMode&&a.renderTextAnswerButton(t,i,n))})))}},{key:"renderDragHelper",value:function(e){var t=this;return h.default.createElement("td",{className:"drag-handle ui-sortable-helper"},h.default.createElement("div",{ref:function(n){t["_rowDrag".concat(e,"Ref")]=n},className:"drag-picture",style:{visibility:"hidden"}}))}},{key:"renderDeleteRowButton",value:function(e){var t=this;return h.default.createElement("td",{onClick:function(){return t.removeRow(e)},className:"rating-delete-td"},h.default.createElement("div",{ref:function(n){t["_rowRemove".concat(e,"Ref")]=n},style:{visibility:"hidden"}},"×"))}},{key:"renderTextAnswerButton",value:function(e,t,n){var a,r,i=this,o="number"==typeof(null===(a=n[t])||void 0===a?void 0:a.value),s=null===(r=n[t])||void 0===r?void 0:r.textAnswer,l=this.props.isEnabled,u=!s&&!l;return h.default.createElement("td",{className:(0,v.default)("rating-text-answer-button",{disabled:u,filled:s})},h.default.createElement("div",{ref:function(e){i["_textAnswerButton".concat(t,"Ref")]=e},style:{visibility:o?"visible":"hidden"},onClick:u?null:function(){return i.setState({showTextAnswerPopup:e.subtaskId})}},h.default.createElement(A.PencilIcon,null)),this.state.showTextAnswerPopup===e.subtaskId&&this.renderTextAnswerPopup(e,t,n))}},{key:"renderTextCell",value:function(e,t,n){var a=this.isMobile?void 0:{backgroundColor:"".concat(t%2==0?"#FAFAFA":"#EDEDED")};return h.default.createElement("td",{className:"rating-question-cell",style:a,colSpan:n},h.default.createElement("div",{className:"rating-question-cell-text"},this.props.model.data.showNumbers&&h.default.createElement("div",{className:"rating-numbering"},e.rowNumber,"."),h.default.createElement("div",{className:"rating-row-text"},this.isEditMode?this.renderRowTextInput(e,t):e.text)))}},{key:"renderRowTextInput",value:function(e,t){var n=this;return h.default.createElement(I.default,{type:I.LINEAREA,maxLength:300,placeholder:this.props.language.ROW_TEXT,value:e.text?e.text:"",ref:function(e){n["_rowInputs_".concat(t,"Ref")]=e},onChange:function(e){return n.handleRowInputChange(t,e)},onBlur:function(e){return n.handleRowInputBlur(t,e)}})}},{key:"renderAnswerCells",value:function(e,t,n){var a=this,r=!this.isEditMode&&(this.props.isEnabled&&!this.isAllSubtasksAnswered()),i=this.isMobile?void 0:{backgroundColor:"".concat(t%2==0?"#FAFAFA":"#EDEDED")};return this.props.model.data.columns.map((function(o){var s;return h.default.createElement("td",{style:i,className:"rating-answer-cell".concat(0===o?" na":""),key:"".concat(t,"_").concat(o)},a.isEditMode?h.default.createElement(T.default,{id:"".concat(e.subtaskId,"_").concat(o),disabled:!0}):h.default.createElement(T.default,{id:"".concat(e.subtaskId,"_").concat(o),checked:n&&o===(null===(s=n[t])||void 0===s?void 0:s.value),onChange:r?function(){return a.handleSelectChange(t,o,e)}:null,disabled:!r}))}))}},{key:"renderTextAnswerPopup",value:function(e,t,a){var r,i=this;return h.default.createElement(R.default,{currentFeedback:(null===(r=a[t])||void 0===r?void 0:r.textAnswer)||"",onClose:function(){n.onBlurTextAnswerAndroid(),i.setState({showTextAnswerPopup:""})},onFeedbackChange:function(t){return i.handleTextAnswerChange(e,t.target.value)},isInteractionsThemeV2:!0,isEditable:this.props.isEnabled,showFeedback:!0,maxLength:160,showCounter:!0,customStyleClass:this.isInteractionsThemeV2?"v2":"",placeholder:this.props.language.TEXT_ANSWER_PLACEHOLDER,onFocus:this.isAndroid?function(){return n.onFocusTextAnswerAndroid()}:null,onBlur:this.isAndroid?function(){return n.onBlurTextAnswerAndroid()}:null,strictSanitize:!0})}},{key:"handleTextAnswerChange",value:function(e,t){var n=this.props.subtasksUserStates;if(!this.isEditMode&&n){var a=n[e.subtaskId];null==a||a.data.interaction[a.interactionId].setTextAnswer(t)}}},{key:"renderTags",value:function(e){var t=this,n=this.props,a=n.taskLanguage,r=n.serviceUrl,i=n.direction,o=this.state.showTagger,s="".concat(r,"/EditorService/tags/v2/");return h.default.createElement("td",{className:"rating-tagger-cell"},h.default.createElement(k.default,{ref:function(n){t.skillsIconIndicationRefs[e]=n?n.getWrappedInstance():n},key:"rating-tag-indication-".concat(e),contentItemId:e,backendUrl:s,trigger:this.renderIcon(),onClick:function(){t.setState({showTagger:e})}}),o&&o===e&&h.default.createElement(E.default,{key:"rating-tagger-".concat(e),language:a,layout:i,contentID:e,ciContext:"TASK",backendUrl:s,onError:function(){console.warn("ERROR TAGGING..")},onSuccess:function(){t.checkSubtaskTagsIndication(e),t.setState({showTagger:""})},hideDialog:function(){t.setState({showTagger:""})}}))}},{key:"renderIcon",value:function(){var e=this.props.taskLanguage;return h.default.createElement(y.default,{IconImage:_.default,title:e.SKILLS})}},{key:"checkAllSubtasksTagsIndication",value:function(){var e=this;this.props.model.data.rows.forEach((function(t){e.checkSubtaskTagsIndication(t.subtaskId)}))}},{key:"checkSubtaskTagsIndication",value:function(e){this.skillsIconIndicationRefs[e]&&this.skillsIconIndicationRefs[e].checkForIndication()}},{key:"removeRow",value:function(e){this.props.model.removeRow(e)}},{key:"addRow",value:function(){this.props.model.addRow()}},{key:"handleSortStart",value:function(e,t){this._originalSortedItemIndex=t.item.index(),this.dragMode=!0,this.toggleDeleteRow(this._originalSortedItemIndex,!1)}},{key:"handleSortStop",value:function(e,t){var n=this._originalSortedItemIndex;delete this._originalSortedItemIndex;var a=t.item.index();(0,b.default)(this._sortContainerRef).sortable("cancel"),this.dragMode=!1,n!==a&&(this.props.model.setRowIndex(n,a),this.checkAllSubtasksTagsIndication())}},{key:"handleRowInputChange",value:function(e,t){var n=t.target.value;this.props.model.setRowText(e,n)}},{key:"handleRowInputBlur",value:function(e,t){var n=t.html;this.props.model.setRowText(e,n)}},{key:"handleSelectChange",value:function(e,t,n){var a=this.props,r=a.subtasksUserStates,i=a.userState;if(!this.isEditMode&&r){var o=r[n.subtaskId];null==o||o.data.interaction[o.interactionId].setSelectedValue(t),this.shuffledIndexes&&i&&!i.shuffledIndexes&&i.setSubtaskOrder(this.shuffledIndexes),this.toggleTextAnswerButton(e,!0)}}},{key:"toggleDeleteRow",value:function(e,t){this.dragMode||this["_rowRemove".concat(e,"Ref")]&&(this["_rowRemove".concat(e,"Ref")].style.visibility=t?"visible":"hidden")}},{key:"toggleDragRow",value:function(e,t){this["_rowDrag".concat(e,"Ref")]&&(this["_rowDrag".concat(e,"Ref")].style.visibility=t?"visible":"hidden")}},{key:"toggleTextAnswerButton",value:function(e,t){var n;this["_textAnswerButton".concat(e,"Ref")]&&(-1!==(null===(n=this["_textAnswerButton".concat(e,"Ref")].parentElement)||void 0===n?void 0:n.className.indexOf("filled"))||(this["_textAnswerButton".concat(e,"Ref")].style.visibility=t?"visible":"hidden"))}},{key:"getColWidthByColNumber",value:function(){var e=this.props.model.data.columns.length;return Math.max(5,Math.min(70/e,30))}},{key:"getColWidthFromColText",value:function(){var e=Math.max.apply(Math,(0,o.default)(this.props.model.data.columns.map((function(e){return(null==e?void 0:e.toString().length)||0}))))/.8;return e>30?30:e<5?5:Math.max(5,e)}},{key:"isAllSubtasksAnswered",value:function(){var e=this.props.subtasksUserStates;if(!e)return!1;var t=Object.values(e);if(!t.length)return!1;var n=t.filter((function(e){var t,n;return(null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.progress)===N.COMPLETED_RIGHT}));return t.length===n.length}}],[{key:"ShuffleAnswers",value:function(e){for(var t,n,a=e,r=e.length;r;t=parseInt(Math.random()*r,10),n=a[--r],a[r]=a[t],a[t]=n);return e}},{key:"onFocusTextAnswerAndroid",value:function(){var e=document.getElementById("app-overlay");if(e){var t=(0,b.default)(e).find(".ttk-task-wrapper.ttk-task-wrapper-player");t&&(0,b.default)(t.get(0)).addClass("android-edit-rating-comment")}}},{key:"onBlurTextAnswerAndroid",value:function(){var e=document.getElementById("app-overlay");if(e){var t=(0,b.default)(e).find(".ttk-task-wrapper.ttk-task-wrapper-player");t&&(0,b.default)(t.get(0)).removeClass("android-edit-rating-comment")}}}]),n}(h.Component))||i)||i;var x=(0,O.InteractionHoc)((function(e){return{serviceUrl:e.environment.serviceUrl,direction:e.environment.api.appData.appConf.direction}}))(D);t.default=x},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(9)),s=a(n(43)),l=a(n(3)),u=a(n(4)),c=a(n(12)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=r(n(0)),m=(a(n(2)),n(46)),v=n(118),g=a(n(244)),E=a(n(58)),_=a(n(216)),y=a(n(625)),k=a(n(777));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var C=(0,m.inject)("services")(i=function(e){(0,d.default)(n,e);var t=b(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0,tagIdsToAdd:[],tagIdsToRemove:[],treeData:[],currentTagsIds:[],loadingError:!1,showZeroState:!0,accountTags:[],showSelectedTagsOnly:!1,isTreeExpanded:!1},e.saveAndUpdate=e.saveAndUpdate.bind((0,c.default)(e)),e._createTreeData=e._createTreeData.bind((0,c.default)(e)),e.expandAll=e.expandAll.bind((0,c.default)(e)),e.collapseAll=e.collapseAll.bind((0,c.default)(e)),e.toggleSelectedTagsList=e.toggleSelectedTagsList.bind((0,c.default)(e)),e}return(0,u.default)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,a=n.backendUrl,r=n.contentID,i=n.ciContext;k.default.getTagsForAccount(a).then((function(n){e=n.tree?n.tree:n,k.default.getTagsForContentItem(a,r,i).then((function(n){var a=n.map((function(e){return e.tagId})),r=t._createTreeData(e,a);t.setState({treeData:r,accountTags:e,tagsPerCI:n,showZeroState:!1})})).catch((function(e){t.setState({loadingError:!0,errorobj:e})}))})).catch((function(e){t.setState({loadingError:!0,errorobj:e})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.saveTaggerState&&this.saveAndUpdate()}},{key:"render",value:function(){var e=this.props,t=e.language,n=e.layout,a=e.hideDialog,r=this.state,i=r.showZeroState,o=r.loadingError,s=r.showSelectedTagsOnly,l=r.isTreeExpanded,u="tagger ".concat(n),c=[h.default.createElement("div",{className:"tagger-sub-title ".concat(n),key:"tagger-sub-title"},h.default.createElement("div",null,!s&&l&&h.default.createElement("button",{className:"header-button icon--drop-down-rotate",onClick:this.collapseAll},t.collapse),!s&&!l&&h.default.createElement("button",{className:"header-button icon--drop-down",onClick:this.expandAll},t.expand)),h.default.createElement("div",{className:"toggle-button-wrapper"},t.showSelected," ",h.default.createElement(_.default,{isEnabled:s,enableTooltip:"Show selected tags list",disableTooltip:"Show tags tree",onUserChangeState:this.toggleSelectedTagsList}))),h.default.createElement("div",{className:u,key:"tagger-content"},h.default.createElement("div",{className:"head-and-body"},i&&!o&&h.default.createElement("div",{className:"tagger-loading"},t.loading),!i&&!s&&this._renderTagsTree(),!i&&s&&this._renderSelectedTagsList()))],d=[{id:"cancel",text:t.cancel,type:E.default.BUTTON_TYPES.SECONDARY,onClick:a},{id:"done",text:t.saveButton,type:E.default.BUTTON_TYPES.PRIMARY,onClick:this.saveAndUpdate}];return h.default.createElement(E.default,{close:a,theme:E.default.THEMES.LIGHT,title:t.title,content:c,actions:d,styleClass:"tagger-dialog ".concat(n)})}},{key:"toggleSelectedTagsList",value:function(){var e=this.state.showSelectedTagsOnly;if(e){var t=this.state,n=t.accountTags,a=t.tagsPerCI.map((function(e){return e.tagId})),r=this._createTreeData(n,a);this.setState({treeData:r,showSelectedTagsOnly:!e})}else this.setState({showSelectedTagsOnly:!e})}},{key:"collapseAll",value:function(){this.setState({isTreeExpanded:!1})}},{key:"expandAll",value:function(){this.setState({isTreeExpanded:!0})}},{key:"addTag",value:function(e,t){if(e){var n=this.state,a=n.tagsPerCI,r=n.tagIdsToAdd;-1===r.indexOf(e)&&r.push(e),a.push({tagId:e,label:t}),this.setState({tagsPerCI:a,tagIdsToAdd:r})}}},{key:"deleteTag",value:function(e){if(e){var t=this.state.tagIdsToRemove.concat(e),n=this.state.tagsPerCI;n=n.filter((function(t){return t.tagId!==e})),this.setState({tagIdsToRemove:t,tagsPerCI:n})}}},{key:"saveAndUpdate",value:function(){var e=this,t=this.state,n=t.tagIdsToAdd,a=t.tagIdsToRemove,r=t.currentTagsIds,i=this.props,o=i.contentID,s=i.ciContext,l=i.onSuccess,u=i.onError,c=i.backendUrl;if(n.length||a.length){var d={contentEntityId:o,contentEntityType:s,tagsIdsToAdd:n,tagsIdsToRemove:a};k.default.setTagsForContentItem(c,o,d).then((function(){e.setState({tagIdsToAdd:[],tagIdsToRemove:[],currentTagsIds:r.concat(n)}),e.props.services.randomizeService.tagChanged=(new Date).getTime(),l&&l()})).catch((function(){u&&u()}))}else l&&l()}},{key:"_renderSelectedTagsList",value:function(){var e=this,t=this.props.language,n=this.state.tagsPerCI,a=Object.entries(n).map((function(n){var a=(0,s.default)(n,2),r=a[0],i=a[1];return h.default.createElement("div",{className:"selected-list-item",key:"tag-".concat(r)},h.default.createElement("div",{className:"tree-tag-node"},"".concat(i.label)),h.default.createElement("div",{className:""},h.default.createElement("button",{id:"delete-row",className:"selected-list-item-icon icon--wrong",title:t.remove,onClick:function(){e.deleteTag(i.tagId)}})))}));return h.default.createElement("div",{className:"selected-list-wrapper"},a)}},{key:"_renderTagsTree",value:function(){var e=this,t=this.props.language,n=this.state,a=n.treeData,r=n.isTreeExpanded,i={select_action:function(n){return h.default.createElement("button",{id:"new-row",className:"tree-icon icon--add-button",title:t.add,onClick:function(){var t=n(),a=t.id,r=t.label;e.addTag(a,r)}})},unselect_action:function(n){return h.default.createElement("button",{id:"delete-row",className:"tree-icon icon--wrong",title:t.remove,onClick:function(){var t=n().id;e.deleteTag(t)}})}},o=this.props.layout;return h.default.createElement("div",{className:"content-container"},h.default.createElement(y.default,{key:"tags-tree-component",ref:function(t){e.treeComponent=t},ltr:"rtl"!==o,isTreeExpanded:r,treeData:a,buttonsConfig:i,canDrag:function(){return!1},canDrop:function(){return!1}}))}},{key:"_tagTitleTemplate",value:function(e){var t=this,n=e.tagData,a=e.node,r=e.path,i=e.treeIndex;return h.default.createElement("div",{className:"tree-tag-node",onClick:function(){t.treeComponent.toggleChildrenVisibility({node:a,path:r,treeIndex:i})}},n.label)}},{key:"_createTreeData",value:function(e,t){var n=this;return e?e.map((function(e){var a=e.tagId,r=t&&t.length&&t.indexOf(a)>=0;return{id:a,children:n._createChildrenTreeData(e.children,t),isSelected:r,label:e.label,title:function(t){return n._tagTitleTemplate(T({tagData:e},t))}}})):null}},{key:"_createChildrenTreeData",value:function(e,t){var n=this;return e&&e.length?e.map((function(e){var a=e.tagId,r=t&&t.length&&t.indexOf(a)>=0;return{id:a,children:n._createChildrenTreeData(e.children,t),isSelected:r,label:e.label,title:function(t){return n._tagTitleTemplate(T({tagData:e},t))}}})):[]}}]),n}(h.Component))||i;C.defaultProps={saveTaggerState:!1,layout:"rtl"};var I=(0,v.ComponentHoc)((function(e){return{language:e.language.react.component.tagger}}),{mapFnForProperty:{language:g.default}})(C);t.default=I},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e){var a,r,i,o,s=n(1)(n(63));o=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){e.exports=n(0)},function(e,t){e.exports=n(2)},function(e,t){function n(e,t){var n,a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");return[a].concat(r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}))).concat([i]).join("\n")}return[a].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=n(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(a[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function a(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=v[a.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](a.parts[i]);for(;i<a.parts.length;i++)r.parts.push(c(a.parts[i],t))}else{var o=[];for(i=0;i<a.parts.length;i++)o.push(c(a.parts[i],t));v[a.id]={id:a.id,refs:1,parts:o}}}}function r(e,t){for(var n=[],a={},r=0;r<e.length;r++){var i=e[r],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}function i(e,t){var n=E(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=k[k.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),k.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!==(0,s.default)(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=E(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=k.indexOf(e);t>=0&&k.splice(t,1)}function l(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),i(e,t),t}function u(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function c(e,t){var n,a,r,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var c=y++;n=_||(_=l(t)),a=d.bind(null,n,c,!1),r=d.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),i(e,t),t}(t),a=p.bind(null,n,t),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),a=f.bind(null,n),r=function(){o(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}function d(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function f(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var a=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(a=S(a)),r&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([a],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var h,m,v={},g=(h=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===m&&(m=h.apply(this,arguments)),m}),E=function(e){var t={};return function(n){if(void 0===t[n]){var a=e.call(this,n);if(a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(r){a=null}t[n]=a}return t[n]}}((function(e){return document.querySelector(e)})),_=null,y=0,k=[],S=n(8);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":(0,s.default)(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"===(0,s.default)(t.attrs)?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=r(e,t);return a(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var s=n[o];(l=v[s.id]).refs--,i.push(l)}for(e&&a(r(e,t),t),o=0;o<i.length;o++){var l;if(0===(l=i[o]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete v[l.id]}}}};var T,b=(T=[],function(e,t){return T[e]=t,T.filter(Boolean).join("\n")})},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(5)),i=a(n(9));e.exports={nodeContentRenderer:r.default,treeNodeRenderer:i.default,scaffoldBlockPxWidth:45}},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(0,s.default)(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=a(n(1)),f=a(n(6)),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,s.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.scaffoldBlockPxWidth,n=e.toggleChildrenVisibility,a=e.connectDragPreview,r=e.connectDragSource,i=e.isDragging,s=e.canDrop,l=e.canDrag,u=e.node,d=e.title,p=e.subtitle,h=e.draggedNode,m=e.path,v=e.treeIndex,g=e.isSearchMatch,E=e.isSearchFocus,_=(e.icons,e.buttons),y=e.className,k=e.style,S=e.didDrop,T=(e.swapFrom,e.swapLength,e.swapDepth,e.treeId,e.isOver,e.parentNode,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["scaffoldBlockPxWidth","toggleChildrenVisibility","connectDragPreview","connectDragSource","isDragging","canDrop","canDrag","node","title","subtitle","draggedNode","path","treeIndex","isSearchMatch","isSearchFocus","icons","buttons","className","style","didDrop","swapFrom","swapLength","swapDepth","treeId","isOver","parentNode"])),b=d||u.title,C=p||u.subtitle,I=h&&function e(t,n){return!!t.children&&"function"!=typeof t.children&&t.children.some((function(t){return t===n||e(t,n)}))}(h,u),O=!S&&i,A=a(c.default.createElement("div",{className:f.default.rowContents+(g?" "+f.default.rowSearchMatch:"")+(E?" "+f.default.rowSearchFocus:"")+(l?"":" "+f.default.rowContentsDragDisabled)},c.default.createElement("div",{className:f.default.rowLabel},c.default.createElement("span",{className:f.default.rowTitle+(u.subtitle?" "+f.default.rowTitleWithSubtitle:"")},"function"==typeof b?b({node:u,path:m,treeIndex:v}):b),C&&c.default.createElement("span",{className:f.default.rowSubtitle},"function"==typeof C?C({node:u,path:m,treeIndex:v}):C)),c.default.createElement("div",{className:f.default.rowToolbar},_.map((function(e,t){return c.default.createElement("div",{key:t,className:f.default.toolbarButton},e)})))));return c.default.createElement("div",o({style:{height:"100%"}},T),n&&u.children&&(u.children.length>0||"function"==typeof u.children)&&c.default.createElement("div",null,c.default.createElement("button",{type:"button","aria-label":u.expanded?"Collapse":"Expand",className:u.expanded?f.default.collapseButton:f.default.expandButton,onClick:function(){return n({node:u,path:m,treeIndex:v})}}),u.expanded&&!i&&c.default.createElement("div",{style:{width:t},className:f.default.lineChildren})),c.default.createElement("div",{className:f.default.rowWrapper+(l?"":" "+f.default.rowWrapperDragDisabled)},c.default.createElement("div",{className:f.default.row+(O?" "+f.default.rowLandingPad:"")+(O&&!s?" "+f.default.rowCancelPad:"")+(y?" "+y:""),style:o({opacity:I?.5:1,paddingRight:t},k)},l?r(A,{dropEffect:"copy"}):A)))}}]),t}(u.Component);p.defaultProps={buttons:[],canDrag:!1,canDrop:!1,className:"",draggedNode:null,icons:[],isSearchFocus:!1,isSearchMatch:!1,parentNode:null,style:{},subtitle:null,swapDepth:null,swapFrom:null,swapLength:null,title:null,toggleChildrenVisibility:null},p.propTypes={buttons:d.default.arrayOf(d.default.node),canDrag:d.default.bool,className:d.default.string,icons:d.default.arrayOf(d.default.node),isSearchFocus:d.default.bool,isSearchMatch:d.default.bool,node:d.default.shape({}).isRequired,path:d.default.arrayOf(d.default.oneOfType([d.default.string,d.default.number])).isRequired,scaffoldBlockPxWidth:d.default.number.isRequired,style:d.default.shape({}),subtitle:d.default.oneOfType([d.default.func,d.default.node]),swapDepth:d.default.number,swapFrom:d.default.number,swapLength:d.default.number,title:d.default.oneOfType([d.default.func,d.default.node]),toggleChildrenVisibility:d.default.func,treeIndex:d.default.number.isRequired,treeId:d.default.string.isRequired,connectDragPreview:d.default.func.isRequired,connectDragSource:d.default.func.isRequired,didDrop:d.default.bool.isRequired,draggedNode:d.default.shape({}),isDragging:d.default.bool.isRequired,parentNode:d.default.shape({}),canDrop:d.default.bool,isOver:d.default.bool.isRequired},t.default=p},function(e,t,n){var a=n(7);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insertAt:"top",hmr:!0,transform:void 0};n(3)(a,r),a.locals&&(e.exports=a.locals)},function(e,t,n){(t=e.exports=n(2)(void 0)).push([e.i,".rstcustom__rowWrapper {\n  padding: 0 0 0 0;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  cursor: move; }\n  .rstcustom__rowWrapper:hover {\n    opacity: 1;\n    padding: 0 0 0 0; }\n    .rstcustom__rowWrapper:hover .rstcustom__rowToolbar {\n      visibility: visible; }\n  .rstcustom__rowWrapper:active {\n    opacity: 1; }\n\n.rstcustom__rowWrapperDragDisabled {\n  cursor: default; }\n  .rstcustom__rowWrapperDragDisabled:hover {\n    opacity: 1; }\n\n.rstcustom__row {\n  height: 100%;\n  white-space: nowrap;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex; }\n  .rstcustom__row > * {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box; }\n\n/**\r\n * The outline of where the element will go if dropped, displayed while dragging\r\n */\n.rstcustom__rowLandingPad, .rstcustom__rowCancelPad {\n  border: none !important;\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n  outline: none !important;\n  width: 500px; }\n  .rstcustom__rowLandingPad *, .rstcustom__rowCancelPad * {\n    opacity: 0 !important; }\n  .rstcustom__rowLandingPad::before, .rstcustom__rowCancelPad::before {\n    background-color: rgba(206, 254, 231, 0.46);\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: -1;\n    width: 100%; }\n\n/**\r\n * Alternate appearance of the landing pad when the dragged location is invalid\r\n */\n.rstcustom__rowCancelPad::before {\n  background-color: #e6a8ad; }\n\n.rstcustom__rowContents, .rstcustom__rowLabel, .rstcustom__rowToolbar, .rstcustom__moveHandle, .rstcustom__loadingHandle, .rstcustom__toolbarButton {\n  font-family: 'Open Sans', 'Arimo', sans-serif;\n  display: inline-block;\n  vertical-align: middle;\n  text-align: right;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 1.29;\n  color: #2d2d2d; }\n\n.rstcustom__rowContents {\n  position: relative;\n  height: 100%;\n  max-width: 100%;\n  padding: 0 20px 0 15px;\n  min-width: 230px;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 0 auto;\n          flex: 1 0 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  background-color: rgba(254, 254, 254, 0);\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  -webkit-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }\n  .rstcustom__rowContents:hover {\n    -webkit-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n    -webkit-box-shadow: none;\n            box-shadow: none; }\n\n.rstcustom__rowLabel {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 1 auto;\n          flex: 0 1 auto;\n  padding-right: 0;\n  width: 100%; }\n\n.rstcustom__rowToolbar {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 1 auto;\n          flex: 0 1 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  visibility: hidden; }\n\n.rstcustom__moveHandle, .rstcustom__loadingHandle {\n  height: 100%;\n  width: 44px;\n  background: #d9d9d9 url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MiIgaGVpZ2h0PSI0MiI+PGcgc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIuOSIgPjxwYXRoIGQ9Ik0xNCAxNS43aDE0LjQiLz48cGF0aCBkPSJNMTQgMjEuNGgxNC40Ii8+PHBhdGggZD0iTTE0IDI3LjFoMTQuNCIvPjwvZz4KPC9zdmc+\") no-repeat center;\n  border: solid #aaa 1px;\n  -webkit-box-shadow: 0 2px 2px -2px;\n          box-shadow: 0 2px 2px -2px;\n  cursor: move;\n  border-radius: 1px;\n  z-index: 1; }\n\n.rstcustom__loadingHandle {\n  cursor: default;\n  background: #d9d9d9; }\n\n@-webkit-keyframes rstcustom__pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n@keyframes rstcustom__pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n.rstcustom__loadingCircle {\n  width: 80%;\n  height: 80%;\n  margin: 10%;\n  position: relative; }\n\n.rstcustom__loadingCirclePoint {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0; }\n  .rstcustom__loadingCirclePoint:before {\n    content: '';\n    display: block;\n    margin: 0 auto;\n    width: 11%;\n    height: 30%;\n    background-color: #fff;\n    border-radius: 30%;\n    -webkit-animation: rstcustom__pointFade 800ms infinite ease-in-out both;\n            animation: rstcustom__pointFade 800ms infinite ease-in-out both; }\n  .rstcustom__loadingCirclePoint:nth-of-type(1) {\n    -webkit-transform: rotate(0deg);\n        -ms-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(7) {\n    -webkit-transform: rotate(180deg);\n        -ms-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(1):before, .rstcustom__loadingCirclePoint:nth-of-type(7):before {\n    -webkit-animation-delay: -800ms;\n            animation-delay: -800ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(2) {\n    -webkit-transform: rotate(30deg);\n        -ms-transform: rotate(30deg);\n            transform: rotate(30deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(8) {\n    -webkit-transform: rotate(210deg);\n        -ms-transform: rotate(210deg);\n            transform: rotate(210deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(2):before, .rstcustom__loadingCirclePoint:nth-of-type(8):before {\n    -webkit-animation-delay: -666.66667ms;\n            animation-delay: -666.66667ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(3) {\n    -webkit-transform: rotate(60deg);\n        -ms-transform: rotate(60deg);\n            transform: rotate(60deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(9) {\n    -webkit-transform: rotate(240deg);\n        -ms-transform: rotate(240deg);\n            transform: rotate(240deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(3):before, .rstcustom__loadingCirclePoint:nth-of-type(9):before {\n    -webkit-animation-delay: -533.33333ms;\n            animation-delay: -533.33333ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(4) {\n    -webkit-transform: rotate(90deg);\n        -ms-transform: rotate(90deg);\n            transform: rotate(90deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(10) {\n    -webkit-transform: rotate(270deg);\n        -ms-transform: rotate(270deg);\n            transform: rotate(270deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(4):before, .rstcustom__loadingCirclePoint:nth-of-type(10):before {\n    -webkit-animation-delay: -400ms;\n            animation-delay: -400ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(5) {\n    -webkit-transform: rotate(120deg);\n        -ms-transform: rotate(120deg);\n            transform: rotate(120deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(11) {\n    -webkit-transform: rotate(300deg);\n        -ms-transform: rotate(300deg);\n            transform: rotate(300deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(5):before, .rstcustom__loadingCirclePoint:nth-of-type(11):before {\n    -webkit-animation-delay: -266.66667ms;\n            animation-delay: -266.66667ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(6) {\n    -webkit-transform: rotate(150deg);\n        -ms-transform: rotate(150deg);\n            transform: rotate(150deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(12) {\n    -webkit-transform: rotate(330deg);\n        -ms-transform: rotate(330deg);\n            transform: rotate(330deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(6):before, .rstcustom__loadingCirclePoint:nth-of-type(12):before {\n    -webkit-animation-delay: -133.33333ms;\n            animation-delay: -133.33333ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(7) {\n    -webkit-transform: rotate(180deg);\n        -ms-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(13) {\n    -webkit-transform: rotate(360deg);\n        -ms-transform: rotate(360deg);\n            transform: rotate(360deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(7):before, .rstcustom__loadingCirclePoint:nth-of-type(13):before {\n    -webkit-animation-delay: 0ms;\n            animation-delay: 0ms; }\n\n.rstcustom__rowTitle {\n  font-weight: bold; }\n\n.rstcustom__rowTitleWithSubtitle {\n  display: block; }\n\n.rstcustom__rowSubtitle {\n  font-size: 70%;\n  line-height: 0.7;\n  width: 95%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  display: inline-block; }\n\n.rstcustom__collapseButton,\n.rstcustom__expandButton {\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  background: none;\n  border: none;\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 50%;\n  margin-left: -120px;\n  cursor: pointer;\n  z-index: 1000;\n  -webkit-transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  cursor: pointer; }\n  .rstcustom__collapseButton:focus,\n  .rstcustom__expandButton:focus {\n    outline: 0; }\n\n.rstcustom__collapseButton:before {\n  font-family: \"T2KAppFonts\", sans-serif;\n  font-weight: normal;\n  font-style: normal;\n  font-size: 6px;\n  display: inline-block;\n  text-decoration: inherit;\n  content: '\\E951'; }\n\n.rstcustom__expandButton:before {\n  font-family: \"T2KAppFonts\", sans-serif;\n  font-weight: normal;\n  font-style: normal;\n  font-size: 6px;\n  display: inline-block;\n  text-decoration: inherit;\n  content: '\\E951';\n  -webkit-transform: rotate(180deg);\n      -ms-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.rstcustom__moveHandle, .rstcustom__loadingHandle {\n  height: 100%;\n  width: 19px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border: none;\n  border-right: solid 1px #D9DBDC;\n  background: transparent none;\n  font-size: 10px;\n  line-height: 10px;\n  text-align: center;\n  -webkit-box-shadow: none;\n          box-shadow: none; }\n  .rstcustom__moveHandle:hover, .rstcustom__loadingHandle:hover {\n    background: #CEFEE7 none; }\n  .rstcustom__moveHandle:before, .rstcustom__loadingHandle:before {\n    font-family: \"T2KAppFonts\", sans-serif;\n    font-weight: normal;\n    font-style: normal;\n    font-size: 9px;\n    display: inline-block;\n    text-decoration: inherit;\n    content: '\\E956'; }\n\n/**\r\n * Line for under a node with children\r\n */\n.rstcustom__lineChildren {\n  height: 100%;\n  display: inline-block;\n  position: absolute; }\n\n.rstcustom__contentContainer {\n  width: 75%; }\n",""]),t.locals={rowWrapper:"rstcustom__rowWrapper",rowToolbar:"rstcustom__rowToolbar",rowWrapperDragDisabled:"rstcustom__rowWrapperDragDisabled",row:"rstcustom__row",rowLandingPad:"rstcustom__rowLandingPad",rowCancelPad:"rstcustom__rowCancelPad",rowContents:"rstcustom__rowContents",rowLabel:"rstcustom__rowLabel",moveHandle:"rstcustom__moveHandle",loadingHandle:"rstcustom__loadingHandle",toolbarButton:"rstcustom__toolbarButton",loadingCircle:"rstcustom__loadingCircle",loadingCirclePoint:"rstcustom__loadingCirclePoint",pointFade:"rstcustom__pointFade",rowTitle:"rstcustom__rowTitle",rowTitleWithSubtitle:"rstcustom__rowTitleWithSubtitle",rowSubtitle:"rstcustom__rowSubtitle",collapseButton:"rstcustom__collapseButton",expandButton:"rstcustom__expandButton",lineChildren:"rstcustom__lineChildren",contentContainer:"rstcustom__contentContainer"}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,a=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:a+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=a(o),u=a(n(1)),c=a(n(10)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(0,s.default)(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.bound={handleMouseOver:n.handleMouseOver.bind(n),handleMouseLeave:n.handleMouseLeave.bind(n)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,s.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"handleMouseOver",value:function(){this.state.highlight||this.setState({highlight:!0})}},{key:"handleMouseLeave",value:function(){this.setState({highlight:!1})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.swapFrom,e.swapLength,e.swapDepth,e.scaffoldBlockPxWidth),a=e.lowerSiblingCounts,i=e.connectDropTarget,s=e.isOver,u=e.draggedNode,d=e.canDrop,f=(e.treeIndex,e.getPrevRow,e.node),p=(e.path,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","swapFrom","swapLength","swapDepth","scaffoldBlockPxWidth","lowerSiblingCounts","connectDropTarget","isOver","draggedNode","canDrop","treeIndex","getPrevRow","node","path"])),h=a.length-1,m=void 0;d&&!s?m="validDrop":!d&&s&&(m="invalidDrop");var v=n*h==0;return i(l.default.createElement("div",r({},p,{fisrtlevel:v.toString(),onMouseOver:this.bound.handleMouseOver,onMouseLeave:this.bound.handleMouseLeave},p,{onFocus:function(){},className:c.default.node+(this.state.highlight?" "+c.default.highlight:"")+(m?" "+c.default[m]:"")+(t.props.isSearchMatch?" "+c.default.searchMatch:"")+(f.isSelected?" "+c.default.selected:"")}),l.default.createElement("div",{className:c.default.nodeContent,style:{paddingRight:n*h},fisrtlevel:v.toString()},o.Children.map(t,(function(e){return(0,o.cloneElement)(e,{isOver:s,canDrop:d,draggedNode:u})})))))}}]),t}(o.Component);d.defaultProps={swapFrom:null,swapDepth:null,swapLength:null,canDrop:!1,draggedNode:null},d.propTypes={treeIndex:u.default.number.isRequired,swapFrom:u.default.number,swapDepth:u.default.number,swapLength:u.default.number,scaffoldBlockPxWidth:u.default.number.isRequired,lowerSiblingCounts:u.default.arrayOf(u.default.number).isRequired,children:u.default.node.isRequired,connectDropTarget:u.default.func.isRequired,isOver:u.default.bool.isRequired,canDrop:u.default.bool,draggedNode:u.default.shape({}),getPrevRow:u.default.func.isRequired,node:u.default.shape({}).isRequired,path:u.default.arrayOf(u.default.oneOfType([u.default.string,u.default.number])).isRequired},t.default=d},function(e,t,n){var a=n(11);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insertAt:"top",hmr:!0,transform:void 0};n(3)(a,r),a.locals&&(e.exports=a.locals)},function(e,t,n){(t=e.exports=n(2)(void 0)).push([e.i,".rstcustom__node {\n  width: 50%;\n  white-space: nowrap;\n  position: relative;\n  text-align: right;\n  direction: rtl;\n  min-width: 100%;\n  overflow: visible;\n  border-bottom: solid 1px #e5e5e5; }\n  .rstcustom__node:last-child {\n    border-bottom: none; }\n\n.rstcustom__nodeContent {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%; }\n  .rstcustom__nodeContent[fisrtlevel='false']:before {\n    font-family: \"T2KAppFonts\", sans-serif;\n    font-weight: normal;\n    font-style: normal;\n    font-size: 20px;\n    display: inline-block;\n    text-decoration: inherit;\n    content: '\\E950';\n    width: 40px;\n    text-align: right;\n    padding: 0;\n    color: #b7bec2;\n    height: 40px;\n    position: absolute;\n    bottom: 0;\n    margin-right: -35px;\n    -webkit-transform: scaleX(-1);\n        -ms-transform: scaleX(-1);\n            transform: scaleX(-1); }\n\n.rstcustom__validDrop {\n  background: #26c281; }\n\n.rstcustom__invalidDrop {\n  background: #c0392b; }\n\n.rstcustom__highlight {\n  background: #ECEFF1;\n  height: 100%;\n  cursor: pointer; }\n  .rstcustom__highlight:first-child {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px; }\n  .rstcustom__highlight:last-child {\n    border-bottom-left-radius: 6px;\n    border-bottom-right-radius: 6px; }\n\n.rstcustom__searchMatch:before {\n  content: '';\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border: 4px solid #1ebf96;\n  border-radius: 6px;\n  top: -4px;\n  left: -4px; }\n\n.rstcustom__selected {\n  background-color: #D8FFEE; }\n",""]),t.locals={node:"rstcustom__node",nodeContent:"rstcustom__nodeContent",validDrop:"rstcustom__validDrop",invalidDrop:"rstcustom__invalidDrop",highlight:"rstcustom__highlight",searchMatch:"rstcustom__searchMatch",selected:"rstcustom__selected"}}])},"object"===(0,s.default)(t)&&"object"===(0,s.default)(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(a=o)?a.apply(t,r):a)||(e.exports=i))}).call(this,n(203)(e))},function(e,t,n){"use strict";(function(e){var a,r,i,o,s=n(1)(n(63));o=function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){e.exports=n(0)},function(e,t){e.exports=n(2)},function(e,t){function n(e,t){var n,a=e[1]||"",r=e[3];if(!r)return a;if(t&&"function"==typeof btoa){var i=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");return[a].concat(r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}))).concat([i]).join("\n")}return[a].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=n(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(a[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function a(e,t){for(var n=0;n<e.length;n++){var a=e[n],r=v[a.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](a.parts[i]);for(;i<a.parts.length;i++)r.parts.push(c(a.parts[i],t))}else{var o=[];for(i=0;i<a.parts.length;i++)o.push(c(a.parts[i],t));v[a.id]={id:a.id,refs:1,parts:o}}}}function r(e,t){for(var n=[],a={},r=0;r<e.length;r++){var i=e[r],o=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}function i(e,t){var n=E(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=k[k.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),k.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!==(0,s.default)(e.insertAt)||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=E(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=k.indexOf(e);t>=0&&k.splice(t,1)}function l(e){var t=document.createElement("style");return e.attrs.type="text/css",u(t,e.attrs),i(e,t),t}function u(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function c(e,t){var n,a,r,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var c=y++;n=_||(_=l(t)),a=d.bind(null,n,c,!1),r=d.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",u(t,e.attrs),i(e,t),t}(t),a=p.bind(null,n,t),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(t),a=f.bind(null,n),r=function(){o(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else r()}}function d(e,t,n,a){var r=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var i=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function f(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var a=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(a=S(a)),r&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([a],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var h,m,v={},g=(h=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===m&&(m=h.apply(this,arguments)),m}),E=function(e){var t={};return function(n){if(void 0===t[n]){var a=e.call(this,n);if(a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(r){a=null}t[n]=a}return t[n]}}((function(e){return document.querySelector(e)})),_=null,y=0,k=[],S=n(8);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!==("undefined"==typeof document?"undefined":(0,s.default)(document)))throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"===(0,s.default)(t.attrs)?t.attrs:{},t.singleton||(t.singleton=g()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=r(e,t);return a(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var s=n[o];(l=v[s.id]).refs--,i.push(l)}for(e&&a(r(e,t),t),o=0;o<i.length;o++){var l;if(0===(l=i[o]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete v[l.id]}}}};var T,b=(T=[],function(e,t){return T[e]=t,T.filter(Boolean).join("\n")})},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(5)),i=a(n(9));e.exports={nodeContentRenderer:r.default,treeNodeRenderer:i.default,scaffoldBlockPxWidth:45}},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(0,s.default)(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(0),c=a(u),d=a(n(1)),f=a(n(6)),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,s.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.scaffoldBlockPxWidth,n=e.toggleChildrenVisibility,a=e.connectDragPreview,r=e.connectDragSource,i=e.isDragging,s=e.canDrop,l=e.canDrag,u=e.node,d=e.title,p=e.subtitle,h=e.draggedNode,m=e.path,v=e.treeIndex,g=e.isSearchMatch,E=e.isSearchFocus,_=(e.icons,e.buttons),y=e.className,k=e.style,S=e.didDrop,T=(e.swapFrom,e.swapLength,e.swapDepth,e.treeId,e.isOver,e.parentNode,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["scaffoldBlockPxWidth","toggleChildrenVisibility","connectDragPreview","connectDragSource","isDragging","canDrop","canDrag","node","title","subtitle","draggedNode","path","treeIndex","isSearchMatch","isSearchFocus","icons","buttons","className","style","didDrop","swapFrom","swapLength","swapDepth","treeId","isOver","parentNode"])),b=d||u.title,C=p||u.subtitle,I=h&&function e(t,n){return!!t.children&&"function"!=typeof t.children&&t.children.some((function(t){return t===n||e(t,n)}))}(h,u),O=!S&&i,A=a(c.default.createElement("div",{className:f.default.rowContents+(g?" "+f.default.rowSearchMatch:"")+(E?" "+f.default.rowSearchFocus:"")+(l?"":" "+f.default.rowContentsDragDisabled)},c.default.createElement("div",{className:f.default.rowLabel},c.default.createElement("span",{className:f.default.rowTitle+(u.subtitle?" "+f.default.rowTitleWithSubtitle:"")},"function"==typeof b?b({node:u,path:m,treeIndex:v}):b),C&&c.default.createElement("span",{className:f.default.rowSubtitle},"function"==typeof C?C({node:u,path:m,treeIndex:v}):C)),c.default.createElement("div",{className:f.default.rowToolbar},_.map((function(e,t){return c.default.createElement("div",{key:t,className:f.default.toolbarButton},e)})))));return c.default.createElement("div",o({style:{height:"100%"}},T),n&&u.children&&(u.children.length>0||"function"==typeof u.children)&&c.default.createElement("div",null,c.default.createElement("button",{type:"button","aria-label":u.expanded?"Collapse":"Expand",className:u.expanded?f.default.collapseButton:f.default.expandButton,onClick:function(){return n({node:u,path:m,treeIndex:v})}}),u.expanded&&!i&&c.default.createElement("div",{style:{width:t},className:f.default.lineChildren})),c.default.createElement("div",{className:f.default.rowWrapper+(l?"":" "+f.default.rowWrapperDragDisabled)},c.default.createElement("div",{className:f.default.row+(O?" "+f.default.rowLandingPad:"")+(O&&!s?" "+f.default.rowCancelPad:"")+(y?" "+y:""),style:o({opacity:I?.5:1,paddingLeft:t},k)},l?r(A,{dropEffect:"copy"}):A)))}}]),t}(u.Component);p.defaultProps={buttons:[],canDrag:!1,canDrop:!1,className:"",draggedNode:null,icons:[],isSearchFocus:!1,isSearchMatch:!1,parentNode:null,style:{},subtitle:null,swapDepth:null,swapFrom:null,swapLength:null,title:null,toggleChildrenVisibility:null},p.propTypes={buttons:d.default.arrayOf(d.default.node),canDrag:d.default.bool,className:d.default.string,icons:d.default.arrayOf(d.default.node),isSearchFocus:d.default.bool,isSearchMatch:d.default.bool,node:d.default.shape({}).isRequired,path:d.default.arrayOf(d.default.oneOfType([d.default.string,d.default.number])).isRequired,scaffoldBlockPxWidth:d.default.number.isRequired,style:d.default.shape({}),subtitle:d.default.oneOfType([d.default.func,d.default.node]),swapDepth:d.default.number,swapFrom:d.default.number,swapLength:d.default.number,title:d.default.oneOfType([d.default.func,d.default.node]),toggleChildrenVisibility:d.default.func,treeIndex:d.default.number.isRequired,treeId:d.default.string.isRequired,connectDragPreview:d.default.func.isRequired,connectDragSource:d.default.func.isRequired,didDrop:d.default.bool.isRequired,draggedNode:d.default.shape({}),isDragging:d.default.bool.isRequired,parentNode:d.default.shape({}),canDrop:d.default.bool,isOver:d.default.bool.isRequired},t.default=p},function(e,t,n){var a=n(7);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insertAt:"top",hmr:!0,transform:void 0};n(3)(a,r),a.locals&&(e.exports=a.locals)},function(e,t,n){(t=e.exports=n(2)(void 0)).push([e.i,".rstcustom__rowWrapper {\n  padding: 0 0 0 0;\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  cursor: move; }\n  .rstcustom__rowWrapper:hover {\n    opacity: 1;\n    padding: 0 0 0 0; }\n    .rstcustom__rowWrapper:hover .rstcustom__rowToolbar {\n      visibility: visible; }\n  .rstcustom__rowWrapper:active {\n    opacity: 1; }\n\n.rstcustom__rowWrapperDragDisabled {\n  cursor: default; }\n  .rstcustom__rowWrapperDragDisabled:hover {\n    opacity: 1; }\n\n.rstcustom__row {\n  height: 100%;\n  white-space: nowrap;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex; }\n  .rstcustom__row > * {\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box; }\n\n/**\r\n * The outline of where the element will go if dropped, displayed while dragging\r\n */\n.rstcustom__rowLandingPad, .rstcustom__rowCancelPad {\n  border: none !important;\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n  outline: none !important;\n  width: 500px; }\n  .rstcustom__rowLandingPad *, .rstcustom__rowCancelPad * {\n    opacity: 0 !important; }\n  .rstcustom__rowLandingPad::before, .rstcustom__rowCancelPad::before {\n    background-color: rgba(206, 254, 231, 0.46);\n    content: '';\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: -1;\n    width: 100%; }\n\n/**\r\n * Alternate appearance of the landing pad when the dragged location is invalid\r\n */\n.rstcustom__rowCancelPad::before {\n  background-color: #e6a8ad; }\n\n.rstcustom__rowContents, .rstcustom__rowLabel, .rstcustom__rowToolbar, .rstcustom__moveHandle, .rstcustom__loadingHandle, .rstcustom__toolbarButton {\n  font-family: 'Open Sans', 'Arimo', sans-serif;\n  display: inline-block;\n  vertical-align: middle;\n  text-align: left;\n  font-size: 14px;\n  font-weight: 600;\n  line-height: 1.29;\n  color: #2d2d2d; }\n\n.rstcustom__rowContents {\n  position: relative;\n  height: 100%;\n  max-width: 100%;\n  padding: 0 15px 0 20px;\n  min-width: 230px;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 0 auto;\n          flex: 1 0 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  background-color: rgba(254, 254, 254, 0);\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  -webkit-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }\n  .rstcustom__rowContents:hover {\n    -webkit-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\n    -webkit-box-shadow: none;\n            box-shadow: none; }\n\n.rstcustom__rowLabel {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 1 auto;\n          flex: 0 1 auto;\n  padding-right: 0;\n  padding-left: 0;\n  width: 100%; }\n\n.rstcustom__rowToolbar {\n  -webkit-box-flex: 0;\n      -ms-flex: 0 1 auto;\n          flex: 0 1 auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  visibility: hidden; }\n\n.rstcustom__moveHandle, .rstcustom__loadingHandle {\n  height: 100%;\n  width: 44px;\n  background: #d9d9d9 url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MiIgaGVpZ2h0PSI0MiI+PGcgc3Ryb2tlPSIjRkZGIiBzdHJva2Utd2lkdGg9IjIuOSIgPjxwYXRoIGQ9Ik0xNCAxNS43aDE0LjQiLz48cGF0aCBkPSJNMTQgMjEuNGgxNC40Ii8+PHBhdGggZD0iTTE0IDI3LjFoMTQuNCIvPjwvZz4KPC9zdmc+\") no-repeat center;\n  border: solid #aaa 1px;\n  -webkit-box-shadow: 0 2px 2px -2px;\n          box-shadow: 0 2px 2px -2px;\n  cursor: move;\n  border-radius: 1px;\n  z-index: 1; }\n\n.rstcustom__loadingHandle {\n  cursor: default;\n  background: #d9d9d9; }\n\n@-webkit-keyframes rstcustom__pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n@keyframes rstcustom__pointFade {\n  0%,\n  19.999%,\n  100% {\n    opacity: 0; }\n  20% {\n    opacity: 1; } }\n\n.rstcustom__loadingCircle {\n  width: 80%;\n  height: 80%;\n  margin: 10%;\n  position: relative; }\n\n.rstcustom__loadingCirclePoint {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0; }\n  .rstcustom__loadingCirclePoint:before {\n    content: '';\n    display: block;\n    margin: 0 auto;\n    width: 11%;\n    height: 30%;\n    background-color: #fff;\n    border-radius: 30%;\n    -webkit-animation: rstcustom__pointFade 800ms infinite ease-in-out both;\n            animation: rstcustom__pointFade 800ms infinite ease-in-out both; }\n  .rstcustom__loadingCirclePoint:nth-of-type(1) {\n    -webkit-transform: rotate(0deg);\n        -ms-transform: rotate(0deg);\n            transform: rotate(0deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(7) {\n    -webkit-transform: rotate(180deg);\n        -ms-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(1):before, .rstcustom__loadingCirclePoint:nth-of-type(7):before {\n    -webkit-animation-delay: -800ms;\n            animation-delay: -800ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(2) {\n    -webkit-transform: rotate(30deg);\n        -ms-transform: rotate(30deg);\n            transform: rotate(30deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(8) {\n    -webkit-transform: rotate(210deg);\n        -ms-transform: rotate(210deg);\n            transform: rotate(210deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(2):before, .rstcustom__loadingCirclePoint:nth-of-type(8):before {\n    -webkit-animation-delay: -666.66667ms;\n            animation-delay: -666.66667ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(3) {\n    -webkit-transform: rotate(60deg);\n        -ms-transform: rotate(60deg);\n            transform: rotate(60deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(9) {\n    -webkit-transform: rotate(240deg);\n        -ms-transform: rotate(240deg);\n            transform: rotate(240deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(3):before, .rstcustom__loadingCirclePoint:nth-of-type(9):before {\n    -webkit-animation-delay: -533.33333ms;\n            animation-delay: -533.33333ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(4) {\n    -webkit-transform: rotate(90deg);\n        -ms-transform: rotate(90deg);\n            transform: rotate(90deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(10) {\n    -webkit-transform: rotate(270deg);\n        -ms-transform: rotate(270deg);\n            transform: rotate(270deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(4):before, .rstcustom__loadingCirclePoint:nth-of-type(10):before {\n    -webkit-animation-delay: -400ms;\n            animation-delay: -400ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(5) {\n    -webkit-transform: rotate(120deg);\n        -ms-transform: rotate(120deg);\n            transform: rotate(120deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(11) {\n    -webkit-transform: rotate(300deg);\n        -ms-transform: rotate(300deg);\n            transform: rotate(300deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(5):before, .rstcustom__loadingCirclePoint:nth-of-type(11):before {\n    -webkit-animation-delay: -266.66667ms;\n            animation-delay: -266.66667ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(6) {\n    -webkit-transform: rotate(150deg);\n        -ms-transform: rotate(150deg);\n            transform: rotate(150deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(12) {\n    -webkit-transform: rotate(330deg);\n        -ms-transform: rotate(330deg);\n            transform: rotate(330deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(6):before, .rstcustom__loadingCirclePoint:nth-of-type(12):before {\n    -webkit-animation-delay: -133.33333ms;\n            animation-delay: -133.33333ms; }\n  .rstcustom__loadingCirclePoint:nth-of-type(7) {\n    -webkit-transform: rotate(180deg);\n        -ms-transform: rotate(180deg);\n            transform: rotate(180deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(13) {\n    -webkit-transform: rotate(360deg);\n        -ms-transform: rotate(360deg);\n            transform: rotate(360deg); }\n  .rstcustom__loadingCirclePoint:nth-of-type(7):before, .rstcustom__loadingCirclePoint:nth-of-type(13):before {\n    -webkit-animation-delay: 0ms;\n            animation-delay: 0ms; }\n\n.rstcustom__rowTitle {\n  font-weight: bold; }\n\n.rstcustom__rowTitleWithSubtitle {\n  display: block; }\n\n.rstcustom__rowSubtitle {\n  font-size: 70%;\n  line-height: 0.7;\n  width: 95%;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  display: inline-block; }\n\n.rstcustom__collapseButton,\n.rstcustom__expandButton {\n  -webkit-appearance: none;\n     -moz-appearance: none;\n          appearance: none;\n  cursor: pointer;\n  background: none;\n  border: none;\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  top: 50%;\n  padding-left: 40px;\n  margin: 0;\n  z-index: 1000;\n  -webkit-transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%); }\n  .rstcustom__collapseButton:focus,\n  .rstcustom__expandButton:focus {\n    outline: 0; }\n\n.rstcustom__collapseButton:before {\n  font-family: \"T2KAppFonts\", sans-serif;\n  font-weight: normal;\n  font-style: normal;\n  font-size: 6px;\n  display: inline-block;\n  text-decoration: inherit;\n  content: '\\E951'; }\n\n.rstcustom__expandButton:before {\n  font-family: \"T2KAppFonts\", sans-serif;\n  font-weight: normal;\n  font-style: normal;\n  font-size: 6px;\n  display: inline-block;\n  text-decoration: inherit;\n  content: '\\E951';\n  -webkit-transform: rotate(180deg);\n      -ms-transform: rotate(180deg);\n          transform: rotate(180deg); }\n\n.rstcustom__moveHandle, .rstcustom__loadingHandle {\n  height: 100%;\n  width: 19px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  border: none;\n  border-left: solid 1px #D9DBDC;\n  background: transparent none;\n  font-size: 10px;\n  line-height: 10px;\n  text-align: center;\n  -webkit-box-shadow: none;\n          box-shadow: none; }\n  .rstcustom__moveHandle:hover, .rstcustom__loadingHandle:hover {\n    background: #CEFEE7 none; }\n  .rstcustom__moveHandle:before, .rstcustom__loadingHandle:before {\n    font-family: \"T2KAppFonts\", sans-serif;\n    font-weight: normal;\n    font-style: normal;\n    font-size: 9px;\n    display: inline-block;\n    text-decoration: inherit;\n    content: '\\E956'; }\n\n/**\r\n * Line for under a node with children\r\n */\n.rstcustom__lineChildren {\n  height: 100%;\n  display: inline-block;\n  position: absolute; }\n\n.rstcustom__contentContainer {\n  width: 75%; }\n",""]),t.locals={rowWrapper:"rstcustom__rowWrapper",rowToolbar:"rstcustom__rowToolbar",rowWrapperDragDisabled:"rstcustom__rowWrapperDragDisabled",row:"rstcustom__row",rowLandingPad:"rstcustom__rowLandingPad",rowCancelPad:"rstcustom__rowCancelPad",rowContents:"rstcustom__rowContents",rowLabel:"rstcustom__rowLabel",moveHandle:"rstcustom__moveHandle",loadingHandle:"rstcustom__loadingHandle",toolbarButton:"rstcustom__toolbarButton",loadingCircle:"rstcustom__loadingCircle",loadingCirclePoint:"rstcustom__loadingCirclePoint",pointFade:"rstcustom__pointFade",rowTitle:"rstcustom__rowTitle",rowTitleWithSubtitle:"rstcustom__rowTitleWithSubtitle",rowSubtitle:"rstcustom__rowSubtitle",collapseButton:"rstcustom__collapseButton",expandButton:"rstcustom__expandButton",lineChildren:"rstcustom__lineChildren",contentContainer:"rstcustom__contentContainer"}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,a=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:a+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),l=a(o),u=a(n(1)),c=a(n(10)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(0,s.default)(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n.bound={handleMouseOver:n.handleMouseOver.bind(n),handleMouseLeave:n.handleMouseLeave.bind(n)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(0,s.default)(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"handleMouseOver",value:function(){this.state.highlight||this.setState({highlight:!0})}},{key:"handleMouseLeave",value:function(){this.setState({highlight:!1})}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.swapFrom,e.swapLength,e.swapDepth,e.scaffoldBlockPxWidth),a=e.lowerSiblingCounts,i=e.connectDropTarget,s=e.isOver,u=e.draggedNode,d=e.canDrop,f=(e.treeIndex,e.getPrevRow,e.node),p=(e.path,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","swapFrom","swapLength","swapDepth","scaffoldBlockPxWidth","lowerSiblingCounts","connectDropTarget","isOver","draggedNode","canDrop","treeIndex","getPrevRow","node","path"])),h=a.length-1,m=void 0;d&&!s?m="validDrop":!d&&s&&(m="invalidDrop");var v=n*h==0;return i(l.default.createElement("div",r({},p,{fisrtlevel:v.toString(),onMouseOver:this.bound.handleMouseOver,onMouseLeave:this.bound.handleMouseLeave},p,{onFocus:function(){},className:c.default.node+(this.state.highlight?" "+c.default.highlight:"")+(m?" "+c.default[m]:"")+(t.props.isSearchMatch?" "+c.default.searchMatch:"")+(f.isSelected?" "+c.default.selected:"")}),l.default.createElement("div",{className:c.default.nodeContent,style:{paddingLeft:n*h},fisrtlevel:v.toString()},o.Children.map(t,(function(e){return(0,o.cloneElement)(e,{isOver:s,canDrop:d,draggedNode:u})})))))}}]),t}(o.Component);d.defaultProps={swapFrom:null,swapDepth:null,swapLength:null,canDrop:!1,draggedNode:null},d.propTypes={treeIndex:u.default.number.isRequired,swapFrom:u.default.number,swapDepth:u.default.number,swapLength:u.default.number,scaffoldBlockPxWidth:u.default.number.isRequired,lowerSiblingCounts:u.default.arrayOf(u.default.number).isRequired,children:u.default.node.isRequired,connectDropTarget:u.default.func.isRequired,isOver:u.default.bool.isRequired,canDrop:u.default.bool,draggedNode:u.default.shape({}),getPrevRow:u.default.func.isRequired,node:u.default.shape({}).isRequired,path:u.default.arrayOf(u.default.oneOfType([u.default.string,u.default.number])).isRequired},t.default=d},function(e,t,n){var a=n(11);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insertAt:"top",hmr:!0,transform:void 0};n(3)(a,r),a.locals&&(e.exports=a.locals)},function(e,t,n){(t=e.exports=n(2)(void 0)).push([e.i,".rstcustom__node {\n  width: 50%;\n  white-space: nowrap;\n  position: relative;\n  text-align: left;\n  direction: ltr;\n  min-width: 100%;\n  overflow: visible;\n  border-bottom: solid 1px #e5e5e5; }\n  .rstcustom__node:last-child {\n    border-bottom: none; }\n\n.rstcustom__nodeContent {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%; }\n  .rstcustom__nodeContent[fisrtlevel='false']:before {\n    font-family: \"T2KAppFonts\", sans-serif;\n    font-weight: normal;\n    font-style: normal;\n    font-size: 20px;\n    display: inline-block;\n    text-decoration: inherit;\n    content: '\\E950';\n    width: 40px;\n    text-align: left;\n    padding: 0;\n    color: #b7bec2;\n    height: 40px;\n    position: absolute;\n    bottom: 0;\n    margin-left: -5px; }\n\n.rstcustom__validDrop {\n  background: #26c281; }\n\n.rstcustom__invalidDrop {\n  background: #c0392b; }\n\n.rstcustom__highlight {\n  background: #ECEFF1;\n  height: 100%;\n  cursor: pointer; }\n  .rstcustom__highlight:first-child {\n    border-top-left-radius: 6px;\n    border-top-right-radius: 6px; }\n  .rstcustom__highlight:last-child {\n    border-bottom-left-radius: 6px;\n    border-bottom-right-radius: 6px; }\n\n.rstcustom__searchMatch:before {\n  content: '';\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border: 4px solid #1ebf96;\n  border-radius: 6px;\n  top: -4px;\n  left: -4px; }\n\n.rstcustom__selected {\n  background-color: #D8FFEE; }\n",""]),t.locals={node:"rstcustom__node",nodeContent:"rstcustom__nodeContent",validDrop:"rstcustom__validDrop",invalidDrop:"rstcustom__invalidDrop",highlight:"rstcustom__highlight",searchMatch:"rstcustom__searchMatch",selected:"rstcustom__selected"}}])},"object"===(0,s.default)(t)&&"object"===(0,s.default)(e)?e.exports=o():(r=[],void 0===(i="function"==typeof(a=o)?a.apply(t,r):a)||(e.exports=i))}).call(this,n(203)(e))},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i={getTagsForContentItem:function(e,t,n){var a="".concat(e,"contentEntityId/").concat(t);return r.default.get(a,{},{params:{contentEntityId:t,contentEntityType:n}})},getTagsForAccount:function(e){return r.default.get(e)},setTagsForContentItem:function(e,t,n){var a="".concat(e,"contentEntityId/").concat(t);return r.default.post(a,{},n)}};t.default=i},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(12)),l=a(n(6)),u=a(n(8)),c=a(n(7)),d=a(n(0)),f=(a(n(2)),n(118)),p=a(n(780));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showIndication:e.props.showIndication,hasIndication:!1,loadingError:""},e.checkForIndication=e.checkForIndication.bind((0,s.default)(e)),e.manuallyToggleIndication=e.manuallyToggleIndication.bind((0,s.default)(e)),e}return(0,o.default)(n,[{key:"render",value:function(){var e,t=this,n="data-container-notifications-".concat(this.props.layoutDirection),a=this.state.showIndication?(e={},(0,r.default)(e,n," "),(0,r.default)(e,"style",this.props.indicationInnerStyle),e):{};return d.default.createElement("div",{className:"icon-indication-container",onClick:function(){return t.props.onClick()}},this.props.trigger,this.state.showIndication&&this.state.hasIndication&&d.default.createElement("div",a))}},{key:"checkForIndication",value:function(){var e=this;p.default.countContentItems(this.props.backendUrl,this.props.token,this.props.contentItemId).then((function(t){e.setState({hasIndication:t>0,loadingError:""})})).catch((function(t){e.setState({loadingError:t})}))}},{key:"manuallyToggleIndication",value:function(e){this.setState({hasIndication:e,loadingError:""})}}]),n}(d.default.Component);m.defaultProps={trigger:void 0},m.defaultProps={onClick:function(){},contentItemId:void 0,showIndication:!0,indicationInnerStyle:{}};var v=(0,f.ComponentHoc)((function(e){return{layoutDirection:e.ltr?"ltr":"rtl"}}),{withRef:!0})(m);t.default=v},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i={countContentItems:function(e,t,n){if(!n)return Promise.resolve(0);var a="".concat(e,"contentEntityId/").concat(n,"/count");return r.default.get(a,{},{params:{contentEntityId:n}})}};t.default=i},function(e,t,n){},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(9)),s=a(n(33)),l=a(n(34)),u=a(n(3)),c=a(n(12)),d=a(n(4)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=r(n(0)),v=n(46),g=(a(n(2)),a(n(605))),E=a(n(13)),_=a(n(28)),y=a(n(21)),k=a(n(126)),S=a(n(229)),T=a(n(18)),b=r(n(54)),C=n(52),I=a(n(197)),O=a(n(783));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var R=_.default.Instance,P=(0,v.inject)("services")(i=(0,v.observer)(i=function(e){(0,f.default)(r,e);var t,n,a=w(r);function r(e){var t,n,i,o;if((0,u.default)(this,r),(i=a.call(this,e)).checkSubmit=i.checkSubmit.bind((0,c.default)(i)),i.handleErrorResetClicked=i.handleErrorResetClicked.bind((0,c.default)(i)),i.handleLinkChange=i.handleLinkChange.bind((0,c.default)(i)),i.handleLinkApproved=i.handleLinkApproved.bind((0,c.default)(i)),i.handleOpenLink=i.handleOpenLink.bind((0,c.default)(i)),i.onWixArticleChange=i.onWixArticleChange.bind((0,c.default)(i)),i.onWixAccountChange=i.onWixAccountChange.bind((0,c.default)(i)),i.searchWixArticles=i.searchWixArticles.bind((0,c.default)(i)),(null===(t=e.model)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.subType)===b.EMBEDDED_WEBSITE_WIX_SUBTYPE){var s,l;i._articleRef=(0,m.createRef)();var d=(null===(s=E.default.getAppdata().appConf)||void 0===s||null===(l=s.contentImport)||void 0===l?void 0:l.wixAnswers)||{};o={accounts:[{accountName:d.accountName,widgetId:d.widgetId}],selectedIndex:0},d.accountNameSecondary&&o.accounts.push({accountName:d.accountNameSecondary,widgetId:d.widgetIdSecondary})}return i.state={hasLinkContent:!1,disableOkBtn:!1,error:!1,iframeSrc:void 0,wix:o},i}return(0,d.default)(r,null,[{key:"isValidLink",value:function(e){var t=e.trim();return!(!new RegExp("^(https:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z,.\\d%_.~+:()]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_/!@#$%^&*(),.]*)?$","i").test(t)&&""!==t)}}]),(0,d.default)(r,[{key:"componentDidMount",value:function(){var e=this.props.model.data,t=this.getWixArticle();if((null==e?void 0:e.subType)===b.EMBEDDED_WEBSITE_WIX_SUBTYPE)if(t){var n=this.state.wix.accounts[0],a=t.accountName||n.accountName,r=t.widgetId||n.widgetId;this.setState({iframeSrc:"".concat(window.location.origin,"/wixWrapper.html?account=").concat(a,"&widget=").concat(r,"&locale=").concat(t.locale,"&article=").concat(t.id)})}else{var i,o;null===(i=this._articleRef)||void 0===i||null===(o=i.current)||void 0===o||o.focus()}}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.isSingleMedia,a=t===C.EDITOR;return m.default.createElement("div",{className:"t2k-embed-website-component ".concat(a?"page-edit":"page-play"," ").concat(n?"single-media":"")},a&&this.renderEditor(),!a&&this.renderPlayer())}},{key:"renderEditor",value:function(){switch(this.props.model.subType){case b.DEFAULT_SUBTYPE:return this.renderDefaultEditor();case b.EMBEDDED_WEBSITE_WIX_SUBTYPE:return this.renderWixArticleEditor();default:return null}}},{key:"renderWixArticleEditor",value:function(){var e,t,n,a=this.props.language,i=this.state,o=i.iframeSrc,s=i.wix;return m.default.createElement("div",null,m.default.createElement("div",{className:"link-wrapper link-wrapper__wix"},s.accounts.length>1&&m.default.createElement(g.default,{className:"link-wrapper__wix-accounts",clearable:!1,searchable:!1,options:s.accounts,valueKey:"accountName",labelKey:"accountName",value:s.accounts[s.selectedIndex],onChange:this.onWixAccountChange}),m.default.createElement(g.default.Async,{ref:this._articleRef,openOnFocus:!0,placeholder:null===(e=a.WIX)||void 0===e?void 0:e.PLACEHOLDER,noResultsText:null===(t=a.WIX)||void 0===t?void 0:t.NO_RESULTS,searchPromptText:null===(n=a.WIX)||void 0===n?void 0:n.SEARCH_PROMPT,value:this.getWixArticle(),valueKey:"id",labelKey:"title",onChange:this.onWixArticleChange,cache:!1,optionRenderer:r.renderWixItemView,loadOptions:this.searchWixArticles})),m.default.createElement("div",{className:"iframe-wrapper"},o&&m.default.createElement("iframe",{src:o,width:"100%",height:"768",sandbox:y.default.IFRAME_SANDBOX_PARAMS})))}},{key:"searchWixArticles",value:(n=(0,l.default)(s.default.mark((function e(t){var n,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=void 0),n=E.default.getAppdata().backend_url,e.next=4,R.get("".concat(n,"/PlayAppService/contentImport/search"),{},{params:{text:t,type:"WIX_ANSWERS",isPrimary:0===this.state.wix.selectedIndex}});case 4:return a=e.sent,e.abrupt("return",{options:a.items});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onWixAccountChange",value:function(e){var t=this,n=this.state.wix,a=n.accounts.findIndex((function(t){var n=t.accountName;return e.accountName===n}));this.props.model.setSrc({}),this.setState({iframeSrc:void 0,wix:N(N({},n),{},{selectedIndex:a})},(function(){var e,n,a,r;null===(e=t._articleRef)||void 0===e||null===(n=e.current)||void 0===n||n.loadOptions(""),null===(a=t._articleRef)||void 0===a||null===(r=a.current)||void 0===r||r.focus()}))}},{key:"onWixArticleChange",value:(t=(0,l.default)(s.default.mark((function e(t){var n,a,r,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.wix,a=n.accounts[n.selectedIndex],r=a.accountName,i=a.widgetId,this.props.model.setSrc(N({accountName:r,widgetId:i},t)),this.setState({iframeSrc:"".concat(window.location.origin,"/wixWrapper.html?account=").concat(a.accountName,"&widget=").concat(a.widgetId,"&locale=").concat(t.locale,"&article=").concat(t.id)});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderDefaultEditor",value:function(){var e=this,t=this.props,n=t.model,a=t.mode,r=t.language,i=t.services.ConfigurationService,o=a===C.EDITOR,s=this.state.hasLinkContent||n.data&&n.data.src&&n.data.src.length>0,l=this.state.error,u=r.BOTTOM_TEXT,c=r.BOTTOM_NOTE,d=n.data&&n.data.src&&n.data.src.length>0?n.data.src:void 0,f=o&&l,p=i.reducedEditorCapabilitiesV2;return m.default.createElement("div",null,m.default.createElement("div",{className:"link-wrapper"},m.default.createElement("div",{className:"input-field link-field"},m.default.createElement("span",{className:"t2kInt-icon-link ".concat(s?"enableIcon":"")}),m.default.createElement("form",{className:"text-input-wrapper",onSubmit:this.checkSubmit},m.default.createElement(I.default,{ref:function(t){e._inputLinkRef=null==t?void 0:t.wrappedInstance},placeholder:r.PLACEHOLDER_LINK,defaultValue:d,onChange:this.handleLinkChange,onBlur:this.handleLinkApproved}))),m.default.createElement("div",{className:"bottom-text"},m.default.createElement("span",{className:"boldFont"},c,": "),u)),m.default.createElement("div",{className:"iframe-wrapper"},f&&m.default.createElement("div",{className:"error-wrapper"},m.default.createElement("span",{className:"t2kInt-icon-oops"}),m.default.createElement("span",{className:"error-message"},m.default.createElement("span",{className:"error-action",onClick:this.handleErrorResetClicked},r.VALID_LINK))),d&&m.default.createElement("iframe",{src:d,width:"100%",height:"768",sandbox:y.default.IFRAME_SANDBOX_PARAMS})),p&&S.default.getEditorMediaCaptions(n,r,p))}},{key:"renderPlayer",value:function(){var e,t,n,a=this.props,r=a.model,i=a.services.ConfigurationService,o=a.taskPresentationDisplayType;(null===(e=r.data)||void 0===e?void 0:e.subType)===b.EMBEDDED_WEBSITE_WIX_SUBTYPE?t=this.state.iframeSrc:t=(null===(n=r.data)||void 0===n?void 0:n.src)&&r.data.src.length>0?r.data.src:void 0;if(!t)return null;var s=i.isInteractionsThemeV2?"100%":"768",l=o===y.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"media-content",onClick:l&&(E.default.isMobile()||E.default.isTablet())?this.handleOpenLink:null},E.default.isMobile()||E.default.isTablet()?m.default.createElement(O.default,{onClick:l?null:this.handleOpenLink}):m.default.createElement("div",{className:"embed-website-iframe-wrapper"},m.default.createElement("iframe",{className:"embed-website-iframe",src:t,width:"100%",height:s,sandbox:y.default.IFRAME_SANDBOX_PARAMS})),!l&&m.default.createElement("div",{className:"embed-website-goto"},T.default.translateWithItems("interaction.EMBED_WEBSITE.GOTO_LINK",{link:m.default.createElement("a",{className:"embed-website-goto-link",href:t,target:"_blank",rel:"noopener noreferrer"},this.parseUrlToDomain())}))),S.default.getPlayerMediaCaptions(r,i.isInteractionsThemeV2))}},{key:"getWixArticle",value:function(){var e=this.props.model,t=e.data;return(null==t?void 0:t.subType)!==b.EMBEDDED_WEBSITE_WIX_SUBTYPE?null:e.wixArticle?e.wixArticle:t.src?JSON.parse(t.src):null}},{key:"handleLinkChange",value:function(e){!this.state.hasLinkContent&&e.target.value.length>0&&/\S/.test(e.target.value)?this.setState({hasLinkContent:!0}):this.state.hasLinkContent&&e.target.value.length>0&&!/\S/.test(e.target.value)||!this.state.hasLinkContent&&e.target.value.length>0&&!/\S/.test(e.target.value)?this.setState({hasLinkContent:!1}):e.target.value.length<=0&&this.state.hasLinkContent?(this.setState({hasLinkContent:!1}),this.handleLinkCanceled()):this.setState({disableOkBtn:!1}),this.handleLinkApproved()}},{key:"handleOpenLink",value:function(){var e,t,n=this.props.model;if(!E.default.isCordovaOffline()){var a;if((null===(e=n.data)||void 0===e?void 0:e.subType)===b.EMBEDDED_WEBSITE_WIX_SUBTYPE)t=this.state.iframeSrc;else t=(null===(a=n.data)||void 0===a?void 0:a.src)&&n.data.src.length>0?n.data.src:void 0;if(t)if(E.default.isCordova())window.open(t,"_system");else{var r=window.open(t,"_blank","noopener");null==r||r.focus()}}}},{key:"handleLinkCanceled",value:function(){this._inputLinkRef.resetInputValue(),this.setState({hasLinkContent:!1}),this.props.model.data&&this.props.model.data.src&&this.props.model.data.src.length>0&&this.props.model.setSrc(""),this.state.error&&this.setState({error:!1})}},{key:"handleLinkApproved",value:function(){var e=this._inputLinkRef.getInputValue();e.length>0&&this.handleNewSrc(e)}},{key:"checkSubmit",value:function(e){e.preventDefault(),this.handleLinkApproved()}},{key:"handleNewSrc",value:function(e){if(r.isValidLink(e)){var t=e.replace("/watch?","/embed?");this.props.model.setSrc(t),this.setState({disableOkBtn:!0}),this.state.error&&this.setState({error:!1})}else this.props.model.setSrc(""),this.setState({error:!0})}},{key:"handleErrorResetClicked",value:function(){this._inputLinkRef.resetInputValue(),this.setState({hasLinkContent:!1,error:!1})}},{key:"parseUrlToDomain",value:function(){var e=this.props,t=e.model,n=e.language,a=t.data;if((null==a?void 0:a.subType)===b.EMBEDDED_WEBSITE_WIX_SUBTYPE)return n.GO_TO_WIX_ANSWERS;return(t.data&&t.data.src&&t.data.src.length>0?t.data.src:void 0).replace(/^(https:\/\/(www\.)?)/,"").split("/")[0]}}],[{key:"renderWixItemView",value:function(e){return m.default.createElement("div",{className:"link-wrapper__wix-result"},m.default.createElement("div",{className:"link-wrapper__wix-result--title"},e.title),m.default.createElement("div",null,m.default.createElement(k.default,{clamp:"1",ltr:E.default.isLtr()},e.content)))}}]),r}(m.Component))||i)||i;t.default=P},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{id:"svg_1",opacity:"0.902",d:"m30.55,0.78c16.569,0 30,13.431 30,30c0,16.569 -13.431,30 -30,30c-16.568,0 -30,-13.431 -30,-30c0,-16.569 13.432,-30 30,-30z",fillRule:"evenodd",fill:"#FFF",key:0}),a.createElement("path",{stroke:"null",id:"svg_3",d:"m45.491376,28.475707c-1.12119,0 -2.032433,-0.912341 -2.032433,-2.033532l0,-6.431456l-10.729353,10.729353a2.019242,2.019242 0 0 1 -1.436663,0.594671c-0.543008,0 -1.054139,-0.211048 -1.437762,-0.59577a2.015944,2.015944 0 0 1 -0.594671,-1.436663c0,-0.543008 0.211048,-1.05304 0.594671,-1.436663l10.729353,-10.729353l-6.431456,0c-1.12119,0 -2.033532,-0.911242 -2.033532,-2.032433c0,-1.120091 0.912341,-2.032433 2.033532,-2.032433l11.338313,0c1.120091,0 2.032433,0.912341 2.032433,2.032433l0,11.338313c0,1.12119 -0.912341,2.033532 -2.032433,2.033532zm-12.510067,-5.78952l-14.949206,0l0,19.876948l19.876948,0l0,-14.949206l3.484484,-3.484484l0,20.175932c0,0.961806 -0.780436,1.742242 -1.742242,1.742242l-23.361432,0c-0.961806,0 -1.742242,-0.780436 -1.742242,-1.742242l0,-23.361432c0,-0.961806 0.780436,-1.742242 1.742242,-1.742242l20.175932,0l-3.484484,3.484484z",fillRule:"evenodd",fill:"#192A32",key:1})])}r.defaultProps={width:"61",height:"61",viewBox:"0 0 61 61"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MIN_SCREEN_WIDTH=void 0;var i,o=a(n(40)),s=a(n(9)),l=a(n(23)),u=a(n(3)),c=a(n(12)),d=a(n(4)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=a(n(0)),v=n(46),g=(a(n(2)),a(n(24))),E=a(n(11)),_=a(n(13)),y=n(52),k=a(n(123)),S=a(n(122)),T=a(n(224)),b=n(462),C=r(n(132)),I=a(n(463)),O=a(n(293)),A=a(n(101)),N=a(n(785)),w=r(n(464)),R=r(n(786)),P=a(n(787));function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}t.MIN_SCREEN_WIDTH=471;var x=(0,v.inject)("services")(i=(0,v.observer)(i=function(e){(0,f.default)(n,e);var t=D(n);function n(e){var a;(0,u.default)(this,n),(a=t.call(this,e)).updateAnswer=a.updateAnswer.bind((0,c.default)(a)),a.deselectAnswer=a.deselectAnswer.bind((0,c.default)(a)),a.returnAnswerToBank=a.returnAnswerToBank.bind((0,c.default)(a)),a.returnAnswerToBankV2=a.returnAnswerToBankV2.bind((0,c.default)(a)),a.onDistractorBlur=a.onDistractorBlur.bind((0,c.default)(a)),a.addEmptyDistractor=a.addEmptyDistractor.bind((0,c.default)(a)),a.handleContainerClick=a.handleContainerClick.bind((0,c.default)(a)),a._clickV2Gap=a._clickV2Gap.bind((0,c.default)(a)),a._closeAnswerList=a._closeAnswerList.bind((0,c.default)(a)),a._onBlurText=a._onBlurText.bind((0,c.default)(a)),a._onClickText=a._onClickText.bind((0,c.default)(a)),a._onBlurTextEditor=a._onBlurTextEditor.bind((0,c.default)(a)),a._onFocusTextEditor=a._onFocusTextEditor.bind((0,c.default)(a)),a._onChangeTextEditor=a._onChangeTextEditor.bind((0,c.default)(a)),a._onClickCreateGap=a._onClickCreateGap.bind((0,c.default)(a));var r=e.model,i=e.services.ConfigurationService;a.isInteractionsThemeV2=i.isInteractionsThemeV2;var o=r.preset||r.data.answersType;return a.isBlanks=o===w.DNDGAP,a.isWriting=o===w.WRITINGGAP,a.isMobileV2=a.isBlanks&&a.isInteractionsThemeV2&&(_.default.isMobile()||_.default.isTablet()),a.state=a.getStateParams(e),a}return(0,d.default)(n,null,[{key:"dndResetBankGapPosition",value:function(e,t){b.gsap.to(e,t,{x:0,y:0,top:0,left:0})}},{key:"handleTouchStart",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"createGapBankMap",value:function(e){var t,n={gaps:{},bank:{}};return Object.keys(e).forEach((function(e){t=(0,T.default)(),n.gaps[e]=t,n.bank[t]=e})),n}},{key:"isBankGapSetAsAnswer",value:function(e,t){return R.includes(e,t)}},{key:"createDuplicates",value:function(e){var t,n={};return Object.keys(e).forEach((function(a){t=e[a],n[e[a]]?n[t].push(a):n[t]=[a]})),n}},{key:"isMobileView",value:function(e){return e.rootWidth<471||_.default.isMobile()||_.default.isTablet()}}]),(0,d.default)(n,[{key:"componentDidMount",value:function(){switch(this.setState({rendered:!0}),this.props.mode){case y.EDITOR:this._componentDidMountEditor();break;case y.PLAYER:this._componentDidMountPlayer()}}},{key:"_componentDidMountEditor",value:function(){this.editor=(0,S.default)(this._wrapper).find(".fedit")}},{key:"_componentDidMountPlayer",value:function(){this.isBlanks&&(this.state.isDraggable?(this.isInteractionsThemeV2||this.setLongestWidth(),this.setPlayerDraggableBehavior(),this.setGapsDroppableBehavior()):this.isInteractionsThemeV2||this.renderMobileGaps(),this.isMobileV2&&this.props.preventSwipeOnScroll&&this.props.preventSwipeOnScroll(this._gapsBank))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.mode,n=e.userState;if(t===y.PLAYER){var a={};if(this.isMobileV2)n&&n.checkMode&&(a.gapForDelete="");else{var r=this.isDraggable(e),i=this.getNewGapValue(e,r);i.isDraggable=r,r&&!this.state.isDraggable&&this.destroySelectLists(e),Object.assign(a,i)}Object.entries(a).length&&this.setState(a)}}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.rootWidth;n.mode===y.PLAYER&&this.isBlanks&&(this.state.isDraggable?(this.setPlayerDraggableBehavior(),this.setGapsDroppableBehavior(),this.handleGapHighlight(this.state.selectedGapId,t.selectedGapId),this.isInteractionsThemeV2||(a!==e.rootWidth&&this.setGapWidth("auto"),this.addClassToGapParent(),this.setGapWidth(this.longestWidth))):this.isInteractionsThemeV2||this.renderMobileGaps())}},{key:"render",value:function(){switch(this.props.mode){case y.EDITOR:return this.renderEditor();case y.PLAYER:return this.renderPlayer()}return null}},{key:"renderPlayer",value:function(){var e=this,t=(0,E.default)("t2k-fill-in-gaps page-play",{"is-mobile":n.isMobileView(this.props),"drag-drop":this.state.isDraggable,"show-delete-holder":this.state.gapForDelete});return m.default.createElement("div",{className:t,ref:function(t){e._wrapper=t},onClick:this.handleContainerClick,"data-clickable":!1},m.default.createElement("div",{className:"t2k-fill-in-gaps-container",ref:function(t){e._container=t}},this.renderDeleteGapMobileV2(),this.renderPlayerText(),this.renderBank(),this.renderGapsMobile()))}},{key:"renderGapsMobile",value:function(){return this.isMobileV2?this.isInteractionsThemeV2?this.renderMobileGapsV2():this.renderMobileGaps():null}},{key:"renderMobileGaps",value:function(){var e=this,t=this.props,n=t.isEnabled,a=t.userState,r=t.model;if(n){var i,o,s,l,u,c,d,f,p,h=this.props.model.data.displayDuplicates,v=this.state.gapsAndDist,E=this.state.shuffledGapsAndDist,_=a.answers||{},y=this.state.gapBankMap,k=a.checkedAnswers||{},S=[];E.forEach((function(t){o=y.gaps[t]||t,i=v[t],e.showBankGapPlayer(t,i)&&(s={key:o,value:i},S.push(s))})),Object.keys(r.data.gaps).forEach((function(t){l=e._wrapper.querySelector('[id="'.concat(t,'"]')),u=_[t],f=v[u],k&&k[t]?l.innerText=f:(d=[].concat(S),h&&u&&(o=y.gaps[u]||u,d.push({key:o,value:f})),p=y.gaps[u]||u,c=m.default.createElement(O.default,{onChange:e.selectAnswerFromList.bind(e,t),options:d,label:e.props.language.SELECT_ANSWER,selected:p,hideSelected:!0}),g.default.render(c,l))}))}}},{key:"renderMobileGapsV2",value:function(){var e=this;if(!this.state.rendered)return null;var t=this.props.model.data.gaps;return m.default.createElement(m.default.Fragment,null,Object.keys(t).map((function(t){return e.renderMobileGapV2(t)})))}},{key:"renderMobileGapV2",value:function(e){var t=this,n=this.props,a=n.showAnswers,r=n.isEnabled,i=n.model,o=n.userState,s=o.answers,l=o.checkedAnswers,u=s[e],c=a?i.data.gaps[e]:this.state.gapsAndDist[u],d=this._wrapper.querySelector('[id="'.concat(e,'"]')),f=l[e];return d?g.default.createPortal(m.default.createElement(N.default,{answer:c,onClick:function(n){t.state.gapForDelete||t.handleGapClickV2(n,e,c)},gapId:!0,isFocused:this.state.selectedGapId===e,checkedState:f,isEnabled:r,isCompleted:a}),d):null}},{key:"renderDeleteGapMobileV2",value:function(){var e=this;return this.isMobileV2?m.default.createElement("div",{className:"delete-gap-holder",onClick:function(){e.returnAnswerToBankMobileV2()}},m.default.createElement("div",{className:"delete-gap"},m.default.createElement("div",{className:"delete-icon-holder"},m.default.createElement(P.default,null)),m.default.createElement("div",{className:"delete-message-holder"},m.default.createElement("span",{className:"delete-message"},this.props.language.UNDO_GAP)))):null}},{key:"renderEditor",value:function(){var e=this,t=this.props,n=t.model,a=t.language,r=this.state.enableButton,i=n.data.checkable&&this.state.noGapValidation,o=!i&&n.data.checkable&&this.state.emptyGapValidation,s=this.isBlanks&&!i&&!o&&this.state.existingGapDistractorValidation,l=this.props.services.ConfigurationService.fillInWritingMultiAnswersDelimiter,u=a.MULTI_ANSWERS_GAP_EDITOR_MSG.replace(/{delimiter}/g,l),c=void 0!==l,d=(0,E.default)("t2k-fill-in-gaps page-edit",{"drag-drop":this.isBlanks});return m.default.createElement("div",{className:d,ref:function(t){e._wrapper=t},onClick:this.handleContainerClick,"data-clickable":!1},this.renderEditorText(),i&&m.default.createElement("span",{className:"msg warning"},a.NO_GAPS),o&&m.default.createElement("span",{className:"msg warning"},a.EMPTY_GAP),s&&m.default.createElement("span",{className:"msg warning"},a.DISTRACTOR_GAP_VALIDATION),this.isWriting&&c&&m.default.createElement("div",{className:"msg info"},u),m.default.createElement("div",{className:"button-container"},m.default.createElement(k.default,{className:"btn-main","data-automation-id":"create-gap-btn",disabled:!r,onClick:this._onClickCreateGap},a.CREATE_GAP)),this.renderBank())}},{key:"renderPlayerText",value:function(){var e=this,t=this.state.html,n=this._isAnswersWereChangedInNewVersion();return m.default.createElement("div",{className:"fill-in-gaps-text",ref:function(t){e._textArea=t}},n&&this.props.renderInteractionChangedAlert(),m.default.createElement("div",(0,l.default)({className:"text-component"},(0,A.default)(t,!1),{ref:function(t){e._answerArea=t},onKeyUp:this.updateAnswer,onBlur:this.isBlanks?this.deselectAnswer:void 0})))}},{key:"_isAnswersWereChangedInNewVersion",value:function(){var e=this.props.userState;if(_.default.isLearner()){var t=e.answers||{};if(!this.isBlanks||R.isEmpty(t))return!1;for(var n=Object.keys(t),a=0;a<n.length;a++)if(-1===this.state.shuffledGapsAndDist.indexOf(n[a]))return!0}return!1}},{key:"renderEditorText",value:function(){var e=this.props,t=e.model,n=e.language,a=e.services.ConfigurationService,r=t.data.html,i=a.reducedEditorCapabilitiesV2?C.TOOLS_V2:C.MINFORMAT;return m.default.createElement("div",{className:"fill-in-gaps-text",onClick:this._onClickText,onBlur:this._onBlurText},m.default.createElement(C.default,{defaultHtml:r,placeholder:n.ENTER_TEXT,toolbar:i,allowEmptySpans:!0,onChange:this._onChangeTextEditor,onFocus:this._onFocusTextEditor,onBlur:this._onBlurTextEditor}))}},{key:"renderBank",value:function(){var e=this;if(!this.isBlanks||!this.state.isDraggable&&!this.isMobileV2)return null;var t=this.props.mode;return m.default.createElement("div",{className:"gaps-bank-wrapper"},m.default.createElement("div",{ref:function(t){e._gapsBank=t},className:"gaps-bank",onClick:function(){t!==y.PLAYER||e.isMobileV2||e.returnAnswerToBank()},"data-clickable":!1},t===y.EDITOR&&this.renderBankForEditor(),t===y.PLAYER&&this.renderBankForPlayer()))}},{key:"renderBankForEditor",value:function(){var e=this,t=this.props,n=t.model,a=t.language,r=n.data.gaps,i=n.data.distractors,o=this.state.showEmptyDistractor,s=this.state.enableDistractorButton,l="";return m.default.createElement(m.default.Fragment,null,Object.keys(r).map((function(t){return l=r[t],!!e.showBankGapEditor(t,l)&&m.default.createElement("span",{className:"bank-gap",key:"bank-gap-".concat(t),"data-bank-gap-id":t,"data-automation-id":t},m.default.createElement(I.default,{className:"bank-gap-content","data-automation-id":"bank-gap-content-editor",title:l,html:l,onBlur:function(n){return e.editGapsFromBank(t,n)},onChange:function(n,a){return e.editBankGap(t,n,a)}}),m.default.createElement("span",{className:"t2kInt-icon-delete_close","data-automation-id":"delete-close-btn",onClick:function(){return e.deleteBankGap(t)}}))})),Object.keys(i).map((function(t){return m.default.createElement("span",{className:"bank-gap",key:"bank-gap-"+t,"data-bank-gap-id":t,"data-automation-id":t},m.default.createElement(I.default,{className:"bank-gap-content",defaultHtml:i[t],onBlur:function(n){return e.editDistractor(t,n)}}),m.default.createElement("span",{className:"t2kInt-icon-delete_close",onClick:function(){return e.deleteDistractor(t)}}))})),o&&m.default.createElement("span",{className:"bank-gap"},m.default.createElement("span",{className:"bank-gap-content",ref:function(t){e._emptyDistractor=t},id:"emptyDistractor",contentEditable:!0,onBlur:this.onDistractorBlur}),m.default.createElement("span",{className:"t2kInt-icon-delete_close"})),m.default.createElement("span",{className:"addDistractor bank-gap ".concat(s?"":"disabled"),onClick:this.addEmptyDistractor},m.default.createElement("span",{className:"distractor-text"},a.DISTRACTORS)))}},{key:"renderBankForPlayer",value:function(){var e=this,t=this.props.model,n=this.isBlanks?this.state.gapsAndDist:t.data.gaps;return(this.isBlanks?this.state.shuffledGapsAndDist:n).map((function(t){var a=n[t];return e.showBankGapPlayer(t,a)?e.renderBankItem(t):null}))}},{key:"renderBankItem",value:function(e){var t=this,a=this.props,r=a.isEnabled,i=a.mode,o=a.model.data,s=this.state.isDraggable,l=this.state.gapBankMap.gaps[e]||e,u=this.state.selectedBankGapId,c=(this.isBlanks?this.state.gapsAndDist:this.state.gaps)[e],d=u===e,f=r&&i===y.PLAYER&&s,p=(0,E.default)("bank-gap",{selected:d,draggable:f}),h=this.isMobileV2?function(){return t.onAnswerSelectedMobileV2(e)}:null,v=d&&s;return m.default.createElement("div",{className:"bank-gap-wrapper",key:"bank-gap-wrapper-".concat(e),onClick:h},m.default.createElement("span",{className:p,"data-bank-gap-id":"".concat(l)},n.renderBankItemContent(c)),v&&n.renderSelectedBankItemPlaceHolder(c,o.displayDuplicates))}},{key:"showBankGapEditor",value:function(e,t){var n=this.props.model.data.displayDuplicates,a=this.state.duplicatesMap;return n||!a[t]||0===a[t].indexOf(e)}},{key:"showBankGapPlayer",value:function(e,t){var a=this.props,r=a.model,i=a.userState,o=r.data.displayDuplicates,s=this.state.duplicatesMap,l=i.answers||{};return!(o||s[t]&&0!==s[t].indexOf(e))||o&&!n.isBankGapSetAsAnswer(l,e)}},{key:"handleGapClickV2",value:function(e,t,n){e.stopPropagation(),this.state.gapForDelete||(n?this.setState({gapForDelete:t}):this.setState({selectedGapId:t}))}},{key:"onAnswerSelectedMobileV2",value:function(e){var t=this.state.selectedGapId;t&&this.setState({selectedGapId:""},this.props.userState.updateUserAnswers(t,e))}},{key:"_clickV2Gap",value:function(e,t){this.setState({showAnswerList:!0,gapIdForAnswerList:e,availableAnswers:t})}},{key:"_closeAnswerList",value:function(){this.setState({showAnswerList:!1})}},{key:"_onBlurText",value:function(){this.focusOutGaps(),this.updateModel(),this.checkEmptyGaps(),this.setState({enableButton:!1})}},{key:"_onClickText",value:function(e){var t=(0,S.default)(e.target),n=t.hasClass("gap")?t:t.parents(".gap");if(n.length>0){var a=parseInt(n.css("font-size"),10);if(this.props.ltr?n.width()+n.offset().left<e.pageX+a:n.offset().left+a>e.pageX){var r=n.attr("id");this.deleteGap(r,n)}else this.focusGap(n);this.setState({enableButton:!1})}else this.setState({enableButton:!1}),this.blurGap(),this.checkEmptyGaps()}},{key:"_onBlurTextEditor",value:function(){this.editor.froalaEditor("selection.restore"),this.setState({enableButton:this.editor.froalaEditor("selection.inEditor")})}},{key:"_onFocusTextEditor",value:function(){this.setState({enableButton:!0})}},{key:"_onChangeTextEditor",value:function(e){if(this.editor){var t=!!e.html;t!==!!this.state.enableDistractorButton&&this.setState({enableDistractorButton:t}),this.updateModel(),this.checkEmptyGaps()}}},{key:"_onClickCreateGap",value:function(e){e.preventDefault(),e.stopPropagation(),this.editor.froalaEditor("selection.inEditor")?(this.convertHTMLToGap(),this.updateModel(),this.setState({enableButton:!1,noGapValidation:!1})):this.setState({enableButton:!1,noGapValidation:!1})}},{key:"destroySelectLists",value:function(e){var t=this;if(this.props.isEnabled){var n=e.model.data.gaps;Object.keys(n).forEach((function(e){var n=t._wrapper.querySelector('[id="'.concat(e,'"]'));g.default.unmountComponentAtNode(n)}))}}},{key:"getStateParams",value:function(e){switch(this.props.mode){case y.EDITOR:return this.getEditorState(e);case y.PLAYER:return this.getPlayerState(e)}return{}}},{key:"getEditorState",value:function(e){var t={enableButton:!1,noGapValidation:!1,emptyGapValidation:!1,existingGapDistractorValidation:!1,isDraggable:this.isBlanks};if(this.isBlanks){var a={duplicatesMap:n.createDuplicates(e.model.data.gaps),showEmptyDistractor:!1,enableDistractorButton:this.enableDistractorButton()};t=L(L({},t),a)}return t}},{key:"getPlayerState",value:function(e){var t=e.model.data,a=t.gaps,r=t.distractors,i={gaps:a,isDraggable:this.isDraggable(e)};if(this.isBlanks){var o=Object.assign({},a,r),s={distractors:r,gapsAndDist:o,shuffledGapsAndDist:R.shuffle(Object.keys(o)),duplicatesMap:n.createDuplicates(a),gapBankMap:n.createGapBankMap(a)};i=L(L({},i),s)}return i.html=this.setGapValue(e,i.gapsAndDist,i.isDraggable),i}},{key:"isDraggable",value:function(e){return this.isBlanks&&!n.isMobileView(e)}},{key:"getNewGapValue",value:function(e,t){var n={};return n.html=this.setGapValue(e,this.state.gapsAndDist,t),this.isBlanks&&(n.selectedBankGapId=void 0),n}},{key:"setGapValue",value:function(e,t,n){var a=e.model.data,r=a.html,i=a.gaps,o=e.userState,s=e.mode,l=e.isEnabled,u=e.ciResultsHidden,c=e.showAnswers,d=e.services,f=this.isBlanks;if(s!==y.PLAYER)return r;var p=document.createElement("div");p.innerHTML=r;var h,m,v,g,E,_=o.data.answers||{},k=f?t:i,T=o.data.checkedAnswers||{},b=this.props.services.ConfigurationService.fillInWritingMultiAnswersDelimiter,C=this.isInteractionsThemeV2,I=this.isMobileV2;return(0,S.default)(p).find(".gap").each((function(){if(v=(0,S.default)(this),I)v.html(""),v.attr("contenteditable",!1);else{if(h=this.id,m=_[h]?f?k[_[h]]:_[h]:"",c&&!u){if(v.attr("contenteditable",!1),C){var e=o.data.checkedAnswers[h]===w.CORRECT||d.ConfigurationService.isPreview;e?v.html(v.html().split(b)[0]):v.html((m?m+" | ":"")+'<span class="text-correct">'+v.html().split(b)[0]+"</span>"),v.addClass(e?w.CORRECT:w.WRONG)}else v.html(v.html().split(b)[0]);return}v.html(""),f?(m&&v.addClass("full"),v.attr("contenteditable",!1),n?(g='<span class="bank-gap" title="'+m+'"><span class="bank-gap-content">'+m+"</span></span>",v.append(g)):l?v.addClass("select-list"):v.text(m)):(v.attr("contenteditable",!0),v.text(m),v.addClass("writing")),!u&&T&&T[h]&&(E=T[h],v.addClass(E)),l&&!v.hasClass("correct")||v.attr("contenteditable",!1)}})),p.innerHTML}},{key:"focusGap",value:function(e){this.editor.froalaEditor("events.trigger","blur",[],!0),this.editor.froalaEditor("edit.off");var t=(0,S.default)(e);t.attr("contenteditable","true"),t.focus(),this.setState({enableButton:!1})}},{key:"blurGap",value:function(){this.focusOutGaps(),this.editor.froalaEditor("edit.on"),this.editor.froalaEditor("events.trigger","focus",[],!0),this.setState({enableButton:!0})}},{key:"focusOutGaps",value:function(){var e=this.editor.find(".gap");e.blur(),e.attr("contenteditable","false")}},{key:"deleteGap",value:function(e,t){var a=t.html();t.replaceWith(a);var r=this.editor.froalaEditor("html.get"),i=this.getGapData();if(this.setState({noGapValidation:R.isEmpty(i)}),this.blurGap(),this.isBlanks){var o=n.createDuplicates(i);this.setState({duplicatesMap:o}),this.setExistingGapDistractorValidation()}this.props.model.deleteGapFromModel(e,r)}},{key:"updateModel",value:function(){var e=this.editor.froalaEditor("html.get"),t=this.getGapData();this.props.model.updateModel(e,t);var a=n.createDuplicates(t);this.setState({duplicatesMap:a}),this.setExistingGapDistractorValidation()}},{key:"getGapData",value:function(){var e=this.props.mode===y.EDITOR?this.editor:(0,S.default)(this._answerArea),t={};return e.find(".gap").each((function(){var e=this.id,n=(0,S.default)(this).text().trim();t[e]=n})),t}},{key:"convertHTMLToGap",value:function(){var e=(0,T.default)();this.editor.froalaEditor("format.apply","span",{class:"gap-".concat(e)});var t=(0,o.default)(this._wrapper.querySelectorAll(".gap-".concat(e)));if(t&&0!==t.length){var n=t.map((function(e){return e.innerHTML})).join(""),a=document.createElement("span");a.className="gap",a.setAttribute("id",e),a.setAttribute("contenteditable","true"),a.innerHTML=n;var r=t[0],i=document.createTextNode(C.UNICODE_NBSP);r.parentNode.insertBefore(i.cloneNode(),r),r.parentNode.insertBefore(a,r),r.parentNode.insertBefore(i.cloneNode(),r),t.forEach((function(e){return e.parentNode.removeChild(e)})),this.focusGap(a),this.state.enableDistractorButton||this.setState({enableDistractorButton:!0}),this.updateModel()}}},{key:"updateAnswer",value:function(e){var t=(0,S.default)(e.target),n=t.attr("id");if(n){var a=t.text();this.props.userState.updateUserAnswer(n,a)}}},{key:"checkEmptyGaps",value:function(){var e,t,n=this.editor.find(".gap"),a=[];n.each((function(){t=(0,S.default)(this).text(),a.push(t)})),e=a.some((function(e){return 0===e.length})),this.setState({emptyGapValidation:e})}},{key:"enableDistractorButton",value:function(){return!!this.props.model.data.html}},{key:"editBankGap",value:function(e,t,n){var a=n.target.textContent;this.setState({gaps:L(L({},this.state.gaps),{},(0,s.default)({},e,a))})}},{key:"editGapsFromBank",value:function(e,t){var n=this,a=t.target.textContent;if(this.props.model.data.displayDuplicates)this.editor.find(".gap#"+e).text(a);else{var r=this.state.duplicatesMap,i=R.find(r,(function(t){return t.includes(e)}));i&&i.forEach((function(e){n.editor.find(".gap#"+e).text(a)}))}this.updateModel()}},{key:"deleteBankGap",value:function(e){var t=this.editor.find(".gap#"+e);this.deleteGap(e,t)}},{key:"addEmptyDistractor",value:function(){var e=this;if(this.state.enableDistractorButton){var t=this.getGapData();this.setState({noGapValidation:R.isEmpty(t),showEmptyDistractor:!0}),setTimeout((function(){(0,S.default)(e._emptyDistractor).focus()}),0)}}},{key:"onDistractorBlur",value:function(e){var t=(0,T.default)();this.setState({showEmptyDistractor:!1}),e.target.textContent&&this.props.model.addDistractorToModel(t,e.target.textContent),this.setExistingGapDistractorValidation()}},{key:"deleteDistractor",value:function(e){this.props.model.deleteDistractorFromModel(e),this.setExistingGapDistractorValidation()}},{key:"editDistractor",value:function(e,t){if(t.target.textContent){var n=t.target.textContent;this.props.model.editDistractorInModel(e,n),this.setExistingGapDistractorValidation()}else this.deleteDistractor(e)}},{key:"doesDistractorExistAsGapValue",value:function(){var e=this.props.model.data.distractors,t=this.state.duplicatesMap;return!!e&&R.some(e,(function(e){return t[e]}))}},{key:"setExistingGapDistractorValidation",value:function(){this.setState({existingGapDistractorValidation:this.doesDistractorExistAsGapValue()})}},{key:"getDraggableBankGaps",value:function(){var e=this._gapsBank,t=this._answerArea;return[].concat((0,o.default)(e.querySelectorAll(".bank-gap:not([data-bank-gap-placeholder])")),(0,o.default)(t.querySelectorAll(".gap:not(.correct) .bank-gap")))}},{key:"getAvailableDropTargets",value:function(){return[].concat((0,o.default)(this._wrapper.querySelectorAll(".gap:not(.correct)")),[this._gapsBank])}},{key:"onDraggableItemPress",value:function(e,t){e.stopPropagation();var n=e.target,a=this.getParentGap(n);a&&!a.classList.contains("full")&&b.Draggable.get(t).endDrag()}},{key:"onDraggableItemClick",value:function(e,t,n){e.stopPropagation();var a=e.target,r=this.getParentGap(a);if(r)this.handleGapClick(r,n);else{var i=this.getParentBankGap(a);this.handleBankGapClick(i,n)}}},{key:"onDraggableItemDrag",value:function(e,t){e.stopPropagation();var n=b.Draggable.get(t),a=this.getAvailableDropTargets();a.forEach((function(e){e.classList.remove("active")}));var r=a.find((function(e){return n.hitTest(e,"40%")}));if(r)r.classList.add("active");else{var i=this.getParentGap(t);i?i.classList.add("active"):this._gapsBank.classList.add("active")}}},{key:"onDraggableItemDragStart",value:function(e,t){t.classList.add("dragging")}},{key:"onDraggableItemDragEnd",value:function(e,t){var a=b.Draggable.get(t),r=this.getAvailableDropTargets(),i=r.find((function(e){return a.hitTest(e,"40%")}));i&&i!==this._gapsBank?this.dropGapBankItemOnGap(t,i):this.getParentGap(t)&&i===this._gapsBank?this.returnAnswerToBank():(n.dndResetBankGapPosition(t,.2),this.deselectAnswer());r.forEach((function(e){e.classList.remove("active")})),t.classList.remove("dragging")}},{key:"setGapsDroppableBehavior",value:function(){this.props.isEnabled&&(0,o.default)(this._wrapper.querySelectorAll(".gap")).forEach((function(e){e.classList.add("droppable");var t=e.querySelector(".bank-gap");t&&t.classList.add("draggable")}))}},{key:"setPlayerDraggableBehavior",value:function(){this.props.isEnabled?this.setPlayerDraggable():this.disablePlayerDraggable()}},{key:"setPlayerDraggable",value:function(){var e=this;this.getDraggableBankGaps().forEach((function(t){b.Draggable.get(t)||b.Draggable.create(t,{autoScroll:1.5,bounds:e._container,onPress:function(n){e.onDraggableItemPress(n,t)},onClick:function(n){e.onDraggableItemClick(n,t,!0)},onDrag:function(n){e.onDraggableItemDrag(n,t)},onDragStart:function(n){e.onDraggableItemClick(n,t),e.onDraggableItemDragStart(n,t),e.taskFocus()},onDragEnd:function(n){e.onDraggableItemDragEnd(n,t)}})}))}},{key:"dropGapBankItemOnGap",value:function(e,t){var a=t,r=a.getAttribute("id");this.state.selectedGapId!==r&&this.moveAnswerToGap(a,r),n.dndResetBankGapPosition(e,0)}},{key:"disablePlayerDraggable",value:function(){this.getDraggableBankGaps().forEach((function(e){var t=b.Draggable.get(e);t&&t.kill()}))}},{key:"addClassToGapParent",value:function(){for(var e=(0,S.default)(this._wrapper).find(".gap"),t=0;t<e.length;t++)"SPAN"===e[t].parentNode.tagName&&(e[t].parentElement.className="normal-font")}},{key:"setLongestWidth",value:function(){this.addClassToGapParent();var e=(0,o.default)(this._wrapper.querySelectorAll(".bank-gap")).reduce((function(e,t){var n=t.clientWidth;return n>e?n:e}),0);this.longestWidth="".concat(e,"px"),this.setGapWidth(this.longestWidth)}},{key:"setGapWidth",value:function(e){(0,o.default)(this._wrapper.querySelectorAll(".gap")).forEach((function(t){t.style.width=e}))}},{key:"moveAnswerToGap",value:function(e,t,n){var a=this.props.userState.data.answers||{},r=n||(this.state.selectedBankGapId?this.state.selectedBankGapId:a&&this.state.selectedGapId&&a[this.state.selectedGapId]?a[this.state.selectedGapId]:""),i=this.state.gapsAndDist[r];if(r?e.classList.add("full"):this.removeAnswerFromGap(e),this.state.isDraggable){var o=e.querySelector(".bank-gap-content");o.textContent=i,o.setAttribute("title",i)}this.state.selectedGapId&&this.state.selectedGapId!==t&&this.returnAnswerToBank(),this.props.userState.updateUserAnswers(t,r),this.deselectAnswer()}},{key:"returnAnswerToBank",value:function(){this.state.selectedGapId&&(this.removeAnswerFromGap(),this.props.userState.removeDNDUserAnswer(this.state.selectedGapId),this.deselectAnswer())}},{key:"returnAnswerToBankV2",value:function(){this.state.gapIdForAnswerList&&(this.props.userState.removeDNDUserAnswer(this.state.gapIdForAnswerList),this.setState({gapIdForAnswerList:""}))}},{key:"returnAnswerToBankMobileV2",value:function(){this.props.userState.removeDNDUserAnswer(this.state.gapForDelete),this.setState({gapForDelete:""})}},{key:"removeAnswerFromGap",value:function(e){var t=e||this.getGapById(this.state.selectedGapId);if(t.classList.remove("full"),this.state.isDraggable){t.innerHTML='<span class="bank-gap"><span class="bank-gap-content"></span></span>'}}},{key:"deselectAnswer",value:function(){this.setState({selectedBankGapId:"",selectedGapId:""})}},{key:"selectAnswerFromList",value:function(e,t){var n=this.state.gapBankMap.bank[t]||t,a=this.getGapById(e);0===n?(this.state.selectedGapId=e,this.returnAnswerToBank()):(this.state.selectedBankGapId=n,this.moveAnswerToGap(a,e))}},{key:"handleGapHighlight",value:function(e,t){t&&this._answerArea.querySelector('[id="'.concat(t,'"]')).classList.remove("selected");if(e){if(e===t)return void this.deselectAnswer();this._answerArea.querySelector('[id="'.concat(e,'"]')).classList.add("selected")}}},{key:"handleGapClick",value:function(e,t){if(!e.classList.contains("correct")){var n=e.getAttribute("id");this.state.selectedBankGapId&&t||this.isOtherGapClicked(e,n)?this.moveAnswerToGap(e,n):this.state.selectedGapId!==n?this.setState({selectedGapId:n,selectedBankGapId:void 0}):t&&this.deselectAnswer()}}},{key:"isOtherGapClicked",value:function(e,t){var n=this.state.selectedGapId&&this.state.selectedGapId!==t;if(!n)return!1;var a=this.getGapById(this.state.selectedGapId).classList.contains("full"),r=e.classList.contains("full");return a||r}},{key:"handleBankGapClick",value:function(e,t){var n=e.getAttribute("data-bank-gap-id"),a=this.state.gapBankMap.bank[n]||n;if(this.state.selectedBankGapId!==a)if(this.state.selectedGapId){var r=this.getGapById(this.state.selectedGapId);this.moveAnswerToGap(r,this.state.selectedGapId,a)}else this.setState({selectedBankGapId:a,selectedGapId:void 0});else t&&this.deselectAnswer()}},{key:"handleContainerClick",value:function(e){var t=e.target;if(this.props.mode===y.PLAYER&&this.state.isDraggable){var n=this.getParentGap(t),a=this.getParentBankGap(t);n||a||this.deselectAnswer()}else this.isMobileV2&&this.setState({gapForDelete:""});this.taskFocus()}},{key:"getGapById",value:function(e){return this._answerArea.querySelector('[id="'.concat(e,'"]'))}},{key:"getParentGap",value:function(e){return(0,o.default)(this._answerArea.querySelectorAll(".gap")).find((function(t){return t.contains(e)}))}},{key:"getParentBankGap",value:function(e){return(0,o.default)(this._wrapper.querySelectorAll(".bank-gap")).find((function(t){return t.contains(e)}))}},{key:"taskFocus",value:function(){this.props.onTaskFocus&&!this.props.model.data.checkable&&this.props.onTaskFocus()}}],[{key:"renderSelectedBankItemPlaceHolder",value:function(e,t){var a=t?{visibility:"hidden"}:void 0;return m.default.createElement("span",{className:"bank-gap bank-gap-placeholder selected","data-bank-gap-placeholder":!0,style:a},n.renderBankItemContent(e))}},{key:"renderBankItemContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return m.default.createElement("span",{className:"bank-gap-content",title:e},e)}}]),n}(m.default.Component))||i)||i;t.default=x},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=a(n(464));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.gapId,a=t.answer,r=t.isFocused,i=t.checkedState,o=t.isCompleted,s=(0,d.default)("fitbGap",i,{selected:r,answered:a,checked:i,completed:o});return c.default.createElement("div",{className:s,key:n,onClick:function(t){e.onGapClick(t)}},a)}},{key:"onGapClick",value:function(e){var t=this.props,n=t.onClick,a=t.isEnabled,r=t.checkedState;a&&r!==f.CORRECT&&n(e)}}]),n}(c.Component);t.default=h,h.defaultProps={answer:"",isFocused:!1,checkedState:""}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"includes",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"some",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"find",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"isEmpty",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"shuffle",{enumerable:!0,get:function(){return l.default}});var r=a(n(966)),i=a(n(967)),o=a(n(217)),s=a(n(105)),l=a(n(1145))},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{stroke:"null",id:"svg_1",d:"m12.189933,4.098195a7.872739,7.872739 0 0 1 7.872739,7.872739a7.872739,7.872739 0 0 1 -7.872739,7.872739a7.873632,7.873632 0 1 1 0,-15.745477z",fillRule:"evenodd",fill:"#FFF",key:0}),a.createElement("path",{stroke:"#FFF",id:"svg_2",d:"m12.189933,1.25c5.920635,0 10.720933,4.800298 10.720933,10.720933s-4.800298,10.720933 -10.720933,10.720933c-5.921529,0 -10.720933,-4.800298 -10.720933,-10.720933s4.799404,-10.720933 10.720933,-10.720933z",fillRule:"evenodd",fill:"none",key:1}),a.createElement("path",{stroke:"null",id:"svg_3",d:"m7.593333,8.327603l2.504231,0l1.926194,2.281772l1.994987,-2.281772l2.365753,0l-3.151061,3.411937l3.426232,3.732672l-2.573024,0l-2.145973,-2.471175l-2.18707,2.471175l-2.422037,0l3.426232,-3.742499l-3.164462,-3.402109z",fillRule:"evenodd",fill:"#FF0036",key:2})])}r.defaultProps={width:"24",height:"24"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(23)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=r(n(0)),h=(a(n(2)),a(n(11))),m=r(n(131)),v=n(52),g=n(132),E=n(110),_=n(46),y=a(n(13)),k=a(n(18)),S=a(n(228)),T=n(618),b=a(n(789)),C=a(n(790)),I=a(n(791)),O=a(n(465)),A=a(n(101)),N=n(54),w=n(102),R=n(264);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var M=(0,_.inject)("services")(i=(0,_.observer)(i=function(e){(0,c.default)(n,e);var t=P(n);function n(e){var a,r;(0,s.default)(this,n),r=t.call(this,e);var i=e.services.ConfigurationService,o=e.model.data.subType;return r.isInteractionsThemeV2=i.isInteractionsThemeV2,r.isCIEditor=i.isCIEditor,r.isESignature=o===N.FREE_WRITING_SUBTYPE_E_SIGNATURE,r.fileUploadSizeLimit=y.default.getAppdata().appConf.learnerUploadFileSizeLimit,r.isAnswerEmbedded=null===(a=e.taskPresentationProperties)||void 0===a?void 0:a.embeddedAnswer,r.state={inFocus:!1,showRemoveFiles:!1},r.isMobile=y.default.isMobile()||r.isInteractionsThemeV2&&y.default.isTablet(),r._handleBlur=r._handleBlur.bind((0,u.default)(r)),r._handleTextChange=r._handleTextChange.bind((0,u.default)(r)),r._handleFocus=r._handleFocus.bind((0,u.default)(r)),r.handleUploadFileStarted=r.handleUploadFileStarted.bind((0,u.default)(r)),r}return(0,l.default)(n,[{key:"render",value:function(){var e,t=this,n=this.props.mode===v.EDITOR,a=this.props.model.data,r=a.paragraphSizeMode,i=a.enableToolbar,s=a.subType,l=a.guidelines,u=a.inputTypes,c=a.plagiarismScanType,d=s===N.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER,f=this.props.userState?this.props.userState.textAnswer:void 0,E=this.props.services.ConfigurationService.isPreview,_=this._canEditGuidelines(),k=this._shouldShowGuidelines(),S=void 0===(u&&c)||((null==u?void 0:u.includes(R.INPUT_TYPES.TEXT))||c===R.INPUT_TYPES_KEYS.TEXT),T=void 0===(u&&c)||((null==u?void 0:u.includes(R.INPUT_TYPES.FILE))||c===R.INPUT_TYPES_KEYS.FILE);e=d?!y.default.isInstructor()||E||n||this.isInteractionsThemeV2:(this.isESignature||n||!this.props.isEnabled||this.isCIEditor)&&!_;var b,C,I=this.props.language,O=(0,h.default)("t2k-free-writing-component",{"page-edit":n,"page-play":!n,"e-signature":this.isESignature}),w=this.state.showRemoveFiles&&this.isMobile,P=m.BOXAREA;!e&&(_||i||!this.isInteractionsThemeV2&&d)&&(P=m.BOXAREA_RICH_MEDIA),b=_?I.TYPE_GUIDELINES:d?I.TYPE_YOUR_ANSWER_INSTRUCTOR:I.TYPE_YOUR_ANSWER,l&&(C=y.default.decodeJWT(l));var M=p.default.createElement(m.default,{type:P,paragraphSize:r,placeholder:b,disabled:e,onBlur:this._handleBlur,ref:function(e){t._textAreaRef=e},defaultHtml:_?C:f,onChange:this._handleTextChange,toolbar:this.props.services.ConfigurationService.reducedEditorCapabilitiesV2&&!_?g.TOOLS_V2:g.MINFORMAT_WITH_UPLOAD_FILES,onFocus:this._handleFocus,preventSwipeOnScroll:this.isInteractionsThemeV2&&this.props.preventSwipeOnScroll,disableAutosize:this.isCIEditor&&this.isAnswerEmbedded});return p.default.createElement(p.default.Fragment,null,this._renderRemoveFiles(e),!w&&p.default.createElement("div",{className:O},!d&&!this.isAnswerEmbedded&&T&&this._renderUploadButton(e),this._renderFiles(),p.default.createElement("div",{className:"text-editor-wrapper"},d&&p.default.createElement("div",{className:"text-editor-wrapper__instructor-answer"},I.INSTRUCTOR_ANSWER_TEXT),k?p.default.createElement("div",{className:"text-editor-wrapper__text ".concat(k?"text-editor-wrapper__text--with-guidelines":"")},S&&M,k&&p.default.createElement("div",{className:"text-editor-wrapper__guidelines"},p.default.createElement("div",{className:"text-editor-wrapper__guidelines-title"},I.GUIDELINES_TITLE),p.default.createElement("div",(0,o.default)({className:"text-editor-wrapper__guidelines-text"},(0,A.default)(C))))):S&&M,this.state.inFocus&&!d&&this._renderDoneButtonAndroidV2(f))))}},{key:"_canEditGuidelines",value:function(){var e=this.props.mode===v.EDITOR,t=this.props.model.data,n=t.subType,a=t.checkingType,r=n===N.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER;return e&&!r&&a===w.MANUAL&&!this.isInteractionsThemeV2}},{key:"_shouldShowGuidelines",value:function(e){var t=this.props.readOnlyMode,n=this.props.model.data.guidelines;if(y.default.isLearner()){var a,r=null===(a=this.props.userState)||void 0===a?void 0:a.taskApiForInteractions.getTaskProgress();return t&&n&&r&&r!==E.PENDING_CHECK}return t&&n&&!e&&!this.isInteractionsThemeV2}},{key:"_handleFocus",value:function(){this._onToggleFocus(!0)}},{key:"_handleBlur",value:function(e){var t,n=this.props.model.data.plagiarismScanType;t=e.html||""===e.html?e.html:this._textAreaRef.getInputValue(),this._canEditGuidelines()?this.props.model.setGuidelines(t):this.props.userState.setTextAnswer(t,n),this._onToggleFocus(!1)}},{key:"_handleTextChange",value:function(e){var t,n,a=this.props.model.data.plagiarismScanType,r=e.html||e.innerHtml,i=null!==(t=null===(n=this._textAreaRef)||void 0===n?void 0:n.getInputValue())&&void 0!==t?t:r.replace("<p>","").replace("</p>","");this._canEditGuidelines()?this.props.model.setGuidelines(i):this.props.userState.setTextAnswer(i,a)}},{key:"_onToggleFocus",value:function(e){this.isInteractionsThemeV2&&y.default.isAndroid()&&(this.props.onlyShowAnswer(e),this.setState({inFocus:e}))}},{key:"_renderDoneButtonAndroidV2",value:function(e){var t=e?"overlay-taskgroup.buttons.done":"overlay-taskgroup.buttons.back";return p.default.createElement("div",{className:"done-fw",onClick:this.closeOverlay},p.default.createElement("span",{className:"done-fw__message"},k.default.translate(t)))}},{key:"_renderUploadButton",value:function(e){var t=this,n=this.props.model.data.plagiarismScanType;if(!this.isInteractionsThemeV2||this.state.inFocus||this.isESignature)return null;var a=this.props.services.ConfigurationService,r=this._hasFiles(),i=(0,h.default)("upload-button",{"has-files":r,uploading:this.state.uploading}),o=this._getTextForUploadButton(r),s=this.isMobile?p.default.createElement(C.default,null):p.default.createElement(b.default,null);return p.default.createElement("div",{className:i},this._renderFileIcons(),p.default.createElement(S.default,{dropzoneLanguage:o,validTypes:n?T.WORD_TYPES:T.ALL_FILE_VALID_TYPES,onFileUploaded:function(e,n){t._handleFileUploaded(e,n)},limitationConfiguration:a.sizeLimitation,uploadFileStarted:this.handleUploadFileStarted,icon:s,showWhileUploading:!0,disabled:e||n&&r,generalSizeLimit:this.fileUploadSizeLimit}))}},{key:"_renderFiles",value:function(){var e=this._getFiles();return this.isInteractionsThemeV2||!e||this.props.isEnabled?null:p.default.createElement("div",{className:"file-icons-container"},e.map((function(e){return p.default.createElement("div",{className:"file-link"},p.default.createElement("a",{href:y.default.addCloudFrontKeysToSrc(y.default.getAssetPath(e.src)),target:"_blank",rel:"noopener noreferrer"},e.name))})))}},{key:"_renderFileIcons",value:function(){var e=this,t=this._getFiles();if(t.length<1)return null;var n=t.slice(0,3);return p.default.createElement("div",{className:"file-icons",onClick:function(){e._showRemoveFiles(!0)}},n.map((function(e,n){return p.default.createElement("span",{className:"file-type-icon index_".concat(n),key:"file-type-icon index_".concat(n)},n<2&&".".concat(e.type),2===n&&"".concat(t.length-2,"+"))})))}},{key:"_showRemoveFiles",value:function(e){this.setState({showRemoveFiles:e})}},{key:"_renderRemoveFiles",value:function(e){var t=this,n=this.props.language;if(!this.state.showRemoveFiles)return null;var a=this._getFiles(),r=this.isMobile?p.default.createElement(O.default,null):p.default.createElement(I.default,null);return p.default.createElement("div",{className:"remove-files-dialog"},p.default.createElement("div",{className:"remove-files-container"},p.default.createElement("div",{className:"done-fw__holder",onClick:function(){t._showRemoveFiles(!1)}},p.default.createElement("span",{className:"done-fw__message"},n.UPLOAD_FILE_BUTTON.BACK)),a.map((function(n,a){return p.default.createElement("div",{className:"file-details",key:"remove-file-".concat(a)},p.default.createElement("span",{className:"file-type-icon index_".concat(a)},".".concat(n.type)),p.default.createElement("span",{className:"file-name"},n.name),!e&&p.default.createElement("span",{className:"remove-file-icon",onClick:function(){t._removeFile(a)}},r))}))))}},{key:"_getTextForUploadButton",value:function(e){var t=this.props.language,n=this.state.uploading?t.UPLOAD_FILE_BUTTON.UPLOADING:e?t.UPLOAD_FILE_BUTTON.UPLOAD_FILES:t.UPLOAD_FILE_BUTTON.UPLOAD_FILES_BROWSE;return{DEFAULT:{TITLE:n,SUBTITLE:"",DISCLAIMER:""},HOVER:{TITLE:n,SUBTITLE:"",DISCLAIMER:""},DRAG:{TITLE:n,SUBTITLE:"",DISCLAIMER:""},ERROR:{TITLE:t.UPLOAD_FILE_BUTTON.ERROR,SUBTITLE:"",DISCLAIMER:""}}}},{key:"_hasFiles",value:function(){return this._getFiles().length>0}},{key:"_getFiles",value:function(){return this.props.userState?this.props.userState.files:[]}},{key:"_removeFile",value:function(e){this.props.userState.removeFile(e)}},{key:"handleUploadFileStarted",value:function(){this.setState({uploading:!0})}},{key:"_handleFileUploaded",value:function(e,t){var n=this.props.model.data.plagiarismScanType,a=y.default.getFileTypeFromFileName(t),r={src:e,name:t.name,type:a};this.props.userState.setFileData(r,n),this.setState({uploading:!1})}}]),n}(p.Component))||i)||i;t.default=M},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#8AC9ED",fillRule:"evenodd",d:"M15.947 0c.253 0 .394.324.394.455v8.251h-2.363V2.339H6.497v3.833c0 .13-.065.195-.197.195H2.362v14.294h8.86V23H.459C.335 23 0 22.673 0 22.545V4.808L4.856 0h11.091z",key:0}),a.createElement("path",{fill:"#141D22",fillRule:"evenodd",d:"M20.5 18.322h-3.437v3.398a.5.5 0 0 1-.501.5h-2.674a.5.5 0 0 1-.501-.5v-3.398H9.95a.5.5 0 0 1-.5-.5v-2.638a.5.5 0 0 1 .5-.5h3.437v-3.399a.5.5 0 0 1 .501-.5h2.674a.5.5 0 0 1 .501.5v3.399H20.5a.5.5 0 0 1 .5.5v2.638a.5.5 0 0 1-.5.5z",key:1})])}r.defaultProps={width:"21",height:"23"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#96C8E9",fillRule:"evenodd",d:"M16.478 0c.253 0 .394.324.394.455v8.251h-2.363V2.339H7.028v3.833c0 .13-.065.195-.197.195H2.894v14.294h8.859V23H.991c-.124 0-.46-.327-.46-.455V4.808L5.388 0h11.09z",key:0}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M21.031 18.313h-3.437v3.406a.5.5 0 0 1-.5.5h-2.688a.5.5 0 0 1-.5-.5v-3.406h-3.437a.5.5 0 0 1-.5-.501v-2.624a.5.5 0 0 1 .5-.501h3.437v-3.406a.5.5 0 0 1 .5-.5h2.688a.5.5 0 0 1 .5.5v3.406h3.437a.5.5 0 0 1 .5.501v2.624a.5.5 0 0 1-.5.501z",key:1})])}r.defaultProps={width:"22",height:"23"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M13.44 3.95a9.5 9.5 0 0 1 9.5 9.5 9.5 9.5 0 0 1-9.5 9.5 9.5 9.5 0 0 1-9.5-9.5 9.5 9.5 0 0 1 9.5-9.5z",key:0}),a.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#FFF",d:"M13.5.5c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13z",key:1}),a.createElement("path",{fill:"#FF0024",fillRule:"evenodd",d:"M8.346 9.422h2.803l2.156 2.553 2.232-2.553h2.649l-3.527 3.819 3.834 4.178h-2.879l-2.402-2.766-2.449 2.766h-2.71l3.835-4.189-3.542-3.808z",key:2})])}r.defaultProps={width:"27.5",height:"27.5"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),o=a(n(3)),s=a(n(12)),l=a(n(4)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=r(n(0)),p=n(46),h=a(n(11)),m=a(n(505)),v=(a(n(2)),a(n(226)),n(76)),g=a(n(228)),E=a(n(400)),_=a(n(28)),y=a(n(13)),k=a(n(21)),S=a(n(176)),T=a(n(41)),b=a(n(36)),C=a(n(362)),I=a(n(439)),O=a(n(291)),A=a(n(793)),N=a(n(227)),w=a(n(229));n(968);var R,P=n(52),M=n(442);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var D=_.default.Instance,x=(0,p.inject)("services")(R=(0,p.observer)(R=function(e){(0,u.default)(n,e);var t=L(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={hasImageLoaded:!1,croppingAgain:!1,isFullscreen:!1},a.cropperCanvasStyle={width:450,height:350,margin:"auto"},a.minimumCropSize={width:213.5,height:213.5},a.handleCropClick=a.handleCropClick.bind((0,s.default)(a)),a.handleResetClick=a.handleResetClick.bind((0,s.default)(a)),a.handleDeleteClick=a.handleDeleteClick.bind((0,s.default)(a)),a.handleImageLoad=a.handleImageLoad.bind((0,s.default)(a)),a.handleImageClick=a.handleImageClick.bind((0,s.default)(a)),a.handleFileUpload=a.handleFileUpload.bind((0,s.default)(a)),a.handleFileUploaded=a.handleFileUploaded.bind((0,s.default)(a)),a.openImagePickerModal=a.openImagePickerModal.bind((0,s.default)(a)),a}return(0,l.default)(n,null,[{key:"getExitFullscreen",value:function(){return document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen}}]),(0,l.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.mode,a=t.isSingleMedia;return e=n===P.EDITOR?this.renderEditor():this.renderPlayer(),f.default.createElement("div",{className:"t2i-int-image".concat(a?" single-media":"")},e)}},{key:"renderEditor",value:function(){var e=this,t=this.props,n=t.model,a=t.cropToSquare,r=t.uploadFile,i=this.state.croppingAgain,o=void 0!==n.data.src&&!i;return f.default.createElement("div",{className:"t2i-int-image-editor"},f.default.createElement("div",{className:"t2i-int-image-fileupload".concat(o?" t2i-hide":"")},f.default.createElement(g.default,{ref:function(t){t&&(e._fileUploadRef=t.getWrappedInstance())},icon:f.default.createElement("span",{className:"t2i-int-image-fileupload-icon"},f.default.createElement(I.default,null)),validTypes:M.IMAGE_VALID_TYPES,uploadFile:a?this.handleFileUpload:r,onFileUploaded:this.handleFileUploaded,limitationConfiguration:this.props.services.ConfigurationService.sizeLimitation,openModalCallback:this.openImagePickerModal})),o&&this.renderImage(),!o&&this.renderEditorButtons(),this.renderTexts())}},{key:"renderEditorButtons",value:function(){var e=this.props,t=e.model,n=e.onDelete,a=e.cropToSquare,r=e.language.TOOLTIP,i=t.data.src,o=this.state.croppingAgain,s=void 0!==i;return f.default.createElement("div",{className:"t2i-int-image-editor-hover-layer"},f.default.createElement("div",{className:"t2i-int-image-btn-container"},s&&!o&&f.default.createElement("span",{onClick:this.handleResetClick,title:r.RESET_BTN},f.default.createElement(O.default,null)),a&&s&&!o&&f.default.createElement("span",{onClick:this.handleCropClick,title:r.CROP_BTN},f.default.createElement(A.default,null)),n&&f.default.createElement("span",{onClick:this.handleDeleteClick,title:r.DELETE_BTN},f.default.createElement(N.default,null))))}},{key:"renderPlayer",value:function(){var e=this.props.services.ConfigurationService;return f.default.createElement(f.default.Fragment,null,e.isInteractionsThemeV2?this.renderImageV2():this.renderImage(),this.renderTexts())}},{key:"handleImageClick",value:function(){var e=this.props,t=e.isMedia,a=e.services.ConfigurationService,r=e.taskPresentationDisplayType;a.isInteractionsThemeV2&&t&&r!==k.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY&&(this.state.isFullscreen&&document.fullscreenElement?n.getExitFullscreen().call(document):this.imageElement.requestFullscreen(),this.setState({isFullscreen:!this.state.isFullscreen}))}},{key:"renderImageV2",value:function(){var e=this,t=this.props,n=t.model,a=t.isSingleMedia,r=t.fillImage,i=t.mode,o=t.isMedia,s=t.taskPresentationDisplayType,l=n.data,u=l.src,c=l.title,d=i===P.EDITOR,p=(0,h.default)("t2i-int-image-image-container",{"t2k-int-image-fill":r,"image-with-no-content":!u,"t2i-int-image-image-container--clickable":u&&o&&s!==k.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY});return f.default.createElement("div",{className:"media-content"},f.default.createElement("div",{className:p},a&&f.default.createElement("div",{style:{backgroundImage:"url(".concat(y.default.getAssetPath(u),")")}}),f.default.createElement("img",{className:"t2i-content t2i-fit-viewport ".concat(this.state.imageLoaded&&!a?"show-image":""," ").concat(this.props.isEnabled?"":"disabled"),ref:function(t){e.imageElement=t},src:y.default.getAssetPath(u),title:c,alt:c,onLoad:this.handleImageLoad,onClick:this.handleImageClick}),d&&this.renderEditorButtons()))}},{key:"renderImage",value:function(){var e=this.props,t=e.model,n=e.isSingleMedia,a=e.fillImage,r=e.mode,i=t.data,o=i.src,s=i.title,l=r===P.EDITOR;return f.default.createElement("div",{className:"t2i-int-image-image-container".concat(a?" t2k-int-image-fill":""," ").concat(o?"":"image-with-no-content")},n&&f.default.createElement("div",{style:{backgroundImage:"url(".concat(y.default.getAssetPath(o),")")}}),f.default.createElement("img",{className:"t2i-content t2i-fit-viewport ".concat(this.state.imageLoaded&&!n?"show-image":""," ").concat(this.props.isEnabled?"":"disabled"),src:y.default.getAssetPath(o),title:s,alt:s,onLoad:this.handleImageLoad}),l&&this.renderEditorButtons())}},{key:"renderTexts",value:function(){var e=this.props,t=e.mode,n=e.hideTexts,a=e.model,r=e.language,i=e.services.ConfigurationService,o=e.taskPresentationDisplayType;if(!n)return t===P.EDITOR?w.default.getEditorMediaCaptions(a,r,i.reducedEditorCapabilitiesV2):!(o===k.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY)&&w.default.getPlayerMediaCaptions(a,i.isInteractionsThemeV2)}},{key:"setImageSrc",value:function(e){void 0!==e&&this.props.model.setEditedImage({src:e})}},{key:"handleFileUploaded",value:function(e){var t=this.props.cropToSquare;this.setImageSrc(e),t&&T.default.sendEvent(T.default.TITLES.CROP_IMAGE,T.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},T.default.PARAMS.USER_ACTION,"done"))}},{key:"handleFileUpload",value:function(e,t,n,a){var r=this,i=this.props.uploadFile;if(a)this.setState({croppingAgain:!0},(function(){i(e,t,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r.setState({croppingAgain:!1},(function(){return n.apply(void 0,t)}))}))}));else{var o=new FileReader;o.readAsDataURL(e),o.onload=function(){var e=o.result;r._cropImage(e,(function(e){i(e,t,n)}),n)},o.onerror=function(){}}}},{key:"handleImageLoad",value:function(){this.setState({hasImageLoaded:!0})}},{key:"handleCropClick",value:function(e){var t=this;e.stopPropagation(),D.get(this.props.model.data.editedImage.src,{},{params:{ts:Date.now()},headers:{Accept:"*/*"},responseType:"blob"},!0).then((function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e=n.result;t._cropImage(e,(function(e){t._fileUploadRef.uploadFile(e,!0)}))},n.onerror=function(){}}))}},{key:"handleResetClick",value:function(e){e.stopPropagation(),this.props.model.initialize()}},{key:"handleDeleteClick",value:function(e){e.stopPropagation(),this.props.onDelete()}},{key:"openImagePickerModal",value:function(e,t){var n=this,a=this.props,r=a.modalManager,i=a.ltr,o=a.model,s=a.cropToSquare,l=a.uploadFile,u=a.language,c=o.data.src,d=!1;this._unmountModal=r.mountModal({modalElement:f.default.createElement(C.default,{language:u,defaultValues:{imageUrl:c},limitationConfiguration:this.props.services.ConfigurationService.sizeLimitation,validTypes:M.IMAGE_VALID_TYPES,uploadFile:s?this.handleFileUpload:l,allowCropping:s,cropToSquare:s,minCropSize:this.minimumCropSize,cropperCanvasStyle:this.cropperCanvasStyle,onCancel:function(){n._unmountModal()},onSubmit:function(e){n.setImageSrc(e),d=!0,n._unmountModal()}}),modalWrapperProps:{ltr:i,hideCloseBtn:!0},onModalPostUnmount:function(){n._unmountModal=null,t&&!d&&t()}})}},{key:"_cropImage",value:function(e,t,n){var a=this,r=this.props,o=r.modalManager,s=r.ltr,l=r.cropToSquare,u=r.language.CROPPER,c=!1,d=[{id:"cancel",text:u.CANCEL_BTN,type:b.default.TYPES.SECONDARY,onClick:function(){T.default.sendEvent(T.default.TITLES.CROP_IMAGE,T.default.COMPONENTS.CREATE_INTERACTION_DIALOG,(0,i.default)({},T.default.PARAMS.USER_ACTION,"cancel")),a._unmountModal()}},{id:"crop",text:u.CROP_BTN,type:b.default.TYPES.PRIMARY,onClick:function(){var e=Object.assign({},{imageSmoothingEnabled:!0,imageSmoothingQuality:"high"},a.minimumCropSize),n=a._cropperRef.getCroppedCanvas(e).toDataURL(),r=S.default.dataUrlToFile(n);c=!0,a._unmountModal(),t(r)}}];this._unmountModal=o.mountModal({modalElement:f.default.createElement(E.default,{styleClass:"image-picker-modal cropper-mode",title:u.TITLE,actions:d},f.default.createElement("div",{"data-automation-id":"image-cropper",className:"image-picker-modal__image-cropper"},f.default.createElement("div",{className:"image-picker-modal__image-cropper--text"},u.INSTRUCTIONS),f.default.createElement("div",{className:"image-picker-modal__image-cropper--content"},f.default.createElement(m.default,{onInitialized:function(e){a._cropperRef=e},src:e,style:this.cropperCanvasStyle,minCropBoxWidth:this.minimumCropSize.width,minCropBoxHeight:this.minimumCropSize.height,minContainerWidth:this.cropperCanvasStyle.width,minContainerHeight:this.cropperCanvasStyle.height,minCanvasWidth:this.cropperCanvasStyle.width,minCanvasHeight:this.cropperCanvasStyle.height,zoomOnWheel:!1,guides:!1,toggleDragModeOnDblclick:!1,viewMode:2,autoCropArea:1,initialAspectRatio:l?1:null})))),modalWrapperProps:{ltr:s,hideCloseBtn:!0},onModalPostUnmount:function(){a._unmountModal=null,a._cropperRef=null,n&&!c&&n()}})}}]),n}(f.Component))||R)||R;x.defaultProps={fillImage:!1,ltr:!1,isSingleMedia:!1,cropToSquare:!1,hideTexts:!1,isEnabled:!1,isMedia:!1,taskPresentationDisplayType:""};var F=(0,v.InteractionHoc)((function(e){return{uploadFile:function(){var t;return(t=e.environment).uploadFile.apply(t,arguments)},modalManager:e.modalManager}}),{withRef:!0})(x);t.default=F},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M1.45 31.662v-4.835l10.642-13.858 8.573 9.654 7.539-4.156 10.196 8.961v4.234zM31.883 4.143c0 1.94-1.547 3.513-3.456 3.513s-3.456-1.573-3.456-3.513c0-1.94 1.547-3.513 3.456-3.513s3.456 1.573 3.456 3.513z"}))}r.defaultProps={version:"1.1",width:"40",height:"32",viewBox:"0 0 40 32"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MAX_MATCHES=t.MIN_MATCHES=t.MIN_SCREEN_WIDTH=void 0;var i,o=a(n(40)),s=a(n(3)),l=a(n(4)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=r(n(0)),p=(a(n(2)),n(46)),h=a(n(11)),m=a(n(37)),v=a(n(13)),g=n(52),E=n(462),_=n(466),y=a(n(795)),k=a(n(796));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var T=m.default.isPhone,b=m.default.isMobile;t.MIN_SCREEN_WIDTH=375;t.MIN_MATCHES=2;t.MAX_MATCHES=6;var C={height:118,width:118},I=(0,p.inject)("services")(i=(0,p.observer)(i=function(e){(0,u.default)(n,e);var t=S(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).isInteractionsThemeV2=e.services.ConfigurationService.isInteractionsThemeV2&&!v.default.isFeatureEnabled("forceMatchingV1"),a.isMobileV2=a.isInteractionsThemeV2&&(v.default.isMobile()||v.default.isTablet()),a.state={overlappingIndex:null,overlappingOffsetChange:null,showMatchOptions:""},a}return(0,l.default)(n,null,[{key:"returnMatchToPosition",value:function(e){E.gsap.to(e,.2,{x:0,y:0,top:0,left:0})}},{key:"onDraggableItemDragStart",value:function(e,t,n){t.classList.add("dragging"),n.classList.add("contentDrag")}}]),(0,l.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.mode===g.EDITOR&&this.props.model.createTempModel()}},{key:"componentDidMount",value:function(){this.setPlayerDraggableBehavior()}},{key:"componentDidUpdate",value:function(){this.setPlayerDraggableBehavior()}},{key:"render",value:function(){var e=this,t=this.props.mode===g.EDITOR,n=(0,h.default)("matching",{"matching-edit":t,"matching-play":!t,"show-options":this.showMobileOptions(),phone:T,v2:this.isInteractionsThemeV2});return f.default.createElement("div",{ref:function(t){e._container=t},className:n},t&&this.renderEditor(),!t&&this.renderPlayer())}},{key:"renderEditor",value:function(){return f.default.createElement("div",{className:"matching-wrapper"},this.matchTypeToggle(),this.matchCardEditor(),this.renderHandleAddMatch())}},{key:"renderPlayer",value:function(){return f.default.createElement("div",{className:"matching-wrapper"},f.default.createElement("div",{className:"draggable-matching-wrapper"},!this.isInteractionsThemeV2&&this.renderPlayMode(),this.isInteractionsThemeV2&&this.renderPlayModeV2()))}},{key:"matchTypeToggle",value:function(){var e=this.props.services.ConfigurationService,t=this.props.mode===g.EDITOR,n=e.reducedEditorCapabilitiesV2,a=!n||v.default.isFeatureEnabled("forceMatchingV1"),r=(0,h.default)("match-type-container",{"reduced-editor":v.default.isFeatureEnabled("forceMatchingV1")&&n});return t?f.default.createElement("div",{className:r},a&&this.renderMatchTypeToggle(_.COLUMNA),a&&this.renderMatchTypeToggle(_.COLUMNB)):null}},{key:"matchCardEditor",value:function(){var e=this,t=this.props,n=t.model,a=t.mode===g.EDITOR,r=n.data[_.COLUMNA],i=n.data[_.COLUMNB],o=n.data.types[_.COLUMNA],s=n.data.types[_.COLUMNB],l=r.length>2;return a?r.map((function(t,n){return f.default.createElement("div",{className:"match-row",key:"match-row-".concat(r[n])},e.renderMatchCardEditor(r[n],n,_.COLUMNA,o),e.renderMatchCardEditor(i[n],n,_.COLUMNB,s),f.default.createElement("div",{className:"delete".concat(l?" delete-enabled":""),onClick:function(){return e.handleMatchDelete(n)}},f.default.createElement("a",{className:"btn-flat"},"×")))})):null}},{key:"renderMatchCardEditor",value:function(e,t,n,a){return f.default.createElement("div",{className:"match editor ".concat(n),key:"edit-".concat(n,"-").concat(e)},f.default.createElement("div",{className:"dragItem"},f.default.createElement("div",{className:"match-wrapper"},f.default.createElement("div",{className:"match-content ".concat(a===_.IMAGE?"match-image":"match-text")},a===_.TEXT&&f.default.createElement(this.props.interaction,{id:e,maxLength:150,isRequired:!0,multiLine:!0,hideRichMedia:!0,showCounter:!0,centered:!0}),a===_.IMAGE&&f.default.createElement(this.props.interaction,{id:e,hideTexts:!0,cropToSquare:!0,isRequired:!0,size:C})))))}},{key:"renderHandleAddMatch",value:function(){var e=this,t=this.props,n=t.model,a=t.mode,r=t.services.ConfigurationService,i=n.data[_.COLUMNA];return a===g.EDITOR?r.reducedEditorCapabilitiesV2&&i.length>=6?null:f.default.createElement("div",{className:"add-match",onClick:function(){return e.handleAddMatch()}},"+"):null}},{key:"renderMatchTypeToggle",value:function(e){var t=this;if(e===_.COLUMNB&&v.default.isFeatureEnabled("forceMatchingV1"))return null;var n=this.props.model.data.types[e];return f.default.createElement("div",{className:"match-type-holder"},f.default.createElement("div",{className:"match-type-toggle ".concat(n===_.TEXT?"selected":""),onClick:function(){return t.handleMatchTypeToggle(e,_.TEXT)}},this.props.language.TEXT),f.default.createElement("div",{className:"match-type-toggle ".concat(n===_.IMAGE?"selected":""),onClick:function(){return t.handleMatchTypeToggle(e,_.IMAGE)}},this.props.language.IMAGE))}},{key:"handleMatchTypeToggle",value:function(e,t){this.props.model.data.types[e]!==t&&this.props.model.updateColumnType(e,t)}},{key:"handleAddMatch",value:function(){this.props.model.addMatch()}},{key:"handleMatchDelete",value:function(e){this.props.model.deleteMatch(e)}},{key:"renderPlayMode",value:function(){var e=this,t=this.props,n=t.model,a=t.userState.answersOrder,r=t.showAnswers,i=n.data[_.COLUMNA],o=n.data[_.COLUMNB],s=this._isAnswersWereChangedInNewVersion();return f.default.createElement(f.default.Fragment,null,s&&this.props.renderInteractionChangedAlert(),f.default.createElement("div",{className:"matches-container-player draggable-container"},f.default.createElement("div",{className:"match-column ".concat(_.COLUMNA," ").concat(r?"shown-answers":"")},i.map((function(t,n){return e.renderMatchPlayer(n,_.COLUMNA)}))),!r&&f.default.createElement("div",{className:"match-column ".concat(_.COLUMNB)},a.map((function(t,n){return e.renderMatchPlayer(n,_.COLUMNB)}))),r&&f.default.createElement("div",{className:"match-column ".concat(_.COLUMNB," shown-answers")},o.map((function(t,n){return e.renderMatchPlayer(n,_.COLUMNB)})))))}},{key:"renderPlayModeV2",value:function(){var e=this,t=this.isMobileV2?function(){e.closeMobileOptions()}:null;return f.default.createElement("div",{className:"matching-container-v2",onClick:t},this.renderAnswersV2(),this.renderOptionsV2(),this.renderMobileOptionsV2())}},{key:"renderAnswersV2",value:function(){var e=this,t=this.props,n=t.userState,a=t.userState.answersOrder,r=t.showAnswers,i=t.isEnabled,o=(0,h.default)("matching-answers",{disabled:!i}),s=this._isAnswersWereChangedInNewVersion();return f.default.createElement("div",{className:o},s&&this.props.renderInteractionChangedAlert(),a.map((function(t,a){return r||n.isMatchAnswered(a)?e.renderAnswerV2(t,a):null})))}},{key:"_isAnswersWereChangedInNewVersion",value:function(){var e=this.props,t=e.userState,n=e.model;return!!v.default.isLearner()&&n.data[_.COLUMNA].length!==t.answersOrder.length}},{key:"renderAnswerV2",value:function(e,t){var n=this,a=this.props,r=a.model,i=a.showAnswers,o=a.ltr,s=r.data[_.COLUMNA],l=r.data[_.COLUMNB],u=s[t],c=i?l[t]:l[e],d=this.getCheckClass(t),p=(0,h.default)("match",d,{ltr:o,rtl:!o}),m="answer-".concat(u,"-").concat(c);return f.default.createElement("div",{className:p,onClick:function(){return n.displayRemoveAnswer(t)},key:m},f.default.createElement("div",{className:"match-wrapper"},f.default.createElement("div",{className:"match-content"},f.default.createElement("span",{className:"answer A text-content"},f.default.createElement(this.props.interaction,{id:u})),this.renderSeparator(!0),f.default.createElement("span",{className:"answer B text-content"},f.default.createElement(this.props.interaction,{id:c}))),this.renderRemoveAnswer(t,d)))}},{key:"displayRemoveAnswer",value:function(e){var t=this.props,n=t.userState;if(t.isEnabled&&!n.isAnswerChecked(e)){var a=this.state.removeAnswerIndex!==e;this.setState({removeAnswerIndex:a?e:""})}}},{key:"renderRemoveAnswer",value:function(e,t){var n=this;return!this.props.isEnabled||t!==_.UNCHECKED||this.state.removeAnswerIndex!==e&&!this.isMobileV2?null:f.default.createElement("div",{className:"remove-match-wrapper",onClick:function(){return n.removeAnswer(e)}},f.default.createElement(k.default,null))}},{key:"removeAnswer",value:function(e){this.props.userState.removeMatchAnswer(e)}},{key:"renderOptionsV2",value:function(){var e=this,t=this.props,n=t.userState;if(t.showAnswers)return null;var a=n.getUnansweredMatches();return f.default.createElement("div",{className:"matches-container-player draggable-container"},f.default.createElement("div",{className:"match-column-wrapper ".concat(_.COLUMNA)},f.default.createElement("div",{className:"match-column ".concat(_.COLUMNA)},a.map((function(t){return e.renderMatchPlayerV2(t,_.COLUMNA)})))),f.default.createElement("div",{className:"match-column-wrapper ".concat(_.COLUMNB)},f.default.createElement("div",{className:"match-column ".concat(_.COLUMNB)},a.map((function(t){return e.renderMatchPlayerV2(t,_.COLUMNB)})))))}},{key:"renderDropdown",value:function(e){var t=this;return f.default.createElement("div",{className:"mobile-dropdown match-wrapper match",onClick:function(n){n.stopPropagation(),t.showMatchOptions(e)}},f.default.createElement("span",{className:"pick-answer"},this.props.language.PICK_ANSWER))}},{key:"showMatchOptions",value:function(e){this.showMobileOptions()?this.closeMobileOptions():this.setState({showMatchOptions:e})}},{key:"renderMobileOptionsV2",value:function(){var e=this;if(!this.showMobileOptions())return null;var t=this.props,n=t.userState,a=t.model.data,r=t.ltr,i=n.getUnansweredMatches(),o=a[_.COLUMNB],s="";return f.default.createElement("div",{className:(0,h.default)("matching-options-container",{ltr:r,rtl:!r})},i.map((function(t){return s=o[n.answersOrder[t]],f.default.createElement("div",{className:"match-option",onClick:function(a){a.stopPropagation(),n.swapCards(t,e.state.showMatchOptions),e.closeMobileOptions()},key:"match-option-".concat(s)},f.default.createElement(e.props.interaction,{id:s}))})))}},{key:"showMobileOptions",value:function(){return this.isMobileV2&&""!==this.state.showMatchOptions}},{key:"closeMobileOptions",value:function(){this.showMobileOptions()&&this.setState({showMatchOptions:""})}},{key:"renderMatchPlayer",value:function(e,t){var n=this.props,a=n.model,r=n.userState,i=n.userState.checkedAnswers,o=n.showAnswers,s=n.ciResultsHidden,l=this.props,u=l.userState.answersOrder,c=l.model.data[t],d=t===_.COLUMNA||o?c[e]:c[u[e]],p=this.state,m=p.overlappingIndex,v=p.overlappingOffsetChange,g="play-".concat(t,"-").concat(e,"-").concat(d),E=t===_.COLUMNB&&!o&&i&&r.isAnswerChecked(e)?i[e]:"",k=!E&&r.isMatchAnswered(e)?"answered":"",S=t===_.COLUMNA&&e===m?"overlaps":"",T=a.data.types[t],b=t===_.COLUMNB&&e===m&&null!==v?{top:"".concat(v,"px")}:{};s&&E&&(E="answer-status-hidden");var C=(0,h.default)("match",t,E,S,k);return f.default.createElement("div",{className:C,key:g,"data-id":"".concat(d),"data-index":"".concat(e)},f.default.createElement("div",{className:"player ".concat(t===_.COLUMNB?"dragItem":""),style:b},f.default.createElement("div",{className:"match-wrapper"},f.default.createElement("div",{className:"match-content ".concat(T===_.IMAGE?"match-image":"match-text")},f.default.createElement(this.props.interaction,{id:d})),f.default.createElement("span",{className:"drag-handle"},f.default.createElement(y.default,null)))))}},{key:"renderMatchPlayerV2",value:function(e,t){if(this.isMobileV2&&t===_.COLUMNB)return this.renderDropdown(e);var n=this.props,a=n.userState.answersOrder,r=n.model.data,i=n.ltr,o=r[t],s=t===_.COLUMNA?o[e]:o[a[e]],l=this.state,u=l.overlappingIndex,c=l.overlappingOffsetChange,d="play-".concat(t,"-").concat(e,"-").concat(s),p=t===_.COLUMNB&&e===u&&null!==c?{top:"".concat(c,"px")}:{},m=t===_.COLUMNA&&e===u?"overlaps":"",v=(0,h.default)("match",t,m,{ltr:i,rtl:!i}),g=(0,h.default)("player",{dragItem:t===_.COLUMNB&&!this.isMobileV2});return f.default.createElement("div",{className:v,key:d,"data-id":"".concat(s),"data-index":"".concat(e)},f.default.createElement("div",{className:g,style:p},f.default.createElement("div",{className:"match-wrapper"},f.default.createElement("div",{className:"match-content match-text"},t===_.COLUMNB&&this.renderSeparator(),f.default.createElement(this.props.interaction,{id:s}),t===_.COLUMNA&&this.renderSeparator()))))}},{key:"renderSeparator",value:function(e){return this.isMobileV2&&!e?null:f.default.createElement("span",null," ")}},{key:"getCheckClass",value:function(e){var t=this.props,n=t.userState.checkedAnswers,a=t.showAnswers;if(t.ciResultsHidden)return _.UNCHECKED;var r=n&&n[e]?n[e]:_.UNCHECKED,i=r;return a&&r!==_.CORRECT&&(i=_.CHECKED),i}},{key:"setPlayerDraggableBehavior",value:function(){this.props.mode===g.EDITOR||this.isMobileV2||(this.props.isEnabled?this.setPlayerDraggable():this.disablePlayerDraggable())}},{key:"setPlayerDraggable",value:function(){var e=this;this.getMatchesForDrag().forEach((function(t){var a=t.querySelector(".dragItem");E.Draggable.get(a)||E.Draggable.create(a,{allowNativeTouchScrolling:!1,autoScroll:1.5,bounds:e._container.querySelector(".draggable-container"),type:b||e.isInteractionsThemeV2?"y":"",onDrag:function(n){e.onDraggableItemDrag(n,t)},onDragStart:function(r){n.onDraggableItemDragStart(r,a,t),e.taskFocus()},onDragEnd:function(n){e.onDraggableItemDragEnd(n,t)},onRelease:function(){a.style.zIndex=""}})}))}},{key:"disablePlayerDraggable",value:function(){this.getMatches().forEach((function(e){var t=E.Draggable.get(e.querySelector(".dragItem"));t&&t.kill()}))}},{key:"onDraggableItemDrag",value:function(e,t){var n=t.querySelector(".dragItem"),a=E.Draggable.get(n),r=(this.isInteractionsThemeV2,this.getMatchesForDrag()).find((function(e){return a.hitTest(e,"50%")}));if(r){var i=parseInt(r.getAttribute("data-index"),10);if(this.isInteractionsThemeV2)return void this.setState({overlappingIndex:i});var o=t.getBoundingClientRect(),s=r.getBoundingClientRect(),l=o.top+o.height/2-(s.top+s.height/2);this.setState({overlappingIndex:i,overlappingOffsetChange:l})}else this.setState({overlappingIndex:null,overlappingOffsetChange:null})}},{key:"onDraggableItemDragEnd",value:function(e,t){var a=this,r=t.querySelector(".dragItem"),i=E.Draggable.get(r),o=this.getMatchesForDrag().find((function(e){return i.hitTest(e,"50%")}));if(o){var s=t.getAttribute("data-index"),l=o.getAttribute("data-index");s===l&&n.returnMatchToPosition(r),this.setState({overlappingOffsetChange:null},(function(){a.props.userState.swapCards(s,l)}))}else n.returnMatchToPosition(r);r.classList.remove("dragging"),t.classList.remove("contentDrag"),this.setState({overlappingIndex:null})}},{key:"getMatches",value:function(){return(0,o.default)(this._container.querySelectorAll(".match.".concat(_.COLUMNB)))}},{key:"getMatchesForDrag",value:function(){return(0,o.default)(this._container.querySelectorAll(".match.".concat(_.COLUMNB,":not(.").concat(_.CORRECT,")")))}},{key:"getDropTargets",value:function(){return(0,o.default)(this._container.querySelectorAll(".matches-container-player .columnA .match"))}},{key:"taskFocus",value:function(){this.props.onTaskFocus&&!this.props.model.data.checkable&&this.props.onTaskFocus()}}]),n}(f.Component))||i)||i;t.default=I},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"matching-rightItem-desktop-idle",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-213.000000, -49.000000)"},a.createElement("g",{id:"Group-10",fill:"#8195A3"},a.createElement("g",{id:"drag-handles",transform:"translate(213.493898, 49.000000)"},[a.createElement("g",{id:"Group-4",key:0},[a.createElement("circle",{id:"Oval-2",cx:"2",cy:"2",r:"2",key:0}),a.createElement("circle",{id:"Oval-2-Copy",cx:"8",cy:"2",r:"2",key:1})]),a.createElement("g",{id:"Group-4-Copy",transform:"translate(0.000000, 16.000000)",key:1},[a.createElement("circle",{id:"Oval-2",cx:"2",cy:"2",r:"2",key:0}),a.createElement("circle",{id:"Oval-2-Copy",cx:"8",cy:"2",r:"2",key:1})]),a.createElement("g",{id:"Group-4-Copy-2",transform:"translate(0.000000, 8.000000)",key:2},[a.createElement("circle",{id:"Oval-2",cx:"2",cy:"2",r:"2",key:0}),a.createElement("circle",{id:"Oval-2-Copy",cx:"8",cy:"2",r:"2",key:1})]),a.createElement("g",{id:"Group-4-Copy-3",transform:"translate(0.000000, 24.000000)",key:3},[a.createElement("circle",{id:"Oval-2",cx:"2",cy:"2",r:"2",key:0}),a.createElement("circle",{id:"Oval-2-Copy",cx:"8",cy:"2",r:"2",key:1})])]))))}r.defaultProps={width:"11px",height:"28px",viewBox:"0 0 11 28",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("image",{width:"24",height:"19",xlinkHref:"data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAATCAMAAAC9bj0JAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACBFBMVEV4yvF5yvF6yvF6y/F5yfF4yfF5y/F4y/F5yvJ6y/F6y/F5yfF4yfF4yvF4yvF5yvF5yvF4yvF6yvF6yfF4yfF6yvF4yvF4yfF4yvF5yvF6yfF4yfF4yfF5yvF4yvF5yvF5yvF6y/F6yfF5yvF5yvF4yvF5yvF5yvB4yvF5yfF6y/F5yvF4yfF5yfF6y/F4y/F4yfF6y/F6y/F4yfF5yfF5yvF5yvF6y/F5yvJ5yvF4yfF4yfF5yvF4yfF5yvF5yvF5yvF5yvF5yfF6y/F5yvF6yvF6yvF5yvF5yvF4yfF4yvF6yvF4yvF6y/F6yvF5yvF5yvB4yfF5y/F5yfF4y/F5y/F6y/F4yvF4yvF5yfF6y/F6yvF4yfF5yvF5yvF6yvF5yfF6yvF6yvF4yfF6y/F6yfF4yfF5yvF5yfF6y/F6yvF6y/F6yvF5yfF4y/F4yfF6yfF4yfF6yvF5yfF5yvF5yvF4yvF4y/F4yfF4yfF4yfF6yvF5yvF4yfF6yvF6y/F6yvF5yfF6y/F5yvF5yvF6yvF5yfF5yvJ5y/F5yvF5yvF5yvF6yfF6y/F4yfF5yfF5yfF5yvF4yfF5yfF6yvF5yvF6yvF5yvF5yvJ5yvF4yvF5yfF5yvF5yvF4yvF6yvF6yvJ4yfF4yvF5yvF5yvJ5yfF4y/F6y/F6yvF6yfF5y/H///+fI39wAAAAoHRSTlMAAAAAAAAAAABIdGUtA42CQs1cbel4dFcs7/QcEGrWrA5Uo5c6BV3T+JAUC9GkO0re7hpfzY4qKNaBHwVPw8AxEXjA1/XABjem2FwEOIOOkPl8CTLftRATM3fZgCdRBUR7ndSMC2i+RKyrMwE+gOykIQGsanrx7B0bkff4cw3HDJkzKdFeD3FWC9v9JTWd0BRSryw+xgEfEA65tBAPrZ9hjNfbNwAAAAFiS0dEq8kBZygAAAAHdElNRQfjBgoODyeU9VLmAAABmElEQVQY0x2Q+VvOURDFZ+7c+SZCUUp2hShCkWy9dinZl6LIElFk35VsRSRLJNK90+v96q80932e+8wP9zxz5pwPAGZOnZZlDBmDpA+sZR0I02eMOy8zCQ0iqQTM1oAlyJ7ImTU7V/Iw/Y8YIbOqBHMkH6FgbuE8ZlYRMyzOX7Bw0WJYIkstYVGyWL2DGyxbvsKXrFwFpWV/V68pX7tuPepRNFRRmfIbNiICVW2S2LuS6s1bLOLWbf9S22t00wBRYsfOXbtF9uy1+/Y7V3uAmTQEmBClrv5gQ1XikLjDR45CiBcEbcYIwMeOT8YnTmL6FBq1UpXx1OnG2DWdgbPNLZbDigFtfO586wUXxxcvmcsibVc4wygewMRVLzIRt18jut7ReUPcza7AAG7dlto7d+/df5AmZR8+eixPnj5Tq2z/vBupJ/lCiRDp6C3yyZevXsObybc26ut/9z6kMAoMooEPqY+D8MkPff7y1fd8w1BLy4MWGf7O8GNEXCw/Ry1aa4nRQqRBpzDQr+rfY38ULevTRhxBCMH/AV/+WTBes/L2AAAAAElFTkSuQmCC"}))}r.defaultProps={width:"24",height:"19"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(23)),u=a(n(9)),c=a(n(3)),d=a(n(12)),f=a(n(4)),p=a(n(6)),h=a(n(8)),m=a(n(7)),v=a(n(105)),g=r(n(0)),E=n(46),_=(a(n(2)),a(n(11))),y=a(n(152)),k=a(n(297)),S=a(n(123)),T=a(n(13)),b=n(52),C=a(n(122)),I=a(n(467)),O=n(132),A=a(n(37)),N=a(n(445)),w=n(468),R=n(198),P=n(798);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var L=A.default.isPhone,D=A.default.isMobile,x=0,F=1,U=2,G=3,B="left",j="right",H=["true","false"],V=(0,E.inject)("services")(i=(0,E.observer)((s=o=function(e){(0,p.default)(n,e);var t=M(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];var o=(e=t.call.apply(t,[this].concat(r))).props,s=o.mode,l=o.userState,u=o.model,f=o.services.ConfigurationService;return e.state={},e.percentageBgRefsByChildId={},e.percentageTextRefsByChildId={},e.shape=n.getShape(u,f.isInteractionsThemeV2),e.minOptions=2,e.maxOptions=f.reducedEditorCapabilitiesV2?12:16,e.themeV2=f.isInteractionsThemeV2,e.handleAddClick=e.handleAddClick.bind((0,d.default)(e)),s===b.PLAYER&&u.data.showRandomAnswers&&(e.state.shuffledIndexes=l&&l.shuffledIndexes||n.ShuffleAnswers(u.data.options.map((function(e,t){return t})))),e}return(0,f.default)(n,[{key:"_isChildrenRadioChecked",value:function(e,t,n,a,r){return!e&&!t||n?!!a&&(!(a[r]===w.ANSWER_TYPE.PREV_WRONG&&!this.themeV2)&&(""!==a[r]&&void 0!==a[r])):a&&a.indexOf(r)>-1}}],[{key:"ShuffleAnswers",value:function(e){for(var t,n,a=e,r=e.length;r;t=parseInt(Math.random()*r,10),n=a[--r],a[r]=a[t],a[t]=n);return e}},{key:"getShape",value:function(e,t){switch(e&&e.data&&e.data.answersType){case R.IMAGE:return F;case R.AUDIO:return t?U:F;default:return x}}}]),(0,f.default)(n,[{key:"componentDidMount",value:function(){this.themeV2?this.shape===F&&this._checkScrollToEnd(0):this.shape===x&&this.componentDidMountShapeRadio()}},{key:"componentWillUnmount",value:function(){this.scrollTimeout&&clearTimeout(this.scrollTimeout)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,a=t.mode,r=t.model;if(e.mode!==a&&e.mode===b.PLAYER){if((!this.state||void 0===this.state.shuffledIndexes)&&r.data.showRandomAnswers){var i=n.ShuffleAnswers(Object.keys(r.data.options));this.setState({shuffledIndexes:i})}}else e.mode!==a&&e.mode===b.EDITOR&&r.data.showRandomAnswers&&delete this.state}},{key:"componentDidUpdate",value:function(e){this.props.showResults&&this.props.results!==e.results&&this.updateResults()}},{key:"render",value:function(){var e,t=!1;if(this.themeV2)e=this._renderPlayMcV2(),t=D&&this.shape!==G;else switch(this.shape){case F:e=this.renderShapeSquare();break;case x:default:e=this.renderShapeRadio()}return g.default.createElement(g.default.Fragment,null,t&&this._renderMultipleAlert(),g.default.createElement("div",{className:"t2i-int-mc"},e))}},{key:"renderShapeRadioChildren",value:function(){var e=this.props,t=e.mode,n=e.showResults,a=e.results;return t===b.PLAYER&&n&&a?this.renderShowResultsRadio():this.renderChildrenRadio()}},{key:"renderShapeRadio",value:function(){var e=this,t=this.props,n=t.mode,a=t.model,r=t.language,i=n===b.EDITOR,o=a.data.options.length<this.maxOptions;return g.default.createElement("div",{className:"t2k-mc-component ".concat(i?"mc-edit":"mc-player"),ref:function(t){e._containerRef=t}},g.default.createElement("div",{className:"options-manager"},g.default.createElement("div",{className:"options-container"},g.default.createElement("div",{className:"inner",ref:function(t){e._sortContainerRef=t}},this.renderShapeRadioChildren())),i&&"TEXT_BOOLEAN"!==a.preset&&o&&g.default.createElement(S.default,{onClick:o?this.handleAddClick:void 0,disabled:!o},g.default.createElement("div",{className:"t2i-int-mc-shape-radio-add","data-automation-id":"mc-add-option"},g.default.createElement("span",null," + "),r.ADD_OPTION_MC_TEXT)),this.renderErrorMsg()))}},{key:"renderChildrenRadio",value:function(){var e=this,t=this.props,n=t.mode,a=t.ciResultsHidden,r=t.showAnswers,i=t.userState,o=t.model,s=t.isEnabled,c=t.language,d=t.services.ConfigurationService,f=t.renderInteractionChangedAlert,p=o.data.options.length,h=o.data.answersType,m=n===b.PLAYER,v=n===b.EDITOR,E=o.data.checkable,y=p>this.minOptions,k=i&&i.answers||{},S=v||r?o.data.correctAnswersIds:k,I=this._getChildren(),A=this._getOptionsIds(),N={},w=T.default.isLearner()&&this._isAnswersWereChangedInNewVersion(k,A);d.reducedEditorCapabilitiesV2&&"TEXT_BOOLEAN"===h&&(N.maxCharacters=30);var R=I.map((function(t,n){var i,o=A[n],f=m&&S&&!a?S[o]:"",p=e._focusOnIndex&&e._focusOnIndex===n,h=e._isChildrenRadioChecked(v,r,a,S,o),k=!1,T=e._isChecked(o);return m?s&&!T||(k=!0):v&&!E&&(k=!0,h=!1),g.default.createElement("div",{"data-automation-id":"mc-option",key:"".concat(o),className:(0,_.default)("mc-option",(i={},(0,u.default)(i,"mc-".concat(f),f),(0,u.default)(i,"editor-correct",v&&h),i))},v&&g.default.createElement("div",{className:"drag-handle",onMouseDown:function(){(0,C.default)(e._containerRef).addClass("ui-sortable-helper")},onMouseUp:function(){(0,C.default)(e._containerRef).removeClass("ui-sortable-helper")}},g.default.createElement("div",{className:"drag-picture"})),e.renderChildrenRadioInputWithChild({optionId:o,isChecked:h,isDisabled:k},g.default.createElement(e.props.interaction,(0,l.default)({id:o,placeholder:v?c.START_TYPING:void 0,toolbar:d.reducedEditorCapabilitiesV2?O.TOOLS_V2:m?O.MINFORMAT:O.MINFORMAT_PLUS_IMAGE,isRequired:!0,focusOnCreation:p},N))),v&&g.default.createElement("div",{"data-automation-id":"mc-delete-item",className:"delete".concat(y?" delete-enabled":""),onClick:function(){return e.handleChildrenDelete(o)}},g.default.createElement("a",{className:"btn-flat"},"×")))}));return g.default.createElement(g.default.Fragment,null,w&&f(),R)}},{key:"_getCurrentSelectionStatusV2",value:function(e){switch(e){case w.ANSWER_TYPE.SELECTED:return w.ANSWER_TYPE.SELECTED;case w.ANSWER_TYPE.CORRECT:return this.props.ciResultsHidden?w.ANSWER_TYPE.SELECTED:w.ANSWER_TYPE.CORRECT;case w.ANSWER_TYPE.WRONG:return this.props.ciResultsHidden?w.ANSWER_TYPE.SELECTED:w.ANSWER_TYPE.WRONG}return""}},{key:"_renderPlayMcV2",value:function(){var e=this,t=this.props,n=t.userState,a=t.showAnswers,r=t.isEnabled,i=t.renderInteractionChangedAlert,o=t.ciResultsHidden,s=n&&n.answers||n.data&&n.data.answers||{},c=a&&!o?n.getCorrectAnswersWithUserAnswers(!T.default.isLearner()):s,d=this._getChildren(),f=this._getOptionsIds(),p=T.default.isLearner()&&this._isAnswersWereChangedInNewVersion(s,f),h=(0,_.default)("t2k-mc-component mc-player",{square:this.shape===F});return g.default.createElement(g.default.Fragment,null,!D&&this._renderMultipleAlert(),g.default.createElement("div",{className:h,onScroll:this.shape===F?function(){e._checkScrollToEnd()}:null,ref:function(t){e.mcContainer=t}},D&&p&&i(),d.map((function(t,n){var a,i=f[n],o=c?e._getCurrentSelectionStatusV2(c[i]):"",s=e._isChecked(i)||!r,d=(0,_.default)("mc-option",(a={},(0,u.default)(a,"mc-".concat(o),o),(0,u.default)(a,"audio",e.shape===U),(0,u.default)(a,"completed",s),a));return g.default.createElement("div",{"data-automation-id":"mc-option",key:"option-".concat(i),className:d,onClick:s?null:function(){e.handleChildrenChange(i)},tabIndex:"0",role:"button",onKeyDown:function(t){return 13===t.keyCode&&!s&&e.handleChildrenChange(i)}},g.default.createElement(e.props.interaction,(0,l.default)({id:i,isMultiple:!0},e.shape===F?{hideTexts:!0}:{})))}))),!D&&p&&i())}},{key:"_isAnswersWereChangedInNewVersion",value:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((0,v.default)(a))return!1;for(var i=null!==(e=null===(t=this.props.model)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.correctAnswersIds)&&void 0!==e?e:[],o=Object.keys(a),s=function(e){return-1===r.indexOf(e)},l=function(e){return"correct"===a[e]&&-1===i.indexOf(e)},u=function(e){return"wrong"===a[e]&&-1!==i.indexOf(e)},c=0,d=o;c<d.length;c++){var f=d[c];if(s(f)||l(f)||u(f))return!0}return!1}},{key:"_renderMultipleAlert",value:function(){var e=this.props,t=e.model,n=e.language;return t.data&&t.data.correctAnswersIds&&t.data.correctAnswersIds.length>1?g.default.createElement("div",{className:"t2k-mc-alert-wrapper"},g.default.createElement("div",{className:"t2k-mc-alert"},n.CHOOSE_MULTIPLE_ALERT)):null}},{key:"_checkScrollToEnd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=this.mcContainer.offsetWidth,a=this.mcContainer.scrollWidth;if(!(a<=n)){var r=this.mcContainer.scrollLeft,i=1,o=r<i,s=r>a-n-i;this.scrolledLeftEnd===o&&this.scrolledRightEnd===s||(this.scrolledLeftEnd=o,this.scrolledRightEnd=s,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){e.props.preventSwipeOnScroll(e.mcContainer,s,o)}),t))}}},{key:"_onSwiped",value:function(e,t,n){var a=this._getOptionsIds();if(t){if(e===B&&n===H[1]||e===j&&n===H[0])return;this._resetAnswer(t)}else e===B?this.handleChildrenChange(a[1]):this.handleChildrenChange(a[0])}},{key:"_resetAnswer",value:function(e){var t=this;this.setState({animateReset:e},(function(){t.props.userState.resetAnswers(),setTimeout((function(){t.setState({animateReset:""})}),1e3)}))}},{key:"_isQuestionAnswered",value:function(){var e=this.props.userState;return e.answers&&Object.keys(e.answers).length>0}},{key:"renderChildrenRadioInputWithChild",value:function(e,t){var n=this,a=e.optionId,r=e.isChecked,i=e.isDisabled,o=this.props,s=o.mode,l=o.model,u=o.isEnabled,c=s===b.PLAYER,d=s===b.EDITOR,f=l.data.mode===P.CORRECT_ANSWERS_COUNT.SINGLE,p=g.default.createElement("div",{className:"mc-option-content",key:"content"},t),h=(0,_.default)("opt-button-container",{disabled:c&&(!u||this._isChecked(a))}),m=[g.default.createElement("div",{key:"inputs",className:h},!this._isChecked(a)&&(f?g.default.createElement(y.default,{checked:r,onChange:function(){return n.handleChildrenChange(a)},disabled:i},c&&p):g.default.createElement(k.default,{checked:r,onChange:function(){return n.handleChildrenChange(a)},disabled:i},c&&p)))];return(d||this._isChecked(a))&&m.push(p),m}},{key:"renderShapeSquare",value:function(){var e,t=this.props,a=t.mode,r=t.model,i=t.language,o=t.showResults,s=t.results,l=t.userState,u=t.renderInteractionChangedAlert,c=a===b.EDITOR,d=a===b.PLAYER,f=r.data.checkable,p=r.data.correctAnswersIds,h=this._getChildren().length,m=c&&0===p.length&&this.getFirstUploadedImageOptionId(),v=T.default.isLearner()&&this._isAnswersWereChangedInNewVersion(null!==(e=null==l?void 0:l.answers)&&void 0!==e?e:{},this._getOptionsIds());return g.default.createElement("div",{className:"t2i-int-mc-image"},m&&f&&g.default.createElement("div",{className:"no-correct-answer-error"},g.default.createElement("span",{className:"no-correct-answer-error-text"},i.NO_ANSWER_SELECTED)),v&&u(),g.default.createElement("div",{className:"t2i-int-mc-grid".concat(L||D&&this.themeV2?" t2i-int-mc-small-grid":"")},d&&o&&void 0!==s?this.renderShowResultsSquare():this.renderChildrenSquare(),c&&this.maxOptions>h&&g.default.createElement(N.default,{ratio:1},g.default.createElement("div",{onClick:this.handleAddClick,className:"t2i-int-mc-image-add","data-automation-id":"mc-add-option"},"+")),Array.from({length:n.maxColumnsInMcImages-2}).map((function(e,t){return g.default.createElement("div",{key:"t2i-int-mc-filler-".concat(t),className:"t2i-int-mc-filler"})}))),this.renderErrorMsg())}},{key:"renderChildrenSquare",value:function(){var e=this,t=this.props,n=t.mode,a=t.model,r=t.userState,i=t.showAnswers,o=t.isEnabled,s=n===b.EDITOR,l=n===b.PLAYER,u=a.data.checkable,c=r&&r.answers||{},d=a.data.correctAnswersIds,f=s||i?a.data.correctAnswersIds:c,p=this._getChildren(),h=p.length,m=this._getOptionsIds();return p.map((function(t,n){var a=m[n],r=e.getMcImageClass(s,d,f,a,u),i=!1;l?o&&!e._isChecked(a)||(i=!0):s&&!u&&(i=!0);var c="correct"===r||"wrong"===r;return g.default.createElement("div",{key:a,className:"mc-option".concat(i?" disabled":""),onClick:i?void 0:function(){return e.handleChildrenChange(a)}},g.default.createElement("div",{className:"mc-option-image-wrapper ".concat(r)},g.default.createElement(e.props.interaction,{id:a,cropToSquare:!0,hideTexts:!0,fillImage:!0,onDelete:e.minOptions>=h?void 0:function(){return e.handleChildrenDelete(a)}})),!s&&g.default.createElement("div",{className:"t2i-int-mc-image-result-container"},c&&g.default.createElement("span",{className:"t2i-int-mc-image-result ".concat(r)})))}))}},{key:"renderShowResultsRadio",value:function(){var e=this,t=this.props,n=t.model,a=t.results,r=n.data.options,i=D?"flex-label":"fix-label",o=n.data.correctAnswersIds||[],s=a?(0,I.default)(n.data.options,a):void 0;return g.default.createElement("div",{className:"t2k-poll-component poll-result chart-view-container"},g.default.createElement("div",{className:"chart-view-bar"},r.map((function(t){return g.default.createElement("div",{key:"".concat(t),className:"poll-option chart-single-bar"},e._getOptButtonTemplate(t),g.default.createElement("div",{className:"poll-option-result ".concat(o.indexOf(t)>-1?"correct-answer":"wrong-answer"," ").concat(i)},g.default.createElement("div",{ref:function(n){e.percentageBgRefsByChildId[t]=n},className:"bar-percentage","data-width":"".concat(s[t].percent,"%")}),g.default.createElement(e.props.interaction,{id:t,isRequired:!0})),g.default.createElement("span",{ref:function(n){e.percentageTextRefsByChildId[t]=n},className:"percentage_text ".concat(o.indexOf(t)>-1?"correct-answer":"wrong-answer"),"data-percent":s[t].percent}),g.default.createElement("span",{className:"votes_text ".concat(o.indexOf(t)>-1?"correct-answer":"wrong-answer")}," ","(".concat(s[t].numOfVotes,")")))}))))}},{key:"renderShowResultsSquare",value:function(){var e=this,t=this.props,n=t.model,a=t.isEnabled,r=t.results,i=n.data.checkable,o=n.data.correctAnswersIds,s=D?"flex-label":"fix-label",l=o||[],u=this._getChildren(),c=this._getOptionsIds(),d=r?(0,I.default)(n.data.options,r):void 0;return u.map((function(t,n){var r=c[n],u=e.getMcImageClass(!1,o,l,r,i),f=!a||e._isChecked(r);return g.default.createElement("div",{className:"t2k-poll-component poll-result chart-view-container",key:"poll-result-".concat(r)},g.default.createElement("div",{className:"chart-view-bar"},g.default.createElement("div",{key:r,className:"mc-option".concat(f?" disabled":""),onClick:f?void 0:function(){return e.handleChildrenChange(r)}},g.default.createElement("div",{className:"mc-option-image-wrapper ".concat(u)},g.default.createElement(e.props.interaction,{id:r,cropToSquare:!0,hideTexts:!0,fillImage:!0})),g.default.createElement("div",{key:"".concat(t),className:"poll-option chart-single-bar square-poll"},g.default.createElement("div",{className:"poll-option-result ".concat(l.indexOf(t)>-1?"correct-answer":"wrong-answer"," ").concat(s)},g.default.createElement("div",{ref:function(n){e.percentageBgRefsByChildId[t]=n},className:"bar-percentage","data-width":"".concat(d[t].percent,"%")}),g.default.createElement("div",{key:"".concat(t),className:"result-text-container"},g.default.createElement("span",{ref:function(n){e.percentageTextRefsByChildId[t]=n},className:"percentage_text","data-percent":d[t].percent}),g.default.createElement("span",{className:"votes_text"}," ","(".concat(d[t].numOfVotes,")")," ")))))))}))}},{key:"renderErrorMsg",value:function(){var e,t=this.props,n=t.mode,a=t.language,r=t.model.data,i=r.correctAnswersIds,o=r.checkable,s=n===b.EDITOR;if(Array.isArray(i)&&i.length>0||(e=a.CHOOSE_AT_LEAST_ONE),o&&s&&e)return g.default.createElement("div",{className:"msg error"},e)}},{key:"componentDidMountShapeRadio",value:function(){(0,C.default)(this._sortContainerRef).sortable({cursor:"move",handle:".drag-handle",containment:this._sortContainerRef.parentElement,start:this.handleSortStart.bind(this),stop:this.handleSortStop.bind(this)})}},{key:"handleAddClick",value:function(){this._focusOnIndex=this.props.model.data.options.length,this.props.model.addInteraction()}},{key:"handleChildrenChange",value:function(e){this.props.mode===b.EDITOR?this.props.model.setCorrectAnswer(e):this.props.userState.setUserAnswerById(e,this.state.shuffledIndexes)}},{key:"handleChildrenDelete",value:function(e){this.props.model.removeInteraction(e)}},{key:"handleSortStart",value:function(e,t){this._originalSortedItemIndex=t.item.index(),(0,C.default)(this._sortContainerRef).find(".focus.show-froala div[contentEditable]").trigger("blur")}},{key:"handleSortStop",value:function(e,t){var n=this._originalSortedItemIndex;delete this._originalSortedItemIndex;var a=t.item.index();(0,C.default)(this._sortContainerRef).sortable("cancel"),n!==a&&this.props.model.setInteractionIndex(n,a)}},{key:"changePercentValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date,r=setInterval((function(){var i=(new Date-a)/1500;i>1&&(i=1);var o=Math.ceil(n*i)+"%";t.percentageTextRefsByChildId[e]&&(t.percentageTextRefsByChildId[e].innerHTML=o),1===i&&clearInterval(r)}),0)}},{key:"isImageUploaded",value:function(e){var t=this.props.getModelById(e);return t&&t.data&&t.data.src}},{key:"getFirstUploadedImageOptionId",value:function(){for(var e=this._getChildren(),t=0;t<e.length;t+=1)if(this.isImageUploaded(e[t]))return e[t];return!1}},{key:"getMcImageClass",value:function(e,t,n,a,r){if(e)return r?-1!==t.indexOf(a)?"selected":"visible":"not-visible";switch(n&&n[a]){case"selected":return"selected";case"correct":return this.props.ciResultsHidden?"selected":"correct";case"wrong":return this.props.ciResultsHidden?"selected":"wrong"}return(this.props.showAnswers||this.props.showResults&&this.props.results?n&&n.indexOf(a)>-1:n&&void 0!==n[a])?"correct":"visible"}},{key:"_isChecked",value:function(e){var t=this.props,n=t.mode,a=t.showAnswers,r=t.ciResultsHidden,i=t.userState;if(n===b.PLAYER&&!a&&!r){var o=i&&i.answers?i.answers:{};if(o[e]){if(o[e]===w.ANSWER_TYPE.PREV_WRONG&&!this.themeV2)return!1;if(o[e]!==w.ANSWER_TYPE.SELECTED)return!0}}return!1}},{key:"_getChildren",value:function(){var e=this;return this.props.mode===b.PLAYER&&this.state&&this.state.shuffledIndexes?this.state.shuffledIndexes.map((function(t){return e.props.model.data.options[t]})):this.props.model.data.options}},{key:"_getOptionsIds",value:function(){var e=this;return this.props.mode===b.PLAYER&&this.state&&this.state.shuffledIndexes?this.state.shuffledIndexes.map((function(t){return e.props.model.data.options[t]})):this.props.model.data.options}},{key:"updateResults",value:function(){var e=this,t=this.props.model.data.options;setTimeout((function(){Array.from(t).forEach((function(t){e.percentageBgRefsByChildId[t]&&(e.percentageBgRefsByChildId[t].style.width=e.percentageBgRefsByChildId[t].getAttribute("data-width"),e.changePercentValue(t,e.percentageTextRefsByChildId[t].getAttribute("data-percent")))}))}),0)}},{key:"_getOptButtonTemplate",value:function(e){var t=this.props,n=t.userState,a=t.model.data.mode===P.CORRECT_ANSWERS_COUNT.SINGLE,r=(n&&n.answers||[]).indexOf(e)>-1;return g.default.createElement("div",{className:"opt-button-container"},a?g.default.createElement(y.default,{checked:r,disabled:!0}):g.default.createElement(k.default,{checked:r,disabled:!0}))}}]),n}(g.Component),o.maxColumnsInMcImages=4,i=s))||i)||i;t.default=V,V.defaultProps={preventSwipeOnScroll:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CORRECT_ANSWERS_COUNT=void 0;var a={SINGLE:"single",MULTIPLE:"multiple"};t.CORRECT_ANSWERS_COUNT=a;var r=a;t.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(3)),s=a(n(4)),l=a(n(12)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=r(n(0)),p=n(46),h=(a(n(2)),a(n(11))),m=n(132),v=a(n(37)),g=a(n(13)),E=a(n(152)),_=a(n(297)),y=a(n(123)),k=n(52),S=a(n(122)),T=a(n(467)),b=n(284);function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var A=v.default.isMobile,N=0,w=1,R=2,P=(0,p.inject)("services")(i=(0,p.observer)(i=function(e){(0,u.default)(n,e);var t=O(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handlePollChildrenChange=e.handleChildrenChange.bind((0,l.default)(e)),e.handlePollChildrenDelete=e.handleChildrenDelete.bind((0,l.default)(e)),e.handleAddOptionClick=e.handleAddClick.bind((0,l.default)(e)),e}return(0,s.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.percentageTextRefsByChildId={},this.percentageTextRefsByChildIdV2={},this.percentageBgRefsByChildId={}}},{key:"componentDidMount",value:function(){this.props.mode===k.EDITOR&&(0,S.default)(this.sortContainerRef).sortable({cursor:"move",handle:".drag-handle",containment:this.sortContainerRef.parentElement,start:this.handleSortStart.bind(this),stop:this.handleSortStop.bind(this)}),this.prevResults=this.props.results}},{key:"componentWillReact",value:function(){var e=this.props,t=e.readOnlyMode,n=e.results,a=e.showResults,r=e.ciResultsHidden,i=e.model,o=e.showClimateResult,s=t&&!r,l=i.data.showResultsAfterSubmit||o;!s&&a&&n!==this.prevResults&&(this.prevResults=n,!1!==l&&this.updateResults())}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.ciResultsHidden,r=n.showResults,i=n.mode,o=n.services.ConfigurationService,s=i===k.EDITOR,l="poll-edit",u=N;if(s||(u=r?R:w),o.isInteractionsThemeV2)return this._renderPollForLearnerV2(u);switch(u){case N:e=this._renderPollForEditor();break;case w:e=this._renderPollForPlayer(),l=a?"gamify poll-player":"poll-player";break;case R:e=this._renderPollResults(),l="poll-result";break;default:e=this._renderPollResults(),l="poll-result"}return f.default.createElement("div",{className:"t2k-poll-component ".concat(l," poll")},f.default.createElement("div",{className:"options-manager"},f.default.createElement("div",{className:"options-container"},f.default.createElement("div",{className:"inner",ref:function(e){t.sortContainerRef=e}},e)),this._renderAddOptionBtn()))}},{key:"renderInputWithChild",value:function(e,t){var n=this,a=e.optionId,r=e.block,i=void 0!==r&&r,o=this.props.mode,s=this.props.model.data.mode===b.PollInteractionMode.SINGLE,l=o===k.EDITOR,u=o===k.PLAYER,c=this.props,d=c.userState,p=c.readOnlyMode,h=c.ciResultsHidden,m=c.model,v=c.showClimateResult,g=c.hideUserStateOnClimatePoll,y=!h&&p,S=d&&d.answers?d.answers:[],T=m.data.showResultsAfterSubmit||v;!1===(!1!==T||!y)&&(S=[]);var C=!!u&&(u?S:[]).indexOf(a)>-1;!T&&g&&(C=!1);var I=l||!this.props.isEnabled;return f.default.createElement("div",{className:"opt-button-container".concat(void 0!==t?" opt-button-container-with-content":"").concat(i?" opt-button-container-block":"")},s?f.default.createElement(E.default,{block:i,checked:C,onChange:function(e){n.handlePollChildrenChange(a,e)},disabled:I},t):f.default.createElement(_.default,{block:i,checked:C,onChange:function(e){n.handlePollChildrenChange(a,e)},disabled:I},t))}},{key:"handleAddClick",value:function(){this._focusOnIndex=this.props.model.data.options.length,this.props.model.addOption()}},{key:"handleSortStart",value:function(e,t){this._originalSortedItemIndex=t.item.index(),(0,S.default)(this.sortContainerRef).find(".focus.show-froala div[contentEditable]").trigger("blur")}},{key:"handleSortStop",value:function(e,t){var n=this._originalSortedItemIndex;delete this._originalSortedItemIndex;var a=t.item.index();(0,S.default)(this.sortContainerRef).sortable("cancel"),n!==a&&this.props.model.setOptionIndex(n,a)}},{key:"handleChildrenChange",value:function(e,t){var n=t.target.checked;this.props.userState.setUserAnswerById(e,n)}},{key:"handleChildrenDelete",value:function(e){this.props.model.removeOption(e)}},{key:"_renderAddOptionBtn",value:function(){if(this.props.mode===k.EDITOR){var e=this.props.model.data.options.length<12;return f.default.createElement("div",{className:"buttons-wrapper"},f.default.createElement(y.default,{onClick:e&&this.handleAddOptionClick,disabled:!e},this.props.language.ADD_OPTION))}return null}},{key:"_renderPollForEditor",value:function(){var e=this,t=this.props.model.data.options.length>2;return this.props.model.data.options.map((function(a,r){var i=e._focusOnIndex&&e._focusOnIndex===r;return f.default.createElement("div",{key:"".concat(a),className:"poll-option"},f.default.createElement("div",{className:"drag-handle",ref:function(t){e["".concat(a,"_rf")]=t},onMouseDown:function(){(0,S.default)(e["".concat(a,"_rf")]).addClass("ui-sortable-helper")},onMouseUp:function(){(0,S.default)(e["".concat(a,"_rf")]).removeClass("ui-sortable-helper")}},f.default.createElement("div",{className:"drag-picture"})),e.renderInputWithChild({optionId:a}),f.default.createElement("label",{className:"poll-option-label",htmlFor:"optionId_".concat(a)},f.default.createElement("div",{className:"poll-option-content"},f.default.createElement(e.props.interaction,{keydownEventFn:function(e){n.verifyMaxCharCount(e)},multiLine:!1,id:a,toolbar:e.props.services.ConfigurationService.reducedEditorCapabilitiesV2?m.TOOLS_V2:m.MINFORMAT,focusOnCreation:i,placeholder:e.props.language.START_TYPING}))),f.default.createElement("div",{className:"delete".concat(t?" delete-enabled":""," "),onClick:function(){e.handlePollChildrenDelete(a)}},f.default.createElement("a",{className:"btn-flat"},"×")))}))}},{key:"_renderPollForPlayer",value:function(){var e=this;return this.props.model.data.options.map((function(t){return f.default.createElement("div",{key:t,className:"poll-option"},e.renderInputWithChild({optionId:t,block:A},f.default.createElement("div",{className:"poll-option-content poll-option-label ".concat(A?"flex-label":"fix-label")},f.default.createElement(e.props.interaction,{id:t,isRequired:!0}))))}))}},{key:"_renderPollResults",value:function(){var e=this.props,t=e.readOnlyMode,n=e.ciResultsHidden,a=e.model,r=e.showClimateResult,i=!n&&t;return!1!==a.data.showResultsAfterSubmit||r||(i=!0),f.default.createElement("div",{className:"t2k-poll-component chart-view-container"},f.default.createElement("div",{className:"chart-view-bar"},i?this._renderPollResultsChildrenReadOnly():this._renderPollResultsChildren()))}},{key:"_renderPollResultsChildrenReadOnly",value:function(){var e=this,t=this.props,n=t.model,a=t.userState,r=t.showClimateResult,i=n.data.showResultsAfterSubmit,o=n.data.options,s=A?"flex-label":"fix-label",l=[];return!1!==(i||r)&&(l=a&&a.answers?a.answers:[]),o.map((function(t){return f.default.createElement("div",{key:"".concat(t),className:"poll-option chart-single-bar"},e.renderInputWithChild({optionId:t}),f.default.createElement("div",{className:"poll-option-result ".concat(l.indexOf(t)>-1?"user-selection":""," ").concat(s)},f.default.createElement("div",{ref:function(n){e.percentageBgRefsByChildId[t]=n},className:"bar-percentage"}),f.default.createElement(e.props.interaction,{id:t,isRequired:!0})))}))}},{key:"_renderPollResultsChildren",value:function(){var e=this,t=this.props,n=t.model,a=t.userState,r=t.results,i=t.ciResultsHidden,o=t.renderInteractionChangedAlert,s=n.data.options,l=A?"flex-label":"fix-label",u=a&&a.answers?a.answers:[],c=r&&i&&this.getTopVotedFromResults(),d=r?(0,T.default)(n.data.options,r):void 0,p=this._isAnswersWereChangedInNewVersion(u),h=s.map((function(t){return f.default.createElement("div",{key:"".concat(t),className:"poll-option chart-single-bar"},e.renderInputWithChild({optionId:t}),f.default.createElement("div",{className:"poll-option-result ".concat(u.indexOf(t)>-1?"user-selection":""," ").concat(l)},f.default.createElement("div",{ref:function(n){e.percentageBgRefsByChildId[t]=n},className:"bar-percentage ".concat(c&&c.indexOf(t)>-1&&r?"top-voted":""),"data-width":"".concat(d?d[t].percent:void 0,"%")}),f.default.createElement(e.props.interaction,{id:t,isRequired:!0})),f.default.createElement("span",{ref:function(n){e.percentageTextRefsByChildId[t]=n},className:"percentage_text ".concat(u.indexOf(t)>-1?"user-selection":""),"data-percent":d?d[t].percent:void 0}),f.default.createElement("span",{className:"votes_text ".concat(u.indexOf(t)>-1?"user-selection":"")},"(".concat(d?d[t].numOfVotes:"",")")))}));return f.default.createElement(f.default.Fragment,null,p&&o(),h)}},{key:"updateResults",value:function(){var e=this,t=this.props,n=t.model,a=t.services.ConfigurationService,r=n.data.options;setTimeout((function(){Array.from(r).forEach((function(t){!a.isInteractionsThemeV2&&e.percentageBgRefsByChildId[t]&&(e.percentageBgRefsByChildId[t].style.width=e.percentageBgRefsByChildId[t].getAttribute("data-width")),e.changePercentValue(t)}))}),0)}},{key:"getTopVotedFromResults",value:function(){var e=this.props.results,t=[];return Object.keys(e.optionsPartition).forEach((function(n){0===t.length?t.push(n):e.optionsPartition[n]>e.optionsPartition[t[0]]?t=[n]:e.optionsPartition[n]===e.optionsPartition[t[0]]&&t.push(n)})),t}},{key:"changePercentValue",value:function(e){var t=this.props.services.ConfigurationService.isInteractionsThemeV2?this.percentageTextRefsByChildIdV2[e]:this.percentageTextRefsByChildId[e],n=t?t.getAttribute("data-percent"):0,a=new Date,r=setInterval((function(){var e=(new Date-a)/1500;e>1&&(e=1);var i=Math.ceil(n*e)+"%";t&&(t.innerHTML=i),1===e&&clearInterval(r)}),0)}},{key:"_isAnswersWereChangedInNewVersion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props.model;if(g.default.isLearner()&&e.length){var n,a=t.data.options,r=function(e){return-1===a.indexOf(e)},i=C(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(r(o))return!0}}catch(s){i.e(s)}finally{i.f()}}return!1}},{key:"_renderPollForLearnerV2",value:function(e){var t=this,n=this.props,a=n.model,r=n.userState,i=n.isEnabled,o=n.hideUserStateOnClimatePoll,s=n.showClimateResult,l=n.renderInteractionChangedAlert,u=a.data.options,c=r&&r.answers?r.answers:[],d=a.data.showResultsAfterSubmit||s,p=e===R&&d,m=this._isAnswersWereChangedInNewVersion(c);return f.default.createElement("div",{className:"poll-container"},f.default.createElement("div",{className:"poll-options-container"},A&&m&&l(),u.map((function(e){var n=c.indexOf(e)>-1&&!o,a=!i||p,r=(0,h.default)("poll-option-wrapper","poll-option",{"poll-selected":n,"show-result":p});return f.default.createElement("div",{onClick:a?null:function(){t._handleSelectV2(e,!n)},className:r,key:"poll-option-v2-".concat(e)},f.default.createElement(t.props.interaction,{id:e}),p&&t._renderResultV2(e,n))}))),!A&&m&&l())}},{key:"_renderResultV2",value:function(e){var t=this,n=this.props,a=n.model,r=n.results,i=r?(0,T.default)(a.data.options,r):void 0,o=i&&i[e].percent||0;return f.default.createElement("div",{key:"result-".concat(e),className:"poll-result"},f.default.createElement("div",{className:"poll-result-percentage",ref:function(n){t.percentageTextRefsByChildIdV2[e]=n},"data-percent":o},"".concat(o,"%")))}},{key:"_handleSelectV2",value:function(e,t){this.props.userState.setUserAnswerById(e,t)}}],[{key:"verifyMaxCharCount",value:function(e){e.target.getElementsByClassName("fr-view")[0].textContent.length>=80&&(event.preventDefault(),event.stopPropagation())}}]),n}(f.Component))||i)||i;t.default=P},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(3)),u=a(n(12)),c=a(n(4)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=r(n(0)),m=n(46),v=(a(n(2)),a(n(24))),g=a(n(11)),E=a(n(13)),_=a(n(18)),y=a(n(21)),k=n(52),S=n(198),T=n(393);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var C=(0,m.inject)("services")(i=(0,m.observer)((s=o=function(e){(0,d.default)(n,e);var t=b(n);function n(e){var a;(0,l.default)(this,n),(a=t.call(this,e)).state={isLongQuestion:!1},a.isEditor=e.mode===k.EDITOR,a.instanceRefs={},a.instanceWrapperRefs={};var r=e.services.ConfigurationService;return a.isInteractionsThemeV2=r.isInteractionsThemeV2,a.isEmbedded=e.taskPresentationDisplayType===y.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY,a._renderToggleQuestion=a._renderToggleQuestion.bind((0,u.default)(a)),a._expandQuestion=a._expandQuestion.bind((0,u.default)(a)),a._collapseQuestion=a._collapseQuestion.bind((0,u.default)(a)),a._toggleQuestion=a._toggleQuestion.bind((0,u.default)(a)),a}return(0,c.default)(n,null,[{key:"closestFn",value:function(e,t){var n=e;if("string"==typeof t)for(var a=e.webkitMatchesSelector?"webkitMatchesSelector":e.msMatchesSelector?"msMatchesSelector":"matches";n.parentElement;){if(e[a](t))return n;n=n.parentElement}else for(;n.parentElement;){if(n===t)return n;n=n.parentElement}return null}},{key:"getWrapperClass",value:function(e){var t=e.type;return e.type===S.TEXT?void 0!==e.data&&void 0!==e.data.html&&e.data.html.trim().length>0&&(t+=" has-content"):t+=" has-content",t}}]),(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.isInteractionsThemeV2&&(this.isEmbedded||!E.default.isMobile()&&!E.default.isTablet()||this._setOrCancelCollapseMobileV2()),this.isEditor&&(this._eventClick=function(t){null===n.closestFn(t.target,"div.question-item-wrapper")&&e.manageFocus(void 0)},document.addEventListener("click",this._eventClick,!0))}},{key:"componentDidUpdate",value:function(e,t){if(this.isInteractionsThemeV2&&(this.isEmbedded||!E.default.isMobile()&&!E.default.isTablet()||this.state.collapsed!==t.collapsed||this.state.expanded!==t.expanded||this._setOrCancelCollapseMobileV2()),e.model.data.children.length===this.props.model.data.children.length){var n=this.props.model.data.children.find((function(t,n){return t.type!==e.model.data.children[n].type}));if(void 0!==n){var a=this.props.model.data.children.indexOf(n),r=this.instanceWrapperRefs[a];return this._childElements[a].destroy(),v.default.render(this.props.model.data.children[a],r,this),r.parentElement.className=r.parentElement.className.addClass("has-content").replace(S.TEXT,n.type),!1}}return!0}},{key:"componentWillUnmount",value:function(){this._eventClick&&document.removeEventListener("click",this._eventClick,!0)}},{key:"render",value:function(){var e=this,t=this.props.model.data.children.length,a=this._focusIndex,r=this.props.hideMediaOptions,i=this.props.language,o=(0,g.default)("t2k-question-component",{"question-edit":this.isEditor,"question-play":!this.isEditor,"no-media-options":r,collapsed:this.state.collapsed,expanded:this.state.expanded});return h.default.createElement("div",{className:o,ref:function(t){e.questionComponent=t}},h.default.createElement("div",{className:"question-part",ref:function(t){e.questionPartComponent=t}},this.props.model.data.children.map((function(t,a){var r=e.props.model.data.children[a],o=e._focusIndex===a,s=e.props.getModelById(r)||{},l=s.type!==S.TEXT;return h.default.createElement("div",{key:t,className:"question-item-wrapper content-container ".concat(n.getWrapperClass(s)),onClick:function(){return e.manageFocus(a)}},h.default.createElement("div",{className:"child-wrapper ".concat("TEXT"===s.type?"type-text":""," ").concat("VIDEO"===s.type?"video-holder":""),ref:function(t){e.instanceWrapperRefs[a]=t}},e.isEditor&&!l&&0!==a&&h.default.createElement("div",{className:"rich-media-delete-button t2kInt-icon-delete_close",onClick:function(){return e.props.model.removeInteraction(a)}}),h.default.createElement(e.props.interaction,{id:t,ref:function(t){e.instanceRefs[a]=t},focusOnCreation:o,keydownEventFn:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleKeyDown.apply(e,[a].concat(n))},onDelete:l&&function(){return e.props.model.removeInteraction(a)},placeholder:i.START_TYPING,maxLinesCount:e.state.collapsed&&!e.state.expanded?3:e.props.maxLinesCount})))})),this.isEditor&&!r&&h.default.createElement("div",{className:"question-item-wrapper ".concat(a===t?"focus":""),onClick:function(){return e.manageFocus(t)}},h.default.createElement("div",{className:"media-options"},Object.keys(T.RichMediaType).map((function(t){var n="t2kInt-icon-"+T.RichMediaType[t];return h.default.createElement("span",{key:t,"data-unittest-id":"richmedia-add-".concat(t),className:n,title:i[t],onClick:function(){return e.props.model.addInteractionByType(t)}})}))))),(this.state.collapsed||this.state.expanded)&&this._renderToggleQuestion())}},{key:"handleKeyDown",value:function(e,t,n,a){if(a){var r=this.instanceWrapperRefs[e].parentNode;8===a.which&&(0===n.html.get().replace(/(<([^>]+)>)/gi,"").length?r.classList.remove("has-content"):r.classList.add("has-content"))}}},{key:"componentLostFocus",value:function(){var e=this;this.props.model.data.children.map((function(t,n){var a=e.instanceRefs[n];a&&a.getWrappedInstance()&&a.getWrappedInstance().componentLostFocus&&a.getWrappedInstance().componentLostFocus()}))}},{key:"manageFocus",value:function(e){e!==this._focusIndex&&(this._focusIndex=e)}},{key:"_renderToggleQuestion",value:function(){return h.default.createElement("div",{className:"question-toggle__button-wrapper"},h.default.createElement("span",{className:"question-toggle__button",onClick:this.state.collapsed?this._expandQuestion:this._collapseQuestion},h.default.createElement("span",{className:"question-toggle__arrow-icon--drop-down"}),h.default.createElement("span",{className:"question-toggle__text"},this.state.collapsed?_.default.translate("interactions.question.show-more"):_.default.translate("interactions.question.show-optional-answers"))))}},{key:"_expandQuestion",value:function(){this._toggleQuestion(!1,!0)}},{key:"_collapseQuestion",value:function(){var e=this;this.collapseTimeout&&clearTimeout(this.collapseTimeout),this.setState({collapsed:!0},(function(){e.collapseTimeout=setTimeout((function(){e._toggleQuestion(!0,!1)}),200)}))}},{key:"_toggleQuestion",value:function(e,t){var n=this;this.props.expandQuestion(t),this.setState({collapsed:e,expanded:t},(function(){n.questionPartComponent.scrollTo(0,0)}))}},{key:"_setOrCancelCollapseMobileV2",value:function(){if(this.questionComponent.offsetHeight){var e=this.questionComponent.offsetHeight-70<this.questionPartComponent.offsetHeight,t=this.questionComponent.offsetHeight-75===this.questionPartComponent.offsetHeight&&(this.state.collapsed||this.state.expanded);e?this.setState({collapsed:!0}):t&&(this.state.expanded&&this.props.expandQuestion(!1),this.setState({collapsed:!1,expanded:!1}))}}}]),n}(h.Component),o.defaultProps={expandQuestion:function(){},maxLinesCount:null,taskPresentationDisplayType:""},i=s))||i)||i;t.default=C},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(23)),u=a(n(3)),c=a(n(4)),d=a(n(12)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=r(n(0)),v=a(n(13)),g=n(46),E=(a(n(2)),r(n(197))),_=n(333),y=a(n(131)),k=n(52),S=a(n(126)),T=a(n(101));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var C=(0,g.inject)("services")(i=(0,g.observer)((s=o=function(e){(0,f.default)(n,e);var t=b(n);function n(e){var a;return(0,u.default)(this,n),(a=t.call(this,e)).handleBlur=a.handleBlur.bind((0,d.default)(a)),a.handleFocus=a.handleFocus.bind((0,d.default)(a)),a.state={showMsg:!1},a}return(0,c.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isMedia,n=e.services.ConfigurationService;if(t&&n.isInteractionsThemeV2){this.mediaContentElement&&this.textElement&&this.textElement.clientHeight<this.textElement.scrollHeight-5&&this.mediaContentElement.classList.add("masked")}this.mediaContentElement&&t&&this.mediaContentElement.querySelectorAll("a").forEach((function(e){e.target=v.default.isCordova()?"_system":"_blank"}))}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.model,i=a.mode,o=a.isMedia,s=null===(e=r.data)||void 0===e?void 0:e.html,l=n.ParseSrcAssetPath(s);if(i===k.EDITOR)return m.default.createElement("div",{className:"text-component"},this.renderTextEditor(l),this.renderWarningMessage());if(i===k.PLAYER){var u=this.renderPlayerTextElement(l);return o?m.default.createElement("div",null,m.default.createElement("div",{className:"media-content",ref:function(e){t.mediaContentElement=e}}," ",u," ")):u}}},{key:"renderPlayerTextElement",value:function(e){var t=this,a=this.props,r=a.maxLinesCount,i=a.pageSizeFactor,o=e;i&&(o=n.refactorFontSize(o,i));var s=m.default.createElement("div",(0,l.default)({className:"text-component fr-view",ref:function(e){t.textElement=e}},(0,T.default)(o,!1)));if(r){var u=e.replace(/<[^>]+>/g,"");return m.default.createElement(S.default,{clamp:"".concat(r),title:u},s)}return s}},{key:"renderWarningMessage",value:function(){var e=this.props,t=e.isRequired,n=e.validationString,a=e.language,r="";return this.state.showMsg?(t&&(r=n||a.EMPTY_ANSWER),m.default.createElement("span",{className:"msg warning"}," ",r," ")):null}},{key:"renderTextEditor",value:function(e){return this.props.multiLine?this.renderTextArea(e):this.renderTextInput(e)}},{key:"renderTextArea",value:function(e){return m.default.createElement(y.default,{name:"html",defaultHtml:e,placeholder:this.props.placeholder||this.props.language.START_TYPING,onBlur:this.handleBlur,onFocus:this.handleFocus,maxLength:this.props.maxLength,showCounter:this.props.showCounter,centered:this.props.centered})}},{key:"renderTextInput",value:function(e){var t=this.props,n=t.isMedia,a=t.toolbar,r=t.hideRichMedia,i=t.placeholder,o=t.language,s=t.keydownEventFn,l=t.onHasContentChanged,u=t.focusOnCreation,c=t.maxCharacters,d=t.services.ConfigurationService,f=n&&d.reducedEditorCapabilitiesV2?_.TOOLS_V2_EXTENDED:a;return m.default.createElement(E.default,{name:"html",type:r?E.NO_RICH_MEDIA:E.WITH_RICH_MEDIA,defaultHtml:e,placeholder:i||o.START_TYPING,onBlur:this.handleBlur,onFocus:this.handleFocus,keydownEventFn:s,onHasContentChanged:l,focusOnCreation:u,toolbar:f,maxCharacters:c})}},{key:"handleBlur",value:function(e){var t=e.html;this.checkIfEmpty(t),this.setModel(t),this.props.onBlur&&this.props.onBlur(e)}},{key:"handleFocus",value:function(){this.state.showMsg&&this.setState({showMsg:!1})}},{key:"checkIfEmpty",value:function(e){""===e?this.setState({showMsg:!0}):this.setState({showMsg:!1})}},{key:"setModel",value:function(e){this.props.model.setHTML(e)}}],[{key:"ParseSrcAssetPath",value:function(e){if(e&&e.indexOf("src=")>0){var t=e.match(/src\=([^\s]*)\s/);if(null===t)return e;var n=(t=t[1]).substring(1,t.length-1);return e=e.replace(n,v.default.getAssetPath(n))}return e}},{key:"refactorFontSize",value:function(e,t){var a=document.createElement("div");return a.innerHTML=e,n.iterateNodes(a,(function(e){var n;if(-1!==["DIV","SPAN","P","LI"].indexOf(e.nodeName)){var a=(null===(n=e.style)||void 0===n?void 0:n.fontSize)||_.DEFAULT_FONT_SIZE;a=parseInt(a,10),e.style.fontSize="".concat(a*t,"px")}})),a.innerHTML}},{key:"iterateNodes",value:function(e,t){for(e=e.firstChild;e;){if("#text"!==e.nodeName){var a,r=null===(a=e.style)||void 0===a?void 0:a.fontSize;t(e),r||n.iterateNodes(e,t)}e=e.nextSibling}}}]),n}(m.Component),o.defaultProps={isRequired:!1,maxLinesCount:null},i=s))||i)||i;t.default=C},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.errorTypes=t.sourceTypes=t.displayTypes=void 0;var i,o=a(n(9)),s=a(n(3)),l=a(n(12)),u=a(n(4)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=r(n(0)),h=n(46),m=(a(n(2)),n(52)),v=n(76),g=a(n(197)),E=a(n(123)),_=a(n(228)),y=a(n(13)),k=a(n(21)),S=a(n(332)),T=a(n(809)),b=a(n(811)),C=a(n(227)),I=a(n(291)),O=a(n(229)),A=n(114),N=a(n(519)),w=n(392);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var L={INITIAL:1,SHOW_VIDEO:2,ERROR:4,EDIT:8};t.displayTypes=L;var D={URL:1,FILE:2};t.sourceTypes=D;var x={SIZE:1,FILE_TYPE:2,MISC:4};t.errorTypes=x;var F=(0,h.inject)("services")(i=(0,h.observer)(i=function(e){(0,c.default)(n,e);var t=M(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).handleFileUpload=a.handleFileUpload.bind((0,l.default)(a)),a.handleLinkKeyUp=a.handleLinkKeyUp.bind((0,l.default)(a)),a.handleLinkBlur=a.handleLinkBlur.bind((0,l.default)(a)),a.handleLinkCanceled=a.handleLinkCanceled.bind((0,l.default)(a)),a.handleLinkApproved=a.handleLinkApproved.bind((0,l.default)(a)),a.handleErrorResetClicked=a.handleErrorResetClicked.bind((0,l.default)(a)),a.handleUploadAborted=a.handleUploadAborted.bind((0,l.default)(a)),a.handleUploadApproved=a.handleUploadApproved.bind((0,l.default)(a)),a.handleChangeFileClicked=a.handleChangeFileClicked.bind((0,l.default)(a)),a.handleUploadFileStarted=a.handleUploadFileStarted.bind((0,l.default)(a)),a.onVideoReady=a.onVideoReady.bind((0,l.default)(a)),a.handleLinkCheck=y.default.debounce(a.handleLinkCheck.bind((0,l.default)(a)),500),a.state={display:e.model.data.src?L.SHOW_VIDEO:L.INITIAL,sourceType:e.model.data.format===w.formatTypes.HTML5?D.FILE:D.URL,hasLinkContent:e.model.data.format===w.formatTypes.YOUTUBE||e.model.data.format===w.formatTypes.VIMEO,disableOkButton:!1,error:void 0,startTime:e.model.data.startTime},a}return(0,u.default)(n,null,[{key:"isLinkContentValid",value:function(e){return e.length>0&&/\S/.test(e)}},{key:"addUrlParams",value:function(e){for(var t=-1===e.indexOf("?")?"?":"&",n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return"".concat(e).concat(t).concat(a.join("&"))}}]),(0,u.default)(n,[{key:"componentWillUnmount",value:function(){this._keepAliveId&&this._mediaKeepAlive.removeElement(this._keepAliveId)}},{key:"renderVideoPlayerV2",value:function(){var e=this.props,t=e.model,n=e.mode,a=e.taskPresentationDisplayType,r=this.state.display,i=t.data,o=t.cId,s=a===k.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY,l=n===m.PLAYER&&r===L.INITIAL&&!i.src;return p.default.createElement("div",{id:o,className:"t2k-video-component video-play'} ".concat(this.props.isSingleMedia?"single-media":"")},this._renderVideoPlayer(i,t,s,!1),l&&p.default.createElement("div",{className:"video-with-no-content"}))}},{key:"_renderVideoPlayer",value:function(e,t,n,a){var r=this,i=this.props,o=i.allowDownloadMedia,s=i.services.ConfigurationService,l=this.props.videoIframeOrigin?T.default:S.default,u=[w.formatTypes.YOUTUBE,w.formatTypes.VIMEO].includes(e.format)&&y.default.isCordovaOffline();return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{className:"media-content"},p.default.createElement("div",{className:"upper-panel"},p.default.createElement("div",{className:"video-element-wrapper"},!u&&p.default.createElement(l,{ref:function(e){r._videoPlayer=e},src:Object.assign({},e.format===w.formatTypes.HTML5?{src:"".concat(y.default.getAssetPath(e.src)).concat(this.props.availableOffline&&!y.default.isOnline()?"?fromCache=true":""),type:"video/mp4"}:{},e.format===w.formatTypes.YOUTUBE?{src:e.src,type:"video/youtube"}:{},e.format===w.formatTypes.VIMEO?{src:e.src,type:"video/vimeo"}:{}),allowDownloadMedia:o,ratio:S.default.RATIO.WIDE,onReady:this.onVideoReady,iframeOrigin:this.props.videoIframeOrigin,dictionary:{videojs:this.props.videojsLang},isVioletTheme:!0,rests:{checkFileExists:"".concat(this.props.serviceUrl,"/PlayAppService/general/assets/exists")},startTimeInSeconds:e.startTime}),u&&p.default.createElement("div",{className:"video-unavailable"},p.default.createElement("div",{className:"svg-wrapper"},p.default.createElement(N.default,null)))),this.renderButtons())),!a&&!n&&O.default.getPlayerMediaCaptions(t,s.isInteractionsThemeV2))}},{key:"renderVideoInteraction",value:function(){var e=this,t=this.props,n=t.model,a=t.mode,r=t.language,i=t.allowDownloadMedia,o=t.services.ConfigurationService,s=t.taskPresentationDisplayType,l=this.state,u=l.error,c=l.display,d=l.sourceType,f=n.data,h=n.cId,v=a===m.EDITOR,C=!u&&d===D.FILE&&(c===L.INITIAL||c===L.EDIT&&f.format!==w.formatTypes.HTML5),I=!u&&(c===L.INITIAL||c===L.EDIT||c===L.UPLOADING)&&d===D.URL,A=v&&c!==L.SHOW_VIDEO,N=!u&&c===L.SHOW_VIDEO,R=!u&&c===L.EDIT&&d===D.FILE,P=o.reducedEditorCapabilitiesV2,M=!P,F=void 0!==u,U=this.state.hasLinkContent,G=this.state.disableOkButton,B=a===m.PLAYER&&c===L.INITIAL&&!f.src,j=this.props.videoIframeOrigin?T.default:S.default;return p.default.createElement("div",{id:h,className:"t2k-video-component ".concat(v?"video-edit":"video-play"," ").concat(this.props.isSingleMedia?"single-media":"")},p.default.createElement("div",null,A&&p.default.createElement("div",{className:"upper-panel-wrapper"},p.default.createElement("div",{className:"upper-panel file-selector-wrapper"},void 0===f.src&&p.default.createElement("div",{className:"input-types"},p.default.createElement("ul",null,p.default.createElement("li",{className:d===D.URL?"selected":"",onClick:function(){return e.handleSourceTypeClicked(D.URL)}},r.URL),p.default.createElement("li",{className:d===D.FILE?"selected":"",onClick:function(){return e.handleSourceTypeClicked(D.FILE)}},r.FILE))),C&&p.default.createElement("div",{className:"t2k-video-component-content"},p.default.createElement(_.default,{onFileUploaded:this.handleFileUpload,validTypes:["video/mp4","mp4","mov","video/quicktime"],icon:p.default.createElement("span",{className:"t2k-video-component-icon"},p.default.createElement(b.default,null)),limitationConfiguration:this.props.services.ConfigurationService.sizeLimitation,uploadFileStarted:this.handleUploadFileStarted})),I&&p.default.createElement("div",{className:"t2k-video-component-content"},p.default.createElement("div",{className:"upper-panel link-wrapper"},p.default.createElement("div",{className:"input-field link-field"},p.default.createElement(g.default,{ref:function(t){e._inputLinkRef=null==t?void 0:t.wrappedInstance},name:"videoLink",className:"edit videoLink",defaultValue:f.format!==w.formatTypes.HTML5?f.name?f.name:this._tempLink:this._tempLink?this._tempLink:"",placeholder:M?r.PLACEHOLDER_LINK_ENTER:r.PLACEHOLDER_LINK,onChange:function(){M?e.handleLinkChanged():e.handleLinkCheck()},onKeyUp:M?this.handleLinkKeyUp:function(){},onBlur:this.handleLinkBlur})),M&&p.default.createElement("div",{className:"link-buttons"},p.default.createElement(E.default,{disabled:!U,onClick:this.handleLinkCanceled},r.CANCEL),p.default.createElement(E.default,{disabled:!U||G,onClick:this.handleLinkApproved},r.OK)))),F&&p.default.createElement("div",{className:"error-wrapper"},p.default.createElement("span",{className:u===x.MISC?"t2kInt-icon-oops":"t2kInt-icon-error"}),p.default.createElement("span",{className:"error-message"},u===x.MISC?r.VIDEO_ERROR_MISC:u===x.SIZE?r.VIDEO_ERROR_SIZE:r.VIDEO_ERROR_FILE_TYPE,p.default.createElement("span",{className:"error-action",onClick:this.handleErrorResetClicked},u===x.MISC?r.VIDEO_ERROR_MISC_ACTION:u===x.SIZE?r.VIDEO_ERROR_SIZE_ACTION:r.VIDEO_ERROR_FILE_TYPE_ACTION))),R&&p.default.createElement("div",{className:"edit-wrapper"},p.default.createElement("div",{className:"file-name"},p.default.createElement("div",null,f.name)),M&&p.default.createElement("div",{className:"uploading-buttons"},p.default.createElement(E.default,{onClick:this.handleUploadApproved},r.CANCEL),p.default.createElement(E.default,{onClick:this.handleChangeFileClicked},r.RESET_BTN)))),this.renderButtons()),N&&p.default.createElement("div",{className:"videoWrapper"},p.default.createElement("div",{className:"upper-panel-wrapper"},p.default.createElement("div",{className:"upper-panel"},p.default.createElement("div",{className:"video-element-wrapper"},p.default.createElement(j,{ref:function(t){e._videoPlayer=t},src:Object.assign({},f.format===w.formatTypes.HTML5?{src:"".concat(y.default.getAssetPath(f.src)).concat(this.props.availableOffline&&!y.default.isOnline()?"?fromCache=true":""),type:"video/mp4"}:{},f.format===w.formatTypes.YOUTUBE?{src:f.src,type:"video/youtube"}:{},f.format===w.formatTypes.VIMEO?{src:f.src,type:"video/vimeo"}:{}),allowDownloadMedia:i,ratio:S.default.RATIO.WIDE,onReady:this.onVideoReady,iframeOrigin:this.props.videoIframeOrigin,dictionary:{videojs:this.props.videojsLang},isVioletTheme:s===k.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY,rests:{checkFileExists:"".concat(this.props.serviceUrl,"/PlayAppService/general/assets/exists")},startTimeInSeconds:f.startTime})),this.renderButtons())),!v&&O.default.getPlayerMediaCaptions(n,o.isInteractionsThemeV2)),v&&(d===D.FILE||P)&&O.default.getEditorMediaCaptions(n,r,P),B&&p.default.createElement("div",{className:"video-with-no-content"})))}},{key:"render",value:function(){var e=this.props,t=e.services.ConfigurationService,n=e.mode;return t.isInteractionsThemeV2&&n!==m.EDITOR?this.renderVideoPlayerV2():this.renderVideoInteraction()}},{key:"renderButtons",value:function(){var e=this.props,t=e.mode,n=e.onDelete,a=void 0!==e.model.data.src;return t===m.EDITOR?p.default.createElement("div",{className:"t2i-int-video-btn-container"},a&&p.default.createElement("span",{onClick:this.handleChangeFileClicked},p.default.createElement(I.default,null)),n&&p.default.createElement("span",{onClick:n},p.default.createElement(C.default,null))):null}},{key:"onVideoReady",value:function(){var e=this;this.props.mode===m.PLAYER&&this._videoPlayer&&this.props.getEventsContextPromise().then((function(t){if(t&&t.data&&t.providerId){var n=P(P({},t.data),{},{providerId:t.providerId,version:t.data.contentItemVersion,dispatcherId:t.data.contentItemId,playerType:"TG_PLAYER"}),a="".concat(e.props.serviceUrl).concat(A.PATH).concat(A.EVENTS_PATH);e._videoPlayer.setActivityEvents(n,a)}}))}},{key:"handleFileUpload",value:function(e,t){this.props.model.setVideo(e,t);var n=this.props.services.LoaderService;n.displayLoader&&n.hideLoader(),this.setState({display:L.SHOW_VIDEO})}},{key:"handleLinkKeyUp",value:function(e){13===e.which&&this.handleLinkApproved(),this.handleLinkChanged(e.target.value)}},{key:"handleLinkChanged",value:function(){var e=this._inputLinkRef.getInputValue();n.isLinkContentValid(e)?this.setState({hasLinkContent:!0,disableOkButton:!1}):this.setState({disableOkButton:!0,hasLinkContent:Boolean(e)})}},{key:"handleLinkCheck",value:function(){var e=this._inputLinkRef.getInputValue();if(n.isLinkContentValid(e))try{this.props.model.generateEmbeddedLink(e),delete this._tempLink,this.setState({display:L.SHOW_VIDEO})}catch(t){this._tempLink=e}}},{key:"handleLinkBlur",value:function(e){this._tempLink=e.target.value}},{key:"handleNewSrc",value:function(e){try{this.props.model.generateEmbeddedLink(e);var t=y.default.getURLParam("t",e);t&&(t=parseInt(t,10)),this.setState({display:L.SHOW_VIDEO,startTime:t})}catch(n){this.setState({error:x.MISC})}}},{key:"handleSourceTypeClicked",value:function(e){this.state.error?(this.props.model.resetData(),this.setState({sourceType:e,display:L.INITIAL,startTime:void 0,error:void 0})):this.setState({sourceType:e})}},{key:"handleLinkCanceled",value:function(){delete this._tempLink,this.setState({hasLinkContent:!1}),this._inputLinkRef.resetInputValue();var e=this.props.model.data.format;e!==w.formatTypes.VIMEO&&e!==w.formatTypes.YOUTUBE||this.props.model.resetData()}},{key:"handleLinkApproved",value:function(){delete this._tempLink,this.setState({hasLinkContent:!1}),this.state.display===L.UPLOADING&&this._abortObject&&this._abortObject.abortFn&&this._abortObject.abortFn();var e=this._inputLinkRef.getInputValue();e.length>0&&this.handleNewSrc(e)}},{key:"handleUploadAborted",value:function(){this._abortObject&&this._abortObject.abortFn&&(this._abortObject.abortFn(),this.props.model.resetData(),this.setState({display:L.INITIAL}))}},{key:"handleUploadApproved",value:function(){this.setState({display:L.SHOW_VIDEO})}},{key:"handleErrorResetClicked",value:function(){this.props.model.resetData(),this.setState({display:L.INITIAL,error:void 0,hasLinkContent:!1})}},{key:"handleChangeFileClicked",value:function(){this.props.model.resetData(),this.setState({display:L.INITIAL,startTime:void 0})}},{key:"componentLostFocus",value:function(){this._videoPlayer&&this._htmlPlayerRef.pause()}},{key:"handleUploadFileStarted",value:function(){var e=this.props.services.LoaderService;e.displayLoader||e.showLoader()}}]),n}(p.Component))||i)||i;var U=(0,v.InteractionHoc)((function(e){return{allowDownloadMedia:e.environment.api.allowDownloadMedia,getEventsContextPromise:e.getEventsContextPromise,serviceUrl:e.environment.serviceUrl,videojsLang:e.language.videojs}}),{withRef:!0})(F);t.default=U},function(e,t){},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(810)).default;t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=r(n(9)),d=a(n(0)),f=(r(n(2)),r(n(13))),p=r(n(129)),h=r(n(18)),m=n(62);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var E=["WIDE","SQUARE","NONE"].reduce((function(e,t){return Object.assign(e,(0,c.default)({},t,t))}),{}),_=function(e){(0,s.default)(n,e);var t=g(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).commChannelId="video-iframe-".concat((0,m.v4)()),a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this;this._iframe.onload=function(){e._comm=new p.default(e.commChannelId,window,e._iframe.contentWindow,{},e);var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props);delete t.onReady,e._comm.send("setProps",{token:f.default.getCurrentToken(),dictionary:e.props.dictionary||h.default.get(),appData:f.default.getAppdata(),props:t},(function(){e._comm.send("getVideoDuration",{},(function(t,n){e._duration=n,e.props.onReady()}))}))}}},{key:"componentWillUnamount",value:function(){this._comm.destroy()}},{key:"render",value:function(){var e=this;return d.default.createElement("iframe",{frameBorder:"0",allowFullScreen:"allowfullscreen","data-automation-id":"video-component",src:"".concat(this.props.iframeOrigin,"/video.html?channelId=").concat(this.commChannelId),ref:function(t){e._iframe=t}})}},{key:"getVideoTime",value:function(){return this._dummy=void 0,0}},{key:"play",value:function(){this._comm.send("play")}},{key:"pause",value:function(){this._comm.send("pause")}},{key:"getVideoDuration",value:function(){return this._duration}},{key:"pauseVideo",value:function(){this._comm.send("pause")}},{key:"setActivityEvents",value:function(e,t){this._comm.send("setActivityEvents",{eventData:e,restUrl:t})}}]),n}(d.Component);_.RATIO=E,_.defaultProps={styleClass:void 0,allowDownloadMedia:!1,eventData:void 0,eventUrl:void 0,preload:"none",width:"100%",height:"100%",markers:void 0,watermark:void 0,persistvolume:"persistvolume",ratio:E.NONE,locale:"en_US",editorMode:!1,setVideoDurationCallback:function(){},onReady:function(){},iframeOrigin:window.location.origin,dictionary:void 0};var y=_;t.default=y},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M34 21v-7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h24c1.1 0 2-.9 2-2v-7l8 8V13l-8 8z"}))}r.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=r,r.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t,n,a){var r=e.entry,i=e.interactions[r],o=n&&i&&n[i.type];return i&&i.getSettingsSchemes?i.getSettingsSchemes(o,a):[]}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(193));t.default=function(e){var t=e.entry,n=e.interactions[t],a=r.default.getTaskInteractionStoreByType(n.type);return a&&a.getFeedbackFields?a.getFeedbackFields(n):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(77);t.default=function(e,t){var n=e.entry,r=t&&t[n];return r&&r.getCheckAnswerStatus?r.getCheckAnswerStatus():a.UNAVAILABLE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){var n=e.entry,a=t&&t[n];return a&&a.getInteractionUserAnswers?a.getInteractionUserAnswers():[]}},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(55),i=a(n(477));t.default=function(e){return i[e]&&i[e].category===r.MEDIA}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(478));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.default=function(e){return Object.keys(i.default).reduce((function(t,n){return s(s({},t),{},(0,r.default)({},n,Object.keys(i.default[n]).reduce((function(t,a){if(e[a]){var o=i.default[n][a];return s(s({},t),{},(0,r.default)({},a,o.filter((function(t){return e[a][t]}))))}return t}),{})))}),{})}},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l,u,c=a(n(9)),d=r(n(54)),f=(u={},(0,c.default)(u,d.MC,(i={},(0,c.default)(i,d.TEXT,3),(0,c.default)(i,d.IMAGE,3),(0,c.default)(i,d.TEXT_BOOLEAN,3),(0,c.default)(i,d.AUDIO,3),i)),(0,c.default)(u,d.FILL_IN_GAPS,(o={},(0,c.default)(o,d.DND_SUBTYPE,"2thirds"),(0,c.default)(o,d.WRITING_SUBTYPE,"2thirds"),o)),(0,c.default)(u,d.POLL,(0,c.default)({},d.DEFAULT_SUBTYPE,3)),(0,c.default)(u,d.MATCHING,(0,c.default)({},d.DEFAULT_SUBTYPE,"2thirds")),(0,c.default)(u,d.CHOICE_MATRIX,(0,c.default)({},d.DEFAULT_SUBTYPE,3)),(0,c.default)(u,d.RATING,(0,c.default)({},d.CONTAINER_SUBTYPE,"2thirds")),(0,c.default)(u,d.FREE_WRITING,(s={},(0,c.default)(s,d.DEFAULT_SUBTYPE,2),(0,c.default)(s,d.FREE_WRITING_SUBTYPE_CHECKABLE,2),(0,c.default)(s,d.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER,2),(0,c.default)(s,d.FREE_WRITING_SUBTYPE_E_SIGNATURE,2),s)),(0,c.default)(u,d.TEXT,(0,c.default)({},d.DEFAULT_SUBTYPE,1)),(0,c.default)(u,d.IMAGE,(0,c.default)({},d.DEFAULT_SUBTYPE,"2thirds")),(0,c.default)(u,d.VIDEO,(0,c.default)({},d.DEFAULT_SUBTYPE,"2thirds")),(0,c.default)(u,d.AUDIO,(0,c.default)({},d.DEFAULT_SUBTYPE,1)),(0,c.default)(u,d.EMBED_WEBSITE,(l={},(0,c.default)(l,d.DEFAULT_SUBTYPE,"2thirds"),(0,c.default)(l,d.EMBEDDED_WEBSITE_WIX_SUBTYPE,"2thirds"),l)),u);t.default=f},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{fill:"#86C7EA",fillRule:"evenodd",d:"M23.916 11.013h-3.928l1.552 5.618c.01.038-.018.078-.062.09l-1.056.275c-.045.011-.09-.01-.101-.048l-1.639-5.935h-8.536l-1.639 5.935c-.011.038-.056.059-.1.048l-1.056-.275c-.045-.012-.073-.052-.062-.09l1.551-5.618H5.375l.718-.816H22.75V.813H5.081v7.188l-1.236.83-.026.016V.44C3.818.428 3.812.418 3.812.406c0-.012.006-.022.007-.034v-.29c0-.045.038-.082.084-.082H23.187c.034 0 .063.011.094.019.032-.005.061-.019.094-.019.345 0 .625.28.625.625V10.931a.083.083 0 0 1-.084.082zm-5.291-5.544H6.313a.407.407 0 1 1 0-.813h12.312a.406.406 0 0 1 0 .813zM6.314 3.25h9.028c.225 0 .408.183.408.408v.028a.408.408 0 0 1-.408.408H6.314a.408.408 0 0 1-.408-.408v-.028c0-.225.183-.408.408-.408zm-.001-1.375h14.749a.407.407 0 1 1 0 .813H6.313a.407.407 0 1 1 0-.813zm1.672 4.603l.471.457-7.118 6.906C.581 14.477 0 12.543 0 12.543l3.693-2.805v.011l.933-.72 3.359-2.551z"}))}r.defaultProps={width:"24",height:"17"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(50)),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"getDateStringByLocale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{year:"numeric",month:"short",day:"numeric"},a=n.weekday,r=n.year,i=n.month,o=n.day,s=n.hour,l=n.minute,u=n.hourCycle;switch(t){case"jp_JP":t="ja-JP";break;case"cn_CN":t="zh-Hans-CN"}return e.toLocaleDateString(t.replace("_","-"),{weekday:a,year:r,month:i,day:o,hour:s,minute:l,hourCycle:u})}},{key:"localToUtsTimeStamp",value:function(){return o.default.utc().valueOf()}}]),e}();t.default=s},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("circle",{id:"path-1",cx:"21",cy:"21",r:"21",key:0}),a.createElement("filter",{x:"-35.7%",y:"-35.7%",width:"171.4%",height:"171.4%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),a.createElement("feGaussianBlur",{stdDeviation:"5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1",key:2})])]),a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{id:"Hotspots-design_01",transform:"translate(-818.000000, -412.000000)"},a.createElement("g",{id:"B",transform:"translate(588.000000, 422.000000)"},a.createElement("g",{id:"hotspot_right-answer",transform:"translate(240.000000, 0.000000)"},[a.createElement("g",{id:"hotspot-answered-assessment-copy",key:0},[a.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),a.createElement("use",{fill:"#1FBFA9",fillRule:"evenodd",xlinkHref:"#path-1",key:1})]),a.createElement("g",{id:"icon-v",transform:"translate(13.000000, 15.000000)",fill:"#FFFFFF",fillRule:"nonzero",key:1},a.createElement("polygon",{points:"6.337 12.769 6.242 12.861 -7.10542736e-15 6.4 1.94 4.524 6.34 9.078 15.1 -5.32907052e-15 17.039 1.872 6.432 12.861"}))]))))])}r.defaultProps={width:"62px",height:"62px",viewBox:"0 0 62 62",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("circle",{id:"path-1",cx:"21",cy:"21",r:"21",key:0}),a.createElement("filter",{x:"-35.7%",y:"-35.7%",width:"171.4%",height:"171.4%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),a.createElement("feGaussianBlur",{stdDeviation:"5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1",key:2})])]),a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{id:"Hotspots-design_01",transform:"translate(-948.000000, -412.000000)"},a.createElement("g",{id:"B",transform:"translate(588.000000, 422.000000)"},a.createElement("g",{id:"hotspot_wrong-answer",transform:"translate(370.000000, 0.000000)"},[a.createElement("g",{id:"hotspot-answered-assessment",key:0},[a.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),a.createElement("use",{fill:"#F2576E",fillRule:"evenodd",xlinkHref:"#path-1",key:1})]),a.createElement("g",{id:"icon-wrong",transform:"translate(12.000000, 15.000000)",fill:"#FFFFFF",fillRule:"nonzero",key:1},a.createElement("path",{d:"M13.1444336,0 L15.0834336,1.872 L10.672,6.444 L15.0834336,11.005127 L13.199,12.9634094 L8.791,8.394 L4.38443359,12.9634094 L2.5,11.005127 L6.911,6.445 L2.5,1.872 L4.439,5.32907052e-15 L8.792,4.5 L13.1444336,0 Z",id:"Combined-Shape"}))]))))])}r.defaultProps={width:"62px",height:"62px",viewBox:"0 0 62 62",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("circle",{id:"path-1",cx:"21",cy:"21",r:"21",key:0}),a.createElement("filter",{x:"-35.7%",y:"-35.7%",width:"171.4%",height:"171.4%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[a.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),a.createElement("feGaussianBlur",{stdDeviation:"5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1",key:2})])]),a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{id:"Hotspots-design_01",transform:"translate(-1059.000000, -412.000000)"},a.createElement("g",{id:"B",transform:"translate(588.000000, 422.000000)"},a.createElement("g",{id:"hotspot_partial-answer",transform:"translate(480.500000, 0.000000)"},[a.createElement("g",{id:"hotspot-answered-assessment-copy-3",key:0},[a.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),a.createElement("use",{fill:"#fdc54f",fillRule:"evenodd",xlinkHref:"#path-1",key:1})]),a.createElement("g",{id:"icon-partial",transform:"translate(13.000000, 15.000000)",fill:"#FFFFFF",key:1},[a.createElement("polygon",{id:"icon-v",fillRule:"nonzero",points:"6.337 12.769 6.242 12.861 -7.10542736e-15 6.4 1.94 4.524 6.34 9.078 15.1 -5.32907052e-15 17.039 1.872 6.432 12.861",key:0}),a.createElement("rect",{id:"Rectangle",fillRule:"evenodd",transform:"translate(12.207107, 4.707107) rotate(-45.000000) translate(-12.207107, -4.707107) ",x:"10.7071068",y:"-0.292893219",width:"3",height:"10",key:1})])]))))])}r.defaultProps={width:"61px",height:"62px",viewBox:"0 0 61 62",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.language,a=e.hideDialog,r=e.verifyPassword,v=e.onSignConfirm,g=(0,c.useState)({}),E=(0,o.default)(g,2),_=E[0],y=E[1],k=(0,c.useRef)(),S={passwordRef:k},T=function(){var e,t=(e={},(0,u.default)(S,(function(t,a){var r;(null===(r=t.current)||void 0===r?void 0:r.value.trim())||(e[a]=n.login.messages["required-field"])})),e);if((0,s.default)(t)){var a,o=null===(a=k.current)||void 0===a?void 0:a.value.trim();r(o).then((function(e){e?v():y((0,i.default)({},"passwordRef",n.login.messages["invalid-password"]))})).catch((function(){y((0,i.default)({},"passwordRef",n.login.messages["invalid-password"]))}))}else y(t)},b=function(e){if(!(0,s.default)(_)&&(0,l.default)(_,e)){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_);delete t[e],y(t)}},C=function(e,t){13===(t.which||t.keyCode)&&T()},I=function(e){return(0,d.default)("e-signature-confirm-dialog__input",{"e-signature-confirm-dialog__input--error":(0,l.default)(_,e)})},O=function(e,t,n,a,r,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return c.default.createElement("input",{className:I(e),key:e,id:"sign-confirm__input-".concat(e),ref:"passwordRef"===e?k:void 0,type:t,disabled:o,value:r,onKeyPress:function(e){return C(0,e)},onChange:function(){b(e)},placeholder:n,pattern:i||void 0,title:n,autoCapitalize:"off",autoFocus:a})},A=c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"e-signature-confirm-dialog__text"},n.eSignature.dialog.text),c.default.createElement("div",{className:"e-signature-confirm-dialog__text-password"},n.eSignature.dialog.textPassword),[O("passwordRef","password","",!0,void 0),c.default.createElement("div",{key:"input-message-first-name",className:(N="passwordRef",(0,d.default)("e-signature-confirm-dialog__input-message",{"e-signature-confirm-dialog__input-message--error":(0,l.default)(_,N)}))},_.passwordRef||"")]);var N;return c.default.createElement(c.default.Fragment,null,!p.default.isIos()&&c.default.createElement(f.default,{content:A,theme:f.default.THEMES.LIGHT,title:n.eSignature.dialog.title,styleClass:"e-signature-confirm-dialog",actions:[{id:"cancel",text:n.eSignature.dialog.cancel,type:"secondary",onClick:function(){return a()},keyCode:27},{id:"confirm",text:n.eSignature.dialog.confirm,type:"primary",onClick:function(){return T()},keyCode:13}]}),p.default.isIos()&&c.default.createElement(h.default,{resources:null==n||null===(t=n.eSignature)||void 0===t?void 0:t.dialog,content:A,onConfirm:T,onHide:a}),";")};var i=r(n(9)),o=r(n(43)),s=r(n(105)),l=r(n(238)),u=r(n(236)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(58)),p=r(n(13)),h=r(n(825));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.resources,n=e.content,a=e.onConfirm,s=e.onHide;return r.default.createElement(o.default,{className:"t2k-app-modal__overlay"},r.default.createElement("div",{className:"modal"},r.default.createElement("div",{className:"t2k-app-modal__mobile t2k-app-modal"},r.default.createElement("div",{className:"t2k-app-modal__title-area"},t.title),r.default.createElement("div",{className:"t2k-app-modal__content"},n),r.default.createElement("div",{className:"t2k-app-modal__actions-area"},r.default.createElement("div",{className:"t2k-app-modal__secondary-actions"},r.default.createElement(i.default,{id:"secondary-action",text:t.cancel,type:"secondary",onClick:function(){return s()}})),r.default.createElement("div",{className:"t2k-app-modal__primary-actions"},r.default.createElement(i.default,{id:"primary-action",text:t.confirm,type:"primary",onClick:function(){return a()}}))))))};var r=a(n(0)),i=a(n(36)),o=a(n(826))},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(125)).default.div.withConfig({displayName:"ConfirmSignDialogModalStyled",componentId:"xgfooc-0"})(["position:fixed;top:0;left:0;width:100%;height:100%;.modal{display:flex;}"]);t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(123))),p=a(n(110)),h=n(77),m=n(103);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleCheckClick=e.handleCheckClick.bind((0,s.default)(e)),e.progressBtnGamifyClass="progress-btn gamify",e}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.props.progressBtnState;return d.default.createElement("div",null,d.default.createElement("div",{className:"progress-bar section float-progress-bar ".concat(t)},function(){switch(t){case p.CHECK:return e.renderGamifyCheck();case p.COMPLETED_WRONG:case p.COMPLETED_RIGHT:return e.renderCompleteGamify();case m.VOTE:return e.renderVote();case m.SAVE:case m.CHECKABLEOFF:return e.renderSave()}}()))}},{key:"renderSave",value:function(){var e=this.props,t=e.language,n=e.handleSaveClick,a=e.saveBtnState;return d.default.createElement("div",{className:"progress-bar-container"},d.default.createElement(f.default,{"data-unittest-id":"save-btn",disabled:a,onClick:n,className:"".concat(this.progressBtnGamifyClass)},t.SUBMIT))}},{key:"renderVote",value:function(){var e=this.props,t=e.checkAnswerStatus,n=e.language,a=e.handleVoteClick;return d.default.createElement("div",{className:"progress-bar-container"},d.default.createElement(f.default,{"data-unittest-id":"vote-btn",onClick:a,disabled:t===h.UNAVAILABLE,className:"".concat(this.progressBtnGamifyClass)},n.VOTE))}},{key:"renderGamifyCheck",value:function(){var e=this.props,t=e.checkAnswerStatus,n=e.readOnlyMode,a=e.language;return d.default.createElement("div",{className:"progress-bar-container"},d.default.createElement(f.default,{"data-unittest-id":"check-answer-btn",disabled:t===h.UNAVAILABLE||n,onClick:this.handleCheckClick,className:"".concat(this.progressBtnGamifyClass)},a.SUBMIT))}},{key:"renderCompleteGamify",value:function(){return d.default.createElement("div",{className:"progress-bar-container"},d.default.createElement(f.default,{"data-unittest-id":"check-answer-btn",disabled:!0,className:"".concat(this.progressBtnGamifyClass)},this.props.language.SUBMIT))}},{key:"handleCheckClick",value:function(){this.props.handleCheckClick&&this.props.handleCheckClick()}}]),n}(d.Component);t.default=g},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(0)),o=(a(n(2)),a(n(11))),s=a(n(288)),l=n(52),u=a(n(479));function c(e){var t=e.model,n=e.language,a=e.ltr,r=e.progressBtnState,c=e.answerAvailable,d=e.isAssessment,f=e.isAnswerEmbedded,p=e.answer,h=e.progressBar;return i.default.createElement("div",{className:(0,o.default)("embedded-question",{"with-answer":f})},i.default.createElement("div",{className:"embedded-question__content"},i.default.createElement(s.default,{language:n.interaction,ltr:a,model:t.question,taskPresentationDisplayType:"OVERLAY",mode:l.PLAYER,hideMediaOptions:!0})),f?i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"embedded-question__answer"},p),i.default.createElement("div",{className:"embedded-question__button"},h)):i.default.createElement("div",{className:"embedded-question__button"},i.default.createElement(u.default,{language:n,model:t,progressBtnState:r,isOverlayDisplay:!0,ltr:a,answerAvailable:c,isAssessment:d})))}n(829),c.defaultProps={isAnswerEmbedded:!1,answer:void 0,progressBar:void 0};var d=(0,i.memo)(c);t.default=d},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(831))),p=r(n(833));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleBackgroundChange=e.handleBackgroundChange.bind((0,s.default)(e)),e}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.taskList,a=e.onAddTask,r=e.defaultTaskGroupDialogOpen,i=t.backgroundColor;return d.default.createElement("div",{className:"task-group-header"},d.default.createElement(p.default,{defaultTaskGroupDialogOpen:r,taskList:n,onAddTask:a}),d.default.createElement(f.default,{defaultBackgroundColor:i,onBackgroundColorChange:this.handleBackgroundChange}))}},{key:"handleBackgroundChange",value:function(e){var t=this.props.onDataChange;t&&t("backgroundColor",e)}}]),n}(d.Component);t.default=m},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=a(n(3)),s=a(n(4)),l=a(n(12)),u=a(n(6)),c=a(n(8)),d=a(n(7)),f=r(n(0)),p=n(76),h=a(n(832));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=(0,p.InteractionHoc)((function(e){return{language:e.language.taskGroup}}))(i=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toggleTaskGroupSettingsDialog=e.toggleTaskGroupSettingsDialog.bind((0,l.default)(e)),e.onTaskGroupSettingsDialogClose=e.onTaskGroupSettingsDialogClose.bind((0,l.default)(e)),e.state={isTaskGroupSettingsDialogOpen:!1},e}return(0,s.default)(n,[{key:"render",value:function(){return f.default.createElement("div",{className:"t2i-task-group-settings"},this.state.isTaskGroupSettingsDialogOpen&&f.default.createElement(h.default,{onClose:this.onTaskGroupSettingsDialogClose,onBackgroundColorChange:this.props.onBackgroundColorChange,language:this.props.language,defaultBackgroundColor:this.props.defaultBackgroundColor}),f.default.createElement("div",null,f.default.createElement("div",{className:"taskGroup-settings t2kInt-icon-TG_Settings",onClick:this.toggleTaskGroupSettingsDialog,title:"0.6908.0"})))}},{key:"toggleTaskGroupSettingsDialog",value:function(){this.setState({isTaskGroupSettingsDialogOpen:!this.state.isTaskGroupSettingsDialogOpen})}},{key:"onTaskGroupSettingsDialogClose",value:function(){this.setState({isTaskGroupSettingsDialogOpen:!1})}}]),n}(f.Component))||i;t.default=v},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=["#FFEBEE","#FCE4EC","#F3E5F5","#EDE7F6","#E8EAF6","#FFCDD2","#F8BBD0","#E1BEE7","#D1C4E9","#C5CAE9","#EF9A9A","#F48FB1","#CE93D8","#B39DDB","#9FA8DA","#E3F2FD","#E1F5FE","#E0F2F1","#F1F8E9","#F9FBE7","#BBDEFB","#B3E5FC","#B2DFDB","#DCEDC8","#F0F4C3","#90CAF9","#81D4FA","#80CBC4","#C5E1A5","#E6EE9C","#FFFDE7","#FFF8E1","#FFF3E0","#FBE9E7","#EFEBE9","#FFF9C4","#FFECB3","#FFE0B2","#FFCCBC","#D7CCC8","#FFF59D","#FFE082","#FFCC80","#FFAB91","#BCAAA4","#FAFAFA","#F5F5F5","#EEEEEE","#ECEFF1","#CFD8DC","transparent"],p=function(e){(0,s.default)(n,e);var t=d(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedColor:e.props.defaultBackgroundColor},e}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.props.language;return c.default.createElement("div",{className:"settings task-group-settings"},c.default.createElement("div",{className:"task-group-settings-header"},c.default.createElement("div",{className:"settings-close t2kInt-icon-delete_close",onClick:this.props.onClose})),c.default.createElement("div",{className:"settings-content"},c.default.createElement("div",{className:"settings-section "},c.default.createElement("label",{className:"section-lable"},t.BACKGROUND,":"),c.default.createElement("div",{className:"section-content background-color-picker"},f.map((function(t){var n=t===e.state.selectedColor?"selected-background ":"";return"transparent"===t&&(n+="transparent "),c.default.createElement("div",{key:t,className:"color-option ".concat(n),style:{backgroundColor:t},onClick:function(){return e.handleBackgroundChange(t)}})}))))))}},{key:"handleBackgroundChange",value:function(e){this.setState({selectedColor:e}),this.props.onBackgroundColorChange(e)}}]),n}(c.Component);t.default=p},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),n(76)),h=r(n(834));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,u.default)(n,e);var t=m(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).openTaskDialog=e.openTaskDialog.bind((0,l.default)(e)),e.onTaskDialogClose=e.onTaskDialogClose.bind((0,l.default)(e)),e.defaultProps={defaultTaskGroupDialogOpen:!1},e.state={isDialogOpened:e.props.defaultTaskGroupDialogOpen},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.state.isDialogOpened&&this._addTaskDialogRef.open()}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"t2i-add-task"},f.default.createElement(h.default,{ref:function(t){e._addTaskDialogRef=t},language:this.props.language,taskList:this.props.taskList,addTask:this.props.onAddTask,onDialogClosed:this.onTaskDialogClose,position:(0,i.default)({position:"absolute",top:"28px"},this.props.ltr?"right":"left","44px")}),f.default.createElement("div",{className:"add-task-icon",onClick:this.openTaskDialog},f.default.createElement("div",{className:"t2kInt-icon-hexagon"},f.default.createElement("span",{className:"t2kInt-icon-add2 ".concat(this.state.isDialogOpened?"open":"close")}))))}},{key:"openTaskDialog",value:function(){this.setState({isDialogOpened:!0}),this._addTaskDialogRef.open()}},{key:"onTaskDialogClose",value:function(){this.setState({isDialogOpened:!1})}}]),n}(f.Component);var g=(0,p.InteractionHoc)((function(e){return{language:e.language,ltr:e.ltr}}))(v);t.default=g},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(835)));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var g=function(e){(0,c.default)(n,e);var t=v(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClose=e.handleClose.bind((0,u.default)(e)),e}return(0,l.default)(n,[{key:"render",value:function(){var e=this,t=this.props.taskList,n=this.props.language&&this.props.language.taskGroup,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props.position);return p.default.createElement(h.default,{ref:function(t){e._dialogRef=t},position:a,className:"add-task",onClose:this.handleClose},p.default.createElement("div",{className:"add-tasks-container","data-automation-id":"add-tasks-caontainer"},Object.keys(t).map((function(a){var r=n&&n.TASK_CATEGORY&&n.TASK_CATEGORY[a]?n.TASK_CATEGORY[a]:a,o=t[a];return p.default.createElement("div",{className:"task-category-container",id:"".concat(r),key:r},p.default.createElement("div",{className:"category-name"},r),p.default.createElement("div",{className:"tasks-list-container"},Object.keys(o).reduce((function(t,a){return[].concat((0,i.default)(t),(0,i.default)(o[a].map((function(t){var r="default"!==t?"".concat(a,"_").concat(t):a,i=a;return n&&n.TASK_TYPES&&(i="default"===t?n.TASK_TYPES[a]:n.TASK_TYPES[a][t]),p.default.createElement("div",{"data-automation-id":"category-btn-type-".concat(a,"-preset-").concat(t),className:"link",onClick:function(){return e.addTask(a,t)},key:r},i)}))))}),[])))}))))}},{key:"handleClose",value:function(){this.props.onDialogClosed&&this.props.onDialogClosed()}},{key:"addTask",value:function(e,t){this.props.addTask&&this.props.addTask(e,t),this.close()}},{key:"open",value:function(){this._dialogRef.open()}},{key:"close",value:function(){this._dialogRef.close()}}]),n}(p.Component);t.default=g},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0));r(n(2));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({isVisible:!1})}},{key:"componentDidUpdate",value:function(e,t){t.isVisible!==this.state.isVisible&&(this.bindEvents(),this.props.onClose&&!this.state.isVisible&&this.props.onClose(),this.props.onOpen&&this.state.isVisible&&this.props.onOpen())}},{key:"componentWillUnmount",value:function(){this._clickHandler&&(document.removeEventListener("click",this._clickHandler),this._clickHandler=null)}},{key:"render",value:function(){var e=this,t=p(p({},this.props.position),{},{display:this.state.isVisible?"block":"none"});return d.default.createElement("div",{style:t,className:"dialog ".concat(this.props.className),ref:function(t){e._containerRef=t}},this.props.header&&d.default.createElement("div",{className:"dialog-header"},this.props.header),this.props.children&&d.default.createElement("div",{className:"dialog-body"},this.props.children))}},{key:"bindEvents",value:function(){this.state.isVisible?(this._clickHandler=this.closeOnClick.bind(this),document.addEventListener("click",this._clickHandler)):(document.removeEventListener("click",this._clickHandler),this._clickHandler=null)}},{key:"open",value:function(){this.setState({isVisible:!0})}},{key:"closeOnClick",value:function(e){this._containerRef.contains(e.target)||this.close()}},{key:"close",value:function(){this.setState({isVisible:!1})}}]),n}(d.Component);t.default=m},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(197))),p=r(n(126)),h=r(n(13));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={title:a.props.value},a.handleOnchange=a.handleOnchange.bind((0,s.default)(a)),a.handleOnBlur=a.handleOnBlur.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.value!==this.state.title&&this.setState({title:e.value})}},{key:"render",value:function(){return this.props.readonly?this.renderReadOnlyTitle():this.renderEditableTitle()}},{key:"renderEditableTitle",value:function(){var e=this,t=this.props.placeholder,n=this.state.title;return d.default.createElement("div",{className:"task-group-title"},d.default.createElement(f.default,{className:"t2i-taskgroup-title-text",ref:function(t){e._titleRef=t},value:n,placeholder:t,onChange:this.handleOnchange,onBlur:this.handleOnBlur}))}},{key:"renderReadOnlyTitle",value:function(){var e=this.state.title,t=h.default.isMobile()?d.default.createElement("div",{className:"t2i-taskgroup-title-text",title:e},d.default.createElement(p.default,{clamp:"2"},e)):d.default.createElement("div",null,d.default.createElement("div",null,d.default.createElement("p",{className:"t2i-taskgroup-title-text",title:e},e)));return d.default.createElement("div",{className:"task-group-title"},e&&t)}},{key:"handleOnchange",value:function(){this.setState({title:this._titleRef.getInputValue()})}},{key:"handleOnBlur",value:function(){var e=this.props.onDoneEditing;e&&e(this.state.title)}}]),n}(d.Component);t.default=v,v.defaultProps={readonly:!1}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=r(n(37)).default.isMobile,p=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.ltr,n=e.onPreviousClick,a=e.onNextClick;return c.default.createElement("div",{className:"one-by-one-footer ".concat(f?"mobile":"")},c.default.createElement("div",{className:"navigate-task ".concat(t?"t2kInt-icon-chevron-left":"t2kInt-icon-chevron-right"," ").concat(n?"":"disabled"),onClick:n}),c.default.createElement("div",{className:"navigate-task ".concat(t?"t2kInt-icon-chevron-right":"t2kInt-icon-chevron-left"," ").concat(a?"":"disabled"),onClick:a}))}}]),n}(c.Component);t.default=p},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0));t.default=function(){return r.default.createElement("div",{className:"powered-by-container"},r.default.createElement("div",{className:"powered-by-text"}," Powered by "),r.default.createElement("div",{className:"powered-by-text-colorful"},"Time To Know",r.default.createElement("span",{className:"t2kInt-icon-registered"})))}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=n(1152),v=r(n(41)),g=r(n(21)),E=r(n(216)),_=r(n(230)),y=r(n(840)),k=r(n(841)),S=r(n(123)),T=a(n(225)),b=r(n(480)),C=a(n(54)),I=a(n(842)),O=r(n(843)),A=r(n(856));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var w=function(e){(0,c.default)(n,e);var t=N(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).onTaskButtonsClicked=a.onTaskButtonsClicked.bind((0,u.default)(a)),a.handleScrollIntoView=a.handleScrollIntoView.bind((0,u.default)(a)),a.showFeedbackClick=a.showFeedbackClick.bind((0,u.default)(a)),a.updateTimer=a.updateTimer.bind((0,u.default)(a)),a.state={isSettingsOpen:!1,settingsContent:void 0,renderTask:!e.lazyLoad||e.index<10,scrollTo:!1},a.isMedia=-1!==C.MEDIA_TYPES.indexOf(e.taskType),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.updateTimer()}},{key:"componentWillUnmount",value:function(){this.timerInterval&&clearInterval(this.timerInterval)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,a=n.renderTask,r=n.scrollTo;a!==t.renderTask&&r?this.stopScrollingToTask():r!==t.scrollTo&&this.scrollToTask(!0),this.props.hideWrapper!==e.hideWrapper&&this.updateTimer()}},{key:"render",value:function(){return this.state.renderTask?this.renderTask():this.renderEmptyTask()}},{key:"getTaskWrapperListClasses",value:function(){var e=this.props,t=e.hideWrapper,n=e.removePaddings,a=e.hideProgressBar,r=e.focusClass,i=e.isSuggested,o=e.isHighlightedTask;return(0,h.default)("task-holder task-wrapper",{hide:t,"t2i-no-padd":n,"hide-progress-bar":a,focused:r,suggested:i,highlight:o,"display-overlay":this.isPresentationDisplayOverlay(),media:this.isMedia,question:!this.isMedia})}},{key:"isPresentationDisplayOverlay",value:function(){return this.props.taskPresentationDisplayType===g.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY}},{key:"renderTask",value:function(){var e=this,t=this.props,n=t.viewOnly,a=t.children,r=t.hideProgressBar,i=t.isDragging,s=t.backgroundColor,l=t.isSuggested,u=t.taskType,c=t.taskId,d=t.isInteractionsThemeV2,f=!n,h=this.isPresentationDisplayOverlay();return p.default.createElement("div",{ref:function(t){e._containerRef=t},"data-automation-id":"task",style:d||h?null:{backgroundColor:s},className:this.getTaskWrapperListClasses(),"data-automation-show-progress-bar":!r,onMouseEnter:function(){f&&l&&e._containerRef&&(e._containerRef.classList.remove("task-hover-leave"),e._containerRef.classList.add("task-hovered"))},onMouseLeave:function(){f&&l&&e._containerRef&&(e._containerRef.classList.remove("task-hovered"),e._containerRef.classList.add("task-hover-leave"))},onMouseDown:function(){var t;!e.mixPanelEventEditSuggested&&f&&l&&e._containerRef&&(v.default.sendEvent(v.default.TITLES.INTERACT_WITH_MAGIC_INTERACTIONS,v.default.COMPONENTS.SIDE_DRAWER,(t={},(0,o.default)(t,v.default.PARAMS.USER_ACTION,"edit"),(0,o.default)(t,v.default.PARAMS.INTERACTION_TYPE,u.toLowerCase()),(0,o.default)(t,v.default.PARAMS.CONTENT_ID,c),t)),e.mixPanelEventEditSuggested=!0)}},!h&&!d&&this._renderTaskHeader(),!i&&a)}},{key:"_renderTaskHeader",value:function(){var e=this.props,t=e.viewOnly,n=e.taskNumbering,a=e.taskActions,r=e.registerDragHandler,o=e.unregisterDragHandler,s=e.taskButtons,l=e.language,u=e.externalControl,c=e.showFlagInteractionButton,d=e.addShowFeedbackButton,f=e.featureFlags,h=e.timeCounter,m=e.isSuggested,v=e.taskType,g=e.taskId,E=e.reducedEditorCapabilitiesV2,k=!t,S=c&&f.flagInteraction,T=k&&E&&v===C.TEXT;return m&&k?p.default.createElement(A.default,(0,i.default)({},a,{language:l.TASK_ICONS,taskType:v,taskId:g})):p.default.createElement("div",{className:"task-header ttk-task-editor"},n&&p.default.createElement(I.default,(0,i.default)({},n,{mode:k?I.MODE.TASK_NUMBERING:I.MODE.TASK_PLAY_NUMBERING})),this.getTaskScore(),!u&&p.default.createElement("div",{className:"task-header-spacer"}),u&&p.default.createElement("div",{className:"ttk-task-wrapper__external-control"},u),S&&p.default.createElement("div",{className:"task-buttons"},p.default.createElement(_.default,{IconImage:y.default,onClick:a.onFlagTask,title:l.TASK_ICONS.FLAG})),d&&p.default.createElement("div",{className:"task-buttons"},p.default.createElement(_.default,{IconImage:b.default,onClick:this.showFeedbackClick,title:l.TASK_ICONS.FEEDBACK})),h&&p.default.createElement("div",{className:"ttk-task-wrapper__time-counter-wrapper"},this.renderTimer()),T&&this.renderBackgroundOpacityToggle(),k&&p.default.createElement(O.default,(0,i.default)({},a,{viewOnly:t,registerDragHandler:!this.props.disableDragOrdering&&r,unregisterDragHandler:!this.props.disableDragOrdering&&o,onBackgroundColorChanged:a.onBackgroundColorChange,defaultBackgroundColor:a.defaultBackgroundColor,language:l.TASK_ICONS,reducedEditorCapabilitiesV2:E})),!k&&s&&this.renderTaskButtons())}},{key:"showFeedbackClick",value:function(){this.props.showFeedbackClick(this.props.taskId)}},{key:"renderTaskButtons",value:function(){var e,t=this.props,n=t.language,a=t.taskButtons;return a.type===T.CUSTOM?e=a.element:a.type===T.SHOW&&(e=p.default.createElement(S.default,{"data-automation-id":"show-button",className:"show-button",onClick:this.onTaskButtonsClicked},p.default.createElement("span",null," ",n.TASK_BUTTONS[a.type]," "),p.default.createElement(k.default,null))),p.default.createElement("div",{className:"task-buttons"},e)}},{key:"renderEmptyTask",value:function(){var e=this,t=this.props.taskId;return p.default.createElement(m.Waypoint,{onEnter:this.handleScrollIntoView,key:"task-wrapper-".concat(t),fireOnRapidScroll:!1},p.default.createElement("div",{className:"empty-task task-holder","data-automation-id":"task",style:{minHeight:"200px"},ref:function(t){e._containerRef=t}}))}},{key:"renderTimer",value:function(){var e=this.props.timeCounter,t=this.state.timerInSeconds;if(void 0===t||void 0===e.amountOfTime||void 0===e.startingTime)return null;var n=Math.floor(t/60).toString(),a=(t%60).toString(),r="time-counter-content ".concat(t<=10?"red-badge":"");return p.default.createElement("div",{className:r},n.length<2?"0".concat(n):n,":",a.length<2?"0".concat(a):a)}},{key:"updateTimer",value:function(){var e=this,t=this.props,n=t.timeCounter,a=t.hideWrapper;void 0===n||a?this.timerInterval&&clearInterval(this.timerInterval):this.timerInterval=setInterval((function(){var t=Math.round((1e3*n.amountOfTime-(Date.now()-n.startingTime))/1e3);t<=0?(e.setState({timerInSeconds:0}),clearInterval(e.timerInterval),n.timerFinishedCallback()):e.setState({timerInSeconds:t})}),1e3)}},{key:"onTaskButtonsClicked",value:function(){var e=this;this.props.taskButtons.callback&&this.props.getEventsContextPromise().then((function(t){e.props.taskButtons.callback(t)}))}},{key:"renderBackgroundOpacityToggle",value:function(){var e,t=this,n=this.props,a=n.opacity,r=n.language,i="0"===a;return p.default.createElement("div",{className:"background-opacity-toggle"},p.default.createElement("span",{className:"background-opacity-label"},null===(e=r.opacitytoggle)||void 0===e?void 0:e.label),p.default.createElement(E.default,{onUserChangeState:function(e){t.onChangeBackgroundOpacity(e)},isEnabled:i}))}},{key:"onChangeBackgroundOpacity",value:function(e){var t=e?"0":"1";this.props.taskActions.handleTaskOpacityChange(t)}},{key:"handleScrollIntoView",value:function(){this.setState({renderTask:!0})}},{key:"scrollToTask",value:function(e){var t=this;this._containerRef.scrollIntoView({block:"center",behavior:"auto"}),window.scrollBy(0,0),(this.state.scrollTo||e)&&setTimeout((function(){t.scrollToTask()}),0)}},{key:"stopScrollingToTask",value:function(){this.setState({scrollTo:!1})}},{key:"scrollIntoView",value:function(){this.state.renderTask?this.scrollToTask():this.setState({scrollTo:!0},this.scrollToTask)}},{key:"getTaskScore",value:function(){var e=this.props,t=e.scoreToDisplay,n=e.language;if(!t)return null;var a,r=t.maxScore,i=t.successRate,o=t.isCustomPoints;if("number"!=typeof r||"number"!=typeof i&&!o)return null;if("number"==typeof i){var s=Math.round(i/100*r);a="".concat(s," / ").concat(r)}else a=r;return p.default.createElement("div",{className:"task-score-wrapper"},p.default.createElement("span",{className:"task-score"},n.TASK_WEIGHT.SCORE," ",a))}}]),n}(p.Component);t.default=w,w.defaultProps={settingsPanel:{},taskActions:{},isDisableTaskSettings:!1,showFeedbackClick:function(){},addShowFeedbackButton:!1,showFlagInteractionButton:!1,videoIframeOrigin:void 0,availableOffline:!1,closeOverlayTaskGroup:function(){},timeCounter:void 0,isSuggested:!1,isInteractionsThemeV2:!1,taskPresentationDisplayType:"",taskPresentationProperties:void 0,taskType:"",subType:""}},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Group_1",transform:"translate(-946 -532)"},[a.createElement("path",{id:"Subtraction_1",style:{fill:"#36474F"},d:"M964.1,549H946v-2.1c0-2.3,4.1-4.3,9-4.3c0.9,0,1.9,0.1,2.8,0.2v0.3\n\t\tc0,1.8,1.4,3.2,3.2,3.3h2.9c0,0.2,0.1,0.3,0.1,0.5V549L964.1,549z M954.9,540.5c-2.4,0-4.3-1.9-4.4-4.3c0.1-2.4,2-4.3,4.4-4.3h0.1\n\t\th0.1c1.3,0,2.6,0.6,3.4,1.6c-0.5,0.6-0.7,1.3-0.7,2v4c-0.8,0.6-1.7,0.9-2.7,0.9H955L954.9,540.5z",key:0}),a.createElement("path",{id:"Path_861",style:{fill:"#36474F"},d:"M970.9,534.4h-9.8c-0.7,0-1.2,0.6-1.2,1.3l0,7.5c0,0.7,0.5,1.2,1.2,1.3h9.8\n\t\tc0.7,0,1.2-0.6,1.2-1.3v-7.5C972.1,535,971.5,534.4,970.9,534.4z M971,537.2l-5,2.8l-5-2.8v-1.1l5,2.8l5-2.8V537.2z",key:1})]))}r.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 26.1 17",style:{enableBackground:"new 0 0 26.1 17"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},[a.createElement("path",{d:"M7.833 13.833H4V10M4 13.457L7.457 10M10 4h3.833v3.833M13.457 4L10 7.457",key:0}),a.createElement("path",{d:"M15.333 17H2.667C1.747 17 1 16.254 1 15.333V2.667C1 1.747 1.746 1 2.667 1h12.666C16.253 1 17 1.746 17 2.667v12.666c0 .92-.746 1.667-1.667 1.667z",key:1})]))}r.defaultProps={width:"18",height:"18",viewBox:"0 0 18 18"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MODE=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f={TASK_NUMBERING:0,TASK_PLAY_NUMBERING:1};t.MODE=f;var p=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:"task-numbering"},this.renderContent())}},{key:"renderContent",value:function(){var e=this.props,t=e.taskNumber,n=e.taskMaxNumber,a=e.mode,r=n?"".concat(t,"/").concat(n):t;return a===f.TASK_PLAY_NUMBERING?c.default.createElement("div",{className:"task-play-numbering"},r):c.default.createElement("span",{className:"task-header-numbering","data-task-number":r})}}]),n}(c.Component);t.default=p,p.defaultProps={mode:f.TASK_NUMBERING}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(230))),f=r(n(844)),p=r(n(845)),h=r(n(361)),m=r(n(262)),v=r(n(848)),g=r(n(849)),E=n(76),_=r(n(850));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var k=function(e){(0,s.default)(n,e);var t=y(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.registerDragHandler;e&&e(this._dragRef)}},{key:"componentWillUnmount",value:function(){var e=this.props.unregisterDragHandler;e&&e(this._dragRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.customBar,a=t.onDeleteTask,r=t.onDuplicateTask,i=t.registerDragHandler,o=t.unregisterDragHandler,s=t.language,l=this.props,u=l.colorPickerTitle,E=l.onBackgroundColorChanged,y=c.default.createElement(h.default,{forceFixStyle:!0,autoClose:!0,title:u,theme:h.default.THEME.DARK,trigger:c.default.createElement("div",{className:"toolbar-icon-container"},c.default.createElement(d.default,{title:s.COLOR_PICKER,IconImage:v.default})),zIndex:2},c.default.createElement("div",{className:"t2i-color-picker"},c.default.createElement(m.default,{updateState:E,color:this.props.defaultBackgroundColor,styleClass:"t2i-color-picker-sketch",pickerClassName:"sketch-picker"})));return c.default.createElement("div",{className:"task-actions"},!this.props.reducedEditorCapabilitiesV2&&y,c.default.createElement(_.default,n),i&&o&&c.default.createElement("div",{className:"toolbar-icon-container",ref:function(t){e._dragRef=t}},c.default.createElement(d.default,{IconImage:p.default,title:s.MOVE_TASK,dataUnitTestId:"task-actions-move",dataAutomationId:"task-actions-move"})),a&&c.default.createElement(d.default,{IconImage:f.default,onClick:a,title:s.DELETE,dataUnitTestId:"task-actions-delete",dataAutomationId:"task-actions-delete"}),r&&c.default.createElement(d.default,{IconImage:g.default,onClick:r,title:s.DUPLICATE,dataUnitTestId:"task-actions-duplicate",dataAutomationId:"task-actions-duplicate"}))}}]),n}(c.Component);var S=(0,E.InteractionHoc)((function(e){return{colorPickerTitle:e.language.task.BACKGROUND_COLOR}}))(k);t.default=S},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("path",{id:"t2i-svg-delete-can-1",d:"M17.647 10.847V21H0V.693h17.647v10.154z"})),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("path",{fill:"#323232",d:"M8.162 17.835h1.5V7.236h-1.5zM14.502 17.835h1.5V7.236h-1.5zM11.274 17.835h1.5V7.236h-1.5z",key:0}),a.createElement("g",{transform:"translate(3.2 1.307)",key:1},[a.createElement("mask",{id:"t2i-svg-delete-can-2",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#t2i-svg-delete-can-1"})),a.createElement("path",{d:"M14.543 18.747a.763.763 0 0 1-.752.753H3.78a.763.763 0 0 1-.752-.753V3.732h11.515v15.015zm3.104-16.59h-4.804v-.964a.5.5 0 0 0-.5-.5H5.305a.498.498 0 0 0-.499.5v.964H0v1.5h1.528v15.09A2.26 2.26 0 0 0 3.78 21h10.011a2.26 2.26 0 0 0 2.252-2.253V3.657h1.604v-1.5z",fill:"#323232",mask:"url(#t2i-svg-delete-can-2)",key:1})])])])}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#323232",fillRule:"evenodd"},a.createElement("path",{d:"M14.713 18.67l-2 2v-6.296h-1.5v6.294L9.214 18.67l-1.06 1.061 3.067 3.067c.198.198.462.308.743.308.28 0 .544-.11.742-.308l3.068-3.067-1.06-1.06zM15.774 4.199L12.706 1.13a1.045 1.045 0 0 0-.743-.307c-.281-.04-.544.11-.741.307L8.154 4.199l1.06 1.06 1.999-1.997v6.293h1.5V3.26l2 2 1.06-1.061zM9.554 12.715v-1.5H3.258l2-2-1.06-1.06-3.069 3.068a1.05 1.05 0 0 0 0 1.484l3.07 3.068 1.06-1.06-2-2h6.295zM22.797 11.222L19.73 8.155l-1.06 1.06 2 2h-6.297v1.5h6.294l-1.998 2 1.061 1.06 3.067-3.068a1.052 1.052 0 0 0 0-1.485"})))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),a(n(1153)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h={LIGHT:0,DARK:1},m=function(e){switch(e){default:case h.LIGHT:return"common-container-dropdown-theme-light";case h.DARK:return"common-container-dropdown-theme-dark"}},v=function(e){(0,l.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={isOpen:!1,fixStyle:void 0,basicClass:"basic"},a.idForWrapper="dropdown-content-wrapper-".concat(Math.floor(1e4*Math.random()+1)),a.toggleDropdown=a.toggleDropdown.bind((0,s.default)(a)),a.closeDropdown=a.closeDropdown.bind((0,s.default)(a)),a.closeDropdownWithoutCallOnHide=a.closeDropdownWithoutCallOnHide.bind((0,s.default)(a)),a.initEvents(a.props),a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){if(this.props.forceFixStyle){var e={},t=document.getElementById(this.idForWrapper);if(this.idForWrapper&&t){var n=t.getBoundingClientRect();n.right>(window.innerWidth||document.documentElement.clientWidth)?e={right:"0px"}:n.left<0&&(e={left:"0px"})}this.setState({fixStyle:e,basicClass:"basic-v2"})}else this.setState({basicClass:"basic-v2"})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.initEvents(e)}},{key:"componentWillUnmount",value:function(){this.uninitEvents()}},{key:"render",value:function(){var e=this,t=this.props,n=t.trigger,a=t.theme,r=t.zIndex,i=t.title,o=t.innerStyle,s=t.classStyle,l=t.children,u=t.withoutHeader,c=Object.assign({},this.state.fixStyle,{zIndex:r},o),p=s?" ".concat(this.state.basicClass," ").concat(s):"".concat(this.state.basicClass," default");return d.default.createElement("div",{ref:function(t){e._containerRef=t},className:"common-container-dropdown ".concat(m(a))},d.default.createElement(f.default,{active:this.state.isOpen},d.default.createElement(f.DropdownTrigger,{onClick:this.toggleDropdown},n),d.default.createElement(f.DropdownContent,{className:p,style:c},d.default.createElement("div",{id:this.idForWrapper,className:"dropdown-content-wrapper-for-force-style"},!u&&d.default.createElement("div",{className:"dropdown-content-header".concat(void 0!==i?" dropdown-content-header-has-title":"")},d.default.createElement("div",{className:"dropdown-content-header-title"},i),d.default.createElement("button",{"data-automation-id":"settings-close-element",type:"button",className:"common-container-dropdown-close","aria-label":"Close",onClick:this.closeDropdown},"×")),d.default.createElement("div",{className:"dropdown-content-body"},l)))))}},{key:"toggleDropdown",value:function(){var e=this.props,t=e.disabled,n=e.onShow,a=e.onHide;if(!t){var r=!this.state.isOpen;this.setState({isOpen:r}),r?n&&n():a&&a()}}},{key:"initEvents",value:function(e){var t=this;e.autoClose?this._documentClickHandler||(this._documentClickHandler=function(e){t._containerRef&&!t._containerRef.contains(e.target)&&t.closeDropdown()},document.body.addEventListener("mousedown",this._documentClickHandler)):this.uninitEvents()}},{key:"uninitEvents",value:function(){this._documentClickHandler&&(document.body.removeEventListener("mousedown",this._documentClickHandler),this._documentClickHandler=void 0)}},{key:"closeDropdownWithoutCallOnHide",value:function(){this.setState({isOpen:!1})}},{key:"closeDropdown",value:function(){this.setState({isOpen:!1}),this.props.onHide&&this.props.onHide()}}]),n}(d.Component);t.default=v,v.THEME=h,v.defaultProps={zIndex:void 0,innerStyle:void 0,classStyle:void 0,onShow:void 0,onHide:void 0,children:void 0,trigger:void 0,title:void 0,theme:h.LIGHT,autoClose:!1,forceFixStyle:!1,disabled:!1,withoutHeader:!1}},function(e,t,n){},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("path",{d:"M.833.817c.478.498 1.489 1.63 1.489 1.63s.832.706-.062 2.606C1.627 6.395.654 8.281.654 9.419c0 2.249 2.813 1.799 3.458.835 1.945-1.991.983-6.674-.741-8.693C2.918 1.031 2.369.504 1.712.504c-.274 0-.567.092-.879.313z",id:"color-pick-path"})),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("path",{d:"M9.486 1.938l-7.973 8.299c-1.384 1.441-1.384 3.8 0 5.241l5.176 5.387a3.48 3.48 0 0 0 2.518 1.081 3.48 3.48 0 0 0 2.518-1.081l7.973-8.299L9.486 1.938zm.01 1.959l8.32 8.66-6.956 7.24a2.252 2.252 0 0 1-1.637.702 2.252 2.252 0 0 1-1.638-.702L2.54 14.545a2.447 2.447 0 0 1-.675-1.704c0-.646.24-1.251.674-1.703l6.957-7.241z",fill:"#313232",key:0}),a.createElement("g",{transform:"translate(18 9)",key:1},[a.createElement("mask",{id:"color-pick-mask",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#color-pick-path"})),a.createElement("path",{fill:"#333434",mask:"url(#color-pick-mask)",d:"M-4.346 16.046h14.534V-4.496H-4.346z",key:1})])])])}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M22,104H8c-4.4,0-8-3.6-8-8V8c0-4.4,3.6-8,8-8h63c4.4,0,8,3.6,8,8v14c0,1.1-0.9,2-2,2s-2-0.9-2-2V8c0-2.2-1.8-4-4-4H8\n\tC5.8,4,4,5.8,4,8v88c0,2.2,1.8,4,4,4h14c1.1,0,2,0.9,2,2S23.1,104,22,104z",key:0}),a.createElement("path",{d:"M101,134H38c-4.4,0-8-3.6-8-8V38c0-4.4,3.6-8,8-8h63c4.4,0,8,3.6,8,8v88C109,130.4,105.4,134,101,134z M38,34\n\tc-2.2,0-4,1.8-4,4v88c0,2.2,1.8,4,4,4h63c2.2,0,4-1.8,4-4V38c0-2.2-1.8-4-4-4H38z",key:1})])}r.defaultProps={version:"1.1",x:"0px",y:"0px",viewBox:"0 0 109 134",style:{enableBackground:"new 0 0 109 134"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(361))),h=r(n(453)),m=r(n(459)),v=n(115),g=a(n(851)),E=r(n(230)),_=r(n(853)),y=n(76);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var b=function(e){(0,u.default)(n,e);var t=T(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).checkForIndication=e.checkForIndication.bind((0,l.default)(e)),e.state={showTagger:!1,hideContent:{SKILLS:!0}},e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._skillsIconIndicationRef&&void 0!==this.props.hasTags&&this._skillsIconIndicationRef.manuallyToggleIndication(this.props.hasTags)}},{key:"render",value:function(){var e=this,t=this.props,a=t.schema,r=t.language,i=n.sortSchemes(a);return f.default.createElement("div",{className:"t2i-task-custom-bar"},i.map((function(t){var n,a=t.id;return n="SKILLS"===a?e.renderSkills():f.default.createElement(p.default,{forceFixStyle:!0,autoClose:!0,title:r[a],theme:p.default.THEME.LIGHT,trigger:e.renderIcon(a),zIndex:2},e.renderContent(a)),f.default.createElement("div",{key:a,className:"schema-".concat(a),"data-automation-id":"custom-bar-option-".concat(a)},n)})))}},{key:"renderContent",value:function(e){if(!this.state.hideContent[e]){var t=this.props,a=t.schema,r=t.onSettingsChange,i=t.language,o=n.sortSchemes(a).find((function(t){return t.id===e})).schemes;return f.default.createElement("div",{style:{paddingTop:"10px"}},o.map((function(e){return f.default.createElement(_.default,{key:e.id,language:i,schema:e,func:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.apply(void 0,[e.key,e.id].concat(n))}})})))}}},{key:"renderSkills",value:function(){var e=this,t=this.props,a=t.schema,r=t.language,i=t.serviceUrl,o=t.direction,s=this.state.showTagger,l=n.sortSchemes(a).find((function(e){return"SKILLS"===e.id})).schemes[0],u="".concat(i,"/EditorService/tags/v2/");return[f.default.createElement(m.default,{ref:function(t){e._skillsIconIndicationRef=t?t.getWrappedInstance():t},contentItemId:l.value,backendUrl:u,trigger:this.renderIcon("SKILLS"),onClick:function(){e.setState({showTagger:!s})}}),s&&f.default.createElement(h.default,{language:r,layout:o,contentID:l.value,ciContext:"TASK",backendUrl:u,onError:function(){console.warn("ERROR TAGGING..")},onSuccess:function(){e.checkForIndication(),e.setState({showTagger:!1})},hideDialog:function(){e.setState({showTagger:!1})}})]}},{key:"rerenderContent",value:function(e){var t=this;this.setState((function(t){return{hideContent:S(S({},t.hideContent),{},(0,i.default)({},e,!0))}}),(function(){t.setState((function(t){return{hideContent:S(S({},t.hideContent),{},(0,i.default)({},e,!1))}}))}))}},{key:"checkForIndication",value:function(){this._skillsIconIndicationRef&&this._skillsIconIndicationRef.checkForIndication()}},{key:"renderIcon",value:function(e){var t=this.props.language,n=g[e];return f.default.createElement(E.default,{IconImage:n,title:t.TASK_ICONS?t.TASK_ICONS[e]:e})}}],[{key:"sortSchemes",value:function(e){var t={GENERAL:[],FEEDBACK:[],SKILLS:[]};Object.keys(e).filter((function(t){return void 0!==e[t]})).forEach((function(n){e[n].forEach((function(e){var a=e.id;switch(e.type){case v.TAGGING:t.SKILLS.push(S(S({},e),{},{key:n,id:a}));break;case v.EMOJI:t.FEEDBACK.push(S(S({},e),{},{key:n,id:a}));break;default:t.GENERAL.push(S(S({},e),{},{key:n,id:a}))}}))}));var n=[];return["FEEDBACK","GENERAL","SKILLS"].forEach((function(e){0!==t[e].length&&n.push({id:e,schemes:t[e]})})),n}}]),n}(f.Component);var C=(0,y.InteractionHoc)((function(e){return{serviceUrl:e.environment.serviceUrl,direction:e.environment.api.appData.appConf.direction}}))(b);t.default=C},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.SKILLS=t.FEEDBACK=t.GENERAL=void 0;var r=a(n(480)),i=a(n(852)),o=a(n(458)),s=i.default;t.GENERAL=s;var l=r.default;t.FEEDBACK=l;var u=o.default;t.SKILLS=u},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M12.042 9.372a2.752 2.752 0 0 0-2.75 2.75 2.752 2.752 0 0 0 2.75 2.75 2.752 2.752 0 0 0 2.75-2.75 2.752 2.752 0 0 0-2.75-2.75zm0 7a4.254 4.254 0 0 1-4.25-4.25 4.254 4.254 0 0 1 4.25-4.25 4.254 4.254 0 0 1 4.25 4.25 4.254 4.254 0 0 1-4.25 4.25zm-1.78 5h3.56l.408-2.852.397-.163a6.894 6.894 0 0 0 1.525-.885l.337-.253 2.67 1.072 1.783-3.086-2.267-1.774.053-.423c.036-.288.064-.578.064-.886 0-.308-.028-.598-.064-.888l-.053-.422 2.268-1.773-1.784-3.087-2.676 1.075-.338-.26a6.445 6.445 0 0 0-1.518-.88l-.397-.164-.409-2.85h-3.559l-.408 2.85-.398.163a6.912 6.912 0 0 0-1.525.886l-.337.253-2.67-1.072L3.14 9.04l2.268 1.773-.053.422c-.036.29-.063.59-.063.888 0 .3.027.598.063.886l.053.423-2.268 1.774 1.784 3.086L7.6 17.217l.34.26c.486.374.982.662 1.517.88l.398.163.408 2.852zm3.78 1.5h-4a1.237 1.237 0 0 1-1.234-1.079l-.32-2.225a7.98 7.98 0 0 1-1.112-.645l-2.105.845c-.602.217-1.257-.026-1.548-.558l-1.99-3.443c-.307-.56-.174-1.228.306-1.605l1.782-1.394a7.839 7.839 0 0 1-.029-.646c0-.204.01-.415.03-.646L2.04 10.083a1.252 1.252 0 0 1-.305-1.612l1.997-3.455a1.24 1.24 0 0 1 1.533-.542l2.114.848a8.379 8.379 0 0 1 1.11-.647l.321-2.24c.073-.599.603-1.063 1.232-1.063h4c.628 0 1.158.464 1.233 1.08l.32 2.222c.383.183.755.4 1.113.647l2.105-.845c.598-.219 1.254.022 1.546.556l1.992 3.444c.304.56.172 1.228-.305 1.605l-1.784 1.395c.017.198.03.417.03.646 0 .23-.013.448-.03.646l1.781 1.393a1.25 1.25 0 0 1 .316 1.59l-2.008 3.475c-.288.532-.95.775-1.533.544l-2.114-.848c-.37.254-.737.468-1.109.646l-.322 2.241c-.073.6-.603 1.063-1.23 1.063z",fill:"#323232",fillRule:"evenodd"}))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),a(n(115))),f=n(67),p=r(n(152)),h=r(n(297)),m=r(n(293)),v=r(n(854)),g=a(n(131)),E=n(132);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=_(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.schema,n=e.func;return c.default.createElement("div",{className:"schema-section ".concat(t.extendedFeedback?"extended-feedback":"")},this.getSchemaAsHtml(t,n))}},{key:"getSchemaAsHtml",value:function(e,t){var a=this.props.language,r=[];switch(e.type){case d.SINGLE_SELECTION:if(2===Object.keys(e.values).length&&!e.isSelect){r=c.default.createElement("div",{className:"schema-multiple-choice"},c.default.createElement("div",{className:"schema-label"},e.label),Object.keys(e.values).map((function(a,r){return c.default.createElement("div",{key:r,className:"schema-multiple-choice-wrapper"},c.default.createElement(p.default,{id:"schema_".concat(r),name:e.name,onChange:function(e){n.handleSingleSelectionChange(t,e)},value:a,checked:e.currentValue===a},e.values[a]))})));break}r=c.default.createElement("div",{className:"schema-select-list"},c.default.createElement("div",{className:"schema-label ".concat(e.disabled?"disabled":"")},e.label),c.default.createElement(m.default,{onChange:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];n.handleSelectionChange.apply(n,[t].concat(a))},options:e.values,selected:e.currentValue,disabled:e.disabled}));break;case d.TOGGLE:r=c.default.createElement("div",{className:"schema-toggle"},c.default.createElement(h.default,{id:e.id,name:e.name,checked:e.currentValue,onChange:function(e){n.handleCheckSelection(t,e)},disabled:e.disabled,hint:e.hint},e.label));break;case d.MULTIPLE_SELECTION:case d.TEXT:break;case d.EMOJI:var i="",o="";switch(e.feedback){case f.WRONG:i=a.INSERT_WRONG_FEEDBACK,o="feedback-wrong";break;case f.PARTIAL:i=a.INSERT_PARTIAL_FEEDBACK,o="feedback-parcially_correct";break;default:i=a.INSERT_CORRECT_FEEDBACK,o="feedback-correct"}r=c.default.createElement("div",{className:"t2i-settings-feedback"},c.default.createElement("div",{className:"t2i-settings-feedback-wrapper"},c.default.createElement("span",{className:"t2i-settings-feedback-wrapper-icon ".concat(o)}),c.default.createElement("div",{className:"t2i-settings-feedback-wrapper-input"},n.renderEmojiInput(e.currentText,i,e.extendedFeedback,t))))}return r}}],[{key:"handleFunctionCall",value:function(e,t){e(t)}},{key:"handleSelectionChange",value:function(e,t){n.handleFunctionCall(e,t)}},{key:"handleRangeChanged",value:function(e,t){t.stopPropagation(),t.preventDefault();var a=t.target.value;n.handleFunctionCall(e,Number(a))}},{key:"handleBlur",value:function(e,t){var a=t.target.value;n.handleFunctionCall(e,a)}},{key:"handleFeedbackBlur",value:function(e,t){var a=t.html;n.handleFunctionCall(e,a)}},{key:"renderEmojiInput",value:function(e,t,a,r){return a?c.default.createElement("div",{className:"feedback-editor-text-area"},c.default.createElement(g.default,{defaultHtml:e,placeholder:t,onBlur:function(e){n.handleFeedbackBlur(r,e)},type:g.BOXAREA_RICH_MEDIA,toolbar:E.MINFORMATNOFONTS_WITH_UPLOAD_FILES,insertImageAsLink:!0})):c.default.createElement(v.default,{placeholder:t,value:e,onBlur:function(e){n.handleBlur(r,e)}})}},{key:"handleSingleSelectionChange",value:function(e,t){var a=t.target.value;n.handleFunctionCall(e,a)}},{key:"handleCheckSelection",value:function(e,t){var a=t.target.checked;n.handleFunctionCall(e,a)}}]),n}(c.Component);t.default=y},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(1154))),p=r(n(855)),h=r(n(463));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={openEmoji:!1},a.toggleEmojiPanel=a.toggleEmojiPanel.bind((0,o.default)(a)),a.handleBlur=a.handleBlur.bind((0,o.default)(a)),a.handleFocus=a.handleFocus.bind((0,o.default)(a)),a.closeEmojiPanel=a.closeEmojiPanel.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"handleFocus",value:function(){n.onFocusCallbacks.forEach((function(e){e()}))}},{key:"removeOnFocusCallback",value:function(e){var t=n.onFocusCallbacks.indexOf(e);-1!==t&&n.onFocusCallbacks.splice(t,1)}},{key:"addOnFocusCallback",value:function(e){n.onFocusCallbacks.push(e)}}]),(0,s.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){n.addOnFocusCallback(this.closeEmojiPanel)}},{key:"componentDidMount",value:function(){new f.default(this._emojiPanelContainerRef,{onClick:this.handleEmojiClick.bind(this)})}},{key:"componentWillUnmount",value:function(){n.removeOnFocusCallback(this.closeEmojiPanel)}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"t2k-emoji-input"},d.default.createElement("div",{className:"t2k-emoji-input-container"},d.default.createElement(h.default,{defaultHtml:this.props.value,className:"t2k-emoji-input-edit",ref:function(t){e._emojiInputContentEditableRef=t?t.getWrappedInstance():t},placeholder:this.props.placeholder,onBlur:this.handleBlur,onFocus:this.handleFocus}),d.default.createElement("i",{className:"t2k-emoji-input-icon",onClick:function(){e.toggleEmojiPanel()},"data-unittest-id":"emoji-input-icon"},d.default.createElement(p.default,null))),d.default.createElement("div",{className:"t2k-emoji-input-panel".concat(this.state.openEmoji?"":" hide"),"data-unittest-id":"emoji-input-panel"},d.default.createElement("div",{className:"t2k-emoji-input-panel-container",ref:function(t){e._emojiPanelContainerRef=t},"data-unittest-id":"emoji-input-panel-container"})))}},{key:"closeEmojiPanel",value:function(){this.toggleEmojiPanel(!1)}},{key:"toggleEmojiPanel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.openEmoji;this.setState({openEmoji:e})}},{key:"handleFocus",value:function(){n.removeOnFocusCallback(this.closeEmojiPanel),n.handleFocus(),n.addOnFocusCallback(this.closeEmojiPanel)}},{key:"handleEmojiClick",value:function(e){var t=document.createElement("img");t.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),t.setAttribute("class","ep-e"),t.setAttribute("data-index",e.index),this._emojiInputContentEditableRef.insertNodeOverSelection(t)}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur({target:{value:e.target.innerHTML}})}}]),n}(d.Component);t.default=v,v.onFocusCallbacks=[]},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("path",{d:"M23.99 4C12.94 4 4 12.95 4 24s8.94 20 19.99 20C35.04 44 44 35.05 44 24S35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16zm7-18c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm-14 0c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm7 13c4.66 0 8.61-2.91 10.21-7H13.79c1.6 4.09 5.55 7 10.21 7z"}))}r.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(36))),p=r(n(41)),h=r(n(857)),m=r(n(858));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.onDeleteTask,n=e.onRemoveFromSuggested,a=e.language,r=e.taskType,o=e.taskId,s=e.suggestedActionsStyle,l="suggestion-actions".concat(s);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:l,onMouseLeave:function(e){return e.preventDefault(),e.stopPropagation(),!1}},s?d.default.createElement("span",{className:"".concat(l,"-text")},a.MagicContentText):null,t&&d.default.createElement(f.default,{styleClass:"".concat(l,"-button dismiss"),type:f.default.TYPES.SECONDARY,icon:s?d.default.createElement(m.default,null):null,text:a.DISCARD,onClick:function(){var e;p.default.sendEvent(p.default.TITLES.INTERACT_WITH_MAGIC_INTERACTIONS,p.default.COMPONENTS.SIDE_DRAWER,(e={},(0,i.default)(e,p.default.PARAMS.USER_ACTION,"discard"),(0,i.default)(e,p.default.PARAMS.INTERACTION_TYPE,r.toLowerCase()),(0,i.default)(e,p.default.PARAMS.CONTENT_ID,o),e)),t()}}),n&&d.default.createElement(f.default,{styleClass:"".concat(l,"-button choose"),type:f.default.TYPES.PRIMARY,icon:s?d.default.createElement(h.default,null):null,text:a.KEEP,onClick:function(){var e;p.default.sendEvent(p.default.TITLES.INTERACT_WITH_MAGIC_INTERACTIONS,p.default.COMPONENTS.SIDE_DRAWER,(e={},(0,i.default)(e,p.default.PARAMS.USER_ACTION,"keep"),(0,i.default)(e,p.default.PARAMS.INTERACTION_TYPE,r.toLowerCase()),(0,i.default)(e,p.default.PARAMS.CONTENT_ID,o),e)),n()}})),d.default.createElement("div",{className:"".concat(l,"-background")}),d.default.createElement("div",{className:"".concat(l,"-bottom")}))}}]),n}(d.Component);t.default=g},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0},"Add"),a.createElement("desc",{key:1},"Created with Sketch."),a.createElement("g",{id:"Magic-Content",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"03_UC-MagicContent_difduf_01",transform:"translate(-692.000000, -718.000000)",fill:"#FFFFFF"},a.createElement("g",{id:"Magic-Content",transform:"translate(-756.000000, 0.000000)"},a.createElement("g",{id:"Magic-content-1",transform:"translate(951.000000, 100.000000)"},a.createElement("g",{id:"Discard-or-Keep",transform:"translate(309.000000, 607.000000)"},a.createElement("g",{id:"keep",transform:"translate(150.000000, 0.000000)"},a.createElement("g",{id:"Group",transform:"translate(38.000000, 9.000000)"},a.createElement("path",{d:"M7.5,2 C8.32842712,2 9,2.67157288 9,3.5 L9,8 L13.5,8 C14.3284271,8 15,8.67157288 15,9.5 C15,10.3284271 14.3284271,11 13.5,11 L9,11 L9,15.5 C9,16.3284271 8.32842712,17 7.5,17 C6.67157288,17 6,16.3284271 6,15.5 L6,11 L1.5,11 C0.671572875,11 1.01453063e-16,10.3284271 0,9.5 C-1.01453063e-16,8.67157288 0.671572875,8 1.5,8 L6,8 L6,3.5 C6,2.67157288 6.67157288,2 7.5,2 Z",id:"Add"}))))))))])}r.defaultProps={width:"15px",height:"15px",viewBox:"0 0 15 15",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("title",{key:0},"delete"),a.createElement("desc",{key:1},"Created with Sketch."),a.createElement("g",{id:"Magic-Content",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"03_UC-MagicContent_difduf_01",transform:"translate(-536.000000, -719.000000)",fill:"var(--primary-theme-color)"},a.createElement("g",{id:"Magic-Content",transform:"translate(-756.000000, 0.000000)"},a.createElement("g",{id:"Magic-content-1",transform:"translate(951.000000, 100.000000)"},a.createElement("g",{id:"Discard-or-Keep",transform:"translate(309.000000, 607.000000)"},a.createElement("g",{id:"discard"},a.createElement("g",{id:"Group"},a.createElement("g",{id:"Group-2",transform:"translate(27.000000, 7.000000)"},a.createElement("path",{d:"M11,4 C11.8284271,4 12.5,4.67157288 12.5,5.5 L12.5,10 L17,10 C17.8284271,10 18.5,10.6715729 18.5,11.5 C18.5,12.3284271 17.8284271,13 17,13 L12.5,13 L12.5,17.5 C12.5,18.3284271 11.8284271,19 11,19 C10.1715729,19 9.5,18.3284271 9.5,17.5 L9.5,13 L5,13 C4.17157288,13 3.5,12.3284271 3.5,11.5 C3.5,10.6715729 4.17157288,10 5,10 L9.5,10 L9.5,5.5 C9.5,4.67157288 10.1715729,4 11,4 Z",id:"delete",transform:"translate(11.000000, 11.500000) rotate(45.000000) translate(-11.000000, -11.500000) "})))))))))])}r.defaultProps={width:"12px",height:"13px",viewBox:"0 0 12 13",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(9)),u=a(n(3)),c=a(n(4)),d=a(n(12)),f=a(n(6)),p=a(n(8)),h=a(n(7)),m=r(n(0)),v=(a(n(2)),a(n(216))),g=a(n(11)),E=n(46),_=a(n(13)),y=a(n(41)),k=a(n(607)),S=a(n(481)),T=a(n(864));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var C=(0,E.observer)((s=o=function(e){(0,f.default)(n,e);var t=b(n);function n(e){var a;return(0,u.default)(this,n),(a=t.call(this,e)).state={isListVisible:e.isListVisible&&(a.isManualScoring()||a.isRandomized()),scoreLimit:100,errorMessage:"",isOneByOneQuestions:a.isOneByOneQuestions(),isQuestionsTimePerTask:a.isQuestionsTimePerTask()},a.onTaskScoreChanged=a.onTaskScoreChanged.bind((0,d.default)(a)),a.handleTaskClick=a.handleTaskClick.bind((0,d.default)(a)),a.handleManualScoringChange=a.handleManualScoringChange.bind((0,d.default)(a)),a.handleOneByOneQuestionsSettingChange=a.handleOneByOneQuestionsSettingChange.bind((0,d.default)(a)),a.closeSideDialog=a.closeSideDialog.bind((0,d.default)(a)),a.handleLimitFocusOut=a.handleLimitFocusOut.bind((0,d.default)(a)),a.handleSubmitAssessmentClicked=a.handleSubmitAssessmentClicked.bind((0,d.default)(a)),a.togglePanelVisibility=a.togglePanelVisibility.bind((0,d.default)(a)),a.handleRandomizationSettingChange=a.handleRandomizationSettingChange.bind((0,d.default)(a)),a.toggleCustomScoringOrRandomization=a.toggleCustomScoringOrRandomization.bind((0,d.default)(a)),a.handleBlockingQuestionTimePerTaskSettingChange=a.handleBlockingQuestionTimePerTaskSettingChange.bind((0,d.default)(a)),a.handleTimePerTaskChange=a.handleTimePerTaskChange.bind((0,d.default)(a)),a}return(0,c.default)(n,[{key:"render",value:function(){var e=(0,g.default)("task-list-panel",{"task-list-panel--ltr":this.props.ltr,"task-list-panel--rtl":!this.props.ltr});return m.default.createElement("div",{className:e},this.renderDialog(),this.renderControl())}},{key:"renderDialog",value:function(){var e=this.props,t=e.store,n=e.isPlayer?t.getUnansweredQuestionsIds():t.getCheckableTasks();return m.default.createElement(T.default,{isVisible:this.state.isListVisible,isLtr:this.props.ltr,onHideButtonClick:this.closeSideDialog},this.renderHeader(),this.renderTaskList(n),this.renderFooter(n))}},{key:"renderTaskList",value:function(e){var t=this,n=this.props,a=n.store,r=n.ltr,i=n.isPlayer,o=n.language,s=n.taskTypeStrings,l=n.taskGroupId,u=n.taskGroupVersion,c=n.getRandomizedModel,d=n.setRandomizedModel,f=n.numberOfTasks,p=n.tagDateChanged,h=i?a.getTasksModel():a.tasks;return i||this.isEditorActive()?m.default.createElement(S.default,{ltr:r,taskIds:e,tasksModel:h,handleTaskClick:function(e){t.handleTaskClick(e)},isPlayer:i,onTaskScoreChanged:function(e,n){t.onTaskScoreChanged(e,n)},language:o,taskTypeStrings:s,isManual:this.isManualScoring(),isRandomized:this.isRandomized(),taskGroupId:l,taskGroupVersion:u,getRandomizedModel:c,setRandomizedModel:d,numberOfTasks:f,tagDateChanged:p,store:a}):null}},{key:"renderHeader",value:function(){return this.props.isPlayer?null:m.default.createElement("div",{className:"task-list-panel__header"},this.renderBlockingQuestionControls(),this.renderHeaderControls(),this.renderScoreSettings(),this.renderErrorsSection())}},{key:"renderBlockingQuestionControls",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"task-list-panel__toggle-blocking-question-button-area"},m.default.createElement("div",{className:"task-list-panel__custom-scoring-toggle-row"},m.default.createElement("div",null,e.CONTROL.ONE_BY_ONE_QUESTIONS),m.default.createElement(v.default,{onUserChangeState:this.handleOneByOneQuestionsSettingChange,isEnabled:this.isOneByOneQuestions()})),this.renderBlockingQuestionTimePerTaskControls())}},{key:"renderBlockingQuestionTimePerTaskControls",value:function(){var e=this.props.language;return this.state.isOneByOneQuestions?m.default.createElement("div",null,m.default.createElement("div",{className:"task-list-panel__custom-scoring-toggle-row"},m.default.createElement("div",null,e.CONTROL.TIME_LIMITED_QUESTIONS),m.default.createElement(v.default,{onUserChangeState:this.handleBlockingQuestionTimePerTaskSettingChange,isEnabled:this.isQuestionsTimePerTask()})),this.renderBlockingQuestionSetTimePerTaskControls()):null}},{key:"renderBlockingQuestionSetTimePerTaskControls",value:function(){var e=this.props,t=e.language,n=e.store;return this.state.isQuestionsTimePerTask?(n.getTaskMustCompleteQuestionDefaultTime()||n.setTaskMustCompleteQuestionInTime(180),m.default.createElement("div",{className:"task-list-panel__custom-scoring-row set-time-per-task-section"},m.default.createElement("div",null,t.CONTROL.TIME_LIMITATION_PER_QUESTION),m.default.createElement(k.default,{onChange:this.handleTimePerTaskChange,config:{format:"mm:ss",allowClear:!1},maxTimeInSeconds:600,startTimeInSeconds:n.getTaskMustCompleteQuestionDefaultTime(),styleClass:"task-list-time-per-task"}))):null}},{key:"renderHeaderControls",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"task-list-panel__toggle-button-area"},_.default.isFeatureEnabled("customPoints")&&m.default.createElement("div",{className:"task-list-panel__custom-scoring-toggle-row"},m.default.createElement("div",null,e.CONTROL.ENABLE_SCORING),m.default.createElement(v.default,{onUserChangeState:this.handleManualScoringChange,isEnabled:this.isManualScoring()})),_.default.isFeatureEnabled("createRandomizedCi")&&m.default.createElement("div",{className:"task-list-panel__randomization-toggle-row"},m.default.createElement("div",null,e.CONTROL.ENABLE_RANDOM),m.default.createElement(v.default,{onUserChangeState:this.handleRandomizationSettingChange,isEnabled:this.isRandomized()})))}},{key:"renderScoreSettings",value:function(){var e=this.props.language;return this.isManualScoring()?m.default.createElement("div",{className:"task-list-panel__score-settings"},m.default.createElement("div",{className:"task-list-panel__total-score-section"},m.default.createElement("div",{className:"task-list-panel__total-text"},e.HEADER.TOTAL_SCORE),m.default.createElement("div",{className:"task-list-panel__total-score-input-wrapper"},this.getTotalScore())),m.default.createElement("div",{className:"task-list-panel__limit-section"},m.default.createElement("div",{className:"task-list-panel__limit-text"},e.HEADER.LIMIT),m.default.createElement("div",{className:"task-list-panel__limit-input-wrapper"},m.default.createElement("input",{className:"styled-number-input",type:"number",defaultValue:this.getScoreLimit(),onBlur:this.handleLimitFocusOut,onFocus:function(e){e.target.select()},onMouseUp:function(){return!1}})))):null}},{key:"renderErrorsSection",value:function(){return this.isEditorActive()?m.default.createElement("div",{className:"task-list-panel__error-area"},this.state.errorMessage):null}},{key:"renderFooter",value:function(e){var t=this.props,n=t.isPlayer,a=t.language;if(!n)return null;var r=e.length>0?a.BACK_SUBMIT:a.SUBMIT;return m.default.createElement("div",{className:"task-list-panel__footer"},m.default.createElement("span",{className:"task-list-panel__footer-text",onClick:this.handleSubmitAssessmentClicked},r))}},{key:"renderControl",value:function(){var e=this.props,t=e.isPlayer,n=e.centeredControl;return t?n?this.renderPlayerControlMobile():this.renderPlayerControl():this.renderEditorControl()}},{key:"renderEditorControl",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"task-list-panel__control",onClick:this.toggleCustomScoringOrRandomization},m.default.createElement("div",{className:"task-list-panel__control-text-editor"},this.renderControlButton(),m.default.createElement("span",null,e.CONTROL.ASSESSMENT_CONFIGURATION)))}},{key:"renderPlayerControl",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"task-list-panel__control",onClick:this.togglePanelVisibility},m.default.createElement("div",{className:"task-list-panel__control-text-player"},this.renderControlButton(),m.default.createElement("span",null,e.UNANSWERED_QUESTIONS)))}},{key:"renderPlayerControlMobile",value:function(){var e=this.props.language;return m.default.createElement("div",{className:"mobile-task-list-panel-control",onClick:this.togglePanelVisibility},m.default.createElement("div",{className:"mobile-panel-control-icon-wrapper"},this.renderControlButton()),m.default.createElement("span",{className:"mobile-panel-control-text"},e.UNANSWERED_QUESTIONS))}},{key:"renderControlButton",value:function(){var e=this.props.centeredControl,t=(0,g.default)("task-list-panel__control-button",{"side-control":!e}),n=(0,g.default)("icon--drop-down","task-list-panel__control-button-icon",{"task-list-panel__control-button-icon--up":!this.state.isListVisible,"task-list-panel__control-button-icon--down":this.state.isListVisible,"mobile-panel-control-icon":e});return m.default.createElement("div",{className:t},m.default.createElement("div",{className:n}))}},{key:"onTaskScoreChanged",value:function(e,t){var n=this.props,a=n.store,r=n.language,i=e.target.valueAsNumber,o=a.tasks[t].maxPoints;if(i!==o){if(i<0)return this.setErrorMessage(r.ERRORS.NON_POSITIVE),void(e.target.value=o);if(i%1!=0)return this.setErrorMessage(r.ERRORS.NON_INTEGER_VALUE),void(e.target.value=o);var s=this.getScoreLimit();if(this.getTotalScore()-o+i>s)return this.setErrorMessage(r.ERRORS.TOTAL_OVER_LIMIT),void(e.target.value=o);a.tasks[t].setMaxPoints(i),this.clearErrorMessage()}}},{key:"handleTaskClick",value:function(e){var t=this.props,n=t.handleTaskClick,a=t.closePanelOnItemClick;n&&n(e),a&&this.togglePanelVisibility()}},{key:"handleOneByOneQuestionsSettingChange",value:function(e){var t;this.props.store.setIsMustCompleteQuestions(e),this.setState({isOneByOneQuestions:e,isQuestionsTimePerTask:!1});var n=e?"turn_on":"turn_off";y.default.sendEvent(y.default.TITLES.INTERACT_WITH_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(t={},(0,l.default)(t,y.default.PARAMS.USER_ACTION,n),(0,l.default)(t,y.default.PARAMS.STATUS,"one_by_one"),t))}},{key:"handleBlockingQuestionTimePerTaskSettingChange",value:function(e){var t;this.props.store.setIsQuestionsTimePerTask(e),this.setState({isQuestionsTimePerTask:e});var n=e?"turn_on":"turn_off";y.default.sendEvent(y.default.TITLES.INTERACT_WITH_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(t={},(0,l.default)(t,y.default.PARAMS.USER_ACTION,n),(0,l.default)(t,y.default.PARAMS.STATUS,"time_limited_questions"),t))}},{key:"handleTimePerTaskChange",value:function(e){var t,n=this.props.store,a=k.default.translateMomentToSeconds(e);n.setTaskMustCompleteQuestionInTime(a),y.default.sendEvent(y.default.TITLES.INTERACT_WITH_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(t={},(0,l.default)(t,y.default.PARAMS.VALUE,a),(0,l.default)(t,y.default.PARAMS.STATUS,"time_limited_questions_time_value"),t))}},{key:"handleManualScoringChange",value:function(e){var t,n=this.props.store;n.setTaskGroupProperty("isCustomPoints",e),e&&n.setTaskGroupProperty("isRandomized",!1),this.clearErrorMessage();var a=e?"turn_on":"turn_off";y.default.sendEvent(y.default.TITLES.INTERACT_WITH_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(t={},(0,l.default)(t,y.default.PARAMS.USER_ACTION,a),(0,l.default)(t,y.default.PARAMS.OPTION,"enable_manual_scoring"),t))}},{key:"handleRandomizationSettingChange",value:function(e){var t,n=this.props.store;n.setTaskGroupProperty("isRandomized",e),e&&n.setTaskGroupProperty("isCustomPoints",!1),this.clearErrorMessage();var a=e?"turn_on":"turn_off";y.default.sendEvent(y.default.TITLES.INTERACT_WITH_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(t={},(0,l.default)(t,y.default.PARAMS.USER_ACTION,a),(0,l.default)(t,y.default.PARAMS.OPTION,"randomize"),t))}},{key:"togglePanelVisibility",value:function(){this.setState((function(e){return{isListVisible:!e.isListVisible}}))}},{key:"toggleCustomScoringOrRandomization",value:function(){var e=this.state.isListVisible?"close":"open";y.default.sendEvent(y.default.TITLES.OPEN_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(0,l.default)({},y.default.PARAMS.USER_ACTION,e)),this.togglePanelVisibility()}},{key:"handleLimitFocusOut",value:function(e){var t=this.props,n=t.store,a=t.language,r=e.target.valueAsNumber,i=n.taskGroup.properties.maxPoints;if(r!==i)if(r<1)this.setErrorMessage(a.ERRORS.NON_POSITIVE),e.target.value=i;else if(r%1!=0)this.setErrorMessage(a.ERRORS.NON_INTEGER_VALUE),e.target.value=i;else if(this.getTotalScore()>r)this.setErrorMessage(a.ERRORS.LIMIT_OVER_TOTAL),e.target.value=i;else{var o;n.setTaskGroupProperty("maxPoints",r),this.clearErrorMessage(),y.default.sendEvent(y.default.TITLES.ENTER_VALUES_SCORING_PANEL,y.default.COMPONENTS.ASSESSMENT,(o={},(0,l.default)(o,y.default.PARAMS.TYPE,"upper_limit"),(0,l.default)(o,y.default.PARAMS.VALUE,r),o))}}},{key:"closeSideDialog",value:function(){this.setState({isListVisible:!1})}},{key:"setErrorMessage",value:function(e){this.setState({errorMessage:e})}},{key:"clearErrorMessage",value:function(){this.setErrorMessage("")}},{key:"getTotalScore",value:function(){var e=this.props.store.tasks,t=0;return Object.keys(e).forEach((function(n){t+=e[n].maxPoints})),t}},{key:"getScoreLimit",value:function(){return this.props.store.taskGroup.properties.maxPoints}},{key:"isManualScoring",value:function(){var e=this.props.store;return!e.taskGroup||!e.taskGroup.getIsCustomPoints||e.taskGroup.getIsCustomPoints()}},{key:"isOneByOneQuestions",value:function(){var e=this.props.store;return!(!e.taskGroup||!e.taskGroup.getIsMustCompleteQuestions)&&e.taskGroup.getIsMustCompleteQuestions()}},{key:"isQuestionsTimePerTask",value:function(){var e=this.props.store;return!(!e.taskGroup||!e.taskGroup.getIsQuestionsTimePerTask)&&e.taskGroup.getIsQuestionsTimePerTask()}},{key:"isRandomized",value:function(){var e=this.props.store;return!(!e.taskGroup||!e.taskGroup.getIsRandomized)&&e.taskGroup.getIsRandomized()}},{key:"isEditorActive",value:function(){return this.isManualScoring()||this.isRandomized()}},{key:"handleSubmitAssessmentClicked",value:function(){var e=this.props.handleSubmitAssessmentClicked;e&&e()}}]),n}(m.Component),o.defaultProps={ltr:!0,isManualScoring:!0,isListVisible:!0,closePanelOnItemClick:!1,centeredControl:!1},i=s))||i;t.default=C},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TIME_PICKER_THEME=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(12)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=r(n(1155)),h=(r(n(2)),r(n(50))),m=r(n(11)),v=r(n(18));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}n(1161);var E={REGULAR:"regular",CLASSIC:"classic"};t.TIME_PICKER_THEME=E;var _={hideDisabledOptions:!0},y=function(e){(0,u.default)(n,e);var t=g(n);function n(e){var a,r;return(0,o.default)(this,n),(a=t.call(this,e)).setTimeFormatAndRestrictions(),e.startTimeInSeconds?r=n.translateSecondsToMoment(e.startTimeInSeconds):e.config&&e.config.defaultValue&&(r=e.config.defaultValue),a.state={selectedTime:{momentTime:void 0,timeString:void 0},lastSelectedTime:{momentTime:r,timeString:void 0}},a.handleTimeChange=a.handleTimeChange.bind((0,s.default)(a)),a.handleOpenChange=a.handleOpenChange.bind((0,s.default)(a)),a}return(0,l.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=null===e.startTimeInSeconds?null:n.translateSecondsToMoment(e.startTimeInSeconds);t!==this.state.selectedTime.momentTime&&this.setState({selectedTime:{momentTime:t}})}}],[{key:"translateSecondsToMoment",value:function(e){var t=e%60,n=e-t,a=(n/=60)%60;n-=a;var r=n/=60,i=this.timeConfigurations&&this.timeConfigurations.format?this.timeConfigurations.format:"HH:mm:ss";return(0,h.default)("".concat(r,":").concat(a,":").concat(t),i)}},{key:"translateMomentToSeconds",value:function(e){var t="".concat(e.hours(),":").concat(e.minutes(),":").concat(e.seconds());return h.default.duration(t).asSeconds()}},{key:"createArrayFrom",value:function(e,t){for(var n=[],a=e;a<t;a++)n.push(a);return n}}]),(0,l.default)(n,[{key:"render",value:function(){var e=this.getConfigurations(),t=this.props,a=t.maxTimeInSeconds,r=t.config,o=this.state,s=o.selectedTime,l=o.lastSelectedTime,u=s.momentTime||l.momentTime,c=u&&n.translateMomentToSeconds(u)>a,d=(0,m.default)({"out-of-bounds":!!c,"theme-classic":this.props.theme===E.CLASSIC,disabled:r.disabled});return f.default.createElement(p.default,(0,i.default)({className:d},e))}},{key:"setTimeFormatAndRestrictions",value:function(){var e=this.props,t=e.maxTimeInSeconds,n=e.config;if(t)this.setTimeConfigurationsFromMaxTime(t);else{var a=n.format?n.format:"HH:mm:ss";this.timeConfigurations={format:a}}}},{key:"setTimeConfigurationsFromMaxTime",value:function(){var e=this.props.maxTimeInSeconds,t={},a=n.translateSecondsToMoment(e),r={second:a.seconds(),minute:a.minutes(),hour:a.hours()},i="mm:ss";t.disabledSeconds=function(e,t){var a=[];return(!r.minute&&!r.hour||e===r.hour&&t===r.minute)&&(a=n.createArrayFrom(r.second+1,60)),a},t.disabledMinutes=function(){return n.createArrayFrom(1,60)},(r.minute||r.hour)&&(i="mm:ss",t.disabledMinutes=function(e){var t=[];return(!r.hour||e===r.hour)&&(t=n.createArrayFrom(r.minute+1,60)),t}),r.hour&&(i="HH:mm:ss",t.disabledHours=function(){return n.createArrayFrom(r.hour+1,24)}),t.format=i,t.timeLimits=r,this.timeConfigurations=t}},{key:"getConfigurations",value:function(){var e=this.props,t=e.config,n=e.styleClass,a=e.theme,r={},i=void 0!==this.state.selectedTime.momentTime?{value:this.state.selectedTime.momentTime}:{};return Object.assign(r,_,t,this.getCallbacks(),this.getInitialTimeValue(),this.timeConfigurations,i,n?{className:n}:{},{placeholder:a===E.CLASSIC?v.default.translate("common.SelectTime"):""}),r}},{key:"getInitialTimeValue",value:function(){var e=this.props,t=e.startTimeInSeconds,a=e.config,r=e.theme;return{defaultValue:"number"==typeof t?n.translateSecondsToMoment(t):a.defaultValue?a.defaultValue:r===E.CLASSIC?null:(0,h.default)("00:00:00","HH:mm:ss"),defaultOpenValue:(0,h.default)("00:00:00","HH:mm:ss")}}},{key:"handleTimeChange",value:function(e,t){this.setState({selectedTime:{momentTime:e,timeString:t}})}},{key:"handleOpenChange",value:function(e){var t=this,n=this.props.config.onOpenChange;"function"==typeof n&&n(e),e||(this.state.lastSelectedTime.timeString||this.state.selectedTime.timeString)&&this.state.lastSelectedTime.timeString!==this.state.selectedTime.timeString&&(this.isSelectedTimeValid()?this.setState({lastSelectedTime:{momentTime:this.state.selectedTime.momentTime,timeString:this.state.selectedTime.timeString}},(function(){t.props.onChange(t.state.selectedTime.momentTime,t.state.selectedTime.timeString)})):this.setState({selectedTime:{momentTime:this.state.lastSelectedTime.momentTime,timeString:this.state.lastSelectedTime.timeString}}))}},{key:"getCallbacks",value:function(){return{onChange:this.handleTimeChange,onOpenChange:this.handleOpenChange}}},{key:"isSelectedTimeValid",value:function(){var e=this.props,t=e.maxTimeInSeconds,n=e.minTimeInSeconds,a="number"==typeof n;if("number"==typeof t){var r=this.timeConfigurations.timeLimits,i=this.state.selectedTime.momentTime,o=i.hours(),s=i.minutes(),l=i.seconds(),u=r.hour,c=r.minute,d=r.second;if(o>u)return!1;if(o===u&&s>c)return!1;if(o===u&&s===c&&l>d)return!1}if(a){var f=this.state.selectedTime.momentTime;if(3600*f.hours()+60*f.minutes()+f.seconds()<n)return!1}return!0}}]),n}(f.Component);y.defaultProps={config:{},onChange:function(){},startTimeInSeconds:void 0,maxTimeInSeconds:void 0,minTimeInSeconds:void 0,styleClass:"",theme:E.REGULAR};var k=y;t.default=k},,,function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=r(n(37)).default.isMobile,m=function(e){(0,l.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).hidePanel=a.hidePanel.bind((0,s.default)(a)),a.state={animate:e.isVisible},a}return(0,o.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.isVisible===this.props.isVisible||this.state.animate||this.setState({animate:!0})}},{key:"render",value:function(){var e=this.state.animate,t=(0,f.default)("side-dialog",{"side-dialog--collapsed":!this.props.isVisible,"side-dialog--expanded":this.props.isVisible,"side-dialog--mobile":h,"side-dialog--no-animation":!e});return d.default.createElement("div",{className:t},this._renderPanelButton(),this._renderPanelContent())}},{key:"_renderPanelButton",value:function(){var e=(0,f.default)("side-dialog__close-button-wrapper",{"side-dialog__close-button-wrapper--ltr":this.props.isLtr,"side-dialog__close-button-wrapper--rtl":!this.props.isLtr,"side-dialog__close-button-wrapper--collapsed":!this.props.isVisible,"side-dialog__close-button-wrapper--expanded":this.props.isVisible});return d.default.createElement("div",{className:e},d.default.createElement("div",{className:"side-dialog__close-button",onClick:this.hidePanel},d.default.createElement("span",{className:"side-dialog__close-button-icon icon--drop-down"})))}},{key:"_renderPanelContent",value:function(){return d.default.createElement("div",{className:"side-dialog__content-wrapper"},this.props.children)}},{key:"hidePanel",value:function(){this.props.onHideButtonClick()}}]),n}(d.Component);t.default=m,m.defaultProps={isVisible:!0,onHideButtonClick:function(){},isLtr:!0}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=(r(n(63)),r(n(3))),s=r(n(4)),l=r(n(176)),u=r(n(18)),c=r(n(866)),d=r(n(867)),f=r(n(868)),p=a(n(869)),h=a(n(870)),m=r(n(397)),v=r(n(299)),g=a(n(871)),E=function(){function e(t,n){(0,o.default)(this,e),this._api=t,this._appData=t.appData,this._params=n;var a=this._getRestParams();this._loggerManager=new m.default(a,this._appData),this._registeredErrorCallbacks=[]}return(0,s.default)(e,null,[{key:"getFnArgsAndCallback",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t,r=a.pop();return{fnArgs:a,cb:r}}}]),(0,s.default)(e,[{key:"registerToError",value:function(e){return this._registeredErrorCallbacks.push(e),this.unregisterToError.bind(this,e)}},{key:"unregisterToError",value:function(e){var t=this._registeredErrorCallbacks.indexOf(e);this._registeredErrorCallbacks.splice(t,1)}},{key:"errorMiddleware",value:function(e){return this._registeredErrorCallbacks.forEach((function(t){return t(e)})),Promise.reject(e)}},{key:"getLanguage",value:function(e){return u.default.isEmpty()?u.default.set(void 0,"".concat(this.serviceUrl,"/Interactions/dictionary"),{locale:e,appName:"interactions"},{ignoreXSS:!0}).then((function(){return u.default.getNestedJSON()})):Promise.resolve(u.default.getNestedJSON())}},{key:"uploadFile",value:function(){var t=this,n=e.getFnArgsAndCallback.apply(e,arguments),a=n.fnArgs,r=n.cb;return this.loggerManager.info({message:"interactions uploadFile invoked"}),l.default.storeFile.apply(l.default,[this._getRestParams()].concat((0,i.default)(a),[function(e){e&&(t.loggerManager.error({message:"failed to store file due to ".concat(e)}),t.errorMiddleware(e));for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];r.apply(void 0,[e].concat(a))}]))}},{key:"getIsCiResultsHidden",value:function(){var t=e.getFnArgsAndCallback.apply(e,arguments),n=t.fnArgs,a=t.cb;(0,v.default)(this._getIsCiResultsHidden.apply(this,(0,i.default)(n)),a)}},{key:"_getIsCiResultsHidden",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.default.apply(void 0,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"getScoreForStudent",value:function(){var t=e.getFnArgsAndCallback.apply(e,arguments),n=t.fnArgs,a=t.cb;(0,v.default)(this._getScoreForStudent.apply(this,(0,i.default)(n)),a)}},{key:"_getScoreForStudent",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.default.apply(void 0,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"getTaskVotes",value:function(){var t=e.getFnArgsAndCallback.apply(e,arguments),n=t.fnArgs,a=t.cb;(0,v.default)(this._getTaskVotes.apply(this,(0,i.default)(n)),a)}},{key:"_getTaskVotes",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.default.apply(void 0,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"getTaskGroupEditorModelData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.getTaskGroupById.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"saveTaskGroupEditorModelData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.saveModel.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"getTaskGroupPlayerModelData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.getTaskGroupWithStates.apply(h,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"saveTaskGroupPlayerModelData",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.saveUserState.apply(h,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"duplicateTaskGroup",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.duplicateTaskGroup.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"deleteTaskGroup",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.deleteTaskGroup.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"createTaskGroupVersion",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.createNewTGVersion.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"duplicateTags",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.duplicateTags.apply(p,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"resetCI",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.resetTask.apply(h,[this._getRestParams()].concat(t)).then(void 0,this.errorMiddleware.bind(this))}},{key:"getRandomizedModel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.getRandomizedModel.apply(g,[this._getRestParams()].concat(t))}},{key:"setRandomizedModel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.setRandomizedModel.apply(g,[this._getRestParams()].concat(t))}},{key:"flagInteraction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.flagInteraction.apply(p,[this._getRestParams()].concat(t))}},{key:"verifyPassword",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.verifyPassword.apply(h,[this._getRestParams()].concat(t))}},{key:"_getRestParams",value:function(){return{serviceUrl:this.serviceUrl,accessToken:this.accessToken,serviceHeaders:this.serviceHeaders}}},{key:"api",get:function(){return this._api}},{key:"serviceUrl",get:function(){return this._params.serviceUrl}},{key:"accessToken",get:function(){return this._params.authenticationToken}},{key:"serviceHeaders",get:function(){return this._params.serviceHeaders}},{key:"xapiContext",get:function(){return this._params.xapiContext}},{key:"loggerManager",get:function(){return this._loggerManager}}]),e}();t.default=E},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(28)),i=n(114),o=r.default.Instance;t.default=function(e,t,n){var a=e.serviceUrl;return o.get("".concat(a).concat(i.GET_IS_CI_RESULTS_HIDDEN),{},{params:{channelId:"".concat(t),contentId:"".concat(n)}})}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(28)),i=n(114),o=r.default.Instance;t.default=function(e,t,n,a,r){var s=e.serviceUrl;return o.get("".concat(s).concat(i.SCORE_PATH),{},{params:{tgids:"".concat(t,":").concat(n),userId:a,ciId:r}})}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(28)),o=n(114);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=i.default.Instance;t.default=function(e,t,n,a){var r=e.serviceUrl;return u.get("".concat(r).concat(o.ANSWERS_PATH),{},{params:l({taskId:t,taskVersion:n},a)})}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.saveModel=function(e,t){var n=e.serviceUrl+i.PATH+i.MODEL_PATH;return o.post(n,{},t)},t.getTaskGroupById=function(e,t,n,a,r){var s=e.serviceUrl+i.PATH+i.MODEL_PATH,l={};a&&(l.params={channelId:a});r&&(l.params=l.params||{},l.params.isPreview=r);return o.get("".concat(s,"/:taskGroupId/version/:version"),{taskGroupId:t,version:n},l)},t.duplicateTaskGroup=function(e,t,n){var a=e.serviceUrl+i.PATH+i.MODEL_PATH;return o.post("".concat(a,"/:id/version/:version/clone"),{id:t,version:n})},t.createNewTGVersion=function(e,t,n){var a=e.serviceUrl+i.PATH+i.MODEL_PATH;return o.post("".concat(a,"/:taskGroupId/version/:version/newVersion"),{taskGroupId:t,version:n})},t.deleteTaskGroupById=function(e,t,n){var a=e.serviceUrl+i.PATH+i.MODEL_PATH;o.remove("".concat(a,"/:id/version/:version"),{id:t,version:n})},t.duplicateTags=function(e,t,n){var a=e.serviceUrl+i.DUPLICATE_TAGS;return o.put("".concat(a),void 0,void 0,{params:{sourceContentEntityId:t,targetContentEntityId:n,targetContentType:i.CONTENT_TYPE_TASK}})},t.flagInteraction=function(e,t){var n=e.serviceUrl;return o.post("".concat(n).concat(i.FLAG_INTERACTION),{},t)};var r=a(n(28)),i=n(114),o=r.default.Instance},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.saveUserState=function(e,t){var n=e.serviceUrl+i.PATH+i.USER_STATE_POST_PATH;return o.post(n,{},t,{recover:!0})},t.getTaskGroupWithStates=function(e,t,n,a,r){var s=e.serviceUrl+i.PATH+i.USER_STATE_GET_PATH;return o.get("".concat(s,"/taskGroups/:taskGroupId/version/:version"),{taskGroupId:t,version:n},{params:{userId:a,channelId:r}})},t.resetTask=function(e,t,n,a,r){var s=e.serviceUrl+i.RESET_CI;return o.remove(s,{},{params:{ciId:n,userId:t,channelId:r,ciVer:a}})},t.verifyPassword=function(e,t){var n=e.serviceUrl;return o.post(n+i.VERIFY_PASSWORD,{},{password:t})};var r=a(n(28)),i=n(114),o=r.default.Instance},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomizedModel=function(e,t,n){var a=e.serviceUrl;return o.get("".concat(a).concat(i.GET_RANDOMIZED_TAGS),{taskGroupId:t,taskGroupVersion:n})},t.setRandomizedModel=function(e,t){var n=e.serviceUrl;return o.post("".concat(n).concat(i.SET_RANDOMIZED_TAGS),{},t)};var r=a(n(28)),i=n(114),o=r.default.Instance},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(43)),i=a(n(3)),o=a(n(4)),s=a(n(231)),l=a(n(874)),u=a(n(195)),c=a(n(484)),d=function(){function e(t,n,a,r,o,l,d,f,p,h,m,v,g){(0,i.default)(this,e),this._taskGroupId=t,this._environment=a,this._dispatcherManager=r;var E=e.extractModelOptions(o);this._defaultSettings=e.extractDefaultSettings(o),this.modelStore=new u.default,this.serviceStore=new c.default,this._taskGroupEditorModel=new s.default(t,n,a,E,this.modelStore,l,d,f,p,this.serviceStore,g,o.reducedEditorCapabilitiesV2),this._taskGroupServerData=n,this.externalControls=h,this.disableDragOrdering=m,this.hideTaskGroupTitle=v,this.reducedEditorCapabilitiesV2=o.reducedEditorCapabilitiesV2}return(0,o.default)(e,null,[{key:"extractModelOptions",value:function(e){var t={};if(e){var n=e.isAutoSave,a=e.removeSuggestedTaskOnKeep;void 0!==n&&(t.isAutoSave=n),void 0!==a&&(t.removeSuggestedTaskOnKeep=a)}return t}},{key:"extractDefaultSettings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.defaultSettings||{}}}]),(0,o.default)(e,[{key:"mount",value:function(e,t){var n=this,a=e.domElement,r=e.defaultViewOptions;if(this._viewData)this._ensureSafeRemount().then((function(){n._viewData=null,n.mount({domElement:a,defaultViewOptions:r},t)})).catch(t);else{this._viewData={isMounting:!0};var i=this._createTaskGroupEditorView(a,r);l.default.mount(i,(function(e,a){n._viewData.view=i,n._viewData.isMounting=!1,e?t(e):(n._viewData.onChange=a,t(void 0,i))}))}}},{key:"createNewVersion",value:function(e){this._taskGroupEditorModel.createNewVersion(this._buildExternalModelActionCallback(e))}},{key:"setVersion",value:function(e,t){this._taskGroupEditorModel.setVersion(e,this._buildExternalModelActionCallback(t))}},{key:"lockSaveWhenPublish",value:function(){this._taskGroupEditorModel.lockSaveWhenPublish()}},{key:"unlockSaveAfterPublish",value:function(){this._taskGroupEditorModel.unlockSaveAfterPublish()}},{key:"addTask",value:function(e,t,n,a,r){var i=e.split("__"),o=i[0],s=i[1];this._taskGroupEditorModel.addTask(o,s,this._defaultSettings,this._buildExternalModelActionCallback(t),n,a,r)}},{key:"removeTask",value:function(e,t,n){this._taskGroupEditorModel.removeTask(e,t,n)}},{key:"updateModel",value:function(e){this._taskGroupEditorModel.updateModel(e)}},{key:"setTitle",value:function(e,t){this._taskGroupEditorModel.setTitle(e,this._buildExternalModelActionCallback(t))}},{key:"setCoverImageUrl",value:function(e,t){this._taskGroupEditorModel.setCoverImageUrl(e,this._buildExternalModelActionCallback(t))}},{key:"setBackgroundColor",value:function(e,t){this._taskGroupEditorModel.setBackgroundColor(e,this._buildExternalModelActionCallback(t))}},{key:"setContentLanguage",value:function(e,t){this._taskGroupEditorModel.setContentLanguage(e,this._buildExternalModelActionCallback(t))}},{key:"setEditorOptions",value:function(t,n){this._defaultSettings=Object.assign(this._defaultSettings,e.extractDefaultSettings(t)),this._taskGroupEditorModel.setModelOptions(e.extractModelOptions(t),this._buildExternalModelActionCallback(n))}},{key:"getTasksCount",value:function(){var e=this._taskGroupEditorModel.data;return e&&e.tasks?Object.keys(e.tasks).length:0}},{key:"getSuggestedTasksCount",value:function(){var e=this._taskGroupEditorModel.data;return e&&e.tasks?Object.entries(e.tasks).filter((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return n&&a.getIsSuggested()})).length:0}},{key:"_createTaskGroupEditorView",value:function(e,t){return new l.default({domElement:e,defaultOptions:t,defaultSettings:this._defaultSettings,model:this._taskGroupEditorModel,dispatcherManager:this._dispatcherManager,environment:this._environment,serviceStore:this.serviceStore,taskGroupServerData:this._taskGroupServerData,externalControls:this.externalControls,disableDragOrdering:this.disableDragOrdering,hideTaskGroupTitle:this.hideTaskGroupTitle,reducedEditorCapabilitiesV2:this.reducedEditorCapabilitiesV2})}},{key:"_buildExternalModelActionCallback",value:function(e){var t=this;return function(n){n&&e?e(n):t._handleViewUpdate(e)}}},{key:"_handleViewUpdate",value:function(e){this._viewData&&this._viewData.onChange?this._viewData.onChange(e):e&&e()}},{key:"_ensureSafeRemount",value:function(){var e=this._viewData,t=e.isMounting,n=e.view;return new Promise((function(e,a){t?a(new Error("Mounting is already in process.")):n.unmount((function(t){t?a(t):e()}))}))}},{key:"setOrder",value:function(e){this._taskGroupEditorModel.setOrder(e)}},{key:"scrollToTask",value:function(e){this._viewData.view.scrollToTask(e)}},{key:"id",get:function(){return this._taskGroupId}},{key:"version",get:function(){return s.default.getVersion(this._taskGroupEditorModel.data)}},{key:"contentLanguage",get:function(){return s.default.getContentLanguage(this._taskGroupEditorModel.data)}},{key:"title",get:function(){return s.default.getTitle(this._taskGroupEditorModel.data)}},{key:"backgroundColor",get:function(){return s.default.getBackgroundColor(this._taskGroupEditorModel.data)}},{key:"firstTaskBackgroundColor",get:function(){return s.default.getFirstTaskBackgroundColor(this._taskGroupEditorModel.data)}}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(235)),l=a(n(299)),u=n(298);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(t,n,a,r,o){(0,i.default)(this,e),this.environment=a,this._createLocalModelObjects(t,n),this.loggerManager=this.environment.loggerManager,this.saveStatus=o,this.serviceStore=r}return(0,o.default)(e,[{key:"_createLocalModelObjects",value:function(e,t){this.taskGroupId=e,this._resetNewModel(),this.taskGroupStructure=t.taskGroup.structure;var n={};t.tasks&&(n=Object.keys(t.tasks).reduce((function(e,n){return Object.assign(e,(0,r.default)({},n,t.tasks[n].serverVersion))}),{})),this.versions={taskGroup:{serverVersion:t.taskGroup.serverVersion,version:t.taskGroup.version},taskServerVersions:n,taskVersions:t.taskGroup.structure.taskVersions},this.saveInProgress=!1}},{key:"_resetNewModel",value:function(){this.newModel={taskGroup:{id:this.taskGroupId},tasks:{}}}},{key:"updateModelToSave",value:function(e){e.taskGroup&&(this.newModel.taskGroup=d(d({},this.newModel.taskGroup),e.taskGroup)),e.tasks&&(this.newModel.tasks=d(d({},this.newModel.tasks),e.tasks))}},{key:"saveModel",value:function(e){if(!this.publishInProgress&&!this._isSaveInProgress()){this.saveInProgress=!0,this.newModel.taskGroup&&this.newModel.taskGroup.structure&&(this.taskGroupStructure=this.newModel.taskGroup.structure),this.modelChanges=JSON.parse(JSON.stringify(this.newModel)),this._resetNewModel(),this.saveStatus&&this.saveStatus.started&&this.saveStatus.started();var t=this.updateSaveModelForSendToServer();this._sendModelChangesToServer(t,e)}}},{key:"updateTaskGroupVersion",value:function(e){this.versions.taskGroup.version=e.version,this.versions.taskGroup.serverVersion=e.serverVersion}},{key:"lockSaveWhenPublish",value:function(){this.publishInProgress=!0}},{key:"unlockSaveAfterPublish",value:function(){this.publishInProgress=!1,this._resaveChanges()}},{key:"setTGUnloadCallback",value:function(e){this._isSaveInProgress()||this._isPendingChanges()?this.onTGUnload=e:e()}},{key:"_sendModelChangesToServer",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.loggerManager.info({message:"START - saveModel ".concat(this.taskGroupId)}),(0,l.default)(this.environment.saveTaskGroupEditorModelData(e),(function(e,a){e?(t.loggerManager.error({message:"ERROR: saveModel failed for TG ".concat(t.taskGroupId," ").concat(JSON.stringify(e))}),n(e),t._resaveChanges(n),t.serviceStore.ConfirmDialogService.showDialog(u.SAVE_ERROR)):!a.taskGroup&&a.message?(t.loggerManager.error({message:"ERROR: saveModel TG model failed for TG ".concat(t.taskGroupId," ").concat(a.message.toString())}),n(new Error("Model save error. Response:"+a.message.toString())),t._resaveChanges(n),t.serviceStore.ConfirmDialogService.showDialog(u.SAVE_ERROR)):(t.loggerManager.info({message:"SUCCESS - finished saveModel ".concat(t.taskGroupId)}),t._updateVersionsAfterSave(a,n),n())}))}},{key:"updateSaveModelForSendToServer",value:function(){var e={};return Object.keys(this.modelChanges.tasks).length>0&&(e.tasks=this._updateTaskVersionsForSave()),e.taskGroup=this._updateTaskGroupVersionForSave(),e.clientModified=s.default.localToUtsTimeStamp(),e}},{key:"_updateTaskVersionsForSave",value:function(){var e=this,t=this.modelChanges.tasks,n={},a=this.versions,r=a.taskGroup.version,i=1;return Object.keys(t).forEach((function(o){-1===e.taskGroupStructure.taskOrder.indexOf(o)?(delete t[o],delete a.taskVersions[o]):(n[o]=t[o],n[o].serverVersion=a.taskServerVersions[o]||"",(i=a.taskVersions[o]?a.taskVersions[o].version:i)!==r&&(i=r),a.taskVersions[o]={id:o,version:i},n[o].version=i)})),n}},{key:"_updateTaskGroupVersionForSave",value:function(){return d(d({},this.modelChanges.taskGroup),{},{id:this.taskGroupId,serverVersion:this.versions.taskGroup.serverVersion,version:this.versions.taskGroup.version,structure:d(d({},this.taskGroupStructure),{},{taskVersions:this.versions.taskVersions})})}},{key:"_updateVersionsAfterSave",value:function(e,t){var n=this,a=!1;if(e.lockResponse&&!e.lockResponse.acknowledged?a=!0:e.taskGroup.serverVersion&&this.versions.taskGroup.serverVersion<e.taskGroup.serverVersion&&(this.versions.taskGroup.serverVersion=e.taskGroup.serverVersion),Object.keys(e.tasks||{}).forEach((function(t){n.versions.taskServerVersions[t]=e.tasks[t].serverVersion})),this._resaveChanges(t),a&&this.saveStatus&&this.saveStatus.locked&&(this.saveStatus.locked({lockResponse:e.lockResponse}),this.loggerManager.error({message:"ERROR: Pessimistic lock on saveModel for TG ".concat(this.taskGroupId," ").concat(JSON.stringify(e))})),this.saveStatus&&this.saveStatus.finished){var r=this.taskGroupStructure&&this.taskGroupStructure.taskOrder;r.toJS&&(r=r.toJS());var i=r?r.length:null;this.saveStatus.finished({taskGroupTasksLength:i})}}},{key:"_isPendingChanges",value:function(){return this._isTaskGroupUpdated()||Object.keys(this.newModel.tasks).length>0}},{key:"_isSaveInProgress",value:function(){return this.saveInProgress}},{key:"_isTaskGroupUpdated",value:function(){return!(!this.newModel.taskGroup.properties&&!this.newModel.taskGroup.structure)}},{key:"_resaveChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.saveInProgress=!1,this._isPendingChanges()?this.saveModel(e):this.onTGUnload&&(this.onTGUnload(),this.onTGUnload=void 0)}}]),e}();t.default=f},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(0)),u=r(n(24)),c=n(46),d=r(n(482)),f=r(n(282)),p=r(n(483)),h=r(n(300)),m=r(n(231)),v=a(n(192)),g=r(n(37)),E=a(n(151)),_=n(199);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=g.default.isPhone,T=function(){function e(t){var n=t.domElement,a=t.defaultOptions,r=void 0===a?{}:a,i=t.defaultSettings,s=t.environment,l=t.model,u=t.dispatcherManager,c=t.serviceStore,d=t.taskGroupServerData,f=t.externalControls,p=t.disableDragOrdering,h=t.hideTaskGroupTitle;(0,o.default)(this,e),this._handleChangeModelDataByView=this._handleChangeModelDataByView.bind(this),this._handleSaveModelDataByView=this._handleSaveModelDataByView.bind(this),this._onExternalChange=this._onExternalChange.bind(this),this._domElement=n,this._options=k({isPreview:!1,singleTaskMode:!1,hidePoweredBy:!0,hideToolbar:!1,hideTaskGroupTitle:h,taskStartingIndex:1,showTaskGroupReport:!1,interfaceLanguage:"en_US",viewMode:E.QUIZ,externalControls:f,disableDragOrdering:p,reducedEditorCapabilitiesV2:!1},r),this._defaultSettings=i,this._environment=s,this._model=l,this._dispatcherManager=u,this._handleChangeModelDataByView=this._handleChangeModelDataByView.bind(this),this._handleSaveModelDataByView=this._handleSaveModelDataByView.bind(this),this._onExternalChange=this._onExternalChange.bind(this),this.serviceStore=c,this.taskGroupServerData=d}return(0,s.default)(e,null,[{key:"mount",value:function(e,t){e._render((function(n){t&&(n?t(n):t(void 0,e._onExternalChange))}))}},{key:"defaultTaskGroupPlayerViewType",get:function(){return S?v.ONEBYONE:v.SEQ}}]),(0,s.default)(e,[{key:"unmount",value:function(e){this._isMounted&&(u.default.unmountComponentAtNode(this._domElement),this._isMounted=!1),e&&e()}},{key:"setOptions",value:function(e,t){this._isMounted?(this._options=k(k({},this._options),e),this._render(t)):t&&t()}},{key:"setOptionsV2",value:function(e){var t=this,n=e.key,a=e.value;return new Promise((function(e,r){return n in t.serviceStore.ConfigurationService?(t.serviceStore.ConfigurationService[n]=a,e()):r({error:"No such key as ".concat(n)})}))}},{key:"_onExternalChange",value:function(e){this._isMounted?setTimeout(e,0):e()}},{key:"_handleChangeModelDataByView",value:function(e){this._model.data=e}},{key:"_handleSaveModelDataByView",value:function(e){this._model.update(e)}},{key:"_getLanguage",value:function(e){return this._environment.getLanguage(e)}},{key:"_setConfig",value:function(e){var t=e.contentLanguage,n=e.options,a=e.sizeLimitation,r=(0,h.default)(t),i=n.isPreview?_.modeEnum.PLAYER:_.modeEnum.EDITOR,o=n.viewMode===E.QUIZ?_.viewModeEnum.QUIZ:_.viewModeEnum.ASSESSMENT;this.serviceStore.ConfigurationService.viewMode=o,this.serviceStore.ConfigurationService.ltr=r,this.serviceStore.ConfigurationService.mode=i,this.serviceStore.ConfigurationService.isPreview=n.isPreview,this.serviceStore.ConfigurationService.singleTaskMode=n.singleTaskMode,this.serviceStore.ConfigurationService.hidePoweredBy=n.hidePoweredBy,this.serviceStore.ConfigurationService.hideToolbar=n.hideToolbar,this.serviceStore.ConfigurationService.taskStartingIndex=n.taskStartingIndex,this.serviceStore.ConfigurationService.hideTaskGroupTitle=n.hideTaskGroupTitle,this.serviceStore.ConfigurationService.interfaceLanguage=n.interfaceLanguage,this.serviceStore.ConfigurationService.sizeLimitation=a,this.serviceStore.ConfigurationService.reducedEditorCapabilitiesV2=n.reducedEditorCapabilitiesV2}},{key:"_render",value:function(t){var n=this,a=this._options,r=a.isPreview,i=a.viewTaskId,o=a.taskGroupPlayerViewType,s=a.interfaceLanguage,h=a.externalControls,v=a.disableDragOrdering,g=a.highlightedTasks,E=a.hideEmptyState,_=a.reducedEditorCapabilitiesV2,y=this._model.data,k=m.default.getContentLanguage(y),S=r?k:s;this.serviceStore.ConfigurationService.featureFlags=this._environment.api.featureFlags,this.serviceStore.ConfigurationService.fillInWritingMultiAnswersDelimiter=this._environment.api.appData.appConf.fillInWritingMultiAnswersDelimiter,this.serviceStore.ConfigurationService.reducedEditorCapabilitiesV2=_,this.serviceStore.ConfigurationService.questionMaxCharacters=_?this._environment.api.appData.appConf.questionMaxCharacters:null,this._getLanguage(S).then((function(a){var s=r&&m.default.isSingleMedia(y);n._setConfig({contentLanguage:k,options:n._options,sizeLimitation:n._environment.api.sizeLimitation}),u.default.render(l.default.createElement(c.Provider,{services:n.serviceStore},l.default.createElement(d.default,{elementToGetSizeOnMount:n._domElement,ltr:n.serviceStore.ConfigurationService.ltr,defaultSettings:n._defaultSettings,displaySingleMedia:s,environment:n._environment,language:a,configuration:n._options},s?l.default.createElement(p.default,{model:y,language:a,ltr:n.serviceStore.ConfigurationService.ltr}):l.default.createElement(f.default,{modelStore:y,ref:function(e){n._taskGroupInstance=e},language:a,defaultModel:y,onModelChange:n._handleChangeModelDataByView,saveModelChanges:n._handleSaveModelDataByView,defaultUserState:{},taskList:n._environment.api.getActiveTasksAndPresets(),readOnlyMode:!1,dispatcherManager:n._dispatcherManager,taskId:i,persistUserStateEvents:!1,taskGroupPlayerViewType:o||e.defaultTaskGroupPlayerViewType,showTagging:n._environment.api.tagging,taskGroupServerData:n.taskGroupServerData,externalControls:h,disableDragOrdering:v,highlightedTasks:g,hideEmptyState:E}))),n._domElement,(function(){n._isMounted=!0,t&&t()}))}),(function(e){t(e)}))}},{key:"scrollToTask",value:function(e){this._taskGroupInstance.getWrappedInstance().wrappedInstance._updateScroll(e)}},{key:"title",get:function(){return this._model.taskGroup.properties.title}}]),e}();t.default=T},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),n(451),r(n(37))),f=r(n(285));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=d.default.isMobile,m=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._handleWindowResize=function(){e.updateRootWidth()},e}return(0,o.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this._updateRootWidthByProps(this.props),this._addAndRemoveEvents(this.props)}},{key:"componentDidMount",value:function(){n.getIsPercentage(this.props)&&this.props.elementToGetSizeOnMount===document.body&&this.updateRootWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this._updateRootWidthByProps(e),this._addAndRemoveEvents(e)}},{key:"shouldComponentUpdate",value:function(e,t){return t.rootWidth!==this.state.rootWidth||e.children!==this.props.children}},{key:"componentWillUnmount",value:function(){this._hasWindowResizeEvent&&f.default.unregister(this._handleWindowResize)}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"t2k-root-width ".concat(h?"mobile":"pc"),ref:function(t){e._containerRef=t},style:{width:this.props.width}},c.default.cloneElement(this.props.children,{rootWidth:this.state.rootWidth}))}},{key:"updateRootWidth",value:function(e){this._updateRootWidthByProps(this.props,e)}},{key:"_addAndRemoveEvents",value:function(e){n.getIsPercentage(e)?this._hasWindowResizeEvent||(f.default.register(this._handleWindowResize),this._hasWindowResizeEvent=!0):this._hasWindowResizeEvent&&(f.default.unregister(this._handleWindowResize),delete this._hasWindowResizeEvent)}},{key:"_updateRootWidthByProps",value:function(e,t){var a;a=void 0===this._containerRef?e.elementToGetSizeOnMount:this._containerRef,this.setState({rootWidth:n.getRootWidth(e,a.clientWidth)},t)}}],[{key:"getIsPercentage",value:function(e){return!!e.width.match("%")}},{key:"getRootWidth",value:function(e,t){var a=n.getIsPercentage(e),r=Number(e.width.replace(/[^0-9]/g,""));return a?r*t/100:r}}]),n}(c.Component);t.default=m,m.defaultProps={width:"100%",elementToGetSizeOnMount:document.body}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(63)),i=a(n(3)),o=a(n(4)),s=a(n(6)),l=a(n(8)),u=a(n(7)),c=n(0),d=(a(n(2)),a(n(328))),f=n(76);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=d.default.Hoc,m=d.default.LEVEL,v=d.default.POSITION,g=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.registerToError,n=e.addNotification,a=e.ltr;this._unregisterToError=t((function(e){var t="object"===(0,r.default)(e)?e.message||e.data&&e.data.message:e;n({message:t.toString(),autoDismiss:20,level:m.ERROR,position:a?v.BOTTOM_RIGHT:v.BOTTOM_LEFT})}))}},{key:"componentWillUnmount",value:function(){this._unregisterToError()}},{key:"render",value:function(){return null}}]),n}(c.Component);var E=h((function(e){return{addNotification:e.add}}))(g),_=(0,f.InteractionHoc)((function(e){return{ltr:e.ltr,registerToError:function(){var t;return(t=e.environment).registerToError.apply(t,arguments)}}}))(E);t.default=_},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(30)),c=(a(n(31)),n(20)),d=(r=function(){function e(){(0,s.default)(this,e),(0,o.default)(this,"_displayDialog",i,this),this._dialogType=void 0,this._action=function(){},this._allowCancel=!1}return(0,l.default)(e,[{key:"setDialogType",value:function(e){this._dialogType=e}},{key:"setDialogAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._action=e}},{key:"setAllowCancel",value:function(e){this._allowCancel=e}},{key:"closeDialog",value:function(){this.setDialogType(""),this.setDialogAction(),this.setAllowCancel(!1),this._displayDialog=!1}},{key:"showDialog",value:function(e,t,n){this.setDialogType(e),t&&this.setDialogAction(t),this.setAllowCancel(n),this._displayDialog=!0}},{key:"displayDialog",get:function(){return this._displayDialog}},{key:"type",get:function(){return this._dialogType}},{key:"action",get:function(){return this._action}},{key:"allowCancel",get:function(){return this._allowCancel}}]),e}(),i=(0,u.default)(r.prototype,"_displayDialog",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r);t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(30)),c=(a(n(31)),n(20)),d=(r=function(){function e(){(0,s.default)(this,e),(0,o.default)(this,"_displayLoader",i,this)}return(0,l.default)(e,[{key:"hideLoader",value:function(){this._displayLoader=!1}},{key:"showLoader",value:function(){this._displayLoader=!0}},{key:"displayLoader",get:function(){return this._displayLoader}}]),e}(),i=(0,u.default)(r.prototype,"_displayLoader",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r);t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(30)),c=(a(n(31)),n(20)),d=(r=function(){function e(){(0,s.default)(this,e),(0,o.default)(this,"_tagChanged",i,this)}return(0,l.default)(e,[{key:"tagChanged",get:function(){return this._tagChanged},set:function(e){this._tagChanged=e}}]),e}(),i=(0,u.default)(r.prototype,"_tagChanged",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r);t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(9)),s=a(n(3)),l=a(n(4)),u=a(n(881)),c=a(n(231)),d=a(n(883)),f=a(n(884)),p=n(110),h=n(77),m=n(67),v=a(n(195)),g=a(n(484)),E=n(54);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){function e(t,n,a,r,i,o){(0,s.default)(this,e),this.modelStore=new v.default,this.serviceStore=new g.default,this.userStateStore=new f.default(this.serviceStore,o),this._taskGroupId=t,this._taskGroupData=n,this._channelId=a,this._environment=r,this._dispatcherManager=i,this._getEventsContextPromise=o,this._taskGroupPlayerModel=new u.default(t,n,a,r,void 0,this.modelStore,this.userStateStore,this.serviceStore)}return(0,l.default)(e,[{key:"mount",value:function(e,t){var n=this,a=e.domElement,r=e.defaultViewOptions;if(this._viewData)this._ensureSafeRemount().then((function(){n._viewData=null,n.mount({domElement:a,defaultViewOptions:r},t)})).catch(t);else{this._viewData={isMounting:!0};var i=new d.default({domElement:a,defaultOptions:r,taskGroupEditorData:this._taskGroupData,taskGroupPlayerModel:this._taskGroupPlayerModel,dispatcherManager:this._dispatcherManager,getEventsContextPromise:this._getEventsContextPromise,environment:this._environment,serviceStore:this.serviceStore,modelStore:this.modelStore});d.default.mount(i,(function(e,a){n._viewData.view=i,n._viewData.isMounting=!1,e?t(e):(n._viewData.onChange=a,t(void 0,i))}))}}},{key:"getPlayerView",value:function(){return this._viewData.view}},{key:"setUserStateOptions",value:function(e,t){var n=e.userId,a=e.channelId,r=e.isPersistent,i=void 0===r||r;n||this._taskGroupPlayerModel.userId?n!==this._taskGroupPlayerModel.userId?n?this._loadUserState({userId:n,channelId:a,isPersistent:i},t):(this._taskGroupPlayerModel.initiateState(void 0,{}),this._taskGroupPlayerModel.isPersistent=!1,this._userStateChange(t)):(this._taskGroupPlayerModel.isPersistent=i,this._userStateChange(t)):(this._taskGroupPlayerModel.initiateState(void 0,{}),this._taskGroupPlayerModel.isPersistent=!1,this._userStateChange(t))}},{key:"setTaskScore",value:function(e,t,n,a){var r=this;var i=this._taskGroupPlayerModel.getTaskUserState(e);if(i){var o=n===m.CORRECT?p.COMPLETED_RIGHT:p.COMPLETED_WRONG,s=y(y({},i),{},{data:y(y({},i.data),{},{progress:o,score:t,currentAnswer:n})});this._taskGroupPlayerModel.updateTaskUserState(e,s,(function(){var e=r._taskGroupPlayerModel,t=e.userId,n=e.channelId,i=e.isPersistent;r._loadUserState({userId:t,channelId:n,isPersistent:i},a)}))}else a(new Error("Task ".concat(e," doesn't exist in task-group model.")))}},{key:"getTaskScore",value:function(e){var t=this._taskGroupPlayerModel.getTaskUserState(e);if(t)return t.data&&t.data&&t.data.score}},{key:"getCheckableTaskCount",value:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a?null!==(e=null===(t=this.userStateStore)||void 0===t||null===(n=t.modelData)||void 0===n?void 0:n.getCheckableTaskCount(r))&&void 0!==e?e:0:this.getAnswerableTasksCount()}},{key:"getAnswerableTasksCount",value:function(){var e=this,t=0;return this._taskGroupData.tasks&&Object.keys(this._taskGroupData.tasks).forEach((function(n){!(e._taskGroupData.tasks[n].data.subType===E.CONTAINER_SUBTYPE)&&e.isTaskAnswerable(n)&&t++})),t}},{key:"getCompletedTasks",value:function(){var e=this,t=[];return this._taskGroupData.tasks&&Object.keys(this._taskGroupData.tasks).forEach((function(n){!(e._taskGroupData.tasks[n].data.subType===E.CONTAINER_SUBTYPE)&&e.isTaskCompleted(n)&&(t[n]=1)})),t}},{key:"isTaskAnswerable",value:function(e){if(!this._taskGroupData.tasks)return!1;var t=Object.values(this._taskGroupData.tasks).find((function(t){return t.id===e}));return t&&["AUDIO","EMBED_WEBSITE","IMAGE","TEXT","VIDEO"].indexOf(t.data.taskType)<0&&t.data.subType!==E.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER}},{key:"isTaskCompleted",value:function(e){var t=this._getTaskProgress(e);return!!t&&-1!==p.TASK_FINISHED_STATUS_LIST.indexOf(t)}},{key:"hasAvailableAnswer",value:function(e){return this.userStateStore.getTaskUserStateStore(e).getTaskCheckAnswerStatus()===h.AVAILABLE}},{key:"isTaskPendingCheck",value:function(e){return this._getTaskProgress(e)===p.PENDING_CHECK}},{key:"isTaskGroupPendingCheck",value:function(){var e=this,t=!1;return Object.keys(this._taskGroupData.tasks).forEach((function(n){!(e._taskGroupData.tasks[n].data.subType===E.CONTAINER_SUBTYPE)&&e.isTaskPendingCheck(n)&&(t=!0)})),t}},{key:"isTaskGroupCompleted",value:function(){var e,t=this,n={countAnswerable:0,countCompleted:0,taskGroupCompleted:!0};return(null==this||null===(e=this._taskGroupData)||void 0===e?void 0:e.tasks)&&Object.keys(this._taskGroupData.tasks).forEach((function(e){if(!(t._taskGroupData.tasks[e].data.subType===E.CONTAINER_SUBTYPE)){var a=t.isTaskAnswerable(e),r=t.isTaskCompleted(e);n.countAnswerable+=a?1:0,n.countCompleted+=r?1:0,a&&!r&&(n.taskGroupCompleted=!1)}})),n}},{key:"getTasksCount",value:function(){return this._taskGroupData&&this._taskGroupData.tasks?Object.keys(this._taskGroupData.tasks).length:0}},{key:"isAssessmentSubmitted",value:function(){return this.userStateStore.isAssessmentSubmitted}},{key:"isAssessmentFullyChecked",value:function(){return this.userStateStore.isAssessmentFullyChecked}},{key:"submitAssessment",value:function(e){this._taskGroupData.tasks||e(this._taskGroupId,{},(function(){}));try{this.userStateStore.handleCheckAssessmentClick(null,function(){var t=(0,i.default)(r.default.mark((function t(n,a,i){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}())}catch(t){console.error(t),e(this._taskGroupId,{},(function(){}))}}},{key:"_loadUserState",value:function(e,t){var n=this,a=e.userId,r=e.channelId,i=e.isPersistent;this._environment.getTaskGroupPlayerModelData(this._taskGroupId,c.default.getVersion(this._taskGroupData),a,r).then((function(e){n._taskGroupPlayerModel.initiateState(a,e.states),n._taskGroupPlayerModel.isPersistent=i,n._userStateChange(t)}),t)}},{key:"_userStateChange",value:function(e){this._viewData&&this._viewData.onChange?this._viewData.onChange(e):e&&e()}},{key:"_ensureSafeRemount",value:function(){var e=this._viewData,t=e.isMounting,n=e.view;return new Promise((function(e,a){t?a(new Error("Mounting is already in process.")):n.unmount((function(t){t?a(t):e()}))}))}},{key:"_getTaskProgress",value:function(e){var t,n=this;return this._taskGroupData.tasks[e].data.subType===E.CONTAINER_SUBTYPE?this._taskGroupData.tasks[e].subtasks.find((function(e){var t;return-1===p.TASK_FINISHED_STATUS_LIST.indexOf(null===(t=n._getTaskState(e))||void 0===t?void 0:t.progress)}))?"":p.COMPLETED_RIGHT:null===(t=this._getTaskState(e))||void 0===t?void 0:t.progress}},{key:"_getTaskState",value:function(e){var t=this._taskGroupPlayerModel.getTaskUserState(e);return null==t?void 0:t.data}},{key:"taskHasInteractionState",value:function(e){return this.userStateStore.taskHasInteractionState(e)}},{key:"completedTasksCount",get:function(){return this.userStateStore.completedTasksCount}},{key:"id",get:function(){return this._taskGroupId}},{key:"version",get:function(){return c.default.getVersion(this._taskGroupData)}},{key:"contentLanguage",get:function(){return c.default.getContentLanguage(this._taskGroupData)}},{key:"firstTaskBackgroundColor",get:function(){return c.default.getFirstTaskBackgroundColor(this._taskGroupData)}}]),e}();t.default=k},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(882)),s=function(){function e(t,n,a,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=o.isPersistent,l=void 0===s||s,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0;(0,r.default)(this,e),this._taskGroupId=t,this._taskGroupData=n,this._channelId=a,this._environment=i,this._options={isPersistent:l},this._modelStore=u,this._userState=c,this._serviceStore=d,this._modelStore.initialize(this._taskGroupData,void 0)}return(0,i.default)(e,[{key:"initiateState",value:function(e,t){this._userId=e,this._saveUserStateQueue=new o.default(this._taskGroupId,this._taskGroupData,this._channelId,t,e,this._environment,this._serviceStore),this._userState.initialize(t,this._modelStore,this._saveUserStateQueue)}},{key:"getTaskUserState",value:function(e){return this._userState&&this._userState.getTaskUserState(e)}},{key:"updateTaskUserState",value:function(e,t,n){this._saveUserStateQueue.updateTaskUserState(e,t),this.saveUserState(n)}},{key:"saveUserState",value:function(e){this._saveUserStateQueue.saveUserState(e)}},{key:"userState",get:function(){return this._userState},set:function(e){this._userState=e}},{key:"userId",get:function(){return this._userId}},{key:"channelId",get:function(){return this._channelId},set:function(e){this._channelId=e}},{key:"isPersistent",get:function(){return this._options.isPersistent},set:function(e){this._userState.isPersistent=e,this._options.isPersistent=e}}]),e}();t.default=s},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(72)),l=a(n(299)),u=a(n(14)),c=n(298);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(){function e(t,n,a,o,s,l,u){(0,i.default)(this,e),this.taskGroupId=t,this.channelId=a,this.serviceStore=u,this.taskGroupData={id:t,version:n.taskGroup.version},this.saveTaskGroupPlayerModelData=null;var c=n.tasks?Object.keys(n.tasks).reduce((function(e,i){return Object.assign(e,(0,r.default)({},i,{identifiers:{taskGroupId:t,taskGroupVersion:n.taskGroup.version,taskId:i,taskVersion:n.tasks[i].version,userId:s,channelId:a},serverVersion:o&&o.taskStates&&o.taskStates[i]?o.taskStates[i].serverVersion:""}))}),{}):{};this.identifiers={taskGroup:{identifiers:{taskGroupId:t,taskGroupVersion:n.taskGroup.version,userId:s,channelId:a},serverVersion:o&&o.taskGroupState?o.taskGroupState.serverVersion:""},tasks:c},this.environment=l,this.stateChanges={taskGroup:{},tasks:{},logEvents:{}},this.saveInProgress=[],this.loggerManager=this.environment.loggerManager}return(0,o.default)(e,[{key:"updateTaskUserState",value:function(e,t,n){this.stateChanges.tasks[e]=t,n&&(n=(0,s.default)(n)?n:[n],this.stateChanges.logEvents[e]||(this.stateChanges.logEvents[e]=[]),this.stateChanges.logEvents[e]=this.stateChanges.logEvents[e].concat(n))}},{key:"updateTaskGroupUserState",value:function(e){this.stateChanges.taskGroup=e}},{key:"saveUserState",value:function(e){var t=this.updateDataForSave();t&&t.states&&Object.keys(t.states).length>0?this._saveUserState(t,e):e&&e()}},{key:"setTGUnloadCallback",value:function(e){this.saveInProgress.length<1&&!this._isPendingChanges()?e():this.onTGUnload=e}},{key:"_saveUserState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.loggerManager.info({message:"START saveUserState for TG ".concat(this.taskGroupId)});var a=function(a,r){a?(e.loggerManager.error({message:"ERROR: save userState failed for TG ".concat(e.taskGroupId," ").concat(JSON.stringify(a))}),e.updateVersions(t.states,n),!u.default.isCordovaOffline()&&e.serviceStore.ConfirmDialogService.showDialog(c.SAVE_ERROR)):(t.logEvents?e.loggerManager.info({message:"SUCCESS - finished saveUserState for TG ".concat(e.taskGroupId,"\n").concat(JSON.stringify(t)),forceSend:!0}):e.loggerManager.info({message:"SUCCESS - finished saveUserState for TG ".concat(e.taskGroupId)}),e.updateVersions(r,n)),e.callback&&e.callback(a,r),n(a,r)};this.saveTaskGroupPlayerModelData?this.saveTaskGroupPlayerModelData(this.taskGroupId,t,a.bind(this)):(0,l.default)(this.environment.saveTaskGroupPlayerModelData(t),a)}},{key:"updateDataForSave",value:function(){var e=this,t={states:{taskGroupState:{},taskStates:{}},logEvents:[]},n=t.states.taskStates,a=t.logEvents,r=this.stateChanges.tasks,i=null,o=null;return Object.keys(r).forEach((function(t){o=e.identifiers.tasks[t],-1===e.saveInProgress.indexOf(t)&&(i=r[t],n[t]=f(f({},o),{},{data:f({},i)}),delete e.stateChanges.tasks[t],e.saveInProgress.push(t),e.stateChanges.logEvents[t]&&(a=a.concat(e.stateChanges.logEvents[t]),delete e.stateChanges.logEvents[t]))})),-1===this.saveInProgress.indexOf(this.taskGroupId)&&Object.keys(this.stateChanges.taskGroup).length>0&&(t.states.taskGroupState=f(f({},this.identifiers.taskGroup),{},{data:f({},this.stateChanges.taskGroup)}),this.saveInProgress.push(this.taskGroupId),this.stateChanges.taskGroup={}),t.logEvents=a,Object.keys(t.states.taskGroupState).length||delete t.states.taskGroupState,Object.keys(t.states.taskStates).length||delete t.states.taskStates,t.logEvents.length||delete t.logEvents,t}},{key:"updateVersions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,a=!1,r=!1;if(t.taskGroupState&&(t.taskGroupState.serverVersion?this.identifiers.taskGroup.serverVersion=t.taskGroupState.serverVersion:t.taskGroupState.error&&6===t.taskGroupState.error.code&&(r=!0),this.removeFromSaveInProgress(this.taskGroupId),Object.keys(this.stateChanges.taskGroup).length>0&&(a=!0)),t.taskStates){var i=t.taskStates;Object.keys(i).forEach((function(t){e.removeFromSaveInProgress(t),i[t].serverVersion?e.identifiers.tasks[t].serverVersion=i[t].serverVersion:i[t].error&&6===i[t].error.code&&(r=!0),!a&&e.stateChanges.tasks[t]&&(a=!0)}))}r&&this.onOptimisticLock(t),a&&this.saveUserState(n),this.onTGUnload&&!this._isPendingChanges()&&this.saveInProgress.length<1&&(this.onTGUnload(),this.onTGUnload=void 0)}},{key:"removeFromSaveInProgress",value:function(e){var t=this.saveInProgress.indexOf(e);t>-1&&this.saveInProgress.splice(t,1)}},{key:"_isPendingChanges",value:function(){return Object.keys(this.stateChanges.taskGroup).length>0||Object.keys(this.stateChanges.tasks).length>0}},{key:"onOptimisticLock",value:function(e){this.serviceStore.ConfirmDialogService.showDialog(c.OPTIMISTIC_LOCK),this.loggerManager.error({message:"ERROR: Optimistic lock on save userState for TG ".concat(this.taskGroupId," ").concat(JSON.stringify(e))})}},{key:"setSaveCallback",value:function(e){this.callback=e}}]),e}();t.default=p},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(0)),u=r(n(24)),c=n(46),d=r(n(482)),f=r(n(282)),p=r(n(483)),h=a(n(192)),m=n(52),v=r(n(300)),g=r(n(231)),E=r(n(37)),_=a(n(151)),y=n(199);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=E.default.isMobile,b=function(){function e(t){var n=t.domElement,a=t.defaultOptions,r=void 0===a?{}:a,i=t.environment,s=t.taskGroupEditorData,l=t.taskGroupPlayerModel,u=t.dispatcherManager,c=t.getEventsContextPromise,d=t.serviceStore,f=t.modelStore;(0,o.default)(this,e),this._onExternalChange=this._onExternalChange.bind(this),this._defaultTaskGroupPlayerViewType=this._defaultTaskGroupPlayerViewType.bind(this),this._domElement=n,this._options=S({singleTaskMode:!1,hidePoweredBy:!0,taskStartingIndex:1,showTaskGroupReport:!1,isReadOnly:!1,showSystemAnswers:!1,viewMode:_.QUIZ,onAssessmentSubmit:function(){}},r),this._environment=i,this._taskGroupPlayerModel=l,this._taskGroupEditorData=s,this._dispatcherManager=u,this._getEventsContextPromise=c,this.serviceStore=d,this.modelStore=f}return(0,s.default)(e,[{key:"_defaultTaskGroupPlayerViewType",value:function(){return this.modelStore.taskGroup.getIsMustCompleteQuestions()?h.BLOCKONEBYONE:T?h.ONEBYONE:h.SEQ}}],[{key:"mount",value:function(e,t){e._render((function(n){t&&(n?t(n):t(void 0,e._onExternalChange))}))}}]),(0,s.default)(e,[{key:"unmount",value:function(e){this._isMounted&&(u.default.unmountComponentAtNode(this._domElement),this._isMounted=!1),e&&e()}},{key:"setOptions",value:function(e,t){this._isMounted?(this._options=S(S({},this._options),e),this._render(t)):t&&t()}},{key:"_onExternalChange",value:function(e){var t=this;this._isMounted?this.unmount((function(n){n?e(n):t._render(e)})):e()}},{key:"_getLanguage",value:function(e){return this._environment.getLanguage(e)}},{key:"_setConfig",value:function(e){var t,n=e.contentLanguage,a=e.options,r=(0,v.default)(n),i=y.modeEnum.PLAYER;a.viewMode&&(t=a.viewMode===_.QUIZ?y.viewModeEnum.QUIZ:y.viewModeEnum.ASSESSMENT),this.serviceStore.ConfigurationService.viewMode=t,this.serviceStore.ConfigurationService.ltr=r,this.serviceStore.ConfigurationService.mode=i,this.serviceStore.ConfigurationService.isPreview=a.isPreview,this.serviceStore.ConfigurationService.singleTaskMode=a.singleTaskMode,this.serviceStore.ConfigurationService.hidePoweredBy=a.hidePoweredBy,this.serviceStore.ConfigurationService.hideToolbar=a.hideToolbar,this.serviceStore.ConfigurationService.taskStartingIndex=a.taskStartingIndex,this.serviceStore.ConfigurationService.interfaceLanguage=a.interfaceLanguage,this.serviceStore.ConfigurationService.isInteractionsThemeV2=a.isInteractionsThemeV2,this.serviceStore.ConfigurationService.isCIEditor=a.isCIEditor}},{key:"_render",value:function(e){var t=this,n=this._options,a=n.viewTaskId,r=n.singleTaskMode,i=n.hidePoweredBy,o=n.taskStartingIndex,s=n.gamifyMode,h=n.taskGroupPlayerViewType,E=n.showTaskGroupReport,_=n.isReadOnly,y=n.isTaskGroupVisible,k=n.showResults,S=n.hideProgressBar,T=n.showSystemAnswers,b=n.overrideTasksBackgroundColor,C=n.overrideTaskGroupBackgroundColor,I=n.onAssessmentSubmit,O=n.taskButtons,A=n.scale,N=n.showPollResults,w=n.viewMode,R=n.isUC,P=g.default.getContentLanguage(this._taskGroupEditorData);this._getLanguage(P).then((function(n){var M=(0,v.default)(P),L=t._taskGroupPlayerModel.userId;t.serviceStore.ConfigurationService.featureFlags=t._environment.api.featureFlags,t.serviceStore.ConfigurationService.fillInWritingMultiAnswersDelimiter=t._environment.api.appData.appConf.fillInWritingMultiAnswersDelimiter,t._setConfig({contentLanguage:P,options:t._options});var D=g.default.isSingleMedia(t._taskGroupEditorData)&&!t.serviceStore.ConfigurationService.isInteractionsThemeV2;u.default.render(l.default.createElement(c.Provider,{services:t.serviceStore},l.default.createElement(d.default,{elementToGetSizeOnMount:t._domElement,ltr:M,displaySingleMedia:D,environment:t._environment,language:n,getEventsContextPromise:t._getEventsContextPromise,isInteractionsThemeV2:t.serviceStore.ConfigurationService.isInteractionsThemeV2,isUC:R},D?l.default.createElement(p.default,{model:t._taskGroupEditorData,language:n,ltr:M,videoIframeOrigin:t._options.videoIframeOrigin,availableOffline:t._options.availableOffline}):l.default.createElement(f.default,{modelStore:t._taskGroupEditorData,userStateStore:t._taskGroupPlayerModel.userState,ref:function(e){t._taskGroupInstance=e},language:n,ltr:M,mode:m.PLAYER,userId:L,gamifyMode:s,hidePoweredBy:i,showTaskGroupReport:E,defaultModel:t._taskGroupEditorData,defaultUserState:t._taskGroupPlayerModel.userState||{},onAssessmentSubmit:I,readOnlyMode:_,showPollResults:N,isTaskGroupVisible:y,showResults:k,hideProgressBar:S,taskGroupPlayerViewType:h||t._defaultTaskGroupPlayerViewType(),dispatcherManager:t._dispatcherManager,scoreModification:t._environment.api.scoreModification,singleTaskMode:r,taskId:a,taskStartingIndex:o,persistUserStateEvents:t._taskGroupPlayerModel.isPersistent,showSystemAnswers:T,overrideTasksBackgroundColor:b,overrideTaskGroupBackgroundColor:C,taskButtons:O,scale:A,viewMode:w,canCiResultsBeHidden:t._environment.api.canCiResultsBeHidden,taskGroupOptions:t._options.taskGroupOptions,forceSubmitPromise:t._options.forceSubmitPromise,showClimateResult:t._options.showClimateResult,showFlagInteractionButton:t._options.showFlagInteractionButton,hideUserStateOnClimatePoll:t._options.hideUserStateOnClimatePoll,updatedParticipants:t._options.updatedParticipants,videoIframeOrigin:t._options.videoIframeOrigin,availableOffline:t._options.availableOffline,closeOverlayTaskGroup:t._options.closeOverlayTaskGroup,getTaskGroupActions:t._options.getTaskGroupActions,preventSwipeOnScroll:t._options.preventSwipeOnScroll,taskPresentationDisplayType:t._options.taskPresentationDisplayType,taskPresentationProperties:t._options.taskPresentationProperties,pageSizeFactor:t._options.pageSizeFactor,isSmallEmbeddedItem:t._options.isSmallEmbeddedItem}))),t._domElement,(function(){t._isMounted=!0,e&&e()}))}),(function(t){e(t)}))}},{key:"getTaskGroupInstance",value:function(){return this._taskGroupInstance}}]),e}();t.default=b},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l,u,c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(885)),v=a(n(886)),g=a(n(13)),E=r(n(110)),_=n(199),y=n(54),k=(i=function(){function e(t,n){var a=this;(0,d.default)(this,e),this.serviceStore=void 0,this._isPersistent=!0,this.saveUserStateQueue=void 0,this.modelData=void 0,this.userStateApi=void 0,(0,c.default)(this,"completedTasks",o,this),(0,c.default)(this,"unCompletedTasksIndexes",s,this),(0,c.default)(this,"taskGroupState",l,this),(0,c.default)(this,"taskStates",u,this),this.debounceSaveUserState=g.default.debounce((function(){a._isPersistent&&a.saveUserStateQueue.saveUserState()}),0),this.taskStates={},this.userStateApi={updateCompletedTaskCount:this.updateCompletedTaskCount.bind(this),onTaskChange:this.onTaskChange.bind(this),isAssessment:this.isAssessment.bind(this),updateUnAnsweredQuestionsIndex:this.updateUnAnsweredQuestionsIndex.bind(this),getPersistent:this.getPersistent.bind(this),getEventLog:this.getEventLog.bind(this),getTaskCheckAnswerStatus:this.getTaskCheckAnswerStatus.bind(this),taskHasInteractionState:this.taskHasInteractionState.bind(this),getTaskProgress:this.getTaskProgress.bind(this),updateCompletedTaskCountCallback:function(){},getEventsContextPromise:n};var r={onTaskGroupChange:this.onTaskGroupChange.bind(this)};this.taskGroupState=new m.default(r),this.serviceStore=t,this.completedTasks=0,this.unCompletedTasksIndexes=[]}return(0,f.default)(e,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{taskGroupState:null,taskStates:{}},n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.modelData=n,n.taskGroup.structure.taskOrder.forEach((function(a){var r=t.taskStates&&t.taskStates[a],i=n.tasks[a];e.taskStates[a]=new v.default(r,i,e.userStateApi,e.serviceStore)})),this.taskGroupState.initialize(t.taskGroupState),this.saveUserStateQueue=a,this._isPersistent=r}},{key:"reset",value:function(){var e=this;this.modelData.taskGroup.structure.taskOrder.forEach((function(t){e.taskStates[t].reset()})),this.taskGroupState.reset(),this.initializeCompletedTaskCount()}},{key:"onTaskChange",value:function(e,t){var n=this.getTaskUserState(e);this.updateTaskServer(e,n,t)}},{key:"onTaskGroupChange",value:function(){var e=this.taskGroupState.getState();this.updateTaskGroupServer(e)}},{key:"getTaskUserState",value:function(e){var t=this.taskStates[e];return null==t?void 0:t.getTaskUserState()}},{key:"getTaskUserStateStore",value:function(e){return this.taskStates[e]}},{key:"getPersistent",value:function(){return!!this._isPersistent}},{key:"updateTaskServer",value:function(e,t,n){this.saveUserStateQueue.updateTaskUserState(e,t,n),this.debounceSaveUserState()}},{key:"updateTaskGroupServer",value:function(e){this.saveUserStateQueue.updateTaskGroupUserState(e),this.debounceSaveUserState()}},{key:"isAssessment",value:function(){return this.serviceStore.ConfigurationService.viewMode===_.viewModeEnum.ASSESSMENT}},{key:"handleCheckAssessmentClick",value:function(e,t){var n=this;return this.saveUserStateQueue.saveTaskGroupPlayerModelData=t,new Promise((function(t,a){var r=n.modelData.taskGroup.structure.taskOrder,i=n.modelData.getCheckableTaskCount(),o=0;n.setSaveCallback((function(e,r){if(!e&&r&&r.taskStates)for(var s in r.taskStates)!r.taskStates[s].error&&r.taskStates[s].serverVersion?o++:(n.setSaveCallback(void 0),a());else n.setSaveCallback(void 0),a();o===i&&(n.saveUserStateQueue.saveTaskGroupPlayerModelData=null,n.setSaveCallback(void 0),t())})),r.forEach((function(t){n.modelData.tasks[t].data.subType===y.CONTAINER_SUBTYPE||n.taskStates[t].checkInteractionAsAssessment(e)}))}))}},{key:"initializeCompletedTaskCount",value:function(){var e=this,t=this.modelData.taskGroup.structure.taskOrder,n=0;t.forEach((function(t){!(e.modelData.tasks[t].data.subType===y.CONTAINER_SUBTYPE)&&e.taskStates[t].taskHasInteractionState()&&n++})),this.completedTasks=n}},{key:"updateCompletedTaskCount",value:function(e,t){this.completedTasks+=e,this.userStateApi.updateCompletedTaskCountCallback&&this.userStateApi.updateCompletedTaskCountCallback({updateCount:e,taskGroupId:this.modelData.taskGroup.id,taskId:t})}},{key:"initUnAnsweredQuestionsIndex",value:function(e){var t=this;this.modelData.taskGroup.structure.taskOrder.forEach((function(n,a){t.modelData.tasks[n].data.subType===y.CONTAINER_SUBTYPE||t.taskStates[n].taskHasInteractionState()||e.indexOf(n)>-1&&t.unCompletedTasksIndexes.push(a+1)}))}},{key:"updateUnAnsweredQuestionsIndex",value:function(e){var t=this.modelData.taskGroup.structure.taskOrder.indexOf(e)+1;t>-1&&(this.unCompletedTasksIndexes.indexOf(t)>-1?this.unCompletedTasksIndexes.remove(t):(this.unCompletedTasksIndexes.push(t),this.unCompletedTasksIndexes.replace(this.unCompletedTasksIndexes.sort((function(e,t){return e-t})))))}},{key:"setTaskStartingTime",value:function(e,t){this.taskStates[e]&&this.taskStates[e].setStartingTime(t)}},{key:"preventTaskFromBeenAnswered",value:function(e){this.taskStates[e]&&this.taskStates[e].setIsEnabled(!1)}},{key:"getTaskStartingTime",value:function(e){if(this.taskStates[e])return this.taskStates[e].getStartingTime()}},{key:"isTaskHaveStartingTime",value:function(e){return!(!this.taskStates[e]||void 0===this.taskStates[e].getStartingTime())}},{key:"isMustCompleteQuestionsWithTimeSettings",value:function(){return this.modelData.isMustCompleteQuestionsWithTimeSettings()}},{key:"getUnansweredQuestionsIds",value:function(){var e,t=this;return this.modelData.taskGroup.structure.taskOrder.filter((function(n){return(e=t.taskStates[n]).isTaskCheckable()&&!e.taskHasInteractionState()}))}},{key:"setSaveCallback",value:function(e){this.saveUserStateQueue.setSaveCallback(e)}},{key:"setUpdateCompletedTaskCountCallback",value:function(e){this.userStateApi.updateCompletedTaskCountCallback=e}},{key:"getTasksModel",value:function(){return this.modelData.tasks}},{key:"getEventLog",value:function(e,t,n,a){var r={eventData:e?this.taskStates[e].getTaskEventData():{}};return Object.assign(r,{dispatcher:{type:"TG_PLAYER",id:this.modelData.taskGroup.id,version:this.modelData.taskGroup.version}}),a&&Object.assign(r.eventData,a),{action:t,timestamp:r.timestamp||Date.now(),dispatcher:r.dispatcher,eventData:r.eventData,contextProviderId:n.providerId,contextObject:n.data}}},{key:"taskHasInteractionState",value:function(e){return this.taskStates[e].taskHasInteractionState()}},{key:"getTaskCheckAnswerStatus",value:function(e){return this.taskStates[e].getTaskCheckAnswerStatus()}},{key:"getTaskProgress",value:function(e){return this.taskStates[e].getTaskProgress()}},{key:"isPersistent",set:function(e){this._isPersistent=e}},{key:"isAssessmentFullyChecked",get:function(){var e=this;return this.modelData.taskGroup.structure.taskOrder.every((function(t){return!e.modelData.tasks[t].isTaskCheckable()||e.getTaskUserStateStore(t).getTaskProgress()!==E.PENDING_CHECK}))}},{key:"isAssessmentSubmitted",get:function(){var e=this;return!!this.modelData&&this.modelData.taskGroup.structure.taskOrder.every((function(t){return!(e.modelData.tasks[t].isTaskCheckable()&&!e.modelData.tasks[t].isTaskInstructorAnswer())||!!e.getTaskUserStateStore(t).getTaskProgress()}))}},{key:"completedTasksCount",get:function(){return this.completedTasks}}]),e}(),o=(0,p.default)(i.prototype,"completedTasks",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,p.default)(i.prototype,"unCompletedTasksIndexes",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l=(0,p.default)(i.prototype,"taskGroupState",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=(0,p.default)(i.prototype,"taskStates",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,p.default)(i.prototype,"initialize",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initialize"),i.prototype),(0,p.default)(i.prototype,"reset",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),(0,p.default)(i.prototype,"initUnAnsweredQuestionsIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"initUnAnsweredQuestionsIndex"),i.prototype),(0,p.default)(i.prototype,"updateUnAnsweredQuestionsIndex",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"updateUnAnsweredQuestionsIndex"),i.prototype),(0,p.default)(i.prototype,"setTaskStartingTime",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"setTaskStartingTime"),i.prototype),(0,p.default)(i.prototype,"preventTaskFromBeenAnswered",[h.action],Object.getOwnPropertyDescriptor(i.prototype,"preventTaskFromBeenAnswered"),i.prototype),i);t.default=k},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(30)),c=(a(n(31)),n(20)),d=(r=function(){function e(t){(0,s.default)(this,e),this.taskGroupStateApi=void 0,(0,o.default)(this,"data",i,this),this.taskGroupStateApi=t}return(0,l.default)(e,[{key:"initialize",value:function(e){this.data={},e&&e.data&&(this.data.lastLocation=e.data.lastLocation,this.data.lastTaskNavigated=e.data.lastTaskNavigated)}},{key:"setLastLocation",value:function(e){this.data.lastLocation=e,this.taskGroupStateApi.onTaskGroupChange()}},{key:"setLastTaskNavigated",value:function(e){this.data.lastTaskNavigated=e,this.taskGroupStateApi.onTaskGroupChange()}},{key:"reset",value:function(){this.data={}}},{key:"getState",value:function(){return{lastLocation:this.lastLocation,lastTaskNavigated:this.lastTaskNavigated}}},{key:"lastLocation",get:function(){return this.data.lastLocation}},{key:"lastTaskNavigated",get:function(){return this.data.lastTaskNavigated}}]),e}(),i=(0,u.default)(r.prototype,"data",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,u.default)(r.prototype,"initialize",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"initialize"),r.prototype),(0,u.default)(r.prototype,"setLastLocation",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"setLastLocation"),r.prototype),(0,u.default)(r.prototype,"setLastTaskNavigated",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"setLastTaskNavigated"),r.prototype),(0,u.default)(r.prototype,"reset",[c.action],Object.getOwnPropertyDescriptor(r.prototype,"reset"),r.prototype),r);t.default=d},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(33)),u=a(n(34)),c=a(n(29)),d=a(n(3)),f=a(n(4)),p=a(n(30)),h=(a(n(31)),a(n(9))),m=a(n(61)),v=n(20),g=r(n(110)),E=n(223),_=r(n(54)),y=n(67),k=n(102),S=n(198),T=n(54),b=a(n(887)),C=a(n(888)),I=a(n(890)),O=a(n(891)),A=a(n(892)),N=a(n(893)),w=a(n(894)),R=a(n(895)),P=n(77),M=n(110);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=(i={},(0,h.default)(i,y.CORRECT,100),(0,h.default)(i,y.PARTIAL,50),(0,h.default)(i,y.WRONG,0),i),F=(o=function(){function e(t,n,a,r){(0,d.default)(this,e),this.interactionId=void 0,this.taskId=void 0,this.taskType=void 0,this.taskSubType=void 0,this.userStateStoreApi=void 0,this.taskApiForInteractions=void 0,this.taskModel=void 0,(0,c.default)(this,"data",s,this);var i=n.getEntryInteractionModel(),o=i.model,l=i.id;this.data=t&&t.data?{interaction:t.data.interaction||{},data:t.data.data||{}}:{interaction:{},data:{}},this.userStateStoreApi=a,this.taskModel=n,this.taskId=n.id,this.taskType=o?o.type:n.data.taskType,this.taskSubType=(null==o?void 0:o.data.subType)||n.data.subType,this.serviceStore=r,this.taskApiForInteractions={onInteractionUserStateChange:this.onTaskUserStateChange.bind(this),updateCompletedTaskCount:this.updateCompletedTaskCount.bind(this),isAssessment:this.isAssessment.bind(this),updateUnAnsweredQuestionsIndex:this.updateUnAnsweredQuestionsIndex.bind(this),isInteractionsThemeV2:this.isInteractionsThemeV2.bind(this),isTaskCompleted:this.isTaskCompleted.bind(this),getTaskProgress:this.getTaskProgress.bind(this),getSubtasksCheckAnswerStatus:this.getSubtasksCheckAnswerStatus.bind(this),getSubtaskUserAnswers:this.getSubtaskUserAnswers.bind(this)};var u=e.getTaskInteractionStoreByType(this.taskSubType===T.SUBTASK_SUBTYPE?this.taskType+"_"+this.taskSubType:this.taskType);u&&(this.data.interaction[l]=new u(this.data.interaction[l],null==o?void 0:o.data,this.taskApiForInteractions,r),this.interactionId=l),this.checkAnswer=this.checkAnswer.bind(this)}var t,n;return(0,f.default)(e,null,[{key:"getTaskInteractionStoreByType",value:function(e){switch(e){case"MC":return b.default;case"CHOICE_MATRIX":return I.default;case"RATING":return O.default;case"RATING_SUBTASK":return A.default;case"FREE_WRITING":return R.default;case"POLL":return w.default;case"FILL_IN_GAPS":return N.default;case"MATCHING":return C.default;default:return null}}}]),(0,f.default)(e,[{key:"handleCheck",value:function(e,t){var n=this.checkAnswer(),a=Number(this.taskModel.data.maxAttempts),r=this.data.data&&void 0!==this.data.data.attempts?this.data.data.attempts:1,i=g.COMPLETED_RIGHT;n!==y.WRONG&&n!==y.PARTIAL||(i=!e&&r<a?g.TRY_AGAIN:g.COMPLETED_WRONG);var o=this.calcCurrentScore(r,n,t);return this.setTaskData({currentAnswer:n,progress:i,score:o,attempts:r,isEnabled:!1}),n}},{key:"clearTaskData",value:function(){this.interactionId&&this.getInteraction().clearData&&this.getInteraction().clearData()}},{key:"reset",value:function(){this.interactionId&&(this.clearTaskData(),this.data.data={})}},{key:"checkInteractionAsAssessment",value:function(e){var t,n,a;if(this.taskHasInteractionState()||!(0,m.default)(this.getTaskScore())){var r=this.taskModel.getCheckingType();r===k.AUTOMATIC?(n=(t=this.checkAnswer())===y.WRONG||t===y.PARTIAL?g.COMPLETED_WRONG:g.COMPLETED_RIGHT,a=this.calcCurrentScore(1,t,e)):this.taskType===S.FREE_WRITING&&this.taskSubType===_.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER?(t=this.getTaskCurrentAnswer(),a=this.getTaskScore(),n=this.getTaskProgress()):r===k.MANUAL?n=g.PENDING_CHECK:r===k.NONE_CHECKABLE&&(n=g.COMPLETED_RIGHT)}else n=this.taskType===S.FREE_WRITING&&this.taskSubType===_.FREE_WRITING_SUBTYPE_INSTRUCTOR_ANSWER?g.PENDING_CHECK:g.ASSESSMENT_UNANSWERED;this.setTaskData({currentAnswer:t,progress:n,score:a,attempts:1,isEnabled:!1})}},{key:"handleTryAgain",value:function(){var e=(this.data.data&&void 0!==this.data.data.attempts?this.data.data.attempts:1)+1;this.interactionId&&this.getInteraction().tryAgain&&this.getInteraction().tryAgain(),this.setTaskData({progress:g.CHECK,attempts:e,isEnabled:!0})}},{key:"shouldValidateBeforeCheck",value:function(){var e,t;return null===(e=(t=this.getInteraction()).shouldValidateBeforeCheck)||void 0===e?void 0:e.call(t)}},{key:"checkAnswer",value:function(){var e,t;if(this.interactionId)return null===(e=(t=this.getInteraction()).checkAnswer)||void 0===e?void 0:e.call(t)}},{key:"calculatePartialScore",value:function(e){var t,n;if(this.interactionId)return null===(t=(n=this.getInteraction()).calcCurrentScore)||void 0===t?void 0:t.call(n,e)}},{key:"calcCurrentScore",value:function(e,t,n){var a=x[t];return n&&(n.partialScoreCalculation&&(a=this.calculatePartialScore(t)),n.attemptReduction&&(a*=(110-10*e)/100)),a}},{key:"onTaskUserStateChange",value:function(e){this.userStateStoreApi.onTaskChange(this.taskId,e)}},{key:"getTaskUserState",value:function(){var e={},t=this.getTaskUserStateData();return this.interactionId&&(e.interaction={},e.interaction[this.interactionId]=this.getInteraction().getInteractionUserState()),t&&(e.data={},e.data=t),e}},{key:"getTaskUserStateData",value:function(){return this.taskHasState()?this.data.data:null}},{key:"getTaskCurrentAnswer",value:function(){var e=this.getTaskUserStateData();return null==e?void 0:e.currentAnswer}},{key:"getTaskScore",value:function(){var e=this.getTaskUserStateData();return null==e?void 0:e.score}},{key:"getTaskAttempts",value:function(){var e=this.getTaskUserStateData();return null==e?void 0:e.attempts}},{key:"getTaskProgress",value:function(){return this.taskModel.data.subType===T.CONTAINER_SUBTYPE?this.getSubtasksProgress():this.data&&this.data.data.progress||""}},{key:"getSubtasksProgress",value:function(){for(var e=0;e<this.taskModel.subtasks.length;e++){if(!this.userStateStoreApi.getTaskProgress(this.taskModel.subtasks[e]))return""}return M.COMPLETED_RIGHT}},{key:"taskHasState",value:function(){return this.data&&this.data.data&&Object.keys(this.data.data).length>0}},{key:"taskHasStateWithoutTimeSettings",value:function(){var e=JSON.parse(JSON.stringify(this.data));return!(!e||!e.data)&&(delete e.data.startingTime,delete e.data.isEnabled,Object.keys(e.data).length>0)}},{key:"taskHasInteractionState",value:function(){return!(!this.interactionId||!this.getInteraction().interactionHasState())}},{key:"updateCompletedTaskCount",value:function(e){this.userStateStoreApi.updateCompletedTaskCount(e,this.taskId)}},{key:"updateUnAnsweredQuestionsIndex",value:function(){this.userStateStoreApi.updateUnAnsweredQuestionsIndex(this.taskId)}},{key:"isAssessment",value:function(){return this.userStateStoreApi.isAssessment()}},{key:"getInteraction",value:function(){return this.interactionId?this.data.interaction[this.interactionId]:null}},{key:"isTaskCompleted",value:function(){var e=this.getTaskProgress();return-1!==g.TASK_FINISHED_STATUS_LIST.indexOf(e)}},{key:"_getLogEvents",value:(n=(0,u.default)(l.default.mark((function e(t){var n,a,r;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.progress)&&n!==g.CHECK){e.next=3;break}return e.abrupt("return",void 0);case 3:return a=[],e.next=6,this.userStateStoreApi.getEventsContextPromise();case 6:return r=e.sent,n===g.COMPLETED_RIGHT||n===g.COMPLETED_WRONG||n===g.PENDING_CHECK?(a.push(this.userStateStoreApi.getEventLog(this.taskId,E.ACTION_EVENTS.TASK_COMPLETED,r)),this.userStateStoreApi.updateCompletedTaskCountCallback&&this.userStateStoreApi.updateCompletedTaskCountCallback({updateCount:1,taskId:this.taskId})):n!==g.ASSESSMENT_UNANSWERED&&a.push(this.userStateStoreApi.getEventLog(this.taskId,E.ACTION_EVENTS.TASK_ATTEMPT,r)),e.abrupt("return",a.length?a:void 0);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setTaskData",value:(t=(0,u.default)(l.default.mark((function e(t){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data.data=D(D({},this.data.data),t),e.next=3,this._getLogEvents(t);case 3:n=e.sent,this.onTaskUserStateChange(n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setStartingTime",value:function(e){this.setTaskData({startingTime:e})}},{key:"setIsEnabled",value:function(e){this.setTaskData({isEnabled:!!e})}},{key:"setIsOpened",value:function(e){this.setTaskData({isOpened:!!e})}},{key:"getTaskCheckAnswerStatus",value:function(){var e;return null===(e=this.getInteraction())||void 0===e?void 0:e.getCheckAnswerStatus()}},{key:"getSubtasksCheckAnswerStatus",value:function(){for(var e=0;e<this.taskModel.subtasks.length;e++){if(this.userStateStoreApi.getTaskCheckAnswerStatus(this.taskModel.subtasks[e])===P.UNAVAILABLE)return P.UNAVAILABLE}return P.AVAILABLE}},{key:"getSubtaskUserAnswers",value:function(){var e=this,t=this.taskModel.subtasks.filter((function(t){return e.userStateStoreApi.taskHasInteractionState(t)}));return this.taskModel.subtasks.length===t.length?{completed:!0}:{}}},{key:"getAnswers",value:function(){var e=this.getInteraction()&&this.getInteraction().answers;return e=e&&e.toJS?e.toJS():e}},{key:"getTaskInteractionType",value:function(){return this.taskModel.getTaskInteractionType()}},{key:"getTaskInteractionActionType",value:function(){return this.taskModel.getTaskInteractionActionType()}},{key:"isTaskCheckable",value:function(){return this.taskModel.isTaskCheckable()}},{key:"isTaskAutomaticallyCheckable",value:function(){return this.taskModel.isTaskAutomaticallyCheckable()}},{key:"getTaskQuestionText",value:function(){return this.taskModel.getTaskQuestionText()}},{key:"getTaskIndex",value:function(){return this.taskModel.getTaskIndex()}},{key:"getTaskTypeAndPreset",value:function(){return this.taskModel.getTaskTypeAndPreset()}},{key:"getStartingTime",value:function(){return this.data&&this.data.data&&this.data.data.startingTime}},{key:"getPersistent",value:function(){return this.userStateStoreApi.getPersistent()}},{key:"isInteractionsThemeV2",value:function(){return this.serviceStore.ConfigurationService.isInteractionsThemeV2}},{key:"getTaskEventData",value:function(){var e=this.taskModel,t=e.version,n=this.data.data&&this.data.data.attempts||1,a=this.getTaskScore(),r=e.getCheckingType()||k.NONE_CHECKABLE,i=_[this.taskType],o={taskId:this.taskId,taskType:i,taskTitle:null,taskVersion:t,taskIndex:this.getTaskIndex(),checkingType:r,attempts:{taken:n,max:e.data.maxAttempts}};return i!==S.POLL&&i!==S.MC||(o.optionIds=this._getOptionsIdsArray()),i!==S.POLL&&(o.score={correctness:a,value:a}),i===S.RATING&&(o.score.value=this.data.interaction[e.interaction.entry].data.value),o}},{key:"dontShowCorrectAnswers",value:function(){return this.getInteraction().dontShowCorrectAnswers&&this.getInteraction().dontShowCorrectAnswers()}},{key:"_getOptionsIdsArray",value:function(){var e=[],t=this.getAnswers();return t&&!Array.isArray(t)?(Object.keys(t).forEach((function(t){e.push(t)})),e):t||e}},{key:"isAssessmentTaskAnswered",get:function(){return!this.taskHasState()||this.getTaskProgress()!==g.ASSESSMENT_UNANSWERED}},{key:"isEnabled",get:function(){return this.data&&this.data.data.isEnabled}}]),e}(),s=(0,p.default)(o.prototype,"data",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(o.prototype,"handleCheck",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"handleCheck"),o.prototype),(0,p.default)(o.prototype,"clearTaskData",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"clearTaskData"),o.prototype),(0,p.default)(o.prototype,"reset",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"reset"),o.prototype),(0,p.default)(o.prototype,"checkInteractionAsAssessment",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"checkInteractionAsAssessment"),o.prototype),(0,p.default)(o.prototype,"handleTryAgain",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"handleTryAgain"),o.prototype),(0,p.default)(o.prototype,"shouldValidateBeforeCheck",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"shouldValidateBeforeCheck"),o.prototype),(0,p.default)(o.prototype,"checkAnswer",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"checkAnswer"),o.prototype),(0,p.default)(o.prototype,"setTaskData",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setTaskData"),o.prototype),(0,p.default)(o.prototype,"setStartingTime",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setStartingTime"),o.prototype),(0,p.default)(o.prototype,"setIsEnabled",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsEnabled"),o.prototype),(0,p.default)(o.prototype,"setIsOpened",[v.action],Object.getOwnPropertyDescriptor(o.prototype,"setIsOpened"),o.prototype),o);t.default=F},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(9)),s=a(n(29)),l=a(n(3)),u=a(n(4)),c=a(n(12)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=a(n(30)),m=(a(n(31)),n(20)),v=n(390),g=n(67),E=n(77);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var S=(r=function(e){(0,d.default)(n,e);var t=k(n);function n(e,a,r){var o;return(0,l.default)(this,n),o=t.call(this,r),(0,s.default)(o,"data",i,(0,c.default)(o)),o.modelData=void 0,o.data=e||{},o.modelData=a,o}return(0,u.default)(n,[{key:"checkAnswer",value:function(){var e=this.getCheckedAnswers();return this.setData({answers:e}),this.getGeneralAnswerFeedback()}},{key:"setUserAnswerById",value:function(e,t){var a=this.modelData.mode,r=this.answers?JSON.parse(JSON.stringify(this.answers)):{},i={};r[e]===v.McInteractionMode.SELECTED?(delete r[e],i=r):a===v.McInteractionMode.SINGLE?(this.taskApiForInteractions.isInteractionsThemeV2()&&(i=n.getAnswersWithNoSelectedAnswers(r)),i[e]=v.McInteractionMode.SELECTED):i=y(y({},r),{},(0,o.default)({},e,v.McInteractionMode.SELECTED)),this.setData({shuffledIndexes:t,answers:i})}},{key:"resetAnswers",value:function(){this.setData({answers:{}})}},{key:"tryAgain",value:function(){var e=this.getAnswersWithNoWrongAnswers();this.setData({answers:e})}},{key:"clearData",value:function(){this.data={}}},{key:"getCheckedAnswers",value:function(){var e=this.modelData.correctAnswersIds,t=JSON.parse(JSON.stringify(this.answers));return t&&Object.keys(t).forEach((function(n){e.indexOf(n)>-1?t[n]=v.McInteractionMode.CORRECT:t[n]!==v.McInteractionMode.PREV_WRONG&&(t[n]=v.McInteractionMode.WRONG)})),t}},{key:"getGeneralAnswerFeedback",value:function(){var e=this,t=this.modelData.mode,n=this.answers,a=this.modelData.correctAnswersIds.filter((function(t){return e.modelData.options.indexOf(t)>-1})).length,r=0,i=0;return Object.keys(n).forEach((function(e){n[e]===v.McInteractionMode.CORRECT?r++:n[e]!==v.McInteractionMode.PREV_WRONG&&i++})),t!==v.McInteractionMode.SINGLE&&0!==i||r!==a?r>0&&(r<a||i>0)?g.PARTIAL:g.WRONG:g.CORRECT}},{key:"getCheckAnswerStatus",value:function(){var e=this,t=!1;this.answers&&(Object.keys(this.answers).some((function(t){return e.answers[t]===v.McInteractionMode.SELECTED||e.answers[t]===v.McInteractionMode.CORRECT}))&&(t=!0));return t?E.AVAILABLE:E.UNAVAILABLE}},{key:"calcCurrentScore",value:function(e){if(this.modelData.mode===v.McInteractionMode.MULTIPLE){var t=this.modelData.options.length;return(t-this.calcUserMistakes())/t*100}return e===v.McInteractionMode.CORRECT?100:0}},{key:"dontShowCorrectAnswers",value:function(){return this.taskApiForInteractions.isInteractionsThemeV2()&&this.modelData.answersType===v.McAnswerType.TEXT_BOOLEAN}},{key:"getAnswersWithNoWrongAnswers",value:function(){var e=JSON.parse(JSON.stringify(this.answers));return Object.keys(e).forEach((function(t){e[t]===v.McInteractionMode.WRONG&&delete e[t]})),e}},{key:"getCorrectAnswersWithUserAnswers",value:function(e){var t=this.answers&&!e?JSON.parse(JSON.stringify(this.answers)):{};if(this.modelData.checkable){var n=this.modelData.correctAnswersIds;Object.keys(t).forEach((function(e){t[e]===v.McInteractionMode.CORRECT&&-1===n.indexOf(e)&&delete t[e]})),n.forEach((function(e){t[e]=v.McInteractionMode.CORRECT}))}return t}},{key:"calcUserMistakes",value:function(){var e=!0,t=0,n=this.modelData.options.length,a=this.modelData.correctAnswersIds,r=JSON.parse(JSON.stringify(this.answers));return a.forEach((function(n){void 0===r[n]?t++:e=!1})),e?n:t}},{key:"answers",get:function(){return this.data.answers},set:function(e){this.data.answers=e}},{key:"shuffledIndexes",get:function(){return this.data.shuffledIndexes}}],[{key:"getAnswersWithNoSelectedAnswers",value:function(e){return Object.keys(e).forEach((function(t){e[t]===v.McInteractionMode.SELECTED&&delete e[t]})),e}}]),n}(a(n(124)).default),i=(0,h.default)(r.prototype,"data",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,h.default)(r.prototype,"checkAnswer",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"checkAnswer"),r.prototype),(0,h.default)(r.prototype,"setUserAnswerById",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"setUserAnswerById"),r.prototype),(0,h.default)(r.prototype,"resetAnswers",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"resetAnswers"),r.prototype),(0,h.default)(r.prototype,"tryAgain",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"tryAgain"),r.prototype),(0,h.default)(r.prototype,"clearData",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"clearData"),r.prototype),r);t.default=S},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=a(n(30)),h=(a(n(31)),n(20)),m=n(67),v=n(77),g=a(n(124)),E=n(466),_=a(n(889));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var k=(r=function(e){(0,c.default)(n,e);var t=y(n);function n(e,a,r){var l;return(0,s.default)(this,n),l=t.call(this,r),(0,o.default)(l,"data",i,(0,u.default)(l)),l.modelData=void 0,l.data=e||{answers:[]},l.modelData=a,e&&!e.answersOrder&&(l.data.answersOrder=JSON.parse(JSON.stringify(e.answers))),l.setAnswersOrderOnFirstLoad(),l}return(0,l.default)(n,[{key:"shouldValidateBeforeCheck",value:function(){return this.getUnansweredMatches().length>0}},{key:"checkAnswer",value:function(){var e=this.answers,t=this.getCheckedAnswers(e);return this.setData({answers:e,checkedAnswers:t}),this.getGeneralAnswerFeedback(t)}},{key:"tryAgain",value:function(){var e=this.getCheckedAnswersWithNoWrongAnswers(),t=this.taskApiForInteractions.isInteractionsThemeV2?this.getAnswersWithNoWrongAnswers():this.answers;this.setData({checkedAnswers:e,answers:t})}},{key:"getCheckedAnswers",value:function(e){var t=[];return this.modelData.columnA.forEach((function(n,a){var r=e[a];null!=r&&(t[a]=r===a?m.CORRECT:m.WRONG)})),t}},{key:"getGeneralAnswerFeedback",value:function(e){var t=this.data.answers.length,n=0,a=0;return e.forEach((function(e){e===m.CORRECT?n++:a++})),0===a&&n===t?m.CORRECT:n>0&&(n<t||a>0)?m.PARTIAL:m.WRONG}},{key:"getCheckAnswerStatus",value:function(){return n.isThereAnswers(this.data.answers)?v.AVAILABLE:v.UNAVAILABLE}},{key:"getUnansweredMatches",value:function(){var e=this;return this.answersOrder.reduce((function(t,n,a){return e.isMatchAnswered(a)||t.push(a),t}),[])}},{key:"getCheckedAnswersWithNoWrongAnswers",value:function(){return this.checkedAnswers.map((function(e){return e===m.CORRECT?m.CORRECT:""}))}},{key:"getAnswersWithNoWrongAnswers",value:function(){var e=this;return this.answers.map((function(t,n){return e.checkedAnswers[n]===m.CORRECT?t:void 0}))}},{key:"setAnswers",value:function(e){this.setData({answers:e})}},{key:"setAnswersOrder",value:function(e){this.setData({answersOrder:e})}},{key:"setAnswersOrderOnFirstLoad",value:function(){var e=[];if(!this.data.answersOrder){var t=this.modelData[E.COLUMNB].map((function(e,t){return t}));e=(0,_.default)(t),this.data.answersOrder=e,this.data.answers=new Array(e.length)}}},{key:"swapCards",value:function(e,t){var n=this.data.answersOrder,a=n[e];n[e]=n[t],n[t]=a,this.setAnswersOrder(n);var r=JSON.parse(JSON.stringify(this.data.answers));r[e]=r[t]?n[e]:r[t],r[t]=n[t],this.setAnswers(r)}},{key:"isInteractionStateNotEmpty",value:function(e){return n.isThereAnswers(e)}},{key:"removeMatchAnswer",value:function(e){var t=JSON.parse(JSON.stringify(this.data.answers));t[e]=null,this.setAnswers(t)}},{key:"isAnswerChecked",value:function(e){return this.checkedAnswers&&this.checkedAnswers[e]}},{key:"isMatchAnswered",value:function(e){return!(void 0===this.answers[e]||null===this.answers[e])}},{key:"answers",get:function(){return this.data.answers},set:function(e){this.data.answers=e}},{key:"answersOrder",get:function(){return this.data.answersOrder},set:function(e){this.data.answersOrder=e}},{key:"checkedAnswers",get:function(){return this.data.checkedAnswers},set:function(e){this.data.checkedAnswers=e}}],[{key:"isThereAnswers",value:function(e){for(var t=!1,n=0;n<e.length;n++)if(void 0!==e[n]&&null!==e[n]){t=!0;break}return t}}]),n}(g.default),i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(r.prototype,"shouldValidateBeforeCheck",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"shouldValidateBeforeCheck"),r.prototype),(0,p.default)(r.prototype,"checkAnswer",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"checkAnswer"),r.prototype),(0,p.default)(r.prototype,"tryAgain",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"tryAgain"),r.prototype),(0,p.default)(r.prototype,"setAnswers",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setAnswers"),r.prototype),(0,p.default)(r.prototype,"setAnswersOrder",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setAnswersOrder"),r.prototype),r);t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){function t(e,t){return e.every((function(e,n){return e===t[n]}))}for(var n=e.concat();t(n,e);)for(var a,r,i=e,o=e.length;o;a=parseInt(Math.random()*o,10),r=i[--o],i[o]=i[a],i[a]=r);return e}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(9)),s=a(n(29)),l=a(n(3)),u=a(n(4)),c=a(n(12)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=a(n(30)),m=(a(n(31)),n(20)),v=n(67),g=n(77);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var k=(r=function(e){(0,d.default)(n,e);var t=y(n);function n(e,a,r){var o;return(0,l.default)(this,n),o=t.call(this,r),(0,s.default)(o,"data",i,(0,c.default)(o)),o.modelData=void 0,o.data=e||{},o.modelData=a,o}return(0,u.default)(n,[{key:"checkAnswer",value:function(){var e=this.getStateFeedback(this.modelData.rows,this.selectedIndexes,this.correctRowIndexes);return this.turnOnCheckMode(),e}},{key:"tryAgain",value:function(){var e=this.modelData.rows,t=this.selectedIndexes||{},n=Object.keys(t).filter((function(n){var a=t[n];return e[n].correctIndex===a})).map((function(e){return Number(e)})),a=this.correctRowIndexes;void 0!==a&&(n=n.concat(a.toJS()));var r=Object.keys(t).filter((function(e){return-1===n.indexOf(Number(e))})).reduce((function(e,n){return _(_({},e),{},(0,o.default)({},n,t[n]))}),{});this.setData({selectedIndexes:r,correctRowIndexes:n,checkMode:!1})}},{key:"setSelectedIndexForRowIndex",value:function(e,t){var n={};this.selectedIndexes&&(n=this.selectedIndexes),n[e]=t,this.setData({selectedIndexes:n})}},{key:"getCheckAnswerStatus",value:function(){return this.selectedIndexes&&Object.keys(this.selectedIndexes).length>0?g.AVAILABLE:g.UNAVAILABLE}},{key:"getInteractionUserAnswers",value:function(){return this.selectedIndexes||{}}},{key:"getStateFeedback",value:function(e,t,n){var a=void 0!==n,r=function(r){return a&&-1!==n.indexOf(r)||t&&t[r]===e[r].correctIndex};return e.slice(1).reduce((function(e,t,n){var a=r(n+1);switch(e){case v.PARTIAL:return v.PARTIAL;case v.CORRECT:return a?v.CORRECT:v.PARTIAL;default:return a?v.PARTIAL:v.WRONG}}),r(0)?v.CORRECT:v.WRONG)}},{key:"turnOnCheckMode",value:function(){this.setData({checkMode:!0})}},{key:"selectedIndexes",get:function(){return this.data.selectedIndexes}},{key:"correctRowIndexes",get:function(){return this.data.correctRowIndexes}},{key:"checkMode",get:function(){return this.data.checkMode}}]),n}(a(n(124)).default),i=(0,h.default)(r.prototype,"data",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,h.default)(r.prototype,"checkAnswer",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"checkAnswer"),r.prototype),(0,h.default)(r.prototype,"tryAgain",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"tryAgain"),r.prototype),(0,h.default)(r.prototype,"setSelectedIndexForRowIndex",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedIndexForRowIndex"),r.prototype),(0,h.default)(r.prototype,"turnOnCheckMode",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"turnOnCheckMode"),r.prototype),r);t.default=k},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=a(n(30)),h=(a(n(31)),n(20));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var v=(r=function(e){(0,c.default)(n,e);var t=m(n);function n(e,a,r){var l;return(0,s.default)(this,n),l=t.call(this,r),(0,o.default)(l,"data",i,(0,u.default)(l)),l.modelData=void 0,l.data=e||{},l.modelData=a,l}return(0,l.default)(n,[{key:"getCheckAnswerStatus",value:function(){return this.taskApiForInteractions.getSubtasksCheckAnswerStatus()}},{key:"getInteractionUserAnswers",value:function(){return this.taskApiForInteractions.getSubtaskUserAnswers()}},{key:"setSubtaskOrder",value:function(e){this.setData({shuffledIndexes:e})}},{key:"shuffledIndexes",get:function(){return this.data.shuffledIndexes}}]),n}(a(n(124)).default),i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(r.prototype,"setSubtaskOrder",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setSubtaskOrder"),r.prototype),r);t.default=v},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=a(n(30)),h=(a(n(31)),n(20)),m=n(77);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var g=(r=function(e){(0,c.default)(n,e);var t=v(n);function n(e,a,r){var l;return(0,s.default)(this,n),l=t.call(this,r),(0,o.default)(l,"data",i,(0,u.default)(l)),l.modelData=void 0,l.data=e||{},l.modelData=a,l}return(0,l.default)(n,[{key:"setSelectedValue",value:function(e){this.setData({value:e})}},{key:"getCheckAnswerStatus",value:function(){return this.selectedValue&&Object.keys(this.selectedValue).length>0?m.AVAILABLE:m.UNAVAILABLE}},{key:"getInteractionUserAnswers",value:function(){return this.selectedValue||{}}},{key:"setTextAnswer",value:function(e){this.setData({textAnswer:e})}},{key:"selectedValue",get:function(){return this.data}}]),n}(a(n(124)).default),i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(r.prototype,"setSelectedValue",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setSelectedValue"),r.prototype),(0,p.default)(r.prototype,"setTextAnswer",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setTextAnswer"),r.prototype),r);t.default=g},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o,s,l=a(n(9)),u=a(n(29)),c=a(n(3)),d=a(n(12)),f=a(n(4)),p=a(n(6)),h=a(n(8)),m=a(n(7)),v=a(n(30)),g=(a(n(31)),n(20)),E=a(n(13)),_=n(67),y=n(77),k=a(n(124)),S=r(n(395));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var I=/[\u200B\u200C\u200D\uFEFF]/g,O=/['`‘’]/g,A=/["“”]/g,N=(i=function(e){(0,p.default)(n,e);var t=C(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{answers:null,checkedAnswers:null},r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;(0,c.default)(this,n),e=t.call(this,i),(0,u.default)(e,"data",o,(0,d.default)(e)),(0,u.default)(e,"checkMode",s,(0,d.default)(e)),e.modelData=void 0,e.isDND=void 0,e.duplicatesMap=void 0,e.serviceStore=void 0,e.tempAnswers=void 0,e.debounceSaveUserState=E.default.debounce((function(){e.setData({answers:e.tempAnswers})}),500),e.data={answers:a.answers||{},checkedAnswers:a.checkedAnswers||{},checkMode:""},e.modelData=r,e.serviceStore=l;var f=e.modelData.answersType;return e.isDND=f===S.FITGAnswerMode.DNDGAP,e.isDND?e.duplicatesMap=S.default.createDuplicates(r.gaps):e.tempAnswers=JSON.parse(JSON.stringify(e.data.answers)),e.checkMode=!1,e}return(0,f.default)(n,[{key:"answers",get:function(){return this.data.answers},set:function(e){this.data.answers=e}},{key:"checkedAnswers",get:function(){return this.data.checkedAnswers}}]),(0,f.default)(n,[{key:"compareUserToCorrectAnswer",value:function(e,t){if(e===t)return!0;var n=this.serviceStore.ConfigurationService.fillInWritingMultiAnswersDelimiter;if(!n||-1===t.indexOf(n))return!1;for(var a=t.split(n),r=0;r<a.length;r++)if(e===a[r].trim())return!0;return!1}},{key:"shouldValidateBeforeCheck",value:function(){var e=this.isDND?this.data.answers:this.tempAnswers,t=this.modelData.gaps;return Object.keys(t).length>Object.keys(e).length}},{key:"checkAnswer",value:function(){var e=this.isDND?this.data.answers:this.tempAnswers,t=this.getCheckedAnswers();return this.setData({answers:e,checkedAnswers:t}),this.checkMode=!this.checkMode,this.getGeneralAnswerFeedback(t)}},{key:"tryAgain",value:function(){var e=this.getAnswersWithNoWrongAnswers();this.setData({answers:e.answers,checkedAnswers:e.checkedAnswers}),this.checkMode=!this.checkMode}},{key:"getCheckedAnswers",value:function(){var e=this,t={},n=this.isDND?this.data.answers:this.tempAnswers,a=this.modelData.gaps,r=this.isDND;return Object.keys(a).forEach((function(i){var o=e.getAnswerText({answers:n,id:i}),s=e.getAnswerText({answers:a,id:i});r?e.duplicatesMap[s].indexOf(o)>-1?t[i]=_.CORRECT:t[i]=_.WRONG:e.compareUserToCorrectAnswer(o,s)?t[i]=_.CORRECT:t[i]=_.WRONG})),t}},{key:"getCheckAnswerStatus",value:function(){return this.hasUncheckedAnswers()?y.AVAILABLE:y.UNAVAILABLE}},{key:"hasUncheckedAnswers",value:function(){var e=this,t=this.data.answers;return!(!t||Object.keys(t).length<1)&&(!this.data.checkedAnswers||Object.keys(t).some((function(t){return!e.data.checkedAnswers[t]||e.data.checkedAnswers[t]!==_.CORRECT})))}},{key:"getAnswerText",value:function(e){var t=e.answers,n=e.id,a=String(t[n]||"");if(!a)return"";if(this.isDND)return a;var r=document.createElement("div");r.innerHTML=a;var i=r.innerText;return r.innerHTML="",i=(i=(i=(i=(i=this.modelData.caseSensitive?i:i.toLowerCase()).replace(I,"")).replace(O,"'")).replace(A,'"')).trim()}},{key:"getGeneralAnswerFeedback",value:function(e){var t=Object.keys(this.modelData.gaps).length,n=0,a=0;return Object.keys(e).forEach((function(t){e[t]===_.CORRECT?n++:a++})),0===a&&n===t?_.CORRECT:n>0&&(n<t||a>0)?_.PARTIAL:_.WRONG}},{key:"getAnswersWithNoWrongAnswers",value:function(){var e=this,t=this.data.checkedAnswers||{};return t&&Object.keys(t).forEach((function(n){t[n]===_.WRONG&&(delete e.data.answers[n],delete t[n])})),{answers:this.data.answers,checkedAnswers:t}}},{key:"updateUserAnswer",value:function(e,t){this.tempAnswers[e]=t,this.debounceSaveUserState()}},{key:"updateUserAnswers",value:function(e,t){var n=b(b({},this.data.answers),{},(0,l.default)({},e,t));this.setData({answers:n})}},{key:"removeDNDUserAnswer",value:function(e){var t=b({},this.data.answers);delete t[e],this.setData({answers:t})}}]),n}(k.default),o=(0,v.default)(i.prototype,"data",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=(0,v.default)(i.prototype,"checkMode",[g.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,v.default)(i.prototype,"shouldValidateBeforeCheck",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"shouldValidateBeforeCheck"),i.prototype),(0,v.default)(i.prototype,"checkAnswer",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"checkAnswer"),i.prototype),(0,v.default)(i.prototype,"tryAgain",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"tryAgain"),i.prototype),(0,v.default)(i.prototype,"updateUserAnswer",[g.action],Object.getOwnPropertyDescriptor(i.prototype,"updateUserAnswer"),i.prototype),i);t.default=N},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=a(n(30)),h=(a(n(31)),n(20)),m=n(77),v=a(n(124)),g=n(284);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var _=(r=function(e){(0,c.default)(n,e);var t=E(n);function n(e,a,r){var l;return(0,s.default)(this,n),l=t.call(this,r),(0,o.default)(l,"data",i,(0,u.default)(l)),l.modelData=void 0,l.data=e||{},l.modelData=a,l}return(0,l.default)(n,[{key:"getInteractionUserAnswers",value:function(){return this.answers||{}}},{key:"getCheckAnswerStatus",value:function(){return this.answers&&this.answers.length>0&&!this.taskApiForInteractions.isTaskCompleted()?m.AVAILABLE:m.UNAVAILABLE}},{key:"setUserAnswerById",value:function(e,t){var n=this.modelData.mode,a=this.answers?this.answers:[],r=[];if(n===g.PollInteractionMode.SINGLE)r.push(e);else{if(t)a.push(e);else{var i=a.indexOf(e);a.splice(i,1)}r=a}this.setData({answers:r})}},{key:"answers",get:function(){return this.data.answers},set:function(e){this.data.answers=e}}]),n}(v.default),i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(r.prototype,"setUserAnswerById",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setUserAnswerById"),r.prototype),r);t.default=_},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o=a(n(29)),s=a(n(3)),l=a(n(4)),u=a(n(12)),c=a(n(6)),d=a(n(8)),f=a(n(7)),p=a(n(30)),h=(a(n(31)),n(20)),m=a(n(13)),v=a(n(124)),g=n(77);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var _=(r=function(e){(0,c.default)(n,e);var t=E(n);function n(e,a,r){var l;return(0,s.default)(this,n),l=t.call(this,r),(0,o.default)(l,"data",i,(0,u.default)(l)),l.debounceSaveUserState=m.default.debounce((function(e,t){l.setData({textAnswer:e,plagiarismScanType:t})}),400),l.data=e||{},l}return(0,l.default)(n,[{key:"getInteractionUserAnswers",value:function(){return this.textAnswer||this.files.length?{textAnswer:this.textAnswer,files:this.files}:null}},{key:"setTextAnswer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.debounceSaveUserState(e,t)}},{key:"setFileData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=JSON.parse(JSON.stringify(this.files));n.push(e),this.setData({files:n,plagiarismScanType:t})}},{key:"removeFile",value:function(e){var t=JSON.parse(JSON.stringify(this.files));t.splice(e,1),this.setData({files:t})}},{key:"getCheckAnswerStatus",value:function(){return this.textAnswer||this.files.length?g.AVAILABLE:g.UNAVAILABLE}},{key:"isInteractionStateNotEmpty",value:function(e){return!(!(null==e?void 0:e.textAnswer)&&!(null==e?void 0:e.files.length))}},{key:"textAnswer",get:function(){return this.data.textAnswer}},{key:"files",get:function(){return this.data.files&&this.data.files.length>0?this.data.files:[]}}]),n}(v.default),i=(0,p.default)(r.prototype,"data",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,p.default)(r.prototype,"setTextAnswer",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setTextAnswer"),r.prototype),(0,p.default)(r.prototype,"setFileData",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"setFileData"),r.prototype),(0,p.default)(r.prototype,"removeFile",[h.action],Object.getOwnPropertyDescriptor(r.prototype,"removeFile"),r.prototype),r);t.default=_},function(e,t,n){"use strict";var a=n(1),r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(192)),o=r(n(55)),s=a(n(441)),l=r(n(151)),u=r(n(225)),c={TASK_GROUP_PLAYER_VIEW_TYPES:i,INTERACTION_CATEGORY:o,INTERACTION_FONT_FAMILIES:s.default,TASK_GROUP_VIEW_MODE:l,TASK_BUTTONS:u};t.default=c},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(53))),f=r(n(13)),p=r(n(281)),h=r(n(601));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var v=d.default.LogManager,g=function(e){(0,s.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e))._isTaskGroupVisible=e.isTaskGroupVisible,a._interactions=window.t2kinteraction||p.default,a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this;this._loadInteractions(),this.props.taskGroupId&&h.default.obtainLock(this.props.taskGroupId,this.props.channelId).then((function(t){t.acknowledged||e.setState({lockData:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.taskGroupId!==this.props.taskGroupId||e.taskGroupVersion!==this.props.taskGroupVersion?this._reloadTaskGroup():(e.taskId!==this.props.taskId||this.didExternalControlChange(e.externalControls)||this.updateStillNeeded)&&this._updateTask(this.props.loadTaskGroupCallback),e.taskGroupId!==this.props.taskGroupId&&(e.taskGroupId&&h.default.releaseLock(e.taskGroupId,this.props.channelId),h.default.obtainLock(this.props.taskGroupId,this.props.channelId).then((function(e){e.acknowledged||t.setState({lockData:e})})))}},{key:"didExternalControlChange",value:function(e){var t=this.props.externalControls;if(!e&&t)return!0;if(e&&t&&Object.keys(e).length!==Object.keys(t).length)return!0;if(e&&t){for(var n=Object.keys(e),a=0;a<n.length;a++)if(e[n[a]]&&t[n[a]]&&e[n[a]].key!==t[n[a]].key)return!0;if(e.task_group_bottom&&t.task_group_bottom&&e.task_group_bottom.key!==t.task_group_bottom.key)return!0}return!1}},{key:"componentWillUnmount",value:function(){this.unmountView(),this.props.taskGroupId&&h.default.releaseLock(this.props.taskGroupId,this.props.channelId)}},{key:"render",value:function(){return c.default.createElement("div",{className:"task-group-edit",id:"task-group-edit-interaction"})}},{key:"unmountView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(this._taskGroupPlayerView){var n=this._taskGroupPlayerView;delete this._taskGroupPlayerView,n.unmount((function(n){n&&v.error(e.props.loggerName,{message:"Failed to unmount task group: ".concat(n.message)}),t()}))}else t()}},{key:"_loadInteractions",value:function(){var e=this,t={serviceUrl:this.props.serviceUrl,authenticationToken:this.props.token,serviceHeaders:this.props.customHeaders,appData:f.default.getAppdata()};this._interactions.getApi(t,(function(t,n){t?v.error(e.props.loggerName,{message:"Failed to load interactions API: ".concat(t.message)}):(e._t2kinteractionApi=n,e.props.taskGroupId?e._editTaskGroup():e._createTaskGroup(e.props.taskType))}))}},{key:"_reloadTaskGroup",value:function(){this.unmountView(this._editTaskGroup.bind(this))}},{key:"_createTaskGroup",value:function(e){if(delete this._taskGroupEditor,this._t2kinteractionApi){var t={initialData:{taskType:e,contentLanguage:this.props.contentLocale,title:this.props.title?this.props.title:""},saveStatus:this.props.saveStatus,onDeleteTask:this.props.onDeleteTask,onDuplicateTask:this.props.onDuplicateTask,onTaskRemovedFromSuggested:this.props.onTaskRemovedFromSuggested,externalControls:this.props.externalControls,disableDragOrdering:this.props.disableDragOrdering,hideTaskGroupTitle:this.props.hideTaskGroupTitle,reducedEditorCapabilitiesV2:this.props.reducedEditorCapabilitiesV2};this._t2kinteractionApi.createTaskGroup(t,this._getCreateTaskGroupCallback())}}},{key:"_editTaskGroup",value:function(){var e=this.props,t=e.taskGroupId,n=e.taskGroupVersion,a=e.saveStatus,r=e.context,i=r.providerId,o=r.contextObject,s=e.doneCallback,l=e.onDeleteTask,u=e.onDuplicateTask,c=e.onTaskRemovedFromSuggested,d=e.externalControls,f=e.disableDragOrdering,p=e.hideTaskGroupTitle,h=e.onInteractionsEdit,m=e.taskGroupData,v=e.editorOptions,g=e.reducedEditorCapabilitiesV2;delete this._taskGroupEditor,this._t2kinteractionApi&&this._t2kinteractionApi.editTaskGroup({taskGroupIdentity:{taskGroupId:t,taskGroupVersion:n,taskGroupData:m},saveStatus:a,getEventsContext:function(e){e({providerId:i||"",data:o||{}}),s()},onDeleteTask:l,onDuplicateTask:u,onTaskRemovedFromSuggested:c,externalControls:d,disableDragOrdering:f,hideTaskGroupTitle:p,onInteractionsEdit:h,editorOptions:v,reducedEditorCapabilitiesV2:g},this._getEditTaskGroupCallback())}},{key:"addTask",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3?arguments[3]:void 0;this._taskGroupEditor&&this._taskGroupEditor.addTask(e,t,n,a)}},{key:"getBackgroundColor",value:function(){return this._taskGroupEditor?this._taskGroupEditor.backgroundColor:null}},{key:"setBackgroundColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._taskGroupEditor&&this._taskGroupEditor.setBackgroundColor(e,t)}},{key:"setEditorOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._taskGroupEditor&&this._taskGroupEditor.setEditorOptions(e,t)}},{key:"setOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this._taskGroupPlayerView&&this._taskGroupPlayerView.setOptions(e,t)}},{key:"createNewVersion",value:function(e){this._taskGroupEditor&&this._taskGroupEditor.createNewVersion(e)}},{key:"setActive",value:function(e){this._isTaskGroupVisible=e,this._taskGroupPlayerView&&this._taskGroupPlayerView.setOptions({interfaceLanguage:this.props.interfaceLocale,isTaskGroupVisible:e},(function(){}))}},{key:"getSuggestedTasksCount",value:function(){return this._taskGroupEditor?this._taskGroupEditor.getSuggestedTasksCount():0}},{key:"_getCreateTaskGroupCallback",value:function(){var e=this;return function(t,n){t?v.error(e.props.loggerName,{message:"Failed creating task group editor: ".concat(t.message)}):(e._taskGroupEditor=n,e.unmountView(e._mountTaskGroup.bind(e)))}}},{key:"_getEditTaskGroupCallback",value:function(){var e=this;return function(t,n){t?v.error(e.props.loggerName,{message:"Failed loading task group editor: ".concat(t.message)}):n.id!==e.props.taskGroupId||n.version!==e.props.taskGroupVersion&&e.props.taskGroupVersion||(e._taskGroupEditor=n,e.unmountView(e._mountTaskGroup.bind(e)))}}},{key:"_mountTaskGroup",value:function(){if(!this._isMounting){var e={isReadOnly:this.props.isReadOnly,singleTaskMode:this.props.singleTaskMode,hideToolbar:this.props.hideToolbar,hidePoweredBy:!0,viewTaskId:this.props.taskId,taskGroupEditorViewType:this.props.viewType,ignoreEvents:this.props.ignoreEvents,isTaskGroupVisible:this._isTaskGroupVisible,viewMode:this.props.viewMode,interfaceLanguage:this.props.interfaceLocale,contentLanguage:this.props.contentLocale,highlightedTasks:this.props.highlightedTasks,hideEmptyState:this.props.hideEmptyState,reducedEditorCapabilitiesV2:this.props.reducedEditorCapabilitiesV2};this.props.taskStartingIndex&&(e.taskStartingIndex=this.props.taskStartingIndex),this._isMounting=!0;var t=document.getElementById("task-group-edit-interaction");t&&this._taskGroupEditor.mount({domElement:t,defaultViewOptions:e},this._getMountCallback(this.props.taskId,this._taskGroupEditor))}}},{key:"_getMountCallback",value:function(e,t){var n=this;return function(a,r){n._isMounting=!1,a&&v.error(n.props.loggerName,{message:"Failed to mount task group view: ".concat(a.message)}),n._taskGroupPlayerView=r,!n._taskGroupEditor||t.id===n._taskGroupEditor.id&&t.version===n._taskGroupEditor.version||n.props.taskGroupId!==n._taskGroupEditor.id||n.props.taskGroupVersion!==n._taskGroupEditor.version?e!==n.props.taskId&&t.id===n.props.taskGroupId&&t.version===n.props.taskGroupVersion?n._updateTask(n.props.loadTaskGroupCallback):n.props.loadTaskGroupCallback(t.id,t.version,t.backgroundColor,t.getTasksCount()):(n.props.loadTaskGroupCallback(t.id,t.version,t.backgroundColor,t.getTasksCount()),n.unmountView(n._mountTaskGroup.bind(n)))}}},{key:"_updateTask",value:function(e){var t=this;if(this._taskGroupPlayerView){var n={interfaceLanguage:this.props.interfaceLocale,viewTaskId:this.props.taskId,externalControls:this.props.externalControls};this.props.taskStartingIndex&&(n.taskStartingIndex=this.props.taskStartingIndex),this._taskGroupPlayerView.setOptions(n,(function(n){n&&v.error(t.props.loggerName,{message:"Failed to update task view: ".concat(n.message)}),e(!n)})),this.updateStillNeeded=!1}else this.updateStillNeeded=!0,e(!1)}},{key:"setOrder",value:function(e){this._taskGroupEditor.setOrder(e)}},{key:"scrollToTask",value:function(e){this._taskGroupEditor.scrollToTask(e)}}]),n}(c.Component);t.default=g,g.defaultProps={context:{},token:{},singleTaskMode:!1,ignoreEvents:!0,isTaskGroupVisible:!0,hideToolbar:!0,loadTaskGroupCallback:function(){},doneCallback:function(){},channelId:void 0,taskGroupId:void 0,taskId:void 0,taskGroupVersion:void 0,viewType:void 0,isReadOnly:void 0,taskStartingIndex:void 0,customHeaders:void 0,viewMode:void 0,interfaceLocale:void 0,contentLocale:void 0,title:void 0,taskType:void 0,saveStatus:{started:function(){return console.log("SAVE STARTED!!!!")},finished:function(){return console.log("SAVE FINISHED!!!!")},locked:function(){return console.log("locked")}},onDeleteTask:function(){},onDuplicateTask:function(){},onTaskRemovedFromSuggested:function(){},externalControls:void 0,disableDragOrdering:!1,hideTaskGroupTitle:!1,highlightedTasks:[],hideEmptyState:null,editorOptions:{},reducedEditorCapabilitiesV2:!1}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(28)),s=a(n(13)),l=o.default.Instance,u=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"obtainLock",value:function(e,t){var n=s.default.getAppdata()?s.default.getAppdata().backend_url:"";return l.post("".concat(n,"/PlayAppService/editor/lock/channels/:channelId/contents/:id"),{id:e,channelId:t},{},{failOnOffline:!0}).catch((function(){return Promise.resolve({acknowledged:!1})}))}},{key:"releaseLock",value:function(e,t){var n=s.default.getAppdata()?s.default.getAppdata().backend_url:"";return l.remove("".concat(n,"/PlayAppService/editor/lock/channels/:channelId/contents/:id"),{id:e,channelId:t},{failOnOffline:!0}).catch((function(){return Promise.resolve(null)}))}},{key:"touchLock",value:function(e,t){var n=s.default.getAppdata()?s.default.getAppdata().backend_url:"";return l.put("".concat(n,"/PlayAppService/editor/lock/channels/:channelId/contents/:id/touch"),{id:e,channelId:t},{},{failOnOffline:!0}).catch((function(){return Promise.resolve(null)}))}}]),e}();t.default=u},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=r(n(127)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=n(1162),v=r(n(13)),g=r(n(36)),E=r(n(18)),_=r(n(41)),y=r(n(900)),k=a(n(151)),S=r(n(485)),T=r(n(903)),b=r(n(465)),C=r(n(904)),I=r(n(905)),O=r(n(906)),A=r(n(907));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var w="left",R="right",P=function(e){(0,u.default)(n,e);var t=N(n);function n(e){var a,r,i,s;(0,o.default)(this,n),(s=t.call(this,e)).keyDown=function(e){"Escape"!==e.key&&27!==e.keyCode||s.closeOverlay()},s._onResize=s._onResize.bind((0,l.default)(s)),s._preventSwipeOnScroll=s._preventSwipeOnScroll.bind((0,l.default)(s)),s.isMobile=v.default.isMobile()||v.default.isTablet()&&e.isInteractionsThemeV2,s.appData=v.default.getAppdata();var u=null===(a=s.appData)||void 0===a||null===(r=a.appConf)||void 0===r?void 0:r.locale,c=!0;return"1"===v.default.getURLParam("noAnimation")&&(c=!1),s.state={currentTaskIndex:0,openAnimation:c,closeAnimation:!1,riseHintAnimation:!1,windowHeight:window.innerHeight,windowWidth:window.innerWidth,isLandscape:s.isMobile&&window.innerWidth>window.innerHeight,isCompleted:e.isCompleted,preventSwipeData:[],taskGroupRendered:!1,ltr:!u||!v.default.isRtl(u),isHintClicked:!1,closing:!1},s.setTaskDialogHeight=s.setTaskDialogHeight.bind((0,l.default)(s)),s.closeOverlay=s.closeOverlay.bind((0,l.default)(s)),s._onNext=s._onNext.bind((0,l.default)(s)),s._onPrevious=s._onPrevious.bind((0,l.default)(s)),s._onPlayerLoaded=s._onPlayerLoaded.bind((0,l.default)(s)),s._onTaskGroupRendered=s._onTaskGroupRendered.bind((0,l.default)(s)),s._onAnsweredCallback=s._onAnsweredCallback.bind((0,l.default)(s)),s._renderTaskGroupActionsV2=s._renderTaskGroupActionsV2.bind((0,l.default)(s)),s._onTaskSelect=s._onTaskSelect.bind((0,l.default)(s)),s.isThemeV2=e.isInteractionsThemeV2,s.sectionsCount=1,s.isVideo="video"===s.props.playerType,s.isUC="uc"===s.props.playerType,s.showHint=(null===(i=s.props.taskGroupOptions)||void 0===i?void 0:i.enableHint)&&s.isVideo,s}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.isThemeV2?(this.isMobile&&window.addEventListener("resize",this._onResize,!0),this._stopOpenAnimation(1600)):this.intervalId=setInterval(this.setTaskDialogHeight,0),addEventListener("keydown",this.keyDown)}},{key:"componentDidUpdate",value:function(e,t){!this.props.forceClose||this.state.closing?this.isVideo&&!t.isHintClicked&&this.state.isHintClicked&&this._stopOpenAnimation():this.closeOverlay(void 0,!0)}},{key:"componentWillUnmount",value:function(){this.isThemeV2&&this.isMobile&&window.removeEventListener("resize",this._onResize,!0),this.props.isCompleted!==this.state.isCompleted&&this.props.updateMarkerCompletion(this.state.isCompleted),this.props.onClose&&this.props.onClose(),this._ismounted=!1,removeEventListener("keydown",this.keyDown)}},{key:"_onResize",value:function(){this.updateScreenOrientation()}},{key:"updateScreenOrientation",value:function(){var e,t=this.state,n=t.windowWidth,a=t.isLandscape,r=window.innerHeight,i=window.innerWidth;e=(!!a||n!==i)&&window.innerWidth>window.innerHeight,this.setState({windowHeight:r,windowWidth:i,isLandscape:e})}},{key:"setTaskDialogHeight",value:function(){var e=document.getElementsByClassName("overlay-task-group__content")[0],t=document.getElementsByClassName("ttk-task-group single-task-mode")[0];if(e&&t){clearInterval(this.intervalId),e.style.visibility="visible",e.style.maxHeight="85%";var n=t.querySelector(".t2i-int-image img");n&&!n.complete?n.onload=function(){e.style.height=t.clientHeight+130+"px"}:e.style.height=t.clientHeight+130+"px"}else e&&(e.style.visibility="hidden")}},{key:"render",value:function(){var e=this,t=(0,h.default)("overlay-task-group",{"open-animation":this.state.openAnimation,"close-animation":this.state.closeAnimation,"rise-hint-animation":this.showHint&&this.state.riseHintAnimation,"interactions-theme-2":this.isThemeV2,"normall-scroll-element":this.isMobile,landscape:this.isThemeV2&&this.state.isLandscape,multiple:this.isThemeV2&&this.props.taskIds.length>1,hint:this.showHint&&!this.state.isHintClicked,uc:this.isUC});return this.isThemeV2?this.isMobile?this.showHint&&!this.state.isHintClicked?this._renderHint(t):p.default.createElement("div",{className:t},1===this.props.taskIds.length?this._renderTask():p.default.createElement(m.Swipeable,{className:"swipeable-container",onSwipedLeft:function(t){return e._onSwiped(t,w,e.state.ltr?e._onNext:e._onPrevious)},onSwipedRight:function(t){return e._onSwiped(t,R,e.state.ltr?e._onPrevious:e._onNext)}},this._renderTask())):p.default.createElement("div",{className:t},this._renderTask()):p.default.createElement("div",{className:t},p.default.createElement("div",{className:"overlay-task-group__content"},this._renderCloseSection(),p.default.createElement("div",{className:"overlay-task-group__task-wrapper"},this._renderTask()),this._renderControls()))}},{key:"_renderHint",value:function(e){var t=this,n=function(){t._showCloseAnimation((function(){t.setState({isHintClicked:!0,openAnimation:!0,riseHintAnimation:!1})}),"riseHintAnimation",400)},a=this.state.isLandscape?this.state.ltr?"overlay-taskgroup.hint-message.swipe-right":"overlay-taskgroup.hint-message.swipe-left":"overlay-taskgroup.hint-message.swipe-up";return p.default.createElement("div",{className:e},p.default.createElement(A.default,{className:"hint-play-button",onClick:this.closeOverlay}),p.default.createElement(m.Swipeable,{className:(0,h.default)("hint-container",{ltr:this.state.ltr,rtl:!this.state.ltr}),onSwipedUp:this.state.isLandscape?null:n,onSwipedLeft:this.state.isLandscape&&!this.state.ltr?n:null,onSwipedRight:this.state.isLandscape&&this.state.ltr?n:null},p.default.createElement("div",{className:"hint-separator"}),p.default.createElement("div",{className:"hint-wrapper",onClick:n},this._renderMultipleTasksSectionV2(),p.default.createElement("div",{className:"hint-message"},p.default.createElement("div",null,E.default.translate("overlay-taskgroup.hint-message.line-1")),p.default.createElement("div",null,E.default.translate(a))),p.default.createElement(O.default,null))))}},{key:"_onSwiped",value:function(e,t,n){this._allowSwipe(e,t)&&n()}},{key:"_allowSwipe",value:function(e,t){if(!this.state.preventSwipeData.length)return!0;var n=e&&e.event&&e.event.path||[],a=this.state.preventSwipeData.find((function(e){return n.indexOf(e.element)>-1}));if(!a)return!0;switch(t){case w:return a.allowLeftSwipe;case R:return a.allowRightSwipe}return!1}},{key:"_preventSwipeOnScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState((function(a){var r={element:e,allowLeftSwipe:t,allowRightSwipe:n};return{preventSwipeData:a.preventSwipeData.find((function(t){return t.element===e}))?a.preventSwipeData.map((function(t){return t.element===e?r:t})):a.preventSwipeData.concat([r])}}))}},{key:"_renderTaskGroupActionsV2",value:function(e,t,n){return this.isMobile||(this.sectionsCount=n),this.props.hideOverlayActions?this.props.isEditInteraction?{actions:this._renderEditOverlayPcV2()}:{}:{header:this._renderOverlayHeaderV2(),actions:this._renderOverlayActionsV2(e,t)}}},{key:"_renderOverlayHeaderV2",value:function(){return this.isUC&&!this.isMobile?null:p.default.createElement("div",{className:"overlay-header ".concat(this.state.ltr?"ltr":"rtl")},this._renderOverlayLocationV2(),this._renderMultipleTasksSectionV2(),this.isMobile&&this._renderCloseOverlayMobileV2())}},{key:"_renderOverlayLocationV2",value:function(){if(this.isUC)return null;var e=this.props.time;if(e<0)return null;var t=this.isVideo?v.default.formatSecondsToHMS(e,!0):"".concat(E.default.translate("overlay-taskgroup.header.slide")," ").concat(e);return p.default.createElement("div",{className:"overlay-location"},t)}},{key:"_renderMultipleTasksSectionV2",value:function(){return this.isUC?null:this.isMobile?this._renderMultipleTasksCarouselV2():p.default.createElement("div",{className:"multiple-tasks-section"},this.props.taskIds.length>1&&this._renderPrevNextButtonsV2(0===this.state.currentTaskIndex),this._renderMultipleTasksCarouselV2())}},{key:"_renderPrevNextButtonsV2",value:function(e){var t=this.props,n=t.taskIds,a=t.isBlockingInteraction,r=this.state.currentTaskIndex,i=0===r,o=r===n.length-1,s=!this._getTasksCompletion(n[r])&&a;if(e&&o)return null;var l=(0,h.default)("navigation-arrow previous",{disabled:i,rtl:!this.state.ltr}),u=p.default.createElement("span",{className:l,onClick:i?null:this._onPrevious},i&&s?p.default.createElement(I.default,null):p.default.createElement(C.default,null)),c=(0,h.default)("navigation-arrow next",{disabled:o||s,rtl:!this.state.ltr}),d=(0,h.default)("next-message",{disabled:s}),f=p.default.createElement("span",{className:d},E.default.translate(this.isMobile?"overlay-taskgroup.buttons.next-v2":"overlay-taskgroup.buttons.next-please-v2")),m=p.default.createElement("span",{className:c,onClick:e||o||s?null:this._onNext},o&&s?p.default.createElement(I.default,null):p.default.createElement(C.default,null));return p.default.createElement("div",{className:"multiple-tasks-navigation-wrapper"},p.default.createElement("div",{className:"multiple-tasks-navigation",onClick:e&&!s?this._onNext:null},e?f:u,m))}},{key:"_renderMultipleTasksCarouselV2",value:function(){var e=this,t=this.props,n=t.taskIds,a=t.isBlockingInteraction,r=this.state.currentTaskIndex,i=this._getTasksCompletion(),o=[];i.forEach((function(e){var t;o[e.taskId]=null!==(t=null==e?void 0:e.isCompleted)&&void 0!==t&&t}));var s=!o[n[r]]&&a;return n.length<=1?null:p.default.createElement(y.default,{itemsIds:n,currentItemIndex:this.state.currentTaskIndex,onClick:this.isMobile?null:function(t){e._onTaskSelect(t,s)},tasksCompletion:a?o:[]})}},{key:"_renderCloseOverlayMobileV2",value:function(){return p.default.createElement("div",{className:"close-overlay-section",onClick:this.closeOverlay},p.default.createElement("div",{className:"close-overlay-icon"},p.default.createElement(b.default,null)))}},{key:"_renderOverlayActionsV2",value:function(e,t){var n,a=this.props.taskIds.length>1,r=this.state.currentTaskIndex===this.props.taskIds.length-1;this.isMobile?n=this._renderOverlayActionsMobileV2(e,t,a,r):n=t&&a&&!r?this._renderPrevNextButtonsV2(!0):this._renderCloseOverlayPcV2(t);return n}},{key:"_renderOverlayActionsMobileV2",value:function(e,t,n,a){return e?n?this._renderPrevNextButtonsV2(!1):null:t?n&&!a?this._renderPrevNextButtonsV2(!0):this._renderDoneButtonMobileV2():null}},{key:"_renderDoneButtonMobileV2",value:function(){var e=this;return p.default.createElement("div",{className:"done-task-group-section-wrapper"},p.default.createElement("div",{className:"done-task-group-section",onClick:function(){e.closeOverlay(!0)}},p.default.createElement("span",{className:"done-task-group-message"},E.default.translate("overlay-taskgroup.buttons.done")),p.default.createElement("span",{className:"done-task-group-icon"},p.default.createElement(T.default,null))))}},{key:"_renderEditOverlayPcV2",value:function(){return p.default.createElement("div",{className:"close-overlay-section edit-interaction",onClick:this.closeOverlay},p.default.createElement("div",{className:"close-overlay-section-text"},p.default.createElement("div",{className:"close-overlay-section-text-edit"},E.default.translate("overlay-taskgroup.buttons.edit"))))}},{key:"_renderCloseOverlayPcV2",value:function(e){var t,n=this;return t=e?"overlay-taskgroup.buttons.back-to":this.props.viewMode===k.ASSESSMENT?"overlay-taskgroup.buttons.assessment-done":"overlay-taskgroup.buttons.tap-to-close",p.default.createElement("div",{className:(0,h.default)("close-overlay-section-wrapper",{"edit-interaction":this.props.isEditInteraction})},p.default.createElement("div",{tabIndex:"0",role:"button",onKeyDown:function(e){return 13===e.keyCode&&n.closeOverlay()},className:(0,h.default)("close-overlay-section",{completed:e}),onMouseDown:this.closeOverlay},p.default.createElement("div",{className:"close-overlay-icon"},e?p.default.createElement(T.default,null):p.default.createElement(b.default,null)),p.default.createElement("div",{className:"close-overlay-section-text"},p.default.createElement("div",null,E.default.translate(t)))),this.props.isEditInteraction?this._renderEditOverlayPcV2():null)}},{key:"_renderCloseSection",value:function(){return p.default.createElement("div",{className:"overlay-task-group__close-button-wrapper"},p.default.createElement("span",{className:"overlay-task-group__close-button icon--close",onMouseDown:this.closeOverlay}))}},{key:"_renderTask",value:function(){var e=this,t=this.props.taskIds[this.state.currentTaskIndex],n=this.props.startIndex+this.state.currentTaskIndex;return p.default.createElement(S.default,{ref:function(t){e.taskGroupRef=t},serviceUrl:this.appData.backend_url,userId:v.default.isLearner()?v.default.getUser().id:"",context:this.props.context,taskGroupId:this.props.taskGroupId,taskGroupVersion:this.props.taskGroupVersion,taskGroupData:this.props.taskGroupData,taskGroupModified:this.props.taskGroupModified,isReadOnly:this.props.isReadOnly,isPersistent:this.props.isPersistent,showReport:this.props.isPersistent,singleTaskMode:!0,loggerName:this.props.loggerName,customHeaders:this.props.customHeaders,xapiContext:this.props.xapiContext,taskButtons:this.props.taskButtons,showResults:this.props.isEditInteraction,showPollResults:!this.props.isPreview&&v.default.isInstructor(),taskGroupOptions:this.props.taskGroupOptions,isPreview:this.props.isPreview,taskId:t,token:this.props.token,taskStartingIndex:n,showFlagInteractionButton:v.default.isLearner(),onPlayerLoaded:this._onPlayerLoaded,loadTaskGroupCallback:this._onTaskGroupRendered,doneCallback:this._onAnsweredCallback,closeOverlayTaskGroup:this.closeOverlay,getTaskGroupActions:this._renderTaskGroupActionsV2,preventSwipeOnScroll:this.isMobile&&this._preventSwipeOnScroll,availableOffline:this.props.availableOffline,viewMode:this.props.viewMode,updateCompletedTaskCountCallback:this.props.updateCompletedTaskCountCallback,shouldReloadTaskGroup:this.props.shouldReloadTaskGroup,isInteractionsThemeV2:this.isThemeV2,isUC:this.isUC})}},{key:"_renderControls",value:function(){var e={onClick:this.closeOverlay,text:E.default.translate("overlay-taskgroup.buttons.done"),theme:g.default.THEMES.LIGHT,type:g.default.TYPES.PRIMARY,styleClass:"overlay-task-group__control-button",disabled:this.props.isBlockingInteraction&&!this.state.isCompleted};if(1===this.props.taskIds.length)return p.default.createElement("div",{className:"overlay-task-group__control-area end"},p.default.createElement(g.default,e));var t={onClick:this._onPrevious,text:E.default.translate("overlay-taskgroup.buttons.previous"),theme:g.default.THEMES.LIGHT,type:g.default.TYPES.SECONDARY,styleClass:"overlay-task-group__control-button",disabled:0===this.state.currentTaskIndex};if(this.state.currentTaskIndex===this.props.taskIds.length-1)return p.default.createElement("div",{className:"overlay-task-group__control-area"},p.default.createElement(g.default,t),p.default.createElement(g.default,e));var n={onClick:this._onNext,text:E.default.translate("overlay-taskgroup.buttons.next"),theme:g.default.THEMES.LIGHT,type:g.default.TYPES.SECONDARY,styleClass:"overlay-task-group__control-button"};return p.default.createElement("div",{className:"overlay-task-group__control-area"},p.default.createElement(g.default,t),p.default.createElement(g.default,n))}},{key:"_onNext",value:function(){var e=this;if(this.state.currentTaskIndex!==this.props.taskIds.length-1){var t=function(){e.setState((function(e){return{currentTaskIndex:++e.currentTaskIndex,preventSwipeData:[],openAnimation:!0,closeAnimation:!1}})),n._sendMixPanelEvent(_.default.TITLES.INTERACT_WITH_QUESTION,(0,i.default)({taskId:e.props.taskIds[e.state.currentTaskIndex]},_.default.PARAMS.USER_ACTION,"next")),e._stopOpenAnimation()};this.isThemeV2?this._showCloseAnimation(t):t()}}},{key:"_onPrevious",value:function(){var e=this;if(0!==this.state.currentTaskIndex){var t=function(){e.setState((function(e){return{currentTaskIndex:--e.currentTaskIndex,preventSwipeData:[],openAnimation:!0,closeAnimation:!1}})),n._sendMixPanelEvent(_.default.TITLES.INTERACT_WITH_QUESTION,(0,i.default)({taskId:e.props.taskIds[e.state.currentTaskIndex]},_.default.PARAMS.USER_ACTION,"previous")),e._stopOpenAnimation()};this.isThemeV2?this._showCloseAnimation(t):t()}}},{key:"_onTaskSelect",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.state.currentTaskIndex!==e&&(n&&this.state.currentTaskIndex<e||this._showCloseAnimation((function(){t.setState({currentTaskIndex:e,openAnimation:!0,closeAnimation:!1}),t._stopOpenAnimation()})))}},{key:"closeOverlay",value:function(e,t){var a=this;this._ismounted&&(this._closeTimeout&&clearTimeout(this._closeTimeout),t&&this.setState({closing:!0}),this._closeTimeout=setTimeout((function(){e=!!(0,f.default)(e)&&e,a.props.closeOverlayFromPlayer&&a._showCloseAnimation((function(){a.props.viewMode===k.ASSESSMENT?a._onAnsweredCallback((function(){a.props.closeOverlayFromPlayer(a.state.isCompleted,e)})):a.props.closeOverlayFromPlayer(a.state.isCompleted,e)})),n._sendMixPanelEvent(_.default.TITLES.INTERACT_WITH_QUESTION,(0,i.default)({taskId:a.props.taskIds[a.state.currentTaskIndex]},_.default.PARAMS.USER_ACTION,e?"next":"exit"))}),400))}},{key:"_onPlayerLoaded",value:function(e,t,n){this.setState({playerAPI:e,playerAPIUserId:t,ltr:n})}},{key:"_onTaskGroupRendered",value:function(){this.isThemeV2&&!this.state.taskGroupRendered&&this.setState({taskGroupRendered:!0})}},{key:"_onAnsweredCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.props.onAnsweredTaskGroup();var t=this.isOverlayCompleted();this.setState({isCompleted:t},e)}},{key:"isOverlayCompleted",value:function(){return!(this.props.viewMode===k.ASSESSMENT||!this.props.isCompleted&&!this.state.isCompleted)||this._getTasksCompletion().every((function(e){return!0===e.isCompleted}))}},{key:"_getTasksCompletion",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.state.playerAPI,a=[];return n&&this.props.taskIds.forEach((function(r){var i=n.isTaskCompleted(r);i||e.props.viewMode!==k.ASSESSMENT||(i=n.taskHasInteractionState(r));var o=n.isTaskAnswerable(r);t?t===r&&(a=!o||i):a.push({taskId:r,isCompleted:!o||i})})),a}},{key:"_showCloseAnimation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;this.closeAnimationTimeout&&clearTimeout(this.closeAnimationTimeout),this.setState((0,i.default)({},t||"closeAnimation",!0));var a=isNaN(this.sectionsCount)?3:this.sectionsCount,r=this.isMobile?n||200:200*a;this.closeAnimationTimeout=setTimeout(e,r)}},{key:"_stopOpenAnimation",value:function(e){var t=this;this.openAnimationTimeout&&clearTimeout(this.openAnimationTimeout),this.openAnimationTimeout=setTimeout((function(){t.setState({openAnimation:!1})}),e||800)}},{key:"reloadTaskGroup",value:function(){this.taskGroupRef&&this.taskGroupRef.reloadTaskGroup&&this.taskGroupRef.reloadTaskGroup()}}],[{key:"_sendMixPanelEvent",value:function(e,t){_.default.sendEvent(e,_.default.COMPONENTS.INTERACTIVE_VIDEO,t)}}]),n}(p.Component);P.defaultProps={customHeaders:void 0,xapiContext:void 0,taskButtons:void 0,taskGroupOptions:void 0,isPreview:!1,token:{access_token:""},startIndex:1,updateMarkerCompletion:function(){},isBlockingInteraction:!1,isCompleted:!1,taskIds:[],closeOverlayFromPlayer:function(){},collapsedModeDisabled:!1,availableOffline:!1,playerType:"",time:-1,taskGroupData:void 0,hideOverlayActions:!1,isReadOnly:!1,onAnsweredTaskGroup:function(){},loggerName:"",onClose:function(){},updateCompletedTaskCountCallback:void 0,viewMode:0,taskGroupModified:null,shouldReloadTaskGroup:!1,isEditInteraction:!1,isInteractionsThemeV2:!1,forceClose:!1};var M=P;t.default=M},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(901));n(902);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=a(n(0)),i=(a(n(2)),a(n(11)));function o(e){var t,n=e.carouselLength,a=void 0===n?4:n,o=e.itemsIds,s=void 0===o?[]:o,l=e.currentItemIndex,u=void 0===l?0:l,c=e.onClick,d=void 0===c?null:c,f=e.tasksCompletion,p=void 0===f?[]:f,h=s[u];if(s.length<=a)t=s;else{var m=Math.floor(a/2),v=u+1>=s.length-1,g=u<=m?0:v?s.length-a:u-m;t=s.slice(g,g+a)}return r.default.createElement("div",{className:"multiple-items-carousel"},t.map((function(e,t){var n=0===t&&e!==s[0],o=t===a-1&&e!==s[s.length-1],l=(0,i.default)("indicator",{active:e===h,small:n||o,disabled:t&&Object.keys(p).length&&!p[s[t-1]]});return r.default.createElement("span",{className:l,key:"item-".concat(e),onClick:d?function(){return d(s.indexOf(e))}:null})})))}o.defaultProps={carouselLength:4,onClick:function(){},tasksCompletion:[]}},function(e,t,n){},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M13.5 3.999a9.527 9.527 0 0 1 9.527 9.527A9.528 9.528 0 1 1 13.5 3.999z",key:0}),a.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#fff",d:"M13.5.553c7.165 0 12.974 5.808 12.974 12.973 0 7.165-5.809 12.974-12.974 12.974S.526 20.691.526 13.526 6.335.553 13.5.553z",key:1}),a.createElement("path",{fill:"var(--primary-theme-color)",fillRule:"evenodd",d:"M18.22 12.952c.363.215.395.688 0 1.063-.348.33-5.6 4.252-5.6 4.252s-1.12.515-1.12 0V8.699s.63-.465 1.12 0c.509.483 4.971 3.88 5.6 4.253z",key:2})])}r.defaultProps={viewBox:"0 0 27.5 27.5",width:"27.5",height:"27.5"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M13.25 4.438a8.812 8.812 0 0 1 8.812 8.812 8.812 8.812 0 0 1-8.812 8.812 8.812 8.812 0 0 1-8.812-8.812 8.812 8.812 0 0 1 8.812-8.812z",key:0}),a.createElement("path",{fill:"none",stroke:"#FFF",d:"M13.25 1.25c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12z",key:1}),a.createElement("path",{fill:"var(--primary-theme-color)",fillRule:"evenodd",d:"M17.019 12.669L12.77 8.39a.771.771 0 0 0-.587-.25.767.767 0 0 0-.586.25l-.496.493a.807.807 0 0 0-.241.591c0 .228.08.428.241.598l3.168 3.188-3.168 3.194a.809.809 0 0 0-.241.592c0 .228.08.427.241.598l.495.493a.797.797 0 0 0 .587.243.796.796 0 0 0 .587-.243l4.249-4.279a.844.844 0 0 0 .241-.598.807.807 0 0 0-.241-.591z",key:2})])}r.defaultProps={viewBox:"0 0 26.5 26.5"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M13.26 4.448a8.813 8.813 0 1 1-8.812 8.812 8.812 8.812 0 0 1 8.812-8.812z",opacity:".302",key:0}),a.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#FFF",d:"M13.26 1.26c6.628 0 12 5.373 12 12s-5.372 12-12 12c-6.627 0-12-5.373-12-12s5.373-12 12-12z",opacity:".2",key:1}),a.createElement("path",{fill:"var(--primary-theme-color)",fillRule:"evenodd",d:"M17.019 12.669L12.77 8.39a.771.771 0 0 0-.587-.25.771.771 0 0 0-.587.25l-.495.493a.807.807 0 0 0-.242.591c0 .228.081.428.242.598l3.167 3.188-3.167 3.194a.81.81 0 0 0-.242.592c0 .228.081.427.242.598l.495.493a.796.796 0 0 0 .587.243c.23 0 .426-.081.586-.243l4.25-4.279a.845.845 0 0 0 .242-.598.807.807 0 0 0-.242-.591z",opacity:".502",key:2})])}r.defaultProps={viewBox:"0 0 26.5 26.5"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#c4c4c4",fillRule:"evenodd",d:"M24.25 6.875c9.51 0 17.219 7.716 17.219 17.234 0 9.519-7.709 17.235-17.219 17.235-9.51 0-17.219-7.716-17.219-17.235 0-9.518 7.709-17.234 17.219-17.234z",key:0}),a.createElement("path",{fill:"none",stroke:"#c4c4c4",d:"M24.25.656c12.961 0 23.469 10.501 23.469 23.453 0 12.953-10.508 23.453-23.469 23.453-12.961 0-23.469-10.5-23.469-23.453C.781 11.157 11.289.656 24.25.656z",key:1}),a.createElement("text",{fill:"#FFF",fontFamily:"Open Sans",fontSize:"18.465",fontWeight:"bold",transform:"translate(18.63 33.8) scale(1.35388)",style:{textAlign:"center",direction:"initial"},key:2},"\n        ?\n    ")])}r.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("filter",{id:"a",width:"28",height:"31",x:"24",y:"22",filterUnits:"userSpaceOnUse"},[a.createElement("feOffset",{dy:"2",in:"SourceAlpha",key:0}),a.createElement("feGaussianBlur",{result:"blurOut",stdDeviation:"2",key:1}),a.createElement("feFlood",{floodColor:"#04070D",result:"floodOut",key:2}),a.createElement("feComposite",{in:"floodOut",in2:"blurOut",operator:"atop",key:3}),a.createElement("feComponentTransfer",{key:4},a.createElement("feFuncA",{slope:".5",type:"linear"})),a.createElement("feMerge",{key:5},[a.createElement("feMergeNode",{key:0}),a.createElement("feMergeNode",{in:"SourceGraphic",key:1})])])),a.createElement("path",{fill:"#141D22",fillRule:"evenodd",d:"M35.823 0c19.33 0 35 15.67 35 35s-15.67 35-35 35-35-15.67-35-35 15.67-35 35-35z",opacity:".302",key:1}),a.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M46.753 33.325L31.024 23.278c-.465-.281-1.042-.234-1.479-.234-1.744 0-1.736 1.365-1.736 1.711v20.537c0 .291-.008 1.71 1.736 1.71.437 0 1.014.047 1.479-.233l15.729-10.048c1.291-.779 1.068-1.698 1.068-1.698s.223-.919-1.068-1.698z",filter:"url(#a)",key:2})])}r.defaultProps={width:"71",height:"71",viewBox:"0 0 71 71"},e.exports=r,r.default=r},function(e,t,n){},,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(249)).default)({loader:function(){return n.e(23).then(n.t.bind(null,2160,7))},loading:function(){return null}});t.default=r},,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Section=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(12)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(261))),h=r(n(11)),m=r(n(237)),v=r(n(53)),g=r(n(21)),E=r(n(13)),_=r(n(154)),y=r(n(41)),k=r(n(22)),S=n(287),T=a(n(150)),b=n(39),C=r(n(919));function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var O=v.default.LogManager,A=function(e){(0,u.default)(n,e);var t=I(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={searchQuery:null,isFocused:!1,results:[],setLoader:!1,showError:!1},a.searchChanged=a._searchChanged.bind((0,s.default)(a)),a.closeSearch=a.closeSearch.bind((0,s.default)(a)),a.searchItemClick=a.searchItemClick.bind((0,s.default)(a)),a.filterResult=a.filterResult.bind((0,s.default)(a)),a.searchCount=0,a.mixpanelComponent=E.default.isExtension()?y.default.COMPONENTS.SEARCH_EXTENSION:y.default.COMPONENTS.HEADER,a.onCatalogCourseClick=a.onCatalogCourseClick.bind((0,s.default)(a)),a}return(0,l.default)(n,null,[{key:"_notFound",value:function(){return f.default.createElement("div",{className:"empty-state"},k.default.translate("SEARCH.NO_RESULTS"))}},{key:"_errorState",value:function(){return f.default.createElement("div",{className:"error-state"},k.default.translate("SEARCH.ERROR"))}},{key:"getSearchResultsContainer",value:function(e){return[f.default.createElement("div",{className:"search-results-container--arrow-up",key:"arrow-up"}),f.default.createElement("div",{className:"search-results-container",key:"search-results"},e)]}}]),(0,l.default)(n,[{key:"wrapResultsInContainer",value:function(e){return this.props.getSearchResultsContainer?this.props.getSearchResultsContainer(e):n.getSearchResultsContainer(e)}},{key:"render",value:function(){var e=this,t=(0,h.default)("search-container",{focused:this.state.isFocused},{mobile:!E.default.isPC()}),n=null;if(this.state.searchQuery){var a=this.renderResults();n=this.wrapResultsInContainer(a)}else this.props.injectedResults.length&&(n=this.wrapResultsInContainer(this.props.injectedResults));return f.default.createElement("div",{className:t},f.default.createElement("div",{className:"search-container--search-bar"},f.default.createElement(m.default,{showSearchIcon:!0,focusInputOnMount:!1,searchPlaceholder:k.default.translate("SEARCH.NAME"),searchChanged:this.searchChanged,theme:this.props.searchBarTheme,ref:function(t){e._searchRef=t},onInputFocus:function(t){t&&e.setState({isFocused:t})}})),n)}},{key:"renderResults",value:function(){if(this.state.setLoader)return f.default.createElement(T.default,{size:T.Sizes.SMALL,color:"#FFF"});if(this.state.showError)return n._errorState();var e=this.state.results.filter(this.filterResult);return this.state.searchQuery&&!e.length?n._notFound():this.renderResultsBySections()}},{key:"renderResultsBySections",value:function(){var e=[],t=[],n=[],a=[];return this.state.results.filter(this.filterResult).forEach((function(r){r.type===b.SEARCH_RESULT_TYPE.CHANNEL?e.push(r):[b.SEARCH_RESULT_TYPE.PAGE,b.SEARCH_RESULT_TYPE.TASK].indexOf(r.type)>-1?n.push(r):r.type===b.SEARCH_RESULT_TYPE.CATALOG_ITEM?a.push(r):t.push(r)})),[e.length?f.default.createElement(C.default,{key:"courseInformation",sectionId:"courseInformation",items:e,onItemClick:this.searchItemClick}):null,t.length?f.default.createElement(C.default,{key:"courseContent",sectionId:"courseContent",items:t,onItemClick:this.searchItemClick}):null,n.length?f.default.createElement(C.default,{key:"interactionContent",sectionId:"interactionContent",items:n,onItemClick:this.searchItemClick}):null,a.length?f.default.createElement(C.default,{key:"catalogItems",sectionId:"catalogItems",items:a,onItemClick:this.onCatalogCourseClick}):null]}},{key:"filterResult",value:function(e){return!(!E.default.isPC()&&e.type===b.SEARCH_RESULT_TYPE.PAGE&&e.context[b.SEARCH_RESULT_TYPE.LESSON]&&!E.default.isFeatureEnabled("ebookOnMobile"))&&this.props.filterResult(e)}},{key:"searchItemClick",value:function(e){var t;y.default.sendEvent(y.default.TITLES.SEARCH_RESULTS,this.mixpanelComponent,(t={},(0,i.default)(t,y.default.PARAMS.USER_ACTION,"select_result"),(0,i.default)(t,"number_of_attempts",this.searchCount),(0,i.default)(t,"select_result_type",e.type.toLowerCase()),(0,i.default)(t,"search_value",this.state.searchQuery),t)),this.closeSearch(),this.props.onSearchItemClick(e)}},{key:"onCatalogCourseClick",value:function(e){var t,n;_.default.setStage(g.default.STAGES.CATALOG,void 0,"name=".concat(this.state.searchQuery,",").concat(null==e||null===(t=e.context)||void 0===t||null===(n=t.CATALOG_ITEM)||void 0===n?void 0:n.channelId))}},{key:"_searchChanged",value:function(e){var t,n=this;e?(this.setState({searchQuery:e,setLoader:!0}),this.searchCount++,y.default.sendEvent(y.default.TITLES.SEARCH_RESULTS,this.mixpanelComponent,(t={},(0,i.default)(t,y.default.PARAMS.USER_ACTION,"type"),(0,i.default)(t,"search_value",e),t)),E.default.getSearchItems(e).then((function(e){n.setState({results:e,setLoader:!1})})).catch((function(t){O.error({message:"failed to get items by search therm ".concat(e," due to ").concat(JSON.stringify(t))}),n.setState({setLoader:!1,results:[],showError:!0})}))):this.setState({results:[],searchQuery:null})}},{key:"closeSearch",value:function(){this.searchCount=0,this._searchRef.clearSearch(),this.setState({searchQuery:null,isFocused:!1,results:[],setLoader:!1})}},{key:"handleClickOutside",value:function(e){var t;this.state.isFocused&&!e.target.closest(".search-container")&&(y.default.sendEvent(y.default.TITLES.SEARCH_RESULTS,this.mixpanelComponent,(t={},(0,i.default)(t,y.default.PARAMS.USER_ACTION,"exit"),(0,i.default)(t,"number_of_attempts",this.searchCount),(0,i.default)(t,"search_value",this.state.searchQuery),t)),this.closeSearch())}},{key:"componentDidUpdate",value:function(e,t,n){this.props.didUpdateCB&&this.props.didUpdateCB(e,t,n)}}]),n}(f.Component);A.defaultProps={onSearchItemClick:function(){},didUpdateCB:function(){},getSearchResultsContainer:null,searchBarTheme:S.THEMES.TRANSPARENT,injectedResults:[],filterResult:function(){return!0}};var N=C.default;t.Section=N;var w=(0,p.default)(A);t.default=w},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(a(n(2)),a(n(22))),o=a(n(606)),s=a(n(357)),l=n(39),u=function(e){function t(t){return r.default.createElement("div",{className:"result-section-item",key:t.id,onClick:function(){e.onItemClick(t)}},r.default.createElement("div",{className:"result-section-item--image item-cover"},r.default.createElement(o.default,{imgSrc:t.context[t.type]&&t.context[t.type].image})),r.default.createElement("div",{className:"result-section-item--content"},r.default.createElement("div",{className:"result-section-name"},t.searchData.name),r.default.createElement("div",{className:"result-section-path"},function(e){var t=[l.SEARCH_RESULT_TYPE.CHANNEL,l.SEARCH_RESULT_TYPE.FUSE,l.SEARCH_RESULT_TYPE.LESSON,l.SEARCH_RESULT_TYPE.CI,l.SEARCH_RESULT_TYPE.ASSESSMENT,l.SEARCH_RESULT_TYPE.WORK_SHEET],n=Object.keys(e.context);return(n=t.filter((function(e){return n.includes(e)}))).map((function(t){return"CHANNEL"===t?s.default.fromChannelNameToTitle(e.context[t].name):e.context[t].name})).join(" › ")}(t))))}return r.default.createElement("div",{className:"result-section",key:"result-section-".concat(e.sectionId)},r.default.createElement("div",{className:"result-section-title"},i.default.translate("global.search.section.title.".concat(e.sectionId))),e.items.map((function(e){return t(e)})))};t.default=u},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11))),p=r(n(126)),h=r(n(14)),m=n(39),v=n(74),g=r(n(921)),E=r(n(922)),_=r(n(923)),y=r(n(924)),k=r(n(925));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var T=m.LIBRARY_ITEM_TYPES.LESSON,b=m.LIBRARY_ITEM_TYPES.BUZZ,C=m.LIBRARY_ITEM_TYPES.FUSE,I=m.LIBRARY_ITEM_TYPES.CHANNEL,O=m.LIBRARY_ITEM_TYPES.FILE,A=m.LIBRARY_ITEM_TYPES.CERTIFICATE,N=m.LIBRARY_ITEM_TYPES.UCONTENT,w=m.LIBRARY_ITEM_TYPES.OFF_PLATFORM_EVENT,R=function(e){(0,l.default)(n,e);var t=S(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).showTypeLabel=a.showTypeLabel.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"getIconByType",value:function(e,t){var n=_.default;switch(e){case T:case b:n=_.default;break;case N:case C:case w:n=_.default;break;case O:n=y.default;break;case I:h.default.isInstructor({roles:t})?n=E.default:h.default.isLearner({roles:t})&&(n=g.default);break;case A:n=v.CertificateIcon}return n}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this.props.viewSize===n.VIEW_SIZES.SMALL,t=this.props,a=t.type;t.assessment&&(a=m.LIBRARY_ITEM_TYPES.ASSESSMENT),this.typeName=Object.keys(m.LIBRARY_ITEM_TYPES).find((function(e){return m.LIBRARY_ITEM_TYPES[e]===a}));var r=(0,f.default)("item-cover-holder",{small:this.props.viewSize===n.VIEW_SIZES.SMALL}),i=(0,f.default)("item-cover ".concat(this.typeName),{"smallest-icon":!h.default.isMobile()});return d.default.createElement("div",{className:i},this.props.isLocked&&d.default.createElement("div",{"data-automation-id":"library-item-cover-locked",className:"item-cover-locked"},d.default.createElement(v.LockedIcon,{style:{height:e?"24px":"47px",width:e?"20px":"36px"}})),this.renderCoverImage(),d.default.createElement("span",{className:r}),this.showTypeLabel(a))}},{key:"renderCoverImage",value:function(){var e=this.props,t=e.type,a=e.imgSrc,r=e.roles,i=n.getIconByType(t,r);return a?"DEFAULT_COVER_IMAGE"===a?d.default.createElement("img",{className:"item-cover-image",alt:"",src:k.default,loading:"lazy"}):"LOADING"===a?d.default.createElement("div",{className:"item-cover-image item-cover-image--loading"}):d.default.createElement("img",{className:"item-cover-image",alt:"",src:h.default.getAssetPath(a),loading:"lazy",width:"100%",height:"100%"}):d.default.createElement("div",{className:"item-no-cover-image"},d.default.createElement(i,{style:{fill:"#ffffff",height:this.props.viewSize===n.VIEW_SIZES.SMALL?"24px":"40px",width:"100%"}}))}},{key:"typeToString",value:function(e){return this.props.translations[e]}},{key:"showTypeLabel",value:function(e){var t=(0,f.default)("item-type",this.typeName,{isLocked:this.props.isLocked},{small:this.props.viewSize===n.VIEW_SIZES.SMALL});if([m.LIBRARY_ITEM_TYPES.ASSESSMENT,m.LIBRARY_ITEM_TYPES.OFF_PLATFORM_EVENT].indexOf(e)>=0&&"select-image-cover"!==this.props.viewMode)return d.default.createElement("div",{className:t,"data-automation-id":"library-item-type"},d.default.createElement(p.default,{clamp:"1",ltr:this.props.ltr},this.typeToString(e)))}}]),n}(d.Component);R.defaultProps={type:I,assessment:!1},R.VIEW_SIZES={NORMAL:"normal",SMALL:"small"};var P=R;t.default=P},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("path",{id:"a",d:"M0 16.16V.423h17.086V16.16z",key:0}),a.createElement("path",{id:"c",d:"M17.25.423v15.773H.164V.423z",key:1})]),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("path",{fill:"#FFF",d:"M14.828 11.52c0-3.303 2.665-5.981 5.95-5.981 3.288 0 5.952 2.678 5.952 5.98 0 3.303-2.664 5.981-5.951 5.981-3.286 0-5.951-2.678-5.951-5.98",key:0}),a.createElement("g",{transform:"translate(0 13.326)",key:1},[a.createElement("mask",{id:"b",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#a"})),a.createElement("path",{fill:"#FFF",d:"M17.086 4.414A7.273 7.273 0 0 1 13.958.541a7.576 7.576 0 0 0-1.289-.118H7.62C3.42.423 0 3.86 0 8.082v6.206l.017.097.425.134c3.366 1.057 6.356 1.518 8.927 1.64v-2.9c0-4.526 3.37-8.267 7.718-8.845",mask:"url(#b)",key:1})]),a.createElement("path",{fill:"#FFF",d:"M16.08 6.027C15.915 2.872 13.325.362 10.145.362c-3.287 0-5.952 2.678-5.952 5.98 0 3.304 2.665 5.982 5.952 5.982a5.9 5.9 0 0 0 3.432-1.1 7.246 7.246 0 0 1 2.503-5.197",key:2}),a.createElement("g",{transform:"translate(24.307 13.326)",key:3},[a.createElement("mask",{id:"d",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#c"})),a.createElement("path",{fill:"#FFF",d:"M9.631.423h-5.05c-.44 0-.868.046-1.288.118A7.27 7.27 0 0 1 .165 4.414a8.796 8.796 0 0 1 5.112 2.532 8.89 8.89 0 0 1 2.604 6.313v2.937c5.526-.023 8.73-1.603 8.928-1.705l.398-.202h.042V8.082C17.251 3.859 13.833.423 9.631.423",mask:"url(#d)",key:1})]),a.createElement("path",{fill:"#FFF",d:"M27.98 11.223c.972.69 2.153 1.1 3.433 1.1 3.287 0 5.95-2.677 5.95-5.98 0-3.303-2.663-5.98-5.95-5.98-3.18 0-5.77 2.509-5.935 5.664a7.246 7.246 0 0 1 2.503 5.196M23.304 18.926h-5.05c-4.202 0-7.62 3.436-7.62 7.658v6.207l.016.097.425.134c4.01 1.259 7.494 1.679 10.36 1.679 5.6 0 8.847-1.605 9.047-1.707l.397-.202h.043v-6.208c.002-4.222-3.417-7.658-7.618-7.658",key:4})])])}r.defaultProps={width:"42",height:"35",viewBox:"0 0 42 35"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("path",{id:"a",d:"M0 16.16V.423h17.086V16.16z",key:0}),a.createElement("path",{id:"c",d:"M17.25.423v15.773H.164V.423z",key:1})]),a.createElement("g",{fill:"none",fillRule:"evenodd",key:1},[a.createElement("path",{fill:"#FFF",d:"M14.828 25.52c0-3.303 2.665-5.981 5.95-5.981 3.288 0 5.952 2.678 5.952 5.98 0 3.303-2.664 5.981-5.951 5.981-3.286 0-5.951-2.678-5.951-5.98",key:0}),a.createElement("g",{transform:"translate(0 27.326)",key:1},[a.createElement("mask",{id:"b",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#a"})),a.createElement("path",{fill:"#FFF",d:"M17.086 4.414A7.273 7.273 0 0 1 13.958.541a7.576 7.576 0 0 0-1.289-.118H7.62C3.42.423 0 3.86 0 8.082v6.206l.017.097.425.134c3.366 1.057 6.356 1.518 8.927 1.64v-2.9c0-4.526 3.37-8.267 7.718-8.845",mask:"url(#b)",key:1})]),a.createElement("path",{fill:"#FFF",d:"M16.08 20.027c-.165-3.155-2.755-5.665-5.935-5.665-3.287 0-5.952 2.678-5.952 5.98 0 3.304 2.665 5.982 5.952 5.982a5.9 5.9 0 0 0 3.432-1.1 7.246 7.246 0 0 1 2.503-5.197",key:2}),a.createElement("g",{transform:"translate(24.307 27.326)",key:3},[a.createElement("mask",{id:"d",fill:"#fff",key:0},a.createElement("use",{xlinkHref:"#c"})),a.createElement("path",{fill:"#FFF",d:"M9.631.423h-5.05c-.44 0-.868.046-1.288.118A7.27 7.27 0 0 1 .165 4.414a8.796 8.796 0 0 1 5.112 2.532 8.89 8.89 0 0 1 2.604 6.313v2.937c5.526-.023 8.73-1.603 8.928-1.705l.398-.202h.042V8.082C17.251 3.859 13.833.423 9.631.423",mask:"url(#d)",key:1})]),a.createElement("path",{fill:"#FFF",d:"M27.98 25.223c.972.69 2.153 1.1 3.433 1.1 3.287 0 5.95-2.677 5.95-5.98 0-3.303-2.663-5.98-5.95-5.98-3.18 0-5.77 2.509-5.935 5.664a7.246 7.246 0 0 1 2.503 5.196M23.304 32.926h-5.05c-4.202 0-7.62 3.436-7.62 7.658v6.207l.016.097.425.134c4.01 1.259 7.494 1.679 10.36 1.679 5.6 0 8.847-1.605 9.047-1.707l.397-.202h.043v-6.208c.002-4.222-3.417-7.658-7.618-7.658M28.269 10.735a.52.52 0 0 0-.519-.521H14.338a.52.52 0 0 0-.518.52v1.251a.52.52 0 0 0 .518.522H27.75a.52.52 0 0 0 .519-.522v-1.25zm1.265-6.803a.522.522 0 0 1-.013.155l-1.14 4.586a.52.52 0 0 1-.501.394l-6.845.035H14.188a.519.519 0 0 1-.503-.395l-1.14-4.603a.523.523 0 0 1-.014-.16 1.095 1.095 0 0 1 .326-2.137 1.093 1.093 0 0 1 .692 1.939l1.428 1.446c.36.365.862.575 1.374.575.606 0 1.184-.29 1.548-.774l2.347-3.125A1.093 1.093 0 0 1 21.016 0a1.093 1.093 0 0 1 .786 1.85l.002.002 2.33 3.134c.364.489.943.78 1.55.78.518 0 1.004-.201 1.37-.569l1.437-1.444a1.094 1.094 0 0 1 .682-1.946 1.093 1.093 0 0 1 .361 2.125z",key:4})])])}r.defaultProps={width:"42",height:"49",viewBox:"0 0 42 49"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"evenodd"},[a.createElement("path",{d:"M6.25 33.287V29.85L14.002 20l6.245 6.862 5.492-2.954 8.015 5.943v3.436zM25.018 16.244a2.507 2.507 0 0 0 2.518-2.497 2.507 2.507 0 0 0-2.518-2.497 2.507 2.507 0 0 0-2.518 2.497 2.507 2.507 0 0 0 2.518 2.497",key:0}),a.createElement("path",{d:"M4 2c-1.103 0-2 .897-2 2v32c0 1.103.897 2 2 2h32c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2H4zm32 38H4c-2.206 0-4-1.794-4-4V4c0-2.206 1.794-4 4-4h32c2.206 0 4 1.794 4 4v32c0 2.206-1.794 4-4 4z",key:1})]))}r.defaultProps={width:"40",height:"40",viewBox:"0 0 40 40"},e.exports=r,r.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"nonzero"},[a.createElement("path",{d:"M2 2v36h28V9.293L23.136 2H2zM0 0h24l8 8.5V40H0V0z",key:0}),a.createElement("path",{d:"M30.498 8.5l.004 2-8.502.02V1.5h2v7.015z",key:1})]))}r.defaultProps={width:"32",height:"40",viewBox:"0 0 32 40"},e.exports=r,r.default=r},function(e,t,n){"use strict";n.r(t),t.default=n.p+"./asset/a416a4c74c6a529bbd5f0cf5be42cf47.jpg"},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=n(177),m=n(259),v=r(n(158)),g=n(1165),E=r(n(41)),_=n(964);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var k=function(e){(0,u.default)(n,e);var t=y(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onButtonClick=e.onButtonClick.bind((0,l.default)(e)),e}return(0,s.default)(n,[{key:"render",value:function(){var e;return f.default.createElement(v.default,{isClickable:!0,id:"help-button",className:this.props.className,iconName:"help",onButtonClick:this.onButtonClick,isSelected:this.props.helpOpen,showAsOption:this.props.showAsOption,title:p.default.translate("help.help"),onHover:g.LearningCenter.preload,mixPanel:{params:(e={},(0,i.default)(e,E.default.PARAMS.TYPE,E.default.TOOLBAR_ELEMENTS.HELP),(0,i.default)(e,E.default.PARAMS.COMPONENT,this.props.component),e)},ariaLabel:p.default.translate("help.help"),role:"link",tabIndex:"0"})}},{key:"onButtonClick",value:function(){this.props.onToggleHelp()}}]),n}(f.Component);k.defaultProps={className:""};var S=(0,m.connect)((function(e){return{helpOpen:e.help.helpOpen}}),(function(e){return(0,h.bindActionCreators)({onToggleHelp:_.toggleHelp},e)}))(k);t.default=S},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(18)),m=r(n(945)),v=r(n(13)),g=r(n(41)),E=r(n(44)),_=r(n(101)),y=r(n(1183)),k=r(n(2053)),S=r(n(1194));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var b=function(e){(0,u.default)(n,e);var t=T(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e)).handleBlur=function(e){!e.currentTarget.contains(e.relatedTarget)&&a._toggleUserMenu()},a.handleLearnAboutClick=function(e){if("A"===e.target.nodeName){var t,n,a=v.default.getAppdata();g.default.sendEvent(g.default.TITLES.CLICK_LEARN_ABOUT,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.POSSIBLE_ROLES,null==a||null===(t=a.userDetails)||void 0===t||null===(n=t.roles)||void 0===n?void 0:n.possibleRoles))}},a._learnAboutButton=function(){return f.default.createElement("div",{className:"user-menu__learn-about",onClick:a.handleLearnAboutClick},f.default.createElement("span",(0,_.default)(h.default.translate("user-menu.settings.learn-about"),!1)))},a._openSidePane=a._openSidePane.bind((0,l.default)(a)),a._openUserSidePane=a._openSidePane.bind((0,l.default)(a),"user"),a._openAccountSidePane=a._openSidePane.bind((0,l.default)(a),"account"),a._toggleUserMenu=a._toggleUserMenu.bind((0,l.default)(a)),a._closeAll=a._closeAll.bind((0,l.default)(a)),a._handleLogout=a._handleLogout.bind((0,l.default)(a)),a._openOfflineManagement=function(){E.default.goToOfflineHtml({workOffline:!0})};var r=v.default.getUser();a.isGuestUser=r.isGuest,a.isAnonymousUser=v.default.isAnonymous(),a.isTrainingManager=v.default.isTrainingManager(r),a.isAdministrator=v.default.isAdministrator(r),a.isSubAccountAdmin=v.default.isSubAccountAdmin(r),a.userFullName=r&&r.nickname||h.default.translate("common.guest");var s=v.default.getAppdata();return a.isSelfService=s.accountDetails.isSelfService,a.isGuestCorporateMode=a.isGuestUser&&!a.isSelfService,a.settingsButtonClassName="user-menu__settings",a.state={showUserMenu:!1,showBecomeInstructorDialog:!1,hideUserMenu:e.hideUserMenu,renderAccountSettings:a.isTrainingManager||a.isAdministrator||a.isSubAccountAdmin},a}return(0,s.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enable||this.setState({showUserMenu:!1,showSidePane:!1,showRegistrationForm:!1})}},{key:"componentDidMount",value:function(){var e=this;this.state.renderAccountSettings||v.default.isAnonymous()||v.default.getUserRoleBySite((function(t){v.default.isManager(t)&&e.setState({renderAccountSettings:!0})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.showUserMenu,a=t.showSidePane,r=t.showRegistrationForm;if(v.default.isFeatureEnabled("disableUserMenu")||v.default.isMobile()&&this.isGuestCorporateMode)return null;var i=this.userFullName.substr(0,1).toUpperCase();if(v.default.isMobile()&&!n)return this.getMobileUserMenuButton(i);var o,s=(0,p.default)("user-menu__border",{"user-menu__border--show":this.props.separator}),l=(0,p.default)("user-menu__toggle",{"user-menu__toggle--selected":n||a||r});this.state.showUserMenu?o=this._renderUserMenu():this.state.showSidePane&&(o=this._renderSidePane());var u=o||r?f.default.createElement("div",{className:"all-screen-mask",onClick:this._closeAll}):null,c=this.state.hideUserMenu;return f.default.createElement("div",{className:(0,p.default)("user-menu",this.props.className,{"user-menu--hide-user-menu":c})},u,!c&&f.default.createElement("div",{className:s}),!c&&f.default.createElement("div",{tabIndex:"0",role:"button","aria-label":h.default.translate("user-menu.label"),id:"user-menu-circle",className:l,onClick:this._toggleUserMenu,onKeyDown:function(t){return 13===t.keyCode&&e._toggleUserMenu()},"aria-expanded":n?"true":"false"},f.default.createElement("div",{className:"user-menu__circle-wrapper"},f.default.createElement("div",{className:"user-menu__circle user-menu__circle--button",style:v.default.getCustomHeaderStyle("color")},i))),o)}},{key:"getMobileUserMenuButton",value:function(e){var t=this;return f.default.createElement("div",{id:"user-menu-circle",className:"toolbar-select__option",onClick:function(){t.props.appApi.toggleMobileUserMenu(!0)}},f.default.createElement("div",{className:"user-menu__circle-wrapper"},f.default.createElement("div",{className:"user-menu__circle user-menu__circle--button",style:this._customStyle},e)),this.props.showAsOption&&f.default.createElement("div",{className:"toolbar-select__option-title"},h.default.translate("mobile.profile.settings.title")))}},{key:"_renderUserMenu",value:function(){return f.default.createElement("div",{className:"user-menu__options"},f.default.createElement("div",{className:"user-menu__user-details"},this.userFullName),this._renderUserMenuItems())}},{key:"_renderUserMenuItems",value:function(){return this.isGuestUser?this.isSelfService?f.default.createElement("div",{className:"user-menu__settings-buttons"},this._renderSignUpButton(),this._renderSignUpButton(!0)):f.default.createElement("div",{className:"user-menu__settings-buttons"},this._renderLogOutButton("user-menu.go-to-login-page")):f.default.createElement("div",{className:"user-menu__settings-buttons",onBlur:this.handleBlur},this._renderAccountSettingsButton(),this._renderOfflineManagementButton(),this._renderUserSettingsButton(),this._renderLogOutButton(),v.default.isFeatureEnabled("learnAboutEnabley")&&this._learnAboutButton())}},{key:"_renderUserSettingsButton",value:function(){var e=this;return f.default.createElement("div",{className:this.settingsButtonClassName,onClick:this._openUserSidePane,tabIndex:"0",role:"link",onKeyDown:function(t){return 13===t.keyCode&&e._openUserSidePane()}},h.default.translate("user-menu.settings.option"))}},{key:"_renderSidePane",value:function(){return!this.state.showSidePane||this.isGuestUser||this.isAnonymousUser?null:"account"===this.state.showSidePane?f.default.createElement(k.default,null):f.default.createElement(y.default,null)}},{key:"_openRegistrationForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({showUserMenu:!1,showSidePane:!1,showRegistrationForm:!0}),this.props.appApi.toggleRegistrationForm(!0,e)}},{key:"_openSidePane",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user";this.setState({showUserMenu:!1,showSidePane:e,showRegistrationForm:!1}),g.default.sendEvent(g.default.TITLES.SELECT_FROM_USER_MENU,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.OPTION,"".concat(e,"_settings")))}},{key:"_toggleUserMenu",value:function(){var e=!1;this.state.showUserMenu||this.state.showSidePane||this.state.showRegistrationForm||(e=!0,g.default.sendEvent(g.default.TITLES.CLICK_USER_MENU,g.default.COMPONENTS.USER_MENU)),this.state.showRegistrationForm&&this.props.appApi.toggleRegistrationForm(!1),this.setState({showUserMenu:e,showSidePane:!1,showRegistrationForm:!1})}},{key:"_closeAll",value:function(){this.state.showRegistrationForm&&this.props.appApi.toggleRegistrationForm(!1),this.setState({showUserMenu:!1,showSidePane:!1,showRegistrationForm:!1},this.props.onClose)}},{key:"_handleLogout",value:function(){g.default.sendEvent(g.default.TITLES.SELECT_FROM_USER_MENU,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.OPTION,"logout")),this.props.appApi.logout()}},{key:"_renderLogOutButton",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user-menu.logout";return f.default.createElement("div",{id:"user-menu-logout",className:"user-menu__logout",onClick:this._handleLogout,tabIndex:"0",role:"button",onKeyDown:function(t){return 13===t.keyCode&&e._handleLogout()}},h.default.translate(t))}},{key:"_renderSignUpButton",value:function(e){var t=this;return f.default.createElement(S.default,{buttonClassName:this.settingsButtonClassName,renderSignUpForm:function(){t._openRegistrationForm(e?{showLoginFirst:!0}:null),g.default.sendEvent(g.default.TITLES.SELECT_FROM_USER_MENU,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.USER_ACTION,e?"login":"sign_up"))},isLogin:e})}},{key:"_renderAccountSettingsButton",value:function(){var e=this;return this.state.renderAccountSettings?f.default.createElement("div",{id:"user-menu-account-management",className:"user-menu__account-management",onClick:this._openAccountSidePane,tabIndex:"0",role:"button",onKeyDown:function(t){return 13===t.keyCode&&e._openAccountSidePane()}},h.default.translate("user-menu.settings.title")):null}},{key:"_renderOfflineManagementButton",value:function(){return m.default.isSupport()?f.default.createElement("div",{id:"user-menu-offline-management",className:"user-menu__offline-management",onClick:this._openOfflineManagement},h.default.translate("user-menu.offline.title")):null}}]),n}(f.Component);t.default=b,b.defaultProps={className:"",appApi:{setStage:function(){},logout:function(){},toggleRegistrationForm:function(){}},hideUserMenu:!1,onClose:function(){},enable:!1,separator:!1,showAsOption:!1}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(13))),p=r(n(2051)),h=r(n(57));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=f.default.getAppdata().appConf.locale,t=f.default.getLocaleDirection(e),n="".concat(this.props.className," login__login-only-container inner"),a=this._getParams(),r=f.default._getAppDetails().appId;return d.default.createElement(p.default,(0,i.default)({},a,{formClass:"login__login-only-form",wrapperClass:n,direction:t,rests:h.default,appId:r,includeSiteRedirect:!0,loginErrorCode:this.props.loginErrorCode,isInnerLoginForm:!0}))}},{key:"_getParams",value:function(){if(this.props.changePassword)return{changeMyPassword:!0};if(this.props.signUp){var e={showTitle:!0,showSignUpPage:!0,selfRegistration:!0};return e.selfRegistrationLogin=this.props.showLoginFirst,e.guestRegistration=f.default.isGuest(),e.allowSignUpWithChannel=f.default.isAnonymous(),e}return{}}}]),n}(d.Component);t.default=v,v.defaultProps={className:"",changePassword:!1,signUp:!1,showLoginFirst:!1,loginErrorCode:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MEMBER_STATUS=void 0;var a={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",PENDING_ACTIVATION:"PENDING_ACTIVATION"};t.MEMBER_STATUS=a;var r=a;t.default=r},,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Hoc=void 0;var i=r(n(33)),o=r(n(34)),s=r(n(23)),l=r(n(68)),u=r(n(3)),c=r(n(4)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=r(n(2)),v=r(n(129)),g=r(n(511)),E=r(n(328)),_=r(n(1231)),y=r(n(176)),k=r(n(550)),S=r(n(1234)),T=r(n(1091)),b=r(n(604));function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var I=E.default.Provider,O=_.default.Provider,A=(0,k.default)({communicator:m.default.instanceOf(v.default),errorHandler:m.default.instanceOf(S.default),backendUrl:m.default.string,accessToken:m.default.shape({}),locale:m.default.string,site:m.default.string,user:m.default.object,style:m.default.object,ltr:m.default.bool,uploadFile:m.default.func,navigate:m.default.func,openCallback:m.default.func,getChannels:m.default.func}),N=A.Provider,w=A.Hoc;t.Hoc=w;var R=function(e){(0,d.default)(a,e);var t,n=C(a);function a(e){var t;return(0,u.default)(this,a),(t=n.call(this,e)).state={channels:null},t.uploadFile=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return y.default.storeFile.apply(y.default,[{serviceUrl:e.backendUrl,accessToken:e.accessToken}].concat(n))},t}return(0,c.default)(a,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.user,(0,l.default)(e,["children","user"])),r=n.ltr;return h.default.createElement("div",{className:"library-stage"},h.default.createElement("div",{className:"t2k-library-scroll",style:{backgroundColor:"#f7f8f9",height:"100%",direction:r?"ltr":"rtl",flexGrow:1}},h.default.createElement(N,(0,s.default)({},n,{getChannels:a.getChannels,uploadFile:this.uploadFile}),h.default.createElement(I,null,h.default.createElement(O,null,h.default.createElement(g.default,{ltr:r,uploadFile:this.uploadFile},h.default.createElement("div",{className:r?"ltr":"rtl"},t)))))))}}],[{key:"getChannels",value:(t=(0,o.default)(i.default.mark((function e(){var t=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0&&void 0!==t[0]&&t[0])){e.next=5;break}return e.next=4,T.default.getAllChannelsWithRoles();case 4:b.default.allChannelsWithRoles=e.sent;case 5:return e.abrupt("return",b.default.allChannelsWithRoles);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),a}(h.Component);t.default=R,R.defaultProps={ltr:!0}},,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1687)).default;t.default=r},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2093));n(2094);var i=r.default;t.default=i},,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LINK_TYPE=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(12)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(2054)),m=r(n(13)),v=r(n(18)),g=r(n(41)),E=r(n(21)),_=r(n(58)),y=r(n(126)),k=n(1224),S=r(n(78)),T=r(n(2057)),b=r(n(2086)),C=r(n(2087)),I=r(n(334)),O=r(n(491)),A=r(n(1248)),N=r(n(600));function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var R="DAY",P="HOUR",M="manage_learners",L="invite-learners",D="share",x={SELF_REGISTER:"self_register",LINK_TO_COURSE:"link_to_course"};t.LINK_TYPE=x;var F=function(e){(0,u.default)(n,e);var t=w(n);function n(e){var a,r,i;(0,o.default)(this,n),(i=t.call(this,e))._goToInviteTabFromEmptyState=i._goToInviteTabFromEmptyState.bind((0,s.default)(i)),i._toggleQrCode=i._toggleQrCode.bind((0,s.default)(i)),i._onTabClick=i._onTabClick.bind((0,s.default)(i)),i._handleCancelClick=i._handleCancelClick.bind((0,s.default)(i)),i._onExpirationChange=i._onExpirationChange.bind((0,s.default)(i)),i._showMessage=i._showMessage.bind((0,s.default)(i)),i._hideMessage=i._hideMessage.bind((0,s.default)(i)),i._copyLink=i._copyLink.bind((0,s.default)(i));var l=e.isChannelAllowedForGuests,u=e.entityType,c=m.default.getAppdata(),d=c.accountDetails,f=null==d?void 0:d.isSelfService;i.isGroupManagement=u===E.default.ROLE_AND_PERMISSION_CONTEXT.GROUP;var p=S.default.getPermissionByActionType(k.permissionType["".concat(u,"_MANAGE_USERS")],e.entityId,u),h=S.default.getPermissionByActionType(k.permissionType["".concat(u,"_INVITE_LEARNERS")],e.entityId,u),v=S.default.getPermissionByActionType(k.permissionType["".concat(u,"_ASSIGN_USERS_FROM_ACCOUNT")],e.entityId,u);i.canShareSelfRegisterLink=null===(a=c.appConf.manageLearnersAndMembers)||void 0===a?void 0:a.shareSelfRegisterLink,i.canShareInternalLink=null===(r=c.appConf.manageLearnersAndMembers)||void 0===r?void 0:r.shareLinkToChannel,i.canShareCourseByLink=i.isGroupManagement||f||l||i.canShareSelfRegisterLink||i.canShareInternalLink,i.showInviteTab=h&&(i.isGroupManagement?m.default.isFeatureEnabled("manageTeamInviteByEmail"):f||!l),i.showAssignButton=v&&!i.isGroupManagement,i.showManageTab=p||h,i.showInviteByIdTab=i.isGroupManagement&&m.default.isFeatureEnabled("manageTeamInviteById"),i.api=i.isGroupManagement?O.default:I.default,i.dialogStyleClass="manage-learners-dialog";var g=n.getExpiration(),_=g.expiration,y=g.expirationValues;return i.state={tabs:[],goToTabIndex:void 0,expiration:_,expirationValues:y,siteShortUrl:"",siteShortPrivateUrl:"",message:"",messageStyleClass:"",showOnlyQrCode:!1,linkType:i.canShareSelfRegisterLink?x.SELF_REGISTER:i.canShareCourseByLink?x.LINK_TO_COURSE:void 0},i}return(0,l.default)(n,null,[{key:"generateUrl",value:function(e,t){var n=m.default.getURLParam("site")||window.location.hostname,a="".concat(window.location.origin,"/login.html?issignup=true&selfregistration=true").concat(t?"&inviteById=true":"","&invitation_token=").concat(e);return n!==window.location.hostname&&(a+="&site=".concat(n)),a}},{key:"getExpiration",value:function(){var e,t=[{key:0,value:0,display:v.default.translate("modals.manage_learners.link-expiration.no-expiration")},{key:.5,value:12,keyUnit:P,display:v.default.translate("modals.manage_learners.link-expiration.hours",{hoursCount:12})},{key:1,value:1,keyUnit:R,display:v.default.translate("modals.manage_learners.link-expiration.hours",{hoursCount:24})},{key:7,value:7,keyUnit:R,display:v.default.translate("modals.manage_learners.link-expiration.one-week")},{key:14,value:14,keyUnit:R,display:v.default.translate("modals.manage_learners.link-expiration.two-weeks")}],n=null===(e=m.default.getAppdata().appConf.manageLearnersAndMembers)||void 0===e?void 0:e.linkExpiration,a=-1!==t.map((function(e){return e.key})).indexOf(n)?n:14,r=t.find((function(e){return e.key===a}));return{expirationValues:t,expiration:r}}},{key:"getExpirationDate",value:function(e){var t="";if(0!==e.key){var n=new Date;switch(e.keyUnit){case R:n.setDate(n.getDate()+e.value);break;case P:n.setHours(n.getHours()+e.value)}t=n.toISOString()}return t}}]),(0,l.default)(n,[{key:"componentDidMount",value:function(){this.state.linkType===x.SELF_REGISTER?(this.canShareCourseByLink&&this._getInvitationToken(),this.showInviteByIdTab&&this._getInvitationToken(!0)):this.state.linkType===x.LINK_TO_COURSE&&this._getLinkToCourse()}},{key:"componentDidUpdate",value:function(e,t){this.state.expiration.key===t.expiration.key&&this.state.linkType===t.linkType||(this.state.linkType===x.SELF_REGISTER?this._getInvitationToken(this.showInviteByIdTab):this.state.linkType===x.LINK_TO_COURSE&&this._getLinkToCourse())}},{key:"render",value:function(){if(this.state.showOnlyQrCode)return this._renderOnlyQrCode();if(this.tabs=this._getTabsAccordingToPermissions(),!this.tabs.length)return null;var e=this.props,t=e.channelType,n=e.entityName,a=this.isGroupManagement?"modals.manage_members_team.title":t===E.default.CHANNEL_TYPE.STREAM?"modals.manage_members.title":"modals.manage_learners.title";return a=v.default.translate(a),a=n?"".concat(a," - ").concat(n):a,f.default.createElement(h.default,{title:v.default.translate(a),tabs:this.tabs,onClose:this._handleCancelClick,onTabClick:this._onTabClick,isEchoDialogStyle:!0,styleClass:(0,p.default)(this.dialogStyleClass,{"group-management":this.isGroupManagement}),activeTabIndex:this.state.goToTabIndex,additionalContent:this._renderMessage()})}},{key:"_renderOnlyQrCode",value:function(){var e=this;return f.default.createElement(_.default,{styleClass:"".concat(this.dialogStyleClass," qr-code"),theme:_.default.THEMES.LIGHT,title:v.default.translate("modals.manage_learners.tabs.share.qr-code.dialog-title"),content:this._renderShareTab(),close:function(){e.setState({showOnlyQrCode:!1})}})}},{key:"_renderMessage",value:function(){if(!this.state.message)return null;var e=(0,p.default)("".concat(this.dialogStyleClass,"__message-section"),(0,i.default)({},this.state.messageStyleClass,this.state.messageStyleClass));return f.default.createElement("div",{key:"invite-learners-message",className:e},"string"!=typeof this.state.message?this.state.message:f.default.createElement(y.default,{clamp:"1"},this.state.message))}},{key:"_getTabsAccordingToPermissions",value:function(){var e=[];return this.showManageTab&&e.push(this._getManageLearnersTab()),this.showInviteTab&&e.push(this._getInviteLearnersTab()),this.canShareCourseByLink&&!this.isGroupManagement&&e.push(this._getShareTab()),this.showInviteByIdTab&&e.push(this._getInviteByIdTab()),e}},{key:"_getManageLearnersTab",value:function(){var e,t=this.props,n=t.entityId,a=t.entityType,r=t.showNotification,i=t.channelType,o=t.channelProperties,s=this.isGroupManagement||i===E.default.CHANNEL_TYPE.STREAM?"modals.manage_members.title":"modals.manage_learners.title";return{id:M,title:v.default.translate(s),content:f.default.createElement(T.default,{entityType:a,hasInviteTab:this.showInviteTab||this.showInviteByIdTab,entityId:n,permissionToInvite:this.permissionToInvite,showNotification:r,goToInviteTab:(null===(e=this.tabs)||void 0===e?void 0:e.length)>1?this._goToInviteTabFromEmptyState:function(){},showMessage:this._showMessage,hideMessage:this._hideMessage,channelType:i,showAssignButton:this.showAssignButton,channelProperties:o})}}},{key:"_goToInviteTabFromEmptyState",value:function(){var e=this.tabs.findIndex((function(e){return e.id===L}));return-1!==e&&(this.setState({goToTabIndex:e}),!0)}},{key:"_getInviteLearnersTab",value:function(){var e,t=this.props,n=t.channelType,a=t.entityId,r=t.entityType,i=this.showAssignButton&&this.showInviteTab&&!this.canShareSelfRegisterLink;return e=n===E.default.CHANNEL_TYPE.STREAM||this.isGroupManagement?i?"modals.manage_members.addAndInvite.inviteMembers.title":"modals.manage_members.tabs.invite.title":i?"modals.manage_learners.addAndInvite.inviteLearners.title":"modals.manage_learners.tabs.invite.title",{id:L,title:v.default.translate(e),content:f.default.createElement(b.default,{entityId:a,showMessage:this._showMessage,hideMessage:this._hideMessage,entityType:r},this.isGroupManagement&&this._renderLinkContainer(this.state.siteShortUrl,"modals.manage_learners.tabs.ids.share-link"),this.isGroupManagement&&this._renderLinkNote(),this.isGroupManagement&&this._renderExpirationSelector())}}},{key:"_getInviteByIdTab",value:function(){var e=this.props,t=e.entityId,n=e.entityType;return{id:L,title:v.default.translate("modals.manage_learners.addAndInvite.inviteById.title"),content:f.default.createElement(b.default,{entityId:t,showMessage:this._showMessage,hideMessage:this._hideMessage,entityType:n,inviteById:!0},this._renderLinkContainer(this.state.siteShortPrivateUrl,"modals.manage_learners.tabs.ids.share-link"))}}},{key:"_getShareTab",value:function(){return{id:D,title:v.default.translate("modals.INVITE_MANAGE_LEARNERS.QR_CODE.TITLE"),content:this._renderShareTab()}}},{key:"_renderShareTab",value:function(){var e=this;return f.default.createElement(C.default,{siteShortUrl:this.state.siteShortUrl,showOnlyQrCode:this.state.showOnlyQrCode,toggleQrCode:this._toggleQrCode,channelType:this.props.channelType,selectedLinkType:this.state.linkType,onLinkTypeChange:function(t){return e.setState({linkType:t})},linkComp:this._renderLinkContainer(this.state.siteShortUrl,void 0,!0),canShareSelfRegisterLink:this.canShareSelfRegisterLink,canShareInternalLink:this.canShareInternalLink},this._renderExpirationSelector())}},{key:"_toggleQrCode",value:function(e){if(e){var t=this.tabs.findIndex((function(e){return e.id===D}));this.setState({showOnlyQrCode:!0,goToTabIndex:t})}else this.setState({showOnlyQrCode:!1})}},{key:"_onTabClick",value:function(){void 0!==this.state.goToTabIndex&&this.setState({goToTabIndex:void 0}),this._hideMessage()}},{key:"_handleCancelClick",value:function(){var e=this.props.onCancel;e&&e()}},{key:"_getInvitationToken",value:function(e){var t=this,a=this.props.entityId,r=e?void 0:n.getExpirationDate(this.state.expiration);this.api.getInvitationToken(a,r).then((function(a){var r=n.generateUrl(a.token,e);m.default.generateShortUrl(r).then((function(n){t.setState((0,i.default)({},e?"siteShortPrivateUrl":"siteShortUrl",n))})).catch((function(){t.setState((0,i.default)({},e?"siteShortPrivateUrl":"siteShortUrl",r)),N.default.error({message:"fail to generate short url for url ".concat(r)})}))})).catch((function(){N.default.error({message:"fail to retrieve channel invitation token"})}))}},{key:"_getLinkToCourse",value:function(){var e=this,t=m.default.getHrefWithoutAnalyticsParams(),n=m.default.getAppdata(),a="".concat(n.backend_url,"/PlayAppService/accessRouter/site/").concat(n.siteDetails.id,"/rawLinkRedirect?rawURL=").concat(encodeURIComponent(t));m.default.generateShortUrl(a).then((function(t){e.setState({siteShortUrl:t})})).catch((function(){e.setState({siteShortUrl:a}),N.default.error({message:"fail to generate short url for url ".concat(a)})}))}},{key:"_renderExpirationSelector",value:function(){return this.canShareCourseByLink?f.default.createElement("div",{className:"".concat(this.dialogStyleClass,"__link-expiration")},f.default.createElement("span",{className:"".concat(this.dialogStyleClass,"__link-expiration--text")},v.default.translate("modals.manage_learners.link-expiration.label")),f.default.createElement(A.default,{showTooltip:!1,"data-automation-id":"".concat(this.dialogStyleClass,"-link-expire-select"),initialValue:this.state.expiration,values:this.state.expirationValues,handleSelectionChange:this._onExpirationChange})):null}},{key:"_onExpirationChange",value:function(e){this.setState({expiration:e}),this._hideMessage(),g.default.sendEvent(g.default.TITLES.EDIT_LINK_EXPIRATION,g.default.COMPONENTS.INVITED_LEARNERS_DIALOG,(0,i.default)({},g.default.PARAMS.EXPIRATION_PERIOD,e?e.display:""))}},{key:"_showMessage",value:function(e,t,n){if(e){this._clearTimeouts();var a=(0,p.default)({error:t},(0,i.default)({},n,n));this.setState({message:e,messageStyleClass:a}),this.openedMessageId=setTimeout(this._hideMessage,5e3)}}},{key:"_hideMessage",value:function(){var e=this;this.state.message&&(this._clearTimeouts(),this.closedMessageId=setTimeout((function(){e.setState({message:"",messageStyleClass:""})}),1500),this.setState({messageStyleClass:this.state.messageStyleClass+" fade-out"}))}},{key:"_clearTimeouts",value:function(){this.openedMessageId&&clearTimeout(this.openedMessageId),this.closedMessageId&&clearTimeout(this.closedMessageId)}},{key:"_renderLinkContainer",value:function(e,t,n){var a=this;return this.canShareCourseByLink?f.default.createElement("div",{className:"invite-learners__link-container"},!n&&f.default.createElement("span",{className:"invite-learners__link-container--text"},v.default.translate(t||"modals.manage_learners.tabs.invite.invite-with-link")),f.default.createElement("input",{ref:function(e){a.inputShortPrivateUrl=e},className:"invite-learners__link-container--link",type:"text",readOnly:!0,value:e,autoFocus:!0}),f.default.createElement("span",{className:"invite-learners__link-container--copy-link",onClick:function(){a._copyLink(a.inputShortPrivateUrl)}},v.default.translate("modals.INVITE_MANAGE_LEARNERS.INVITE_LINK.BUTTON_TEXT"))):null}},{key:"_renderLinkNote",value:function(){if(!this.canShareCourseByLink)return null;var e=this.isGroupManagement?"modals.manage_learners.link-note-groups":"modals.manage_learners.link-note";return f.default.createElement("div",{className:"invite-learners__link-note"},v.default.translate(e))}},{key:"_copyLink",value:function(e){n._selectLink(e),document.queryCommandSupported&&document.queryCommandSupported("copy")?document.execCommand("copy"):window.clipboardData&&window.clipboardData.setData("Text",e.value),this._hideMessage(),this.props.showNotification(v.default.translate("modals.INVITE_MANAGE_LEARNERS.INVITE_LINK.COPY_MESSAGE")),g.default.sendEvent(g.default.TITLES.COPY_LINK,g.default.COMPONENTS.INVITED_LEARNERS_DIALOG)}}],[{key:"_selectLink",value:function(e){e.focus(),e.select()}}]),n}(f.Component);t.default=F,F.defaultProps={isChannelAllowedForGuests:!1,isGroupManagement:!1,entityType:E.default.ROLE_AND_PERMISSION_CONTEXT.CHANNEL,channelType:"",entityName:"",channelProperties:{}}},,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.toggleHelp=function(){return{type:l.TOGGLE_HELP}},t.toggleFirstVideo=function(){return{type:l.TOGGLE_FIRST}},t.loadCategories=function(){return{type:l.LOAD_CATEGORIES}},t.selectVideo=function(e){return{type:l.SELECT_VIDEO,video:e}},t.selectCategory=function(e){return{type:l.SELECT_CATEGORY,category:e}},t.setVideoState=function(e){return{type:l.SET_VIDEO_STATE,videoState:e}},t.logError=h,t.loadVideos=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{types:[l.LOAD_VIDEOS,l.LOAD_VIDEOS_SUCCESS,h(u.VIDEOS_LOAD_ERROR,l.LOAD_VIDEOS_FAILED)],promise:function(){return p.get(s.default.LOAD_VIDEOS,{},{},!0)},category:e,roles:t}};var r=a(n(9)),i=a(n(53)),o=a(n(28)),s=a(n(57)),l=n(1093),u=n(1727);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=i.default.LogManager,p=o.default.Instance;function h(e,t){return function(n,a,r){var i="".concat(e," ").concat(JSON.stringify(r.error)),o=d(d({},r),{},{message:i});try{f.error("echo",{message:i})}catch(s){}return{type:t,error:o}}}},,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2059));n(2060);var i=r.default;t.default=i},,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EVENTS_TYPES=t.EVENTS=void 0;var r=a(n(0)),i=n(74),o="#5dbcd2",s="#98158e",l="#f99811",u="#37474F",c={ZOOM_LIVE_SESSION:{icon:r.default.createElement(i.ZoomOnIcon,null),text:"learner-dashboard.whats-next-widget.live-session",cta:"learner-dashboard.whats-next-widget.live-session-button"},NEWROW_LIVE_SESSION:{color:u,icon:"icon--live-session",text:"learner-dashboard.whats-next-widget.live-session",cta:"learner-dashboard.whats-next-widget.live-session-button"},CONTENT_DUE_DATE:{color:s,icon:"icon--clock",text:"learner-dashboard.whats-next-widget.due-date"},COURSE_START:{color:o,icon:"icon--calendar-empty",text:"learner-dashboard.whats-next-widget.course-starts"},COURSE_END:{color:o,icon:"icon--calendar-check",text:"learner-dashboard.whats-next-widget.course-ends"},OFF_PLATFORM_EVENT_START:{color:l,icon:"icon--scheduled-event",text:"learner-dashboard.whats-next-widget.off-platform-event-start"}};t.EVENTS=c;t.EVENTS_TYPES={ZOOM_LIVE_SESSION:"ZOOM_LIVE_SESSION",NEWROW_LIVE_SESSION:"NEWROW_LIVE_SESSION",CONTENT_DUE_DATE:"CONTENT_DUE_DATE",COURSE_START:"COURSE_START",COURSE_END:"COURSE_END",OFF_PLATFORM_EVENT_START:"OFF_PLATFORM_EVENT_START"};var d=c;t.default=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1683)),i={Instance:r.default,Poller:r.Poller};t.default=i},,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1718)).default;t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_UPDATED_CONVERSATION=t.COLLAPSE_INBOX=t.EXPAND_INBOX=t.NEW_MESSAGE_RECEIVED=t.LOAD_ATTACHMENTS=t.CLOSE_ATTACH_PICKER=t.OPEN_ATTACH_PICKER=t.LOAD_CONVERSATION_ERROR=t.LOAD_CONVERSATION_SUCCESS=t.LOAD_CONVERSATION=t.SEND_MESSAGE_ERROR=t.SEND_MESSAGE_SUCCESS=t.SEND_MESSAGE=t.CLOSE_CONVERSATION_DETAILS=t.SET_INPUT_MESSAGE=t.LOG_ERROR=t.RESET_MESSAGE_COUNT_ERROR=t.RESET_MESSAGE_COUNT_SUCCESS=t.RESET_MESSAGE_COUNT=t.LOAD_MESSAGES_ERROR=t.LOAD_MESSAGES_SUCCESS=t.LOAD_MESSAGES=t.TOGGLE_COMPOSE=t.TOGGLE_MESSAGES=t.LOAD_MESSAGE_COUNT_ERROR=t.LOAD_MESSAGE_COUNT_SUCCESS=t.LOAD_MESSAGE_COUNT=void 0;t.LOAD_MESSAGE_COUNT="LOAD_MESSAGE_COUNT";t.LOAD_MESSAGE_COUNT_SUCCESS="LOAD_MESSAGE_COUNT_SUCCESS";t.LOAD_MESSAGE_COUNT_ERROR="LOAD_MESSAGE_COUNT_ERROR";t.TOGGLE_MESSAGES="TOGGLE_MESSAGES";t.TOGGLE_COMPOSE="TOGGLE_COMPOSE";t.LOAD_MESSAGES="LOAD_MESSAGES";t.LOAD_MESSAGES_SUCCESS="LOAD_MESSAGES_SUCCESS";t.LOAD_MESSAGES_ERROR="LOAD_MESSAGES_ERROR";t.RESET_MESSAGE_COUNT="RESET_MESSAGE_COUNT";t.RESET_MESSAGE_COUNT_SUCCESS="RESET_MESSAGE_COUNT_SUCCESS";t.RESET_MESSAGE_COUNT_ERROR="RESET_MESSAGE_COUNT_ERROR";t.LOG_ERROR="LOG_ERROR";t.SET_INPUT_MESSAGE="SET_INPUT_MESSAGE";t.CLOSE_CONVERSATION_DETAILS="CLOSE_CONVERSATION_DETAILS";t.SEND_MESSAGE="SEND_MESSAGE";t.SEND_MESSAGE_SUCCESS="SEND_MESSAGE_SUCCESS";t.SEND_MESSAGE_ERROR="SEND_MESSAGE_ERROR";t.LOAD_CONVERSATION="LOAD_CONVERSATION";t.LOAD_CONVERSATION_SUCCESS="LOAD_CONVERSATION_SUCCESS";t.LOAD_CONVERSATION_ERROR="LOAD_CONVERSATION_ERROR";t.OPEN_ATTACH_PICKER="OPEN_ATTACH_PICKER";t.CLOSE_ATTACH_PICKER="CLOSE_ATTACH_PICKER";t.LOAD_ATTACHMENTS="LOAD_ATTACHMENTS";t.NEW_MESSAGE_RECEIVED="NEW_MESSAGE_RECEIVED";t.EXPAND_INBOX="EXPAND_INBOX";t.COLLAPSE_INBOX="COLLAPSE_INBOX";t.RESET_UPDATED_CONVERSATION="RESET_UPDATED_CONVERSATION"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_VIDEO_STATE=t.SELECT_CATEGORY=t.SELECT_VIDEO=t.LOAD_VIDEOS_FAILED=t.LOAD_VIDEOS_SUCCESS=t.LOAD_CATEGORIES=t.LOAD_VIDEOS=t.TOGGLE_FIRST=t.TOGGLE_HELP=void 0;t.TOGGLE_HELP="TOGGLE_HELP";t.TOGGLE_FIRST="TOGGLE_FIRST";t.LOAD_VIDEOS="LOAD_VIDEOS";t.LOAD_CATEGORIES="LOAD_CATEGORIES";t.LOAD_VIDEOS_SUCCESS="LOAD_VIDEOS_SUCCESS";t.LOAD_VIDEOS_FAILED="LOAD_VIDEOS_FAILED";t.SELECT_VIDEO="SELECT_VIDEO";t.SELECT_CATEGORY="SELECT_CATEGORY";t.SET_VIDEO_STATE="SET_VIDEO_STATE"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.iconName,n=e.iconElement,a=e.title,r=e.onClick,i=e.indicator,o=e.isPrimary,s=e.isDisabled,l=e.indicatorCustomClass,u=e.id,f=s?void 0:r,p=(0,d.default)("toolbar-select__option-indicator",l),h=i?c.default.createElement("div",{className:p},i):"",m=(0,d.default)("toolbar-select__option",{"toolbar-select__option--primary":o,"toolbar-select__option--disabled":s}),v=(0,d.default)("toolbar-select__icon","toolbar-select__icon--".concat(t),{"toolbar-select__icon--state_on":this.props.hasStateOn});return c.default.createElement("div",{id:u,className:m,onClick:f},n||c.default.createElement("div",{className:v}),c.default.createElement("div",{className:"toolbar-select__option-title"},a),h)}}]),n}(c.Component);p.defaultProps={indicatorCustomClass:""};var h=p;t.default=h},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(249)).default)({loader:function(){return n.e(34).then(n.t.bind(null,2161,7))},loading:function(){return null}});t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.FirstVideo=t.LearningCenter=void 0;var r=a(n(249)),i=(0,r.default)({loader:function(){return n.e(25).then(n.t.bind(null,2162,7))},loading:function(){return null}});t.LearningCenter=i;var o=(0,r.default)({loader:function(){return n.e(21).then(n.t.bind(null,2163,7))},loading:function(){return null}});t.FirstVideo=o},,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(249)).default)({loader:function(){return n.e(27).then(n.t.bind(null,2175,7))},loading:function(){return null}});t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(249)).default)({loader:function(){return n.e(24).then(n.t.bind(null,2176,7))},loading:function(){return null}});t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),i=(a(n(2)),a(n(13))),o=a(n(11)),s=a(n(154));function l(e){var t,n=e.logoUrl,a=i.default.getAppdata(),l=null==a||null===(t=a.accountDetails)||void 0===t?void 0:t.isSelfService,u=(0,o.default)("logo__image",{"logo__image--default":!n,iEcho:l}),c=n?r.default.createElement("img",{alt:"Logo",className:u,src:i.default.getAssetPath(n)}):r.default.createElement("div",{role:"img","aria-label":"Logo",className:u}),d=function(){s.default.setStage(i.default.getAppdata().appConf.defaultApp)};return r.default.createElement("div",{className:"logo"},r.default.createElement("a",{role:"link",tabIndex:"0","aria-label":"Link to homepage",onClick:d,onKeyDown:function(e){return 13===e.keyCode&&d()}},c))}l.defaultProps={logoUrl:void 0};var u=l;t.default=u},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=r(n(11)),f=r(n(18)),p=r(n(21)),h=r(n(13)),m=r(n(1184)),v=r(n(1185)),g=r(n(930)),E=r(n(1186)),_=r(n(1187));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var k=function(e){(0,s.default)(n,e);var t=y(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:"user-settings-pane"},c.default.createElement("div",{className:"user-settings-pane__title"},f.default.translate("user-menu.settings.option")),c.default.createElement("div",{className:"user-settings-pane__content"},n._renderUserSettingsSections()))}}],[{key:"_renderUserSettingsSections",value:function(){return n._getUserSettingsSections().map((function(e){return c.default.createElement(E.default,{key:e.key,sectionTitle:e.title},e.content)}))}},{key:"_getUserSettingsSections",value:function(){var e="user-settings-pane__section-content",t=[{key:"changePassword",title:f.default.translate("user-menu.settings.changePassword"),content:c.default.createElement(g.default,{className:e,changePassword:!0})}];return!h.default.isAnonymous()&&h.default.isFeatureEnabled("userPreferences")&&h.default.userHasAssignedRole([p.default.ROLES.INSTRUCTOR,p.default.ROLES.LEARNER])&&t.push({key:"emailNotifications",title:f.default.translate("user-menu.settings.emailNotificationsSubtitle"),content:c.default.createElement(m.default,{className:e,renderCheckbox:n.renderCheckbox})}),!h.default.isAnonymous()&&h.default.isFeatureEnabled("pushNotifications")&&t.push({key:"pushNotifications",title:f.default.translate("user-menu.settings.pushNotificationsSubtitle"),content:c.default.createElement(v.default,{className:e,renderCheckbox:n.renderCheckbox})}),t.push({key:"langSelection",title:f.default.translate("user-menu.settings.langSelectionSubtitle"),content:c.default.createElement(_.default,{className:e,currLocale:h.default.getLocale(),locales:f.default.getAvailableContentLocales()})}),t}},{key:"renderCheckbox",value:function(e,t,a){return c.default.createElement("div",{className:"user-settings-pane__checkbox",onClick:e},c.default.createElement("div",{className:n.getCheckBoxIconClass(t)}),c.default.createElement("div",{className:"user-settings-pane__checkbox__text"},a))}},{key:"getCheckBoxIconClass",value:function(e){return(0,d.default)("user-settings-pane__checkbox__icon",{"user-settings-pane__checkbox-icon--checked":e},{"user-settings-pane__checkbox-icon--unchecked":!e})}}]),n}(c.Component);t.default=k},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(33)),s=r(n(34)),l=r(n(3)),u=r(n(4)),c=r(n(12)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=(r(n(2)),r(n(11))),v=r(n(18)),g=r(n(53)),E=r(n(28)),_=r(n(60)),y=r(n(57));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var S=g.default.LogManager,T=E.default.Instance,b={EMAIL_ALERTS:"userPreferences.alerts.emailNotifications.enabled",EMAIL_MESSAGES:"userPreferences.messages.emailNotifications.enabled"},C={EMAIL_ALERTS:"alerts",EMAIL_MESSAGES:"messages"},I=function(e){(0,d.default)(a,e);var t,n=k(a);function a(e){var t;return(0,l.default)(this,a),(t=n.call(this,e)).state={loading:!0,alerts:!1,messages:!1},t._onClicked=t._onClicked.bind((0,c.default)(t)),t}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this._readUserPreferences()}},{key:"render",value:function(){var e=this,t="".concat(this.props.className," push-notifications");return h.default.createElement("div",{className:t},this.state.loading?h.default.createElement("div",{className:"inbox__loader"},h.default.createElement(_.default,{size:_.default.Sizes.SMALL})):Object.keys(C).map((function(t){return e._renderCheckbox(C[t],t)})))}},{key:"_renderCheckbox",value:function(e,t){var n=this;return h.default.createElement("div",{className:"user-settings-pane__checkbox",onClick:function(){n._onClicked(e,t)}},h.default.createElement("div",{className:a._getCheckBoxIconClass(this.state[e])}),h.default.createElement("div",{className:"user-settings-pane__checkbox__text"},v.default.translate("user-menu.settings.".concat(e,".checkboxTitle"))))}},{key:"_readUserPreferences",value:(t=(0,s.default)(o.default.mark((function e(){var t,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get(y.default.USER_PREFERENCES);case 3:t=e.sent,n=t[b.EMAIL_ALERTS],a=t[b.EMAIL_MESSAGES],this.setState({loading:!1,alerts:n,messages:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S.error({message:"UserMenu: error in getting settings list. ".concat(JSON.stringify(e.t0))});case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(){return t.apply(this,arguments)})},{key:"_onClicked",value:function(e,t){var n=this,a=!this.state[e];this.setState((0,i.default)({},e,a),(0,s.default)(o.default.mark((function r(){return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,T.put(y.default.USER_PREFERENCES,{},(0,i.default)({},b[t],a));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),n.setState((0,i.default)({},e,!a),(function(){S.error({message:"UserMenu: failure to save preferences for user. ".concat(JSON.stringify(r.t0))})}));case 8:case"end":return r.stop()}}),r,null,[[0,5]])}))))}}],[{key:"_getCheckBoxIconClass",value:function(e){return(0,m.default)("user-settings-pane__checkbox__icon",{"user-settings-pane__checkbox-icon--checked":e},{"user-settings-pane__checkbox-icon--unchecked":!e})}}]),a}(h.Component);t.default=I,I.defaultProps={className:""}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(33)),s=r(n(34)),l=r(n(3)),u=r(n(4)),c=r(n(12)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=(r(n(2)),r(n(11))),v=r(n(18)),g=r(n(53)),E=r(n(28)),_=r(n(60)),y=r(n(57));function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var S=g.default.LogManager,T=E.default.Instance,b={NEW_CHANNEL_MEMBER:"userPreferences.pushNotifications.NEW_CHANNEL_MEMBER.enabled",NEW_ALERT:"userPreferences.pushNotifications.NEW_ALERT.enabled",NEW_CONTENT_ON_CHANNEL:"userPreferences.pushNotifications.NEW_CONTENT_ON_CHANNEL.enabled",NEW_USER_ASSIGNMENT:"userPreferences.pushNotifications.NEW_USER_ASSIGNMENT.enabled",NEW_MESSAGE:"userPreferences.pushNotifications.NEW_MESSAGE.enabled"},C={NEW_CHANNEL_MEMBER:"newChannelMember",NEW_ALERT:"newAlert",NEW_CONTENT_ON_CHANNEL:"newContent",NEW_USER_ASSIGNMENT:"newAssignment",NEW_MESSAGE:"newMessage"},I=function(e){(0,d.default)(a,e);var t,n=k(a);function a(e){var t;return(0,l.default)(this,a),(t=n.call(this,e)).state={loading:!0,newChannelMember:!1,newAlert:!1,newContent:!1,newAssignment:!1,newMessage:!1},t._onClicked=t._onClicked.bind((0,c.default)(t)),t}return(0,u.default)(a,[{key:"componentDidMount",value:function(){this._readUserPreferences()}},{key:"render",value:function(){var e=this,t="".concat(this.props.className," push-notifications");return h.default.createElement("div",{className:t},this.state.loading?h.default.createElement("div",null,h.default.createElement(_.default,{size:_.default.Sizes.SMALL})):Object.keys(C).map((function(t){return e._renderCheckbox(C[t],t)})))}},{key:"_renderCheckbox",value:function(e,t){var n=this;return h.default.createElement("div",{key:"checkbox_push-noti-".concat(e),className:"user-settings-pane__checkbox",onClick:function(){n._onClicked(e,t)}},h.default.createElement("div",{className:a._getCheckBoxIconClass(this.state[e])}),h.default.createElement("div",{className:"user-settings-pane__checkbox__text"},v.default.translate("user-menu.settings.push-notifications.".concat(e))))}},{key:"_readUserPreferences",value:(t=(0,s.default)(o.default.mark((function e(){var t,n,a,r,i,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get(y.default.USER_PREFERENCES);case 3:t=e.sent,n=t[b.NEW_CHANNEL_MEMBER],a=t[b.NEW_ALERT],r=t[b.NEW_CONTENT_ON_CHANNEL],i=t[b.NEW_USER_ASSIGNMENT],s=t[b.NEW_MESSAGE],this.setState({loading:!1,newChannelMember:n,newAlert:a,newContent:r,newAssignment:i,newMessage:s}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S.error({message:"UserMenu: error in getting settings list. ".concat(JSON.stringify(e.t0))});case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return t.apply(this,arguments)})},{key:"_onClicked",value:function(e,t){var n=this,a=!this.state[e];this.setState((0,i.default)({},e,a),(0,s.default)(o.default.mark((function r(){return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,T.put(y.default.USER_PREFERENCES,{},(0,i.default)({},b[t],a));case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),n.setState((0,i.default)({},e,!a),(function(){S.error({message:"UserMenu: failure to save preferences for user. ".concat(JSON.stringify(r.t0))})}));case 8:case"end":return r.stop()}}),r,null,[[0,5]])}))))}}],[{key:"_getCheckBoxIconClass",value:function(e){return(0,m.default)("user-settings-pane__checkbox__icon",{"user-settings-pane__checkbox-icon--checked":e},{"user-settings-pane__checkbox-icon--unchecked":!e})}}]),a}(h.Component);t.default=I,I.defaultProps={className:""}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={sectionExpanded:!1},a._toggleSection=a._toggleSection.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e=this.state.sectionExpanded,t=this.props,n=t.sectionTitle,a=t.children,r=a?(0,f.default)("user-settings-pane__section-button-arrow",{"user-settings-pane__section-button-arrow--forward":!e},{"user-settings-pane__section-button-arrow--down":e}):"";return d.default.createElement("div",{className:"user-settings-pane__section"},d.default.createElement("div",{className:"user-settings-pane__section-button",onClick:this._toggleSection},d.default.createElement("span",{className:"user-settings-pane__section-button-text"},n),a&&d.default.createElement("span",{className:r})),e&&a)}},{key:"_toggleSection",value:function(){var e=this.props.onClick;"function"==typeof e&&e(),this.setState({sectionExpanded:!this.state.sectionExpanded})}}]),n}(d.Component);t.default=h},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33)),o=r(n(34)),s=r(n(43)),l=a(n(0)),u=(r(n(2)),r(n(60))),c=r(n(36)),d=r(n(18)),f=r(n(356)),p=r(n(28)),h=r(n(53)),m=r(n(57)),v=h.default.LogManager,g=p.default.Instance;function E(e){var t=e.className,n=void 0===t?"":t,a=e.currLocale,r=e.locales,p=(0,l.useState)(!1),h=(0,s.default)(p,2),E=h[0],_=h[1],y=(0,l.useState)(a),k=(0,s.default)(y,2),S=k[0],T=k[1],b=function(){var e=(0,o.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S!==a){e.next=2;break}return e.abrupt("return");case 2:return _(!0),e.prev=3,t={locale:S},e.next=7,g.post(m.default.USER_APP_STATE,{},t);case 7:window.location.reload(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),_(!1),v.error("echo",{message:"Failed to update user app state: ".concat(e.t0&&e.t0.message?e.t0.message:JSON.stringify(e.t0))});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),I="".concat(n," lang-selection");return l.default.createElement("div",{className:I},E&&l.default.createElement("div",null,l.default.createElement(u.default,{size:u.default.Sizes.SMALL})),r.map((function(e){return function(e,t){return l.default.createElement("div",{key:"locale_checkbox_".concat(e),className:"user-settings-pane__checkbox",onClick:function(){b(e)}},l.default.createElement(f.default,{checked:t,id:e,style:!0}),l.default.createElement("div",{className:"user-settings-pane__checkbox__text"},d.default.translate("CONTENT_EDITOR.CREATE_BOOK.LOCALES.".concat(e,".NAME"))))}(e,S===e)})),l.default.createElement(c.default,{id:"select-lang-button",text:d.default.translate("user.settings.action.set-lang"),onClick:C,disabled:S===a}))}var _=(0,l.memo)(E);t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHANNEL_MEMBER_TYPE=void 0;var a={USER:"USER",GROUP:"GROUP"};t.CHANNEL_MEMBER_TYPE=a;var r=a;t.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(28)),s=a(n(355)),l=o.default.Instance,u=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"getProfilesStatus",value:function(e){var t="".concat(s.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/profiles/status");return l.get(t,{channelId:e})}},{key:"getProfiles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(s.default.instance.backendUrl,"/PlayAppService/v2/channels/account/profiles");return l.get(n,{},{params:{profileSubstring:t,channelId:e}})}},{key:"updateChannelProfiles",value:function(e,t,n){return l.post("".concat(s.default.instance.backendUrl,"//PlayAppService/channels/:channelId/profiles"),{channelId:e},{profilesToAdd:t,profilesToRemove:n})}}]),e}();t.default=u},,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(13))),f=r(n(18));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).isGuestUser=d.default.isGuest()||d.default.isAnonymous(),a}return(0,o.default)(n,[{key:"render",value:function(){if(!this.isGuestUser)return null;var e=this.props,t=e.buttonClassName,n=e.renderSignUpForm;return c.default.createElement("div",{className:t,onClick:n},this.props.isLogin?f.default.translate("login.submit-button.login"):f.default.translate("login.submit-button.register"))}}]),n}(c.Component);t.default=h,h.defaultProps={isLogin:!1}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(13)),m=r(n(21)),v=r(n(41)),g=n(177),E=n(259),_=r(n(158)),y=r(n(913)),k=n(510);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var T=function(e){(0,u.default)(n,e);var t=S(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._onClick=a._onClick.bind((0,l.default)(a)),a.appData=h.default.getAppdata(),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._loadCount()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.channelId!==e.channelId&&this._loadCount(e.channelId),e.updatedConversation&&!this.props.messagesOpen&&this._loadCount()}},{key:"componentDidUpdate",value:function(e){if(this.props.activeTool.id===m.default.TOOLS_ID.MESSAGING&&e.messagesOpen===this.props.messagesOpen&&!this.props.messagesOpen){var t=n._translateHash(this.props.activeTool.hash);this.props.toggleMessages(this.props.channelId,{hashData:t})}}},{key:"render",value:function(){var e=p.default.translate("messaging.messages");return f.default.createElement(_.default,{isClickable:!0,id:"messaging-button",className:this.props.className,iconName:"messaging",onButtonClick:this._onClick,indicator:this.props.count,isSelected:this.props.messagesOpen,showAsOption:this.props.showAsOption,title:e,indicatorCallback:this.props.indicatorCallback,onHover:y.default.preload,mixPanel:{params:(0,i.default)({},v.default.PARAMS.TYPE,v.default.TOOLBAR_ELEMENTS.MESSAGES)},ariaLabel:e,role:"button",tabIndex:"0",ariaExpanded:!0})}},{key:"_loadCount",value:function(e){this.props.loadMessageCount(e||this.props.channelId)}},{key:"_onClick",value:function(){this.props.toggleMessages(this.props.channelId,{closeOnToggle:!0})}}],[{key:"_translateHash",value:function(e){var t,n,a={};return["channelId","isInboxExpanded","selectedFolder","selectedId","showConversation"].forEach((function(r){var i="/".concat(r,"/([^/]+)");t=new RegExp(i),(n=t.exec(e))&&n[1]&&(a[r]=n[1])})),a}}]),n}(f.Component);T.defaultProps={className:"",count:0,isInboxOpen:!1,activeTool:{id:null}};var b=(0,E.connect)((function(e){return{messagesOpen:(e=e.messaging).messagesOpen,count:e.count>99?"99+":e.count,updatedConversation:e.updatedConversation}}),(function(e){return(0,g.bindActionCreators)({toggleMessages:k.toggleMessages,loadMessageCount:k.loadMessageCount},e)}))(T);t.default=b},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(12)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(21)),m=r(n(13)),v=r(n(53)),g=r(n(41)),E=n(177),_=n(259),y=r(n(248)),k=r(n(57)),S=r(n(2099)),T=n(1228),b=r(n(2100)),C=n(506),I=r(n(158)),O=r(n(1164));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var R=v.default.LogManager,P=function(e){(0,u.default)(n,e);var t=w(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._discussionTitle=p.default.translate("qna.title"),a.getNewDiscussionCount=a.getNewDiscussionCount.bind((0,s.default)(a)),a.loadDiscussions=a.loadDiscussions.bind((0,s.default)(a)),a._onClick=a._onClick.bind((0,s.default)(a)),a.getStore(),a}return(0,l.default)(n,null,[{key:"getData",value:function(e,t,n){y.default.sendToServer({requestData:N({method:"GET"},e)},(function(e){e.error?n(e.error):t(e.data)}))}},{key:"loadDiscussionInfo",value:function(e,t){var a={url:k.default.GET_DISCUSSION_INFO,params:{discussionId:e}};n.getData(a,(function(e){t(e)}),(function(e){R.error("Discussions",{message:"Failed to fetch the requested filter: ".concat(e.message)})}))}}]),(0,l.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.props.metadata.channelId===this.channelId&&this.props.metadata.libraryItemId===this.libraryItemId||this._initComponent(this.props)}},{key:"getStore",value:function(){if(!this.discussionsStore){var e=(0,E.applyMiddleware)((0,S.default)(y.default.sendToServer));this.discussionsStore=(0,E.compose)(e)(E.createStore)(b.default)}}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.metadata.channelId!==this.channelId||e.metadata.libraryItemId!==this.libraryItemId?this._initComponent(e):e.metadata.pageNumber!==this.pageNumber&&(this.pageNumber=e.metadata.pageNumber,this.pagesIds=e.metadata.pagesIds,this.onPageMove(this.pageNumber)),e&&e.isDiscussionsOpen&&e.isDiscussionsOpen!==this.props.isDiscussionsOpen&&this.loadDiscussions()}},{key:"_initComponent",value:function(e){this.channelId=e.metadata.channelId,this.libraryItemId=e.metadata.libraryItemId,this.libraryItemType=e.metadata.libraryItemType,this.pageNumber=e.metadata.pageNumber,this.pagesIds=e.metadata.pagesIds,this.unsubscribeFromSocketChannel(),this.subscribeToSocketChannel(),this.getNewDiscussionCount(),this.onPageMove(this.pageNumber),this.pageNumber||this.discussionsStore.dispatch((0,T.setVisibilityFilterAction)(C.FILTERS.ALL,null))}},{key:"componentWillUnmount",value:function(){m.default.isMobile()||this.unsubscribeFromSocketChannel()}},{key:"render",value:function(){return f.default.createElement(I.default,{isClickable:!0,id:"collaboration",className:"".concat(this.props.className),iconName:"collaboration",onButtonClick:this._onClick,indicator:this.props.discussionsCount,isSelected:this.props.isDiscussionsOpen,showAsOption:this.props.showAsOption,title:this._discussionTitle,indicatorCallback:this.props.indicatorCallback,onHover:O.default.preload,mixPanel:{params:(0,i.default)({},g.default.PARAMS.TYPE,g.default.TOOLBAR_ELEMENTS.DISCUSSIONS)},ariaLabel:this._discussionTitle,role:"button",tabIndex:"0",ariaExpanded:!0})}},{key:"_onClick",value:function(){var e=!this.props.isDiscussionsOpen;if(this.props.toggleDiscussions(),this.props.setDiscussionsCount(0),this.props.appApi.toggleDiscussions){var t=!!e&&N(N({},this.props.metadata),{},{store:this.discussionsStore,getData:n.getData,onClose:this._onCloseDiscussions.bind(this)});this.props.appApi.toggleDiscussions(t)}}},{key:"_onCloseDiscussions",value:function(){this.props.toggleDiscussions(),this.props.appApi.toggleDiscussions()}},{key:"subscribeToSocketChannel",value:function(){var e=this;this.props.appApi.serverPush(void 0,{type:h.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:this.getSocketChannelId(),callback:this.handlePushMessage.bind(this)},(function(t){e.socketChannelId=t}))}},{key:"getSocketChannelId",value:function(){return this.libraryItemId?"discussions/channel/".concat(this.channelId,"/contentItem/").concat(this.libraryItemId):"discussions/channel/".concat(this.channelId)}},{key:"unsubscribeFromSocketChannel",value:function(){this.socketChannelId&&this.props.appApi.serverPush(void 0,{type:h.default.SERVER_PUSH_TYPES.UNSUBSCRIBE,id:this.socketChannelId})}},{key:"handlePushMessage",value:function(e){if(e&&e.type){var t;switch(e.type){case C.DISCUSSIONS.DISCUSSION_CREATED:t=e.discussion;break;case C.DISCUSSIONS.COMMENT_CREATED:t=e.comment}if(t&&!m.default.isLoggedInUser(t.creator))this.props.store.getState().discussions.isDiscussionsOpen?this.loadDiscussions():this.getNewDiscussionCount()}}},{key:"onPageMove",value:function(e){e&&(this.discussionsStore.dispatch((0,T.setCurrentPageAction)(e)),this.discussionsStore.getState().visibilityFilter===C.FILTERS.PAGE&&this.discussionsStore.dispatch((0,T.setVisibilityFilterAction)(C.FILTERS.PAGE,e)))}},{key:"getNewDiscussionCount",value:function(){var e=this;this.getIndicator((function(t){e.props.store.dispatch((0,T.setDiscussionsCount)(t))}))}},{key:"getIndicator",value:function(e){var t=0,a={url:this.libraryItemId?k.default.GET_NEW_DISCUSSION_COUNT:k.default.GET_NEW_DISCUSSION_COUNT_CHANNEL,params:{channelId:this.channelId,libraryItemId:this.libraryItemId},config:{failOnOffline:!0}};n.getData(a,(function(n){t=n.dirtyDiscussionsCount>99?"99+":n.dirtyDiscussionsCount,e(t)}),(function(n){n&&"offline"===n.message||R.error("Discussions",{message:"Failed to fetch indicator: ".concat(n.message)}),e(t)}))}},{key:"loadDiscussions",value:function(){var e=this;if("discussion"!==this.discussionsStore.getState().appSettings.editMode&&!this.discussionsStore.getState().appSettings.selectedDiscussion){var t={url:k.default.GET_DISCUSSIONS,config:{params:{channelId:this.channelId,libraryItemId:this.libraryItemId}}};n.getData(t,(function(t){var a=[],r={};t&&t.length?(t.forEach((function(t){a.push(t.id),e.addScopeIndexToDiscussion(t),r[t.id]=t})),e.discussionsStore.dispatch((0,T.setDiscussionsAction)(a,r)),t.forEach((function(t){n.loadDiscussionInfo(t.id,(function(n){n&&e.discussionsStore.dispatch((0,T.setDiscussionsInfoAction)(t.id,n.commentsCounter,n.comments))}))}))):e.discussionsStore.dispatch((0,T.setDiscussionsAction)(a,r))}),(function(t){t&&"offline"===t.message?e._onCloseDiscussions():R.error("Discussions",{message:"Failed to fetch the requested filter: ".concat(t.message)})}))}}},{key:"addScopeIndexToDiscussion",value:function(e){e.scopeIndex=this.pagesIds&&e.context&&e.context.pageId?this.pagesIds.indexOf(e.context.pageId)+1:null}}]),n}(f.Component);P.defaultProps={className:"",appApi:{},metadata:{},toggleDiscussions:function(){},setDiscussionsCount:function(){}};var M=(0,_.connect)((function(e){var t=e.discussions;return{isDiscussionsOpen:t.isDiscussionsOpen,discussionsCount:t.discussionsCount}}),(function(e){return(0,E.bindActionCreators)({toggleDiscussions:T.toggleDiscussions,setDiscussionsCount:T.setDiscussionsCount},e)}))(P);t.default=M},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(33)),o=r(n(34)),s=r(n(9)),l=r(n(3)),u=r(n(4)),c=r(n(12)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=(r(n(2)),r(n(18))),v=r(n(53)),g=r(n(28)),E=r(n(21)),_=r(n(13)),y=r(n(58)),k=r(n(41)),S=r(n(356)),T=r(n(158)),b=r(n(1180)),C=r(n(57)),I=n(980),O=r(n(1317)),A=r(n(1198));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var R=v.default.LogManager,P=g.default.Instance,M="webinar",L="virtual_classroom",D=function(e){(0,d.default)(a,e);var t,n=w(a);function a(e){var t;(0,l.default)(this,a),(t=n.call(this,e))._onClick=t._onClick.bind((0,c.default)(t)),t._launch=t._launch.bind((0,c.default)(t)),t._checkActiveTab=t._checkActiveTab.bind((0,c.default)(t)),t._toggleHideParticipants=t._toggleHideParticipants.bind((0,c.default)(t)),t._sessionData={};var r=e.appApi.getLiveSession(),i=e.channelId,o=_.default.getUser().id;return r.state===E.default.LIVE_SESSION_STATES.NONE||r.channelId===i||e.isSessionLeader&&r.channelId===o?(t._sessionData=r,t.state={sessionState:r.state,promptDialog:!1,hasOtherActiveTab:O.default.hasOtherActiveTab()}):(e.appApi.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.NONE}),t.state={sessionState:E.default.LIVE_SESSION_STATES.NONE}),t}return(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.channelId,n=window.openLiveSession;this._getAndSetSession(),this._checkActiveTab(),(null==n?void 0:n.channelId)===t&&(null==n?void 0:n.type)===I.EVENTS_TYPES.NEWROW_LIVE_SESSION&&(window.openLiveSession=void 0,setTimeout((function(){e._onClick()}),1500))}},{key:"_checkActiveTab",value:function(){var e=this;this._checkTimer=null,O.default.hasOtherActiveTab()!==this.state.hasOtherActiveTab?this.setState({hasOtherActiveTab:O.default.hasOtherActiveTab()},(function(){e._getAndSetSession(),e._checkTimer=setTimeout(e._checkActiveTab,5e3)})):this._checkTimer=setTimeout(this._checkActiveTab,5e3)}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this._getAndSetSession()}},{key:"componentWillUnmount",value:function(){this._checkTimer&&clearInterval(this._checkTimer)}},{key:"render",value:function(){var e=this.props,t=e.isSessionLeader,n=e.canCreateSession,a=this.state,r=a.sessionState,i=a.promptDialog,o=a.hasOtherActiveTab;if(!t&&r===E.default.LIVE_SESSION_STATES.NONE||t&&!n&&r===E.default.LIVE_SESSION_STATES.NONE)return null;var l,u=r!==E.default.LIVE_SESSION_STATES.NONE&&!o;l=o?"live-session.toolbar.tool.tooltip.active-other-tab":t?r===E.default.LIVE_SESSION_STATES.BACKGROUND?"live-session.toolbar.tool.tooltip.open-session":"live-session.toolbar.tool.tooltip.start-session":"live-session.toolbar.tool.tooltip.join-session";var c=r===E.default.LIVE_SESSION_STATES.NONE||o?null:m.default.translate("live-session.toolbar.indicator");return h.default.createElement(h.default.Fragment,null,i&&this._renderDialog(),h.default.createElement(T.default,{isClickable:!o,id:"live-session-button",className:this.props.className,iconName:"live-session",iconElement:u?h.default.createElement(A.default,null):null,onButtonClick:this._onClick,isSelected:!1,showAsOption:this.props.showAsOption,title:m.default.translate(l),indicator:c,indicatorCallback:this.props.indicatorCallback,indicatorCustomClass:"t2k-app__live-session--indicator",onHover:b.default.preload,mixPanel:{params:(0,s.default)({},k.default.PARAMS.TYPE,k.default.TOOLBAR_ELEMENTS.LIVE_SESSION)},tabIndex:"0",role:"link",ariaLabel:m.default.translate(l)}))}},{key:"_renderDialog",value:function(){var e=this,t=this.state.hideParticipants;return h.default.createElement(y.default,{styleClass:"live-session-mode-dialog",title:m.default.translate("live-session.toolbar.tool.tooltip.start-session"),close:function(){e.setState({promptDialog:!1})},secondaryActions:[{id:"classroom",text:m.default.translate("live-session.toolbar.tool.dialog.classroom"),type:y.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.setState({promptDialog:!1},(function(){e._launch(L,e.state.hideParticipants)}))}}],actions:[{id:"webinar",text:m.default.translate("live-session.toolbar.tool.dialog.webinar"),type:y.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.setState({promptDialog:!1},(function(){e._launch(M,e.state.hideParticipants)}))}}]},h.default.createElement("div",null,m.default.translate("live-session.toolbar.tool.dialog.mode-content")),h.default.createElement("div",{className:"live-session-mode-dialog__checkbox",onClick:this._toggleHideParticipants},h.default.createElement(S.default,{checked:t}),m.default.translate("live-session.toolbar.tool.dialog.hide-participants")))}},{key:"_toggleHideParticipants",value:function(){this.setState({hideParticipants:!this.state.hideParticipants})}},{key:"_getAndSetSession",value:function(){var e=this;if(!this.state.hasOtherActiveTab){var t=this.props,n=t.isSessionLeader,a=t.channelId,r=t.channelName,i=t.appApi,o=t.showInvite,s=this.props.activeTool.id;n?this._getCurrentLiveSession().then((function(t){if(t&&t.link&&(t.link=JSON.parse(t.link)),e._sessionData=t,e._sessionData&&e._sessionData.id&&e.state.sessionState===E.default.LIVE_SESSION_STATES.NONE)if(e._sessionData.instructorId===_.default.getUser().id){var l=s===E.default.TOOLS_ID.LIVE_SESSION?E.default.LIVE_SESSION_STATES.ACTIVE:E.default.LIVE_SESSION_STATES.BACKGROUND;e.setState({sessionState:l},(function(){i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:l,channelId:a,channelName:r,isSessionLeader:n,link:e._sessionData.link,id:e._sessionData.id,creatorId:e._sessionData.instructorId,showInvite:o})}))}else e._setSessionAsNonCreator();else e._sessionData&&e._sessionData.id||e.setState({sessionState:E.default.LIVE_SESSION_STATES.NONE},(function(){i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.NONE})}))})).catch((function(e){e&&"offline"===e.message||R.error("echo",{message:"failed to get active live session as instructor"})})):this._getCurrentLiveSession().then((function(t){t&&t.link&&(t.link=JSON.parse(t.link)),e._sessionData&&e._sessionData.id===t.id&&(t.link=e._sessionData.link),e._sessionData=t,e._sessionData&&e._sessionData.id?e._setSessionAsNonCreator():e.setState({sessionState:E.default.LIVE_SESSION_STATES.NONE},(function(){i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.NONE})}))})).catch((function(e){e&&"offline"===e.message||R.error("echo",{message:"failed to get active live session as learner"})}))}}},{key:"_setSessionAsNonCreator",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.channelId,r=t.channelName,i=t.appApi,o=t.showInvite,l=this.props.activeTool.id;if(this.state.sessionState!==E.default.LIVE_SESSION_STATES.BACKGROUND){var u=l===E.default.TOOLS_ID.LIVE_SESSION?E.default.LIVE_SESSION_STATES.ACTIVE:E.default.LIVE_SESSION_STATES.INACTIVE;if(!this._sessionData.link&&u===E.default.LIVE_SESSION_STATES.ACTIVE)return void this.setState({sessionState:E.default.LIVE_SESSION_STATES.INACTIVE},(function(){e._launch()}));this.setState({sessionState:u},(function(){i.toggleLiveSession(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:u,channelId:a,channelName:r,isSessionLeader:n,link:e._sessionData.link,id:e._sessionData.id,creatorId:e._sessionData.instructorId},n?{showInvite:o}:{}))}))}}},{key:"_onClick",value:function(){var e,t=this,n=this.props.isSessionLeader,a=_.default.getAppdata().appConf,r=a.forceNewrowSessionMode,i=null!==(e=a.hideParticipantNewrowDefault)&&void 0!==e&&e;n?this._getCurrentLiveSession().then((function(e){e&&e.link&&(e.link=JSON.parse(e.link)),t._sessionData=e,t._sessionData&&t._sessionData.id?(t._setSessionAsNonCreator(),t._launch()):r?t._launch(r,i):t.setState({promptDialog:!0,hideParticipants:i})})):this._launch()}},{key:"_launch",value:function(e,t){var n=this,a=this.props,r=a.isSessionLeader,i=a.appApi,o=a.channelId,s=a.channelName,l=a.showInvite,u=this.state.sessionState;i.setLoader(!0),this._isSessionCreator()&&u===E.default.LIVE_SESSION_STATES.NONE||!this._isSessionCreator()&&u===E.default.LIVE_SESSION_STATES.INACTIVE?_.default.getMediaPermissions().then((function(){return n._getLiveSessionCreationParams()})).then((function(a){n._sessionData.link=a,i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.ACTIVE,channelId:o,channelName:s,isSessionLeader:r,link:a,id:n._sessionData.id,creatorId:n._sessionData.instructorId||_.default.getUser().id,showInvite:l,mode:e,hideParticipants:t})})).catch((function(e){e&&"offline"===e.message?i.setLoader(!1):i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.ACTIVE,error:m.default.translate("live-session.toolbar.error-dialog.content")})})):i.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.NEWROW,state:E.default.LIVE_SESSION_STATES.ACTIVE,channelId:o,channelName:s,isSessionLeader:r,link:this._sessionData.link,id:this._sessionData.id,creatorId:this._sessionData.instructorId})}},{key:"_getCurrentLiveSession",value:(t=(0,o.default)(i.default.mark((function e(){var t,n,a,r,o,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.channelId,a=t.isSessionLeader,r=_.default.getUser().id,!a||n===r){e.next=8;break}return e.next=5,P.get(C.default.GET_LIVE_SESSION,{channelId:r,forceTerminate:!1},{failOnOffline:!0});case 5:if(o=e.sent,!((null===(s=o)||void 0===s?void 0:s.id)&&o.endTime<=0)){e.next=8;break}return e.abrupt("return",o);case 8:return e.next=10,P.get(C.default.GET_LIVE_SESSION,{channelId:n},{failOnOffline:!0});case 10:if(!((o=e.sent).endTime>0||o.type!==E.default.LIVE_SESSION_TYPES.NEWROW)){e.next=13;break}return e.abrupt("return",{link:""});case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_getLiveSessionCreationParams",value:function(){var e=this.props.channelId;return P.get(C.default.GET_LIVE_SESSION_CREATION_PARAMS_NEWROW,{channelId:e})}},{key:"_isSessionCreator",value:function(){return this.props.isSessionLeader&&!this._sessionData.instructorId||this._sessionData.instructorId===_.default.getUser().id}}]),a}(h.Component);D.defaultProps={className:"",channelName:void 0,showAsOption:!1,canCreateSession:!1,activeTool:{id:""},showInvite:!1};var x=D;t.default=x},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("path",{d:"M31.8,9.8c-0.4-0.6-1.2-0.9-1.8-0.5l-5.5,3.2v-0.9c0-2.6-2.1-4.8-4.7-4.9c0,0.2,0,0.5,0,0.7c0,4.4-3.6,8-8,8s-8-3.6-8-8\n\tc0-0.2,0-0.4,0-0.6C1.6,7.3,0,9.2,0,11.6v11c0,2.7,2.2,5,5,5h14.5c2.7,0,5-2.2,5-5v-0.9l5.5,3.2c0.2,0.1,0.4,0.2,0.7,0.2\n\tc0.7,0,1.3-0.6,1.3-1.3V10.4C32,10.2,31.9,10,31.8,9.8z",key:0}),a.createElement("circle",{id:"session-indicator",cx:"11.8",cy:"7.3",r:"5.3",key:1})])}r.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",style:{enableBackground:"new 0 0 32 32"},xmlSpace:"preserve"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(13)),m=r(n(53)),v=r(n(28)),g=r(n(21)),E=r(n(41)),_=r(n(158)),y=r(n(2108)),k=r(n(57)),S=r(n(1198));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var b=m.default.LogManager,C=v.default.Instance,I=function(e){(0,u.default)(n,e);var t=T(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e))._onClick=a._onClick.bind((0,l.default)(a)),a._sessionData={};var r=e.appApi.getLiveSession(),i=e.channelId;return r.state===g.default.LIVE_SESSION_STATES.NONE||r.channelId===i?(a._sessionData=r,a.state={sessionState:r.state}):(e.appApi.toggleLiveSession({state:g.default.LIVE_SESSION_STATES.NONE}),a.state={sessionState:g.default.LIVE_SESSION_STATES.NONE}),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this._getAndSetSession()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this._getAndSetSession()}},{key:"render",value:function(){var e=this.props,t=e.isSessionLeader,n=e.canCreateSession,a=this.state.sessionState;if(!t&&a===g.default.LIVE_SESSION_STATES.NONE||t&&!n&&a===g.default.LIVE_SESSION_STATES.NONE)return null;var r=a!==g.default.LIVE_SESSION_STATES.NONE,o=a===g.default.LIVE_SESSION_STATES.BACKGROUND?"live-session.toolbar.tool.tooltip.open-session":"live-session.toolbar.tool.tooltip.start-session";return f.default.createElement(_.default,{isClickable:!0,id:"live-session-button",className:this.props.className,iconName:"live-session",iconElement:r?f.default.createElement(S.default,null):null,onButtonClick:this._onClick,isSelected:!1,showAsOption:this.props.showAsOption,title:p.default.translate(o),onHover:y.default.preload,mixPanel:{params:(0,i.default)({},E.default.PARAMS.TYPE,E.default.TOOLBAR_ELEMENTS.LIVE_SESSION)}})}},{key:"_getAndSetSession",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.channelId,r=t.appApi;this._getCurrentLiveSession().then((function(t){if(t&&t.isActive){var i=e._sessionData.creatorId===h.default.getUser().id||e._sessionData.state!==g.default.LIVE_SESSION_STATES.NONE?g.default.LIVE_SESSION_STATES.BACKGROUND:g.default.LIVE_SESSION_STATES.INACTIVE;e._sessionData=t,e.setState({sessionState:i},(function(){r.toggleLiveSession({state:i,channelId:a,isSessionLeader:n,liveSessionId:e._sessionData.id,tokboxSessionId:e._sessionData.tokboxSessionId,creatorId:e._sessionData.instructorId})}))}else{var o=g.default.LIVE_SESSION_STATES.NONE;e.setState({sessionState:o},(function(){r.toggleLiveSession({state:o})}))}})).catch((function(e){e&&"offline"===e.message||b.error("echo",{message:"failed to get active live session"})}))}},{key:"_onClick",value:function(){var e=this.props,t=e.isSessionLeader,n=e.appApi,a=e.channelId;n.setLoader(!0),n.toggleLiveSession({state:g.default.LIVE_SESSION_STATES.ACTIVE,channelId:a,isSessionLeader:t,liveSessionId:this._sessionData.id,tokboxSessionId:this._sessionData.tokboxSessionId,creatorId:this._sessionData.instructorId})}},{key:"_getCurrentLiveSession",value:function(){var e=this.props.channelId;return C.get(k.default.GET_LIVE_SESSION_TOKBOX,{},{params:{channelId:e}})}}]),n}(f.Component);I.defaultProps={className:"",showAsOption:!1,canCreateSession:!1};var O=I;t.default=O},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(33)),s=r(n(34)),l=r(n(3)),u=r(n(4)),c=r(n(12)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=(r(n(2)),r(n(18))),v=r(n(53)),g=r(n(28)),E=r(n(21)),_=r(n(13)),y=r(n(58)),k=r(n(36)),S=r(n(41)),T=r(n(158)),b=r(n(57)),C=n(980),I=n(74),O=r(n(2109));function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var R=v.default.LogManager,P=g.default.Instance,M=function(e){(0,d.default)(v,e);var t,n,a,r,f,p=w(v);function v(e){var t,n,a;(0,l.default)(this,v),(a=p.call(this,e))._onClick=a._onClick.bind((0,c.default)(a)),a._launch=a._launch.bind((0,c.default)(a)),a._stateChanged=a._stateChanged.bind((0,c.default)(a)),a._checkTimer=void 0,a.isBringYourOwnZoom="BYOZ"===(null===(t=_.default.getAppdata().appConf.liveSession)||void 0===t||null===(n=t.zoom)||void 0===n?void 0:n.mode),a._isSafari=_.default.isBrowserSafari();var r=e.appApi.getLiveSession(),i=e.channelId;r.state===E.default.LIVE_SESSION_STATES.NONE||r.channelId===i?a.state={sessionState:r,promptConnectDialog:!1,promptJoinUrlDialog:void 0,isConnectedToZoom:r.isConnectedToZoom,capacityFullData:void 0,promptEmailWarningDialog:!1}:(e.appApi.toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,state:E.default.LIVE_SESSION_STATES.NONE,isConnectedToZoom:r.isConnectedToZoom}),a.state={sessionState:{state:E.default.LIVE_SESSION_STATES.NONE},promptConnectDialog:!1,promptJoinUrlDialog:void 0,isConnectedToZoom:r.isConnectedToZoom,capacityFullData:void 0,promptEmailWarningDialog:!1});var o=window.openLiveSession;return(null==o?void 0:o.channelId)===i&&(null==o?void 0:o.type)===C.EVENTS_TYPES.ZOOM_LIVE_SESSION&&(window.openLiveSession=void 0,a.autoLaunchLiveSessionZoom=!0),a}return(0,u.default)(v,[{key:"componentDidMount",value:(f=(0,s.default)(o.default.mark((function e(){var t,n,a=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.channelId,t.appApi.serverPush(void 0,{type:E.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:"liveSession/state/".concat(n),callback:this._stateChanged},(function(e){a._wsStateId=e})),this._checkZoomConnection(!1);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){this.props.channelId!==e.channelId?this._getAndSetSession():this.state.sessionState.state===E.default.LIVE_SESSION_STATES.ACTIVE&&this.state.sessionState.state!==t.sessionState.state&&this._activateLiveSession()}},{key:"componentWillUnmount",value:function(){this._checkTimer&&(clearTimeout(this._checkTimer),this._checkTimer=void 0),this._liveSessionAliveIntervalId&&(clearInterval(this._liveSessionAliveIntervalId),this._liveSessionAliveIntervalId=void 0),this.props.appApi.serverPush(void 0,{type:E.default.SERVER_PUSH_TYPES.UNSUBSCRIBE,id:this._wsStateId})}},{key:"render",value:function(){var e=this.props,t=e.isSessionLeader,n=e.canCreateSession,a=this.state,r=a.sessionState,o=a.promptJoinUrlDialog,s=a.promptConnectDialog,l=a.isConnectedToZoom,u=a.capacityFullData,c=a.promptEmailWarningDialog;if(!t&&r.state===E.default.LIVE_SESSION_STATES.NONE||t&&!n&&r.state===E.default.LIVE_SESSION_STATES.NONE)return null;var d,f=r.state!==E.default.LIVE_SESSION_STATES.NONE;d=l?t?r.state===E.default.LIVE_SESSION_STATES.BACKGROUND?"live-session.toolbar.tool.tooltip.zoom-open-session":"live-session.toolbar.tool.tooltip.zoom-start-session":"live-session.toolbar.tool.tooltip.zoom-join-session":this.isBringYourOwnZoom?"live-session.toolbar.tool.tooltip.zoom-start-session":"live-session.toolbar.tool.tooltip.zoom-not-connect",_.default.isMobile()&&(d+="-mobile");var p=r.state!==E.default.LIVE_SESSION_STATES.NONE?m.default.translate("live-session.toolbar.indicator"):null,v=f?h.default.createElement(I.ZoomOnIcon,null):h.default.createElement(h.default.Fragment,null,h.default.createElement(I.ZoomOffIcon,null),!l&&h.default.createElement(I.ExclamationMarkIcon,null));return h.default.createElement(h.default.Fragment,null,r.error&&this._renderErrorDialog(),c&&this._renderEmailWarningDialog(),s&&this._renderConnectDialog(),!!u&&this._renderCapacityFull(),!!o&&!s&&!u&&this._renderJoinUrlDialog(),h.default.createElement(T.default,{isClickable:!0,id:"live-session-button",className:this.props.className,iconName:"live-session",iconElement:h.default.createElement("div",{className:"element__icon"},v),onButtonClick:this._onClick,isSelected:!1,showAsOption:this.props.showAsOption,title:m.default.translate(d),indicator:p,indicatorCallback:this.props.indicatorCallback,indicatorCustomClass:"t2k-app__live-session--indicator",mixPanel:{params:(0,i.default)({},S.default.PARAMS.TYPE,S.default.TOOLBAR_ELEMENTS.LIVE_SESSION)}}))}},{key:"_renderEmailWarningDialog",value:function(){var e=this;return h.default.createElement(y.default,{styleClass:"live-session-zoom-warning-dialog",title:m.default.translate("live-session.zoom.capacity-warning.title"),content:h.default.createElement("div",{className:"zoom-email-warning"},h.default.createElement("div",{className:"zoom-email-warning__line-1"},m.default.translate("live-session.zoom.email-warning.line-1",{emailAddress:_.default.getUser().email}))),close:function(){e.setState({promptEmailWarningDialog:!1})},actions:[{id:"close",text:m.default.translate("live-session.toolbar.error-dialog.close"),type:y.default.BUTTON_TYPES.PRIMARY,onClick:function(){e.setState({promptEmailWarningDialog:!1})}}]})}},{key:"_renderCapacityFull",value:function(){var e=this,t=this.state.capacityFullData;return h.default.createElement(y.default,{styleClass:"live-session-zoom-capacity",title:m.default.translate("live-session.zoom.capacity-warning.title"),content:h.default.createElement("div",{className:"zoom-capacity-warning"},h.default.createElement("div",{className:"zoom-capacity-warning__line-1"},m.default.translate("live-session.zoom.capacity-warning.line-1")),h.default.createElement("div",{className:"zoom-capacity-warning__line-2"},m.default.translate("live-session.zoom.capacity-warning.line-2"))),actions:[{id:"later",text:m.default.translate("live-session.zoom.capacity-warning.try-later"),type:y.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.setState({capacityFullData:void 0,promptJoinUrlDialog:void 0})}},{id:"continue",text:m.default.translate("live-session.zoom.capacity-warning.continue"),type:y.default.BUTTON_TYPES.PRIMARY,onClick:function(){var n=e.props.appApi;if(n.setLoader(!0),e.state.promptJoinUrlDialog)e.setState({capacityFullData:void 0},(function(){n.setLoader(!1)}));else{var a=t;e.setState({capacityFullData:void 0,sessionState:a},(function(){e._toggleLiveSession(a),n.setLoader(!1)}))}}}]})}},{key:"_renderConnectDialog",value:function(){var e=this;return h.default.createElement(O.default,{setLoader:this.props.appApi.setLoader,onClose:function(t){e.setState({promptConnectDialog:!1},(function(){t&&e._checkZoomConnection(!0)}))},onError:function(){var t={sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,state:E.default.LIVE_SESSION_STATES.ACTIVE,error:m.default.translate("live-session.toolbar.error-dialog.cant-create-user"),isConnectedToZoom:e.state.isConnectedToZoom};e.setState({promptConnectDialog:!1,sessionState:t},(function(){e._toggleLiveSession(t)}))}})}},{key:"copyLink",value:function(e){this.selectLink(e),document.queryCommandSupported&&document.queryCommandSupported("copy")?document.execCommand("copy"):window.clipboardData&&window.clipboardData.setData("Text",this[e].value)}},{key:"selectLink",value:function(e){this[e].focus(),this[e].select()}},{key:"_renderJoinUrlDialog",value:function(){var e=this,t=this.state.promptJoinUrlDialog;return h.default.createElement(y.default,{styleClass:"live-session-zoom-join",title:m.default.translate("live-session.toolbar.zoom.join.title"),content:h.default.createElement("div",{className:"zoom-join-container"},h.default.createElement("div",{className:"link-title"},m.default.translate("live-session.toolbar.zoom.join.content")),h.default.createElement("div",{className:"flex-container"},h.default.createElement("input",{type:"text",readOnly:!0,value:t.link.joinURL,ref:function(t){e.joinLinkRef=t},onClick:function(){return e.selectLink("joinLinkRef")}}),h.default.createElement(k.default,{id:"btn-copy",onClick:function(){e.copyLink("joinLinkRef")},text:m.default.translate("live-session.toolbar.zoom.join.copy"),type:k.default.TYPES.SECONDARY}))),close:function(){e.setState({promptJoinUrlDialog:void 0})},actions:[{id:"continue",text:m.default.translate("live-session.toolbar.zoom.join.continue"),type:y.default.BUTTON_TYPES.PRIMARY,onClick:function(){var n=t;e.setState({promptJoinUrlDialog:void 0,sessionState:n},(function(){e._toggleLiveSession(n)}))}}]})}},{key:"_stateChanged",value:function(e){var t=this;if(e.isActive)this._getAndSetSession();else{var n={state:E.default.LIVE_SESSION_STATES.NONE,isConnectedToZoom:this.state.isConnectedToZoom};this.setState({sessionState:n},(function(){t._toggleLiveSession(n)}))}}},{key:"_getAndSetSession",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.channelId,r=this.state.isConnectedToZoom;n?this._getCurrentLiveSession().then((function(){var t,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(null===(t=e.state.sessionState.link)||void 0===t?void 0:t.id)||(null===(n=e.state.sessionState.link)||void 0===n?void 0:n.id)!==(null===(i=o.link)||void 0===i?void 0:i.id))if(o.id&&o.link&&e.state.sessionState.state===E.default.LIVE_SESSION_STATES.NONE){var s={state:E.default.LIVE_SESSION_STATES.INACTIVE,channelId:a,isSessionLeader:o.instructorId===_.default.getUser().id,link:o.link,id:o.id,isConnectedToZoom:r};e.setState({sessionState:s},(function(){e._toggleLiveSession(s)}))}else if(!o.id||!o.link||o.instructorId!==_.default.getUser().id){var l={state:E.default.LIVE_SESSION_STATES.NONE,isConnectedToZoom:r};e.setState({sessionState:l},(function(){e._toggleLiveSession(l)}))}})).catch((function(e){e&&"offline"===e.message||R.error("echo",{message:"failed to get active live session as instructor"})})):this._getCurrentLiveSession().then((function(){var t,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(null===(t=e.state.sessionState.link)||void 0===t?void 0:t.id)||(null===(i=e.state.sessionState.link)||void 0===i?void 0:i.id)!==(null===(o=s.link)||void 0===o?void 0:o.id))if(s.id&&s.link){if(e.state.sessionState.state!==E.default.LIVE_SESSION_STATES.BACKGROUND){var l={state:E.default.LIVE_SESSION_STATES.INACTIVE,channelId:a,isSessionLeader:n,link:s.link,id:s.id,isConnectedToZoom:r};e.setState({sessionState:l},(function(){e._toggleLiveSession(l)}))}}else{var u={state:E.default.LIVE_SESSION_STATES.NONE,isConnectedToZoom:r};e.setState({sessionState:u},(function(){e._toggleLiveSession(u)}))}})).catch((function(e){e&&"offline"===e.message||R.error("echo",{message:"failed to get active live session as learner"})}))}},{key:"_onClick",value:function(){this.state.isConnectedToZoom?this._launch():this.isBringYourOwnZoom?this.setState({promptEmailWarningDialog:!0}):this.setState({promptConnectDialog:!0})}},{key:"_launch",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.appApi,r=this.state.sessionState;a.setLoader(!0),n?(this._openNewTabInSafari(),this._getCurrentLiveSession().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(null==t?void 0:t.id)&&t.link?e._joinToExistingSession(t.link,t.id):e._startNewSession()}))):this._joinToExistingSession(r.link,r.id)}},{key:"_joinToExistingSession",value:function(e,t){var n=this,a=this.props,r=a.isSessionLeader,i=a.channelId,o=a.appApi,s=this.state.isConnectedToZoom,l={sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,state:E.default.LIVE_SESSION_STATES.ACTIVE,channelId:i,isSessionLeader:r,link:e,id:t,isConnectedToZoom:s};this.setState({sessionState:l},(function(){o.setLoader(!1),n._toggleLiveSession(l)}))}},{key:"_startNewSession",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.appApi,r=t.channelId,i=this.state.isConnectedToZoom;this._getLiveSessionCreationParams().then((function(t){var o={sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,state:E.default.LIVE_SESSION_STATES.ACTIVE,channelId:r,isSessionLeader:n,link:t,id:void 0,isConnectedToZoom:i};t.capacityFull?(e._closeTabInSafari(),e.setState(Object.assign({capacityFullData:o}),(function(){a.setLoader(!1)}))):e.setState({sessionState:o},(function(){a.setLoader(!1),e._toggleLiveSession(o)}))})).catch((function(t){if(a.setLoader(!1),!t||"offline"!==t.message){var n={sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,state:E.default.LIVE_SESSION_STATES.ACTIVE,error:m.default.translate("live-session.toolbar.error-dialog.content"),isConnectedToZoom:i};e.setState({sessionState:n},(function(){e._toggleLiveSession(n)}))}}))}},{key:"_getCurrentLiveSession",value:(r=(0,s.default)(o.default.mark((function e(){var t,n,a,r,i,s,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.channelId,a=t.isSessionLeader,r=_.default.getUser().id,i=function(e){return(null==e?void 0:e.link)&&(e.link=JSON.parse(e.link)),e||{}},!a||n===r){e.next=10;break}return e.next=6,P.get(b.default.GET_LIVE_SESSION,{channelId:r,forceTerminate:!1},{failOnOffline:!0});case 6:if(s=e.sent,!((null===(l=s)||void 0===l?void 0:l.id)&&s.endTime<=0)){e.next=10;break}return s=i(s),e.abrupt("return",s);case 10:return e.next=12,P.get(b.default.GET_LIVE_SESSION,{channelId:n},{failOnOffline:!0});case 12:if(!((s=e.sent).endTime>0||s.type!==E.default.LIVE_SESSION_TYPES.ZOOM)){e.next=15;break}return e.abrupt("return",{link:""});case 15:return s=i(s),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_getLiveSessionCreationParams",value:(a=(0,s.default)(o.default.mark((function e(){var t,n,a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.channelId,e.next=3,P.get(b.default.GET_LIVE_SESSION_CREATION_PARAMS_ZOOM,{channelId:a},{failOnOffline:!0});case 3:if(!(r=e.sent).error&&(r.join_url||r.joinURL)){e.next=6;break}throw new Error(r.error);case 6:return e.abrupt("return",{id:r.id,uuid:r.uuid,joinURL:null!==(t=r.join_url)&&void 0!==t?t:r.joinURL,startURL:null!==(n=r.start_url)&&void 0!==n?n:r.startURL,capacityFull:r.capacityFull,status:r.status});case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"_checkZoomConnection",value:(n=(0,s.default)(o.default.mark((function e(){var t,n,a=this,r=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=this.state.isConnectedToZoom){e.next=9;break}return e.next=5,v._getIfUserConnected();case 5:(n=e.sent)?(this._toggleLiveSession({sessionType:E.default.LIVE_SESSION_TYPES.ZOOM,isConnectedToZoom:n}),this.setState({isConnectedToZoom:n},this._getAndSetSession)):t&&(this._checkTimer=setTimeout((function(){a._checkTimer=void 0,a._checkZoomConnection(!0)}),1e4)),e.next=10;break;case 9:this._getAndSetSession();case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_toggleLiveSession",value:function(e){var t=this;this.props.appApi.toggleLiveSession(e),e.state&&e.state!==E.default.LIVE_SESSION_STATES.NONE?(this.autoLaunchLiveSessionZoom&&(this.autoLaunchLiveSessionZoom=!1,this._launch()),this._liveSessionAliveIntervalId||(this._liveSessionAliveIntervalId=setInterval((function(){t._getAndSetSession()}),1e4))):this._liveSessionAliveIntervalId&&(clearInterval(this._liveSessionAliveIntervalId),this._liveSessionAliveIntervalId=void 0)}},{key:"_activateLiveSession",value:function(){var e=this,t=this.props,n=t.isSessionLeader,a=t.appApi,r=this.state.sessionState,i=r.error,o=r.id,s=r.link;i||(n&&!o?(a.setLoader(!0),this._openNewTabInSafari(),this._activeLiveSession().then((function(t){e.setState({sessionState:N(N({},e.state.sessionState),{},{id:t.id})},(function(){a.setLoader(!1),e._openInNewTab()}))})).catch((function(){R.error("echo",{message:"Couldn't activate a live session: ".concat(s.id)}),a.setLoader(!1),e.setState({sessionState:N(N({},e.state.sessionState),{},{error:m.default.translate("live-session.toolbar.error-dialog.content")})})}))):this._openInNewTab())}},{key:"_activeLiveSession",value:function(){var e=this.props.channelId,t=this.state.sessionState.link,n=N({},t);return delete n.status,P.post(b.default.ACTIVATE_LIVE_SESSION,{},{link:JSON.stringify(n),zoomMeetingId:t.id,zoomMeetingUUID:t.uuid,channelId:e,type:E.default.LIVE_SESSION_TYPES.ZOOM})}},{key:"_openNewTabInSafari",value:function(){this._isSafari&&!this._tabRef&&(this._tabRef=window.open("","_blank"))}},{key:"_closeTabInSafari",value:function(){var e;this._isSafari&&(null===(e=this._tabRef)||void 0===e?void 0:e.close)&&(this._tabRef.close(),this._tabRef=void 0)}},{key:"_updateTabInSafari",value:function(e){this._tabRef&&this._isSafari&&(this._tabRef.rel="noopener noreferrer",this._tabRef.location.href=e,this._tabRef=void 0)}},{key:"_openInNewTab",value:function(){var e=this,t=this.props,n=t.channelId,a=t.isSessionLeader,r=this.state,i=r.isConnectedToZoom,o=r.sessionState,s=o.link,l=a&&"waiting"===s.status?s.startURL:s.joinURL;_.default.isCordova()?this._tabRef=window.cordova.InAppBrowser.open(l,"_system"):this._isSafari&&this._tabRef?this._updateTabInSafari(l):this._tabRef=window.open(l,"_blank","noopener noreferrer");var u={link:s,channelId:n,state:E.default.LIVE_SESSION_STATES.INACTIVE,isSessionLeader:a,id:o.id,isConnectedToZoom:i};this.setState({sessionState:u},(function(){e._toggleLiveSession(u)}))}},{key:"_renderErrorDialog",value:function(){var e=this,t=this.state.sessionState.error;return t?h.default.createElement(y.default,{theme:y.default.THEMES.LIGHT,title:m.default.translate("live-session.toolbar.error-dialog.title"),content:t,actions:[{id:"close",type:y.default.BUTTON_TYPES.PRIMARY,text:m.default.translate("live-session.toolbar.error-dialog.close"),onClick:function(){var t;(null===(t=e._tabRef)||void 0===t?void 0:t.close)&&e._tabRef.close(),e._setNone()}}]}):null}},{key:"_setNone",value:function(){var e=this,t=this.props,n=t.channelId,a=t.isSessionLeader,r=this.state,i=r.isConnectedToZoom,o=r.sessionState,s={link:o.link,channelId:n,state:E.default.LIVE_SESSION_STATES.NONE,isSessionLeader:a,id:o.id,isConnectedToZoom:i};this.setState({sessionState:s},(function(){e._toggleLiveSession(s)}))}}],[{key:"_getIfUserConnected",value:(t=(0,s.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.default.isInstructor()){e.next=5;break}return e.next=3,P.get(b.default.ZOOM_USER,{},{failOnOffline:!0});case 3:return t=e.sent,e.abrupt("return",!(!(null==t?void 0:t.status)||"active"!==t.status));case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),v}(h.Component);M.defaultProps={className:"",showAsOption:!1,canCreateSession:!1};var L=M;t.default=L},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(13)),m=r(n(21)),v=r(n(158)),g=r(n(1181)),E=r(n(41));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,u.default)(n,e);var t=_(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._keyDown=function(e){27!==e.keyCode&&"Escape"!==e.key||a._close()},a._onClick=a._onClick.bind((0,l.default)(a)),a._close=a._close.bind((0,l.default)(a)),a.state={isLeaderboardOpen:a.props.activeTool.id===m.default.TOOLS_ID.LEADERBOARD},a}return(0,s.default)(n,[{key:"render",value:function(){var e={params:(0,i.default)({},E.default.PARAMS.TYPE,E.default.TOOLBAR_ELEMENTS.LEADERBOARD)};return f.default.createElement(v.default,{isClickable:!0,id:"leaderboard-button",className:this.props.className,iconName:"leaderboard",onButtonClick:this._onClick,isSelected:this.state.isLeaderboardOpen,showAsOption:this.props.showAsOption,title:p.default.translate("leaderboard.title"),onHover:g.default.preload,mixPanel:e,role:"button",tabIndex:"0",ariaLabel:p.default.translate("leaderboard.title"),ariaExpanded:!0})}},{key:"componentDidMount",value:function(){this.props.activeTool.id===m.default.TOOLS_ID.LEADERBOARD&&this._open()}},{key:"componentDidUpdate",value:function(e,t){t.isLeaderboardOpen!==this.state.isLeaderboardOpen&&(this.state.isLeaderboardOpen?this._open():this.state.isLeaderboardOpen||this._close())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._keyDown)}},{key:"_onClick",value:function(){this.state.isLeaderboardOpen?this._close():this._open()}},{key:"_open",value:function(){var e=this;this.setState({isLeaderboardOpen:!0},(function(){var t=e.props,n=t.appApi,a=t.channelId,r=t.orgGroups;n.toggleLeaderboard({channelId:a,orgGroups:r,close:e._close})})),window.addEventListener("keydown",this._keyDown)}},{key:"_close",value:function(){var e=this;h.default.isMobile()?this.props.appApi.toggleLeaderboard():this.setState({isLeaderboardOpen:!1},(function(){e.props.appApi.toggleLeaderboard()})),window.removeEventListener("keydown",this._keyDown)}}]),n}(f.Component);y.defaultProps={className:"",showAsOption:!1,activeTool:{id:""},orgGroups:void 0};var k=y;t.default=k},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(202)),m=r(n(13)),v=r(n(41)),g=r(n(1163));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var _="primary",y="secondary",k=function(e){(0,u.default)(n,e);var t=E(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1},a.onClick=a._onClick.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.title||this.setState({showTooltip:!1})}},{key:"render",value:function(){return this.props.showAsOption?this._getOption():this._getButton()}},{key:"_onClick",value:function(){this.props.isClickable&&!this.props.isDisabled&&(this.props.mixPanel&&this.props.mixPanel.params&&v.default.sendEvent(this.props.mixPanel.title||v.default.TITLES.CLICK_ICON_TOOLBAR,this.props.mixPanel.component||v.default.COMPONENTS.TOOLBAR,this.props.mixPanel.params),this.props.onButtonClick(this.props))}},{key:"_getOption",value:function(){var e=this.props,t=e.id,n=e.iconName,a=e.label,r=e.type,i=e.isDisabled,o=e.hasStateOn;return f.default.createElement(g.default,{id:t,iconName:n,title:a,onClick:this.onClick,isPrimary:r===_,isDisabled:i,hasStateOn:o})}},{key:"_getButton",value:function(){var e,t,n,a,r=this,o=(0,p.default)("button__wrapper",this.props.className,(e={},(0,i.default)(e,"button__wrapper--".concat(this.props.type),this.props.type),(0,i.default)(e,"button__wrapper--disabled",this.props.isDisabled),(0,i.default)(e,"button__wrapper--clickable",this.props.isClickable),(0,i.default)(e,"button__wrapper--selected",this.props.isSelected),e)),s=this._getTooltip();if(!this.props.title||m.default.isTablet()||m.default.isMobile()||(t=this._toggleTooltip.bind(this,!0),n=this._toggleTooltip.bind(this,!1)),this.props.iconName){var l=(0,p.default)("button__icon","button__icon--".concat(this.props.iconName),{"button__icon--large_icon":"large"===this.props.iconSize,"button__icon--state_on":this.props.hasStateOn});a=f.default.createElement("div",{className:l})}return f.default.createElement("div",{id:"".concat(this.props.id,"-button"),key:"".concat(this.props.id,"-button"),className:"button",ref:function(e){r._buttonRef=e}},f.default.createElement("div",{className:o,onClick:this.onClick,onMouseEnter:t,onMouseLeave:n},f.default.createElement("span",{className:"button__label"},this.props.label),a),s)}},{key:"_getTooltip",value:function(){return this.state.showTooltip?f.default.createElement(h.default,{content:this.props.title,parentOffsets:this._buttonRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"tooltip--toolbar"}):""}},{key:"_toggleTooltip",value:function(e){this.setState({showTooltip:e})}}]),n}(f.Component);k.defaultProps={type:y,className:"",onButtonClick:function(){},isSelected:!1,mixPanel:null};var S=k;t.default=S},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(18))),m=r(n(13)),v=r(n(21)),g=r(n(41)),E=r(n(1085)),_=r(n(53)),y=r(n(28)),k=r(n(57)),S=n(503),T=r(n(913)),b=r(n(158)),C=r(n(2113));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var N=E.default.Instance,w=_.default.LogManager,R=y.default.Instance,P=document.title,M=function(e){(0,c.default)(n,e);var t=A(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={notificationCount:0,isInboxOpen:!1},a._boundNotificationCount=a._getNotificationCount.bind((0,u.default)(a)),a._onClick=a._onClick.bind((0,u.default)(a)),a._notificationTitle=h.default.translate("notifications.title"),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){N.register([S.POLLER_EVENTS.NEW_NOTIFICATIONS],this._boundNotificationCount),this.props.openOnLoad||this._getNotificationCount()}},{key:"componentDidUpdate",value:function(e,t){if(this.props.countAllNotifications&&t.notificationCount!==this.state.notificationCount){var a=document.title;if(a.endsWith(")")&&this.state.notificationCount>0)return;a=a.endsWith("(".concat(t.notificationCount,")"))&&this.state.notificationCount>0?a.replace("(".concat(t.notificationCount,")"),"(".concat(this.state.notificationCount,")")):0===this.state.notificationCount||a.endsWith(" (0)")?P:"".concat(a," (").concat(this.state.notificationCount,")"),document.title=a}if(this.props.activeTool.id!==v.default.TOOLS_ID.NOTIFICATIONS||t.isInboxOpen!==this.state.isInboxOpen||this.state.isInboxOpen)t.isInboxOpen&&!this.state.isInboxOpen&&this._onCloseInbox();else{var r=n._translateHash(this.props.activeTool.hash),i=r&&r.channelId;this._onClick(r,!0),R.put(k.default.RESET_NOTIFICATION_COUNT,{},{},{params:{channelId:i}}).catch((function(e){w.error("echo",{message:"Notification button: failed to reset notification count. ".concat(JSON.stringify(e))})}))}}},{key:"componentWillUnmount",value:function(){this._isUnMounted=!0,N.deregister([S.POLLER_EVENTS.NEW_NOTIFICATIONS],this._boundNotificationCount)}},{key:"render",value:function(){return p.default.createElement(b.default,{isClickable:!0,id:"notification-button",className:this.props.className,iconName:"notifications",onButtonClick:this._onClick,indicator:this.state.notificationCount,isSelected:this.state.isInboxOpen,showAsOption:this.props.showAsOption,title:this._notificationTitle,indicatorCallback:this.props.indicatorCallback,onHover:T.default.preload,mixPanel:{params:(0,o.default)({},g.default.PARAMS.TYPE,g.default.TOOLBAR_ELEMENTS.NOTIFICATIONS)},ariaExpanded:!0,tabIndex:"0",role:"button",ariaLabel:this._notificationTitle})}},{key:"_getNotificationCount",value:function(){var e=this,t=this.props,n=t.channelId,a=t.countAllNotifications,r=a?k.default.GET_ALL_NOTIFICATION_COUNT:k.default.GET_NOTIFICATION_COUNT,i=a?{}:{channelId:n};R.get(r,{},{failOnOffline:!0,params:i}).then((function(t){var n=t>99?"99+":t;e.setState({notificationCount:n},e.props.openOnLoad?e._onClick:null)})).catch((function(e){e&&"offline"===e.message||w.error("echo",{message:"Notification button: failed to get notification count. ".concat(JSON.stringify(e))})}))}},{key:"_onClick",value:function(e){var t=this,n=this.props.countAllNotifications;C.default.preload();var a={};a.isInboxOpen=!this.state.isInboxOpen;var r=this.props.channelId?this.props.channelId:e&&e.channelId;if(a.isInboxOpen&&this.state.notificationCount){a.notificationCount=0;var i=n?{}:{channelId:r};R.put(k.default.RESET_NOTIFICATION_COUNT,{},{},{params:i}).catch((function(e){w.error("echo",{message:"Notification button: failed to reset notification count. ".concat(JSON.stringify(e))})}))}this.setState(a,(function(){if(t.props.appApi.toggleInbox){var n=a.isInboxOpen?{getList:{url:k.default.GET_NOTIFICATION_SUMMARY},updateItem:{url:k.default.UPDATE_NOTIFICATION_STATE},getMessageProps:t._getMessageProps.bind(t),getPreviewComponent:t._getPreviewComponent.bind(t),onClose:t._onCloseInbox.bind(t),onClickOutsideIgnoreId:"notification|help",onSelectedFilterChanged:function(e){R.put(k.default.RESET_NOTIFICATION_COUNT,{},{},{params:{channelId:e}}).catch((function(e){w.error("echo",{message:"Notification button: failed to reset notification count. ".concat(JSON.stringify(e))})}))},getAvailableButtons:t._getAvailableButtons.bind(t),title:t._notificationTitle,includeFilters:!0,inboxType:S.INBOX_TYPE.NOTIFICATIONS,channelId:r,toolParams:O({},e)}:"";t.props.appApi.toggleInbox(n)}}))}},{key:"_onCloseInbox",value:function(){this.props.appApi.toggleInbox(),this._isUnMounted||this.setState({isInboxOpen:!1})}},{key:"_getMessageProps",value:function(e){if(!e)return{};var t,a,r,i,o,s,l,u,c=e.timestamp,d=e.id,f=e.type;switch(f){case S.NOTIFICATION_TYPE.USER_PERFORMANCE_ALERT:a=h.default.translate("notifications.alerts.performance.title"),r=e.header.nickname||h.default.translate("common.guest"),s=e.header.channelTitle,t=e.header.learnerId===m.default.getUser().id?s:h.default.translate("notifications.alerts.common.learner-in-channel",{nickname:r,channel:s}),u="success-low";break;case S.NOTIFICATION_TYPE.IMAGE_NOTIFICATION:a=h.default.translate(e.header.titleKey),t=h.default.translate(e.header.contentKey),u=e.header.icon;break;case S.NOTIFICATION_TYPE.DIFFICULT_CI_ALERT:a=h.default.translate("notifications.alerts.difficult-ci.title"),i=e.header.learnerWithDifficultiesCount,o=e.header.allLearnersCount,s=e.header.channelTitle,l=e.header.contentItemTitle,t=h.default.translate("notifications.alerts.difficult-ci.notification-content",{learnersCount:i,allLearnersCount:o,channel:s,contentItem:l}),u="difficult-ci";break;case S.NOTIFICATION_TYPE.ASSIGNMENTS_DUE_DATE_ALERT:a=h.default.translate("notifications.past-due-assignment.message-context.title"),i=e.header.totalNumberOfUsersNotDone,o=e.header.totalNumberOfUsersInAssignment,s=e.header.channelName,l=e.header.contentItemTitle,t=h.default.translate("alerts.past-due-assignment.notification-content",{learnersCount:i,allLearnersCount:o,channel:s}),u="assignment";break;case S.NOTIFICATION_TYPE.ENGAGEMENT_DROP_ALERT:a=h.default.translate("notifications.alerts.engagement-drop.title"),r=e.header.nickname||h.default.translate("common.guest"),s=e.header.channelTitle,t=e.header.userId===m.default.getUser().id?s:h.default.translate("notifications.alerts.common.learner-in-channel",{nickname:r,channel:s}),u="engagement-drop";break;case S.NOTIFICATION_TYPE.SUCCESS_RATE_DROP_ALERT:a=h.default.translate("alerts.success-rate-drop.title"),r=e.header.nickname||h.default.translate("common.guest"),s=e.header.channelTitle,t=h.default.translate("notifications.alerts.common.learner-in-channel",{nickname:r,channel:s}),u="success-drop";break;case S.NOTIFICATION_TYPE.ASSIGNMENT_NOTIFICATION:a=h.default.translate("notifications.assignment.inbox.title"),t=n._getChannelAndContentNames(e),u="assignment";break;case S.NOTIFICATION_TYPE.ASSIGNMENT_DUE_DATE_NOTIFICATION:a=h.default.translate("notifications.past-due-assignment.message-context.title"),t=n._getChannelAndContentNames(e),u="assignment";break;case S.NOTIFICATION_TYPE.NEW_CONTENT_NOTIFICATION:a=h.default.translate(e.header.contentType===v.default.CI_TYPE.OFF_PLATFORM_EVENT?"notifications.new-event.message-context.title":"notifications.new-content.message-context.title"),t=n._getChannelAndContentNames(e),u=e.header.contentType===v.default.CI_TYPE.OFF_PLATFORM_EVENT?"calendar-empty":"ci";break;case S.NOTIFICATION_TYPE.UPDATE_CONTENT_ON_CHANNEL:a=h.default.translate(e.header.contentType===v.default.CI_TYPE.OFF_PLATFORM_EVENT?"notifications.updated-event.message-context.title":"notifications.updated-content.message-context.title"),t=n._getChannelAndContentNames(e),u=e.header.contentType===v.default.CI_TYPE.OFF_PLATFORM_EVENT?"calendar-empty":"ci";break;case S.NOTIFICATION_TYPE.CHANNEL_STATUS_SET_TO_SCHEDULED_INSTRUCTOR:a=h.default.translate("notifications.channel.scheduled.instructor.inbox.title"),t=e.header.channelName,u="assignment";break;case S.NOTIFICATION_TYPE.CHANNEL_STATUS_SET_TO_STARTED_INSTRUCTOR:a=h.default.translate("notifications.channel.started.instructor.inbox.title"),t=e.header.channelName,u="assignment";break;case S.NOTIFICATION_TYPE.CHANNEL_STATUS_SOON_START_INSTRUCTOR:a=h.default.translate("notifications.channel.soon.start.instructor.inbox.title"),t=e.header.channelName,u="assignment";break;case S.NOTIFICATION_TYPE.CHANNEL_STATUS_SOON_END_INSTRUCTOR:a=h.default.translate("notifications.channel.soon.end.instructor.inbox.title"),t=e.header.channelName,u="assignment";break;case S.NOTIFICATION_TYPE.CHANNEL_STATUS_SET_TO_STARTED_LEARNER:a=h.default.translate("notifications.channel.started.learner.inbox.title"),t=e.header.channelName,u="assignment";break;case S.NOTIFICATION_TYPE.ITEM_SCHEDULED:a=h.default.translate("notifications.schedule-item.inbox.title"),t=n._getChannelAndContentNames(e),u="assignment";break;case S.NOTIFICATION_TYPE.ITEM_PURCHASE:a=h.default.translate("notifications.purchase-item.inbox.title"),t=e.header.catalogProductName,u="store";break;case S.NOTIFICATION_TYPE.CERTIFICATE_ABOUT_TO_EXPIRE:a=h.default.translate("notifications.certificate-about-to-expire.message-context.title"),t=e.header.certificateName,u="certificate";break;case S.NOTIFICATION_TYPE.CERTIFICATE_EXPIRED:a=h.default.translate("notifications.certificate_expired.message-context.title"),t=e.header.certificateName,u="certificate";break;case S.NOTIFICATION_TYPE.PATH_ITEM_UNLOCKED:a=h.default.translate("notifications.path-item-unlocked.message-context.title"),t=n._getChannelAndContentNames(e),u="ci";break;default:w.warn("echo",{message:"Notification button: unknown notification type ".concat(e.type)}),t="",a=""}return{type:f,id:d,timestamp:c,icon:u,title:a,body:t}}},{key:"_getPreviewComponent",value:function(e,t,n,a){return p.default.createElement(C.default,(0,i.default)({},e,{closeNotifications:a}))}},{key:"_getAvailableButtons",value:function(e){var t;if(this._shouldShowSendMessageButton(e)){var n={id:"sendMessage"};(e.type===S.NOTIFICATION_TYPE.ASSIGNMENT_NOTIFICATION||e.type===S.NOTIFICATION_TYPE.ASSIGNMENT_DUE_DATE_NOTIFICATION||e.type===S.NOTIFICATION_TYPE.NEW_CONTENT_NOTIFICATION||e.type===S.NOTIFICATION_TYPE.UPDATE_CONTENT_ON_CHANNEL||e.type===S.NOTIFICATION_TYPE.USER_PERFORMANCE_ALERT&&m.default.getUser().id===e.header.learnerId||e.type===S.NOTIFICATION_TYPE.ENGAGEMENT_DROP_ALERT&&m.default.getUser().id===e.header.userId||e.type===S.NOTIFICATION_TYPE.ITEM_SCHEDULED)&&(n.label=h.default.translate("inbox.button.contact-instructor")),t=[n]}return t}},{key:"_shouldShowSendMessageButton",value:function(e){var t=e.header;return-1===[S.NOTIFICATION_TYPE.IMAGE_NOTIFICATION,S.NOTIFICATION_TYPE.CERTIFICATE_ABOUT_TO_EXPIRE,S.NOTIFICATION_TYPE.CERTIFICATE_EXPIRED].indexOf(e.type)&&(this._isDemo()||t.userIds||t.userId||t.learnerId||t.creatorId||e.type===S.NOTIFICATION_TYPE.NEW_CONTENT_NOTIFICATION||e.type===S.NOTIFICATION_TYPE.UPDATE_CONTENT_ON_CHANNEL)}},{key:"_isDemo",value:function(){var e,t,n=m.default.getAppdata();return null==n||null===(e=n.appConf)||void 0===e||null===(t=e.featureFlags)||void 0===t?void 0:t.demo}}],[{key:"_getChannelAndContentNames",value:function(e){var t=e.header.channelName,n=e.header.contentItemTitle;return t+(n?" | ".concat(n):"")}},{key:"_translateHash",value:function(e){var t,n,a={};return["channelId","isInboxExpanded","selectedFolder","selectedId","showConversation"].forEach((function(r){var i="/".concat(r,"/([^/]+)");t=new RegExp(i),(n=t.exec(e))&&n[1]&&(a[r]=n[1])})),a}}]),n}(p.Component);M.defaultProps={className:"",channelId:"",appApi:{},activeTool:{id:null},countAllNotifications:!1};var L=M;t.default=L},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(41))),h=r(n(18)),m=r(n(490)),v=r(n(13)),g=r(n(158));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,u.default)(n,e);var t=E(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).onClick=a._onClick.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"render",value:function(){return v.default.isPC()?f.default.createElement(m.default,{onSearchItemClick:this.props.appApi.onSearchItemClick}):f.default.createElement(g.default,{isClickable:!0,id:"search",iconName:"search",onButtonClick:this.onClick,showAsOption:this.props.showAsOption,label:h.default.translate("SEARCH.NAME"),mixPanel:(0,i.default)({},p.default.PARAMS.TYPE,p.default.TOOLBAR_ELEMENTS.SEARCH)})}},{key:"_onClick",value:function(){this.props.appApi.toggleMobileSearch(!0)}}]),n}(f.Component);_.defaultProps={appApi:{},showAsOption:!1};var y=_;t.default=y},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"permissionType",{enumerable:!0,get:function(){return a.permissionType}});var a=n(2056)},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(3)),s=a(n(4)),l=a(n(28)),u=a(n(21)),c=n(1229),d=a(n(355));function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=l.default.Instance,m={ACTIVE:1,INACTIVE:2,ARCHIVED:3},v={NOT_STARTED:1,IN_PROGRESS:2,COMPLETED:3},g=function(){function e(){(0,o.default)(this,e)}var t;return(0,s.default)(e,null,[{key:"getCertificates",value:function(){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates")).then((function(e){return e.sort((function(e,t){return e.status!==t.status?m[e.status]-m[t.status]:e.name.localeCompare(t.name)}))}))}},{key:"getCertificateSampleImage",value:function(e,t,n,a,r){var i=new Date,o=String(i.getDate()).padStart(2,"0"),s=o+"/"+String(i.getMonth()+1).padStart(2,"0")+"/"+i.getFullYear(),l={};if(l.backgroundImageUrl=e,l.titles=t,l.accountName=t.accountName,l.awardedDate=s,l.certificateTitle=t.certificateTitle,l.certName=a,r){var u=new Date;u.setMonth(i.getMonth()+r);var c=o+"/"+String(u.getMonth()+1).padStart(2,"0")+"/"+u.getFullYear();l.expirationDate=c}return l.userNickname=t.personNameTitle,l.accountName=t.accountName,l.userId=n,h.post("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/sample"),{},l).then((function(e){return e.url}))}},{key:"createCertificate",value:function(e){return h.post("".concat(d.default.instance.backendUrl,"/LibraryService/certificates"),{},e,{params:{modelVersion:3}})}},{key:"updateCertificate",value:function(e,t){return h.put("".concat(d.default.instance.backendUrl,"/LibraryService/certificates"),{},e,{params:{revoke:t}})}},{key:"getCertificate",value:function(e){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/:certificateId"),{certificateId:e})}},{key:"updateCertificateStatus",value:function(e,t){return h.put("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/:certificateId/status/:status"),{certificateId:e,status:t})}},{key:"getCertificatesStates",value:function(){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/states")).then((function(e){return e.sort(c.CertificateComparator)}))}},{key:"getCertificateReport",value:function(e){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/:certificateId/report"),{certificateId:e})}},{key:"getCertificateUserReport",value:function(e){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/:certificateId/user/report"),{certificateId:e}).then((function(e){return!e.channels&&e.ciRequirements&&(e.ciRequirements=e.ciRequirements.sort((function(e,t){return e.progress!==t.progress?v[e.progress]-v[t.progress]:e.contentTitle.localeCompare(t.contentTitle)}))),e}))}},{key:"navigateToCertificate",value:function(e,t,n){var a=encodeURIComponent(n);e("certificate/".concat(t,"/").concat(a))}},{key:"navigateToCertificates",value:function(t,n){t(e.getCertificatesNavigation(n))}},{key:"getCertificatesNavigation",value:function(e){return"certificate/".concat(e||u.default.CERTIFICATION_ROUTING.ALL)}},{key:"getAllUnlinkedCourses",value:function(){return h.get("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/courses"))}},{key:"resetCertificate",value:function(e){return h.put("".concat(d.default.instance.backendUrl,"/LibraryService/certificates/:certificateId/renew"),{certificateId:e})}},{key:"getTemplateVariables",value:(t=(0,i.default)(r.default.mark((function e(){var t,n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("".concat(d.default.instance.backendUrl,"/PlayAppService/certificates/exposableProperties"));case 2:return t=e.sent,n=[],Object.keys(t).forEach((function(e){var a,r=f(t[e]);try{for(r.s();!(a=r.n()).done;){var i=a.value;"default"===e?n.push(i):n.push("".concat(e,".").concat(i))}}catch(o){r.e(o)}finally{r.f()}})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"getCertificateForChannelInstance",value:function(e){return h.get("".concat(d.default.instance.backendUrl,"/PlayAppService/certificates/channelInstances/:channelId"),{channelId:e})}}]),e}();t.default=g},function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DATE_PICKER_THEME=void 0;var r=a(n(2068));n(2080);var i=r.DATE_PICKER_THEME;t.DATE_PICKER_THEME=i;var o=r.default;t.default=o},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.selectDiscussionAction=t.setEditModeAction=t.expandCommentsAction=t.collapseCommentsAction=t.toggleAddCommentAction=t.postCommentAction=t.postDiscussionAction=t.setDiscussionsInfoAction=t.setDiscussionsAction=t.updatePageIndexAction=t.updateVisibilityFilterAction=t.setVisibilityFilterAction=t.setCurrentPageAction=t.setDiscussionsCount=t.toggleDiscussions=void 0;var r=a(n(9)),i=a(n(41)),o=a(n(57));t.toggleDiscussions=function(){return{type:"TOGGLE_DISCUSSIONS"}};t.setDiscussionsCount=function(e){return{type:"SET_DISCUSSIONS_COUNT",count:e}};t.setCurrentPageAction=function(e){return{type:"SET_CURRENT_PAGE_INDEX",currentPageIndex:e}};t.setVisibilityFilterAction=function(e,t){return{type:"SET_VISIBILITY_FILTER",filter:e,pageIdx:t}};t.updateVisibilityFilterAction=function(e){return i.default.sendEvent(i.default.TITLES.SELECT_DISCUSSION_TYPE,i.default.COMPONENTS.DISCUSSIONS_PANE,(0,r.default)({},i.default.PARAMS.TYPE,e)),{type:"UPDATE_VISIBILITY_FILTER",filter:e}};t.updatePageIndexAction=function(e){return{type:"UPDATE_PAGE_INDEX",pageIdx:e}};t.setDiscussionsAction=function(e,t){return{type:"SET_DISCUSSIONS",discussionsIds:e,discussionsMap:t}};t.setDiscussionsInfoAction=function(e,t,n){return{type:"SET_DISCUSSIONS_INFO",discussionId:e,commentsCounter:t,comments:n}};t.postDiscussionAction=function(e,t,n){return{types:["POST_DISCUSSION","POST_DISCUSSION_SUCCESS","POST_DISCUSSION_ERROR"],restParams:{method:"POST",url:o.default.ADD_NEW_DISCUSSION+"?allGroups="+(n||!1),messageData:e},scopeIndex:t}};t.postCommentAction=function(e){return{types:["POST_COMMENT","POST_COMMENT_SUCCESS","POST_COMMENT_ERROR"],restParams:{method:"POST",url:o.default.ADD_NEW_COMMENT,messageData:e}}};t.toggleAddCommentAction=function(e,t){return{type:"TOGGLE_NEW_COMMENT_BOX",discussionId:e,replyExpanded:t}};t.collapseCommentsAction=function(e){return{type:"COLLAPSE_COMMENTS",discussionId:e}};t.expandCommentsAction=function(e){return{types:["EXPAND_COMMENTS","EXPAND_COMMENTS_SUCCESS","EXPAND_COMMENTS_ERROR"],restParams:{method:"GET",url:o.default.GET_ALL_DISCUSSION_COMMENTS,params:{discussionId:e}},discussionId:e}};t.setEditModeAction=function(e){return{type:"UPDATE_EDIT_MODE",editMode:e}};t.selectDiscussionAction=function(e){return{type:"UPDATE_SELECTED_DISCUSSION",discussionId:e}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CertificateComparator=t.CertificateStateText=void 0;var r=a(n(2083)),i=a(n(2085)),o=r.default;t.CertificateStateText=o;var s=i.default;t.CertificateComparator=s;var l={CertificateStateText:o,CertificateComparator:s};t.default=l},,function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2061));t.default=r},,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),n(942)),p=r(n(2064)),h=r(n(1314));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).toggleMenu=a.toggleMenu.bind((0,s.default)(a)),a.state={isOpen:!1},a}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(){this.state.isOpen?document.addEventListener("click",this.toggleMenu):document.removeEventListener("click",this.toggleMenu)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.toggleMenu)}},{key:"render",value:function(){var e=this,t=this.props,n=t.ltr,a=t.alignEnd,r=t.buttonIcon;return d.default.createElement("div",{className:"library-popup-menu ".concat(this.state.isOpen?"popup-menu-open":""),onClick:function(t){e.toggleMenu(t)}},d.default.createElement("div",{className:"library-popup-menu-btn","data-automation-id":"li-popup-menu-btn".concat(this.props.automationInfo)},d.default.createElement("div",{className:"library-popup-menu-btn-background-placeholder"}),d.default.createElement("div",{className:"library-popup-menu-btn-icon"},r||d.default.createElement(h.default,null))),d.default.createElement("div",{className:"library-drop-menu-wrapper ".concat(n?"ltr":"rtl").concat(a?" align-end":"")},this.renderMenu()))}},{key:"renderMenu",value:function(){return this.state.isOpen?d.default.createElement(p.default,{ltr:this.props.ltr,alignEnd:this.props.alignEnd,list:this.props.listItems,classes:"popup-menu-drop-menu"}):null}},{key:"toggleMenu",value:function(e){var t=!this.state.isOpen;e.stopPropagation(),!t&&e.nativeEvent&&e.nativeEvent.stopImmediatePropagation(),this.props.onMenuToggle(t),this.setState({isOpen:t})}}]),n}(d.Component);v.defaultProps={onMenuToggle:function(){}};var g=(0,f.Hoc)((function(e){return{ltr:e.ltr}}))(v);t.default=g},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(18)),s=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"parseServerError",value:function(t){var n,a=e.errorCodeMap.get(null==t||null===(n=t.data)||void 0===n?void 0:n.code);return a||(a=e.errorsMap.get(null==t?void 0:t.status))?Promise.resolve(a.message):Promise.resolve(e.baseErrorMessage)}},{key:"baseErrorMessage",get:function(){return"Something went wrong, please try again"}},{key:"errorCodeMap",get:function(){return new Map([[2,{message:o.default.translate("library.item.settings.modal.external-id.error")}]])}},{key:"errorsMap",get:function(){return new Map([[401,{message:"Authentication error, please re-login and try again."}],[403,{message:"Unauthorized action, please re-login and try again."}],[404,{message:"Connection problem"}],[409,{message:"Something bad happened, please contact technical support."}],[500,{message:"Server Error, please try again"}]])}}]),e}();t.default=s},,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1682)).default;t.default=r},,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),n(942)),p=r(n(11)),h=r(n(202)),m=r(n(18));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={showDropDown:!1,selectedValue:a.props.initialValue,dropup:!1,showTooltip:!1},a.toggleShowDropDown=a.toggleShowDropDown.bind((0,s.default)(a)),a.onSelectionChange=a.onSelectionChange.bind((0,s.default)(a)),a.isDropUp=a.isDropUp.bind((0,s.default)(a)),a._showTooltip=a._showTooltip.bind((0,s.default)(a)),a._hideTooltip=a._hideTooltip.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(){this.state.showDropDown?document.addEventListener("click",this.toggleShowDropDown):document.removeEventListener("click",this.toggleShowDropDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.toggleShowDropDown)}},{key:"render",value:function(){var e=this,t=this.state.selectedValue,n=this.props.showTooltip&&!this.props.isDisabled;if(!t)return null;var a=this._getTooltip(),r=(0,p.default)("library-selector-wrapper",{"no-bottom-border-radius":this.state.showDropDown},{disabled:this.props.isDisabled}),i=(0,p.default)("library-selector-select-header",{ltr:t.direction&&"ltr"===t.direction},{rtl:t.direction&&"rtl"===t.direction});return d.default.createElement("div",{ref:function(t){e._selectorRef=t},className:r},d.default.createElement("div",{className:"library-selector-select",onClick:!this.props.isDisabled&&this.toggleShowDropDown,onMouseEnter:n?this._showTooltip:void 0,onMouseLeave:n?this._hideTooltip:void 0,"data-automation-id":"library-selector-select selected-language-".concat(t.key)},d.default.createElement("div",{className:i,"data-automation-id":"library-selector-select-header"},t.display),d.default.createElement("div",{className:"library-selector-down-triangle"})),d.default.createElement("div",{className:(0,p.default)("library-selector-dropdown",{show:this.state.showDropDown},{dropup:this.state.dropup}),"data-automation-id":"library-selector-dropdown",ref:function(t){e.selectorDropdown=t}},this.renderDropdownContent()),a)}},{key:"renderDropdownContent",value:function(){var e=this,t=this.props.values;return t&&t.length?t.filter((function(t){return t.key!==e.state.selectedValue.key})).map((function(t){var n=(0,p.default)("library-selector-dropdown-element",{ltr:t.direction&&"ltr"===t.direction},{rtl:t.direction&&"rtl"===t.direction});return d.default.createElement("div",{className:n,onClick:function(){return e.onSelectionChange(t)},"data-automation-id":"library-selector-dropdown-element-for-key-".concat(t.key),key:t.key},t.display)})):null}},{key:"toggleShowDropDown",value:function(){var e=this;this.setState({showDropDown:!this.state.showDropDown,showTooltip:!1},(function(){e.setState({dropup:e.isDropUp()})}))}},{key:"isDropUp",value:function(){var e=this.selectorDropdown.getBoundingClientRect().bottom,t=window.innerHeight;return e>0&&e>t}},{key:"onSelectionChange",value:function(e){var t=this;e&&e.key!==this.state.selectedValue.key&&this.setState({selectedValue:e,dropup:!1},(function(){t.props.handleSelectionChange(e)}))}},{key:"_getTooltip",value:function(){return this.state.showTooltip?d.default.createElement(h.default,{content:d.default.createElement("div",{className:"library-tooltip-advance"},m.default.translate("NEW_ITEM_TILE.NEW_ITEM_POPUP.UPLOAD_SECTION.CHOOSE_LANGUAGE_TOOLTIP")),parentOffsets:this._selectorRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"tooltip--toolbar"}):""}},{key:"_showTooltip",value:function(){this.setState({showTooltip:!0})}},{key:"_hideTooltip",value:function(){this.setState({showTooltip:!1})}}]),n}(d.Component);g.defaultProps={initialValue:"",values:[],showTooltip:!1,isDisabled:!1};var E=(0,f.Hoc)((function(){return{}}))(g);t.default=E},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=n(177),m=n(259);n(73);var v=r(n(18)),g=r(n(13)),E=r(n(60)),_=n(510),y=r(n(1729)),k=r(n(1994));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var T=function(e){(0,u.default)(n,e);var t=S(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e)).state={},a.isScrolled=!0,a.scrollEvents=!0,a.pageSize=15,a.pageIndex=-1,a.isFirstLoader=!0,a.handleScroll=a.handleScroll.bind((0,l.default)(a)),a.scrollComp=a.scrollComp.bind((0,l.default)(a)),a.scrollDirection=0;var r=g.default.getAppdata();return a.userDetails=r.userDetails,a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.loadNextMessages(this.props.conversation),window.addEventListener("scroll",this.handleScroll,!0)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.conversation.id!==e.conversation.id?(this.isScrolled=!0,this.pageIndex=-1,this.pageSize=15,this.loadNextMessages(e.conversation)):this.pageIndex=e.pageIndex}},{key:"UNSAFE_componentWillUpdate",value:function(){this.scrollEvents=!1,window.requestAnimationFrame&&window.requestAnimationFrame(this.scrollComp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll,!0),this.props.closeConversationDetails()}},{key:"render",value:function(){var e=this,t=this.isFirstLoader&&this.props.loadingMessages,n=this.props.messages,a=this.props.showPlaceholderMessage&&!t&&0===n.length&&this.getNewInstructorMessage(),r=this.props.pageIndex>0&&this.props.loadingMessages&&this.conversationPanel&&this.conversationPanel.scrollTop<100||!this.conversationPanel?f.default.createElement("div",{className:"inbox__loader",style:{position:"relative",left:0,right:0,top:10}},f.default.createElement(E.default,{size:E.default.Sizes.SMALL})):null,i=this.props.connected?f.default.createElement(k.default,{store:this.props.store,context:this.props.context}):null,o=n&&n.length?this.getConversations(n):null;return f.default.createElement("div",{className:"conversation-wrapper"},f.default.createElement("div",{className:"conversation-wrapper__bg"}),f.default.createElement("div",{className:"scrollable conversation-wrapper__messages",ref:function(t){e.conversationPanel=t}},a,r,o),i)}},{key:"getConversations",value:function(e){var t,a,r=this;return e.map((function(e){var o=e.sentBy.userId===r.userDetails.id,s=n._shouldShowContext(e,t);t=e.context;var l,u=new Date(e.timestamp),c=u.getDate()!==a;if(a=u.getDate(),e.body&&0===e.body.indexOf("link:")){var d,h=e.body.split("link: ")[1];try{d=JSON.parse(h)}catch(v){d=h}var m={"attach-picker__link-image":!0};m["attach-picker__link-bg-"+(d.id+1)]=!0,m=(0,p.default)(m),l=f.default.createElement("div",{key:e.id,style:{display:"flex",justifyContent:o?"flex-end":"flex-start"}},f.default.createElement("div",{className:"attach-picker__link-item"},f.default.createElement("div",{className:m}),f.default.createElement("div",{className:"attach-picker__link-text"},f.default.createElement("div",{className:"attach-picker__link-line1"},d.title||d),d.title?f.default.createElement("div",{className:"attach-picker__link-line2"},"Difficulty: ",d.difficulty):null,d.title?f.default.createElement("div",{className:"attach-picker__link-line2"},f.default.createElement("a",{href:d.url,target:"_blank",rel:"noopener noreferrer"},d.url)):null)))}else l=f.default.createElement(y.default,(0,i.default)({key:e.id},e,{showContext:s,showTimestamp:c,currentUser:o}));return l}))}},{key:"scrollComp",value:function(){this.scrollEvents=!0,this.isScrolled&&!this.props.loadingMessages&&this.conversationPanel&&(this.conversationPanel.scrollTop=this.conversationPanel&&this.conversationPanel.scrollHeight,this.conversationPanel.scrollTop>1&&(this.isScrolled=!0))}},{key:"loadNextMessages",value:function(e){this.isFirstLoader=!0,this.pageIndex!==this.props.totalPages&&this.props.loadMessages({pageSize:this.pageSize,pageIndex:this.pageIndex+1,conversationId:e.id},e)}},{key:"handleScroll",value:function(){if(this.conversationPanel){if(this.conversationPanel.scrollTop<this.lastScroll?this.scrollDirection=-1:this.conversationPanel.scrollTop>this.lastScroll?this.scrollDirection=1:this.scrollDirection=0,this.lastScroll=this.conversationPanel.scrollTop,this.props.loadingMessages||!this.scrollEvents)return;this.conversationPanel.scrollTop<100&&this.scrollDirection<0&&!this.props.loadingMessages&&(this.loadNextMessages(this.props.conversation),this.scrollDirection=0),this.isScrolled=this.conversationPanel.scrollTop+this.conversationPanel.clientHeight>=this.conversationPanel.scrollHeight}}},{key:"getNewInstructorMessage",value:function(){var e=g.default.getUser(),t=e.isGuest?e.nickname:e.firstName,n=this.props.conversation.title,a=v.default.translate("messaging.new-instructor-message",{learnerFirstName:t,instructorNickName:n});return f.default.createElement(y.default,{body:a,showContext:!1,isPlaceholder:!0})}}],[{key:"_shouldShowContext",value:function(e,t){return!(!e.context||-1!==n.DONT_SHOW_CONTEXT_TYPES.indexOf(e.context.type))&&(!t||t.name!==e.context.name||-1!==n.FORCE_SHOW_CONTEXT_TYPES.indexOf(e.context.type))}}]),n}(f.Component);T.FORCE_SHOW_CONTEXT_TYPES=["FLAG_QUESTION"],T.DONT_SHOW_CONTEXT_TYPES=["CHANNEL"],T.defaultProps={onClick:function(){}};var b=(0,m.connect)((function(e){return{loadingMessages:(e=e.messaging).loadingMessages,messages:e.messages,pageIndex:e.pageIndex,totalPages:e.totalPages,connected:!0}}),(function(e){return(0,h.bindActionCreators)({loadMessages:_.loadMessages,closeConversationDetails:_.closeConversationDetails},e)}))(T);t.default=b},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(1227)),i={isDifferentPresentEvents:function(e,t){return!((0,r.default)(e.task,t.task)&&(0,r.default)(e.taskGroup,t.taskGroup)&&(0,r.default)(e.title,t.title)&&(0,r.default)(e.clk,t.clk)&&(0,r.default)(e.ci,t.ci)&&(0,r.default)(e.channelId,t.channelId))},isDifferentPushEvents:function(e,t){return!((0,r.default)(e.task,t.task)&&(0,r.default)(e.taskGroup,t.taskGroup)&&(0,r.default)(e.title,t.title)&&(0,r.default)(e.ciId,t.ciId)&&(0,r.default)(e.presenter,t.presenter))}};t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2038)).default;t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.TabsDialogComponent=t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),n(118)),p=r(n(244)),h=r(n(126)),m=r(n(58)),v=r(n(2055));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var E=function(e){(0,l.default)(n,e);var t=g(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._setActiveTab=e._setActiveTab.bind((0,s.default)(e)),e._handleSave=e._handleSave.bind((0,s.default)(e)),e._handleCloseWithoutSave=e._handleCloseWithoutSave.bind((0,s.default)(e)),e.state={activeTabIndex:0},e}return(0,o.default)(n,[{key:"render",value:function(){return this.props.isEchoDialogStyle?this._renderEchoDialogStyle():this._renderOldStyle()}},{key:"_renderEchoDialogStyle",value:function(){var e=this.props,t=e.title,n=e.language,a=e.theme,r=e.onSave,i=e.styleClass,o=r?[{id:"cancel",text:n.cancel,type:m.default.BUTTON_TYPES.SECONDARY,onClick:this._handleCloseWithoutSave},{id:"done",text:n.ok,type:m.default.BUTTON_TYPES.PRIMARY,onClick:this._handleSave}]:[];return d.default.createElement(m.default,{styleClass:"tabs-dialog ".concat(i),theme:a,title:t,content:this._renderContent(),actions:o,close:this._handleCloseWithoutSave})}},{key:"_renderContent",value:function(){return[this._renderTabs(),this.props.additionalContent]}},{key:"_renderTabs",value:function(){var e=this.props.tabs,t=void 0===e?[]:e,n=this.state.activeTabIndex;return d.default.createElement("div",{className:"tabs-dialog-wrapper-content",key:"tabs-dialog-wrapper-content"},d.default.createElement("div",{className:"tabs"},this._getTabsTemplate(t),d.default.createElement("div",{className:"active-tab-indicator",style:{top:48*n}})),d.default.createElement("div",{className:"tab-context"},t[n].content))}},{key:"_renderOldStyle",value:function(){return d.default.createElement("div",{className:"tabs-dialog-wrapper"},d.default.createElement("div",{className:"tabs-dialog-wrapper-header"},d.default.createElement("span",{className:"title"},this.props.title),d.default.createElement("span",{className:"close-btn",onClick:this._handleCloseWithoutSave},d.default.createElement(v.default,null))),this._renderTabs(),this._renderFooter())}},{key:"_renderFooter",value:function(){var e=this.props,t=e.onSave,n=e.language;return t?d.default.createElement("div",{className:"tabs-dialog-wrapper-footer"},d.default.createElement("div",{className:"footer-btn cancel",onClick:this._handleCloseWithoutSave},n.cancel),d.default.createElement("div",{className:"footer-btn ok",onClick:this._handleSave},n.ok)):null}},{key:"_getTabsTemplate",value:function(e){var t=this,n=this.state.activeTabIndex;return e.map((function(e,a){var r="tab ".concat(n===a?"active":"");return r+=e.disabled?" disabled":"",d.default.createElement("div",{"data-automation-id":"tab-".concat(a),className:r,onClick:function(){t._setActiveTab(a)},key:a},d.default.createElement(h.default,{clamp:"1"},e.title))}))}},{key:"_setActiveTab",value:function(e){var t=this.props,n=t.tabs,a=t.onTabClick;e===this.state.activeTabIndex||n[e].disabled||(this.setState({activeTabIndex:e}),a&&a(e))}},{key:"_handleSave",value:function(){this.props.onSave&&this.props.onSave()}},{key:"_handleCloseWithoutSave",value:function(){this.props.onClose&&this.props.onClose()}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"number"==typeof e.activeTabIndex&&e.activeTabIndex!==t.activeTabIndex?{activeTabIndex:e.activeTabIndex}:null}}]),n}(d.Component);t.TabsDialogComponent=E,E.defaultProps={title:void 0,onSave:void 0,onClose:void 0,onTabClick:void 0,isEchoDialogStyle:!1,theme:m.default.THEMES.LIGHT,styleClass:"",activeTabIndex:void 0,additionalContent:void 0};var _=(0,f.ComponentHoc)((function(e){return{language:e.language.react.component.tabsDialog}}),{mapFnForProperty:{language:p.default}})(E);t.default=_},function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2062));n(2063);var i=r.default;t.default=i},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"Lib_item-I-Copy",transform:"translate(-223.000000, -23.000000)",fill:"#FFFFFF"},a.createElement("g",{id:"kebab-menu",transform:"translate(223.000000, 23.000000)"},a.createElement("g",{id:"Group-3"},[a.createElement("ellipse",{id:"Oval",cx:"3",cy:"2.98648649",rx:"3",ry:"2.98648649",key:0}),a.createElement("ellipse",{id:"Oval-Copy",cx:"3",cy:"13.1756757",rx:"3",ry:"2.98648649",key:1}),a.createElement("ellipse",{id:"Oval-Copy-2",cx:"3",cy:"23.0135135",rx:"3",ry:"2.98648649",key:2})]))))])}r.defaultProps={width:"6px",height:"26px",viewBox:"0 0 6 26",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(33)),s=r(n(34)),l=r(n(43)),u=a(n(0)),c=(r(n(2)),r(n(11))),d=r(n(58)),f=r(n(18)),p=r(n(21)),h=r(n(13)),m=r(n(605)),v=r(n(60)),g=r(n(36)),E=r(n(28)),_=r(n(2067)),y=r(n(334)),k=r(n(1189)),S=r(n(2082));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=E.default.Instance,I=function(e){var t=e.channelId,n=e.close,a=e.onSaved,r=e.channelType,i=e.channelProperties,E=e.isExportCertificates,T=(0,u.useState)(!1),I=(0,l.default)(T,2),O=I[0],A=I[1],N=(0,u.useState)(!1),w=(0,l.default)(N,2),R=w[0],P=w[1],M=(0,u.useState)(!1),L=(0,l.default)(M,2),D=L[0],x=L[1],F=(0,u.useState)(!1),U=(0,l.default)(F,2),G=U[0],B=U[1],j=(0,u.useState)(!1),H=(0,l.default)(j,2),V=H[0],W=H[1],z=(0,u.useState)(),Y=(0,l.default)(z,2),K=Y[0],Q=Y[1],X=(0,u.useRef)(),q=(0,u.useState)({users:[],groups:[],profiles:[]}),Z=(0,l.default)(q,2),J=Z[0],$=Z[1],ee=(0,u.useState)(!0),te=(0,l.default)(ee,2),ne=te[0],ae=te[1],re=null==i?void 0:i.isInstance,ie=function(e){return e.searchData.first_name&&e.searchData.last_name?"".concat(e.searchData.first_name," ").concat(e.searchData.last_name," (").concat(e.searchData.username,")"):e.searchData.username},oe=function(){var e=(0,s.default)(o.default.mark((function e(){var n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),e.next=3,y.default.getChannelEntities(t);case 3:n=e.sent,a={users:n.users.map((function(e){return{memberId:e.memberId,name:"".concat(e.nickname," (").concat(e.username,")")}})),groups:n.groups.map((function(e){return{memberId:e.memberId,name:e.groupName}})),profiles:n.profiles.map((function(e){return{memberId:e.memberId,name:e.profileName}}))},X.current=a,x(n.profilesExistInAccount),B(n.groupsExistInAccount),$(a),ae(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){oe()}),[]);var se=function(){var e=(0,s.default)(o.default.mark((function e(n){var a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,k.default.getProfiles(t,n);case 4:return a=e.sent,r=a.profiles.map((function(e){return{memberId:e.id,name:e.name}})),e.abrupt("return",{options:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=(0,s.default)(o.default.mark((function e(n){var a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.default.searchAccountUsersToInvite(n,t);case 4:return a=e.sent,r=a.map((function(e){return{memberId:e.id,name:ie(e)}})),e.abrupt("return",{options:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,s.default)(o.default.mark((function e(n){var a,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,y.default.getAccountUsersToInvite(n,t,!1);case 4:return a=e.sent,r=a.groups?a.groups.map((function(e){return{memberId:e.id,name:e.name}})):[],e.abrupt("return",{options:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){$(b(b({},J),{},{users:e})),A(!0)},de=function(){var e=(0,s.default)(o.default.mark((function e(t){var n,a,r,i,s,l,u,c,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userIds,a=t.profileIds,r=t.groupIds,i=h.default.getAppdata().backend_url,e.next=4,C.post("".concat(i,"/PlayAppService/export/certification-history"),{},b({userIds:n,profileIds:a,groupIds:r},K),{responseType:"blob"});case 4:s=e.sent,l=f.default.translate("certificates-management_export_modal_download-file-name"),u=new File([s],l),c=window.URL.createObjectURL(u),(d=document.createElement("a")).style="display: none",d.href=c,d.setAttribute("download","".concat(l,".xlsx")),document.body.appendChild(d),d.click(),window.URL.revokeObjectURL(c),ae(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,s.default)(o.default.mark((function e(){var r,i,s,l,u,c;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae(!0),r=J.users.filter((function(e){return!X.current.users.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),i=X.current.users.filter((function(e){return!J.users.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),s=J.groups.filter((function(e){return!X.current.groups.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),l=X.current.groups.filter((function(e){return!J.groups.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),u=J.profiles.filter((function(e){return!X.current.profiles.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),c=X.current.profiles.filter((function(e){return!J.profiles.find((function(t){return t.memberId===e.memberId}))})).map((function(e){return e.memberId})),!E){e.next=13;break}return e.next=10,de({userIds:r,profileIds:u,groupIds:s});case 10:n(),e.next=24;break;case 13:return e.prev=13,e.next=16,y.default.saveAssignEntities(t,r,i,s,l,u,c);case 16:n(),a(),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(13),P(!1),ae(!1);case 24:case"end":return e.stop()}}),e,null,[[13,20]])})));return function(){return e.apply(this,arguments)}}(),pe=null;if(V){var he=J.users.map((function(e){return e.memberId}));pe=u.default.createElement(S.default,{channelId:t,assignedUsersIds:he,close:function(){return W(!1)},onSaved:function(e){var t=J.users.concat(e);ce(t)}})}var me=null;R&&(me=u.default.createElement(d.default,{title:f.default.translate("CHANNEL_MANAGE_ENTITIES.ARE_YOU_SURE_TITLE"),actions:[{id:"cancel",text:f.default.translate("CHANNEL_MANAGE_PROFILE.MODAL.CANCEL"),type:d.default.BUTTON_TYPES.SECONDARY,onClick:function(){P(!1)}},{id:"yes",text:f.default.translate("CHANNEL_MANAGE_PROFILE.MODAL.YES"),type:d.default.BUTTON_TYPES.PRIMARY,onClick:fe}]},u.default.createElement("div",{className:"manage-areyousure-dialog"},u.default.createElement("div",{className:"manage-areyousure-dialog__text1"},f.default.translate(r===p.default.CHANNEL_TYPE.STREAM?"CHANNEL_MANAGE_ENTITIES.ARE_YOU_SURE_STREAM":"CHANNEL_MANAGE_ENTITIES.ARE_YOU_SURE_COURSE")),u.default.createElement("div",{className:"manage-areyousure-dialog__text2"},f.default.translate("CHANNEL_MANAGE_ENTITIES.ARE_YOU_SURE")))));var ve=function(e){Q(e)},ge=E?"certificates-management_export_modal_title":"CHANNEL_MANAGE_PROFILE.TITLE",Ee={id:"cancel",text:f.default.translate("CHANNEL_MANAGE_PROFILE.MODAL.CANCEL"),type:d.default.BUTTON_TYPES.SECONDARY,onClick:n},_e=[].concat(E?[Ee,{id:"continue",text:f.default.translate("CHANNEL_MANAGE_PROFILE.MODAL.DOWNLOAD"),type:d.default.BUTTON_TYPES.PRIMARY,disabled:ne,onClick:fe}]:[]).concat(E?[]:[Ee,{id:"continue",text:f.default.translate("CHANNEL_MANAGE_PROFILE.MODAL.SAVE"),type:d.default.BUTTON_TYPES.PRIMARY,disabled:!O,onClick:function(){return P(!0)}}]),ye=E?"CHANNEL_MANAGE_USER.USER_INCLUDE_TEXT_CERTIFICATE":"CHANNEL_MANAGE_USER.USER_INCLUDE_TEXT",ke=E?"CHANNEL_MANAGE_GROUP.GROUP_INCLUDE_TEXT_CERTIFICATE":"CHANNEL_MANAGE_GROUP.GROUP_INCLUDE_TEXT";return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.default,{title:f.default.translate(ge),actions:_e},ne&&u.default.createElement(v.default,null),u.default.createElement("div",{className:(0,c.default)("manage-entities-dialog",{"channel-instance":re})},!ne&&u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"manage-entities-dialog__section"},E&&u.default.createElement(_.default,{setDates:ve}),re?u.default.createElement(g.default,{styleClass:"manage-entities-dialog__add-specific-users-button",text:"+ ".concat(f.default.translate("modals.channel_manage_specific.button_text")),onClick:function(){return W(!0)}}):null,u.default.createElement("div",{className:"manage-entities-dialog__text"},f.default.translate(ye)),u.default.createElement(m.default.Async,{placeholder:f.default.translate("modals.INVITE_MANAGE_LEARNERS.ASSIGN_SELECT"),noResultsText:f.default.translate("modals.INVITE_MANAGE_LEARNERS.ASSIGN_HINT_NOT_FOUND_ERROR"),searchPromptText:f.default.translate("modals.INVITE_MANAGE_LEARNERS.ASSIGN_SEARCH_PROMPT"),multi:!0,value:J.users,loadOptions:le,valueKey:"memberId",labelKey:"name",onChange:ce,backspaceRemoves:!0,cache:!1,clearable:!1})),(G||D&&h.default.isFeatureEnabled("manageLearnersInstructorAssignsByProfiles"))&&u.default.createElement("div",{className:"manage-entities-dialog__section"},G&&u.default.createElement("div",{className:"manage-entities-dialog__text"},f.default.translate(ke)),u.default.createElement("div",{className:G&&D&&h.default.isFeatureEnabled("manageLearnersInstructorAssignsByProfiles")?"manage-entities-dialog__box":""},G&&u.default.createElement(m.default.Async,{placeholder:f.default.translate("CHANNEL_MANAGE_GROUP.SELECT.GROUP_INCLUDE_SELECT"),noResultsText:f.default.translate("CHANNEL_MANAGE_GROUP.SELECT.GROUP_INCLUDE_HINT_NOT_FOUND_ERROR"),searchPromptText:f.default.translate("CHANNEL_MANAGE_GROUP.SELECT.GROUP_INCLUDE_SEARCH_PROMPT"),multi:!0,value:J.groups,loadOptions:ue,valueKey:"memberId",labelKey:"name",onChange:function(e){$(b(b({},J),{},{groups:e})),A(!0)},backspaceRemoves:!0,cache:!1,clearable:!1}),D&&h.default.isFeatureEnabled("manageLearnersInstructorAssignsByProfiles")&&u.default.createElement("div",{className:"manage-entities-dialog__section manage-entities-dialog__section--space-top"},u.default.createElement("div",{className:"manage-entities-dialog__text"},f.default.translate("CHANNEL_MANAGE_PROFILE.PROFILE_INCLUDE_TEXT")),u.default.createElement(m.default.Async,{placeholder:f.default.translate("CHANNEL_MANAGE_PROFILE.SELECT.PROFILE_INCLUDE_SELECT"),noResultsText:f.default.translate("CHANNEL_MANAGE_PROFILE.SELECT.PROFILE_INCLUDE_HINT_NOT_FOUND_ERROR"),searchPromptText:f.default.translate("CHANNEL_MANAGE_PROFILE.SELECT.PROFILE_INCLUDE_SEARCH_PROMPT"),multi:!0,value:J.profiles,loadOptions:se,valueKey:"memberId",labelKey:"name",onChange:function(e){$(b(b({},J),{},{profiles:e})),A(!0)},backspaceRemoves:!0,cache:!1,clearable:!1}))))))),me,pe)};t.default=I},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:none;stroke:#fff;stroke-linecap:round;stroke-width:3px}\n        ")),a.createElement("g",{id:"Group_928",transform:"rotate(45 -86.413 -195.964)",key:1},[a.createElement("path",{id:"Line_31",d:"M0 0v20",className:"cls-1",transform:"translate(132.5 -128.5)",key:0}),a.createElement("g",{id:"Group_926",key:1},[a.createElement("path",{id:"Line_32",d:"M0 0l5 5",className:"cls-1",transform:"translate(132.5 -128.5)",key:0}),a.createElement("path",{id:"Line_33",d:"M5 0L0 5",className:"cls-1",transform:"translate(127.5 -128.5)",key:1})]),a.createElement("g",{id:"Group_927",transform:"rotate(180 132.5 -118.5)",key:2},[a.createElement("path",{id:"Line_32-2",d:"M0 0l5 5",className:"cls-1",transform:"translate(132.5 -128.5)",key:0}),a.createElement("path",{id:"Line_33-2",d:"M5 0L0 5",className:"cls-1",transform:"translate(127.5 -128.5)",key:1})])])])}r.defaultProps={width:"27.214",height:"27.213",viewBox:"0 0 27.214 27.213"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(13)),i={_getStoreKey:function(){return"".concat("newrow_active_tab","_").concat(r.default.getSite())},setUserActivity:function(){var e=Date.now(),t={tabId:r.default.getTabId(),timestamp:e};localStorage.setItem(i._getStoreKey(),JSON.stringify(t))},endActivity:function(){try{var e=localStorage.getItem(i._getStoreKey());e&&JSON.parse(e).tabId===r.default.getTabId()&&localStorage.removeItem(i._getStoreKey())}catch(t){localStorage.removeItem(i._getStoreKey())}},hasOtherActiveTab:function(){try{var e,t=localStorage.getItem(i._getStoreKey());return!!t&&((e=JSON.parse(t)).tabId!==r.default.getTabId()&&!(Date.now()-e.timestamp>7e3))}catch(n){return!1}}};document.addEventListener("beforeunload",i.endActivity);var o=i;t.default=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2110));n(2111);var i=r.default;t.default=i},,function(e,t,n){n(181),e.exports=n(1521)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1),r=a(n(33)),i=a(n(34)),o=a(n(0)),s=a(n(24)),l=n(259),u=a(n(13)),c=a(n(28)),d=a(n(60)),f=a(n(359));n(1664);var p=a(n(44)),h=a(n(1665)),m=a(n(248)),v=a(n(232)),g=a(n(384)),E=a(n(57)),_=c.default.Instance,y=(0,g.default)(_);if(console.log("%cT2K App v".concat("0.6908.0"),"color: #FFC107; font-size:15px; background: #444"),!u.default.checkAllowCookie()){var k={title:"Cookies are not allowed",subTitle:"Please allow cookies in the browser settings.",icon:"unavailable"};throw s.default.render(o.default.createElement(f.default,k),document.getElementById("root")),new Error("cookies are not allow")}v.default.setCordovaEvents(),v.default.startupBroadcast(u.default.getSite()),s.default.render(o.default.createElement("div",{className:"t2k-app",style:{position:"absolute",top:0,bottom:0,right:0,left:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},o.default.createElement(d.default,null)),document.getElementById("root"));var S=!1;function T(){return b.apply(this,arguments)}function b(){return(b=(0,i.default)(r.default.mark((function e(){var t,n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=S,!e.t0){e.next=4;break}return e.next=4,p.default.init();case 4:a=function e(){var a=u.default.getCurrentToken();a.isAnonymous||(t=1e3*(a.created_time+a.expires_in),a.refresh_token?(n=!0,t-=(new Date).getTime()+36e5):t+=3e4-(new Date).getTime(),t=Math.max(t,36e5),setTimeout((0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.get(E.default.PING);case 3:return t.prev=3,n&&e(),t.finish(3);case 6:case"end":return t.stop()}}),t,null,[[0,,3,6]])}))),t))},u.default.setAppDetails(u.default.getSite(),"echo"),u.default.getConfig().then((function(e){return u.default.setAppdata(e),E.default.setDomain()})).then((function(){return u.default.getToken()})).then((function(e){if(!e)return m.default.logout(!0,!1);a(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&u.default.getCurrentToken()})),window.t2k=window.t2k||{},s.default.render(o.default.createElement(l.Provider,{store:y},o.default.createElement(h.default,null)),document.getElementById("root"))})).catch((function(){m.default.logout(!0,!1)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}""!==location.hostname||"file:"!==location.protocol&&"cdvfile:"!==location.protocol?!S&&T():(S=!0,document.addEventListener("deviceready",T,!1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=r(n(23)),s=r(n(33)),l=r(n(9)),u=r(n(34)),c=r(n(3)),d=r(n(12)),f=r(n(4)),p=r(n(6)),h=r(n(8)),m=r(n(7)),v=r(n(962)),g=r(n(217)),E=r(n(106)),_=r(n(82)),y=r(n(105)),k=r(n(72)),S=r(n(946)),T=r(n(141)),b=a(n(0)),C=(r(n(2)),r(n(11))),I=r(n(363)),O=n(62),A=r(n(129)),N=r(n(21)),w=r(n(18)),R=r(n(1243)),P=r(n(53)),M=r(n(1085)),L=r(n(28)),D=r(n(13)),x=r(n(154)),F=r(n(41)),U=r(n(60)),G=r(n(945)),B=r(n(357)),j=r(n(615)),H=r(n(78)),V=r(n(1091)),W=r(n(604)),z=r(n(243)),Y=n(503),K=r(n(57)),Q=n(259),X=n(177),q=a(n(1720)),Z=n(384),J=n(964),$=n(510),ee=r(n(1995)),te=r(n(248)),ne=r(n(232)),ae=r(n(913)),re=r(n(1164)),ie=n(1165),oe=r(n(2e3)),se=r(n(2001)),le=r(n(2003)),ue=r(n(2035)),ce=r(n(2036)),de=r(n(2037)),fe=r(n(2039)),pe=r(n(2042)),he=r(n(2043)),me=a(n(2044)),ve=r(n(2045)),ge=r(n(2046)),Ee=r(n(2047)),_e=r(n(1180)),ye=r(n(2048)),ke=r(n(1181)),Se=r(n(2049)),Te=r(n(2117)),be=r(n(930)),Ce=r(n(2119)),Ie=r(n(2120)),Oe=r(n(44));function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var Re=M.default.Instance,Pe=P.default.LogManager,Me=L.default.Instance,Le=function(e){(0,p.default)(l,e);var t,n,a,r=we(l);function l(e){var t;return(0,c.default)(this,l),t=r.call(this,e),D.default.setAppdata(),t._onButtonClick=t._onButtonClick.bind((0,d.default)(t)),t._sessionExpired=t._sessionExpired.bind((0,d.default)(t)),t._connectionChanged=t._connectionChanged.bind((0,d.default)(t)),t._onInboxClose=t._onInboxClose.bind((0,d.default)(t)),t.handlePushMessage=t.handlePushMessage.bind((0,d.default)(t)),t.onSearchItemClick=t.onSearchItemClick.bind((0,d.default)(t)),t.logout=t._logout.bind((0,d.default)(t)),t._token=D.default.getCurrentToken(),t._customElementToolbarMap=new Map,t._ltiSessionId=D.default.getURLParam("lti_sessionId"),t._customHeaders={},t._ltiSessionId&&(D.default.setIsLtiSession(!0),Object.assign(t._customHeaders,{"t2k-lti_sessionid":t._ltiSessionId})),t._xapiSession=D.default.getURLParam("xapiSession"),t._xapiSession&&(D.default.setIsXapiSession(!0),Object.assign(t._customHeaders,{"t2k-xapisession":!0})),(0,y.default)(t._customHeaders)||Me.setCustomHeaders(t._customHeaders),t._stages={},t._toolbarsStack=[],t._onInboxCloseCallback=function(){},t.state={inited:!1,connectionStatus:{isOnline:!0,workOffline:!1,backToOnline:!1,justWentOffline:!1,isSessionExpired:!1},toolbar:{primary:[],secondary:[],auxiliary:[]},enableToolbar:!0,hideToolbar:!1,showHeader:!1,showMobileHeader:!1,showSmallHeader:!1,minimizeHeader:!1,ignoreScrollEvents:!1,toolbarClass:"",isLoaderOn:!0,inbox:{isClosed:!0},qna:!1,liveSession:{state:N.default.LIVE_SESSION_STATES.NONE,isConnectedToZoom:!1},activeHeaderTab:"library",registrationForm:{isOpened:!1},openMobileUserMenu:!1,openMobileSearch:!1,customComponents:[]},t._communicators={},t._currentAppId="",t._hasActiveStage=!1,t._appApi={logout:t._logout.bind((0,d.default)(t)),toggleInbox:t._toggleInbox.bind((0,d.default)(t)),toggleDiscussions:t._toggleDiscussions.bind((0,d.default)(t)),toggleLiveSession:t._toggleLiveSession.bind((0,d.default)(t)),getLiveSession:t._getLiveSession.bind((0,d.default)(t),void 0),setConfig:t._setConfig.bind((0,d.default)(t)),setStage:t._setStage.bind((0,d.default)(t)),serverPush:t._serverPush.bind((0,d.default)(t)),setLoader:t._setLoader.bind((0,d.default)(t),void 0),toggleLeaderboard:t._toggleLeaderboard.bind((0,d.default)(t)),toggleRegistrationForm:t._toggleRegistrationForm.bind((0,d.default)(t)),toggleMobileUserMenu:t._toggleMobileUserMenu.bind((0,d.default)(t)),toggleMobileSearch:t._toggleMobileSearch.bind((0,d.default)(t))},t._onTabChange=t._onTabChange.bind((0,d.default)(t)),t._handleScroll=(0,v.default)(t._handleScroll.bind((0,d.default)(t)),200,{leading:!0}),t._handleWheel=(0,v.default)(t._handleWheel.bind((0,d.default)(t)),200,{leading:!0}),t.closeMobileUserMenu=t._toggleMobileUserMenu.bind((0,d.default)(t),!1),t.onMobileUserSettingsRenderRegistration=t._onMobileUserSettingsRenderRegistration.bind((0,d.default)(t)),t}return(0,f.default)(l,null,[{key:"_getHeaderTabsList",value:function(){var e=[];return D.default.isAnonymous()?e.push(N.default.STAGES.STORE):D.default.getUser()&&D.default.getUser().isGuest?e.push(N.default.STAGES.LIBRARY):(e.push(N.default.STAGES.LIBRARY),D.default.isFeatureEnabled("catalog")&&e.push(N.default.STAGES.STORE)),e}},{key:"_loadExternalScripts",value:function(){return new Promise((function(e){var t=D.default.getAppdata().applications,n=[],a=function(e){if(e.js&&n.push(e.js),e.css){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e.css),document.head.appendChild(t)}},r=D.default.getAppdata().externalResources;Object.keys(r||{}).forEach((function(e){a(r[e])})),Object.keys(t||{}).forEach((function(e){(0,_.default)(t[e])?window.t2k[e]=ee.default:a(t[e])})),n.length?(0,I.default)(n,e):e()}))}},{key:"getActiveTabByHash",value:function(){for(var e=D.default.getHash().split("/"),t=0;["$","#"].indexOf(e[t])>-1;)t++;return e[t]}},{key:"sendMixPanelLoginEvent",value:function(){D.default.isAnonymous()||F.default.sendEvent(F.default.TITLES.USER_LOGIN,F.default.COMPONENTS.T2K_APP,{})}}]),(0,f.default)(l,[{key:"componentDidMount",value:(a=(0,u.default)(s.default.mark((function e(){var t,n,a,r,i,o,u=this;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.selectedItems=[],e.prev=1,window.addEventListener("scroll",this._handleScroll,!0),window.addEventListener("wheel",this._handleWheel,!0),window.addEventListener("beforeunload",l._unloadWindow,!0),Me.setSessionExpiredHandler(this._sessionExpired),Me.setOfflineHandler(this._connectionChanged),Me.setChangeUserHandler(l._userChanged),e.next=10,D.default.getConfig();case 10:return this._config=e.sent,e.next=13,K.default.setDomain();case 13:return e.next=15,this._validateXApiToken();case 15:return e.next=17,this._getAppData();case 17:if(r=e.sent,(0,E.default)(r,this._config),D.default.redirectToCustomDomain(r.siteDetails),D.default.setAnalyticsParamsToUrl(r),r.appConf.backendUrl=this._config.backend_url,r.appConf.accountLocale=r.appConf.locale,r.appConf.locale=(null==r||null===(t=r.userAppState)||void 0===t?void 0:t.locale)||(null==r||null===(n=r.appConf)||void 0===n?void 0:n.locale),i=null==r||null===(a=r.appConf)||void 0===a?void 0:a.locale,r.appConf.direction=D.default.getLocaleDirection(i),D.default.setAppdata(r),D.default.setWhiteLabelParams(r),D.default.setUser(r.userDetails),!D.default.isAnonymous()){e.next=32;break}return e.next=32,ne.default.unregisterServiceWorker();case 32:return r.appConf.paddingAnyUrlValue&&Me.setCustomParams({_xUserEmail:r.userDetails.email}),ne.default.initializeFirebase(),e.next=36,ne.default.initServiceWorker();case 36:return ne.default.setWebAppManifest(),ne.default.setThemeColor(),ne.default.sendMsgToServiceWorker("set-dev-env",{isDev:!1}),e.next=41,ne.default.sendMsgToServiceWorker("retry-requests");case 41:return ne.default.setServiceWorkerListener("check-if-online",Me.checkIfOnline),ne.default.setServiceWorkerListener("force-check-if-online",(function(){Me.checkIfOnline(!0)})),te.default.initLogger(D.default.getUser().id,r.appConf.loggerParams),document.body.classList.add(r.appConf.direction),document.documentElement.setAttribute("lang",i.split("_")[0]),!D.default.isAnonymous()||D.default.isFeatureEnabled("catalog")&&r.appConf.featureFlags.catalog.allowAnonymous||te.default.logout(!0),D.default.isAnonymous()||(this._pushManager=new le.default(N.default.PUSH_ENGINE.SOCKET),ne.default.sendMsgToServiceWorker("token",{token:Ne(Ne({},D.default.getCurrentToken()),{},{userId:D.default.getUser().id,site:D.default.getSite()})})),this._hideAppToolbar=(this._ltiSessionId||this._xapiSession)&&D.default.getAppdata().appConf.featureFlags.hideAppToolbar,e.next=51,w.default.set(this._config.dictionary,K.default.GET_DICTIONARY,{locale:i,appName:"t2kapp",site:D.default.getSite()},{ignoreXSS:!0},!0);case 51:return e.next=53,Me.recover();case 53:return e.next=55,l._getAllUserPermissions();case 55:return e.next=57,l._getAllChannelsWithRoles();case 57:return this._hasLearenrRole=H.default.hasSpecificRole(N.default.ROLES.LEARNER),e.next=60,l._getCertificatesToConfirm();case 60:return o=e.sent,e.next=63,this._deployDemoNotifications();case 63:return e.next=65,l._loadExternalScripts();case 65:return G.default.setCheckFileExistsURL(K.default.CHECK_FILE_EXISTS),e.next=68,new Promise((function(e){u.setState({inited:!0,certificatesToConfirm:o},(function(){var t=r.appConf.defaultApp;D.default.isAnonymous()&&(t=N.default.STAGES.STORE),x.default.set(D.default.getUser().id,r.applications,t,u._onUrlChange.bind(u)),D.default.isCordova()&&navigator.splashscreen&&navigator.splashscreen.hide(),D.default.isCordova()&&!D.default.isCordovaOffline()&&(Oe.default.writeFile("appData.json","",Ne(Ne({},r),{},{token:D.default.getCurrentToken()}),"object"),Oe.default.writeFile("f2f_config.json","",u._config,"object"),Oe.default.readFile("console_log.text",!0).then((function(e){Pe.warn({message:"Cordova offline log file: ".concat(e)}),Oe.default.listDirectory().then((function(e){e.find((function(e){return"console_log.text"===e.name})).remove()}))}))),e()}))}));case 68:e.next=74;break;case 70:e.prev=70,e.t0=e.catch(1),Pe.error({message:"Error on app init: ".concat(e.t0&&e.t0.message?e.t0.message:JSON.stringify(e.t0))}),401!==e.t0.status&&404!==e.t0.status||te.default.logout(!0);case 74:case"end":return e.stop()}}),e,this,[[1,70]])}))),function(){return a.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("scroll",this._handleScroll),window.removeEventListener("wheel",this._handleWheel),window.removeEventListener("beforeunload",l._unloadWindow),R.default.shutdown(),Object.keys(this._communicators).forEach((function(t){e._communicators[t].destroy()})),this._removeStageStyle()}},{key:"render",value:function(){var e=this,t=D.default.getAppdata(),n=!this.state.showHeader,a=!this._hideAppToolbar,r=!(this.state.toolbar.primary&&this.state.toolbar.primary.length||this.state.toolbar.auxiliary&&this.state.toolbar.auxiliary.length||this.state.toolbar.secondary&&this.state.toolbar.secondary.length),i=(0,C.default)("t2k-app",D.default.getPlatformClasses(),"".concat(this._currentAppId,"-stage-class"),{"big-header":!n},{"small-header":(this.state.showSmallHeader||this.state.minimizeHeader)&&!n},{"no-header":n},{"no-toolbar":!a||r},{"mobile-guest-banner":D.default.isMobile()&&this._shouldRenderGuestBanner()},{"full-screen-absolute-element":this.props.helpOpen});if(!t)return b.default.createElement("div",{className:i,style:{position:"absolute",top:0,bottom:0,right:0,left:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},b.default.createElement(U.default,null));var o=t.accountDetails.isTrial,s=(0,C.default)("stage",{"stage--trial":o}),u=this._renderTaskPresentationContainer(t),c=this.state.isLoaderOn?b.default.createElement(U.default,null):null,d=this._renderDiscussions(),f=this._renderInbox(),p=this._renderHelp(),h=this._renderLiveSessionElement(),m=this._renderLeaderboard(),v=this._renderConnectionStatus(),g=this._renderRegistrationForm(),E=this._renderGuestBanner(),_=this._renderMobileUserSettings(),y=this._renderMobileSearch(),k=this._renderPromptMobileAppBanner(),S=!t.userDetails.firstName&&this._renderUserNameDialog(),T=!S&&this._renderUserAcceptTermsDialog(),I=!S&&!T&&this._renderNewsDialog(),O=!S&&!T&&!I&&this._renderConfirmCertificatesDialog(),A=l._getHeaderTabsList(),w=b.default.createElement(Se.default,{minimizeHeader:this.state.minimizeHeader,activeHeaderTab:this.state.activeHeaderTab,showHeader:this.state.showHeader,showMobileHeader:this.state.showMobileHeader,tabs:A,appApi:this._appApi,enable:this.state.enableToolbar,onTabChange:this._onTabChange,smallHeader:this.state.showSmallHeader,showToolbar:a,toolbarClass:this.state.toolbarClass,shouldJustify:!0,toolbar:this.state.toolbar,onButtonClick:this._onButtonClick,activeTool:this.state.activeTool,onSearchItemClick:this.onSearchItemClick}),R=this.state.customComponents.map((function(e){return e.component})),P=this.state.liveSession.state===N.default.LIVE_SESSION_STATES.ACTIVE?{display:"none"}:{};return b.default.createElement("div",{id:"t2k-app",className:i,ref:function(t){e.appElement=t}},u,c,w,R,b.default.createElement("main",{id:"stage",className:s,style:P}),d,f,p,h,m,v,g,E,_,y,k,T,I,S,O,b.default.createElement("div",{id:"app-overlay"}))}},{key:"onSearchItemClick",value:function(e){var t=this,n=B.default.onSearchItemClick(e),a=n.appId,r=n.hash,i=n.queryParams,o=function(){t._setStage("channel",{id:a,hash:r,queryParams:i})};this.state.openMobileSearch?this._toggleMobileSearch(!1,o):o()}},{key:"_renderTaskPresentationContainer",value:function(e){return!D.default.isAnonymous()&&e.appConf&&e.appConf.featureFlags.gamified?b.default.createElement(se.default,{customHeaders:this._customHeaders,appApi:this._appApi}):""}},{key:"_renderDiscussions",value:function(){var e=this.state.discussions;return e?b.default.createElement(re.default,(0,o.default)({appApi:this._appApi},e)):null}},{key:"_renderInbox",value:function(){var e=this.state.inbox.isClosed?this.props.inbox:this.state.inbox;return e&&!e.isClosed||this.props.compose?b.default.createElement(ae.default,(0,o.default)({},e,{appApi:this._appApi,store:Z.store})):null}},{key:"_renderHelp",value:function(){var e;return this.props.helpOpen?e=b.default.createElement("div",{className:"t2k-app__help-wrapper"},b.default.createElement(ie.LearningCenter,{appApi:this._appApi,store:Z.store})):this.props.firstVideoOpen&&(e=b.default.createElement("div",{className:"t2k-app__help-wrapper t2k-app__help-wrapper--full"},b.default.createElement(ie.FirstVideo,{appApi:this._appApi,store:Z.store}))),e}},{key:"_renderLiveSessionElement",value:function(){var e=this.state.liveSession;return e.sessionType!==N.default.LIVE_SESSION_TYPES.NEWROW?null:e.state===N.default.LIVE_SESSION_STATES.ACTIVE||e.state===N.default.LIVE_SESSION_STATES.BACKGROUND?b.default.createElement(_e.default,(0,o.default)({},e,{appApi:this._appApi})):null}},{key:"_renderLeaderboard",value:function(){var e=this.state.leaderboard;return e?b.default.createElement(ke.default,(0,o.default)({},e,{appApi:this._appApi})):null}},{key:"_renderMobileUserSettings",value:function(){return this.state.openMobileUserMenu?b.default.createElement(Ce.default,{handleClose:this.closeMobileUserMenu,handleLogout:this.logout,openRegistrationForm:this.onMobileUserSettingsRenderRegistration}):null}},{key:"_onMobileUserSettingsRenderRegistration",value:function(e){this.closeMobileUserMenu(),this._toggleRegistrationForm(!0,Ne({showMask:!0},e))}},{key:"_renderMobileSearch",value:function(){var e=this;return this.state.openMobileSearch?b.default.createElement(Ie.default,{onSearchItemClick:this.onSearchItemClick,closeMobileSearch:function(){e._toggleMobileSearch(!1)}}):null}},{key:"_renderConnectionStatus",value:function(){var e,t=this.state.connectionStatus,n=t.isSessionExpired,a=t.isOnline,r=t.workOffline,i=t.backToOnline,o=t.justWentOffline;return n?e=b.default.createElement(ce.default,{isSSO:!(!this._ltiSessionId&&!this._xapiSession)}):a||r?(!a&&r||i||o)&&(e=b.default.createElement(ye.default,{backToOnline:i,justWentOffline:o})):e=b.default.createElement(ue.default,null),e}},{key:"_renderRegistrationForm",value:function(){var e=this;return this.state.registrationForm.isOpened?[b.default.createElement("div",{className:"registration-form",key:"registration-form"},b.default.createElement(be.default,{className:"sign-up-form",signUp:!0,showLoginFirst:this.state.registrationForm.showLoginFirst,loginErrorCode:this.state.registrationForm.loginErrorCode})),this.state.registrationForm.showMask&&b.default.createElement("div",{className:"all-screen-mask",key:"registration-form-mask",onClick:function(){e._toggleRegistrationForm(!1)}})]:null}},{key:"_toggleRegistrationForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state.registrationForm.isOpened!==e&&(e||"function"==typeof this.state.registrationForm.onClose&&this.state.registrationForm.onClose(),this.setState({registrationForm:Ne(Ne({},t),{},{isOpened:e})}))}},{key:"_shouldRenderGuestBanner",value:function(){var e,t=D.default.getAppdata();return(null==t||null===(e=t.accountDetails)||void 0===e?void 0:e.isSelfService)&&D.default.isGuest()&&!this.state.guestBannerClosed}},{key:"_renderGuestBanner",value:function(){var e=this;return this.state.isLoaderOn&&!D.default.isMobile()?null:this._shouldRenderGuestBanner()&&b.default.createElement(Te.default,{openRegistrationForm:function(){e._toggleRegistrationForm(!0,{showMask:!0})},hideBanner:function(){e.setState({guestBannerClosed:!0})}})}},{key:"_renderPromptMobileAppBanner",value:function(){var e=this,t=D.default.isFeatureEnabled("promptMobileApp"),n=D.default.isMobile()&&!D.default.isCordova()&&!D.default.isStandalone()&&!D.default.getAppdata().appConf.webappManifestUrl;return t&&n&&!this.state.promptMobileAppBannerClosed?b.default.createElement(z.default,{hideBanner:function(){return e.setState({promptMobileAppBannerClosed:!0})}}):null}},{key:"_renderUserAcceptTermsDialog",value:function(){var e=this;return this.state.isLoaderOn||!D.default.isFeatureEnabled("userAcceptTermsLogin")||this.state.termsOfUseAccepted||D.default.getTermsOfUseAccepted()?null:this._hasLearenrRole?b.default.createElement(de.default,{logout:this.logout,hideDialog:function(){return e.setState({termsOfUseAccepted:!0})}}):(this.setState({termsOfUseAccepted:!0}),null)}},{key:"_renderNewsDialog",value:function(){var e=this;return this.state.isLoaderOn||this._ltiSessionId||!D.default.isFeatureEnabled("newsPopup")||this.state.newsPopupClosed||D.default.getNewsPopupDontShowAgain("hide-dashboard")?null:b.default.createElement(fe.default,{hideDialog:function(){return e.setState({newsPopupClosed:!0})}})}},{key:"_renderConfirmCertificatesDialog",value:function(){var e=this;return!this.state.certificatesToConfirm||this.state.isLoaderOn||this.state.confirmCertificatesDialogClosed?null:b.default.createElement(he.default,{certificates:this.state.certificatesToConfirm,hideDialog:function(){return e.setState({confirmCertificatesDialogClosed:!0})}})}},{key:"_renderUserNameDialog",value:function(){var e=this;return this.state.isLoaderOn||this._ltiSessionId||this.state.usernamePopupClosed?null:b.default.createElement(pe.default,{hideDialog:function(){return e.setState({usernamePopupClosed:!0})}})}},{key:"_onTabChange",value:function(e,t){this._openStage(e,t,{initUrl:!0})}},{key:"_initOnIdleTime",value:function(){var e=this;setTimeout((function(){var t,n=D.default.getAppdata();if(F.default.init(n),l.sendMixPanelLoginEvent(),e.subscribeToMessagesChannel(),n.appConf.featureFlags&&oe.default.load(n.appConf.featureFlags.googleTagManager),null===(t=n.appConf)||void 0===t?void 0:t.customerGoogleAnalytics){var a,r=null===(a=n.appConf)||void 0===a?void 0:a.customerGoogleAnalytics;q.inject(r),q.init(r)}if(te.default.shouldLoadWalkme(n.appConf)&&ve.default.load({environment:n.appConf.environment,walkmeId:n.appConf.walkme.id,walkmeVariables:te.default.getWalkmeVariables(n)}),D.default.isFeatureEnabled("userWayAccessibility")&&D.default.isPC()&&(0,Ee.default)(),D.default.isFeatureEnabled("intercom")&&!D.default.isMobile()&&D.default.userHasPossibleRole(N.default.ROLES.INSTRUCTOR)&&R.default.init(n.appConf.featureFlags.intercom?n.appConf.featureFlags.intercom.appId:"vhp6c7he",{user_id:n.userDetails.id,email:n.userDetails.email}),!D.default.isAnonymous()&&!n.userAppState.firstTimeLogin){var i=D.default.getAppdata().appConf.featureFlags.onboarding;(i=i&&D.default.isEditor())&&e.props.toggleFirstVideo&&e.props.toggleFirstVideo()}D.default.isCordova()&&D.default.isAndroid()&&(document.addEventListener("backbutton",(function(){if(e.state.toolbar&&e.state.toolbar.cordova){var t=e.state.toolbar,n=t.primary,a=t.secondary,r=t.auxiliary,i=t.cordova,o=(0,g.default)(n,{config:{id:i.backId}})||(0,g.default)(a,{config:{id:i.backId}})||(0,g.default)(r,{config:{id:i.backId}});o&&o.config&&o.config.onButtonClick?o.config.onButtonClick({id:i.backId}):e._onButtonClick({id:i.backId})}}),!1),window.cordova&&window.cordova.plugins&&window.cordova.plugins.ZoomControl&&(window.cordova.plugins.ZoomControl.ZoomControl("true"),window.cordova.plugins.ZoomControl.setBuiltInZoomControls("true"),window.cordova.plugins.ZoomControl.setDisplayZoomControls("false")),window.universalLinks&&window.universalLinks.subscribe(null,(function(e){var t=e.hash;window.location.hash=t}))),D.default.isAnonymous()||(te.default.idleLogout(),ne.default.subscribeNotifications()),G.default.updateDBP(),!D.default.isCordovaOffline()&&(0,ge.default)()}))}},{key:"_sessionExpired",value:function(e){D.default.isAnonymous()||e&&(e.includes(K.default.POST_CHANGE_MY_PASSWORD)||e.includes(K.default.POST_LOGIN_GUEST))||this.setState({connectionStatus:Ne(Ne({},this.state.connectionStatus),{},{isSessionExpired:!0})})}},{key:"_connectionChanged",value:function(e,t){var n=!1,a=!1;if(!this.state.connectionStatus.isOnline&&e&&(n=!0),this.state.connectionStatus.isOnline&&!e&&(a=!0),e){ne.default.sendMsgToServiceWorker("online-back"),ne.default.sendMsgToServiceWorker("retry-requests");var r=D.default.getAppdata().appConf.defaultApp;D.default.isAnonymous()&&(r=N.default.STAGES.STORE),x.default.setDefaultStage(r)}D.default.isOnline(e),this.setState({connectionStatus:Ne(Ne({},this.state.connectionStatus),{},{isOnline:e,workOffline:t,backToOnline:n,justWentOffline:a})})}},{key:"_validateXApiToken",value:function(){var e=this;return new Promise((function(t,n){if(!e._xapiSession||D.default.getURLParam("access_token"))t();else{var a=D.default.getURLParam("login_token");Me.post(K.default.POST_VALIDATE_LOGIN,void 0,void 0,{params:{login_token:a}}).then((function(){t()})).catch((function(e){n(e)}))}}))}},{key:"_deployDemoNotifications",value:function(){return new Promise((function(e){var t=D.default.getAppdata();D.default.isInstructor()&&t.appConf.featureFlags.notifications&&t.appConf.featureFlags.demo?Me.post(K.default.DEPLOY_DEMO_ALERTS).then((function(){e()})).catch((function(t){Pe.warn({message:"Failed to deploy demo alerts: ".concat(JSON.stringify(t))}),e()})):e()}))}},{key:"_stageInstance",value:function(e){var t=this;return new Promise((function(n){return t._loadStageTimer&&(clearTimeout(t._loadStageTimer),t._loadStageTimer=void 0),t._stages[e]?n():window.t2k[e]?(window.t2k[e]=window.t2k[e].default||window.t2k[e],t._initStage(e),n()):(0,me.default)(e).then((function(a){window.t2k[e]||(window.t2k[e]=a.default||a,t._initStage(e)),n()}))}))}},{key:"_importRestStages",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(t>me.Stages.length-1)){var n=me.Stages[t];if(n.shouldLoad())if(this._stages[n.id])this._importRestStages(t+1);else{var a=function a(){e._loadStageTimer=setTimeout((function(){e._loadStageTimer=void 0,e._stages[n.id]._isInited?e._importRestStages(t+1):a()}),Y.DELAY_BETWEEN_INIT)};this._stageInstance(n.id).then(a)}else this._importRestStages(t+1)}}},{key:"_initStage",value:function(e){var t=this;this._communicators[e]=new A.default(e,window,window,{renderCustomComponent:this._renderCustomComponent,getCustomComponent:this._getCustomComponent,removeCustomComponent:this._removeCustomComponent,setConfig:this._setConfig,setStage:this._setStage,updateElement:this._updateElement,setNav:this._setNav,close:this._closeStage,toggleToolbar:this._toggleToolbar,setLoader:this._setLoader,serverPush:this._serverPush,toggleChat:this._toggleChat,getLiveSession:this._getLiveSession,toggleSignUp:function(e,n){t._toggleRegistrationForm(n.isOpen,Ne(Ne({},n),{},{showMask:!0}))}},this);try{this._stages[e]=new window.t2k[e](e,{user:D.default.getUser(),appData:D.default.getAppdata(),token:this._token,ltiSessionId:this._ltiSessionId,xapiSession:this._xapiSession})}catch(n){Pe.error({message:"".concat(e," init failed: ").concat(n&&n.message?n.message:JSON.stringify(n))})}}},{key:"_serverPush",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=t.type;switch(a){case N.default.SERVER_PUSH_TYPES.SUBSCRIBE:n(this._pushManager.subscribe(t.channel,t.callback));break;case N.default.SERVER_PUSH_TYPES.UNSUBSCRIBE:this._pushManager.unsubscribe(t.id),n();break;case N.default.SERVER_PUSH_TYPES.SEND:this._pushManager.send(t.channel,t.data),n()}}},{key:"_toggleChat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.props.toggleCompose(t),n()}},{key:"_onUrlChange",value:function(e,t){var n=this;if(D.default.isAnonymous()&&t!==N.default.STAGES.STORE&&(t=N.default.STAGES.STORE,e={}),this._openOnProcess)this._nextStageToOpen={stageUrl:e,currentAppId:t};else{if(this.props.helpOpen&&this.props.toggleHelp(),this.state.inbox&&!this.state.inbox.isClosed){var a=x.default.getActiveTool();a&&a.id===N.default.TOOLS_ID.NOTIFICATIONS||this._onInboxClose()}this.props.inbox&&!this.props.inbox.isClosed&&this.props.toggleMessages(),this._nextStageToOpen=null,this._openOnProcess=!0,this._hasActiveStage?this._terminateStage((function(){n._openStage(e,t)})):this._openStage(e,t)}}},{key:"_openStage",value:function(e,t,n){var a=this;this._currentAppId=t,this._currentStageUrl=e,this._hasActiveStage=!0,this._stageInstance(t).then((function(){a._communicators[t].send("open",Ne(Ne({},e),{},{targetId:"stage",options:n}),(function(){a.setState({isLoaderOn:!1,activeHeaderTab:l.getActiveTabByHash(),showSmallHeader:D.default.isFeatureEnabled(N.default.MINIMIZED_HEADER_FLAG)},(function(){a._openOnProcess=!1,a._nextStageToOpen?a._onUrlChange(a._nextStageToOpen.stageUrl,a._nextStageToOpen.currentAppId):(a._importRestStages(),Re.trigger(Y.POLLER_EVENTS.NEW_NOTIFICATIONS),a._initedOnIdle||(a._initOnIdleTime(),a._initedOnIdle=!0))}))}))}))}},{key:"_getAppData",value:function(){var e;if(D.default.isAnonymous())return Me.get(K.default.GET_INIT_DATA,{},{params:D.default.getInitConfigParams()},!0).then((function(e){return Ne(Ne({},e),{},{userDetails:{id:"anonymous"},accountDetails:e.appConf.accountDetails,siteDetails:e.appConf.siteDetails})}));var t=(null===(e=D.default.getCurrentToken())||void 0===e?void 0:e.username)||Date.now();return Me.get(K.default.GET_APP_DATA,{},{params:{site:D.default.getSite(),username:t}})}},{key:"_closeStage",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.setState({isLoaderOn:!0},(function(){n._terminateStage((function(){n._openOnProcess=!1,x.default.prevStage()})),a()}))}},{key:"_setNav",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._currentStageUrl.queryParams=t.queryParams,this._currentStageUrl.hash=t.hash,x.default.setNav(t.id,t.queryParams,t.hash,t.options),n()}},{key:"_setConfig",value:function(e,t){var n,a,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t.toolbar||(t.toolbar={});var o={hideToolbar:!!t.toolbar.hideToolbar,showHeader:!!t.toolbar.showHeader,toolbarClass:t.toolbar?t.toolbar.toolbarClass:"",showMobileHeader:!!t.toolbar.showMobileHeader,hideTrialIndicator:!!t.toolbar.hideTrialIndicator};o.minimizeHeader=null!==(n=t.toolbar.minimizeHeader)&&void 0!==n&&n,o.ignoreScrollEvents=null!==(a=t.toolbar.ignoreScrollEvents)&&void 0!==a&&a,t.toolbar.id=t.toolbar.id||"default";var s=(0,S.default)(this._toolbarsStack,{toolbar:{id:t.toolbar.id}});if(-1!==s)return this._toolbarsStack[s]=(0,T.default)(t),i();if(t.toolbar.setStore)this.state.toolbar.id!==t.toolbar.id&&this._toolbarsStack.push((0,T.default)({toolbar:this.state.toolbar,styleTag:this._currentStyleTag})),delete t.toolbar.setStore;else if(t.toolbar.fromStore)return t=this._toolbarsStack.pop(),this._setConfig(e,t,i);var l=(0,T.default)(t.toolbar);if(this._customElementToolbarMap=new Map,Object.keys(l).forEach((function(e){l[e]&&l[e].keepExisting&&(l[e]=r.state.toolbar[e]),(0,k.default)(l[e])&&l[e].forEach((function(t){t.type===N.default.TOOLBAR_ELEMENT_TYPE.CUSTOM&&r._customElementToolbarMap.set(t.config.id,e)}))})),o.toolbar=l,o.enableToolbar=!0,t.styleTag){if(this._currentStyleTag!==t.styleTag){this._removeStageStyle(),this._currentStyleTag=t.styleTag;var u=document.createElement("style");u.type="text/css",u.id="stage-css",u.styleSheet?u.styleSheet.cssText=t.styleTag:u.appendChild(document.createTextNode(t.styleTag)),document.head.appendChild(u)}}else this._removeStageStyle(),this._currentStyleTag=void 0;this.setState(o,i)}},{key:"_updateElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this._customElementToolbarMap.get(t.id);if(a){var r=Ne({},this.state.toolbar);r[a]=r[a].map((function(e){return e.config.id===t.id&&(e.config=Ne(Ne({},e.config),t.config)),e})),this.setState({toolbar:r},n)}else Pe.warn({message:"Unknown element to update: ".concat(JSON.stringify(t))}),n()}},{key:"_renderCustomComponent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=t.id||(0,O.v4)(),r=this.state.customComponents,o=r.find((function(e){return e.id===a}));t.component=(0,b.cloneElement)(t.component,{key:"t2k-custom-component".concat(t.id)}),o?(o.component=t.component,o.type=t.type):r.push(Ne(Ne({},t),{},{id:a})),this.setState({customComponents:(0,i.default)(r)},(function(){n(a)}))}},{key:"_removeCustomComponent",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.state.customComponents;-1!==(n=t.id?r.findIndex((function(e){return e.id===t.id})):r.findIndex((function(e){return e.type===t.type})))?(r.splice(n,1),this.setState({customComponents:(0,i.default)(r)},(function(){a()}))):a()}},{key:"_getCustomComponent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.state.customComponents;n(t.id?a.find((function(e){return e.id===t.id})):a.find((function(e){return e.type===t.type})))}},{key:"_setStage",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t&&t.id?this.setState({isLoaderOn:!0},(function(){n._terminateStage((function(){x.default.setStage(t.id,t.queryParams,t.hash)}))})):Pe.error({message:"stage id not provided."}),a()}},{key:"_toggleToolbar",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.setState({enableToolbar:t},n)}},{key:"_terminateStage",value:function(e){var t=this;this._communicators[this._currentAppId].send("terminate",{},(function(){t._hasActiveStage=!1,t._removeStageStyle(),e()}))}},{key:"_logout",value:function(){this._terminateStage((function(){te.default.logout()}))}},{key:"_onButtonClick",value:function(e){this._communicators[this._currentAppId].send("buttonClicked",e)}},{key:"_setLoader",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.setState({isLoaderOn:t},n)}},{key:"_toggleInbox",value:function(e){var t=x.default.getActiveTool().id;e?(e.onClose&&(this._onInboxCloseCallback=e.onClose),e.onClose=this._onInboxClose,e.isClosed=!1,t!==N.default.TOOLS_ID.NOTIFICATIONS&&l.setToolNav(N.default.TOOLS_ID.NOTIFICATIONS)):(e={isClosed:!0},t&&l.setToolNav(null)),this.setState({inbox:e})}},{key:"_onInboxClose",value:function(){var e=this;this.setState({inbox:{isClosed:!0}},(function(){e._onInboxCloseCallback(),e._onInboxCloseCallback=function(){}}))}},{key:"_toggleDiscussions",value:function(e){this.setState({discussions:e})}},{key:"_toggleLiveSession",value:function(e){this.setState({liveSession:e},(function(){var t=x.default.getActiveTool().id;e.state===N.default.LIVE_SESSION_STATES.ACTIVE&&t!==N.default.TOOLS_ID.LIVE_SESSION?l.setToolNav(N.default.TOOLS_ID.LIVE_SESSION):e.state!==N.default.LIVE_SESSION_STATES.ACTIVE&&t===N.default.TOOLS_ID.LIVE_SESSION&&l.setToolNav(null)}))}},{key:"_getLiveSession",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return n(this.state.liveSession),this.state.liveSession}},{key:"_toggleLeaderboard",value:function(e){var t=x.default.getActiveTool().id;this.setState({leaderboard:e}),e&&t!==N.default.TOOLS_ID.LEADERBOARD?l.setToolNav(N.default.TOOLS_ID.LEADERBOARD):e||l.setToolNav(null)}},{key:"_toggleMobileUserMenu",value:function(e){this.setState({openMobileUserMenu:e})}},{key:"_toggleMobileSearch",value:function(e,t){this.setState({openMobileSearch:e},t?t():null)}},{key:"_removeStageStyle",value:function(){var e=document.getElementById("stage-css");e&&e.parentNode.removeChild(e)}},{key:"subscribeToMessagesChannel",value:function(){D.default.isAnonymous()||this._serverPush(void 0,{type:N.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:"messaging/user/".concat(D.default.getUser().id),callback:this.handlePushMessage})}},{key:"handlePushMessage",value:function(e){e&&e.conversation&&this.props.newMessageReceived(e.conversation)}},{key:"_handleScroll",value:function(e){if(this.state.showHeader&&this.appElement.scrollHeight>this.appElement.clientHeight&&!this.state.ignoreScrollEvents){var t=D.default.isAndroid()?this.appElement.scrollTop:window.pageYOffset;t>0&&!this.state.minimizeHeader?(this.setState({minimizeHeader:!0}),e.preventDefault()):this.state.minimizeHeader&&0===t&&(this.setState({minimizeHeader:!1}),e.preventDefault())}}},{key:"_handleWheel",value:function(e){document.scrollingElement.scrollHeight===document.scrollingElement.clientHeight&&this.state.minimizeHeader&&e.deltaY<0&&!this.state.ignoreScrollEvents&&(this.setState({minimizeHeader:!1}),e.preventDefault())}}],[{key:"getDerivedStateFromProps",value:function(e){var t=x.default.getActiveTool().id;return e.inbox&&e.inbox.inboxType===Y.INBOX_TYPE.MESSAGING&&!e.inbox.isClosed&&t!==N.default.TOOLS_ID.MESSAGING?l.setToolNav(N.default.TOOLS_ID.MESSAGING):e.inbox&&e.inbox.isClosed&&t&&t===N.default.TOOLS_ID.MESSAGING&&(e.inbox.closeOnClickOutside||e.inbox.closeOnToggle)&&(l.setToolNav(null),e.inbox.closeOnClickOutside=!1,e.inbox.closeOnToggle=!1),null}},{key:"_userChanged",value:function(){te.default.logout(!1,!1,!0)}},{key:"_getCertificatesToConfirm",value:function(){return new Promise((function(e){D.default.isFeatureEnabled("certificates")&&D.default.getAppdata().appConf.featureFlags.certificates.confirmPopup?Me.get(K.default.GET_CERTIFICATES_STATES).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.filter((function(e){return"CERTIFIED"===e.state&&!e.confirmationDate}));e(n.length?n:void 0)})).catch((function(t){Pe.warn({message:"Failed to get learner certificates states: ".concat(JSON.stringify(t))}),e()})):e()}))}},{key:"_getAllUserPermissions",value:(n=(0,u.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.default.isAnonymous()){e.next=4;break}return e.next=3,j.default.getAllPermissions();case 3:H.default.setOfPermissions=e.sent;case 4:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"_getAllChannelsWithRoles",value:(t=(0,u.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D.default.isAnonymous()){e.next=4;break}return e.next=3,V.default.getAllChannelsWithRoles();case 3:W.default.allChannelsWithRoles=e.sent;case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"setToolNav",value:function(e,t){x.default.setToolNav(e,t)}},{key:"_unloadWindow",value:function(){F.default.sendEvent(F.default.TITLES.SESSION_END)}}]),l}(b.Component);Le.defaultProps={inbox:null,compose:null,helpOpen:!1,firstVideoOpen:!1};var De=(0,Q.connect)((function(e){return{compose:e.messaging.compose,inbox:e.messaging.inbox,helpOpen:e.help.helpOpen,firstVideoOpen:e.help.firstVideoOpen}}),(function(e){return(0,X.bindActionCreators)({toggleCompose:$.toggleCompose,toggleFirstVideo:J.toggleFirstVideo,selectCategory:J.selectCategory,toggleHelp:J.toggleHelp,toggleMessages:$.toggleMessages,newMessageReceived:$.newMessageReceived},e)}))(Le);t.default=De},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(){return!!window.Intercom}var u=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"init",value:function(t,n){if(!window.Intercom){e.APP_ID=t;var a=e.APP_ID;window.intercomSettings={app_id:a},function(){var e=window,t=e.Intercom;if("function"==typeof t)t("reattach_activator"),t("update",intercomSettings);else{var n=document,r=function e(){e.c(arguments)};r.q=[],r.c=function(e){r.q.push(e)},e.Intercom=r;var i=n.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://widget.intercom.io/widget/"+a;var o=n.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)}}(),e.boot(n)}}},{key:"boot",value:function(t){e.APP_ID&&window.Intercom("boot",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({app_id:e.APP_ID},t))}},{key:"update",value:function(e){l()&&window.Intercom("update",e)}},{key:"show",value:function(){l()&&window.Intercom("show")}},{key:"hide",value:function(){l()&&window.Intercom("hide")}},{key:"hideLauncher",value:function(){l()&&(window.intercomSettings={hide_default_launcher:!0},window.Intercom("update"))}},{key:"showLauncher",value:function(){l()&&(window.intercomSettings={hide_default_launcher:!1},window.Intercom("update"))}},{key:"event",value:function(e,t){l()&&window.Intercom("trackEvent",e,t)}},{key:"shutdown",value:function(){l()&&window.Intercom("shutdown")}}]),e}();t.default=u},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Poller=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(514)),s=function(){function e(){(0,r.default)(this,e),this._eventToCallbacks=new Map}return(0,i.default)(e,[{key:"register",value:function(e,t){var n=this;e.forEach((function(e){var a=n._eventToCallbacks.get(e)||[];a.push(t),n._eventToCallbacks.set(e,a)}))}},{key:"deregister",value:function(e,t){var n=this,a=function(e){return e===t};e.forEach((function(e){var t=n._eventToCallbacks.get(e)||[];(0,o.default)(t,a)}))}},{key:"trigger",value:function(e,t){(this._eventToCallbacks.get(e)||[]).forEach((function(n){n(e,t)}))}}]),e}();t.Poller=s;var l=new s;t.default=l},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(9)),s=a(n(1688)),l=a(n(105)),u=a(n(61)),c=a(n(1692));n(1303);var d=a(n(44)),f=a(n(53)),p=a(n(57)),h=n(39),m=a(n(14)),v=a(n(32)),g=a(n(548)),E=a(n(1695)),_=a(n(1696)),y=a(n(1716)),k=a(n(1717));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var I=f.default.LogManager,O={_dbName:"Downloader",_dbPromise:void 0,_isSupport:void 0,_aborted:!1,_downloadPromise:void 0,_assetsToken:"",init:function(){O._assetsToken="";var e=m.default.getCurrentToken().assets_token;return Object.keys(e).forEach((function(t){O._assetsToken=O._assetsToken.concat("".concat(t.substring(11),"=").concat(e[t],"&"))})),Promise.resolve()},setCheckFileExistsURL:function(e){O._checkFileExistsURL=e},download:function(e,t,n,a){var r,i,o,s,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};if(!O.isSupport())return Promise.reject();O.restsResponses=[],l(1);var u=1;return O._aborted=!1,window.plugins.insomnia.keepAwake(),O.init().then((function(){return s=setInterval((function(){O._aborted?clearInterval(s):(u=Math.min(99,Math.max(1,u+1)),l(u))}),850),O._getItemPrefetchList(e,t,n,a)})).then((function(e){var t,n;o=e.ciImage,r=(null!==(t=e.files)&&void 0!==t?t:[]).map((function(e){return-1===e.path.indexOf("https:")&&(e.path="https:".concat(e.path)),e})),i=null!==(n=e.rests)&&void 0!==n?n:[]})).then((function(){var e=r.map((function(e){var t=e.path.indexOf("/resources/")+1,n=e.path.slice(t);return v.default.get("".concat(p.default.S3_ASSET_METADATA,"?fileKey=").concat(n))}));return Promise.all(e).then((function(e){var t,n=0,a=b(e);try{for(a.s();!(t=a.n()).done;){n+=t.value.metadata["Content-Length"]}}catch(r){a.e(r)}finally{a.f()}return Promise.resolve(n)}))})).then((function(e){var t=i.map((function(e){return v.default.head(e.url,null==e?void 0:e.params,null==e?void 0:e.config)})),n=e+35e6;return Promise.all(t).then((function(e){var t,a=b(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;(null==r?void 0:r.headers["content-length"])&&(n+=(0,c.default)(r.headers["content-length"]))}}catch(i){a.e(i)}finally{a.f()}return Promise.resolve(n)}))})).then((function(e){return new Promise((function(t,n){window.cordova.exec((function(a){return(0,c.default)(a)>2.5*Math.round(1.05*e)?(clearInterval(s),l(99),t()):(clearInterval(s),n({status:"quota"}))}),(function(){return clearInterval(s),n()}),"File","getFreeDiskSpace",[])}))})).then((function(){return O._executeRests({rests:i,progressCB:l,itemId:t})})).then((function(){return O._aborted?Promise.reject({status:"aborted"}):d.default.createDirectory(t).then((function(r){return d.default.writeFile("config.json",r,T({userId:m.default.getUser().id,channelId:e,itemId:t,version:n,rests:O.restsResponses,hash:m.default.getHash(),site:m.default.getSite(),ciImage:o},a),"object")}))})).then((function(){return O._downloadFiles({files:r,progressCB:l,itemId:t})})).then((function(){var e="".concat(window.cordova.file.dataDirectory).concat(t,"/player/iframes/");return O._downloadFiles({files:[{path:"".concat(window.location.origin,"/players/iframes/bundle.zip"),fileName:"bundle.zip",type:"iframes"}],progressCB:l,itemId:t,saveLocation:e})})).then((function(){var e="".concat(window.cordova.file.dataDirectory).concat(t,"/player/"),n="";return n=window.location.pathname.includes("/branch/")?"".concat(window.location.origin,"/branch/mobile-offline/bundle.zip"):"".concat(window.location.origin,"/bundle.zip"),O._downloadFiles({files:[{path:n,fileName:"bundle.zip",type:"player"}],progressCB:l,itemId:t,saveLocation:e})})).then((function(){if(O._aborted)return Promise.reject({status:"aborted"});var e=d.default.copyToLocation("cordova.js",window.cordova.file.applicationDirectory+"www/",window.cordova.file.dataDirectory+t+"/player"),n=d.default.copyToLocation("cordova_plugins.js",window.cordova.file.applicationDirectory+"www/",window.cordova.file.dataDirectory+t+"/player"),a=d.default.copyToLocation("",window.cordova.file.applicationDirectory+"www/plugins/",window.cordova.file.dataDirectory+t+"/player");return Promise.all([e,n,a])})).then((function(){return O.restsResponses=[],l(100),window.plugins.insomnia.allowSleepAgain(),Promise.resolve()})).catch((function(e){return O.restsResponses=[],O._assetsToken="",window.plugins.insomnia.allowSleepAgain(),O._downloadPromise&&(O._downloadPromise.cancel(),O._downloadPromise=void 0),d.default.listDirectory(window.cordova.file.dataDirectory).then((function(e){e.find((function(e){return e.name===t})).removeRecursively(),console.log("folder ".concat(t," deleted"))})),I.warn({message:"Offline download failed - ".concat(e&&JSON.stringify(e))}),"Cancelled"===(null==e?void 0:e.message)?Promise.reject({status:"aborted"}):Promise.reject(e)}))},abort:function(){O._downloadPromise&&O._downloadPromise.cancel(),O._aborted=!0},delete:function(e,t,n){var a,r,i,o,s,l=m.default.getUser().id,u=[];return O.init().then((function(u){return a=u.transaction(["items_v2","files_v2"],"readwrite"),r=a.objectStore("files_v2"),o=a.objectStore("items_v2"),i=r.index("pathItemIdAndVesion"),s=o.index("itemIdAndVesion"),i.getAll([l,e,t,n])})).then((function(a){if(a&&a.length)for(var i=0;i<a.length;++i){var o=a[i];r.delete([o.path,l,e,t,n]),u.push(o.path)}return s.get([l,e,t,n])})).then((function(e){return e&&o.delete([e.userId,e.channelId,e.itemId,e.version,e.expiredIn]),O._deleteFilesFromCache(u)})).then((function(){return a.complete})).catch((function(e){if(a)try{a.abort()}catch(t){}return Promise.reject(e)}))},isSupport:function(){var e,t,n,a,r,i;return(0,u.default)(O._isSupport)?(O._isSupport=m.default.isCordova()&&(null===(e=window.cordova)||void 0===e?void 0:e.file)&&(null===(t=window.cordova)||void 0===t||null===(n=t.plugins)||void 0===n?void 0:n.CorHttpd)&&(null===(a=window.cordova)||void 0===a||null===(r=a.plugin)||void 0===r?void 0:r.http)&&window.BackgroundTransfer&&window.plugins.insomnia&&(null===(i=window)||void 0===i?void 0:i.zip)&&m.default.isFeatureEnabled("itemDownloader"),O._isSupport):O._isSupport},isItemDownloaded:function(e,t,n){var a,r=m.default.getUser().id,i=Date.now();return O.init().then((function(i){return a=i.transaction(["items_v2"],"readwrite"),(0,u.default)(n)?a.objectStore("items_v2").index("itemId").get([r,e,t]):a.objectStore("items_v2").index("itemIdAndVesion").get([r,e,t,n])})).then((function(a){return!!(a&&a.expiredIn>i)||(n=(0,u.default)(n)?a&&a.version:n,!(0,u.default)(n)&&O.delete(e,t,n).then((function(){return!1})))})).catch((function(){return!1}))},getAllDownloadedItems:function(){var e,t,n,a=(null===(e=m.default.getUser())||void 0===e?void 0:e.id)||localStorage.getItem("userId");return O.init().then((function(e){return(t=e.transaction(["items_v2"],"readwrite")).objectStore("items_v2").index("userId").getAll(a)})).then((function(e){return n=e,t.complete})).then((function(){return n}))},getDownloadedItem:function(e){var t=e.userId,n=e.path,a=e.channelId,r=e.itemId,i=e.version;return O.init().then((function(e){return e.transaction("items_v2","readonly").objectStore("items_v2").index("itemIdAndVesion").get([t,a,r,i]).then((function(e){var t;return Promise.resolve(null==e||null===(t=e.rests)||void 0===t?void 0:t.find((function(e){var t;return(null==e||null===(t=e.path)||void 0===t?void 0:t.replace(/(^\w+:|^)/,""))===n.replace(/(^\w+:|^)/,"")})))}))}))},_downloadFiles:function(e){return(0,i.default)(r.default.mark((function t(){var n,a,i,o,s,u,c,f,p,h,m,g,E,_,y,k,S;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.files,i=e.progressCB,o=e.index,s=void 0===o?0:o,u=e.itemId,c=e.saveLocation,!O._aborted){t.next=3;break}return t.abrupt("return",Promise.reject({status:"aborted"}));case 3:if(!(s>=a.length)){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:if(f=a[s],++s,!f.path.endsWith(".mp4")||!O._checkFileExistsURL){t.next=21;break}return h="".concat(f.path.substring(0,f.length-4),"_cmp_.mp4"),t.prev=9,t.next=12,v.default.get(O._checkFileExistsURL,{},{params:{filename:h.substring(6)}});case 12:p=t.sent,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),p=!1;case 18:return t.prev=18,p&&(f=h),t.finish(18);case 21:g="".concat(f.path,"?offline=true"),t.t1=null===(n=f)||void 0===n?void 0:n.type,t.next="ppt"===t.t1?25:"iframes"===t.t1||"player"===t.t1?32:34;break;case 25:return E=f.path.split("/"),_=E[E.indexOf("PPT")+1],y=E.indexOf("PPT")+3,k=E.slice(y,E.length-1).join("/"),m="".concat(u,"/resources/ppt/").concat(_,"/").concat(k),g="".concat(g,"&").concat(O._assetsToken),t.abrupt("break",37);case 32:return m="".concat(u,"/resources"),t.abrupt("break",37);case 34:return g=encodeURI("".concat(g,"&").concat(O._assetsToken)),m="".concat(u,"/resources"),t.abrupt("break",37);case 37:return S=d.default.createDirectory(m).then((function(e){return d.default.writeFile(f.fileName,e,{},"object").then((function(e){var t=(new window.BackgroundTransfer.BackgroundDownloader).createDownload(g,e);return O._downloadPromise=t.startAsync().then((function(){if(f.fileName.endsWith(".zip")){var t=function(e){var t=Math.min(99,Math.max(1,Math.floor(e.loaded/e.total*100)));i(t)};return new Promise((function(n,a){window.zip.unzip(e.toURL(),c,(function(t){0===t?(e.remove(),n()):a()}),t)}))}return null}),(function(e){I.warn({message:"Offline download with background plugin failed or cancelled - ".concat(e&&JSON.stringify(e))}),(0,l.default)(e)?Promise.reject({status:"aborted"}):Promise.reject()}),(function(e){var t=Math.min(99,Math.max(1,Math.floor(e.bytesReceived/e.totalBytesToReceive*100)));i(t)})),O._downloadPromise}))})),t.next=40,S;case 40:return O._downloadPromise=void 0,t.abrupt("return",O._downloadFiles({files:a,progressCB:i,index:s,itemId:u}));case 42:case"end":return t.stop()}}),t,null,[[9,15,18,21]])})))()},_replaceParams:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e;if(Object.keys(n).forEach((function(e){t=new RegExp(":"+e,"g"),a=a.replace(t,n[e])})),-1!==a.indexOf("/:"))throw new Error("There are unresolved params in your request url: "+a);return a},restsResponses:[],_executeRests:function(e){var t=e.rests,n=e.progressCB,a=e.itemId,r=e.index,i=void 0===r?0:r;if(O._aborted)return Promise.reject({status:"aborted"});if(i>=t.length)return Promise.resolve();var o=t[i];return++i,v.default.get(o.url,o.params,o.config).then((function(e){var r=O._replaceParams(o.url,o.params);if("interaction"===(null==o?void 0:o.type)){var s,l=null==o||null===(s=o.params)||void 0===s?void 0:s.id;d.default.createDirectory(a+"/interactions").then((function(t){d.default.writeFile("".concat(l,".json"),t,T({},e),"object")}))}else O.restsResponses.push({path:r,data:e,offlineUrl:"//"+r.substring(r.indexOf(".com")+4)});var u=Math.min(99,Math.max(1,Math.floor(i/t.length*100)));return n(u),O._executeRests({rests:t,progressCB:n,index:i,itemId:a})}))},_deleteFilesFromCache:function(e){if(!e||!e.length)return Promise.resolve();var t,n,a=0;return O.init().then((function(r){return t=r.transaction(["files_v2"],"readwrite"),(n=t.objectStore("files_v2").index("path")).get(e[a])})).then((function r(i){return i&&(0,s.default)(e,i.path),++a<e.length?n.get(e[a]).then(r):t.complete}))},_getItemPrefetchList:function(e,t,n,a){return a.playerType===h.CI_TYPE.WORK_SHEET?(0,g.default)(e,t,n,a):a.playerType===h.CI_TYPE.ASSESSMENT?(0,E.default)(e,t,n,a):a.playerType===h.CI_TYPE.LESSON?(0,_.default)(e,t,n,a):a.playerType===h.CI_TYPE.FUSE?(0,y.default)(e,t,n,a):a.playerType===h.CI_TYPE.UCONTENT?(0,k.default)(e,t,n,a):Promise.reject({status:"not_supported"})},updateDBP:function(){if(O.isSupport()&&m.default.isOnline()){var e=m.default.getAppdata().appConf,t=e.interactions,n=e.dbp,a=localStorage.getItem("standaloneInteractionsURL"),r=localStorage.getItem("dbpURL");if(!a||!r||a!==t.js||r!==n.uri){var i=document.createElement("iframe");i.setAttribute("id","dbp_download_iframe"),i.setAttribute("style","display: none;"),document.body.append(i);var o={player_url:m.default.getAssetPath(n.uri),target_id:"dbp_download_iframe"},s={interactions:T(T({},t),{},{token:m.default.getCurrentToken(),config:{appData:m.default.getAppdata()}})},l=new window.dbp.book_player(o,s,{table_of_contents:[]},{},(function(){l.terminate((function(){})),localStorage.setItem("dbpURL",n.uri),localStorage.setItem("standaloneInteractionsURL",t.js),document.getElementById("dbp_download_iframe").remove()}))}}}},A=O;t.default=A},,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i=a(n(14)),o=a(n(548)),s=a(n(382)),l=function(e,t,n){var a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=i.default.getAppdata(),c=u.backend_url;return r.default.get("".concat(c,"/PlayAppService/assessments/:itemId/version/:version/play"),{itemId:t,version:n}).then((function(n){return a=n,s.default.getCoverImage(c,e,t)})).then((function(t){var n={files:t?[t]:[],rests:[]},r=[];a.structure.order.forEach((function(e){var t=a.structure.components[e];"TASK_GROUP"===t.type&&r.push(t)}));var i=0;return function t(){if(i>=r.length)return n;var a=r[i];return++i,(0,o.default)(e,a.id,a.version).then((function(e){return n.files=n.files.concat(e.files),n.rests=n.rests.concat(e.rests),t()}))}()})).then((function(a){return a.rests=a.rests.concat([{url:"".concat(c,"/LibraryService/v2/channels/:channelId"),params:{channelId:e}},{url:"".concat(c,"/PlayAppService/assessments/:itemId/version/:version/play"),params:{itemId:t,version:n}},{url:"".concat(c,"/PlayAppService/userContext"),config:{params:{channelId:e}}}]).concat(l.clk?[{url:"".concat(c,"/PlayAppService/play"),config:{params:{clk:l.clk,channelId:e}}}]:[]),a}))};t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(43)),o=a(n(48)),s=a(n(148)),l=a(n(1697)),u=a(n(1698)),c=a(n(32)),d=a(n(14)),f=a(n(548)),p=a(n(382));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var m=function(e,t,n,a){var m,v=d.default.getAppdata(),g=v.backend_url,E=[];return c.default.get("".concat(g,"/PlayAppService/lessons/:itemId/version/:version/play"),{itemId:t,version:n}).then((function(n){return m=n,p.default.getCoverImage(g,e,t)})).then((function(e){var t={files:e?[e]:[],rests:[]},n=[];!function e(a){return Object.entries(a).forEach((function(a){var s=(0,i.default)(a,2),l=s[0],u=s[1];if("overlayElements"===l)u.forEach((function(e){e.content&&e.content.interaction&&e.content.data&&E.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.content.data))}));else if((0,o.default)(u))e(u);else if("href"===l||"thumbnailHref"===l||"coverImage"===l){var c,f=new RegExp(/^(http(s)?:)?\/\/[a-z0-9-]+(\.[a-z0-9-]+)*(\/)/),p=u.match(f);c=p&&p[0]&&p[0].match(/t2k|timetoknow/)?d.default.getAssetPath(u):d.default.getAssetPath("".concat(v.assets_prefix,"/").concat(u)),t.files.push(c),"href"===l&&-1!==u.indexOf(".html")&&n.push(c)}}))}(m);var a=0;return function e(){if(a>=n.length)return t;var r=n[a];return-1===r.indexOf("https:")&&(r="https:".concat(r)),++a,s.default.get(r).then((function(a){for(var i=(new DOMParser).parseFromString(a.data,"text/html"),o=i.getElementsByTagName("object"),s=r.substr(0,r.lastIndexOf("/")),c=0;c<o.length;++c){var f=o[c].getAttribute("data");f&&(t.files.push(d.default.getAssetPath("".concat(s,"/").concat(f))),n.push("".concat(s,"/").concat(f)))}for(var p=i.getElementsByTagName("image"),h=0;h<p.length;++h){var m=p[h].getAttribute("xlink:href");m&&t.files.push(d.default.getAssetPath("".concat(s,"/").concat(m)))}for(var v=i.getElementsByTagName("style"),g=0;g<v.length;++g){var E=v[g],_=(0,l.default)((0,u.default)(E.innerHTML));t.files=t.files.concat(_.map((function(e){return d.default.getAssetPath("".concat(s,"/").concat(e.url))})))}return e()}))}()})).then((function(t){var n=0;return function a(){if(n>=E.length)return t;var r=E[n];return++n,(0,f.default)(e,r.id,r.version).then((function(e){return t.files=t.files.concat(e.files),t.rests=t.rests.concat(e.rests),a()}))}()})).then((function(r){return r.rests=r.rests.concat([{url:"".concat(g,"/PlayAppService/play"),config:{params:{clk:a.clk,channelId:e}}},{url:"".concat(g,"/PlayAppService/userContext"),config:{params:{channelId:e}}},{url:"".concat(g,"/LibraryService/v2/channels/:channelId"),params:{channelId:e}},{url:"".concat(g,"/PlayAppService/lessons/:itemId/version/:version/play"),params:{itemId:t,version:n}},{url:"".concat(g,"/PlayAppService/state/page"),config:{params:{lessonId:t,lessonVersion:n}}}]),r}))};t.default=m},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(32)),i=a(n(14)),o=a(n(548)),s=a(n(382)),l=function(e,t,n,a){var l,u=i.default.getAppdata(),c=u.backend_url;return r.default.get("".concat(c,"/PlayAppService/fuses/:itemId/version/:version/play"),{itemId:t,version:n}).then((function(n){return l=n,s.default.getCoverImage(c,e,t)})).then((function(t){for(var n={files:t?[t]:[],rests:[]},a=0;a<l.externalContents.length;++a){var r=l.externalContents[a];if("VIDEO_FILE"!==r.type)return Promise.reject({status:"not_supported"});n.files.push(i.default.getAssetPath("".concat(u.assets_prefix,"/").concat(r.entryPoint)))}var s=0;return function t(){if(s>=l.fuse.components.length)return n;var a=l.fuse.components[s];return++s,"TASKGROUP"!==a.type?t():(0,o.default)(e,a.contentId,a.version).then((function(e){return n.files=n.files.concat(e.files),n.rests=n.rests.concat(e.rests),t()}))}()})).then((function(r){return r.rests=r.rests.concat([{url:"".concat(c,"/PlayAppService/play"),config:{params:{clk:a.clk,channelId:e}}},{url:"".concat(c,"/PlayAppService/userContext"),config:{params:{channelId:e}}},{url:"".concat(c,"/LibraryService/v2/channels/:channelId"),params:{channelId:e}},{url:"".concat(c,"/PlayAppService/fuses/:itemId/version/:version/play"),params:{itemId:t,version:n}}]),r}))};t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(43)),s=a(n(963)),l=a(n(1237)),u=a(n(82)),c=a(n(48)),d=a(n(21)),f=n(75),p=a(n(32)),h=a(n(14)),m=a(n(382)),v=function e(t,n,a){return Object.entries(t).forEach((function(t){var r=(0,o.default)(t,2),i=r[0],s=r[1];if((0,c.default)(s))e(s,n,a);else if("contentLanguage"===i)a.push(s);else if((0,u.default)(s)){var l=new RegExp(/^(http(s)?:)?\/\/[a-z0-9-]+(\.[a-z0-9-]+)*(\/)/),d=s.match(l);if(d&&d[0]&&d[0].match(/t2k|timetoknow/)){var f=decodeURI(s);n.files.push({path:h.default.getAssetPath(f),fileName:f.replace(/^.*[\\\/]/,"")})}}}))},g=function(){var e=(0,i.default)(r.default.mark((function e(t){var n,a,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&0!==t.length){e.next=3;break}return e.abrupt("return",null);case 3:return t.forEach((function(e){var t=p.default.get(e.url);n.push(t)})),e.prev=4,e.next=7,Promise.all(n);case 7:return a=e.sent,i={},o={},a.forEach((function(e){Object.assign(i,e.pages),Object.assign(o,e.interactions)})),e.abrupt("return",{pages:i,interactions:o});case 14:throw e.prev=14,e.t0=e.catch(4),f.LogManager.error(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e){if(e.startsWith("resources")){var t=h.default.getAppdata().assets_prefix;return"".concat(t,"/").concat(e)}return e},_=function(){var e=(0,i.default)(r.default.mark((function e(t,n){var a,i,o,s,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.entryPoint,i=h.default.getAppdata(),o=i.backend_url,s=a.replace(/(^\w+:|^)/,"").replace(/[^\/]*$/,""),e.next=6,p.default.get("".concat(o,"/PlayAppService/general/assets/list"),{},{params:{assetKey:s}});case 6:l=e.sent,t.files=t.files.concat(l.map((function(e){return{path:h.default.getAssetPath(e),fileName:decodeURI(e.replace(/^.*[\\\/]/,""))}})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.default)(r.default.mark((function e(t,n){var a,i,o,s,l,u;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.entryPoint,i=h.default.getAppdata(),o=i.backend_url,s=a.replace(/(^\w+:|^)/,"").replace(/[^\/]*$/,""),l=i.assets_prefix,e.next=7,p.default.get("".concat(o,"/PlayAppService/general/assets/list"),{},{params:{assetKey:s}});case 7:u=e.sent,t.files=t.files.concat(u.filter((function(e){return!(-1!==e.indexOf("Slide")&&-1!==e.indexOf(".html")&&-1===e.indexOf(a))&&-1===e.indexOf("Thumbnails")})).map((function(e){return{path:encodeURI(h.default.getAssetPath("".concat(l,"/").concat(e))),fileName:e.replace(/^.*[\\\/]/,""),type:"ppt"}})));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.default)(r.default.mark((function e(t,n){var a,i,o,s,l,u,c,f,p;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=d.default.CI_PAGE_TYPES,i=Object.keys(t),o=0,s=i;case 3:if(!(o<s.length)){e.next=24;break}u=s[o],(null==(c=t[u])||null===(l=c.presentation)||void 0===l?void 0:l.thumbnailHref)&&(f=c.presentation.thumbnailHref,n.files.push({path:h.default.getAssetPath(f),fileName:decodeURI(f.replace(/^.*[\\\/]/,""))})),e.t0=c.type,e.next=e.t0===a.VIDEO_FILE||"video_file"===e.t0||e.t0===a.IMAGE||e.t0===a.PDF||e.t0===a.MS_OFFICE?10:e.t0===a.SCORM||"scorm"===e.t0?13:e.t0===a.HTML?14:"ppt_converted"===e.t0||e.t0===a.PPT_FILE?17:20;break;case 10:return p=E(c.presentation.entryPoint),n.files.push({path:p,fileName:decodeURI(p.replace(/^.*[\\\/]/,""))}),e.abrupt("break",21);case 13:return e.abrupt("break",21);case 14:return e.next=16,_(n,c.presentation);case 16:return e.abrupt("break",21);case 17:return e.next=19,y(n,c.presentation);case 19:case 20:return e.abrupt("break",21);case 21:o++,e.next=3;break;case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.default)(r.default.mark((function e(t,n,a){var i,u,c,d,f,E,_,y,S,T,b,C,I,O,A,N=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=N.length>3&&void 0!==N[3]?N[3]:{},c=h.default.getAppdata(),d=c.backend_url,f=h.default.getUser().id,e.next=6,Promise.all([p.default.get("".concat(d,"/PlayAppService/ucontent/:itemId/version/:version/manifest"),{itemId:n,version:a}),m.default.getCoverImage(d,t,n),m.default.getConfigRestsList(d)]);case 6:return E=e.sent,_=(0,o.default)(E,3),y=_[0],S=_[1],T=_[2],b=[].concat(S?[{path:h.default.getAssetPath(S),fileName:decodeURI(S.replace(/^.*[\\\/]/,""))}]:[]),C={files:b,rests:T||[],ciImage:null==S?void 0:S.replace(/^.*[\\\/]/,"")},I=[],e.next=16,g(y.pages);case 16:return O=e.sent,A=null==y||null===(i=y.pages)||void 0===i?void 0:i.map((function(e){return{url:e.url}})),v(O.interactions,C,I),e.next=21,k(O.pages,C,t);case 21:return C.files=(0,l.default)(C.files,"path"),C.rests=C.rests.concat(A).concat([{url:"".concat(d,"/PlayAppService/ucontent/:itemId/version/:version/manifest"),params:{itemId:n,version:a}},{url:"".concat(d,"/LibraryService/v2/channels/:channelId"),params:{channelId:t}},{url:"".concat(d,"/PlayAppService/userContext"),config:{params:{channelId:t}}},{url:"".concat(d,"/PlayAppService/ucontent/:itemId/version/:version/slideToPageMap"),params:{itemId:n,version:a}}]).concat(u.clk?[{url:"".concat(d,"/PlayAppService/play"),config:{params:{clk:u.clk,channelId:t}}}]:[]).concat([{url:"".concat(d,"/PlayAppService/groups/channels/:channelId/separated"),params:{channelId:t}}]),Object.keys(O.interactions).forEach((function(e){C.rests=C.rests.concat([{url:"".concat(d,"/Interactions/states/taskGroups/:id/version/:version"),params:{id:e,version:O.interactions[e].taskGroup.version},config:{params:{userId:f,channelId:t}},type:"interaction"}])})),(0,s.default)(I).forEach((function(e){C.rests=C.rests.concat([{url:"".concat(d,"/Interactions/dictionary"),config:{params:{locale:e,appName:"interactions"}}}])})),e.abrupt("return",C);case 26:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();t.default=S},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(33)),i=a(n(34)),o=a(n(3)),s=a(n(4)),l=a(n(28)),u=a(n(14)),c=l.default.Instance,d=function(){function e(){(0,o.default)(this,e)}var t;return(0,s.default)(e,null,[{key:"getAllChannelsWithRoles",value:(t=(0,i.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.default.getAppdata().backend_url,e.abrupt("return",c.get("".concat(t,"/PlayAppService/v2/channels/withRoles"),{},{failOnOffline:!0}));case 2:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=new(function(){function e(){(0,r.default)(this,e),this._allChannelsWithRoles=null,this._masterCoursesIdAndName={}}return(0,i.default)(e,[{key:"getMasterCourseName",value:function(e){return this._masterCoursesIdAndName[e]}},{key:"setMasterCourseName",value:function(e,t){this._masterCoursesIdAndName[e]=t}},{key:"allChannelsWithRoles",get:function(){return this._allChannelsWithRoles},set:function(e){this._allChannelsWithRoles=e}},{key:"masterCoursesIdAndName",get:function(){return this._masterCoursesIdAndName}}]),e}());t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inject=function(e){var t=document.createElement("script");t.type="text/javascript",t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),document.getElementsByTagName("head")[0].appendChild(t)},t.init=function(e){function t(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],t("js",new Date),t("config",e)}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(o){if("function"==typeof o)return o(n,a);var s=o.promise,l=o.types,f=(0,i.default)(o,["promise","types"]);if(!s)return t(o);var p=(0,r.default)(l,3),h=p[0],m=p[1],v=p[2];return t(d(h,f,n,a)),s(e).then((function(e){return t(d(m,u(u({},f),{},{result:e}),n,a))}),(function(e){return t(d(v,u(u({},f),{},{error:e}),n,a))})).catch((function(e){console.error("MIDDLEWARE ERROR:",e.stack||e,a()),t(u(u({},f),{},{result:c(e),type:v}))}))}}}};var r=a(n(43)),i=a(n(68)),o=a(n(9)),s=a(n(63));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return{error:!0,message:e.message,stack:e.stack,originalError:e,code:"UNKNOWN_ERROR"}}function d(e,t,n,a){var r;return r="function"==typeof e?e(n,a,t):"object"===(0,s.default)(e)?e:{type:e},u(u({},t),r)}},,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(177),i=a(n(1724)),o=a(n(1725)),s=a(n(1726)),l=(0,r.combineReducers)({messaging:i.default,help:o.default,discussions:s.default});t.default=l},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.toggleInbox=p,t.handleToggleCompose=h,t.handleLoadCount=m,t.handleMessageCountSuccess=v,t.handleMessageCountError=g,t.handleResetCount=E,t.handleResetCountSuccess=_,t.handleResetCountError=y,t.handleLoadMessages=k,t.handleMessagesSuccess=S,t.handleMessagesError=T,t.handleLoadConversation=b,t.handleLoadConversationSuccess=C,t.handleLoadConversationError=I,t.handleSetInputMessage=O,t.handleCloseConversationDetails=A,t.handleSendMessage=N,t.handleSendMessageSuccess=w,t.handleSendMessageError=R,t.handleOpenAttachPicker=P,t.handleCloseAttachPicker=M,t.handleLoadAttachments=D,t.handleMessageReceived=x,t.handleExpandCollapseInbox=F,t.handleResetUpdatedConversation=U,t.default=void 0;var i=r(n(40)),o=r(n(9)),s=r(n(1304)),l=a(n(1092));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={messagesOpen:!1,messages:[],conversations:[],inbox:{isClosed:!0,closeOnClickOutside:!1,closeOnToggle:!1},draft:null,count:0,loadingMessages:!1,currentConversation:null,updatedConversation:null},f=function(e,t){var n=(0,s.default)(e,t,(function(e){return e.id}));return n.sort((function(e,t){return e.timestamp-t.timestamp})),n};function p(e,t){return c(c({},e),{},{inbox:e.messagesOpen?{isClosed:!0,closeOnClickOutside:t.inboxProps&&t.inboxProps.closeOnClickOutside,closeOnToggle:t.inboxProps&&t.inboxProps.closeOnToggle}:c(c({},t.inboxProps),{},{isClosed:!1}),messagesOpen:!e.messagesOpen})}function h(e,t){if(e.compose)return c(c({},e),{},{compose:null});var n=e.conversation,a=t.composeProps;return a&&a.recipients&&a.recipients.length&&(n={id:"demo"}),c(c({},e),{},{loadingConversation:!1,conversation:n,compose:a})}function m(e){return e}function v(e,t){var n=t.result.unseenConversations;return c(c({},e),{},{count:n})}function g(e){return c(c({},e),{},{count:void 0})}function E(e){return e}function _(e){return e.count=0,e}function y(e,t){return c(c({},e),{},{error:t.error})}function k(e,t){var n;return n=e.currentConversation&&t.conversation.id!==e.currentConversation.id?[]:e.messages,c(c({},e),{},{loadingMessages:!0,currentConversation:t.conversation,messages:n})}function S(e,t){var n=f(t.result.elements,e.messages);return c(c({},e),{},{pageIndex:t.result.pageIndex,totalPages:t.result.totalPages,loadingMessages:!1,messages:n})}function T(e){return c(c({},e),{},{loadingMessages:!1})}function b(e){return c(c({},e),{},{messages:[],conversation:null,loadingConversation:!0,loadingConversationError:!1})}function C(e,t){var n=t.result;return c(c({},e),{},{loadingConversation:!1,conversation:n,loadingConversationError:!1})}function I(e){return c(c({},e),{},{messages:[],conversation:null,loadingConversation:!1,loadingConversationError:!0})}function O(e,t){return c(c({},e),{},{inputMessage:t.message})}function A(e){return c(c({},e),{},{messages:[],messageSent:!1,sendingMessageInProgress:!1,sendingMessageError:!1,loadingConversation:!1,loadingConversationError:!1})}function N(e){return c(c({},e),{},{messageSent:!1,sendingMessageInProgress:!0,sendingMessageError:!1})}function w(e,t){var n=e.messages?(0,i.default)(e.messages):[],a=t.result.message||t.result[0]&&t.result[0].message,r=null;return a&&(n.push(a),e.messagesOpen&&(r=c(c({},e.currentConversation),{},{lastMessage:a}))),c(c({},e),{},{messages:n,updatedConversation:r,inputMessage:null,messageSent:!0,sendingMessageInProgress:!1,sendingMessageError:!1})}function R(e){return c(c({},e),{},{messageSent:!1,sendingMessageInProgress:!1,sendingMessageError:!0})}function P(e){return c(c({},e),{},{attachPicker:{opened:!0}})}function M(e){return c(c({},e),{},{attachPicker:{opened:!1}})}var L=["Cybersecurity Essentials","Cybersecurity Practice 1","Cybersecurity Practice 2","Problem-solving","Decision-making","Is Your Risk Management Too Good?","Risk Management Quiz"];function D(e){for(var t=[],n=0;n<L.length;n++)t.push({id:n,url:"http://www.google.com/?q="+L[n].toLowerCase().replace(/ /g,"+"),title:L[n],difficulty:Math.floor(5*Math.random())});return c(c({},e),{},{attachments:t})}function x(e,t){var n=t.updatedConversation,a=c(c({},e),{},{updatedConversation:n}),r=e.inbox&&e.inbox.isConversationExpanded&&e.inbox.selectedItemId===n.id,i=e.compose&&e.conversation&&e.conversation.id===n.id;return(r||i)&&(a.messages=f([n.lastMessage],e.messages),r?a.currentConversation=n:i&&(a.conversation=n)),a}function F(e,t,n){var a=c({},e);return e.inbox&&!e.inbox.isClosed&&(a.inbox=c(c({},e.inbox),{},{isConversationExpanded:t,selectedItemId:n})),a}function U(e){return c(c({},e),{},{updatedConversation:null})}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.TOGGLE_MESSAGES:return p(e,t);case l.LOAD_MESSAGE_COUNT:return e;case l.LOAD_MESSAGE_COUNT_SUCCESS:return v(e,t);case l.LOAD_MESSAGE_COUNT_ERROR:return g(e);case l.RESET_MESSAGE_COUNT:return e;case l.RESET_MESSAGE_COUNT_SUCCESS:return _(e);case l.RESET_MESSAGE_COUNT_ERROR:return y(e,t);case l.LOAD_MESSAGES:return k(e,t);case l.LOAD_MESSAGES_SUCCESS:return S(e,t);case l.LOAD_MESSAGES_ERROR:return T(e);case l.LOG_ERROR:return c(c({},e),{},{error:t.error});case l.SET_INPUT_MESSAGE:return O(e,t);case l.CLOSE_CONVERSATION_DETAILS:return A(e);case l.TOGGLE_COMPOSE:return h(e,t);case l.SEND_MESSAGE:return N(e);case l.SEND_MESSAGE_SUCCESS:return w(e,t);case l.SEND_MESSAGE_ERROR:return R(e);case l.LOAD_CONVERSATION:return b(e);case l.LOAD_CONVERSATION_SUCCESS:return C(e,t);case l.LOAD_CONVERSATION_ERROR:return I(e);case l.OPEN_ATTACH_PICKER:return P(e);case l.CLOSE_ATTACH_PICKER:return M(e);case l.LOAD_ATTACHMENTS:return D(e);case l.NEW_MESSAGE_RECEIVED:return x(e,t);case l.EXPAND_INBOX:return F(e,!0,t.selectedItemId);case l.COLLAPSE_INBOX:return F(e,!1,null);case l.RESET_UPDATED_CONVERSATION:return U(e);default:return e}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.toggleHelp=u,t.toggleFirst=c,t.setVideoState=d,t.handleLoadVideos=f,t.handleLoadVideosSuccess=p,t.handleLoadVideosError=h,t.handleSelectVideo=m,t.handleSelectCategory=v,t.handleLoadCategories=g,t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.TOGGLE_HELP:return u(e);case i.TOGGLE_FIRST:return c(e);case i.LOAD_VIDEOS:return f(e);case i.LOAD_VIDEOS_SUCCESS:return p(e,t);case i.LOAD_VIDEOS_FAILED:return h(e,t);case i.SELECT_VIDEO:return m(e,t);case i.SELECT_CATEGORY:return v(e,t);case i.SET_VIDEO_STATE:return d(e,t);case i.LOAD_CATEGORIES:return g(e);default:return e}};var r=a(n(9)),i=n(1093);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={helpOpen:!1,videos:[],loading:!1,selectedCategory:null,selectedVideo:null,error:null,videoIndex:0,firstVideoOpen:!1,related:[]};function u(e){return e.helpOpen?s(s({},e),l):s(s({},e),{},{helpOpen:!0})}function c(e){return s(s({},e),{},{firstVideoOpen:!e.firstVideoOpen})}function d(e,t){return s(s({},e),{},{videoState:t.videoState})}function f(e){return s(s({},e),{},{loading:!0})}function p(e,t){var n=[];t.result&&(n=t.result);var a=t.category||e.selectedCategory,r=(n=n.filter((function(e){if("onboarding"!==a&&"onboarding"===e.category)return!1;if(t.roles)for(var n=0;n<t.roles.length;n++)for(var r=0;r<e.roles.length;r++)if(t.roles[n]===e.roles[r])return!0;return!0}))).filter((function(e){return e.category===a||e.category.indexOf(a)>=0}));return s(s({},e),{},{loading:!1,videos:(r.length,n)})}function h(e,t){return s(s({},e),{},{loading:!1,error:t.error})}function m(e,t){var n=[];t.video&&t.video.group&&e.videos&&(n=e.videos.reduce((function(e,n){return n.group===t.video.group&&e.push(n),e}),[]));var a=e.videos.indexOf(t.video);return s(s({},e),{},{related:n,videoIndex:a,prevVideo:a>0?e.videos[a-1]:null,nextVideo:a<e.videos.length-1?e.videos[a+1]:null,selectedVideo:t.video})}function v(e,t){return s(s({},e),{},{selectedCategory:t.category})}function g(e){return s(s({},e),{},{categories:[]})}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={isDiscussionsOpen:!1,discussionsCount:0},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_DISCUSSIONS":return o(o({},e),{},{isDiscussionsOpen:!e.isDiscussionsOpen});case"SET_DISCUSSIONS_COUNT":return o(o({},e),{},{discussionsCount:t.count});default:return e}};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={VIDEOS_LOAD_ERROR:"Failed to load help videos"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONVERSATION_LOAD_ERROR=t.MESSAGE_SEND_ERROR=t.MESSAGES_LOAD_ERROR=t.COUNT_RESET_ERROR=t.COUNT_LOAD_ERROR=void 0;t.COUNT_LOAD_ERROR="Messaging button: failed to get conversations status.";t.COUNT_RESET_ERROR="Messaging button: failed to reset conversations status.";t.MESSAGES_LOAD_ERROR="Error loading messages in conversation";t.MESSAGE_SEND_ERROR="Error sending message";t.CONVERSATION_LOAD_ERROR="Error in loading conversation"},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(18)),v=r(n(13)),g=r(n(41)),E=n(258),_=n(74),y=r(n(58)),k=r(n(36)),S=r(n(154)),T=r(n(101));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var C=function(e){(0,c.default)(n,e);var t=b(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1,showTaskAttachment:!1},a.dateOptions={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},a.openInteractionDialog=a.openInteractionDialog.bind((0,u.default)(a)),a.closeInteractionDialog=a.closeInteractionDialog.bind((0,u.default)(a)),a.renderInteractionDialog=a.renderInteractionDialog.bind((0,u.default)(a)),a.openCI=a.openCI.bind((0,u.default)(a)),a.bodyRef=(0,p.createRef)(),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.setEventListener()}},{key:"setEventListener",value:function(){this.bodyRef.current&&this.bodyRef.current.querySelectorAll("a").forEach((function(e){e.addEventListener("click",(function(e){v.default.isCordova()&&(e.preventDefault(),window.open(v.default.addCloudFrontKeysToSrc(v.default.getAssetPath(e.target.href)),"_system"))}))}))}},{key:"openInteractionDialog",value:function(){g.default.sendEvent(g.default.TITLES.MESSAGES_CLICK_DEEP_LINK,g.default.COMPONENTS.MESSAGES,(0,o.default)({},g.default.PARAMS.TYPE,"interaction")),this.setState({showTaskAttachment:!0})}},{key:"closeInteractionDialog",value:function(){this.setState({showTaskAttachment:!1})}},{key:"openCI",value:function(){g.default.sendEvent(g.default.TITLES.MESSAGES_CLICK_DEEP_LINK,g.default.COMPONENTS.MESSAGES,(0,o.default)({},g.default.PARAMS.TYPE,"content")),S.default.setNav("echoPlayer",{clk:this.props.attachments[0].data.clk,channelId:this.props.attachments[0].data.channelId},void 0,{dontPreventNav:!0})}},{key:"renderInteractionDialog",value:function(){var e=this,t=this.props.attachments[0].data.taskGroupId,n=this.props.attachments[0].data.taskGroupVersion,a=this.props.attachments[0].data.taskId,r=v.default.getAppdata(),i=this.props.attachments[0].data.taskIndex,o=p.default.createElement("div",{className:"messagec__task-attachment"},p.default.createElement(E.TaskGroup,{token:v.default.getCurrentToken(),serviceUrl:r.backend_url,taskGroupId:t,taskGroupVersion:n,isReadOnly:!0,isPersistent:!1,showReport:!1,singleTaskMode:!0,loggerName:"playanywhere",showPollResults:!1,isPreview:!1,taskId:a,taskStartingIndex:i,showFlagInteractionButton:!1}));return p.default.createElement(y.default,{close:function(){e.closeInteractionDialog()},customActions:[p.default.createElement(k.default,{type:y.default.BUTTON_TYPES.SECONDARY,text:m.default.translate("email.alerts.takeMeToCi"),onClick:this.openCI,styleClass:"messagec__task-attachment"})],content:o,theme:y.default.THEMES.LIGHT,styleClass:"messagec__task-attachment__dialog"})}},{key:"renderTaskButton",value:function(){return p.default.createElement("div",null,this.state.showTaskAttachment&&this.renderInteractionDialog(),p.default.createElement("button",{className:"messagec__task-attachment__button",onClick:this.openInteractionDialog},p.default.createElement("div",{className:"messagec__task-attachment__button-container"},p.default.createElement("div",{className:"messagec__task-attachment__content"},p.default.createElement("div",{className:"messagec__task-attachment__icon"},p.default.createElement(_.OpenInteractionDialogIcon,null)),p.default.createElement("div",{className:"messagec__task-attachment__text"}," ",m.default.translate("email.alerts.showInteraction"))))))}},{key:"render",value:function(){var e=(0,h.default)("messagec",{"messagec--unread":this.props.unread,"messagec--ownuser":this.props.currentUser,"messagec--withcontext":this.props.showContext,"messagec--placeholder":this.props.isPlaceholder}),t=new Date(this.props.timestamp),n=v.default.getAppdata().appConf.locale.replace("_","-"),a=this.props.timestamp?t.toLocaleDateString(n,this.dateOptions).replace(/[,.]/," ").replace(","," | "):"",r=this.props.attachments?this.renderTaskButton():null,o=this.props.body;return p.default.createElement("div",{className:e},this.props.showTimestamp?p.default.createElement("div",{className:"messagec__timestamp"},p.default.createElement("hr",null),a,p.default.createElement("hr",null)):null,p.default.createElement("div",{className:"messagec__bodywrap"},p.default.createElement("div",{className:"messagec__flexitem"},this.props.showContext?p.default.createElement("div",{className:"messagec__context"},m.default.translate(this.props.context.name)):null,p.default.createElement("div",{className:"messagec__body"},r,p.default.createElement("div",{className:"messagec__arrow"}),p.default.createElement("div",(0,i.default)({},(0,T.default)(o),{ref:this.bodyRef}))))),p.default.createElement("div",{className:"messagec__time"},a))}}]),n}(p.Component);C.defaultProps={body:""};var I=C;t.default=I},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),n(177)),p=n(259),h=r(n(11)),m=r(n(360));n(73);var v=r(n(18)),g=r(n(13)),E=r(n(60)),_=r(n(176)),y=r(n(41)),k=r(n(158)),S=a(n(333)),T=n(503),b=n(510);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var I=function(e){(0,l.default)(n,e);var t=C(n);function n(e){var a,r,s;(0,i.default)(this,n),(s=t.call(this,e)).state={inputText:"",status:T.MESSAGE_INPUT_STATE.INVALID},s._inputChangeHandler=s._inputChangeHandler.bind((0,o.default)(s)),s._sendMessageHandler=s._sendMessageHandler.bind((0,o.default)(s)),s._openAttachPickerHandler=s._openAttachPickerHandler.bind((0,o.default)(s)),s._handleSendMessageFromTextEditor=s._handleSendMessageFromTextEditor.bind((0,o.default)(s)),s._setInputMessage=(0,m.default)(s.props.setInputMessage,250);var l=g.default.getAppdata();return s.isDemo=null==l||null===(a=l.appConf)||void 0===a||null===(r=a.featureFlags)||void 0===r?void 0:r.demo,s.enterKeyClicked=!1,s}return(0,s.default)(n,null,[{key:"_uploadFileAndReturnDownloadLink",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=g.default.getAppdata().backend_url;return _.default.uploadFileAndReturnDownloadLink(e,a,void 0,t,n,"LibraryService/getUploadLink",!0)}},{key:"_uploadFileFroala",value:function(e,t,a){n._uploadFileAndReturnDownloadLink(e).then((function(e){a(void 0,g.default.getAssetPath(e))})).catch(a)}}]),(0,s.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;e.conversation&&this.props.conversation&&e.conversation.id!==this.props.conversation.id?this._clearInput():e.sendingMessageInProgress?this.setState({status:T.MESSAGE_INPUT_STATE.SENDING}):e.sendingMessageError?this.setState({status:T.MESSAGE_INPUT_STATE.ERROR},(function(){setTimeout((function(){t.setState({status:T.MESSAGE_INPUT_STATE.VALID})}),1e3)})):e.messageSent&&!this.props.messageSent&&this._clearInput()}},{key:"componentWillUnmount",value:function(){this._setInputMessage(null)}},{key:"_handleSendMessageFromTextEditor",value:function(e,t,n){if(13===n.which&&!n.shiftKey&&g.default.isPC()){var a=e.target.getElementsByClassName("fr-view")[0];""!==a.textContent.trim()?this.enterKeyClicked=!0:a.innerHTML="<p><br></p>"}}},{key:"render",value:function(){var e=(0,h.default)("message-input",{"message-input--valid":this.state.status===T.MESSAGE_INPUT_STATE.VALID,"message-input--sending":this.state.status===T.MESSAGE_INPUT_STATE.SENDING,"message-input--error":this.state.status===T.MESSAGE_INPUT_STATE.ERROR});return d.default.createElement("div",{className:e},d.default.createElement("div",{className:"message-input__wrapper"},d.default.createElement(S.default,{type:S.LINEAREA,toolbar:S.BASIC_FORMAT,onChange:this._inputChangeHandler,multiLine:!0,insertImageAsFile:!0,useEnterKeyForSave:!0,id:"message-input__text-editor",placeholder:v.default.translate("inbox.compose.write-message"),html:this.state.inputText,uploadFile:n._uploadFileFroala,keydownEventFn:this._handleSendMessageFromTextEditor,onFocus:function(){g.default.isIos()&&window.document.body.scrollTo(0,window.document.body.scrollHeight)}}),this.isDemo&&g.default.isInstructor()?d.default.createElement("div",{onClick:this._openAttachPickerHandler,className:"message-input__attach"}):null,d.default.createElement("div",{className:"message-input__icons"},d.default.createElement("div",{className:"message-input__icon",onClick:this._sendMessageHandler},this.state.status===T.MESSAGE_INPUT_STATE.SENDING?d.default.createElement(E.default,{size:E.default.Sizes.SMALL}):d.default.createElement(k.default,{isClickable:!0,id:"send",iconName:"send",ignoreCustomStyle:!0})))))}},{key:"_inputChangeHandler",value:function(e){var t=this,a=T.MESSAGE_INPUT_STATE.INVALID,r=e.html;""===this.state.inputText&&""!==e.html&&y.default.sendEvent(y.default.TITLES.WRITE_MESSAGE_TO_RECIPIENT,y.default.COMPONENTS.MESSAGE_PANE,{message_participants:this.props.conversation&&this.props.conversation.participants&&this.props.conversation.participants.map((function(e){return e.userId}))}),n._isMessageValid(r)?a=T.MESSAGE_INPUT_STATE.VALID:r="",this.setState({inputText:r,status:a},(function(){t.enterKeyClicked&&(t.enterKeyClicked=!1,t._sendMessageHandler())})),this._setInputMessage(r)}},{key:"_sendMessageHandler",value:function(){var e=n._deleteTrailingSpaces(this.state.inputText);if(this.state.status===T.MESSAGE_INPUT_STATE.VALID)if(y.default.sendEvent(y.default.TITLES.MESSAGE_SENT,y.default.COMPONENTS.MESSAGE_PANE,{message_content:e,message_participants:this.props.conversation&&this.props.conversation.participants&&this.props.conversation.participants.map((function(e){return e.userId}))}),this.props.compose&&this.props.compose.mode===T.COMPOSE_MODE.MULTI){var t=this.props.compose.recipients.map((function(e){return e.id}));this.props.sendMessage(e,t,this.props.context,T.COMPOSE_MODE.MULTI)}else this.props.sendMessage(e,this.props.conversation,this.props.context)}},{key:"_clearInput",value:function(){this.setState({inputText:"",status:T.MESSAGE_INPUT_STATE.INVALID}),this._setInputMessage(null)}},{key:"_openAttachPickerHandler",value:function(){this.props.openAttachPicker()}}],[{key:"_isMessageValid",value:function(e){var t=document.createElement("textarea");t.innerHTML="<div>".concat(e,"</div>");var n=t.value.replace(/<br>/g,"<br/>");return""!==(new DOMParser).parseFromString(n,"text/xml").documentElement.textContent.trim()}},{key:"_deleteTrailingSpaces",value:function(e){return e=(e=(e=e.replace(/(<p>( |<br>|&nbsp;)+<\/p>)+$/g,"")).replace("<p>","").replace("</p>","")).replace(/( |<br>|&nbsp;)+$/g,"")}}]),n}(d.Component);I.defaultProps={};var O=(0,p.connect)((function(e){return{conversation:(e=e.messaging).currentConversation,sendingMessageInProgress:e.sendingMessageInProgress,messageSent:e.messageSent,sendingMessageError:e.sendingMessageError,compose:e.compose}}),(function(e){return(0,f.bindActionCreators)({sendMessage:b.sendMessage,setInputMessage:b.setInputMessage,openAttachPicker:b.openAttachPicker},e)}))(I);t.default=O},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(3)),o=a(n(4)),s=a(n(147)),l=a(n(0)),u=a(n(24)),c=a(n(129)),d=a(n(13)),f=a(n(1996));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){function e(t,n){var a=this;(0,i.default)(this,e),this._channel=t,this._hostCommunicator=new c.default(this._channel,window,window,{open:this._open,terminate:this._terminate,buttonClicked:function(e,t,n){a._stageCommunicator.send("buttonClicked",t,n)}},this),this._config=n,this._isInited=!0}return(0,o.default)(e,[{key:"_terminate",value:function(e,t,n){var a=this;this._stageCommunicator.send("terminate",t,(function(){a._stageCommunicator.destroy(),u.default.render(l.default.createElement("div",{id:a._channel}),a._el,n)}))}},{key:"_open",value:function(e,t,n){var a=this;this._openCallback=n,this._el=document.getElementById(t.targetId),this._stageUrl=this._getStageUrl(t),this._config=h(h(h({},this._config),t),{},{href:d.default.getHref(),videoIframeOrigin:d.default.getOriginWithPath()}),this._el?this._render():setTimeout((function(){a._el=document.getElementById(t.targetId),a._el&&a._render()}),500)}},{key:"_getStageUrl",value:function(e){var t=e.stageUrl,n="",a="";return e.hash&&(n="#"===e.hash[0]?e.hash:"#".concat(e.hash)),e.queryParams&&((0,s.default)(e.queryParams,(function(e,t){a+="".concat(t,"=").concat(e,"&")})),a&&(a="?".concat(a.substring(0,a.length-1)))),"".concat(t).concat(a).concat(n)}},{key:"_render",value:function(){u.default.render(l.default.createElement(f.default,{currentAppId:this._channel,stageUrl:this._stageUrl}),this._el,this._initStageCommunicator.bind(this))}},{key:"_initStageCommunicator",value:function(){var e=this,t=document.getElementById(this._channel);this._stageCommunicator=new c.default("hostChannel",window,t.contentWindow,{handshake:function(t,n,a){a(e._config)},setNav:function(t,n,a){e._hostCommunicator.send("setNav",n,a)},setConfig:function(t,n,a){e._hostCommunicator.send("setConfig",n,(function(){a(),e._openCallback&&(e._openCallback(),e._openCallback=null)}))},close:function(t,n,a){e._hostCommunicator.send("close",n,a)},setStage:function(t,n,a){e._hostCommunicator.send("setStage",n,a)},updateElement:function(t,n,a){e._hostCommunicator.send("updateElement",n,a)},setLoader:function(t,n,a){e._hostCommunicator.send("setLoader",n,a)}},this)}}]),e}();t.default=m},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0));r(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("iframe",{allowFullScreen:!0,id:this.props.currentAppId,key:this.props.currentAppId,className:"stage__iframe",src:this.props.stageUrl})}}]),n}(c.Component);f.defaultProps={stageUrl:""};var p=f;t.default=p},,,,function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"load",value:function(e){if(e&&e.enabled&&e.gtmId){var t=this._createScript(e.gtmId),n=this._createFrame(e.gtmId),a=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("body")[0],i=r.firstChild;a.appendChild(t),i?r.insertBefore(n,i):r.appendChild(n)}}},{key:"_createFrame",value:function(e){var t=document.createElement("noscript"),n=document.createElement("iframe");return n.style.display="none",n.style.visibility="hidden",n.width=0,n.height=0,n.src="https://www.googletagmanager.com/ns.html?id=%GTM%".replace("%GTM%",e),t.appendChild(n),t}},{key:"_createScript",value:function(e){var t=document.createElement("script");return t.type="text/javascript",t.text="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','%GTM%');".replace("%GTM%",e),t}}]),e}());t.default=o},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(23)),s=r(n(3)),l=r(n(12)),u=r(n(4)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=r(n(217)),h=a(n(0)),m=(r(n(2)),r(n(13))),v=r(n(21)),g=r(n(28)),E=r(n(53)),_=r(n(604)),y=r(n(57)),k=n(2002),S=r(n(1309));function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var I=g.default.Instance,O=E.default.LogManager,A=function(e){(0,c.default)(n,e);var t=C(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={open:!1},a._handleReportUpdatedEvent=m.default.debounce(a._handleReportUpdatedEvent.bind((0,l.default)(a)),1e3),a._handlePushMessage=a._handlePushMessage.bind((0,l.default)(a)),a._onClose=a._onClose.bind((0,l.default)(a)),a._subscribeToMyChannels=a._subscribeToMyChannels.bind((0,l.default)(a)),a}return(0,u.default)(n,null,[{key:"_getParticipantsData",value:function(e){var t=e.taskId,n=e.taskVersion,a=e.channelId,r=e.ciId,i=e.ciVersion;return new Promise((function(e,o){I.get(y.default.GET_QUESTION_REPORT,{},{params:{taskId:t,taskVersion:n,ciId:r,ciVersion:i,channelId:a}}).then((function(t){var n=(t.users||[]).map((function(e){return{id:e.userId,name:e.username,responded:"unanswered"!==e.successRateGroup}}));e(n)})).catch((function(e){o(e)}))}))}}]),(0,u.default)(n,[{key:"componentDidMount",value:function(){setTimeout(this._subscribeToMyChannels)}},{key:"render",value:function(){var e=this.state,t=e.open,n=e.isInstructor,a=e.isLearner;if(t){if(n)return h.default.createElement(k.TaskPresentationControl,(0,o.default)({appApi:this.props.appApi,customHeaders:this.props.customHeaders},this.state.taskPresentationProps,{onClose:this._onClose}));if(a)return h.default.createElement(k.TaskPresentationView,(0,o.default)({customHeaders:this.props.customHeaders},this.state.taskPresentationProps,{onClose:this._onClose}))}return null}},{key:"_onClose",value:function(){this.setState({open:!1})}},{key:"_subscribeToMyChannels",value:function(){var e=this,t=this.props.appApi.serverPush;this._channelWithContents=_.default.allChannelsWithRoles;var n=!1;this._channelWithContents.forEach((function(a){m.default.isInstructor({roles:a.roles})&&(n=!0),t(void 0,{type:v.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:"channel/".concat(a.id),callback:e._handlePushMessage})})),n&&(t(void 0,{type:v.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:v.default.LOCAL_CHANNEL,callback:this._handlePushMessage}),t(void 0,{type:v.default.SERVER_PUSH_TYPES.SUBSCRIBE,channel:"user/".concat(m.default.getUser().id),callback:this._handlePushMessage}))}},{key:"_handlePushMessage",value:function(e,t){var n=e.channelId||t.substr(8),a=(0,p.default)(this._channelWithContents,{id:n});if(a){var r=a.roles;if(m.default.isInstructor({roles:r})){var i=this.state.taskPresentationProps;"PRESENT_TASK"===e.event?this._handlePresentTask(e):"REPORT_UPDATED"===e.event&&e.taskId===i.task.id&&e.taskVersion===i.task.version&&this._handleReportUpdatedEvent()}else m.default.isLearner({roles:r})&&"PUSH_TASK"===e.event&&this._handlePushTask(e)}}},{key:"_handlePresentTask",value:function(e){var t=this;if(!this.state.open||S.default.isDifferentPresentEvents(e,this.state.taskPresentationProps)){var a=e.context;a.contextObject.userId=m.default.getUser().id,a.contextObject.contentSessionId="".concat(e.ci.id,"_").concat(Date.now());var r={taskId:e.task.id,taskVersion:e.task.version,ciId:a.contextObject.contentItemId,ciVersion:a.contextObject.contentItemVersion,channelId:e.channelId};n._getParticipantsData(r).then((function(n){t.setState({open:!0,taskPresentationProps:{title:e.title,clk:e.clk,task:e.task,taskGroup:e.taskGroup,ci:e.ci,channelId:e.channelId,context:a,participants:n},isInstructor:!0,isLearner:!1})})).catch((function(e){O.error("echo",{message:"Task Presentation: Failed to fetch question report. ".concat(e&&e.message?e.message:JSON.stringify(e))})}))}}},{key:"_handlePushTask",value:function(e){if(!this.state.open||S.default.isDifferentPushEvents(e,this.state.taskPresentationProps)){var t=e.context;t.contextObject.userId=m.default.getUser().id,t.contextObject.contentSessionId="".concat(e.ciId,"_").concat(Date.now()),this.setState({open:!0,taskPresentationProps:{title:e.title,task:e.task,taskGroup:e.taskGroup,presenter:e.presenter,ciId:e.ciId,context:t},isInstructor:!1,isLearner:!0})}}},{key:"_handleReportUpdatedEvent",value:function(){var e=this;if(this.state.open){var t=this.state.taskPresentationProps,a={taskId:t.task.id,taskVersion:t.task.version,taskGroupId:t.taskGroup.id,taskGroupVersion:t.taskGroup.version,channelId:t.channelId,ciId:t.context.contextObject.contentItemId,ciVersion:t.context.contextObject.contentItemVersion};n._getParticipantsData(a).then((function(t){e.setState({taskPresentationProps:b(b({},e.state.taskPresentationProps),{},{participants:t})})})).catch((function(e){O.error("echo",{message:"Task Presentation: Failed to fetch question report. ".concat(e&&e.message?e.message:JSON.stringify(e))})}))}}}]),n}(h.Component);A.defaultProps={customHeaders:{}};var N=A;t.default=N},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.TaskPresentationControl=t.TaskPresentationView=void 0;var r=a(n(249)),i=(0,r.default)({loader:function(){return n.e(38).then(n.t.bind(null,2164,7))},loading:function(){return null}});t.TaskPresentationView=i;var o=(0,r.default)({loader:function(){return n.e(37).then(n.t.bind(null,2165,7))},loading:function(){return null}});t.TaskPresentationControl=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(72)),s=a(n(21)),l=a(n(2004)),u=0,c=function(){function e(t){(0,r.default)(this,e),this._engineType=t,this._initEngine(t),this._channelToCallbacks=new Map,this._lastRecover=(new Date).getTime()}return(0,i.default)(e,[{key:"_initEngine",value:function(e){switch(e){case s.default.PUSH_ENGINE.SOCKET:this._engine=new l.default({onConnectionSuccess:this._connectionSuccess.bind(this),onError:this.recover.bind(this)})}}},{key:"subscribe",value:function(e,t){if(e!==s.default.LOCAL_CHANNEL){var n=this._channelToCallbacks.get(e);n&&n.length||this._engine.subscribe(e,this._trigger.bind(this,e))}return this._register(e,t)}},{key:"unsubscribe",value:function(e){for(var t,n=function(t){var n=t.id;return e===n},a=this._channelToCallbacks.entries(),r=a.next();!r.done;){var i=r.value;if(i[1].filter(n).length){t=i[0];break}r=a.next()}if(t){var o=this._channelToCallbacks.get(t);(o=o.filter((function(t){return t.id!==e}))).length?this._channelToCallbacks.set(t,o):this._channelToCallbacks.delete(t),o.length||t===s.default.LOCAL_CHANNEL||this._engine.unsubscribe(t)}}},{key:"_register",value:function(e,t){++u;var n=this._channelToCallbacks.get(e)||[];return n.push({id:u,callback:t}),this._channelToCallbacks.set(e,n),u}},{key:"send",value:function(e,t){var n=this;(e=(0,o.default)(e)?e:[e]).forEach((function(e){e===s.default.LOCAL_CHANNEL?n._trigger(e,t):n._engine.send(e,t)}))}},{key:"_trigger",value:function(e,t){(this._channelToCallbacks.get(e)||[]).forEach((function(n){n.callback(t,e)}))}},{key:"recover",value:function(){var e=this;this._isInRecoverMode||(this._isInRecoverMode=!0,this._recoverTimer&&clearInterval(this._recoverTimer),this._recoverTimer=setInterval((function(){e._engine.recover()}),5e3))}},{key:"_connectionSuccess",value:function(){if(this._recoverTimer&&(clearInterval(this._recoverTimer),this._recoverTimer=void 0),this._isInRecoverMode){this._isInRecoverMode=!1;for(var e=this._channelToCallbacks.entries(),t=e.next();!t.done;){var n=t.value[0];n!==s.default.LOCAL_CHANNEL&&this._engine.subscribe(n,this._trigger.bind(this,n)),t=e.next()}}}},{key:"disconnect",value:function(){this._engine.disconnect()}}]),e}();t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(2005)),s=a(n(2034)),l=a(n(13)),u=a(n(57)),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.onConnectionSuccess,a=void 0===n?function(){}:n,i=t.onError,o=void 0===i?function(){}:i;(0,r.default)(this,e),this._inited=!1,this._subscriptions={},this._shouldSubscribe=[],this._shouldSend=[],this._onConnectionSuccess=a,this._onError=o,this._initStompClient()}return(0,i.default)(e,null,[{key:"_getHeader",value:function(){var e=l.default.getCurrentSessionAccessToken();return{Authorization:e=e?"Bearer ".concat(e):void 0}}}]),(0,i.default)(e,[{key:"_initStompClient",value:function(){var t=this,n=new o.default(u.default.OPEN_SOCKET);this._stompClient=s.default.over(n),this._stompClient.connect(e._getHeader(),(function(){t._inited=!0,t._shouldSubscribe.length&&t._shouldSubscribe.forEach((function(e){var n=e.channel,a=e.callback;t.subscribe(n,a)})),t._shouldSubscribe=[],t._shouldSend.length&&t._shouldSend.forEach((function(e){var n=e.channel,a=e.data;t.send(n,a)})),t._shouldSend=[],t._onConnectionSuccess()}),(function(e){t._inited=!1,t._onError(e)}))}},{key:"recover",value:function(){this._shouldSubscribe=[],this._inited=!1,this.disconnect(),this._initStompClient()}},{key:"subscribe",value:function(t,n){this._inited?this._subscriptions[t]=this._stompClient.subscribe("/topic/".concat(t),(function(e){n(JSON.parse(JSON.parse(e.body).content))}),e._getHeader()):this._shouldSubscribe.push({channel:t,callback:n})}},{key:"unsubscribe",value:function(t){this._subscriptions[t]&&(this._subscriptions[t].unsubscribe(e._getHeader()),delete this._subscriptions[t])}},{key:"disconnect",value:function(){var t=this;this._stompClient.disconnect((function(){t._inited=!1}),e._getHeader())}},{key:"send",value:function(t,n){if(this._inited){var a={content:JSON.stringify(n)};this._stompClient.send("/MessagingService/".concat(t),JSON.stringify(a),e._getHeader())}else this._shouldSend.push({channel:t,data:n})}}]),e}();t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=r(n(18)),f=r(n(58)),p=r(n(28)),h=r(n(13));r(n(44));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var v=p.default.Instance,g=function(e){(0,s.default)(n,e);var t=m(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e,t,a,r=h.default.isCordova()||h.default.isFeatureEnabled("serviceWorker")&&"activated"===(null===(e=navigator)||void 0===e||null===(t=e.serviceWorker)||void 0===t||null===(a=t.controller)||void 0===a?void 0:a.state)?[{id:"ok",type:f.default.BUTTON_TYPES.PRIMARY,text:d.default.translate("t2kapp.error.offline.continue-button"),onClick:n._onClick}]:void 0;return c.default.createElement(f.default,{theme:f.default.THEMES.LIGHT,title:d.default.translate("t2kapp.error.offline.title"),content:d.default.translate("t2kapp.error.offline.content"),actions:r,overlayStyleClass:"error-modal"})}}],[{key:"_onClick",value:function(){v.dismissRecover()}}]),n}(c.Component);t.default=g},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=r(n(18)),f=r(n(58)),p=(r(n(2)),r(n(248)));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.isSSO?void 0:[{id:"ok",type:f.default.BUTTON_TYPES.PRIMARY,text:d.default.translate("t2kapp.error.session-expired.button"),onClick:n._onClick}];return c.default.createElement(f.default,{theme:f.default.THEMES.LIGHT,title:d.default.translate("t2kapp.error.session-expired.title"),content:d.default.translate("t2kapp.error.session-expired.content"),actions:e,overlayStyleClass:"error-modal"})}}],[{key:"_onClick",value:function(){p.default.logout()}}]),n}(c.Component);m.defaultProps={isSSO:!1};var v=m;t.default=v},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var i=r(n(43)),o=a(n(0)),s=r(n(2)),l=r(n(18)),u=r(n(58)),c=r(n(13)),d=r(n(1310)),f=r(n(101));function p(e){var t=e.logout,n=e.hideDialog,a=(0,o.useState)(!0),r=(0,i.default)(a,2),s=r[0],p=r[1],h=(0,o.useState)(!1),m=(0,i.default)(h,2),v=m[0],g=m[1],E=o.default.createElement("span",(0,f.default)(l.default.translate("terms-of-use.message"))),_=o.default.createElement(u.default,{theme:u.default.THEMES.LIGHT,title:l.default.translate("terms-of-use.title"),content:E,styleClass:"terms-of-use-dialog",actions:[{id:"cancel",type:u.default.BUTTON_TYPES.SECONDARY,text:l.default.translate("terms-of-use.decline"),onClick:function(){return d.default.auditTermsOfUse(!1).then((function(){p(!1),setTimeout((function(){g(!0)}),100)}))},keyCode:27},{id:"ok",type:u.default.BUTTON_TYPES.PRIMARY,text:l.default.translate("terms-of-use.accept"),onClick:function(){c.default.setTermsOfUseAccepted(),d.default.auditTermsOfUse(!0).then(n)},keyCode:13}]}),y=o.default.createElement(u.default,{theme:u.default.THEMES.LIGHT,title:l.default.translate("terms-of-use.decline-title"),content:l.default.translate("terms-of-use.decline-message"),actions:[{id:"ok",type:u.default.BUTTON_TYPES.PRIMARY,text:l.default.translate("terms-of-use.decline-ok"),onClick:t,keyCode:13}]});return s?_:v?y:null}p.propTypes={logout:s.default.func,hideDialog:s.default.bool},p.defaultProps={logout:function(){},hideDialog:function(){}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(28)),s=a(n(14)),l=o.default.Instance,u=function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,null,[{key:"auditDownloadFile",value:function(e,t,n){var a={action:"CI_DOWNLOAD",payload:{url:e,contentId:t,name:n},section:"CI",success:!0},r=s.default.getAppdata().backend_url;return l.post("".concat(r,"/PlayAppService/audit"),{},a)}},{key:"auditTermsOfUse",value:function(e){var t={action:"USER_".concat(e?"ACCEPTED":"DECLINED","_TERMS_OF_USE"),section:"ORGANIZATION",success:!0},n=s.default.getAppdata().backend_url;return l.post("".concat(n,"/PlayAppService/audit"),{},t)}}]),e}();t.default=u},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var i=r(n(43)),o=a(n(0)),s=(r(n(2)),r(n(18))),l=r(n(58)),u=r(n(13)),c=r(n(356));function d(e){var t=e.hideDialog,n=(0,o.useState)(!0),a=(0,i.default)(n,2),r=a[0],d=a[1],f=s.default.translate("news-popup.text-line1"),p=s.default.translate("news-popup.text-line2"),h=s.default.translate("news-popup.text-line3"),m=s.default.translate("news-popup.text-line4"),v=o.default.createElement("div",{className:"news-dialog-text"},f&&o.default.createElement("div",{className:"news-dialog-text-line1"},f),p&&o.default.createElement("div",{className:"news-dialog-text-line2"},p),h&&o.default.createElement("div",{className:"news-dialog-text-line3"},h),m&&o.default.createElement("div",{className:"news-dialog-text-line4"},m)),g=o.default.createElement("span",{className:"news-dialog-dont-show-again",onClick:function(){return d(!r)}},o.default.createElement(c.default,{checked:r}),o.default.createElement("span",null,s.default.translate("news-popup.dont-show-again")));return o.default.createElement(l.default,{theme:l.default.THEMES.LIGHT,styleClass:"news-dialog",title:s.default.translate("news-popup.title"),content:v,customActions:g,actions:[{id:"ok",type:l.default.BUTTON_TYPES.PRIMARY,text:s.default.translate("news-popup.button-text"),onClick:function(){r&&u.default.setNewsPopupDontShowAgain("hide-dashboard"),t()},keyCode:13}]})}d.defaultProps={hideDialog:function(){}}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._onClick=e._onClick.bind((0,s.default)(e)),e}return(0,o.default)(n,[{key:"render",value:function(){var e=this;return d.default.createElement("div",{id:this.props.id,"data-automation-id":this.props.dataAutomationId,className:this._getCheckBoxIconClass(),onClick:this._onClick,role:"checkbox","aria-checked":this.props.checked,tabIndex:"0",disabled:this.props.disabled,onKeyDown:function(t){return 13===t.keCode&&e._onClick()}})}},{key:"_onClick",value:function(){var e=this.props,t=e.id,n=e.disabled,a=e.onClick;n||a(t)}},{key:"_getCheckBoxIconClass",value:function(){var e=this.props,t=e.checked,n=e.disabled;return(0,f.default)("t2k-checkbox","t2k-checkbox__icon",{"t2k-checkbox__icon--checked":t},{"t2k-checkbox__icon--unchecked":!t},{"t2k-checkbox__icon--disabled":n})}}]),n}(d.Component);t.default=h,h.defaultProps={checked:!1,onClick:function(){},id:null,dataAutomationId:null,disabled:!1}},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var i=r(n(9)),o=r(n(43)),s=r(n(105)),l=r(n(238)),u=r(n(236)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(18)),p=r(n(57)),h=r(n(58)),m=r(n(53)),v=r(n(28)),g=r(n(13));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var _="user-last-name",y=m.default.LogManager,k=v.default.Instance;function S(e){var t=e.hideDialog,n=(0,c.useState)({}),a=(0,o.default)(n,2),r=a[0],m=a[1],v={},S=function(){var e,n=(e={},(0,u.default)(v,(function(t,n){t.value||(e[n]=f.default.translate("login.messages.required-field"))})),e);if((0,s.default)(n)){var a=v["user-first-name"].value.trim(),r=v[_].value.trim(),i=g.default.isGuest();k.put("".concat(p.default.PUT_UPDATE_USER_NAMES,"?firstName=").concat(a,"&lastName=").concat(r,"&isGuest=").concat(i)).then((function(){window.location.reload()})).catch((function(e){t(),y.error("echo",{message:"Failed to update user first and last names: ".concat(e&&e.message?e.message:JSON.stringify(e))})}))}else m(n)},T=function(e){if(!(0,s.default)(r)&&(0,l.default)(r,e)){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);delete t[e],m(t)}},b=function(e,t){13===(t.which||t.keyCode)&&S()},C=function(e){return(0,d.default)("username__input",{"username__input--error":(0,l.default)(r,e)})},I=function(e,t,n,a,r,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=function(e,t){t&&(v[e]=t)};return c.default.createElement("input",{className:C(e),key:e,id:"username__input-".concat(e),ref:function(t){s(e,t)},type:t,disabled:o,value:r,onKeyPress:function(e){return b(0,e)},onChange:function(){T(e)},placeholder:f.default.translate(n),pattern:i||void 0,title:f.default.translate(n),autoCapitalize:"off",autoFocus:a})},O=function(e){return(0,d.default)("username__input-message",{"username__input-message--error":(0,l.default)(r,e)})},A=c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"username__text"},f.default.translate("username-popup.text")),[I("user-first-name","text","username-popup.user-first-name.placeholder",!0),c.default.createElement("div",{key:"input-message-first-name",className:O("user-first-name")},r["user-first-name"]||"")],[I(_,"text","username-popup.user-last-name.placeholder"),c.default.createElement("div",{key:"input-message-last-name",className:O(_)},r[_]||"")]);return c.default.createElement(h.default,{theme:h.default.THEMES.LIGHT,styleClass:"username-dialog",title:f.default.translate("username-popup.title"),content:A,actions:[{id:"ok",type:h.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("username-popup.save"),onClick:S,keyCode:13}]})}S.defaultProps={hideDialog:function(){}}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.certificates,n=e.hideDialog,a=i.default.translate("confirm-certificates-popup.certificate-awarded"),c=i.default.translate("confirm-certificates-popup.valid-until"),d=function(e){return l.default.getDateStringByLocale(new Date(e),s.default.getLocale())},h=r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"confirm-certificates-dialog-text"},i.default.translate("confirm-certificates-popup.message")),r.default.createElement("ul",null,t.map((function(e){var t="".concat(a," ").concat(d(e.certificationDate));return e.expirationDate&&(t="".concat(t,", ").concat(c," ").concat(d(e.expirationDate))),r.default.createElement("li",{className:"confirm-certificates-dialog-certificate"},"".concat(e.name," (").concat(t,")"))}))));return r.default.createElement(o.default,{theme:o.default.THEMES.LIGHT,styleClass:"confirm-certificates-dialog",title:i.default.translate("confirm-certificates-popup.title"),content:h,actions:[{id:"ok",type:o.default.BUTTON_TYPES.PRIMARY,text:i.default.translate("confirm-certificates-popup.confirm-button-text"),onClick:function(){return e=t.map((function(e){return e.id})).join(","),void p.put(u.default.CONFIRM_MY_CERTIFICATES,void 0,void 0,{params:{certificateIds:e}}).then((function(){n()})).catch((function(e){n(),f.error("echo",{message:"Failed to confirm user certificates: ".concat(e&&e.message?e.message:JSON.stringify(e))})}));var e},keyCode:13}]})};var r=a(n(0)),i=(a(n(2)),a(n(18))),o=a(n(58)),s=a(n(13)),l=a(n(235)),u=a(n(57)),c=a(n(53)),d=a(n(28)),f=c.default.LogManager,p=d.default.Instance},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Stages=t.default=void 0;var r=a(n(21)),i=a(n(13));t.default=function(e){var t;switch(e){case r.default.STAGES.MANAGEMENT:t=Promise.all([n.e(7),n.e(14)]).then(n.t.bind(null,2166,7));break;case r.default.STAGES.CI_EDITOR:t=Promise.all([n.e(2),n.e(4),n.e(5),n.e(8),n.e(13)]).then(n.t.bind(null,2167,7));break;case r.default.STAGES.PLAYER:t=Promise.all([n.e(2),n.e(4),n.e(3),n.e(8),n.e(15)]).then(n.t.bind(null,2168,7));break;case r.default.STAGES.REPORTS:t=Promise.all([n.e(9),n.e(16)]).then(n.t.bind(null,2169,7));break;case r.default.STAGES.FUSE_EDITOR:t=Promise.all([n.e(2),n.e(5),n.e(6),n.e(22)]).then(n.t.bind(null,2170,7));break;case r.default.STAGES.BUZZ_EDITOR:t=Promise.all([n.e(6),n.e(11)]).then(n.t.bind(null,2171,7));break;case r.default.STAGES.STORE:t=Promise.all([n.e(9),n.e(36)]).then(n.t.bind(null,2172,7));break;case r.default.STAGES.CATALOG:t=Promise.all([n.e(7),n.e(12)]).then(n.t.bind(null,2173,7));break;case r.default.STAGES.LIBRARY:default:t=Promise.all([n.e(2),n.e(4),n.e(5),n.e(3),n.e(26)]).then(n.t.bind(null,2174,7))}return t};var o=[{id:r.default.STAGES.CI_EDITOR,roles:[r.default.ROLES.EDITOR],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}},{id:r.default.STAGES.PLAYER,roles:[r.default.ROLES.INSTRUCTOR,r.default.ROLES.LEARNER,r.default.ROLES.EDITOR,r.default.ROLES.REVIEWER],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}},{id:r.default.STAGES.CATALOG,roles:[r.default.ROLES.INSTRUCTOR,r.default.ROLES.LEARNER,r.default.ROLES.EDITOR,r.default.ROLES.REVIEWER],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}},{id:r.default.STAGES.REPORTS,roles:[r.default.ROLES.INSTRUCTOR,r.default.ROLES.LEARNER,r.default.ROLES.TRAINING_MANAGER],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}},{id:r.default.STAGES.LIBRARY,roles:[r.default.ROLES.INSTRUCTOR,r.default.ROLES.LEARNER,r.default.ROLES.EDITOR,r.default.ROLES.TRAINING_MANAGER],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}},{id:r.default.STAGES.BUZZ_EDITOR,roles:[r.default.ROLES.EDITOR],shouldLoad:function(){return!1}},{id:r.default.STAGES.FUSE_EDITOR,roles:[r.default.ROLES.EDITOR],shouldLoad:function(){return!1}},{id:r.default.STAGES.LESSON_EDITOR,roles:[r.default.ROLES.EDITOR],shouldLoad:function(){return!1}},{id:r.default.STAGES.STORE,roles:[r.default.ROLES.INSTRUCTOR,r.default.ROLES.LEARNER,r.default.ROLES.EDITOR,r.default.ROLES.TRAINING_MANAGER],shouldLoad:function(){return!!i.default.isFeatureEnabled("catalog")&&((i.default.isAnonymous()||i.default.userHasAssignedRole(this.roles))&&i.default.isOnline())}},{id:r.default.STAGES.MANAGEMENT,roles:[r.default.ROLES.TRAINING_MANAGER],shouldLoad:function(){return!i.default.isAnonymous()&&i.default.userHasAssignedRole(this.roles)&&i.default.isOnline()}}];t.Stages=o},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(3)),i=a(n(4)),o=/%WALKME_ID_PLACEHOLDER%/g,s=new(function(){function e(){(0,r.default)(this,e)}return(0,i.default)(e,[{key:"load",value:function(e){var t=e.environment,n=e.walkmeId,a=e.walkmeVariables;if(n){var r="test"===t,i=this._createScript(n,r),o=document.getElementsByTagName("head")[0];window.t2kWalkmeVariables=a,o.appendChild(i)}}},{key:"_createScript",value:function(e,t){var n=document.createElement("script");n.type="text/javascript";var a="";return a=t?"(function() {var walkme = document.createElement('script'); walkme.type = 'text/javascript'; walkme.async = true; walkme.src = 'https://cdn.walkme.com/users/%WALKME_ID_PLACEHOLDER%/test/walkme_%WALKME_ID_PLACEHOLDER%_https.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(walkme, s); window._walkmeConfig = {smartLoad:true}; })();":"(function() {var walkme = document.createElement('script'); walkme.type = 'text/javascript'; walkme.async = true; walkme.src = 'https://cdn.walkme.com/users/%WALKME_ID_PLACEHOLDER%/walkme_%WALKME_ID_PLACEHOLDER%_https.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(walkme, s); window._walkmeConfig = {smartLoad:true}; })();",n.text=a.replace(o,e),n}}]),e}());t.default=s},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(r.default.isFeatureEnabled("wixHelpWidget")){var e,t,n,a,i=null===(e=r.default.getAppdata())||void 0===e||null===(t=e.appConf)||void 0===t?void 0:t.wixHelpWidgetId,o=((null===(n=r.default.getAppdata())||void 0===n||null===(a=n.userAppState)||void 0===a?void 0:a.locale)||r.default.getLocale()).substring(0,2);window.AnswersWidget={onLoaded:function(e){window.AnswersWidget.queue.push(e)},queue:[]};var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://timetoknow.wixanswers.com/apps/widget/v1/timetoknow/".concat(i,"/").concat(o,"/embed.js");var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(s,l)}};var r=a(n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){var e=document.createElement("script");e.setAttribute("data-account","HsItDvGblK"),e.setAttribute("src","https://cdn.userway.org/widget.js"),(document.body||document.head).appendChild(e)}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(18)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.backToOnline,n=e.justWentOffline;return c.default.createElement("div",{className:"offline-indicator"},t?c.default.createElement("div",{className:"first online"},d.default.translate("offline-indicator.network-back.text")):null,n?c.default.createElement("div",{className:"first offline"},d.default.translate("offline-indicator.network-offline.text")):null,t?null:c.default.createElement("div",{className:"second"},d.default.translate("offline-indicator.network-offline.indicator")))}}]),n}(c.Component);p.defaultProps={backToOnline:!1,justWentOffline:!1};var h=p;t.default=h},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=r(n(2)),p=r(n(11)),h=r(n(13)),m=r(n(2050)),v=r(n(2095)),g=r(n(2097));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=E(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"renderToolbar",value:function(){var e=(0,p.default)("toolbar-wrapper",this.props.toolbarClass);return d.default.createElement("div",{className:e},d.default.createElement(g.default,(0,i.default)({allowCustomStyle:!this.props.toolbarClass&&!this.props.showHeader},this.props.toolbar,{onButtonClick:this.props.onButtonClick,enableToolbar:this.props.enable,shouldJustify:this.props.shouldJustify,appApi:this.props.appApi})))}},{key:"renderMobileHeader",value:function(){return d.default.createElement(v.default,{smallHeader:this.props.smallHeader||this.props.minimizeHeader,showHeader:this.props.showHeader},this.renderToolbar())}},{key:"renderPCHeader",value:function(){var e=this.props.showHeader?d.default.createElement(m.default,{onSearchItemClick:this.props.onSearchItemClick,tabs:this.props.tabs,activeTab:this.props.activeHeaderTab,appApi:this.props.appApi,enable:this.props.enable,onTabChange:this.props.onTabChange,smallHeader:this.props.smallHeader||this.props.minimizeHeader}):null,t=this.props.showToolbar?this.renderToolbar():null;return d.default.createElement(d.default.Fragment,null,e,d.default.createElement("div",{className:"toolbar-separator"}),d.default.createElement("div",{id:"toolbar-wrapper"},t,d.default.createElement("div",{className:"toolbar-bottom"}),d.default.createElement("div",{className:"toolbar-bottom-gradient"})))}},{key:"render",value:function(){return d.default.createElement("header",{id:"header-toolbar",className:"header-toolbar"},h.default.isMobile()&&this.props.showMobileHeader?this.renderMobileHeader():this.renderPCHeader())}}]),n}(d.Component),y=_;t.default=y,_.defaultProps={showHeader:!0,appApi:f.default.objectOf(f.default.func),enable:!0,activeHeaderTab:"library",smallHeader:!1,minimizeHeader:!1,onTabChange:function(){},tabs:[],showToolbar:!0,toolbarClass:"",onButtonClick:function(){},onSearchItemClick:function(){}}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(18)),p=r(n(490)),h=r(n(13)),m=r(n(21)),v=r(n(928)),g=n(384),E=r(n(1182)),_=r(n(929));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var k=function(e){(0,s.default)(n,e);var t=y(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).user=h.default.getUser(),a.showHelpButton=h.default.getAppdata().appConf.featureFlags.help,a}return(0,o.default)(n,[{key:"render",value:function(){var e,t=(0,d.default)("header-container",{"small-header":this.props.smallHeader,mobile:h.default.isMobile()}),n=this.user.isGuest&&!this.user.firstName?f.default.translate("header.welcome.guest.message"):this.user.firstName,a=n?"".concat(f.default.translate("header.welcome.message")," ").concat(n):f.default.translate("header.welcome.message-hi-there"),r=h.default.getCustomeHeaderBackgroundImage(),i=h.default.getAppdata();return c.default.createElement("div",{className:t,style:h.default.getCustomHeaderStyle("background")},c.default.createElement("div",{className:"header-container-image",style:r}),r?c.default.createElement("div",{className:"header-container-curtain"}):null,c.default.createElement(E.default,{logoUrl:h.default.getAppdata().appConf.logoUrl}),c.default.createElement("div",{className:"header-center"},!(null==i||null===(e=i.appConf)||void 0===e?void 0:e.hideWelcomeHeader)&&!h.default.isFeatureEnabled("learnerDashboard")&&c.default.createElement("h1",{className:"welcome-user"},a)),c.default.createElement("div",{className:"header-toolbar-buttons"},c.default.createElement("form",{className:"search-tool-form-wrapper"},c.default.createElement(p.default,{onSearchItemClick:this.props.onSearchItemClick})),this.renderiEchoToggleButton(),this.showHelpButton&&c.default.createElement(v.default,{store:g.store,appApi:this.props.appApi,component:this.props.activeTab}),c.default.createElement(_.default,{separator:this.showHelpButton,enable:this.props.enable,appApi:this.props.appApi})))}},{key:"renderiEchoToggleButton",value:function(){var e=this.props,t=e.activeTab,n=e.onTabChange;if(t===m.default.STAGES.STORE)return c.default.createElement("div",{className:"element__icon-wrapper"},c.default.createElement("button",{className:"element__button",onClick:function(){n({},m.default.STAGES.LIBRARY)}},f.default.translate("header.iecho")));var a=this.props.tabs.filter((function(e){return e===m.default.STAGES.STORE}));return a&&a.length?c.default.createElement("div",{className:"element__icon-wrapper"},c.default.createElement("button",{className:"element__button",onClick:function(){n({},m.default.STAGES.STORE)}},f.default.translate("header.iecho-store"))):null}}]),n}(c.Component);k.defaultProps={enable:!0,activeTab:"",smallHeader:!1,appApi:{},onTabChange:function(){},onSearchItemClick:function(){},tabs:[]};var S=k;t.default=S},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(2052));n(324);var i=r.default;t.default=i},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(214)).default;t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(21)),m=r(n(13)),v=r(n(154)),g=r(n(41)),E=r(n(36)),_=n(53),y=r(n(60)),k=r(n(1186)),S=r(n(951)),T=r(n(491));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var C=function(e){(0,u.default)(n,e);var t=b(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).appData=m.default.getAppdata(),a.state={showAccountPreferences:!1,showManageGroupsDialog:!1,groups:[],loading:!0},a._renderAccountSettingsSections=a._renderAccountSettingsSections.bind((0,l.default)(a)),a._getUserSettingsSections=a._getUserSettingsSections.bind((0,l.default)(a)),a.toggleManageGroupsDialog=a.toggleManageGroupsDialog.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;m.default.isAnonymous()||m.default.getUserRoleBySite((function(t){var n=m.default.isTrainingManager(t)||m.default.isAdministrator(),a=m.default.isManager(t);a&&e.getGroups(),e.setState({showAccountPreferences:n,loading:a})}))}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.content;return this.state.loading?f.default.createElement(y.default,{position:y.default.Positions.FIXED}):f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"user-settings-pane"},!this.props.hideTitle&&f.default.createElement("div",{className:"user-settings-pane__title"},t||p.default.translate("user-menu.settings.title")),f.default.createElement("div",{className:"user-settings-pane__content"},a||this._renderAccountSettingsSections(),f.default.createElement("div",{className:"user-settings-pane__buttons"},n._renderGoToAdmin()))),this.renderManageGroupsDialog())}},{key:"_renderAccountSettingsSections",value:function(){return this._getUserSettingsSections().map((function(e){return f.default.createElement(k.default,{key:e.key,sectionTitle:e.title,onClick:e.onClick},e.content)}))}},{key:"_getUserSettingsSections",value:function(){var e=this,t=this.state,n=t.showAccountPreferences,a=t.groups,r=[];return a&&a.length>0&&r.push({key:"group-management",ref:"groupManagement",title:p.default.translate("user-menu.settings.group-management-title"),content:this.renderGroupsList(),onClick:function(){1===a.length&&e.toggleManageGroupsDialog(!0,a[0].id)}}),n&&(r.push({key:"tags",ref:"tagsSection",title:p.default.translate("user-menu.settings.tags-title"),content:"",onClick:function(){g.default.sendEvent(g.default.TITLES.SELECT_FROM_ACCOUNT_SETTINGS,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.OPTION,"tag_management")),v.default.setStage(h.default.STAGES.MANAGEMENT,void 0,"tags")}}),r.push({key:"categories",ref:"categoriesSection",title:p.default.translate("user-menu.settings.categories-title"),content:"",onClick:function(){g.default.sendEvent(g.default.TITLES.SELECT_FROM_ACCOUNT_SETTINGS,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.OPTION,"categories_management")),v.default.setStage(h.default.STAGES.MANAGEMENT,void 0,"categories")}}),m.default.isFeatureEnabled("courseCatalog")&&m.default.isTrainingManager()&&r.push({key:"catalogMgmt",ref:"catalogManagement",title:p.default.translate("course-catalog.management.header"),content:"",onClick:function(){g.default.sendEvent(g.default.TITLES.SELECT_FROM_ACCOUNT_SETTINGS,g.default.COMPONENTS.USER_MENU,(0,i.default)({},g.default.PARAMS.OPTION,"catalog_management")),v.default.setStage(h.default.STAGES.CATALOG,void 0,"management")}})),r}},{key:"getGroups",value:function(){var e=this;T.default.getGroups().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.setState({groups:t,loading:!1})})).catch((function(){_.LogManager.error({message:"Unable to get groups for manager"})}))}},{key:"renderGroupsList",value:function(){var e,t=this,n=this.state.groups;return(null===(e=this.state.groups)||void 0===e?void 0:e.length)<2?null:f.default.createElement("div",{className:"user-settings-pane__groups-list user-settings-pane__section-content"},f.default.createElement("div",{className:"user-settings-pane__groups-list__header"},p.default.translate("user-menu.settings.group-management-header")),n.map((function(e){return f.default.createElement("div",{className:"user-settings-pane__groups-list__item",onClick:function(){return t.toggleManageGroupsDialog(!0,e.id,e.name)}},e.name)})))}},{key:"toggleManageGroupsDialog",value:function(e,t,n){this.setState({showManageGroupsDialog:e,groupId:t,groupName:n})}},{key:"renderManageGroupsDialog",value:function(){var e=this,t=this.state,n=t.showManageGroupsDialog,a=t.groupId,r=t.groups,i=t.groupName;return n&&a?f.default.createElement(S.default,{entityType:h.default.ROLE_AND_PERMISSION_CONTEXT.GROUP,onCancel:function(){e.toggleManageGroupsDialog(!1)},showNotification:!1,entityId:a,entityName:r.length>1?i:r[0].name}):null}}],[{key:"_handleGoToAdmin",value:function(){var e;e=m.default.isFeatureEnabled("adminTwoFactorAuthentication")?"".concat(window.location.origin,"/admin/login.html?site=").concat(m.default.getSite(),"&access_token=").concat(m.default.getCurrentSessionAccessToken(),"&2fa=true"):"".concat(window.location.origin,"/admin/index.html?site=").concat(m.default.getSite(),"&access_token=").concat(m.default.getCurrentSessionAccessToken()),window.open(e,"_blank")}},{key:"_renderGoToAdmin",value:function(){return m.default.isAdministrator()||m.default.isSubAccountAdmin()?f.default.createElement(E.default,{text:p.default.translate("user-menu.settings.go-to-admin"),onClick:n._handleGoToAdmin}):null}}]),n}(f.Component);t.default=C,C.defaultProps={title:"",content:null,hideTitle:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1311);n(1312);var r=a.TabsDialogComponent;t.default=r},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{fillRule:"evenodd"},a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=r,r.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.permissionType=void 0;var a={CREATE_MASTER_CHANNEL_INSTANCE:"SITE:CREATE_MASTER_CHANNEL_INSTANCE",CHANNEL_FILTER:"CHANNEL:FILTER",CHANNEL_ADD:"SITE:ADD_CHANNEL",CHANNEL_DELETE:"CHANNEL:DELETE",CHANNEL_DUPLICATE:"CHANNEL:DUPLICATE",CHANNEL_NOT_ORIGINAL_CHANNEL_CONTENT_MANAGE:"CHANNEL:NOT_ORIGINAL_CHANNEL_CONTENT:MANAGE",CAN_CREATE_NEW:"CHANNEL:CAN_CREATE_NEW",ASSIGN_CONTENT:"CHANNEL:ASSIGN_CONTENT",CHANNEL_SCHEDULING:"CHANNEL:CHANNEL_SCHEDULING",CHANNEL_INVITE_LEARNERS:"CHANNEL:INVITE_LEARNERS",CHANGE_EDITOR_PERMISSION:"ALLCONTENT:CHANGE_EDITOR_PERMISSION",CHANNEL_ASSIGN_USERS_FROM_ACCOUNT:"CHANNEL:ASSIGN_USERS_FROM_ACCOUNT",ASSIGN_USERS_FROM_MY_CHANNELS:"CHANNEL:ASSIGN_USERS_FROM_MY_CHANNELS",CHANNEL_MANAGE_USERS:"CHANNEL:MANAGE_USERS",CHANNEL_ONCLICK:"CHANNEL:ONCLICK",CHANNEL_REPORTS:"CHANNEL:REPORTS",CHANNEL_SETTINGS:"CHANNEL:SETTINGS",CHANNEL_SHOW:"CHANNEL:SHOW",LESSON_CREATE:"CHANNEL:LESSON:CREATE",LESSON_DELETE:"CHANNEL:LESSON:DELETE",LESSON_DUPLICATE:"CHANNEL:LESSON:DUPLICATE",LESSON_EDIT:"CHANNEL:LESSON:EDIT",LESSON_EXPORT:"CHANNEL:LESSON:EXPORT",LESSON_LOCK:"CHANNEL:LESSON:LOCK",LESSON_ONCLICK:"CHANNEL:LESSON:ONCLICK",LESSON_PLAY:"CHANNEL:LESSON:PLAY",LESSON_PREVIEW:"CHANNEL:LESSON:PREVIEW",LESSON_PUBLISH:"CHANNEL:LESSON:PUBLISH",LESSON_PUBLISH_LINK:"CHANNEL:LESSON:PUBLISH_LINK",LESSON_REMOVE:"CHANNEL:LESSON:REMOVE",LESSON_REPORTS:"CHANNEL:LESSON:REPORTS",LESSON_SHARE:"CHANNEL:LESSON:SHARE",LESSON_SETTINGS:"CHANNEL:LESSON:SETTINGS",LESSON_SHOW:"CHANNEL:LESSON:SHOW",LESSON_SHOW_PROGRESS:"CHANNEL:LESSON:SHOW_PROGRESS",LESSON_SHOW_PUBLISH_INFO:"CHANNEL:LESSON:SHOW_PUBLISH_INFO",LESSON_UNLOCK:"CHANNEL:LESSON:UNLOCK",LESSON_UNPUBLISH:"CHANNEL:LESSON:UNPUBLISH",LESSON_ASSIGNMENT_CREATE:"CHANNEL:LESSON:ASSIGNMENT_CREATE",LESSON_ASSIGNMENT_EDIT:"CHANNEL:LESSON:ASSIGNMENT_EDIT",LESSON_ASSIGNMENT_DELETE:"CHANNEL:LESSON:ASSIGNMENT_DELETE",BUZZ_CREATE:"CHANNEL:BUZZ:CREATE",BUZZ_DELETE:"CHANNEL:BUZZ:DELETE",BUZZ_DUPLICATE:"CHANNEL:BUZZ:DUPLICATE",BUZZ_EDIT:"CHANNEL:BUZZ:EDIT",BUZZ_EXPORT:"CHANNEL:BUZZ:EXPORT",BUZZ_LOCK:"CHANNEL:BUZZ:LOCK",BUZZ_ONCLICK:"CHANNEL:BUZZ:ONCLICK",BUZZ_PLAY:"CHANNEL:BUZZ:PLAY",BUZZ_PREVIEW:"CHANNEL:BUZZ:PREVIEW",BUZZ_PUBLISH:"CHANNEL:BUZZ:PUBLISH",BUZZ_PUBLISH_LINK:"CHANNEL:BUZZ:PUBLISH_LINK",BUZZ_REMOVE:"CHANNEL:BUZZ:REMOVE",BUZZ_REPORTS:"CHANNEL:BUZZ:REPORTS",BUZZ_SHARE:"CHANNEL:BUZZ:SHARE",BUZZ_SETTINGS:"CHANNEL:BUZZ:SETTINGS",BUZZ_SHOW:"CHANNEL:BUZZ:SHOW",BUZZ_SHOW_PROGRESS:"CHANNEL:BUZZ:SHOW_PROGRESS",BUZZ_SHOW_PUBLISH_INFO:"CHANNEL:BUZZ:SHOW_PUBLISH_INFO",BUZZ_UNLOCK:"CHANNEL:BUZZ:UNLOCK",BUZZ_UNPUBLISH:"CHANNEL:BUZZ:UNPUBLISH",BUZZ_ASSIGNMENT_CREATE:"CHANNEL:BUZZ:ASSIGNMENT_CREATE",BUZZ_ASSIGNMENT_EDIT:"CHANNEL:BUZZ:ASSIGNMENT_EDIT",BUZZ_ASSIGNMENT_DELETE:"CHANNEL:BUZZ:ASSIGNMENT_DELETE",FUSE_CREATE:"CHANNEL:FUSE:CREATE",FUSE_DELETE:"CHANNEL:FUSE:DELETE",FUSE_DUPLICATE:"CHANNEL:FUSE:DUPLICATE",FUSE_EDIT:"CHANNEL:FUSE:EDIT",FUSE_EXPORT:"CHANNEL:FUSE:EXPORT",FUSE_LOCK:"CHANNEL:FUSE:LOCK",FUSE_ONCLICK:"CHANNEL:FUSE:ONCLICK",FUSE_PLAY:"CHANNEL:FUSE:PLAY",FUSE_PREVIEW:"CHANNEL:FUSE:PREVIEW",FUSE_PUBLISH:"CHANNEL:FUSE:PUBLISH",FUSE_PUBLISH_LINK:"CHANNEL:FUSE:PUBLISH_LINK",FUSE_REMOVE:"CHANNEL:FUSE:REMOVE",FUSE_REPORTS:"CHANNEL:FUSE:REPORTS",FUSE_SHARE:"CHANNEL:FUSE:SHARE",FUSE_SETTINGS:"CHANNEL:FUSE:SETTINGS",FUSE_SHOW:"CHANNEL:FUSE:SHOW",FUSE_SHOW_PROGRESS:"CHANNEL:FUSE:SHOW_PROGRESS",FUSE_SHOW_PUBLISH_INFO:"CHANNEL:FUSE:SHOW_PUBLISH_INFO",FUSE_UNLOCK:"CHANNEL:FUSE:UNLOCK",FUSE_UNPUBLISH:"CHANNEL:FUSE:UNPUBLISH",FUSE_ASSIGNMENT_CREATE:"CHANNEL:FUSE:ASSIGNMENT_CREATE",FUSE_ASSIGNMENT_EDIT:"CHANNEL:FUSE:ASSIGNMENT_EDIT",FUSE_ASSIGNMENT_DELETE:"CHANNEL:FUSE:ASSIGNMENT_DELETE",ASSESSMENT_CREATE:"CHANNEL:ASSESSMENT:CREATE",ASSESSMENT_DELETE:"CHANNEL:ASSESSMENT:DELETE",ASSESSMENT_DUPLICATE:"CHANNEL:ASSESSMENT:DUPLICATE",ASSESSMENT_EDIT:"CHANNEL:ASSESSMENT:EDIT",ASSESSMENT_EXPORT:"CHANNEL:ASSESSMENT:EXPORT",ASSESSMENT_LOCK:"CHANNEL:ASSESSMENT:LOCK",ASSESSMENT_ONCLICK:"CHANNEL:ASSESSMENT:ONCLICK",ASSESSMENT_PLAY:"CHANNEL:ASSESSMENT:PLAY",ASSESSMENT_PREVIEW:"CHANNEL:ASSESSMENT:PREVIEW",ASSESSMENT_PUBLISH:"CHANNEL:ASSESSMENT:PUBLISH",ASSESSMENT_PUBLISH_LINK:"CHANNEL:ASSESSMENT:PUBLISH_LINK",ASSESSMENT_REMOVE:"CHANNEL:ASSESSMENT:REMOVE",ASSESSMENT_REPORTS:"CHANNEL:ASSESSMENT:REPORTS",ASSESSMENT_SHARE:"CHANNEL:ASSESSMENT:SHARE",ASSESSMENT_SETTINGS:"CHANNEL:ASSESSMENT:SETTINGS",ASSESSMENT_SHOW:"CHANNEL:ASSESSMENT:SHOW",ASSESSMENT_SHOW_PROGRESS:"CHANNEL:ASSESSMENT:SHOW_PROGRESS",ASSESSMENT_SHOW_PUBLISH_INFO:"CHANNEL:ASSESSMENT:SHOW_PUBLISH_INFO",ASSESSMENT_UNLOCK:"CHANNEL:ASSESSMENT:UNLOCK",ASSESSMENT_UNPUBLISH:"CHANNEL:ASSESSMENT:UNPUBLISH",ASSESSMENT_ASSIGNMENT_CREATE:"CHANNEL:ASSESSMENT:ASSIGNMENT_CREATE",ASSESSMENT_ASSIGNMENT_EDIT:"CHANNEL:ASSESSMENT:ASSIGNMENT_EDIT",ASSESSMENT_ASSIGNMENT_DELETE:"CHANNEL:ASSESSMENT:ASSIGNMENT_DELETE",PATH_CREATE:"CHANNEL:PATH:CREATE",PATH_DELETE:"CHANNEL:PATH:DELETE",PATH_EDIT:"CHANNEL:PATH:EDIT",PATH_ONCLICK:"CHANNEL:PATH:ONCLICK",PATH_SHOW_PROGRESS:"CHANNEL:PATH:SHOW_PROGRESS",PATH_REPORTS:"CHANNEL:PATH:REPORTS",GROUP_INVITE_LEARNERS:"GROUP:INVITE_LEARNERS",GROUP_ASSIGN_USERS_FROM_ACCOUNT:"GROUP:ASSIGN_USERS_FROM_ACCOUNT",GROUP_MANAGE_USERS:"GROUP:MANAGE_USERS",CONTENT_ITEM_EDIT:"CONTENT_ITEM:EDIT",STRUCTURE_CREATE:"CHANNEL:STRUCTURE:CREATE",STRUCTURE_EDIT:"CHANNEL:STRUCTURE:EDIT",STRUCTURE_DELETE:"CHANNEL:STRUCTURE:DELETE",STRUCTURE_ONCLICK:"CHANNEL:STRUCTURE:ONCLICK",STRUCTURE_SETTINGS:"CHANNEL:STRUCTURE:SETTINGS",UCONTENT_CREATE:"CHANNEL:UCONTENT:CREATE",UCONTENT_DELETE:"CHANNEL:UCONTENT:DELETE",UCONTENT_DUPLICATE:"CHANNEL:UCONTENT:DUPLICATE",UCONTENT_EDIT:"CHANNEL:UCONTENT:EDIT",UCONTENT_EXPORT:"CHANNEL:UCONTENT:EXPORT",UCONTENT_LOCK:"CHANNEL:UCONTENT:LOCK",UCONTENT_ONCLICK:"CHANNEL:UCONTENT:ONCLICK",UCONTENT_PLAY:"CHANNEL:UCONTENT:PLAY",UCONTENT_PREVIEW:"CHANNEL:UCONTENT:PREVIEW",UCONTENT_PUBLISH:"CHANNEL:UCONTENT:PUBLISH",UCONTENT_PUBLISH_LINK:"CHANNEL:UCONTENT:PUBLISH_LINK",UCONTENT_REMOVE:"CHANNEL:UCONTENT:REMOVE",UCONTENT_REPORTS:"CHANNEL:UCONTENT:REPORTS",UCONTENT_SHARE:"CHANNEL:UCONTENT:SHARE",UCONTENT_SETTINGS:"CHANNEL:UCONTENT:SETTINGS",UCONTENT_SHOW:"CHANNEL:UCONTENT:SHOW",UCONTENT_SHOW_PROGRESS:"CHANNEL:UCONTENT:SHOW_PROGRESS",UCONTENT_SHOW_PUBLISH_INFO:"CHANNEL:UCONTENT:SHOW_PUBLISH_INFO",UCONTENT_UNLOCK:"CHANNEL:UCONTENT:UNLOCK",UCONTENT_UNPUBLISH:"CHANNEL:UCONTENT:UNPUBLISH",COURSE_TEMPLATE_ONCLICK:"CHANNEL:COURSE_TEMPLATE:ONCLICK",COURSE_TEMPLATE_DELETE:"CHANNEL:COURSE_TEMPLATE:DELETE",COURSE_TEMPLATE_SETTINGS:"CHANNEL:COURSE_TEMPLATE:SETTINGS",COURSE_TEMPLATE_PUBLISH:"CHANNEL:COURSE_TEMPLATE:PUBLISH",COURSE_TEMPLATE_UNPUBLISH:"CHANNEL:COURSE_TEMPLATE:UNPUBLISH",COURSE_TEMPLATE_SHOW_PUBLISH_INFO:"CHANNEL:COURSE_TEMPLATE:SHOW_PUBLISH_INFO",OFF_PLATFORM_EVENT_ONCLICK:"CHANNEL:OFF_PLATFORM_EVENT:ONCLICK",OFF_PLATFORM_EVENT_EDIT:"CHANNEL:OFF_PLATFORM_EVENT:EDIT",OFF_PLATFORM_EVENT_SHOW_PUBLISH_INFO:"CHANNEL:OFF_PLATFORM_EVENT:SHOW_PUBLISH_INFO",OFF_PLATFORM_EVENT_PUBLISH:"CHANNEL:OFF_PLATFORM_EVENT:PUBLISH",OFF_PLATFORM_EVENT_UNPUBLISH:"CHANNEL:OFF_PLATFORM_EVENT:UNPUBLISH",OFF_PLATFORM_EVENT_REPORTS:"CHANNEL:OFF_PLATFORM_EVENT:REPORTS",OFF_PLATFORM_EVENT_PREVIEW:"CHANNEL:OFF_PLATFORM_EVENT:PREVIEW"};t.permissionType=a;var r=a;t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(43)),o=r(n(40)),s=r(n(23)),l=r(n(3)),u=r(n(12)),c=r(n(4)),d=r(n(6)),f=r(n(8)),p=r(n(7)),h=a(n(0)),m=(r(n(2)),r(n(18))),v=r(n(21)),g=n(74),E=r(n(13)),_=r(n(237)),y=r(n(36)),k=r(n(2058)),S=r(n(334)),T=r(n(491)),b=r(n(600)),C=n(1188),I=r(n(1315));function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var A=function(e){(0,d.default)(n,e);var t=O(n);function n(e){var a,r;(0,l.default)(this,n),(r=t.call(this,e))._handleSearchChange=r._handleSearchChange.bind((0,u.default)(r)),r._toggleGroup=r._toggleGroup.bind((0,u.default)(r)),r._removeMember=r._removeMember.bind((0,u.default)(r)),r.state={members:null,totalUsers:0,activeUsers:0,showManageEntitiesDialog:!1};var i=E.default.getAppdata();return r.isSelfService=null==i||null===(a=i.accountDetails)||void 0===a?void 0:a.isSelfService,r.hasInvite=r.props.hasInviteTab,r.isGroupManagement=e.entityType===v.default.ROLE_AND_PERMISSION_CONTEXT.GROUP,r.api=r.isGroupManagement?T.default:S.default,r.inviteByIdEnabled=r.isGroupManagement&&E.default.isFeatureEnabled("manageTeamInviteById"),r.profilesEnabled=r.isGroupManagement,r}return(0,c.default)(n,null,[{key:"renderEmptySearchResults",value:function(){return h.default.createElement("div",{className:"manage-learners__content manage-learners__content--empty-search"},h.default.createElement("span",{className:"manage-learners__content--empty-search--text"},m.default.translate("modals.manage_learners.tabs.manage.empty-search-text")))}}]),(0,c.default)(n,[{key:"componentDidMount",value:function(){this._getMembers(this.props.entityId)}},{key:"render",value:function(){if(!this.state.members)return null;var e=!this.state.members.length;return h.default.createElement("div",{className:"manage-learners"},h.default.createElement("div",{className:"manage-learners__header"},this._renderTitle(e),this._renderSearchBox(),this._renderManageEntitiesButton()),e?this._renderEmptyState():this.isGroupManagement&&this.state.filteredMembers.length<1?n.renderEmptySearchResults():this._renderContent(),this._renderManageEntitiesDialog(),this._renderProfilesOnlyMsg())}},{key:"_renderProfilesOnlyMsg",value:function(){var e;return(null===(e=this.state.selectedProfiles)||void 0===e?void 0:e.length)&&!this.state.members.find((function(e){return e.type===C.CHANNEL_MEMBER_TYPE.GROUP}))?h.default.createElement("div",{className:"manage-learners__profiles-only"},h.default.createElement(g.UsersIcon,null),h.default.createElement("span",{className:"manage-learners__profiles-only__text"},this.props.channelType===v.default.CHANNEL_TYPE.STREAM?m.default.translate("modals.manage_learners.tabs.profile-only.text-stream"):m.default.translate("modals.manage_learners.tabs.profile-only.text-course"))):null}},{key:"_renderManageEntitiesButton",value:function(){var e=this;return this.props.showAssignButton?h.default.createElement(y.default,{styleClass:"manage-learners__button",text:m.default.translate("modals.manage_members.tabs.manage.manage-entities"),onClick:function(){e.setState({showManageEntitiesDialog:!0})}}):null}},{key:"_renderManageEntitiesDialog",value:function(){var e=this;if(!this.state.showManageEntitiesDialog)return null;var t=this.props,n=t.channelType,a=t.entityId,r=t.channelProperties;return h.default.createElement(I.default,{channelId:a,close:function(){e.setState({showManageEntitiesDialog:!1})},onSaved:function(){e._getMembers(a)},channelType:n,channelProperties:r})}},{key:"_renderTitle",value:function(e){var t;return t=this.props.channelType===v.default.CHANNEL_TYPE.STREAM||this.isGroupManagement?e?"modals.manage_members.tabs.manage.invited-members":"modals.manage_members.tabs.manage.joined-members":e?"modals.manage_learners.tabs.manage.invited-learners":"modals.manage_learners.tabs.manage.joined-learners",h.default.createElement("div",{className:"manage-learners__title"},h.default.createElement(g.ParticipantsIcon,null),h.default.createElement("span",{className:"manage-learners__title--count"},e&&h.default.createElement("span",{className:"manage-learners__title--count-joined"},0),!e&&h.default.createElement("span",{className:"manage-learners__title--count-joined"},this.state.activeUsers),!e&&h.default.createElement("span",{className:"manage-learners__title--count-all"},"/".concat(this.state.totalUsers))),h.default.createElement("span",{className:"manage-learners__title--text"},m.default.translate(t)))}},{key:"_iterateMembersTree",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rootLevel",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!1;return t.every((function(t){var o="".concat(a,":").concat(t.memberId);switch(e.isGroupManagement&&n(t,!1,o,r),t.type){case C.CHANNEL_MEMBER_TYPE.USER:n(t,!1,o,r);break;case C.CHANNEL_MEMBER_TYPE.GROUP:var s=t.expanded,l=t.children;!(i=n(t,!0,o,r))&&s&&l&&l.length&&(i=e._iterateMembersTree(t.children,n,o,r+1))}return!i})),i}},{key:"_renderEmptyState",value:function(){var e=this,t=this.props.channelType,n=this.isGroupManagement||t===v.default.CHANNEL_TYPE.STREAM?"modals.manage_members.tabs.manage.empty-state-link":"modals.manage_learners.tabs.manage.empty-state-link";return h.default.createElement("div",{className:"manage-learners__content manage-learners__content--empty-state"},h.default.createElement("span",{className:"manage-learners__content--empty-state-image"}),h.default.createElement("span",{className:"manage-learners__content--empty-state-text"},m.default.translate("modals.manage_learners.tabs.manage.empty-state-text")),h.default.createElement("span",{className:"manage-learners__content--empty-state-link",onClick:function(){e.props.goToInviteTab()||e.setState({showManageEntitiesDialog:!0})}},m.default.translate(n)))}},{key:"_renderContent",value:function(){return h.default.createElement("div",{className:"manage-learners__content"},h.default.createElement("div",{className:"manage-learners__table-title"},h.default.createElement("div",{className:"manage-learners__table-title--username"},m.default.translate("modals.manage_members.tabs.manage.username")),this.inviteByIdEnabled&&h.default.createElement("div",{className:"manage-learners__table-title--email"},m.default.translate("modals.manage_members.tabs.manage.email")),h.default.createElement("div",{className:"manage-learners__table-title--nickname"},m.default.translate("modals.manage_members.tabs.manage.name")),this.profilesEnabled&&this.state.accountProfiles.length>0&&h.default.createElement("div",{className:"manage-learners__table-title--profile"},m.default.translate("modals.manage_members.tabs.manage.profile")),this.hasInvite&&h.default.createElement("div",{className:"manage-learners__table-title--status"},m.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_STATUS_FIELD_TITLE")),h.default.createElement("div",{className:"manage-learners__table-title--action"},m.default.translate("modals.manage_learners.tabs.manage.actions"))),h.default.createElement("div",{className:"manage-learners__table-content scrollable"},this._renderMembersFields()))}},{key:"_renderMembersFields",value:function(){var e=this,t=this.isGroupManagement?this.state.filteredMembers:this.state.members;if(!t.length)return[];var n=[],a=this.props,r=a.showNotification,i=a.permissionToInvite,o=a.entityId;return this._iterateMembersTree(t,(function(t,a,l,u){var c={},d={};return a?c={toggleGroup:function(){return e._toggleGroup(o,t,l)},groupLevel:t.levelIndex,expanded:t.expanded,selectedProfiles:e.state.selectedProfiles}:d={isGuestUser:t.isGuest,status:e.hasInvite?t.status:"",roles:t.roles,email:t.email,memberNickname:t.nickname,memberProfileIds:t.profileIds,accountProfiles:e.state.accountProfiles},n.push(h.default.createElement(k.default,(0,s.default)({key:"member-status-field-".concat(l),styleClass:"nested-level-".concat(u),instructorPermission:t.instructorPermission,memberId:t.memberId,memberName:a?t.groupName:t.username,memberType:t.type,entityId:e.props.entityId,entityType:e.props.entityType,parentId:t.parentId,removeMember:e._removeMember,showNotification:r,permissionToInvite:i,showMessage:e.props.showMessage,hideMessage:e.props.hideMessage,userStatus:t.status,inviteByIdEnabled:e.inviteByIdEnabled,profilesEnabled:e.profilesEnabled},d,c))),!1})),n}},{key:"_renderSearchBox",value:function(){return this.isGroupManagement?h.default.createElement("div",{className:"manage-learners__search"},h.default.createElement(_.default,{searchPlaceholder:"Search",minSearchLength:1,searchChanged:this._handleSearchChange,disabled:this.state.members.length<1,showSearchIcon:!0,focusInputOnMount:!1})):null}},{key:"_handleSearchChange",value:function(e){var t=this._filterMembersBySearchText(e);this.setState({filteredMembers:t})}},{key:"_filterMembersBySearchText",value:function(e){return this.state.members.filter((function(t){return t.username.includes(e)||t.nickname.includes(e)}))}},{key:"_toggleGroup",value:function(e,t,n){t.expanded?this._collapseRecursive(t.memberId,n):t.children?this._expandSelectedGroup(t.memberId,n):this._getMembers(e,t.memberId,n)}},{key:"_collapseRecursive",value:function(e,t){var n=this._cloneMembers();this._iterateMembersTree(n,(function(e,n,a){if(n&&(t===a||a.startsWith(t))){if(!e.expanded)return!0;e.expanded=!1}return!1})),this.setState({members:n})}},{key:"_expandSelectedGroup",value:function(e,t,n){var a=this._cloneMembers();this._iterateMembersTree(a,(function(e,a,r){return!(!a||t!==r)&&(e.expanded=!0,e.children||(e.children=n||[]),!0)})),this.setState({members:a})}},{key:"_getMembers",value:function(e,t,n){var a=this;return Promise.all([this.api.getInvitedMembers(e,t)].concat((0,o.default)(this.profilesEnabled?[this.api.getAccountProfiles()]:[Promise.resolve()]))).then((function(e){var r=(0,i.default)(e,2),o=r[0],s=void 0===o?{}:o,l=r[1];if(t)a._expandSelectedGroup(t,n,s.invitedUserStatusList||[]);else{var u=s.invitedUserStatusList||[];a.setState({activeUsers:s.activeUsers||0,totalUsers:s.totalUsers||0,members:u,filteredMembers:u,accountProfiles:l,selectedProfiles:s.profiles})}})).catch((function(){b.default.error({message:"Unable to get members status"})}))}},{key:"_removeMember",value:function(e,t){var n=this;t=this.isGroupManagement?t:[t],this.api.removeMember(e,t).then((function(){var a=n.props.entityType;b.default.log({message:"".concat(t," has removed from ").concat(a,": ").concat(e)}),n._getMembers(n.props.entityId)})).catch((function(n){b.default.error({message:"".concat(JSON.stringify(n)," - ").concat(t," fail to remove from channel: ").concat(e)})}))}},{key:"_cloneMembers",value:function(){return JSON.parse(JSON.stringify(this.state.members))}}]),n}(h.Component);t.default=A},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=r(n(18)),h=r(n(202)),m=r(n(21)),v=n(74),g=r(n(969)),E=(r(n(2)),r(n(11))),_=r(n(1233)),y=r(n(334)),k=r(n(491)),S=r(n(602)),T=r(n(600)),b=r(n(2066)),C=n(1188),I=n(931);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var A="CHANGE_ROLE",N="RESEND_INVITE",w="RESET_PASSWORD",R="REMOVE",P="CHANGE_STATUS",M=function(e){(0,u.default)(n,e);var t=O(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._renderConfirmRemoveMessage=a._renderConfirmRemoveMessage.bind((0,l.default)(a)),a._onMouseEnter=a._onMouseEnter.bind((0,l.default)(a)),a._onMouseLeave=a._onMouseLeave.bind((0,l.default)(a)),a._onMenuToggle=a._onMenuToggle.bind((0,l.default)(a)),a._onFilteredIconMouseEnter=a._onFilteredIconMouseEnter.bind((0,l.default)(a)),a._onFilteredIconMouseLeave=a._onFilteredIconMouseLeave.bind((0,l.default)(a)),a._changeRole=a._changeRole.bind((0,l.default)(a)),a._changeStatus=a._changeStatus.bind((0,l.default)(a)),a._initiateLearnerPasswordReset=a._initiateLearnerPasswordReset.bind((0,l.default)(a)),a._resendInvite=a._resendInvite.bind((0,l.default)(a)),a._onUserProfilesChange=a._onUserProfilesChange.bind((0,l.default)(a)),a.isGroupsManagement=e.entityType===m.default.ROLE_AND_PERMISSION_CONTEXT.GROUP,a.api=a.isGroupsManagement?k.default:y.default,a.state={highlight:!1,showTooltip:!1,roles:e.roles,status:a._getUserInitialStatus(e),memberProfileIds:e.profilesEnabled&&e.memberProfileIds},a}return(0,s.default)(n,[{key:"_getUserInitialStatus",value:function(e){return this.isGroupsManagement&&!e.email?I.MEMBER_STATUS.PENDING_ACTIVATION:e.userStatus}},{key:"render",value:function(){var e=this.props,t=e.styleClass,n=e.memberName,a=e.email,r=e.inviteByIdEnabled,o=e.profilesEnabled,s=e.accountProfiles,l=(0,E.default)("manage-learners__table-content--field",(0,i.default)({highlight:this.state.highlight},t,t)),u=this._renderNickname();return f.default.createElement("div",{className:l},this._renderInstructorIcon(n),this._renderFilteredIcon(),this._renderGroupToggleButton(),f.default.createElement("div",{className:"manage-learners__table-content--username"},n),r&&f.default.createElement("div",{className:"manage-learners__table-content--email"},a||"-"),u&&f.default.createElement("div",{className:"manage-learners__table-content--nickname"},u),o&&s.length>0&&f.default.createElement("div",{className:"manage-learners__table-content--profile"},this._renderProfilesDropdown()),this._renderStatusField(),this._renderPopupMenu())}},{key:"_renderNickname",value:function(){var e=this.props,t=e.memberNickname,n=e.memberType,a=e.parentId;return t||(n===C.CHANNEL_MEMBER_TYPE.GROUP||a?null:"-")}},{key:"_renderInstructorIcon",value:function(e){var t=this,n=this.props.instructorPermission,a=this.state.roles;if(!Array.isArray(a))return null;if(!a.includes(m.default.ROLES.INSTRUCTOR)&&!a.includes(m.default.ROLES.EDITOR))return null;var r=S.default.assignLanguageParameters(p.default.translate("modals.INVITE_MANAGE_LEARNERS.IS_INSTRUCTOR_TOOLTIP"),"".concat(e));return n&&(r=p.default.translate("modals.INVITE_MANAGE_LEARNERS.IS_INSTRUCTOR_TOOLTIP_".concat(n),{memberName:e})),f.default.createElement("div",{className:"manage-learners__table-content--instructor-icon",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,ref:function(e){t._pathInfoRef=e}},f.default.createElement(b.default,null),this.state.showInstructorTooltip&&f.default.createElement(h.default,{content:r,parentOffsets:this._pathInfoRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"manage-learners__table-content--instructor-tooltip"}))}},{key:"_renderFilteredIcon",value:function(){var e=this,t=this.props.selectedProfiles;return(null==t?void 0:t.length)?f.default.createElement("div",{className:"manage-learners__table-content--filtered-icon",onMouseEnter:this._onFilteredIconMouseEnter,onMouseLeave:this._onFilteredIconMouseLeave,ref:function(t){e._filteredIconRef=t}},f.default.createElement(v.UsersIcon,null),this.state.showFilteredTooltip&&f.default.createElement(h.default,{content:p.default.translate("modals.INVITE_MANAGE_LEARNERS.GROUP_FILTERED_BY_PROFILES",{profiles:t.map((function(e){return e.profileName})).join(", ")}),parentOffsets:this._filteredIconRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"manage-learners__table-content--instructor-tooltip"})):null}},{key:"_renderGroupToggleButton",value:function(){var e=this.props,t=e.memberType,n=e.groupLevel,a=e.expanded,r=e.toggleGroup;return t!==C.CHANNEL_MEMBER_TYPE.GROUP?null:f.default.createElement("span",{className:"manage-learners__table-content--toggle-group group-level-".concat(n),onClick:r},f.default.createElement("span",{className:a?"expanded":"collapsed"}))}},{key:"_renderStatusField",value:function(){var e,t,n=this.state.status;return n?(n===I.MEMBER_STATUS.ACTIVE?(e="joined",t=p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_STATUS_JOINED")):n===I.MEMBER_STATUS.PENDING_ACTIVATION?(e="invite",t=this.isGroupsManagement?p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_STATUS_PENDING"):p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_STATUS_INVITED")):n===I.MEMBER_STATUS.INACTIVE&&(e="invite",t=p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_STATUS_INACTIVE")),f.default.createElement("div",{className:"manage-learners__table-content--status ".concat(e)},t)):null}},{key:"_renderPopupMenu",value:function(){var e=this._getMenuItemsList();return 0===e.length?null:f.default.createElement("div",{className:"manage-learners__table-content--actions"},f.default.createElement(_.default,{listItems:e,automationInfo:"-invite-learners",buttonIcon:n._renderMenuIcon(),onMenuToggle:this._onMenuToggle}))}},{key:"_getMenuItemsList",value:function(){var e=this._getMenuItemsOrder();if(0===e.length)return[];var t=[],n=this._getMenuItems();return e.forEach((function(e){t.push(e.map((function(e){var t=n[e];return{key:e,ref:t.ref,onClick:t.onClick,text:t.text,testString:e}})))})),t}},{key:"_getMenuItemsOrder",value:function(){var e=this.props,t=e.permissionToInvite,n=e.isGuestUser,a=e.email,r=e.memberType,i=e.parentId,o=this.state.status,s=r===C.CHANNEL_MEMBER_TYPE.GROUP;if(s&&i)return[];if(n||s)return[[R]];var l=!this.isGroupsManagement,u=!(!t||o===I.MEMBER_STATUS.ACTIVE||!a),c=!(!t||o!==I.MEMBER_STATUS.ACTIVE||this.state.roles.includes(m.default.ROLES.INSTRUCTOR)),d=!i,f=!i&&o!==I.MEMBER_STATUS.PENDING_ACTIVATION;return[[l&&A,u&&N,c&&w,f&&P,d&&R].filter(Boolean)]}},{key:"_getMenuItems",value:function(){var e,t=this;return e={},(0,i.default)(e,A,{text:this.state.roles.includes(m.default.ROLES.LEARNER)?p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_MAKE_INSTRUCTOR"):p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_MAKE_LEARNER"),onClick:this._changeRole}),(0,i.default)(e,N,{text:p.default.translate("modals.INVITE_MANAGE_LEARNERS.RESEND_INVITE"),onClick:this._resendInvite}),(0,i.default)(e,w,{text:p.default.translate("modals.INVITE_MANAGE_LEARNERS.RESET_PASSWORD"),onClick:this._initiateLearnerPasswordReset}),(0,i.default)(e,R,{text:p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_POPUP_REMOVE"),onClick:function(){t.props.showMessage(t._renderConfirmRemoveMessage(),!1,"confirm-remove")}}),(0,i.default)(e,P,{text:this._getStatusText(),onClick:this._changeStatus}),e}},{key:"_getStatusText",value:function(){return"ACTIVE"===this.state.status?p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_INACTIVATE_LEARNER"):p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_ACTIVATE_LEARNER")}},{key:"_renderProfilesDropdown",value:function(){return f.default.createElement(g.default,{styleClass:"course-reports__header-group-filter manage-learners__profiles-filter",noneText:p.default.translate("modals.manage_learners.tabs.manage.select"),items:this._getProfilesList(),onChange:this._onUserProfilesChange})}},{key:"_getProfilesList",value:function(){var e=this;return this.props.accountProfiles.map((function(t){return{id:t.id,text:t.name,selected:-1!==e.props.memberProfileIds.indexOf(t.id)}}))}},{key:"_renderConfirmRemoveMessage",value:function(){var e=this;return f.default.createElement("div",{className:"confirm-remove__content"},f.default.createElement("div",{className:"confirm-remove__message"},p.default.translate("modals.manage_learners.tabs.manage.remove-message",{username:this.props.memberName})),f.default.createElement("div",{className:"confirm-remove__buttons"},f.default.createElement("span",{className:"confirm-remove__buttons--question"},p.default.translate("modals.manage_learners.tabs.manage.remove-question")),f.default.createElement("span",{className:"confirm-remove__buttons--cancel",onClick:this.props.hideMessage},p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_POPUP_CANCEL")),f.default.createElement("span",{className:"confirm-remove__buttons--confirm",onClick:function(){e.props.hideMessage(),e.props.removeMember(e.props.entityId,e.props.memberId)}},p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_POPUP_REMOVE"))))}},{key:"_onMouseEnter",value:function(){this.setState({showInstructorTooltip:!0})}},{key:"_onMouseLeave",value:function(){this.setState({showInstructorTooltip:!1})}},{key:"_onMenuToggle",value:function(e){this.setState({highlight:e})}},{key:"_onFilteredIconMouseEnter",value:function(){this.setState({showFilteredTooltip:!0})}},{key:"_onFilteredIconMouseLeave",value:function(){this.setState({showFilteredTooltip:!1})}},{key:"_changeRole",value:function(){var e=this,t=this.props,n=t.memberId,a=t.entityId,r=this.state.roles.includes(m.default.ROLES.LEARNER)?[m.default.ROLES.INSTRUCTOR,m.default.ROLES.EDITOR]:[m.default.ROLES.LEARNER];y.default.changeRoleInChannel(a,n,r.join(",")).then((function(){T.default.log({message:"".concat(n," role has been changed to: ").concat(r," in channel: ").concat(a)}),e.setState({roles:r})})).catch((function(e){T.default.error({message:"".concat(JSON.stringify(e)," - ").concat(n," fail to change role in channel/group: ").concat(a)})}))}},{key:"_changeStatus",value:function(){var e=this,t=this.props,n=t.entityId,a=t.memberId,r="ACTIVE"===this.state.status?"INACTIVE":"ACTIVE";this.api.changeUserStatusInEntity(n,a,r).then((function(){T.default.log({message:"".concat(a," activation has been changed to: ").concat(r," in channel: ").concat(n)}),e._renderStatusField(),e.setState({status:r})})).catch((function(e){T.default.error({message:"".concat(JSON.stringify(e)," - ").concat(a," fail to change activation in channel: ").concat(n)})}))}},{key:"_initiateLearnerPasswordReset",value:function(){var e=this.props,t=e.memberId,n=e.showNotification;y.default.initiateLearnerPasswordReset(t).then((function(){n(p.default.translate("modals.INVITE_MANAGE_LEARNERS.RESET_PASSWORD_SUCCESS_NOTIFICATION"))})).catch((function(e){n(p.default.translate("modals.INVITE_MANAGE_LEARNERS.ERROR_NOTIFICATION"),"ERROR"),T.default.error({message:"Unable to initiate learner password reset: ".concat(e)})}))}},{key:"_resendInvite",value:function(){var e=this.props,t=e.entityId,n=e.email,a=e.showNotification,r=S.default.parseEmailsInput(n);this.api.inviteLearners(t,r).then((function(){a(p.default.translate("modals.INVITE_MANAGE_LEARNERS.RESEND_INVITE_SUCCESS_NOTIFICATION"))})).catch((function(e){a(p.default.translate("modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_NETWORK_ERROR"),"ERROR"),T.default.error({message:"Unable to re-send invite to learner with email ".concat(n,". Error message: ").concat(e&&e.message?e.message:JSON.stringify(e))})}))}},{key:"_onUserProfilesChange",value:function(e){var t=this,n=this.props,a=n.memberId,r=n.entityId;this.api.saveUserProfiles(a,e).then((function(){t.setState({memberProfileIds:e})})).catch((function(e){T.default.error({message:"".concat(JSON.stringify(e)," - failed to save profile ids to user ").concat(a," in group ").concat(r)})}))}}],[{key:"_renderMenuIcon",value:function(){return f.default.createElement("span",{className:"invited-learner-settings-button"},f.default.createElement(v.SettingsIcon,null))}}]),n}(f.Component);t.default=M,M.defaultProps={email:void 0,parentId:"",userStatus:"",roles:[],isGuestUser:!1,styleClass:"",toggleGroup:function(){},groupLevel:void 0,expanded:!1,memberNickname:null,inviteByIdEnabled:!1,profilesEnabled:!1,memberProfileIds:"",accountProfiles:[],selectedProfiles:[]}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=r(n(360)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(261)),v=r(n(356)),g=r(n(18)),E=r(n(36)),_=n(74);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var T=function(e){(0,u.default)(n,e);var t=S(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e))._filterChanged=function(e){if(e.persist(),!a.debouncedFn){var t=a.props.onSearch;a.debouncedFn=(0,f.default)((function(){var n,r=null==e||null===(n=e.target)||void 0===n?void 0:n.value;"function"==typeof t&&t(r),a.setState({filter:r})}),450)}a.debouncedFn()};var r=e.allText&&!e.excludingFilterText&&n.isAllSelected(e.items);return a.state={items:e.items,isOpen:!1,allSelected:r,excludingFilterSelected:!1,filter:"",previousItems:e.items,previousAllSelected:r,previousExcludedFilterSelected:!1},a._toggleOpen=a._toggleOpen.bind((0,l.default)(a)),a._checkboxClicked=a._checkboxClicked.bind((0,l.default)(a)),a._filterRef=(0,p.createRef)(),a}return(0,s.default)(n,[{key:"render",value:function(){var e=this,t=this.state.isOpen?"open":"closed",n=this._getToggleContent(),a=(0,h.default)("multi-checkboxes-component",this.props.styleClass);return p.default.createElement("div",{className:a},this.props.title&&p.default.createElement("div",{className:"multi-checkboxes-component__title"},this.props.title),p.default.createElement("div",{className:"multi-checkboxes-component__box"},p.default.createElement("div",{className:"multi-checkboxes-component__toggle",onClick:this._toggleOpen,ref:function(t){e._toggle=t}},p.default.createElement("div",{className:(0,h.default)("multi-checkboxes-component__toggle-content",{empty:n===this.props.noneText}),title:n},n),p.default.createElement("div",{className:"multi-checkboxes-component__arrow"})),p.default.createElement("div",{className:t},this._getOptions())))}},{key:"_closeAndCancelSelection",value:function(){var e=this.state,t=e.previousItems,n=e.previousAllSelected,a=e.previousExcludedFilterSelected;this.setState({isOpen:!1,items:t,allSelected:n,excludingFilterSelected:a})}},{key:"handleClickOutside",value:function(e){var t,n=this.props,a=n.onClose,r=n.withApplyButton;if(e.target.classList.contains("scrollable")&&(null===(t=this._filterRef)||void 0===t?void 0:t.current)){for(var i=this._filterRef.current,o=!1;i;)i===e.target&&(o=!0),i=i.parentNode;if(o)return}this.state.isOpen&&(r?this._closeAndCancelSelection():this.setState({isOpen:!1}),"function"==typeof a&&a())}},{key:"_toggleOpen",value:function(){var e=this.state,t=e.isOpen,n=e.items,a=e.allSelected,r=e.excludingFilterSelected,i=this.props,o=i.onOpen,s=i.withApplyButton,l=!t;"function"==typeof o&&l&&o(),s?l?this.setState({isOpen:l,previousItems:n,previousAllSelected:a,previousExcludedFilterSelected:r}):this._closeAndCancelSelection():this.setState({isOpen:l})}},{key:"_getOptions",value:function(){var e=this;return p.default.createElement("div",{className:"multi-checkboxes-component__options"},this.props.withApplyButton&&p.default.createElement(_.CloseIcon,{className:"multi-checkboxes-component__options-close",onClick:function(){return e._closeAndCancelSelection()}}),p.default.createElement("input",{className:"multi-checkboxes-component__options-filter",ref:this._filterRef,placeholder:g.default.translate("multi-checkboxes-dropdown.filter-placeholder"),maxLength:"40",onChange:this._filterChanged}),this.props.allText&&!this.props.excludingFilterText&&!this.state.filter&&p.default.createElement("div",{className:"multi-checkboxes-component__option multi-checkboxes-component__option--all"},p.default.createElement(v.default,{checked:this.state.allSelected,onClick:this._checkboxClicked,id:"all"}),p.default.createElement("div",{className:"multi-checkboxes-component__option-text"},this.props.allText)),this.props.excludingFilterText&&!this.props.allText&&p.default.createElement("div",{className:"multi-checkboxes-component__option multi-checkboxes-component__option--exclude"},p.default.createElement(v.default,{checked:this.state.excludingFilterSelected,onClick:this._checkboxClicked,id:"excluding"}),p.default.createElement("div",{className:"multi-checkboxes-component__option-text"},this.props.excludingFilterText)),p.default.createElement("div",{className:"multi-checkboxes-component__options-scrollable"},this._filterItems().map((function(t){return p.default.createElement("div",{className:"multi-checkboxes-component__option",key:"checkbox-option-".concat(t.id)},p.default.createElement(v.default,{checked:t.selected,onClick:e._checkboxClicked,id:t.id}),p.default.createElement("div",{className:"multi-checkboxes-component__option-text",title:t.text},t.text))}))),this.props.withApplyButton&&p.default.createElement("div",{className:"multi-checkboxes-component__actions"},p.default.createElement(E.default,{styleClass:"multi-checkboxes-component__actions--clear",text:g.default.translate("multi-checkboxes-dropdown.clear"),onClick:function(){return e._clearAllSelections()},theme:E.default.THEMES.LIGHT,type:E.default.TYPES.SECONDARY}),p.default.createElement(E.default,{styleClass:"multi-checkboxes-component__actions--apply",text:g.default.translate("multi-checkboxes-dropdown.apply"),onClick:function(){e._applySelections()},disabled:this.state.isOpen&&!this._hasSelectionsChanged(),theme:E.default.THEMES.LIGHT,type:E.default.TYPES.PRIMARY})))}},{key:"_filterItems",value:function(){var e=this.state,t=e.items,n=e.filter;return n?t.filter((function(e){return-1!==e.text.toLowerCase().indexOf(n.toLowerCase())})):t}},{key:"_getToggleContent",value:function(){var e,t,n,a=this.state,r=a.isOpen,i=a.items,o=a.previousItems,s=a.allSelected,l=a.previousAllSelected,u=a.excludingFilterSelected,c=a.previousExcludedFilterSelected,d=this.props,f=d.allText,p=d.noneText,h=d.excludingFilterText;if(d.withApplyButton&&r?(n=o,e=l,t=c):(n=i,e=s,t=u),e&&f&&!h)return f;if(t&&h&&!f)return h;var m=n.filter((function(e){return e.selected})).map((function(e){return e.text}));return m.length?m.join(", "):p}},{key:"_checkboxClicked",value:function(e){var t,n,a=!1,r=!1;"all"===e?(n=!this.state.allSelected,t=this.state.items.map((function(e){return k(k({},e),{},{selected:n})})),a=n):"excluding"===e?t=(r=!this.state.excludingFilterSelected)?this.state.items.map((function(e){return k(k({},e),{},{selected:!r})})):this.state.items:(n=!this.state.items.find((function(t){return t.id===e})).selected,a=(t=this.state.items.map((function(t){return t.id===e?k(k({},t),{},{selected:n}):t}))).length===t.filter((function(e){return e.selected})).length,r=!1);var i=this.props.withApplyButton?void 0:this._applySelections;this.setState({items:t,allSelected:a,excludingFilterSelected:r},i)}},{key:"_applySelections",value:function(){var e=this;this.props.withApplyButton?this.setState({isOpen:!1},(function(){return e.props.onChange(e.state.excludingFilterSelected?[]:e._getSelectedItems(),e.state.excludingFilterSelected)})):this.props.onChange(this.state.excludingFilterSelected?[]:this._getSelectedItems(),this.state.excludingFilterSelected)}},{key:"_getSelectedItems",value:function(e){return(e||this.state.items).filter((function(e){return e.selected})).map((function(e){return e.id}))}},{key:"_clearAllSelections",value:function(){var e=this.state.items.map((function(e){return k(k({},e),{},{selected:!1})}));this._filterRef.current.value="",this.setState({items:e,allSelected:!1,excludingFilterSelected:!1,filter:""})}},{key:"_hasSelectionsChanged",value:function(){var e=this.state,t=e.previousItems;if(e.excludingFilterSelected!==e.previousExcludedFilterSelected)return!0;var n=this._getSelectedItems(),a=this._getSelectedItems(t);return a.length!==n.length||!!a.find((function(e){return!!n.find((function(t){return t!==e}))}))}}],[{key:"isAllSelected",value:function(e){return e.length===e.filter((function(e){return e.selected})).length}},{key:"getDerivedStateFromProps",value:function(e,t){if(JSON.stringify(e.items.map((function(e){return e.id})))!==JSON.stringify(t.items.map((function(e){return e.id})))){var a=e.allText&&!e.excludingFilterText&&n.isAllSelected(e.items);return{items:e.items,allSelected:a,excludingFilterSelected:!1,previousItems:e.items,previousAllSelected:a,previousExcludedFilterSelected:!1}}return null}}]),n}(p.Component);T.defaultProps={title:"",allText:"",excludingFilterText:"",styleClass:void 0,onChange:function(){},onOpen:void 0,onClose:void 0,onSearch:void 0,withApplyButton:!1};var b=(0,m.default)(T);t.default=b},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=t.Hoc=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=r(n(2)),p=r(n(204)),h=r(n(1313));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=(0,p.default)({addWizard:f.default.func,removeWizard:f.default.func}),g=v.Provider,E=v.Hoc;t.Hoc=E;var _=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).addWizard=a.addWizard.bind((0,s.default)(a)),a.removeWizard=a.removeWizard.bind((0,s.default)(a)),a.state={showWizard:!1,wizardSettings:null},a}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.children;return d.default.createElement(g,{addWizard:this.addWizard,removeWizard:this.removeWizard},d.default.createElement("div",null,e,this._renderWizard()))}},{key:"_renderWizard",value:function(){var e=this.state,t=e.wizardSettings;return e.showWizard?d.default.createElement(h.default,t):null}},{key:"addWizard",value:function(e){this.setState({showWizard:!0,wizardSettings:e})}},{key:"removeWizard",value:function(){this.setState({showWizard:!1,wizardSettings:null})}}]),n}(d.Component);t.Provider=_,_.defaultProps={children:void 0}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=r(n(141)),f=a(n(0)),p=(r(n(2)),r(n(11))),h=r(n(22)),m=r(n(58));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;(0,i.default)(this,n),(a=t.call(this,e))._onSave=a._onSave.bind((0,s.default)(a)),a._onCancel=a._onCancel.bind((0,s.default)(a)),a._onNext=a._onNext.bind((0,s.default)(a)),a._onBack=a._onBack.bind((0,s.default)(a)),a._onDataChanged=a._onDataChanged.bind((0,s.default)(a)),a._nextData=e.data?(0,d.default)(e.data):{};var r=e.steps.map((function(t){return!t.requireNextValidation||!!e.editMode&&!t.isInitiallyInvalid}));return a.state={stepIndex:e.stepIndex,data:a._nextData,validSteps:r},a}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.styleClass,a=this._getWizardSteps(),r=this._getStepContent(),i=this._getWizardButtons(),o=(0,p.default)("wizard-dialog",n);return f.default.createElement(m.default,{title:t,actions:i.actions,secondaryActions:i.secondaryActions,close:this._onCancel,theme:m.default.THEMES.LIGHT,styleClass:o},f.default.createElement("div",{className:"t2k-wizard"},a,r))}},{key:"_getWizardSteps",value:function(){var e=this,t=this.props,n=t.steps,a=t.ignoreNumbering,r=this.state,i=r.stepIndex,o=r.validSteps.findIndex((function(e){return!e}));return n.length<2?null:f.default.createElement("div",{className:"t2k-wizard__steps"},n.map((function(t,n){var r,s=n===i,l=(-1===o||n<=o)&&!s;return l&&(r=n<i?function(){e._onBack(n,!0)}:function(){e._onNext(n,!0)}),f.default.createElement("div",{key:"t2k-wizard-tep-".concat(t.id),className:(0,p.default)("t2k-wizard__step",{"t2k-wizard__step--selected":s,"t2k-wizard__step--clickable":l}),onClick:r},a?"":"".concat(n+1,") "),t.title)})))}},{key:"_getStepContent",value:function(){var e=this.props.steps[this.state.stepIndex].component;return f.default.createElement("div",{className:"t2k-wizard__page"},f.default.createElement(e,{data:this.state.data,onDataChanged:this._onDataChanged}))}},{key:"_getWizardButtons",value:function(){var e=this,t={},n=this.props,a=n.steps,r=n.editMode,i=n.secondaryActions,o=this.state,s=o.validSteps,l=o.stepIndex;return r?(t.actions=[{id:"wizard-cancel-button",text:h.default.translate("wizard.cancel"),type:m.default.BUTTON_TYPES.SECONDARY,onClick:this._onCancel},{id:"wizard-save-button",text:h.default.translate("wizard.save"),type:m.default.BUTTON_TYPES.PRIMARY,onClick:this._onSave,disabled:-1!==s.indexOf(!1)}],i&&(t.secondaryActions=i)):(t.actions=[{id:"wizard-cancel-button",text:h.default.translate("wizard.cancel"),type:m.default.BUTTON_TYPES.SECONDARY,onClick:this._onCancel}].concat(l<a.length-1?[{id:"wizard-next-button",text:h.default.translate("wizard.next"),type:m.default.BUTTON_TYPES.PRIMARY,onClick:function(){e._onNext()},disabled:!s[l]}]:[{id:"wizard-save-button",text:h.default.translate("wizard.save"),type:m.default.BUTTON_TYPES.PRIMARY,onClick:this._onSave,disabled:!s[l]}]),0!==l&&(t.secondaryActions=[{id:"wizard-back-button",text:h.default.translate("wizard.back"),type:m.default.BUTTON_TYPES.SECONDARY,onClick:function(){e._onBack()}}])),t}},{key:"_onDataChanged",value:function(e,t){var n=this.state,a=n.validSteps,r=n.stepIndex;this._nextData=e,a[r]=t,this.setState({validSteps:a})}},{key:"_onBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0,n=this.state.stepIndex,a=e>-1?e:n-1;this.props.back(t,n,a),this.setState({stepIndex:a,data:this._nextData})}},{key:"_onNext",value:function(e,t){var n=this,a=this.state.stepIndex,r=a+1;this.props.next(t,a,r),this.setState({stepIndex:r,data:this._nextData},(function(){e>r&&n._onNext(e,t)}))}},{key:"_onSave",value:function(){this.props.save(this._nextData,this.state.stepIndex)}},{key:"_onCancel",value:function(){this.props.cancel(this._nextData,this.state.stepIndex)}}]),n}(f.Component);g.defaultProps={stepIndex:0,data:void 0,editMode:!1,styleClass:"",next:function(){},back:function(){},secondaryActions:null,ignoreNumbering:!1};var E=g;t.default=E},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(602)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={contentStyles:{}},a.renderMenuItems.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.ltr,n=e.alignEnd;this.parentOffsets=f.default.getParentOffsets(document.body),this._updatePositionData(t,n)}},{key:"render",value:function(){var e=this,t=this.props.classes;return d.default.createElement("div",{ref:function(t){e._content=t},style:this.state.contentStyles,className:"library-drop-menu ".concat(t||""),"data-automation-id":"library-drop-menu"},this.renderMenuItems())}},{key:"renderMenuItems",value:function(){var e=this.props.list;return d.default.createElement("div",{className:"library-drop-menu-items"},e.map((function(e,t){return d.default.createElement("div",{className:"library-drop-menu-section-wrapper",key:"item-".concat(f.default.guid()),"data-automation-id":"library-drop-menu-section-".concat(t)},n.renderMenuSectionItems(e,t))})))}},{key:"_updatePositionData",value:function(e,t){var n=this._content.getBoundingClientRect(),a={contentStyles:{}};!e&&!t||e&&t?n.right-(n.width+20)<this.parentOffsets.left&&(a.contentStyles={right:this.parentOffsets.left+(n.left-20)}):n.left+n.width+20>this.parentOffsets.width&&(a.contentStyles={left:this.parentOffsets.width-(n.left+n.width+20)}),this.setState(a)}}],[{key:"renderMenuSectionItems",value:function(e,t){return e.map((function(e,a){return"href"===e.type?n.renderMenuItemAnchor(e,t,a):n.renderMenuItem(e,t,a)}))}},{key:"renderMenuItem",value:function(e,t,n){var a=e.testString,r=e.disabled,i=e.text,o=e.icon,s=e.onClick,l=e.ref,u=o?d.default.createElement("span",{className:"library-drop-menu-item-icon"},o):void 0,c=d.default.createElement("span",{className:"library-drop-menu-item-label ".concat(o?"":"library-drop-menu-item-label-no-icon-padding")},i);return d.default.createElement("div",{key:"".concat(t,"_").concat(n),ref:l,className:"library-drop-menu-item ".concat(r?"disabled":""),"data-automation-id":"ibrary-drop-menu-item-".concat(a),onClick:!r&&s?function(){return s(e,t,n)}:void 0},u,c)}},{key:"renderMenuItemAnchor",value:function(e,t,n){var a=e.ref,r=e.dataAction,i=e.testString,o=e.disabled,s=e.text,l=e.icon,u=e.onClick,c=l?d.default.createElement("span",{className:"library-drop-menu-item-icon"},l):void 0,f=d.default.createElement("span",{className:"library-drop-menu-item-label ".concat(l?"":"library-drop-menu-item-label-no-icon-padding")},s);return d.default.createElement("div",{className:"library-drop-menu-item-anchor-container",key:"".concat(t,"_").concat(n),"data-automation-id":"".concat(i?"library-drop-menu-item-anchor-".concat(i):"")},c,d.default.createElement("a",{ref:a,className:"library-drop-menu-item-anchor","data-action":r,onClick:!o&&u?function(){return u(e,t,n)}:void 0},f))}}]),n}(d.Component);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INDEPENDENT_INSTRUCTOR=t.EDITOR=t.LEARNER=t.INSTRUCTOR=void 0;t.INSTRUCTOR=0;t.LEARNER=1;t.EDITOR=2;t.INDEPENDENT_INSTRUCTOR=3},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n      .cls-1 {\n        fill: #36474f;\n      }\n\n      .cls-1, .cls-2 {\n        fill-rule: evenodd;\n      }\n\n      .cls-2 {\n        fill: none;\n        stroke: #36474f;\n        stroke-width: 3px;\n      }\n    ")),a.createElement("path",{id:"Rounded_Rectangle_1",className:"cls-1",d:"M200,233h21a1,1,0,0,1,1,1l-1,2a1,1,0,0,1-1,1H205",transform:"translate(-182 -209.469)",key:1}),a.createElement("path",{id:"Rounded_Rectangle_1_copy",className:"cls-2",d:"M192,219.6V214c0-3.664,4-3,4-3h24c1.227,0,2,1.612,2,3v13c0.068,1.9.631,4-3,4H199.978",transform:"translate(-182 -209.469)",key:2}),a.createElement("path",{className:"cls-1",d:"M182,242c0-4.248,4.066-7.692,7.143-7.692h7.714c3.077,0,7.143,3.444,7.143,7.692m-11-20c2.6,0,4.714,2.411,4.714,5.385s-2.11,5.384-4.714,5.384-4.714-2.411-4.714-5.384S190.4,222,193,222Z",transform:"translate(-182 -209.469)",key:3})])}r.defaultProps={id:"Group_1_copy",width:"44.5",height:"32.531",viewBox:"0 0 44.5 32.531"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.setDates;c.default.locale(l.default.getLocale());var n=(0,o.useState)(),a=(0,i.default)(n,2),r=a[0],f=a[1],p=(0,o.useState)(),h=(0,i.default)(p,2),m=h[0],v=h[1],g=(0,o.useState)(!1),E=(0,i.default)(g,2),_=E[0],y=E[1],k=l.default.getLocale();(0,o.useEffect)((function(){t({fromDate:r,toDate:m})}),[r,m]);var S=function(e){1===e?f():v(),y(!1)};return o.default.createElement(d.default,null,o.default.createElement("div",{className:"selector"},o.default.createElement("div",{className:"label"},u.default.translate("certificates-management_export_modal_date_from")),o.default.createElement(s.default,{theme:s.DATE_PICKER_THEME.CLASSIC,locale:k,disablePastDays:!1,selected:r,onSelection:function(e){!m||!r||e<=m?(f(e),y(!1)):y(!0)},endDate:new Date}),o.default.createElement("div",{className:"delete-button",onClick:function(){return S(1)}})),o.default.createElement("div",{className:"selector"},o.default.createElement("div",{className:"label"},u.default.translate("certificates-management_export_modal_date_to")),o.default.createElement(s.default,{theme:s.DATE_PICKER_THEME.CLASSIC,locale:k,disablePastDays:!1,selected:m,onSelection:function(e){!r||e>=r?(v(e),y(!1)):y(!0)},endDate:new Date}),o.default.createElement("div",{className:"delete-button",onClick:function(){return S(2)}}),_&&o.default.createElement("div",{className:"error-label"},u.default.translate("certificates-management_export_modal_date_error"))))};var i=r(n(43)),o=a(n(0)),s=a(n(1226)),l=r(n(13)),u=r(n(18)),c=r(n(50)),d=r(n(2081))},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DatePickerWithoutHoc=t.DATE_PICKER_THEME=void 0;var i=r(n(3)),o=r(n(12)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=r(n(2069)),p=r(n(2077)),h=(r(n(2)),r(n(11))),m=r(n(50)),v=r(n(261));n(2079),n(80);var g=r(n(18)),E=r(n(21)),_=r(n(13));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var k={REGULAR:"regular",CLASSIC:"classic"};function S(e){return new Date(e.setHours(0,0,0,0))}t.DATE_PICKER_THEME=k;var T=function(e){(0,l.default)(n,e);var t=y(n);function n(e){var a;(0,i.default)(this,n);var r=(a=t.call(this,e)).getRange(e);return a.state={selectedDate:e.selected,showCalendar:!1,startDate:r.start,endDate:r.end,locale:E.default.MOMENT_LOCALE_MAP[e.locale]||e.locale.split("_")[0].toLowerCase()},a.handleDayClick=a.handleDayClick.bind((0,o.default)(a)),a.showCalendar=a.showCalendar.bind((0,o.default)(a)),a.hideCalendar=a.hideCalendar.bind((0,o.default)(a)),a.isDisabledDay=a.isDisabledDay.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){return e.selected!==t.selectedDate?{selectedDate:e.selected}:e.startDate&&e.startDate!==t.startDate?{startDate:e.startDate}:null}}]),(0,s.default)(n,[{key:"render",value:function(){return d.default.createElement("div",{className:(0,h.default)("date-picker",this.props.styleClass,{disabled:this.props.disableDateSelection,"theme-classic":this.props.theme===k.CLASSIC})},d.default.createElement("div",{className:"date-picker__input",onClick:this.props.disableDateSelection?null:this.state.showCalendar?this.hideCalendar:this.showCalendar},d.default.createElement("span",{className:"date-picker__calendar-icon icon--calendar"}),this.getDateText(),d.default.createElement("span",{className:"date-picker__drop-down-icon icon--drop-down"})),this.state.showCalendar&&d.default.createElement(f.default,this.getDayPickerProps()))}},{key:"getDateText",value:function(){var e,t=this.getDateFormat(),n=this.state.selectedDate,a=this.props.theme,r="";n?(e=(0,m.default)(n).format(t),r="date-picker__date-text--selected"):e=a===k.CLASSIC?g.default.translate("common.SelectDate"):t;var i=(0,h.default)("date-picker__date-text",r);return d.default.createElement("span",{className:i},e)}},{key:"getRange",value:function(){var e,t=S(new Date("1/1/2000")),n=S(new Date("1/1/3000"));if(this.props.startDate)e=S(this.props.startDate);else if(this.props.disablePastDaysIncludeToday){var a=new Date;a.setDate(a.getDate()+1),e=S(a)}else e=this.props.disablePastDays?S(new Date):t;return{start:e,end:this.props.endDate?this.props.endDate<e?e:S(this.props.endDate):n}}},{key:"getDayPickerProps",value:function(){var e={};return this.props.theme===k.CLASSIC&&(e={selected:{color:"white",backgroundColor:_.default.getThemeColors().primaryColor}}),{onDayClick:this.handleDayClick,selectedDays:this.state.selectedDate,locale:this.state.locale,localeUtils:p.default,disabledDays:this.isDisabledDay,fromMonth:this.state.startDate,toMonth:this.state.endDate,initialMonth:this.getInitialMonth(),modifiersStyles:e}}},{key:"getInitialMonth",value:function(){var e=S(new Date);return e>=this.state.startDate&&e<=this.state.endDate?e:this.state.startDate}},{key:"showCalendar",value:function(){this.setState({showCalendar:!0},this.props.onShowCalendar)}},{key:"hideCalendar",value:function(){this.setState({showCalendar:!1})}},{key:"handleDayClick",value:function(e){this.isDisabledDay(e)||(this.setState({selectedDate:e}),this.hideCalendar(),this.props.onSelection(e))}},{key:"getDateFormat",value:function(){return"DD/MM/YYYY"}},{key:"handleClickOutside",value:function(){this.hideCalendar()}},{key:"isDisabledDay",value:function(e){var t=S(e);return t<this.state.startDate||t>this.state.endDate}}]),n}(d.Component);T.defaultProps={onSelection:function(){},onShowCalendar:function(){},locale:"en_US",startDate:null,endDate:null,disablePastDays:!0,disablePastDaysIncludeToday:!1,selected:null,styleClass:"",disableDateSelection:!1,theme:k.REGULAR};var b=T;t.DatePickerWithoutHoc=b;var C=(0,v.default)(T);t.default=C},,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(125)).default.div.withConfig({displayName:"AddLearnersDatePickerStyled",componentId:"sc-1o1pd3v-0"})([".delete-button{background-image:url('src/common/core/commonAssets/delete-round-button.svg');background-repeat:no-repeat;background-position:center;width:24px;height:24px;cursor:pointer;display:inline-block;margin:0 12px;vertical-align:text-bottom;&:hover{background-image:url('src/common/core/commonAssets/delete-round-hover-button.svg');}}.error-label{color:red;font-size:12px;margin-top:8px;}.label{margin-bottom:10px;font-size:16px;}.selector{margin-bottom:18px;}"]);t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(40)),o=r(n(9)),s=r(n(33)),l=r(n(34)),u=r(n(43)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(58)),p=r(n(18)),h=r(n(356)),m=r(n(21)),v=r(n(13)),g=r(n(60)),E=r(n(235)),_=r(n(969)),y=r(n(327)),k=n(74),S=r(n(126)),T=r(n(334)),b=r(n(1225)),C=r(n(1189));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=[m.default.CERTIFICATE_LEARNER_STATE.EXPIRED,m.default.CERTIFICATE_LEARNER_STATE.ABOUT_TO_EXPIRE,m.default.CERTIFICATE_LEARNER_STATE.CERTIFIED,m.default.CERTIFICATE_LEARNER_STATE.IN_PROGRESS],N=function(e){var t=e.channelId,n=e.close,a=e.onSaved,r=e.assignedUsersIds,o=(0,c.useState)(!1),I=(0,u.default)(o,2),N=I[0],w=I[1],R=(0,c.useState)(void 0),P=(0,u.default)(R,2),M=P[0],L=P[1],D=(0,c.useState)([]),x=(0,u.default)(D,2),F=x[0],U=x[1],G=(0,c.useState)([]),B=(0,u.default)(G,2),j=B[0],H=B[1],V=(0,c.useState)({}),W=(0,u.default)(V,2),z=W[0],Y=W[1],K=(0,c.useState)([]),Q=(0,u.default)(K,2),X=Q[0],q=Q[1],Z=(0,c.useState)([]),J=(0,u.default)(Z,2),$=J[0],ee=J[1],te=(0,c.useState)([]),ne=(0,u.default)(te,2),ae=ne[0],re=ne[1],ie=(0,c.useState)([]),oe=(0,u.default)(ie,2),se=oe[0],le=oe[1],ue=(0,c.useState)([]),ce=(0,u.default)(ue,2),de=ce[0],fe=ce[1],pe=(0,c.useState)([]),he=(0,u.default)(pe,2),me=he[0],ve=he[1],ge=(0,c.useState)(!0),Ee=(0,u.default)(ge,2),_e=Ee[0],ye=Ee[1],ke=(0,c.useState)(0),Se=(0,u.default)(ke,2),Te=Se[0],be=Se[1],Ce=(0,c.useState)(!1),Ie=(0,u.default)(Ce,2),Oe=Ie[0],Ae=Ie[1],Ne=v.default.getAppdata().appConf.locale,we=v.default.isLtr(),Re=A.map((function(e){return{id:e,selected:!1,text:p.default.translate("CERTIFICATES.STATE."+e)}})),Pe={EXPIRED:1,ABOUT_TO_EXPIRE:2,CERTIFIED:3,IN_PROGRESS:4},Me=function(e,t){var n,a,r,i,o,s,l=null===(n=e.userCertificationDetails)||void 0===n?void 0:n.userCertificateState,u=null===(a=t.userCertificationDetails)||void 0===a?void 0:a.userCertificateState;if(l||u){if(!l)return 1;if(!u)return-1;if(l!==u)return Pe[l]-Pe[u]}var c=null===(r=e.userCertificationDetails)||void 0===r||null===(i=r.userCertificateStateDetails)||void 0===i?void 0:i.expirationDate;c&&(c=new Date(c).getTime());var d=null===(o=t.userCertificationDetails)||void 0===o||null===(s=o.userCertificateStateDetails)||void 0===s?void 0:s.expirationDate;if(d&&(d=new Date(d).getTime()),c||d){if(!c)return 1;if(!d)return-1;if(c-d!=0)return c-d}return e.userDetails.username.localeCompare(t.userDetails.username)},Le=function(e){return Math.ceil(e.length/50)},De=function(e,t){return Math.max(Math.min(e,t-1),0)},xe=function(e,t){var n=Le(e),a=De(t,n);return e.slice(50*a,50*(a+1))},Fe=function(e){return!!e.length&&!e.find((function(e){return!z[e.userDetails.userId].selected}))},Ue=function(){var e=(0,l.default)(s.default.mark((function e(){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.getCertificateForChannelInstance(t);case 2:(n=e.sent)&&L(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=(0,l.default)(s.default.mark((function e(){var n,a,r,i=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,T.default.getAccountUsersToInvite(a,t,!1);case 3:r=e.sent,ee((null==r||null===(n=r.groups)||void 0===n?void 0:n.length)?r.groups.map((function(e){return O(O({},e),{},{selected:!1,text:e.name})})):[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=(0,l.default)(s.default.mark((function e(){var n,a,r,i=arguments;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:"",e.next=3,C.default.getProfiles(t,a);case 3:r=e.sent,re((null==r||null===(n=r.profiles)||void 0===n?void 0:n.length)?r.profiles.map((function(e){return O(O({},e),{},{selected:!1,text:e.name})})):[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,l.default)(s.default.mark((function e(n,a,i,o,l){var u,c,d,f;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.default.getChannelCandidateMembers(t,a,i,o,l);case 2:u=e.sent,c=[],d={},u.forEach((function(e){var t=e.userDetails.userId;-1===r.indexOf(t)&&(c.push(e),n&&(d[e.userDetails.userId]=O(O({},e),{},{selected:!1})))})),c=c.sort(Me),U(c),f=xe(c,0),H(f),n?Y(d):Ae(Fe(f));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i){return e.apply(this,arguments)}}(),He=function(){var e=(0,l.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),e.next=3,Ue();case 3:return e.next=5,Ge();case 5:return e.next=7,Be();case 7:return e.next=9,je(!0);case 9:ye(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){He()}),[]);var Ve=function(){var e=(0,l.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(t),e.next=3,je(!1,t,de,me);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=(0,l.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe(t),e.next=3,je(!1,se,t,me);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=(0,l.default)(s.default.mark((function e(t,n){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(t),e.next=3,je(!1,se,de,t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=(0,l.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(),t=X.map((function(e){return{memberId:e,name:"".concat(z[e].userDetails.nickname," (").concat(z[e].userDetails.username,")")}})),a(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ke=function(e){var t;return null===(t=z[e])||void 0===t?void 0:t.selected},Qe=function(e){be(e);var t=xe(F,e);H(t),Ae(Fe(t))},Xe=function(e){return c.default.createElement("div",{className:"add-users__tooltip"},c.default.createElement("div",{className:"add-users__tooltip-title"},p.default.translate("modals.channel_manage_specific.tooltip.assigned-to")),c.default.createElement("div",{className:"add-users__tooltip-content"},e.channelsDetails.map((function(e,t,n){return'"'.concat(e.channelName,'"').concat(t<n.length-1?", ":"")}))))};return c.default.createElement(f.default,{styleClass:"add-specific-users-dialog",title:p.default.translate("modals.channel_manage_specific.title"),actions:[{id:"cancel",text:p.default.translate("modals.INVITE_MANAGE_LEARNERS.MANAGE_LEARNERS_POPUP_CANCEL"),type:f.default.BUTTON_TYPES.SECONDARY,onClick:n},{id:"continue",text:p.default.translate("modals.manage_learners.tabs.invite.add")+(X.length?" (".concat(X.length,")"):""),type:f.default.BUTTON_TYPES.PRIMARY,disabled:!N,onClick:Ye}]},_e&&c.default.createElement(g.default,null),!_e&&c.default.createElement("div",{className:"add-users__dialog"},c.default.createElement("div",{className:"add-users__header"},c.default.createElement("div",{className:"add-users__header-info"},M&&c.default.createElement("div",{className:"add-users__header-info--certificate"},c.default.createElement(k.CertificateIcon,null),c.default.createElement(S.default,{clamp:"2",ltr:we},M.name)),c.default.createElement("div",{className:"add-users__header-info--learners"},p.default.translate("modals.channel_manage_specific.total_learners")+" - "+F.length)),c.default.createElement("div",{className:"add-users__header-filters"},!!(null==$?void 0:$.length)&&c.default.createElement(_.default,{styleClass:"add-users__header-filters-group",title:p.default.translate("modals.channel_manage_specific.filters.groups"),noneText:p.default.translate("modals.channel_manage_specific.filters.not_selected"),items:$,onChange:Ve,withApplyButton:!0}),!!(null==ae?void 0:ae.length)&&c.default.createElement(_.default,{styleClass:"add-users__header-filters-profile",title:p.default.translate("modals.channel_manage_specific.filters.profiles"),noneText:p.default.translate("modals.channel_manage_specific.filters.not_selected"),items:ae,onChange:We,withApplyButton:!0}),M&&c.default.createElement(_.default,{styleClass:"add-users__header-filters-certificate-state",title:p.default.translate("modals.channel_manage_specific.filters.certificates"),noneText:p.default.translate("modals.channel_manage_specific.filters.not_selected"),excludingFilterText:p.default.translate("modals.channel_manage_specific.filters.not_assigned"),items:Re,onChange:ze,withApplyButton:!0}))),c.default.createElement("div",{className:"add-users__content"},c.default.createElement("div",{className:"add-users__table "},c.default.createElement("div",{className:(0,d.default)("add-users__table-title",{"with-certificate-data":M})},c.default.createElement("div",{className:"add-users__table-checkbox"},c.default.createElement(h.default,{id:"add-users__checkbox",checked:Oe,disabled:!j.length,onClick:function(){return t=j.map((function(e){return e.userDetails.userId})),j.forEach((function(e){z[e.userDetails.userId].selected=!Oe})),e=Oe?X.filter((function(e){return-1===t.indexOf(e)})):(0,i.default)(new Set([].concat((0,i.default)(X),(0,i.default)(t)))),Ae(!Oe),q(e),void w(!!e.length);var e,t}})),c.default.createElement("div",{className:"add-users__table-title--username"},p.default.translate("modals.manage_members.tabs.manage.username")),c.default.createElement("div",{className:"add-users__table-title--nickname"},p.default.translate("modals.manage_members.tabs.manage.name")),M&&c.default.createElement("div",{className:"add-users__table-title--state"},p.default.translate("modals.channel_manage_specific.table_header.status")),M&&c.default.createElement("div",{className:"add-users__table-title--expiry-date"},p.default.translate("modals.channel_manage_specific.table_header.expiry_date"))),c.default.createElement("div",{className:(0,d.default)("add-users__table-content",{"with-certificate-data":M})},0===j.length&&c.default.createElement("div",{className:"add-users__table-no-results"},c.default.createElement(k.EmptyStateWithBackgroundIcon,null),c.default.createElement("div",null,p.default.translate("modals.channel_manage_specific.empty_state_text")),c.default.createElement("div",null,p.default.translate("modals.channel_manage_specific.empty_state_text-2-line"))),0!==j.length&&j.map((function(e){return c.default.createElement("div",{className:(0,d.default)("add-users__table-row",{"with-certificate-data":M})},c.default.createElement("div",{className:"add-users__table-checkbox"},c.default.createElement(h.default,{id:"add-users__checkbox",checked:Ke(e.userDetails.userId),onClick:function(){return t=e.userDetails.userId,Ke(t)?(z[t].selected=!1,n=X.filter((function(e){return e!==t}))):(z[t].selected=!0,n=[].concat((0,i.default)(X),[t])),q(n),Ae(Fe(j)),void w(!!n.length);var t,n}})),c.default.createElement("div",{className:"add-users__table-row--username",title:e.userDetails.username},e.userDetails.username),c.default.createElement("div",{className:"add-users__table-row--nickname",title:e.userDetails.nickname},e.userDetails.nickname),M&&function(e){var t,n,a,r,i=null===(t=e.userCertificationDetails)||void 0===t||null===(n=t.userCertificateStateDetails)||void 0===n?void 0:n.expirationDate,o=null===(a=e.userCertificationDetails)||void 0===a?void 0:a.userCertificateState,s="",l="";switch(o){case m.default.CERTIFICATE_LEARNER_STATE.EXPIRED:l="add-users__table-row--state-expired",s=p.default.translate("CERTIFICATES.STATE.EXPIRED");break;case m.default.CERTIFICATE_LEARNER_STATE.ABOUT_TO_EXPIRE:l="add-users__table-row--state-about-to-expire",s=p.default.translate("CERTIFICATES.STATE.ABOUT_TO_EXPIRE");break;case m.default.CERTIFICATE_LEARNER_STATE.CERTIFIED:l="add-users__table-row--state-certified",s=p.default.translate("CERTIFICATES.STATE.CERTIFIED");break;case m.default.CERTIFICATE_LEARNER_STATE.IN_PROGRESS:l="add-users__table-row--state-pending",s=p.default.translate("CERTIFICATES.STATE.IN_PROGRESS");break;default:l="add-users__table-row--state-empty",s=p.default.translate("modals.channel_manage_specific.filters.not_assigned")}return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"add-users__table-row--state"},o&&(null===(r=e.channelsDetails)||void 0===r?void 0:r.length)?c.default.createElement(y.default,{tooltip:Xe(e)},c.default.createElement("span",{className:l},s)):c.default.createElement("span",{className:l},s)),c.default.createElement("div",{className:"add-users__table-row--expiry-date"}," ",i?E.default.getDateStringByLocale(new Date(i),Ne):"-"))}(e))})))),function(){var e=Le(F);if(e<=1)return null;var t=De(Te,e);return c.default.createElement("div",{className:"add-users__pagination"},c.default.createElement("div",{className:(0,d.default)("add-users__pagination-button","add-users__pagination-button--left",{disabled:0===t}),onClick:function(){return Qe(t-1)}},c.default.createElement(k.ArrowDownIcon,null)),c.default.createElement("input",{type:"number",min:"1",max:e,value:t+1,onChange:function(t){var n=parseInt(t.target.value,10);n<0||!n?n=0:n>e&&(n=e),Qe(n-1)}}),c.default.createElement("div",{className:"add-users__pagination-separator"},"/"),c.default.createElement("div",null,e),c.default.createElement("div",{className:(0,d.default)("add-users__pagination-button","add-users__pagination-button--right",{disabled:t===e-1}),onClick:function(){return Qe(t+1)}},c.default.createElement(k.ArrowDownIcon,null)))}())))};t.default=N},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(1230)),o=a(n(0)),s=(a(n(2)),a(n(11))),l=a(n(13)),u=a(n(21)),c=a(n(235)),d=a(n(18));n(2084);var f=function(e){var t,n,a,f=e.state,p=e.expirationDate,h=e.progress,m=e.styleClass,v=l.default.getAppdata();f===u.default.CERTIFICATE_LEARNER_STATE.ABOUT_TO_EXPIRE?(n="about-to-expired",a=d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.ABOUT_TO_EXPIRE",{date:c.default.getDateStringByLocale(new Date(p),v.appConf.locale)})):f===u.default.CERTIFICATE_LEARNER_STATE.EXPIRED?(n="expired",a=p?d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.EXPIRED_AT",{date:c.default.getDateStringByLocale(new Date(p),v.appConf.locale)}):d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.EXPIRED")):f===u.default.CERTIFICATE_LEARNER_STATE.CERTIFIED?(n="certified",a=p?d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.CERTIFIED_UNTIL",{date:c.default.getDateStringByLocale(new Date(p),v.appConf.locale)}):d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.CERTIFIED")):a=(0,i.default)(h)?d.default.translate("CERTIFICATES.LEARNER_STATE.ACHIEVED").replace(/\$1/g,h):d.default.translate("CERTIFICATES.REPORT.CERTIFICATE_STATES.IN_PROGRESS");var g=(0,s.default)("certificate-state__text",(t={},(0,r.default)(t,"certificate-state__text--".concat(n),!!n),(0,r.default)(t,"styleClass",!!m),t));return o.default.createElement("div",{className:g},a)};f.defaultProps={expirationDate:void 0,styleClass:void 0,progress:void 0};var p=f;t.default=p},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={ABOUT_TO_EXPIRE:1,CERTIFIED:2,EXPIRED:3,IN_PROGRESS:4,REVOKED:5},r=function(e,t){var n,r;if(!e.state||!t.state){if(!e.state&&!t.state)return 0;if(!e.state)return 1;if(!t.state)return-1}if(e.state!==t.state)return a[e.state]-a[t.state];var i=(null==e||null===(n=e.stateDetails)||void 0===n?void 0:n.expirationDate)&&new Date(e.stateDetails.expirationDate).getTime(),o=(null==t||null===(r=t.stateDetails)||void 0===r?void 0:r.expirationDate)&&new Date(t.stateDetails.expirationDate).getTime();if(i||o){if(!i)return 1;if(!o)return-1;if(i-o!=0)return i-o}return e.name.localeCompare(t.name)};t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(18))),h=r(n(41)),m=r(n(36)),v=r(n(21)),g=r(n(602)),E=r(n(334)),_=r(n(491));function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var k=0,S=1,T=2,b=3,C=4,I=function(e){(0,u.default)(n,e);var t=y(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._handleInviteLearnersClick=a._handleInviteLearnersClick.bind((0,l.default)(a)),a.state={emailInputValue:"",idsInputValue:"",isSendDisabled:!0,isPasted:!1},a.isGroupManagement=e.entityType===v.default.ROLE_AND_PERMISSION_CONTEXT.GROUP,a.api=a.isGroupManagement?_.default:E.default,a}return(0,s.default)(n,[{key:"render",value:function(){return f.default.createElement("div",{className:"invite-learners"},this.props.inviteById?this._renderInviteById():this._renderInviteByEmail(),this.props.children)}},{key:"_renderInviteByEmail",value:function(){return this._renderInputContainer(this.state.emailInputValue,"emailInputValue","modals.INVITE_MANAGE_LEARNERS.INVITE_INPUT_PLACEHOLDER","modals.manage_learners.tabs.invite.send")}},{key:"_renderInviteById",value:function(){return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"invite-learners__ids-hint"},f.default.createElement("span",null,p.default.translate("modals.manage_learners.tabs.ids.step1")),f.default.createElement("span",null," - "+p.default.translate("modals.manage_learners.tabs.ids.step1-message"))),this._renderInputContainer(this.state.idsInputValue,"idsInputValue","modals.INVITE_MANAGE_LEARNERS.INVITE_INPUT_IDS_PLACEHOLDER","modals.manage_learners.tabs.invite.add"),f.default.createElement("div",{className:"invite-learners__ids-hint"},f.default.createElement("span",null,p.default.translate("modals.manage_learners.tabs.ids.step2")),f.default.createElement("span",null," - "+p.default.translate("modals.manage_learners.tabs.ids.step2-message"))))}},{key:"_renderInputContainer",value:function(e,t,n,a){var r=this;return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"invite-learners__email-container"},f.default.createElement("input",{className:"invite-learners__email-container--email",type:"text",value:e,onChange:function(e){return r._handleInputChange(e,t)},onPaste:function(){return r._handleOnPaste()},placeholder:p.default.translate(n),autoFocus:!0}),f.default.createElement(m.default,{styleClass:"invite-learners__email-container--send",text:p.default.translate(a),theme:m.default.THEMES.LIGHT,type:m.default.TYPES.PRIMARY,disabled:this.state.isSendDisabled,onClick:this._handleInviteLearnersClick})))}},{key:"_handleInputChange",value:function(e,t){var n,a=e.target.value;this.state.isPasted&&(a=this._parsePastedValue(a)),this.setState((n={},(0,i.default)(n,t,a),(0,i.default)(n,"isSendDisabled",!a),(0,i.default)(n,"isPasted",!1),n)),this.props.hideMessage()}},{key:"_handleOnPaste",value:function(){this.props.inviteById||this.setState({isPasted:!0})}},{key:"_parsePastedValue",value:function(e){var t=e;this.props.inviteById||(t=(n._extractEmails(e)||[]).join(", "));return t}},{key:"_handleInviteLearnersClick",value:function(){var e=this;if(this.state.emailInputValue||this.state.idsInputValue){this.setState({isSendDisabled:!0});var t=this.state.emailInputValue?g.default.parseEmailsInput(this.state.emailInputValue):g.default.parseIdsInput(this.state.idsInputValue);t?this.api.inviteLearners(this.props.entityId,t).then((function(){var t=e.state.idsInputValue?"modals.INVITE_MANAGE_LEARNERS.IDS_HINT_SUCCESS":"modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_SUCCESS";e.props.showMessage(p.default.translate(t)),e.setState({emailInputValue:"",idsInputValue:"",isSendDisabled:!1}),h.default.sendEvent(h.default.TITLES.SEND_INVITATION,h.default.COMPONENTS.INVITED_LEARNERS_DIALOG)})).catch((function(t){"Failed to fetch"===t.message?e._showErrorMessage(S):e._showErrorMessage(b)})):this._showErrorMessage(this.state.emailInputValue?k:C)}}},{key:"_showErrorMessage",value:function(e){var t;switch(this.setState({isSendDisabled:!1}),e){case S:t="modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_NETWORK_ERROR";break;case k:t="modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_EMAIL_ERROR";break;case C:t="modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_IDS_ERROR";break;case T:t="modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_MAX_ERROR";break;case b:t="modals.INVITE_MANAGE_LEARNERS.INVITE_TRY_TO_INVITE_HIMSELF_ERROR";break;default:t="modals.INVITE_MANAGE_LEARNERS.INVITE_HINT_NETWORK_ERROR"}this.props.showMessage(p.default.translate(t),!0)}}],[{key:"_extractEmails",value:function(e){return e.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi)}}]),n}(f.Component);t.default=I,I.defaultProps={inviteById:!1}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(18)),p=r(n(1247)),h=r(n(947)),m=r(n(1316)),v=n(951);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var E=function(e){(0,s.default)(n,e);var t=g(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return this.props.siteShortUrl?this.props.showOnlyQrCode?this._renderOnlyQrCode():this._renderContent():null}},{key:"_renderOnlyQrCode",value:function(){var e=this;return c.default.createElement("div",{className:"share__qr-code-container share__qr-code-container--large",onClick:function(){e.props.toggleQrCode(!1)}},c.default.createElement(p.default,{value:this.props.siteShortUrl,size:470,level:"Q",bgColor:"#FFFFFF",fgColor:"#000000"}))}},{key:"_renderLinkSettings",value:function(){var e=this.props,t=e.children,n=e.selectedLinkType,a=e.onLinkTypeChange,r=e.canShareSelfRegisterLink,i=e.canShareInternalLink;return r&&i?c.default.createElement("div",{className:(0,d.default)("share__link-settings",{"no-expiration":n===v.LINK_TYPE.LINK_TO_COURSE})},c.default.createElement("div",{className:"share__link-settings--title"},f.default.translate("modals.INVITE_MANAGE_MEMBERS.link-settings")),c.default.createElement("div",{className:"share__link-settings--radio"},c.default.createElement(h.default,{onSelected:function(){return a(v.LINK_TYPE.SELF_REGISTER)},isSelected:n===v.LINK_TYPE.SELF_REGISTER,content:f.default.translate("modals.INVITE_MANAGE_MEMBERS.self-register-link-hint"),id:"share-self-register-link"}),c.default.createElement(h.default,{onSelected:function(){return a(v.LINK_TYPE.LINK_TO_COURSE)},isSelected:n===v.LINK_TYPE.LINK_TO_COURSE,content:f.default.translate("modals.INVITE_MANAGE_MEMBERS.internal-link-to-course-hint"),id:"share-link-to-course"})),t):r?c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"share__link-settings--hint"},f.default.translate("modals.INVITE_MANAGE_MEMBERS.self-register-link-hint")),t):i?c.default.createElement("div",{className:"share__link-settings--hint"},f.default.translate("modals.INVITE_MANAGE_MEMBERS.internal-link-to-course-hint")):null}},{key:"_renderContent",value:function(){var e=this,t=this.props,n=t.siteShortUrl,a=t.linkComp;return c.default.createElement("div",{className:"share"},this._renderLinkSettings(),a,c.default.createElement("div",{className:"share__content"},c.default.createElement("span",{className:"share__qr-code-container share__qr-code-container--small",onClick:function(){e.props.toggleQrCode(!0)}},c.default.createElement(p.default,{value:n,size:250,level:"Q",bgColor:"#FFFFFF",fgColor:"#000000"})),c.default.createElement("span",{className:"share__enlarge"},c.default.createElement("span",{className:"share__enlarge--text"},f.default.translate("modals.manage_learners.tabs.share.qr-code.enlarge")),c.default.createElement("span",{className:"share__enlarge--button",onClick:function(){e.props.toggleQrCode(!0)}},c.default.createElement(m.default,null)))))}}]),n}(c.Component);t.default=E,E.defaultProps={linkComp:null}},,,,,,function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.onSelected,a=e.isSelected,r=e.value,u=e.content,c=e.name,d=e.id,f=e.styleClass,p=e.disabled,h=(0,s.useState)(a),m=(0,o.default)(h,2),v=m[0],g=m[1];(0,s.useEffect)((function(){g(a)}),[a]);var E=(0,l.default)("enabley-radio-button",(t={},(0,i.default)(t,f,!!f),(0,i.default)(t,"disabled",p),t));return s.default.createElement("label",{htmlFor:d,className:E,onChange:n},u,s.default.createElement("input",{id:d,type:"radio",name:c,value:r,defaultChecked:a,checked:v,disabled:p}),s.default.createElement("div",{className:"control__indicator"}))};var i=r(n(9)),o=r(n(43)),s=a(n(0)),l=(r(n(2)),r(n(11)))},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=r(n(13)),f=r(n(18)),p=r(n(11));r(n(2));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}n(2096);var m=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var a;(0,i.default)(this,n),(a=t.call(this,e)).user=d.default.getUser();var r=d.default.getCustomHeaderStyle("background");return r&&document.styleSheets[0].addRule(".mobile-header-background-wrapper:before","background-color: ".concat(r.background," !important")),a}return(0,o.default)(n,[{key:"render",value:function(){var e,t=this,n=(0,p.default)("mobile-header",{"small-header":this.props.smallHeader}),a=d.default.getAppdata().appConf.logoUrl;e=a&&""!==a?c.default.createElement("img",{className:"mobile-header-logo",alt:"",src:d.default.getAssetPath(a)}):c.default.createElement("div",{className:"mobile-header-t2k-logo"});var r=c.default.createElement("div",{className:"mobile-header-background-wrapper"},c.default.createElement("div",{className:"mobile-header-image",style:d.default.getCustomeHeaderBackgroundImage()}),c.default.createElement("div",{className:"mobile-header-background",style:d.default.getCustomHeaderStyle("background")})),i=this.user.isGuest?f.default.translate("header.welcome.guest.message"):this.user.firstName,o=c.default.createElement("div",{className:"mobile-header-welcome",ref:function(e){t.wrapper=e}},c.default.createElement("div",{className:"mobile-header-welcome-message"},"".concat(f.default.translate("overview.hi")," ").concat(i)),c.default.createElement("div",{className:"mobile-header-logo-container"},e));return c.default.createElement("div",{className:n},this.props.showHeader?r:null,this.props.showHeader?o:null,this.props.children)}}]),n}(c.Component);t.default=m},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(11))),f=r(n(21)),p=r(n(13)),h=r(n(2098));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=m(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=(0,d.default)("toolbar-container",this.props.className,{"toolbar-container--justify":this.props.shouldJustify}),t=f.default.TOOLBAR_ELEMENT_TYPE.TITLE,n=this.props.primary&&this.props.primary.find((function(e){return e.type===t})),a=this.props.primary&&this.props.primary.length?c.default.createElement(h.default,{className:"toolbar--primary ".concat(n&&n.config.shouldCompress?"compressed":""),elements:this.props.primary,onButtonClick:this.props.onButtonClick,enable:this.props.enableToolbar,appApi:this.props.appApi,id:this.props.id}):c.default.createElement("div",{className:"toolbar--primary"}),r=this.props.auxiliary&&this.props.auxiliary.length?c.default.createElement(h.default,{className:"toolbar--auxiliary",elements:this.props.auxiliary,onButtonClick:this.props.onButtonClick,enable:this.props.enableToolbar,appApi:this.props.appApi,id:this.props.id}):null,i=this._getSecondaryToolbar();if(!(this.props.primary&&this.props.primary.length||this.props.auxiliary&&this.props.auxiliary.length||this.props.secondary&&this.props.secondary.length))return null;var o=this.props.enableToolbar?"":c.default.createElement("div",{className:"toolbar-container__mask"});return c.default.createElement("div",{className:e,style:this.props.allowCustomStyle?p.default.getCustomHeaderStyle("background"):null},a,r,i,o)}},{key:"_getSecondaryToolbar",value:function(){var e=this.props.secondary,t=(0,d.default)("toolbar--secondary",{channelToolbar:"channel"===this.props.id});if(e&&e.length){var n,a,r=this.props,i={onButtonClick:r.onButtonClick,appApi:r.appApi,enable:r.enableToolbar,id:r.id,className:t},o=!1;if(p.default.isMobile()&&(o=e.filter((function(e){return!e.config||!e.config.quickAccess})).length>1),o){n=[],a=[];var s={type:f.default.TOOLBAR_ELEMENT_TYPE.SELECT,config:{options:[],appApi:this.props.appApi}};e.forEach((function(e){e.config&&e.config.quickAccess?e.config.quickAccessFirst?a.push(e):n.push(e):s.config.options.push(e)})),s.config.options.reverse(),n.push(s),n=n.concat(a)}else n=e;return i.elements=n,c.default.createElement(h.default,i)}return null}}]),n}(c.Component);v.defaultProps={className:"",options:{},allowCustomStyle:!1};var g=v;t.default=g},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11))),p=r(n(21)),h=r(n(154)),m=r(n(13)),v=r(n(53)),g=n(384),E=r(n(1195)),_=r(n(1196)),y=r(n(928)),k=r(n(1197)),S=r(n(1199)),T=r(n(1200)),b=r(n(1201)),C=r(n(2112)),I=r(n(2114)),O=r(n(929)),A=r(n(1182)),N=r(n(2115)),w=r(n(2116)),R=r(n(158)),P=r(n(1202)),M=r(n(1203)),L=r(n(1204));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var x=v.default.LogManager,F=function(e){(0,l.default)(n,e);var t=D(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this,t=(0,f.default)("toolbar",this.props.className);return d.default.createElement("nav",{className:t},this.props.elements.map((function(t,n){switch(t.type){case p.default.TOOLBAR_ELEMENT_TYPE.CUSTOM:return d.default.createElement(I.default,(0,i.default)({onButtonClick:e.props.onButtonClick},t.config,{key:"toolbar-element-".concat(n)}));case p.default.TOOLBAR_ELEMENT_TYPE.LOGO:return d.default.createElement(A.default,{key:"toolbar-element-".concat(n),logoUrl:m.default.getAppdata().appConf.logoUrl});case p.default.TOOLBAR_ELEMENT_TYPE.USER_MENU:return d.default.createElement(O.default,(0,i.default)({},t.config,{key:"toolbar-element-".concat(n),enable:e.props.enable,appApi:e.props.appApi}));case p.default.TOOLBAR_ELEMENT_TYPE.TITLE:return d.default.createElement(N.default,(0,i.default)({},t.config,{key:"toolbar-element-".concat(n)}));case p.default.TOOLBAR_ELEMENT_TYPE.EDITABLE_TITLE:return d.default.createElement(w.default,(0,i.default)({},t.config,{key:"toolbar-element-".concat(n)}));case p.default.TOOLBAR_ELEMENT_TYPE.ICON:return d.default.createElement(R.default,(0,i.default)({onButtonClick:e.props.onButtonClick},t.config,{key:"toolbar-element-".concat(n),ariaLabel:t.config.iconName,role:"button",tabIndex:"0"}));case p.default.TOOLBAR_ELEMENT_TYPE.BUTTON:return d.default.createElement(P.default,(0,i.default)({onButtonClick:e.props.onButtonClick},t.config,{key:"toolbar-element-".concat(n)}));case p.default.TOOLBAR_ELEMENT_TYPE.NOTIFICATIONS:return d.default.createElement(M.default,(0,i.default)({key:"toolbar-element-notifications"},t.config,{appApi:e.props.appApi,activeTool:h.default.getActiveTool()}));case p.default.TOOLBAR_ELEMENT_TYPE.MESSAGING:return d.default.createElement(E.default,(0,i.default)({key:"toolbar-element-messaging"},t.config,{store:g.store,appApi:e.props.appApi,activeTool:h.default.getActiveTool()}));case p.default.TOOLBAR_ELEMENT_TYPE.DISCUSSIONS:return d.default.createElement(_.default,(0,i.default)({key:"toolbar-element-discussions"},t.config,{store:g.store,appApi:e.props.appApi}));case p.default.TOOLBAR_ELEMENT_TYPE.HELP:return d.default.createElement(y.default,{key:"toolbar-element-help",store:g.store,appApi:e.props.appApi,component:e.props.id});case p.default.TOOLBAR_ELEMENT_TYPE.SELECT:return d.default.createElement(C.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{id:e.props.id,onOptionClick:e.props.onButtonClick,appApi:e.props.appApi,activeTool:h.default.getActiveTool()}));case p.default.TOOLBAR_ELEMENT_TYPE.LIVE_SESSION:var a,r,o=null!==(a=null===(r=t.config)||void 0===r?void 0:r.sessionType)&&void 0!==a?a:m.default.getLiveSessionVendorType();return o===p.default.LIVE_SESSION_TYPES.NEWROW?d.default.createElement(k.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{appApi:e.props.appApi,activeTool:h.default.getActiveTool()})):o===p.default.LIVE_SESSION_TYPES.ZOOM?d.default.createElement(T.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{appApi:e.props.appApi})):o===p.default.LIVE_SESSION_TYPES.TOKBOX?d.default.createElement(S.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{appApi:e.props.appApi})):null;case p.default.TOOLBAR_ELEMENT_TYPE.LEADERBOARD:return d.default.createElement(b.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{appApi:e.props.appApi,activeTool:h.default.getActiveTool()}));case p.default.TOOLBAR_ELEMENT_TYPE.SEARCH:return d.default.createElement(L.default,(0,i.default)({key:"toolbar-element-".concat(n)},t.config,{appApi:e.props.appApi}));default:return x.warn("echo",{message:"Unknown toolbar element type: ".concat(t.type)}),""}})))}}]),n}(d.Component);F.defaultProps={className:"",elements:[],onButtonClick:function(){},enable:!0};var U=F;t.default=U},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(o){if("function"==typeof o)return o(n,a);var s=o.restParams,l=o.types,d=(0,i.default)(o,["restParams","types"]);if(!s)return t(o);var f=(0,r.default)(l,3),p=(f[0],f[1]),h=f[2];return e({requestData:{method:s.method,url:s.url,params:s.params,config:s.config},messageData:s.messageData},(function(e){e.error?t(c(h,u(u({},d),{},{error:e.error}),n,a)):t(c(p,u(u({},d),{},{response:e.data}),n,a))})),null}}}};var r=a(n(43)),i=a(n(68)),o=a(n(9)),s=a(n(63));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n,a){var r;return r="function"==typeof e?e(n,a,t):"object"===(0,s.default)(e)?e:{type:e},u(u({},t),r)}},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(177),i=a(n(2101)),o=a(n(2102)),s=a(n(2103)),l=a(n(2104)),u=a(n(2105)),c=a(n(2106)),d=a(n(2107)),f=(0,r.combineReducers)({currentPageIndex:i.default,visibilityFilter:o.default,appSettings:s.default,discussions:l.default,discussionsOrder:u.default,comments:c.default,commentsOrder:d.default});t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE_INDEX":return t.currentPageIndex;default:return e}};t.default=a},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={filter:n(506).FILTERS.ALL,pageIdx:1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VISIBILITY_FILTER":return{filter:t.filter,pageIdx:t.pageIdx};case"UPDATE_VISIBILITY_FILTER":return o(o({},e),{},{filter:t.filter});case"UPDATE_PAGE_INDEX":return o(o({},e),{},{pageIdx:t.pageIdx});default:return e}};t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={editMode:"",selectedDiscussion:null},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EDIT_MODE":return o(o({},e),{},{editMode:t.editMode?t.editMode:""});case"UPDATE_SELECTED_DISCUSSION":return o(o({},e),{},{selectedDiscussion:t.discussionId});default:return e}};t.default=l},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=n(506);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e,t,n){var a=s({},e[t]);return a.commentsCounter=n,s(s({},e),{},(0,r.default)({},t,a))},u=function(e,t,n){return t.scopeIndex=n,s(s({},e),{},(0,r.default)({},t.id,t))},c=function(e,t){return s(s({},e),{},{error:t})},d=function(e,t){var n=s({},e[t.discussionId]);return++n.commentsCounter,n.commentsExpanded=n.commentsCounter>i.MAX_COMMENTS,s(s({},e),{},(0,r.default)({},t.discussionId,n))},f=function(e,t){return s(s({},e),{},{error:t})},p=function(e,t,n){var a=s({},e[t]);return a.replyExpanded=n,s(s({},e),{},(0,r.default)({},t,a))},h=function(e,t){var n=s({},e[t]);return n.commentsExpanded=!1,s(s({},e),{},(0,r.default)({},t,n))},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=s({},e[t]);return a.commentsCounter=n.length,s(s({},e),{},(0,r.default)({},t,a))},v=function(e,t){return s(s({},e),{},{error:t})},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISCUSSIONS":return t.discussionsMap;case"SET_DISCUSSIONS_INFO":return l(e,t.discussionId,t.commentsCounter);case"POST_DISCUSSION":return e;case"POST_DISCUSSION_SUCCESS":return u(e,t.response,t.scopeIndex);case"POST_DISCUSSION_ERROR":return c(e,t.error);case"POST_COMMENT":return e;case"POST_COMMENT_SUCCESS":return d(e,t.response);case"POST_COMMENT_ERROR":return f(e,t.error);case"TOGGLE_NEW_COMMENT_BOX":return p(e,t.discussionId,t.replyExpanded);case"COLLAPSE_COMMENTS":return h(e,t.discussionId);case"EXPAND_COMMENTS":return e;case"EXPAND_COMMENTS_SUCCESS":return m(e,t.discussionId,t.response);case"EXPAND_COMMENTS_ERROR":return v(e,t.error);default:return e}};t.default=g},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(40));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e,t){return[t.id].concat((0,i.default)(e))},u=function(e,t){return s(s({},e),{},{error:t})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISCUSSIONS":return t.discussionsIds;case"POST_DISCUSSION":return e;case"POST_DISCUSSION_SUCCESS":return l(e,t.response);case"POST_DISCUSSION_ERROR":return u(e,t.error);default:return e}};t.default=c},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9));function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t){return o(o({},e),{},(0,r.default)({},t.id,t))},l=function(e,t){return o(o({},e),{},{error:t})},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e=o({},e),t.forEach((function(t){e[t.id]=t})),e},c=function(e,t){return o(o({},e),{},{error:t})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISCUSSIONS_INFO":return u(e,t.comments);case"POST_COMMENT":return e;case"POST_COMMENT_SUCCESS":return s(e,t.response);case"POST_COMMENT_ERROR":return l(e,t.error);case"EXPAND_COMMENTS":return e;case"EXPAND_COMMENTS_SUCCESS":return u(e,t.response);case"EXPAND_COMMENTS_ERROR":return c(e,t.error);default:return e}};t.default=d},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9)),i=a(n(40)),o=n(506);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t){var n=e[t.discussionId];return n=n?[t.id].concat((0,i.default)(n)):[t.id],l(l({},e),{},(0,r.default)({},t.discussionId,n))},c=function(e,t){return l(l({},e),{},{error:t})},d=function(e,t){var n=e[t].slice(0,o.MAX_COMMENTS);return l(l({},e),{},(0,r.default)({},t,n))},f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e=l({},e),n.length?e[t]=n.map((function(e){return e.id})):e[t]&&delete e[t],e},p=function(e,t){return l(l({},e),{},{error:t})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DISCUSSIONS_INFO":return f(e,t.discussionId,t.comments);case"POST_COMMENT":return e;case"POST_COMMENT_SUCCESS":return u(e,t.response);case"POST_COMMENT_ERROR":return c(e,t.error);case"COLLAPSE_COMMENTS":return d(e,t.discussionId);case"EXPAND_COMMENTS":return e;case"EXPAND_COMMENTS_SUCCESS":return f(e,t.discussionId,t.response);case"EXPAND_COMMENTS_ERROR":return p(e,t.error);default:return e}};t.default=h},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(249)),i=a(n(363)),o=a(n(21)),s=(0,r.default)({loader:function(){return new Promise((function(e){(0,i.default)(o.default.LIVE_SESSION_TOK_BOX.SCRIPT_URL,(function(){n.e(28).then(n.t.bind(null,2177,7)).then((function(t){e(t)}))}))}))},loading:function(){return null}});t.default=s},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onClose,n=e.onError,a=e.setLoader,r=(0,l.useState)(!1),d=(0,s.default)(r,2),g=d[0],E=d[1],_=(0,l.useState)(!0),y=(0,s.default)(_,2),k=y[0],S=y[1],T=(0,l.useState)(f.default.getUser().email),b=(0,s.default)(T,2),C=b[0],I=b[1],O=function(){var e=(0,o.default)(i.default.mark((function e(){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,v.post(m.default.ZOOM_USER,{},{},{params:{email:C}});case 4:r=e.sent,a(!1),(null==r?void 0:r.status)&&"active"===r.status?t(!0):E(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n(e.t0),a(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();if(!g){var A=u.default.translate("zoom-connect-dialog.text-question",{email:f.default.getUser().email}),N=u.default.translate("zoom-connect-dialog.text-my-email"),w=u.default.translate("zoom-connect-dialog.text-custom",{email:f.default.getUser().email}),R=u.default.translate("zoom-connect-dialog.input-placeholder"),P=l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"zoom-connect-content"},l.default.createElement("div",{className:"zoom-connect-content__question"},A),l.default.createElement(p.default,{onSelected:function(){S(!0),I(f.default.getUser().email)},isSelected:k,content:N,id:"yes"}),l.default.createElement(p.default,{onSelected:function(){I(""),S(!1)},isSelected:!k,content:w,id:"custom"}),l.default.createElement(h.default,{value:k?"":C,onChange:function(e){var t,n,a=null!==(t=null==e||null===(n=e.target)||void 0===n?void 0:n.value)&&void 0!==t?t:"";I(a)},placeholder:R,styleClass:"input-email",maxLength:150,disabled:k})),f.default.isPC()&&l.default.createElement("div",{className:"connect-dialog-image"}));return l.default.createElement(c.default,{theme:c.default.THEMES.LIGHT,styleClass:"zoom-connect-dialog",title:u.default.translate("zoom-connect-dialog.title"),close:function(){t(!1)},content:P,actions:[{id:"connect",disabled:!k&&(M=C,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(M).toLowerCase())),type:c.default.BUTTON_TYPES.PRIMARY,text:u.default.translate("zoom-connect-dialog.button-connect"),onClick:O,keyCode:13}]})}var M;var L=l.default.createElement("div",{className:"zoom-confirm-content"},l.default.createElement("div",{className:"zoom-confirm-content__msg-text"},u.default.translate("zoom-connect-dialog.confirm-msg",{email:C})),l.default.createElement("div",{className:"zoom-confirm-content__check-text"},u.default.translate("zoom-connect-dialog.confirm-check")));return l.default.createElement(c.default,{theme:c.default.THEMES.LIGHT,styleClass:"zoom-confirm-dialog",title:u.default.translate("zoom-connect-dialog.confirm-title"),content:L,actions:[{id:"done",type:c.default.BUTTON_TYPES.PRIMARY,text:u.default.translate("zoom-connect-dialog.button-done"),onClick:function(){t(!0)},keyCode:13}]})};var i=r(n(33)),o=r(n(34)),s=r(n(43)),l=a(n(0)),u=(r(n(2)),r(n(18))),c=r(n(58)),d=r(n(28)),f=r(n(13)),p=r(n(947)),h=r(n(1318)),m=r(n(57)),v=d.default.Instance},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),r(n(11)));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,u.default)(n,e);var t=h(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this,t=this.props.styleClass,n=(0,p.default)("t2k-input-button",(0,o.default)({},t,!!t));return f.default.createElement("input",(0,i.default)({className:n,ref:function(t){e.inputRef=t}},this.props))}},{key:"focus",value:function(){this.inputRef.focus()}}]),n}(f.Component);m.defaultProps={styleClass:void 0};var v=m;t.default=v},function(e,t,n){},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(23)),o=r(n(9)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(261)),v=r(n(21)),g=r(n(13)),E=r(n(1199)),_=r(n(1197)),y=r(n(1200)),k=r(n(1201)),S=r(n(158)),T=r(n(1202)),b=r(n(1203)),C=r(n(1195)),I=r(n(1196)),O=r(n(928)),A=n(384),N=r(n(929)),w=r(n(1204));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var P=function(e){(0,c.default)(n,e);var t=R(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e))._toggleOptions=a._toggleOptions.bind((0,u.default)(a)),a._updateIndicator=a._updateIndicator.bind((0,u.default)(a)),a._indicators={},a.state={isOpen:!1,indicator:0},a}return(0,l.default)(n,[{key:"getSnapshotBeforeUpdate",value:function(e){return!(!this.state.isOpen||e.options===this.props.options)}},{key:"componentDidUpdate",value:function(e,t,n){if(n&&this.setState({isOpen:!1}),this.optionsElement&&g.default.isMobile()){var a=this.optionsElement.offsetTop,r=this.optionsElement.offsetHeight,i=document.documentElement.clientHeight;i<r+a&&(this.optionsElement.style.height="".concat(50*Math.floor((i-a)/50),"px"))}}},{key:"render",value:function(){var e=this._getOptions();return p.default.createElement("div",{className:"toolbar-select"},p.default.createElement(S.default,{id:"select",iconName:this.props.iconName||"select",onButtonClick:this._toggleOptions,isSelected:this.state.isOpen,isClickable:!0,indicator:this.state.indicator,showIndicatorNumber:!1}),e)}},{key:"_getOptions",value:function(){var e=this,t=(0,h.default)("toolbar-select__options",{"toolbar-select__options--show":this.state.isOpen},(0,o.default)({},"".concat(this.props.iconName),!!this.props.iconName));return p.default.createElement("div",{className:t,ref:function(t){e.optionsElement=t}},this.props.options.map((function(t,n){var a,r="toolbar-select-option-".concat(n);switch(t.type){case v.default.TOOLBAR_ELEMENT_TYPE.ICON:a=p.default.createElement(S.default,(0,i.default)({onButtonClick:e.props.onOptionClick},t.config,{showAsOption:!0,indicatorCallback:e._updateIndicator}));break;case v.default.TOOLBAR_ELEMENT_TYPE.BUTTON:a=p.default.createElement(T.default,(0,i.default)({onButtonClick:e.props.onOptionClick},t.config,{showAsOption:!0}));break;case v.default.TOOLBAR_ELEMENT_TYPE.NOTIFICATIONS:a=p.default.createElement(b.default,(0,i.default)({appApi:e.props.appApi},t.config,{showAsOption:!0,indicatorCallback:e._updateIndicator,activeTool:e.props.activeTool}));break;case v.default.TOOLBAR_ELEMENT_TYPE.SEARCH:a=p.default.createElement(w.default,{appApi:e.props.appApi,showAsOption:!0});break;case v.default.TOOLBAR_ELEMENT_TYPE.MESSAGING:a=p.default.createElement(C.default,(0,i.default)({store:A.store},t.config,{appApi:e.props.appApi,showAsOption:!0,indicatorCallback:e._updateIndicator,activeTool:e.props.activeTool}));break;case v.default.TOOLBAR_ELEMENT_TYPE.HELP:a=p.default.createElement(O.default,{store:A.store,appApi:e.props.appApi,showAsOption:!0,component:e.props.id});break;case v.default.TOOLBAR_ELEMENT_TYPE.LIVE_SESSION:var o,s,l=null!==(o=null===(s=t.config)||void 0===s?void 0:s.sessionType)&&void 0!==o?o:g.default.getLiveSessionVendorType();l===v.default.LIVE_SESSION_TYPES.NEWROW?a=p.default.createElement(_.default,(0,i.default)({},t.config,{appApi:e.props.appApi,showAsOption:!0,activeTool:e.props.activeTool,indicatorCallback:e._updateIndicator})):l===v.default.LIVE_SESSION_TYPES.ZOOM?a=p.default.createElement(y.default,(0,i.default)({},t.config,{appApi:e.props.appApi,showAsOption:!0,indicatorCallback:e._updateIndicator})):l===v.default.LIVE_SESSION_TYPES.TOKBOX&&(a=p.default.createElement(E.default,(0,i.default)({},t.config,{appApi:e.props.appApi,showAsOption:!0,indicatorCallback:e._updateIndicator})));break;case v.default.TOOLBAR_ELEMENT_TYPE.LEADERBOARD:a=p.default.createElement(k.default,(0,i.default)({},t.config,{appApi:e.props.appApi,showAsOption:!0,activeTool:e.props.activeTool}));break;case v.default.TOOLBAR_ELEMENT_TYPE.USER_MENU:a=p.default.createElement(N.default,(0,i.default)({},t.config,{showAsOption:!0,enable:!0,appApi:e.props.appApi}));break;case v.default.TOOLBAR_ELEMENT_TYPE.DISCUSSIONS:a=p.default.createElement(I.default,(0,i.default)({},t.config,{store:A.store,appApi:e.props.appApi,showAsOption:!0,indicatorCallback:e._updateIndicator}))}return p.default.createElement("div",{className:"toolbar-select__option-wrapper",key:r,onClick:e._toggleOptions,"data-automation-id":t.config&&t.config.id},a)})))}},{key:"_updateIndicator",value:function(e,t){var n=this,a=0,r=0;this._indicators[e]=t,Object.keys(this._indicators).forEach((function(e){r=n._indicators[e],isNaN(r)?a=r:a+=r})),this.setState({indicator:a})}},{key:"_toggleOptions",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleClickOutside",value:function(){this.state.isOpen&&this.setState({isOpen:!1})}}]),n}(p.Component);P.defaultProps={};var M=(0,m.default)(P);t.default=M},function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,a(n(249)).default)({loader:function(){return Promise.all([n.e(3),n.e(10)]).then(n.t.bind(null,2178,7))},loading:function(){return null}});t.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(23)),s=r(n(3)),l=r(n(4)),u=r(n(12)),c=r(n(6)),d=r(n(8)),f=r(n(7)),p=a(n(0)),h=(r(n(2)),r(n(11))),m=r(n(202)),v=r(n(13)),g=r(n(101));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var y=function(e){(0,c.default)(n,e);var t=_(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1},a.onClick=a._onClick.bind((0,u.default)(a)),a}return(0,l.default)(n,[{key:"render",value:function(){var e,t,n=this,a=(0,h.default)("custom-element",this.props.className,{"custom-element--selected":this.props.isSelected,"custom-element--clickable":this.props.isClickable});return!this.props.title||v.default.isTablet()||v.default.isMobile()||(e=function(){return n._toggleTooltip(!0)},t=function(){return n._toggleTooltip(!1)}),this.props.customElement?p.default.createElement("div",{className:a,onClick:this.onClick,onMouseEnter:e,onMouseLeave:t,ref:function(e){n._elRef=e}},this.props.customElement,this._getTooltip()):p.default.createElement(p.default.Fragment,null,p.default.createElement("div",(0,o.default)({className:a,onClick:this.onClick},(0,g.default)(this.props.content),{onMouseEnter:e,onMouseLeave:t,ref:function(e){n._elRef=e}})),this._getTooltip())}},{key:"_onClick",value:function(){this.props.isClickable&&this.props.onButtonClick(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:this.props.id},this.props))}},{key:"_toggleTooltip",value:function(e){this.setState({showTooltip:e})}},{key:"_getTooltip",value:function(){return this.state.showTooltip&&this.props.title?p.default.createElement(m.default,{content:this.props.title,parentOffsets:this._elRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"tooltip--toolbar"}):""}}]),n}(p.Component);y.defaultProps={className:"",onButtonClick:function(){},content:"",customElement:null,id:"",isSelected:!1,isClickable:!1,title:""};var k=y;t.default=k},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e,t,n="";return this.props.subtitle?(n=d.default.createElement("div",{className:"title__subtitle"},this.props.subtitle),e=d.default.createElement("h1",{className:"title__main-title"},this.props.title),t=(0,f.default)("title","title--with-subtitle",(0,i.default)({},this.props.customStyleClass,this.props.customStyleClass))):(e=d.default.createElement("h1",{className:"title__main-title"},this.props.title),t="title"),d.default.createElement("div",{className:t},n,e)}}]),n}(d.Component);h.defaultProps={customStyleClass:void 0};var m=h;t.default=m},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(12)),l=r(n(6)),u=r(n(8)),c=r(n(7)),d=a(n(0)),f=(r(n(2)),r(n(11))),p=r(n(360));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={title:a.props.initialValue||"",inputFocused:!1},a.onChange=a.onChange.bind((0,s.default)(a)),a.onFocus=a.onFocus.bind((0,s.default)(a)),a.onBlur=a.onBlur.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({title:t}),this.delayedCallback()}},{key:"onFocus",value:function(){this.setState({inputFocused:!0})}},{key:"onBlur",value:function(){this.setState({inputFocused:!1})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.delayedCallback=(0,p.default)((function(){e.props.onChange(e.state.title)}),this.props.debounceTime)}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.inputFocused,a=(0,f.default)("title__main-title","editable-title",{"editable-title__focused":n});return d.default.createElement("div",{className:"title"},d.default.createElement("input",{type:"text",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,value:t,className:a}))}}]),n}(d.Component);m.defaultProps={debounceTime:300};var v=m;t.default=v},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=r(n(9)),d=a(n(0)),f=(r(n(2)),r(n(13))),p=r(n(18)),h=r(n(41)),m=r(n(2118));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}function g(e){h.default.sendEvent(h.default.TITLES.GUEST_SIGN_UP_CLICK_BANNER,h.default.COMPONENTS.GUEST_SIGN_UP_BANNER,(0,c.default)({},h.default.PARAMS.USER_ACTION,e))}var E=function(e){(0,s.default)(n,e);var t=v(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this;if(!f.default.isGuest())return null;var t=p.default.translateWithItems("guest-registration-banner.content",{signUp:d.default.createElement("u",null,p.default.translate("guest-registration-banner.sign-up"))});return d.default.createElement("div",{className:"guest-registration-banner"},d.default.createElement("div",{className:"guest-registration-banner__content-wrapper"},d.default.createElement("span",{className:"guest-registration-banner__content",onClick:function(){e.props.openRegistrationForm(),g("sign_up")}},t),d.default.createElement("span",{className:"guest-registration-banner__close-button",onClick:function(){e.props.hideBanner(),g("close")}},d.default.createElement(m.default,null))))}}]),n}(d.Component);t.default=E},function(e,t,n){var a=n(0);function r(e){return a.createElement("svg",e,a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Icon/Remove---Alt"},a.createElement("path",{d:"M12,4 C7.6,4 4,7.6 4,12 C4,16.4 7.6,20 12,20 C16.4,20 20,16.4 20,12 C20,7.6 16.4,4 12,4 Z M15.5,14.1 L14.1,15.5 L12,13.4 L9.9,15.5 L8.5,14.1 L10.6,12 L8.5,9.9 L9.9,8.5 L12,10.6 L14.1,8.5 L15.5,9.9 L13.4,12 L15.5,14.1 Z",id:"Fill",fill:"#000000",fillRule:"nonzero"}))))}r.defaultProps={width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1"},e.exports=r,r.default=r},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),o=r(n(3)),s=r(n(4)),l=r(n(12)),u=r(n(6)),c=r(n(8)),d=r(n(7)),f=a(n(0)),p=(r(n(2)),n(74)),h=r(n(13)),m=r(n(18)),v=r(n(41)),g=r(n(36)),E=r(n(1183)),_=r(n(930)),y=r(n(1184)),k=r(n(1185)),S=r(n(1194)),T=r(n(1187));function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var C="settings",I="changePassword",O="emailNotifications",A="pushNotifications",N="langSelection",w=function(e){(0,u.default)(n,e);var t=b(n);function n(e){var a;(0,o.default)(this,n),(a=t.call(this,e))._toggleHeaderClass=a._toggleHeaderClass.bind((0,l.default)(a)),a._logout=a._logout.bind((0,l.default)(a)),a._onSectionClick=a._onSectionClick.bind((0,l.default)(a)),a.state={activeSection:C,keyboardOpen:!1,isLandscape:h.default.isLandscape()};var r=h.default.getUser();return a.userFullName=r&&r.nickname||m.default.translate("common.guest"),a.isGuestUser=r.isGuest,a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this._toggleHeaderClass,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._toggleHeaderClass,!0)}},{key:"render",value:function(){return f.default.createElement("div",{className:"mobile-user-settings"},f.default.createElement("div",{className:"mobile-user-settings__header".concat(this.state.isLandscape||this.state.keyboardOpen?" minimize":"")},this._getNavigationButton(),this._renderActiveSectionHeader()),f.default.createElement("div",{className:"mobile-user-settings__content"},this._renderActiveSectionContent()))}},{key:"_toggleHeaderClass",value:function(){this.state.isLandscape===h.default.isLandscape()?this.setState({keyboardOpen:!this.state.keyboardOpen}):this.setState({isLandscape:h.default.isLandscape()})}},{key:"_getNavigationButton",value:function(){var e=this;return this.state.activeSection===C?f.default.createElement("div",{className:"mobile-user-settings__header--close element__icon element__icon--close",onClick:this.props.handleClose}):f.default.createElement("div",{className:"element__icon element__icon--arrow-left",onClick:function(){e.setState({activeSection:C})}})}},{key:"_renderActiveSectionHeader",value:function(){var e;switch(this.state.activeSection){case I:e=f.default.createElement("div",{className:"element__icon element__icon--CIlock-button"});break;case O:e=f.default.createElement("div",{className:"element__icon element__icon--messaging"});break;case A:e=f.default.createElement("div",{className:"element__icon element__icon--notifications"});break;case C:e=f.default.createElement(p.ProfileIcon,null)}return[f.default.createElement("div",{key:"header-text",className:"mobile-user-settings__header--user-name"},m.default.translate("user.settings.section.".concat(this.state.activeSection))),f.default.createElement("div",{key:"header-icon",className:"mobile-user-settings__header--section-icon"},e)]}},{key:"_renderActiveSectionContent",value:function(){switch(this.state.activeSection){case I:return f.default.createElement(_.default,{changePassword:!0,className:"mobile-user-settings__content--change-password"});case O:return f.default.createElement(y.default,{className:"mobile-user-settings__content--email-notifications"});case A:return f.default.createElement(k.default,{className:"mobile-user-settings__content--push-notifications"});case N:return f.default.createElement(T.default,{className:"mobile-user-settings__content--lang-selection",currLocale:h.default.getLocale(),locales:m.default.getAvailableContentLocales()});default:case C:return this._getUserSettingsSections()}}},{key:"_getUserSettingsSections",value:function(){var e=this;if(this.isGuestUser)return f.default.createElement("div",{className:"guest-user-section"},this._renderSignUpButton(),this._renderSignUpButton(!0));var t=E.default._getUserSettingsSections();return f.default.createElement("div",{className:"mobile-user-settings__content--settings"},f.default.createElement("div",{className:"mobile-user-settings-profile"},f.default.createElement("div",{className:"profile-title"},m.default.translate("user.settings.profileName")),f.default.createElement("div",{className:"profile-name"},this.userFullName)),f.default.createElement("div",{className:"mobile-user-settings-sections"},t.map((function(t){return f.default.createElement("div",{key:"mobile-user-settings-".concat(t.key),className:"mobile-user-settings-pane__section"},f.default.createElement(g.default,{text:m.default.translate("user.settings.section.".concat(t.key)),onClick:function(){return e._onSectionClick(t.key)},styleClass:"mobile-user-settings-pane__section-button"}))}))),f.default.createElement(g.default,{text:m.default.translate("user-menu.logout"),onClick:this._logout,styleClass:"mobile-user-settings-logout"}))}},{key:"_renderSignUpButton",value:function(e){var t=this;return f.default.createElement(S.default,{buttonClassName:"user-menu__settings mobile-user-settings-login",renderSignUpForm:function(){t.props.openRegistrationForm(e?{showLoginFirst:!0}:null),v.default.sendEvent(v.default.TITLES.SELECT_FROM_USER_MENU,v.default.COMPONENTS.USER_MENU,(0,i.default)({},v.default.PARAMS.USER_ACTION,e?"login":"sign_up"))},isLogin:e})}},{key:"_logout",value:function(){v.default.sendEvent(v.default.TITLES.SELECT_FROM_USER_MENU,v.default.COMPONENTS.USER_MENU,(0,i.default)({},v.default.PARAMS.OPTION,"logout")),this.props.handleLogout()}},{key:"_onSectionClick",value:function(e){this.setState({activeSection:e})}}]),n}(f.Component);t.default=w,w.defaultProps={handleLogout:function(){},handleClose:function(){},openRegistrationForm:function(){}}},function(e,t,n){"use strict";var a=n(5),r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3)),o=r(n(4)),s=r(n(6)),l=r(n(8)),u=r(n(7)),c=a(n(0)),d=(r(n(2)),r(n(490)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return c.default.createElement("div",{className:"mobile-search-wrapper"},c.default.createElement("div",{className:"header"},c.default.createElement("div",{className:"element__icon element__icon--arrow-left",onClick:this.props.closeMobileSearch}),c.default.createElement(d.default,{onSearchItemClick:this.props.onSearchItemClick,getSearchResultsContainer:n.getMobileSearchResultsContainer})))}}],[{key:"getMobileSearchResultsContainer",value:function(e){return c.default.createElement("div",{className:"mobile-search-results"},e)}}]),n}(c.Component);t.default=p,p.defaultProps={closeMobileSearch:function(){},onSearchItemClick:function(){}}}],[[1320,0,1]]]);