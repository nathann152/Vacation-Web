(window.webpackJsonpecho=window.webpackJsonpecho||[]).push([[15],{1236:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PagesConsumer=t.PagesProvider=void 0;var i=a(n(0)).default.createContext(null),r=i.Provider;t.PagesProvider=r;var o=i.Consumer;t.PagesConsumer=o;var s=i;t.default=s},1294:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),n(608)),p=n(258),h=i(n(21)),m=i(n(13)),v=n(1236);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=["EMBED_WEBSITE__default","EMBED_WEBSITE__wix","IMAGE__default","AUDIO__default","TEXT__default"],y=["TEXT__default","IMAGE__default","VIDEO__default","AUDIO__default","EMBED_WEBSITE__default","EMBED_WEBSITE__wix"],_=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={renderOverlayElementComponent:!1},a.handleOverlayElementClicked=a.handleOverlayElementClicked.bind((0,s.default)(a)),a.renderOverlayElementComponent=a.renderOverlayElementComponent.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e,t){t.renderOverlayElementComponent!==this.state.renderOverlayElementComponent&&this.props.onToggleTaskGroupOverlay(this.props.page,this.state.renderOverlayElementComponent)}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,a=t.taskGroupConfig,i=t.pageSizeFactor,r=t.shouldReloadTaskGroup,o=t.shouldRenderMustCompleteMessage,s=t.channelId,l=t.ciName,c=t.clk,u=t.communicator,h=t.ciResultsHidden;if(!n.taskGroup||!n.taskGroupModel)return null;var m="function"==typeof o;return d.default.createElement(d.default.Fragment,null,d.default.createElement(v.PagesConsumer,null,(function(t){return d.default.createElement(f.TaskGroupOverlay,{pageSizeFactor:i,presentation:n.taskGroup.presentation,handleOverlayElementClicked:e.handleOverlayElementClicked,defaultTaskGroupConfig:a,hideOverlayActions:!0,closeOverlayFromPlayerCallback:function(t,a){e.setState({renderOverlayElementComponent:!1}),m&&o(!t&&n.cid),a&&e.tryGoNextPage()},updateCompletedTaskCountCallback:function(e){var i,r;Object.keys(null!==(i=null==n||null===(r=n.taskGroupModel)||void 0===r?void 0:r.tasks)&&void 0!==i?i:[]).indexOf(e.taskId)>=0&&(m&&o(!1),t.updatePageLock(e.updateCount>0,n.cid)),"function"==typeof a.updateCompletedTaskCountCallback&&a.updateCompletedTaskCountCallback(e)},isReadOnly:!1,isEditable:!1,taskGroupOptions:{enableShowAnswers:a.viewMode===p.VIEW_MODE.ASSESSMENT,enableHint:!1},shouldReloadTaskGroup:r,isPreview:a.isPreview,communicator:u,channelId:s,ciName:l,clk:c,ciResultsHidden:h,notInCurrentPage:e.props.notInCurrentPage})})),this.renderOverlayElementComponent(n.cid))}},{key:"tryGoNextPage",value:function(){var e=this.props,t=e.page,n=e.jumpNext,a=Object.keys(t.taskGroup.presentation);1===a.length&&t.taskGroup.presentation[a[0]].displayType===h.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.FULL_PAGE&&n(t)}},{key:"renderOverlayElementComponent",value:function(){return this.state.renderOverlayElementComponent?this.overlayElementComponent:null}},{key:"handleOverlayElementClicked",value:function(e,t,n){(n||this.isTaskClickable(e))&&(this.overlayElementComponent=d.default.createElement("div",{className:"hotspot-triggered-interaction"},t(e,{hideOverlayActions:!1})),this.setState({renderOverlayElementComponent:!0}))}},{key:"isTaskClickable",value:function(e){var t=this.props.page,n=h.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.OVERLAY,a=t.taskGroup.presentation[e];if(!a)return!1;if(a.displayType===n&&a.interactionType){var i;if(m.default.isPC()&&(null===(i=a.properties)||void 0===i?void 0:i.embeddedAnswer))return!1;if((m.default.isMobile()||m.default.isTablet())&&-1!==E.indexOf(a.interactionType))return!1;if(!m.default.isMobile()&&!m.default.isTablet()&&-1!==y.indexOf(a.interactionType))return!1}return!0}},{key:"submitAssessment",value:function(e){this.taskGroupRef&&this.taskGroupRef.submitAssessment(e)}}]),n}(d.Component);_.defaultProps={onToggleTaskGroupOverlay:function(){},pageSizeFactor:1,shouldReloadTaskGroup:!1,shouldRenderMustCompleteMessage:function(){},channelId:"",ciName:"",clk:"",communicator:null,ciResultsHidden:!1,notInCurrentPage:!1};var S=_;t.default=S},2168:function(e,t,n){"use strict";var a=n(1),i=a(n(40)),r=a(n(9)),o=a(n(43)),s=a(n(3)),l=a(n(4)),c=a(n(61)),u=a(n(72)),d=a(n(82)),f=a(n(105)),p=a(n(2811)),h=a(n(0)),m=a(n(24)),v=a(n(18)),g=a(n(21)),E=a(n(154)),y=a(n(13)),_=a(n(28)),S=a(n(53)),T=a(n(945)),b=a(n(2263)),I=a(n(44)),k=a(n(2816)),C=a(n(2817)),O=a(n(2213)),P=n(2199),N=a(n(2457)),A=a(n(2324));n(2887);var L=a(n(41));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=_.default.Instance,D=S.default.LogManager;e.exports=function(){function e(t,n){(0,s.default)(this,e),this.addToolbar=this.addToolbar.bind(this),this._getSecondaryToolbarDefault=this._getSecondaryToolbarDefault.bind(this),this.updateToolbar=this.updateToolbar.bind(this),this.updateCustomElement=this.updateCustomElement.bind(this),this._goBack=this._goBack.bind(this),y.default.setAppdata(n.appData),y.default.setUser(n.user),this._isHostToolbarSet=!1,this._hostChannel=t,this._loggerParams=n.appData.appConf.loggerParams,this._locale=n.appData.appConf.locale,this._direction=y.default.getLocaleDirection(this._locale),this._token=n.token,this._toolbarAddedElementsCallbacks={},this._customHeaders={},this._channelData={},n.ltiSessionId&&(y.default.setIsLtiSession(!0),Object.assign(this._customHeaders,{"t2k-lti_sessionid":n.ltiSessionId})),n.xapiSession&&(y.default.setIsXapiSession(!0),Object.assign(this._customHeaders,{"t2k-xapisession":!0})),(0,f.default)(this._customHeaders)||w.setCustomHeaders(this._customHeaders),this._messageRouter=new k.default(this._hostChannel,this._token,this._customHeaders,{terminate:this._terminate.bind(this),buttonClicked:this._buttonClicked.bind(this),open:this._open.bind(this)},this._onEvent.bind(this)),this._initApi(),this._init()}return(0,l.default)(e,null,[{key:"_getMetadata",value:function(e,t){var n=(0,p.default)(e,["clk","clk_draft","contextItemId","contextItemType","contextItemVersion","moduleLevelId"]);return n.channelId=t,w.get(O.default.GET_METADATA_URL,{},{params:n,failOnOffline:!0})}},{key:"_initLogger",value:function(e){var t={userAgent:navigator.userAgent,userId:y.default.getUser().id,appId:"Engage",appVersion:"0.6908.0"},n=e,a=O.default.LOGGER_URL;D.registerLogger("playanywhere",t,n,{default_tag:"default_tag value"},a),D.log("playanywhere",{message:"playanywhere ".concat("0.6908.0")})}}]),(0,l.default)(e,[{key:"_initApi",value:function(){this._engageApi={setStage:this._setStage.bind(this),setNav:this._setNav.bind(this),setLoader:this._setLoader.bind(this),goBack:this._goBack.bind(this)}}},{key:"_init",value:function(){var t=this,n=y.default.getAppdata(),a=n.appConf.featureFlags.demo;O.default.setDomain(n.backend_url,a).then((function(){e._initLogger(t._loggerParams),t._messageRouter.addDispatcher(),t._isInited=!0,t._openConfig&&t._open(t._openConfig.channel,t._openConfig.data,t._openConfig.callback)})).catch((function(e){try{D.error({message:"Error on Engage App init: ".concat(JSON.stringify(e))})}catch(t){console.error("Error on Engage App init",e)}}))}},{key:"_setTools",value:function(e){var t=y.default.getAppdata(),n=t.appConf.featureFlags,a=n.discussion&&n.discussion.enabled,i=!y.default.isLearner()||y.default.isFeatureEnabled("showReportsToLearner");this._toolbar={tools:[{id:"downloader",config:{isActive:T.default.isSupport()&&!this._isPreview&&y.default.isLearner()&&y.default.isOnline()&&!y.default.isCordovaOffline()}},{id:"ciResultsLock",config:{isActive:("assessment"===e||this._isCIAssessment)&&t.appConf.featureFlags.isCiResultsLocked&&!this._isPreview&&y.default.isInstructor()}},{id:"qna",config:{isActive:a&&"assessment"!==e&&!this._isCIAssessment&&!this._isPreview&&y.default.isUserShowLeaderboardAndDiscussion(this._channelSeparatedGroups)}},{id:"reports",config:{isActive:i&&!this._isPreview&&!y.default.isCordovaOffline()&&(y.default.isMobile()?y.default.isInstructor():y.default.isInstructor()||y.default.isLearner())&&y.default.isFeatureEnabled("reports")}},{id:"whatsapp",config:{isActive:y.default.isMobile()&&!this._isPreview&&y.default.isInstructor()}},{id:"lock",config:{isActive:!this._isPreview&&y.default.isInstructor()}},{id:"quickNavigation",config:{isActive:this._isQuickNavigationEnabled()}},{id:"quickNavigation-next",config:{isActive:this._isQuickNavigationEnabled(),mode:"next"}},{id:"quickNavigation-prev",config:{isActive:this._isQuickNavigationEnabled(),mode:"prev"}}]}}},{key:"_isQuickNavigationEnabled",value:function(){return void 0===this.isQuickNavigationEnabled&&(this.isQuickNavigationEnabled=y.default.isFeatureEnabled("quickNavigation")&&!this._isPreview&&y.default.isLearner()&&!!this._quickNavigationInfo),this.isQuickNavigationEnabled}},{key:"_open",value:function(t,n,a){var i=this;if(this._isInited){if(this._openCallback=a,this._hash=n.hash,this._queryParams=n.queryParams,this._isDirect=n.queryParams.direct,this._channelId=n.queryParams.channelId,this._contextItemId=n.queryParams.contextItemId,this._contextItemType=n.queryParams.contextItemType,this._isPreview=n.queryParams.clk_draft,this._el=document.getElementById(n.targetId),this._el.classList.add(this._direction),this._clk=n.queryParams.clk,this._pageIndex=n.queryParams.pageIndex,y.default.isXapiSession()&&n.queryParams.xapiContext){var r=JSON.parse(decodeURIComponent(n.queryParams.xapiContext));r.actor=(0,d.default)(r.actor)?JSON.parse(r.actor):r.actor,this._xapiContext=r,y.default.setXapiContext(r),this._messageRouter.addDispatcher(g.default.DISPATCHER_TYPES.XAPI,r.endpoint,[g.default.EVENT_TYPES.CI_LOADED,g.default.EVENT_TYPES.CI_TERMINATED],{xapiContext:r})}Promise.all([this._getChannelData(),y.default.getRolesByContext({channelId:this._channelId}),e._getMetadata(n.queryParams,this._channelId),y.default.getChannelSeparatedGroups(this._channelId)]).then((function(e){var t=(0,o.default)(e,4),a=t[0],r=t[1],s=t[2],l=t[3];if(i._channelSeparatedGroups=a.properties.groupTypeSeparator&&l,i._contentItemId=s.contentItemId,i._channelData=a,y.default.setRoles(r.roles),i._setHostToolbar(i._isDirect),y.default.setIsLocked(s.isLocked),y.default.setIsReportLocked(!!s.isReportLocked),s.quickNavigationConfig){var u=s.quickNavigationConfig,d=u.parentItemId,f=u.parentItemName,p=u.parentItemType,h=u.parentItemVersion,m=u.nextItemClk,E=u.prevItemClk,_=u.moduleLevelId;i._quickNavigationInfo={id:d,name:f,type:p,version:h,moduleLevelId:_,nextClk:m,prevClk:E}}i._assignmentId=s.assignmentId,i._isCIAssessment=s.isAssessment,i._enableAssessmentTryAgain=s.itemChannelProperties&&s.itemChannelProperties.assessmentTryAgain&&s.itemChannelProperties.assessmentTryAgain.enable,i._content=M(M({},s.content),{},{assetsUri:y.default.getAppdata().assets_prefix}),i._remainingTimeInSeconds=s.remainingTimeInSeconds,i.isScheduledAssessmentCompleted=s.isScheduledAssessmentCompleted,i._player=s.player,i._player.additionalPlayerInfo=i._player.additionalPlayerInfo||{},i._player.additionalPlayerInfo.previewMode=i._isPreview,i._player.additionalPlayerInfo.previewMode&&(document.title=v.default.translate("tab.title.preview")),i._player.additionalPlayerInfo.pageIndex=(0,c.default)(i._pageIndex)?0:Number(i._pageIndex),i._player.additionalPlayerInfo.playerUrl=y.default.getAppdata().appConf.dbp.uri,i._player.additionalPlayerInfo.interactions=M(M({},i._player.additionalPlayerInfo.interactions),y.default.getAppdata().appConf.interactions),i._player.additionalPlayerInfo.interactions.context=Object.assign(i._player.additionalPlayerInfo.interactions.context||{},n.queryParams.contextItemType===g.default.LIBRARY_ITEM_CONTEXT_TYPE.MODULE?{moduleId:n.queryParams.contextItemId,moduleVersion:parseInt(n.queryParams.contextItemVersion,10)}:{}),i._setTools(i._player.playerType),i._render()})).catch((function(e){e&&"offline"===e.message||D.error("playanywhere",{message:"Error on engage open: ".concat(JSON.stringify(e))}),403===e.status?m.default.render(h.default.createElement("div",{className:"engage-blocked-channel"},h.default.createElement("div",{className:"content"},v.default.translate("engage-blocked-channel_content")),h.default.createElement("a",{href:"#",onClick:function(){return E.default.setStage("library")}},v.default.translate("engage-blocked-channel_back-button"))),i._el):i._renderUnavailable(e),a({error:!0})}));var s=E.default.getStage();this._messageRouter.sendTo(this._hostChannel,"setNav",{id:"echoPlayer",hash:n.hash,queryParams:n.queryParams,options:{ignoreParams:"echoPlayer"===s.appId&&s.queryParams.channelId===this._channelId}}),this._prevContextType=n.queryParams.contextItemType}else this._openConfig={channel:t,data:n,callback:a}}},{key:"_getChannelData",value:function(){return w.get(O.default.GET_CHANNEL,{channelId:this._channelId},{failOnOffline:!0}).then((function(e){return{channelName:"$%EDITOR_CHANNEL_NAME"===e.properties.name?void 0:e.properties.name,channelType:e.properties.type,properties:e.properties}}))}},{key:"_renderUnavailable",value:function(e){var t="offline"===e.message?h.default.createElement(b.default,null):h.default.createElement(N.default,{error:e.data});m.default.render(h.default.createElement("div",{className:"engage__container"},t),this._el)}},{key:"_setHostToolbar",value:function(e){this._hostToolbar=this._getInitialHostToolbar(y.default.getAppdata().appConf.featureFlags.demo,e),this._messageRouter.sendTo(this._hostChannel,"setConfig",this._hostToolbar)}},{key:"_getInitialHostToolbar",value:function(e,t){var n={toolbar:{id:"player",hideTrialIndicator:!0,cordova:{backId:"back"},ignoreScrollEvents:!0}},a=[];return t||y.default.isReviewer()||y.default.isLtiSession()||y.default.isXapiSession()||a.push({type:g.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{iconName:"close",id:"back",isClickable:!0,mixPanel:{params:(0,r.default)({},L.default.PARAMS.TYPE,L.default.TOOLBAR_ELEMENTS.BACK)}}}),n.toolbar.primary=a,n.toolbar.secondary=this._getSecondaryToolbarDefault(),n.toolbar.auxiliary=[],n}},{key:"_getSecondaryToolbarDefault",value:function(){var e=y.default.getAppdata().appConf.featureFlags;return[].concat(y.default.isCordovaOffline()||y.default.isMobile()||y.default.isReviewer()||y.default.isLtiSession()||y.default.isXapiSession()?[]:[{type:g.default.TOOLBAR_ELEMENT_TYPE.USER_MENU,config:{separator:!0}}]).concat(e.help&&!y.default.isCordovaOffline()?[{type:g.default.TOOLBAR_ELEMENT_TYPE.HELP}]:[]).concat(e.notifications&&!y.default.isCordovaOffline()&&(y.default.isInstructor()||y.default.isLearner()&&e.assignment&&e.assignment.enabled)?[{type:g.default.TOOLBAR_ELEMENT_TYPE.NOTIFICATIONS,config:{channelId:this._channelId}}]:[]).concat(e.messaging&&!y.default.isCordovaOffline()&&(y.default.isLearner()||y.default.isInstructor())?[{type:g.default.TOOLBAR_ELEMENT_TYPE.MESSAGING,config:{channelId:this._channelId}}]:[]).concat(y.default.isFeatureEnabled("leaderboard")&&!y.default.isCordovaOffline()&&y.default.isUserShowLeaderboardAndDiscussion(this._channelSeparatedGroups)?[{type:g.default.TOOLBAR_ELEMENT_TYPE.LEADERBOARD,config:{channelId:this._channelId,orgGroups:this._channelSeparatedGroups}}]:[]).concat(y.default.isCordovaOffline()||!y.default.isFeatureEnabled("coronaPromotion")&&!y.default.isFeatureEnabled("liveSession")||!y.default.isLearner()&&!y.default.isInstructor()?[]:[{type:g.default.TOOLBAR_ELEMENT_TYPE.LIVE_SESSION,config:{channelId:this._channelId,channelName:this._channelData.properties.name,isSessionLeader:y.default.isInstructor(),canCreateSession:y.default.isInstructor(),sessionType:this._channelData.properties.presetType?y.default.getLiveSessionVendorType(this._channelData.properties.presetType):void 0}}]).reverse()}},{key:"_getFullHostToolbar",value:function(e){var t=this._isQuickNavigationEnabled();return e.toolbar.primary.push({type:g.default.TOOLBAR_ELEMENT_TYPE.TITLE,config:{subtitle:this._channelData.channelName,title:this._barTitle,shouldCompress:t}}),e}},{key:"_addToolbar",value:function(e,t,n,a){n.config&&n.config.first?t.toolbar[e].unshift(n):t.toolbar[e].push(n),n.config.callback&&(this._toolbarAddedElementsCallbacks[n.config.id]=n.config.callback),n.config.styleTag&&(t.styleTag=n.config.styleTag),this._messageRouter.sendTo(this._hostChannel,"setConfig",t,a)}},{key:"_updateToolbar",value:function(e,t,n,a){var i=t.toolbar[e].findIndex((function(e){return e.config.id===n.config.id}));t.toolbar[e][i]=n,this._toolbarAddedElementsCallbacks[n.config.id]=n.config.callback||function(){},this._messageRouter.sendTo(this._hostChannel,"setConfig",t,a)}},{key:"_updateCustomElement",value:function(e){this._messageRouter.sendTo(this._hostChannel,"updateElement",{id:e.id,config:e.config})}},{key:"_onLessonMetadata",value:function(){this._isHostToolbarSet||(this._isHostToolbarSet=!0,this._barTitle=this._lessonMetadata.name,this._hostToolbar=this._getFullHostToolbar(this._hostToolbar),this._messageRouter.sendTo(this._hostChannel,"setConfig",this._hostToolbar))}},{key:"_terminate",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this._isHostToolbarSet=null,this._barTitle=null,this._channelData={},this._isDirect=null,this._channelId=null,this._clk=null,this._isPreview=null,this._content=null,this._player=null,this._openConfig=null,this._lessonMetadata=null,this._hostToolbar=null,this._showCustomBackButton=null,this._queryParams=null,this._messageRouter.clean((function(){m.default.render(h.default.createElement("div",null),n._el,a)}))}},{key:"_goBack",value:function(){this._quickNavigationInfo=null,this.isQuickNavigationEnabled=void 0,this._messageRouter.sendTo(this._hostChannel,"close")}},{key:"_buttonClicked",value:function(e,t,n){"back"===t.id?(y.default.isCordovaOffline()&&I.default.goToOfflineHtml({workOffline:!0}),this._player&&"fuse"===this._player.playerType&&A.default.needToShowExitDialog()&&this._engageContainer?this._engageContainer.toggleFuseExitDialog(this._goBack.bind(this)):this._goBack()):this._toolbarAddedElementsCallbacks[t.id]&&this._toolbarAddedElementsCallbacks[t.id](t),n()}},{key:"_setStage",value:function(e,t,n){n(),this._messageRouter.sendTo(this._hostChannel,"setStage",t)}},{key:"_setNav",value:function(e,t,n){n(),t.queryParams||(t.queryParams=this._queryParams),this._messageRouter.sendTo(this._hostChannel,"setNav",t)}},{key:"_setLoader",value:function(e){this._messageRouter.sendTo(this._hostChannel,"setLoader",e)}},{key:"_render",value:function(){var e=this;m.default.render(h.default.createElement(C.default,{ref:function(t){e._engageContainer=t},toolbar:this._toolbar,messageRouter:this._messageRouter,className:y.default.getPlatformClasses(),locale:this._locale,remainingTimeInSeconds:this._remainingTimeInSeconds,isScheduledAssessmentCompleted:this.isScheduledAssessmentCompleted,player:this._player,token:this._token,clk:this._clk,content:this._content,channelId:this._channelId,channelData:this._channelData,contextItemId:this._contextItemId,contextItemType:this._contextItemType,contentItemId:this._contentItemId,assignmentId:this._assignmentId,enableAssessmentTryAgain:this._enableAssessmentTryAgain,onPlayerReady:this._openCallback,addToolbar:this.addToolbar,updateToolbar:this.updateToolbar,updateCustomElement:this.updateCustomElement,customHeaders:this._customHeaders,engageApi:this._engageApi,xapiContext:this._xapiContext,showCustomBackButton:this._showCustomBackButton,showCustomBackButtonCb:this._goBack,hash:this._hash,goBack:this._goBack,quickNavigationInfo:this._quickNavigationInfo,isAssessment:this._isCIAssessment}),this._el)}},{key:"addToolbar",value:function(e,t,n){this._hostToolbar&&this._addToolbar(e,this._hostToolbar,t,n)}},{key:"updateToolbar",value:function(e,t,n){this._hostToolbar&&this._updateToolbar(e,this._hostToolbar,t,n)}},{key:"updateCustomElement",value:function(e){this._hostToolbar&&this._updateCustomElement(e)}},{key:"_onEvent",value:function(e,t){switch(e){case P.MESSAGE_TYPE.LESSON_METADATA:this._lessonMetadata=t,this._onLessonMetadata();break;case P.MESSAGE_TYPE.TOOL_BUTTONS:this._setToolButtons(t.buttons,t.callback);break;case P.MESSAGE_TYPE.CONTROL_TOOLBAR:this._controlToolbar(t.toolbar,t.callback)}}},{key:"_setToolButtons",value:function(e,t){var n,a=this;e=e.map((function(e){return t&&(a._toolbarAddedElementsCallbacks[e.id]=t),a._hostToolbar.toolbar.secondary=a._hostToolbar.toolbar.secondary.filter((function(t){return!t.config||t.config.id!==e.id})),{type:e.type?e.type:g.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{iconName:e.iconName||e.id,id:e.id,isClickable:!("isClickable"in e)||e.isClickable,isDisabled:e.isDisabled,isSelected:e.isActive,indicator:e.indicator,title:e.title,quickAccess:e.quickAccess,metadata:e.metadata,label:e.label,iconSize:e.iconSize,hasStateOn:e.hasStateOn,className:e.className}}}));var r=this._hostToolbar.toolbar.secondary.findIndex((function(e){return e.config&&!e.config.first}));-1===r&&(r=this._hostToolbar.toolbar.secondary.length),(n=this._hostToolbar.toolbar.secondary).splice.apply(n,[r,0].concat((0,i.default)(e))),this._toolbarControled||this._messageRouter.sendTo(this._hostChannel,"setConfig",this._hostToolbar)}},{key:"_controlToolbar",value:function(e,t){var n=this;if(!e)return this._toolbarControled=!1,void this._messageRouter.sendTo(this._hostChannel,"setConfig",this._hostToolbar);Object.keys(e).forEach((function(a){(0,u.default)(e[a])&&e[a].forEach((function(e){t&&e.config&&e.config.id&&(n._toolbarAddedElementsCallbacks[e.config.id]=t)}))})),this._toolbarControled=!0,this._messageRouter.sendTo(this._hostChannel,"setConfig",{toolbar:e})}}]),e}()},2185:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(9)),l=i(n(3)),c=i(n(4)),u=i(n(13)),d=i(n(28)),f=i(n(78)),p=i(n(601)),h=i(n(2204)),m=i(n(21)),v=i(n(604)),g=i(n(355)),E=n(2227),y=i(n(600)),_=a(n(2207));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=d.default.Instance,I=function(){function e(){(0,l.default)(this,e)}var t,n;return(0,c.default)(e,null,[{key:"getChannels",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/withRoles"),{},{params:{id:e},failOnOffline:!0})}},{key:"getChannelContent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{contentOrderBy:"publishExtraData.serverPublishDate",contentSortOrder:"DESC"},i=T({},a);return u.default.isEditor(g.default.instance.contextRole)||(i.isPublished="true"),t&&t.length&&(i.type=t.join(",")),n&&n.state&&n.state.length&&(i.state=n.state.join(",")),n&&n.permissionFilter&&(n.permissionFilter.allowedAction&&n.permissionFilter.allowedAction.length>0&&(i.allowedAction=n.permissionFilter.allowedAction.join(",")),n.permissionFilter.disallowAction&&n.permissionFilter.disallowAction.length>0&&(i.disallowAction=n.permissionFilter.disallowAction.join(","))),b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/:channelId/content"),{channelId:e},{params:i,failOnOffline:!0})}},{key:"getCourseTemplate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/channelTemplate/:channelId"),{channelId:e},{params:{includeContent:t},failOnOffline:!0})}},{key:"getChannelAssignments",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/:channelId/assignments"),{channelId:e},{failOnOffline:!0})}},{key:"getTree",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/contentTree"),{},{params:{id:e},failOnOffline:!0})}},{key:"updateChannelSettings",value:function(t){var n={name:t.name,externalId:t.externalId||"",iconHref:t.coverImageUrl||"",description:t.description||"",groupTypeSeparator:t.groupTypeSeparator||"",categoryIds:t.categories&&t.categories.length?t.categories:[""],membersNotifications:t.membersNotifications};return"boolean"==typeof t.isAllowedForGuests&&(n.isAllowedForGuests=t.isAllowedForGuests),e._updateChannel(t.id,n)}},{key:"updateChannelScheduling",value:function(t){var n={status:t.status,startDate:t.startDate||m.default.NULL_VALUES.DATE,endDate:t.endDate||m.default.NULL_VALUES.DATE,daysToComplete:t.daysToComplete||m.default.NULL_VALUES.NUMBER,hideWhenEnded:t.hideWhenEnded};return e._updateChannel(t.id,n)}},{key:"_updateChannel",value:function(e,t){return b.put("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/:channelId"),{channelId:e},t)}},{key:"navigateToChannel",value:function(e,t,n,a,i,r,o){if(i){var s={entityId:t,entityType:E.CONTEXT.CHANNEL,roles:a,actions:i};f.default.addPermissions(s)}a&&g.default.instance.setContextRole(t,a),e(this.getChannelPageUrl(t,n,r,o))}},{key:"navigateToCourseTemplate",value:function(e,t,n,a,i){e(this.getCourseTemplatePageUrl(t,n,a,i))}},{key:"navigateToMasterCourse",value:function(e,t,n,a,i){e(this.getMasterCoursePageUrl(t,n,a,i))}},{key:"getCourseTemplatePageUrl",value:function(e,t,n,a){var i=encodeURIComponent(t),r=encodeURIComponent(a);return"".concat(_.COURSE_TEMPLATE,"/").concat(n,"/").concat(r,"/").concat(e,"/").concat(i)}},{key:"getMasterCoursePageUrl",value:function(e,t,n,a){var i=encodeURIComponent(t),r=encodeURIComponent(a);return"".concat(_.MASTER_COURSE,"/").concat(n,"/").concat(r,"/").concat(e,"/").concat(i)}},{key:"navigateToMasterCourseAggregationPage",value:function(e,t,n){e(this.getMasterCourseAggregationPageUrl(t,n))}},{key:"getMasterCourseAggregationPageUrl",value:function(e,t){var n=encodeURIComponent(t);return"".concat(_.MASTER_COURSE_AGGREGATION,"/").concat(e,"/").concat(n)}},{key:"navigateToCI",value:function(e,t,n,a,i){e(this.getChannelPageUrl(t,n,a,i))}},{key:"getChannelPageUrl",value:function(e,t,n,a,i){var r=encodeURIComponent(t),o="".concat(_.CHANNEL,"/").concat(e,"/").concat(r);if(n&&(o+="?tab=".concat(n),a&&(o+="&id=".concat(a))),i){var s=i.contentStructureCid,l=i.version;o+="?structureId=".concat(s),l&&(o+="&version=".concat(l))}return o}},{key:"cloneLibraryItem",value:(n=(0,o.default)(r.default.mark((function t(n,a,i,o){var s,l,c;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={isPublished:a,targetChannelId:i},t.next=3,b.post("".concat(g.default.instance.backendUrl,"/LibraryService/library/items/:libraryItemId/clone"),{libraryItemId:n},void 0,{params:s});case 3:return l=t.sent,t.next=6,e.getChannelById(i);case 6:if(c=t.sent,!o){t.next=12;break}return t.next=10,h.default.addContentItemToLevel({structureId:o.structureId,structureVersion:o.version,itemId:l.contentId,channelId:i,levelId:o.levelId});case 10:t.next=15;break;case 12:if(c.properties.type!==m.default.CHANNEL_TYPE.COURSE){t.next=15;break}return t.next=15,h.default.addContentItemToLevel({structureId:c.contentStructure.contentStructureCid,structureVersion:c.contentStructure.version,itemId:l.contentId,channelId:i});case 15:return t.abrupt("return",l);case 16:case"end":return t.stop()}}),t)}))),function(e,t,a,i){return n.apply(this,arguments)})},{key:"cloneChannel",value:function(e,t,n){var a={channelId:e,userRolesToClone:t,cloneByRef:n};return b.post("".concat(g.default.instance.backendUrl,"/PlayAppService/library/clone/channel"),void 0,void 0,{params:a})}},{key:"addNewChannel",value:function(t){var n={name:t.name,iconHref:t.coverImageUrl,description:t.description||"",groupTypeSeparator:t.groupTypeSeparator||"",categoryIds:t.categories,membersNotifications:t.membersNotifications};return"string"==typeof t.externalId&&(n.externalId=t.externalId),"string"==typeof t.type&&(n.type=t.type),"boolean"==typeof t.isAllowedForGuests&&(n.isAllowedForGuests=t.isAllowedForGuests),b.post("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels"),{},n).then((function(e){return e.properties.type===m.default.CHANNEL_TYPE.COURSE?h.default.createStructure({name:t.name},e.id).then((function(){return e})).catch((function(){return e})):e})).finally((0,o.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getChannels();case 2:v.default.allChannelsWithRoles=t.sent;case 3:case"end":return t.stop()}}),t)}))))}},{key:"addNewCourseTemplate",value:(t=(0,o.default)(r.default.mark((function e(t){var n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={channelProperties:{name:t.name,iconHref:t.coverImageUrl,description:t.description||""},workspaceId:t.channelId},t.isMasterChannelWorkspace&&(n.channelProperties.isMasterChannelWorkspace=!0,n.templateType=m.default.TEMPLATE_TYPE.MASTER_CHANNEL),e.next=4,b.post("".concat(g.default.instance.backendUrl,"/PlayAppService/channelTemplate"),{},n);case 4:return a=e.sent,e.next=7,h.default.createStructure({name:t.name},a.id,"channelTemplateId");case 7:return e.abrupt("return",T(T({},a),{},{properties:a.channelProperties}));case 8:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"updateCourseTemplate",value:function(e){var t={name:e.name,iconHref:e.coverImageUrl,description:e.description||""};return b.put("".concat(g.default.instance.backendUrl,"/PlayAppService/channelTemplate/:id"),{id:e.id},t)}},{key:"deleteCourseTemplate",value:function(e){return b.remove("".concat(g.default.instance.backendUrl,"/PlayAppService/channelTemplate/:id"),{id:e})}},{key:"deleteChannel",value:function(e){var t={channelId:e};return b.remove("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels"),{},{params:t})}},{key:"getChannelsUserIsEditorIn",value:function(t){var n=[],a=[];return y.default.log({message:"getChannelsUserIsEditorIn called"}),new Promise((function(i,r){e.getChannels().then((function(e){y.default.log({message:"Channels loaded"});var r={};return e&&e.length>0&&(e.forEach((function(e){e.roles.includes("EDITOR")&&(e.id===t?r={channelId:e.id,channelName:e.properties.name}:n.push({channelId:e.id,channelName:e.properties.name}))})),a.push(r),n.forEach((function(e){return a.push(e)}))),i(a)})).catch((function(e){return y.default.error({message:"Problem with loading channels, ".concat(JSON.stringify(e))}),r(e)}))}))}},{key:"addMembersToChannel",value:function(e,t){return b.post("".concat(g.default.instance.backendUrl,"/LibraryService/channels/").concat(e,"/members"),{},t)}},{key:"getChannelMembers",value:function(e,t,n){var a={params:{status:t,role:n}};return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/:channelId/members"),{channelId:e},a)}},{key:"getChannelState",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/state"),{channelId:e})}},{key:"setChannelState",value:function(e,t){var n={channelId:e,state:t};return b.put("".concat(g.default.instance.backendUrl,"/PlayAppService/v2/channels/state"),{},n)}},{key:"getChannelById",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/:channelId"),{channelId:e})}},{key:"getChannelStructure",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=T({},n);return t&&t.length&&(a.type=t.join(",")),b.get("".concat(g.default.instance.backendUrl,"/PlayAppService/v2/channels/:channelId/structure"),{channelId:e},{params:a})}},{key:"getAllChannels",value:function(){return b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels"))}},{key:"getLearnerAssignments",value:function(){return u.default.isLearner?b.get("".concat(g.default.instance.backendUrl,"/LibraryService/v2/channels/assignments")):Promise.resolve(null)}},{key:"getLinkedStructures",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/PlayAppService/contentStructure/contentItem/{contentId}?contentId=").concat(e))}},{key:"getTopics",value:function(e,t){var n={};n.contentVersion=t;var a="".concat(g.default.instance.backendUrl,"/PlayAppService/content/:contentItemId/topics");return b.get(a,{contentItemId:e},{params:n})}},{key:"getChannelsWhichUseCourseStructure",value:function(e){return b.get("".concat(g.default.instance.backendUrl,"/PlayAppService/contentStructure/:courseStructureCid/channels"),{courseStructureCid:e})}},{key:"deleteLibraryItem",value:function(e,t){return b.remove("".concat(g.default.instance.backendUrl,"/LibraryService/library/channels/:channelId/items/:itemId"),{channelId:e,itemId:t})}},{key:"deleteLibraryItemByEditor",value:function(t,n){return p.default.obtainLock(n,t).then((function(a){return a.acknowledged?e.deleteLibraryItem(t,n).then((function(e){return p.default.releaseLock(n,t),e})).catch((function(e){return p.default.releaseLock(n,t),Promise.reject(e)})):new Promise((function(e,t){t({lockResponse:a})}))}))}},{key:"deleteCourseStructure",value:function(e){return b.remove("".concat(g.default.instance.backendUrl,"/PlayAppService/contentStructure/:courseStructureCid"),{courseStructureCid:e})}},{key:"addFileToChannel",value:function(e,t){var n=[{type:t.type,properties:{name:t.name,fileSizeInBytes:t.size,downloadLink:t.link}}];return b.post("".concat(g.default.instance.backendUrl,"/LibraryService/content"),{},n,{params:{channelId:e}})}},{key:"getAllChannelCategories",value:function(){return b.get("".concat(g.default.instance.backendUrl,"/PlayAppService/category/list"))}}]),e}();t.default=I},2187:function(e,t,n){"use strict";var a=n(1)(n(21));e.exports=a.default.LIBRARY_ITEM_TYPES},2189:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2284)).default;t.default=i},2192:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(13)),r={GET_TASK_COMPLETION_REPORTS_DATA:"/ReportsService/report/questionAnalysis",EXPORT_TASK_COMPLETION_REPORTS_DATA:"/ReportsService/report/questionAnalysis/export",GET_STUDENT_PARTICIPANTS_DATA:"/ReportsService/report/participants",EXPORT_STUDENT_PARTICIPANTS_DATA:"/ReportsService/report/participants/export",DOWNLOAD_ANSWERS_REPORT:"/ReportsService/report/answers/export",DOWNLOAD_LIVE_SESSION_REPORT:"/ReportsService/report/liveSession/export",GET_STUDENT_REPORTS_DATA:"/ReportsService/report/studentPerformance",GET_TASK_REPORT_DATA:"/ReportsService/report/question",GET_PERFORMANCE_SUMMARY_REPORTS_DATA:"/ReportsService/report/performancesSummary",GET_CHANNELS_DATA:"/ReportsService/channels",GET_CHANNEL_CONTENT_DATA:"/ReportsService/channels/:channelId/content",GET_CONTENT_ITEM_VERSIONS:"/ReportsService/channels/:channelId/content/:contentId",GET_PATH_USER_STATES:"/LibraryService/library/paths/:pathId/userStates",GET_METADATA_URL:"/PlayAppService/play",SEND_EVENTS:"/Interactions/statesAndEvents",RESET_CI:"/ReportsService/reset",RESET_TASK:"/ReportsService/reset/task",LOGGER_URL:"/PlayAppService/log",GET_LIVE_SESSIONS:"/PlayAppService/liveSession/details",GET_LIVE_SESSION_PARTICIPANTS:"/ReportsService/report/liveSession/participants",GET_CHANNEL_MEMBERS:"/PlayAppService/v2/channels/:channelId/members/invited/count",GET_CHANNEL_GROUPS:"/ReportsService/channels/:channelId/groups",GET_RECOMMENDATION_ITEMS:"/PlayAppService/recommendation/nextItems",GET_QUICKSIGHT_URL:"/ReportsService/bi/embedded/QS/dashboards/embeddedURL/:awsDashboardId",GET_EVENT_ATTENDANCE:"/ReportsService/report/offPlatformEvent/participants",UPDATE_USER_EVENT_ATTENDANCE:"/PlayAppService/offPlatformEvents/:channelId/userStates",UPDATE_ALL_USERS_EVENT_ATTENDANCE:"/PlayAppService/offPlatformEvents/:channelId/userStates/all",GET_EVENT:"/PlayAppService/offPlatformEvents/:offPlatformEventId/version/:version",HEATMAP_REPORT:"/ReportsService/dwh/v1/reports/results",GET_HEATMAP_FILTERS:"/ReportsService/dwh/v1/reports/:reportId/filters/:filterId",DOWNLOAD_REPORT:"/ReportsService/dwh/v1/reports/results/export",HEATMAP_OVERRIDE_SCALE:"/ReportsService/dwh/v1/reports/heatmap/overrideScales",HEATMAP_RESTORE_DEFAULT_SCALE:"/ReportsService/dwh/v1/reports/heatmap/overrideScales/users/:userId/tags/:tagId",NEWS_REPORT_USERS_ELIGIBILITY:"/ReportsService/report/newsReportUsersEligibility"};r.setDomain=i.default.setDomainFactory("backend_url",r);var o=r;t.default=o},2199:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VIEW_TYPE=t.CONTAINER_TYPE=t.MESSAGE_TYPE=void 0;var a={MOVE:"MOVE",LESSON_METADATA:"LESSON_METADATA",STOP:"STOP",RESUME:"RESUME",BREAK:"BREAK",CI_LOADED:"CI_LOADED",CI_TERMINATED:"CI_TERMINATED",EVENT_END:"EVENT_END",USER_ACTIVITY:"USER_ACTIVITY",TOOL_BUTTONS:"TOOL_BUTTONS",CONTROL_TOOLBAR:"CONTROL_TOOLBAR",REGISTER_TOOL_INTERCEPTOR:"REGISTER_TOOL_INTERCEPTOR"};t.MESSAGE_TYPE=a;var i={NONE:"NONE",FILL:"FILL",PARTIAL:"PARTIAL"};t.CONTAINER_TYPE=i;var r={EXPANDED:"EXPANDED",COLLAPSED:"COLLAPSED"};t.VIEW_TYPE=r;var o={MESSAGE_TYPE:a,CONTAINER_TYPE:i,VIEW_TYPE:r};t.default=o},2200:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(23)),o=a(n(0)),s=(a(n(2)),a(n(606))),l=a(n(18));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=(0,r.default)({},e),n=function(){for(var e={},t=0;t<30;t++){var n="BOOK.TYPE."+t,a=l.default.translate(n);n!==a&&(e[t]=a)}return e}();return o.default.createElement(s.default,u(u({},t),{},{translations:n}))};d.VIEW_SIZES=s.default.VIEW_SIZES;var f=d;t.default=f},2201:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(235)),s=a(n(602)),l=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getDateStringByLocale",value:function(e,t){return o.default.getDateStringByLocale(e,t)}},{key:"getDateString",value:function(t){return e.getDateStringByLocale(new Date,t)}},{key:"getShortDateByLocale",value:function(e,t){return o.default.getDateStringByLocale(e,t,{month:"short",day:"numeric"})}},{key:"getLtrByLocale",value:function(e){switch(e){case"he_IL":case"ar":return!1;default:return!0}}},{key:"getShortDateDescription",value:function(t,n,a,i,r,o){var l=new Date,c=Math.floor((l-t)/36e5);return 0===c?[a]:1===c?[i]:l.toDateString()===t.toDateString()?s.default.assignLanguageParameters(r,c):s.default.assignLanguageParameters(o,e.getDateStringByLocale(t,n))}}]),e}();t.default=l},2204:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2291)).default;t.default=i},2207:function(e,t,n){"use strict";e.exports={REGULAR:"regular",CHANNEL:"channel",CERTIFICATE:"certificate",STRUCTURE:"structure",BI_REPORT:"biReport",COURSE_TEMPLATE:"courseTemplate",MASTER_COURSE:"masterCourse",MASTER_COURSE_AGGREGATION:"masterCourseAggregation"}},2209:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(13)),r={LOGGER_URL:"/PlayAppService/log",GET_CHANNELS_DATA:"/PlayAppService/dashboard/channels",GET_MASTER_CHANNEL_INSTANCES_DATA:"/PlayAppService/dashboard/masterChannelInstances",GET_PERFORMANCE_SUMMARY_REPORTS_DATA:"/PlayAppService/dashboard/channels/:channelId/performancesSummary",GET_CHANNEL_CONTENT_DATA:"/ReportsService/channels/:channelId/content",GET_ADDITIONAL_INFO:"/PlayAppService/dashboard/channels/:channelId/additionalInfo",GET_MASTER_CHANNEL_ADDITIONAL_INFO:"/PlayAppService/dashboard/masterChannels/:masterChannelId/additionalInfo",GET_EDITOR_ADDITIONAL_INFO:"/PlayAppService/dashboard/channels/:channelId/editorInfo",GET_CERTIFICATES_SUMMARY:"/PlayAppService/dashboard/certificatesStatusSummary",GET_ANTI_VIRUS_SCAN_STATUS:"/PlayAppService/antiVirus/scan/status",GET_FUTURE_ACTIVITY_EVENTS:"/PlayAppService/widget/activityEvents/future",GET_ONGOING_ACTIVITY_EVENTS:"/PlayAppService/widget/activityEvents/ongoing",GET_CALENDAR_ACTIVITY_EVENTS:"/PlayAppService/widget/activityEvents/calendar",GET_CHANNEL_OVERVIEW:"/PlayAppService/widget/channelOverview",GET_USER_PROFILE:"/PlayAppService/widget/profile",GET_CATALOG_ITEMS:"/PlayAppService/catalogItems",GET_MULTIPLE_ACTIVE_LIVE_SESSIONS:"/PlayAppService/liveSession/channel/multiple"};r.setDomain=i.default.setDomainFactory("backend_url",r);var o=r;t.default=o},2213:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(13)),r={GET_METADATA_URL:"/PlayAppService/play",GET_USER:"/PlayAppService/users/:userId",LOGGER_URL:"/PlayAppService/log",SEND_EVENTS:"/Interactions/statesAndEvents",SEND_USER_APP_STATE:"/PlayAppService/userAppState",GET_DISCUSSIONS:"/NotificationService/discussions",ADD_NEW_DISCUSSION:"/NotificationService/discussion",ADD_NEW_COMMENT:"/NotificationService/discussion/comment",GET_DISCUSSION_INFO:"/NotificationService/discussions/:discussionId/info",GET_ALL_DISCUSSION_COMMENTS:"/NotificationService/discussion/comments/discussions/:discussionId",GET_NEW_DISCUSSION_COUNT:"/NotificationService/discussion/channels/:channelId/libraryItems/:libraryItemId/badge",SET_USER_STATE:"/PlayAppService/state/page",GET_CHANNEL:"/LibraryService/v2/channels/:channelId",GET_ASSIGNMENT:"/LibraryService/assignments/:assignmentId",GET_ASSIGNMENT_STATE:"/LibraryService/assignments/:assignmentId/userState",UPDATE_ASSIGNMENT_STATE:"/LibraryService/assignments/userState",SET_CI_LOCK:"/LibraryService/library/items/lock",SET_CI_UNLOCK:"/LibraryService/library/items/lock",SET_CI_RESULTS_LOCK:"/LibraryService/library/items/report/lock",GET_PATH_ITEMS:"/LibraryService/library/paths/:pathId/items",GET_MODULE_ITEMS:"/PlayAppService/modules/:moduleId/version/:version/items",GET_VIDEO_DISCUSSION_TOKEN:"/PlayAppService/annoto/token",IS_ITEM_AVAILABLE:"/PlayAppService/isItemAvailable",GET_UNIFIED_CI_MANIFEST:"/PlayAppService/ucontent/:contentId/version/:contentVersion/manifest",GET_SLIDE_TO_PAGE_CID_MAP:"/PlayAppService/ucontent/:contentId/version/:contentVersion/slideToPageMap",GET_IS_CI_RESULTS_HIDDEN:"/PlayAppService/library/items/report/lock",GET_SCORM_STATE:"/PlayAppService/states/scorm/:conversionResultId"};r.setDomain=i.default.setDomainFactory("backend_url",r);var o=r;t.default=o},2214:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(33)),r=a(n(34)),o=a(n(3)),s=a(n(4)),l=a(n(176)),c=a(n(28)),u=a(n(53)),d=a(n(2209)),f=a(n(355)),p=c.default.Instance,h=u.default.LogManager,m=!1,v=function(){function e(){(0,o.default)(this,e)}var t;return(0,s.default)(e,null,[{key:"uploadFile",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.default.storeFile.apply(l.default,[{serviceUrl:f.default.instance.backendUrl,accessToken:f.default.instance.accessToken}].concat(t))}},{key:"getExternalFileUploadLink",value:function(e){return l.default.getExternalFileUploadLink(e,f.default.instance.backendUrl,f.default.instance.accessToken)}},{key:"uploadExternalFileToLink",value:function(e,t,n,a){return l.default.uploadFileToLinkAndReturnDownloadLinkPromise({file:e,link:n},t,a)}},{key:"uploadFileAndReturnDownloadLink",value:function(e,t,n){return l.default.uploadFileAndReturnDownloadLink(e,f.default.instance.backendUrl,f.default.instance.accessToken,t,n,"LibraryService/getUploadLink")}},{key:"antiVirusScanForDownloadLink",value:(t=(0,r.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=setInterval((function(){return m?(clearInterval(a),m=!1,n("ABORTED"),null):p.get(d.default.GET_ANTI_VIRUS_SCAN_STATUS,{},{params:{assetKey:t}}).then((function(t){switch(t.scanStatus){case"PENDING":break;case"INFECTED":clearInterval(a),n(t);break;case"CLEAR":clearInterval(a),e(t);break;default:clearInterval(a),n("server responded ".concat(t.message))}})).catch((function(t){clearInterval(a),h.error({message:"Antivirus failed ".concat(t.message?t.message:JSON.stringify(t))}),e()}))}),3e3)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getAnalyzedFileType",value:function(e){return l.default.getAnalyzedFileType(e,f.default.instance.backendUrl,f.default.instance.accessToken)}},{key:"cancelProcess",value:function(){m=!0}}]),e}();t.default=v},2215:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(23)),o=i(n(3)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var p=function(e){(0,l.default)(n,e);var t=f(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"componentDidMount",value:function(){this.props.focusOnMount&&this.focus()}},{key:"render",value:function(){var e=this;return d.default.createElement("input",(0,r.default)({className:"library-input-text",ref:function(t){e.inputRef=t}},this.props))}},{key:"focus",value:function(){this.inputRef.focus()}}]),n}(d.Component);p.defaultProps={focusOnMount:!1};var h=p;t.default=h},2217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CERTIFICATE_EXPIRATION_PERIOD=t.CERTIFICATE_MODEL_VERSION=t.CERTIFICATE_COVER_SIZE=t.CERTIFICATE_TYPE=t.CERTIFICATE_MENU_ACTIONS=t.CERTIFICATE_LEARNER_STATE=t.CERTIFICATE_STATUS=void 0;t.CERTIFICATE_STATUS={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",ARCHIVED:"ARCHIVED"};t.CERTIFICATE_LEARNER_STATE={IN_PROGRESS:"IN_PROGRESS",CERTIFIED:"CERTIFIED"};t.CERTIFICATE_MENU_ACTIONS={EDIT:"EDIT",ACTIVATE:"ACTIVATE: ACTIVATE",DEACTIVATE:"DEACTIVATE",SHOW_REPORTS:"SHOW_REPORTS",ARCHIVE:"ARCHIVE"};t.CERTIFICATE_TYPE={ACCOUNT_CERTIFICATE:"ACCOUNT_CERTIFICATE",LEARNER_CERTIFICATE:"LEARNER_CERTIFICATE",USER_CERTIFICATE:"USER_CERTIFICATE"};t.CERTIFICATE_COVER_SIZE={WIDTH:250,HEIGHT:130};t.CERTIFICATE_MODEL_VERSION={V1:1,V2:2,V3:3};t.CERTIFICATE_EXPIRATION_PERIOD={MONTH:"MONTH",DAY:"DAY"}},2221:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(33)),r=a(n(34)),o=a(n(3)),s=a(n(4)),l=a(n(28)),c=a(n(2204)),u=a(n(355)),d=a(n(600)),f=l.default.Instance,p=function(){function e(){(0,o.default)(this,e)}var t,n;return(0,s.default)(e,null,[{key:"createNewEvent",value:(n=(0,r.default)(i.default.mark((function e(t,n,a){var r,o,s,l,d,p,h,m,v,g,E,y,_,S,T,b,I,k;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,o=n.image,s=n.location,l=n.liveSessionEvent,d=n.description,p=n.allDayEvent,h=n.startDate,m=n.endDate,v=n.hasScore,g=n.shouldPublish,E=n.notificationEnabled,y=n.sendInvitationImmediately,_=n.calendarInviteEnabled,S=n.courseTemplateId,T=n.trainingResources,b={name:r,image:o,location:s,liveSessionEvent:l,description:d,allDayEvent:p,startDate:h,endDate:m,hasScore:v,calendarInviteEnabled:_,version:1,trainingResources:T},g&&(b.state="PUBLISHED",b.notificationEnabled=E,b.sendInvitationImmediately=y),I={},S&&(I={params:{courseTemplateId:S}}),e.next=7,f.post("".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents/:channelId"),{channelId:t},b,I);case 7:if(k=e.sent,!(a&&a.structureId&&k.cid)){e.next=11;break}return e.next=11,c.default.addContentItemToLevel({structureId:a.structureId,structureVersion:a.version,itemId:k.cid,channelId:t,levelId:a.levelId});case 11:return e.abrupt("return",k);case 12:case"end":return e.stop()}}),e)}))),function(e,t,a){return n.apply(this,arguments)})},{key:"updateEvent",value:function(e,t,n,a,i,r,o,s,l,c,p,h,m,v,g,E,y){var _={channelId:e,cid:t,version:n,name:a,location:i,liveSessionEvent:r,description:o,image:s,allDayEvent:l,startDate:c,endDate:p,hasScore:h,calendarInviteEnabled:E,trainingResources:y};return m&&(_.state="PUBLISHED",_.notificationEnabled=v,_.sendInvitationImmediately=g),f.put("".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents"),{},_).catch((function(e){d.default.error({message:"Failed to update off platform event, ".concat(JSON.stringify(e))})}))}},{key:"unpublishEvent",value:function(e,t,n){var a={cid:e,version:t,channelId:n};return f.put("".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents/unpublish"),{},a).catch((function(e){d.default.error({message:"Failed to unpublish off platform event, ".concat(JSON.stringify(e))})}))}},{key:"deleteOffPlatformEvent",value:function(e){return f.remove("".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents/:offPlatformEventId"),{offPlatformEventId:e}).catch((function(e){d.default.error({message:"Failed to delete off platform event, ".concat(JSON.stringify(e))})}))}},{key:"updateUserEventState",value:(t=(0,r.default)(i.default.mark((function e(t,n,a,r,o){var s,l,c=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.length>5&&void 0!==c[5]?c[5]:0,l={offPlatformEventId:n,offPlatformEventVersion:a,usersStates:[{state:{attended:o,completion:{completionDate:new Date.now,isCompleted:!0},score:s},userId:r}]},e.next=4,f.put("".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents/:channelId/userStates"),{channelId:t},l);case 4:case"end":return e.stop()}}),e)}))),function(e,n,a,i,r){return t.apply(this,arguments)})},{key:"getUserOffPlatformEventState",value:function(e,t,n){var a="".concat(u.default.instance.backendUrl,"/PlayAppService/offPlatformEvents/:offPlatformEventId/userStates/:userId");return f.get(a,{offPlatformEventId:t,userId:e},{params:{channelId:n}}).catch((function(e){d.default.error({message:"Failed to get user off platform event state, ".concat(JSON.stringify(e))})}))}}]),e}();t.default=p},2227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONTEXT=void 0;var a={ACCOUNT:"ACCOUNT",SITE:"SITE",CHANNEL:"CHANNEL",GROUP:"GROUP"};t.CONTEXT=a;var i=a;t.default=i},2228:function(e,t,n){"use strict";e.exports={LIBRARY:"library",LESSON_EDITOR:"lessonEditor",BUZZ_EDITOR:"buzz",FUSE_EDITOR:"fuseEditor",CI_EDITOR:"ciEditor",REPORTS:"reports",PLAYER:"echoPlayer",STORE:"store",CATALOG:"catalog"}},2229:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2296));n(2297);var r=i.default;t.default=r},2239:function(e,t,n){"use strict";e.exports={DRAFT:0,MODIFIED:1,PUBLISHED:2}},2240:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EXTERNAL_FILE_UPLOAD_STATUS=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(176)),l=a(n(28)),c=a(n(601)),u=a(n(355));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=l.default.Instance,h={ABORTED:0};t.EXTERNAL_FILE_UPLOAD_STATUS=h;var m=!1,v=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"handleServerResponse",value:function(e){return e.ok||e.status<400?Promise.resolve(e):Promise.reject(e)}},{key:"getUploadPercentage",value:function(e){return e.loaded/e.total*100}},{key:"handleStateChange",value:function(e,t,n){4===e.readyState&&(e.status<=400&&e.status>0?t(e):(0===e.status&&n(h.ABORTED),n(e.responseText)))}},{key:"createFuse",value:function(e,t,n,a,i,r){var o={properties:{name:e,locale:t,image:n},externalContentId:i};a&&a.clk&&a.type&&(o.fuseContentToClone={clk:a.clk,type:a.type});var s={channelId:r};return p.post("".concat(u.default.instance.backendUrl,"/LessonEditorService/fuse"),{},o,{params:s})}},{key:"updateFuse",value:function(e,t,n){if(!e&&!t)return Promise.resolve();var a={fuse:f({},e)};return t&&t.clk&&t.type&&(a.fuseContentToClone={clk:t.clk,type:t.type}),c.default.obtainLock(e.id,n).then((function(t){return t.acknowledged?p.put("".concat(u.default.instance.backendUrl,"/LessonEditorService/fuse"),{},a).then((function(t){return c.default.releaseLock(e.id,n),t})).catch((function(t){return c.default.releaseLock(e.id,n),Promise.reject(t)})):new Promise((function(e,n){n({lockResponse:t})}))}))}},{key:"getFuseItem",value:function(e,t){return p.get("".concat(u.default.instance.backendUrl,"/LessonEditorService/fuse/:id/version/:version"),{id:e,version:t})}},{key:"getExternalFileUploadLink",value:function(e){return e?p.get("".concat(u.default.instance.backendUrl,"/LibraryService/getUploadLink"),{},{params:{filename:e}}):Promise.reject("no file name argument")}},{key:"startUploadedFileProcessing",value:function(e,t,n){0===n.indexOf("//")&&(n="".concat(window.location.protocol).concat(n));var a={directUrl:t,displayName:e,filepath:n},i="".concat(u.default.instance.backendUrl,"/LessonEditorService/externalContent");return p.post(i,{},a).then((function(e){return Promise.resolve(e.replace(/"/g,""))}))}},{key:"getExternalFileName",value:function(e){return p.get("".concat(u.default.instance.backendUrl,"/LessonEditorService/externalContent/:externalId"),{externalId:e})}},{key:"uploadExternalFileToLink",value:function(e,t,n){return e&&n?new Promise((function(a,i){s.default.uploadFileToLinkAndReturnDownloadLink({file:e,link:n},t,(function(e,t){e?i(e):a(t)}))})).catch((function(e){return Promise.reject(e)})):Promise.reject("no file or upload-link arguments")}},{key:"externalFileStatusPolling",value:function(e,t){return new Promise((function(n,a){var i=setInterval((function(){m?(clearInterval(i),a(h.ABORTED)):p.get("".concat(u.default.instance.backendUrl,"/LessonEditorService/externalContent/status/:pollingId"),{pollingId:t}).then((function(t){switch(t.status){case"STARTED":case"CONVERTING":case"UPLOADING":case"PENDING":e&&e(t.progress,t.message);break;case"DONE":e&&e(t.progress,t.message),clearInterval(i),n(t.ebookId);break;case"MAX_CONVERTS_REACHED":case"FAILED":clearInterval(i),a(t);break;default:clearInterval(i),a("server responded ".concat(t.message))}})).catch((function(e){clearInterval(i),a(e)}))}),500)}))}},{key:"uploadExternalFile",value:function(t,n,a){return t?n?e.startUploadedFileProcessing(t,n,t).then(e.externalFileStatusPolling.bind(this,a)).catch((function(e){return Promise.reject(e)})):e.getExternalFileUploadLink(t.name).then(e.uploadExternalFileToLink.bind(this,t,(function(e){return a(.5*e)}))).then(e.startUploadedFileProcessing.bind(this,t.name,n)).then(e.externalFileStatusPolling.bind(this,(function(e){return a(.5*e+50)}))).catch((function(e){return Promise.reject(e)})):Promise.resolve("")}},{key:"cancelExternalFileUpload",value:function(){m=!0}}]),e}();t.default=v},2246:function(e,t,n){"use strict";e.exports={SHOW_PUBLISH_INFO:"SHOW_PUBLISH_INFO",ONCLICK:"ONCLICK",INVITE:"INVITE",HAVE_EDIT_BTN:"HAVE_EDIT_BTN",CAN_CREATE_NEW:"CAN_CREATE_NEW",SHOW_PROGRESS:"SHOW_PROGRESS",ADD_CHANNEL:"ADD_CHANNEL",PLAY:"PLAY",PREVIEW:"PREVIEW",LOCK:"LOCK",UNLOCK:"UNLOCK",DUPLICATE:"DUPLICATE",EDIT:"EDIT",SETTINGS:"SETTINGS",DELETE:"DELETE",REMOVE:"REMOVE",UNPUBLISH:"UNPUBLISH",PUBLISH:"PUBLISH",SHARE:"SHARE",REPORTS:"REPORTS",PUBLISH_LINK:"PUBLISH_LINK",EXPORT:"EXPORT",CREATE:"CREATE",SHOW:"SHOW"}},2247:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NAME_MAX_LENGTH=t.FORM_MODE=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(9)),l=i(n(3)),c=i(n(4)),u=i(n(12)),d=i(n(6)),f=i(n(8)),p=i(n(7)),h=i(n(236)),m=a(n(0)),v=(i(n(2)),i(n(505))),g=i(n(50)),E=i(n(2265)),y=i(n(126)),_=i(n(176)),S=i(n(18)),T=i(n(58)),b=i(n(611)),I=i(n(601)),k=i(n(11)),C=n(942),O=i(n(13)),P=i(n(357)),N=n(74),A=i(n(21)),L=i(n(41)),R=a(n(603)),M=i(n(37)),w=a(n(216)),D=i(n(327)),x=i(n(604)),U=i(n(2214)),B=i(n(1234)),G=i(n(600)),F=i(n(2201)),H=a(n(2240)),j=a(n(2187)),Y=i(n(2415)),V=i(n(2215)),W=i(n(2200)),z=i(n(2416)),K=i(n(2248));function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var q=j.FUSE,Q=j.CHANNEL,Z=j.COURSE_TEMPLATE,J=j.MASTER_COURSE,$={FORM:0,PROCESS_FILE:1,CROPPER:2,IMAGE_UPLOAD:4},ee={EDIT:0,CREATE:1};t.FORM_MODE=ee;var te={CHANNEL:40,OTHER:1e3};t.NAME_MAX_LENGTH=te;var ne="PRIVATE",ae="PUBLIC",ie=M.default.isTablet,re=function(e){(0,d.default)(a,e);var t,n=X(a);function a(e){var t,i,r,o;(0,l.default)(this,a),(o=n.call(this,e))._toggleImageSearch=o._toggleImageSearch.bind((0,u.default)(o)),o._handleNameChange=o._handleNameChange.bind((0,u.default)(o)),o._generateExternalId=o._generateExternalId.bind((0,u.default)(o)),o._renderNotificationsToggle=function(){var e=o.state.enableNotifications;return m.default.createElement("div",{className:"library-item-settings__settings-section--notifications"},m.default.createElement("div",{className:"library-item-settings__settings-section--notifications-text"},m.default.createElement("span",{className:"text"},S.default.translate("library.item.settings.modal.notifications.title")),m.default.createElement(D.default,{tooltip:S.default.translate("library.item.settings.modal.notifications.tooltip")},m.default.createElement(N.QuestionIcon,{className:"settings-MustCompleteQuestions-box-scorm__checkbox-icon"}))),m.default.createElement("div",{className:"white-space"}),m.default.createElement("div",{className:"library-item-settings__settings-section--notifications-button"},m.default.createElement(w.default,{showTooltip:!1,theme:w.TOGGLE_THEME.CLASSIC,isEnabled:e,onUserChangeState:function(e){L.default.sendEvent(L.default.TITLES.SET_NOTIFICATIONS_CHANNEL,o.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,e)),o.setState({enableNotifications:e})}})))},o._handleDescriptionChange=o._handleDescriptionChange.bind((0,u.default)(o)),o._handleSelectChange=o._handleSelectChange.bind((0,u.default)(o)),o._updateRadioButtonsMode=o._updateRadioButtonsMode.bind((0,u.default)(o)),o._handleDone=o._handleDone.bind((0,u.default)(o)),o._isDoneDisabled=o._isDoneDisabled.bind((0,u.default)(o)),o._handleCancel=o._handleCancel.bind((0,u.default)(o)),o._handleClose=o._handleClose.bind((0,u.default)(o)),o._handleDeleteImage=o._handleDeleteImage.bind((0,u.default)(o)),o._handleFileUploadChange=o._handleFileUploadChange.bind((0,u.default)(o)),o._handleImageSuggestionSelection=o._handleImageSuggestionSelection.bind((0,u.default)(o)),o._getFuseData=o._getFuseData.bind((0,u.default)(o));var c=e.defaultValues,d=e.locale,f=e.channelType,p=e.allCategories;o.cropSize={width:A.default.COVER_IMAGE_RATIO.WIDTH,height:A.default.COVER_IMAGE_RATIO.HEIGHT},o.shouldRenderLanguageField=e.libraryItemType!==Q&&e.libraryItemType!==Z&&e.libraryItemType!==J&&!o.props.hideLanguageField,o.shouldRenderExternalIdField=e.libraryItemType===Q,o.shouldRenderAccessPermissions=e.libraryItemType===Q&&O.default.isFeatureEnabled("allowChannelPublicAccess")&&"EDITOR"!==f;var h=S.default.getAvailableContentLocales(),v=d;-1===h.indexOf(v)&&(v=h[0]);var g=e.libraryItemType===Q?P.default.fromChannelNameToTitle(c.name):c.name,E=(null!==(t=null==e?void 0:e.membersNotifications)&&void 0!==t?t:null===(i=O.default.getAppdata().appConf)||void 0===i||null===(r=i.channelSettings)||void 0===r?void 0:r.learnersNotifications)||(null==e?void 0:e.membersNotifications);return o.state={name:g,language:c.itemLanguage||v,coverImageUrl:c.coverImageUrl,isAllowedForGuests:c.isAllowedForGuests||!1,description:c.description,externalId:c.externalId,groupTypeSeparator:c.groupTypeSeparator||"",mode:$.FORM,uploadProgress:!1,submitError:"",disableDoneOnSubmit:!1,searchOpen:!ie,lastSearchString:null,groupTypesForDdl:[],allCategories:p,selectedCategories:c.categories,shouldGenerateExternalId:e.formMode===ee.CREATE,enableNotifications:E},o._initMixpanel(e),o._onGroupTypeSeparatorDdlChange=o._onGroupTypeSeparatorDdlChange.bind((0,u.default)(o)),o._onCategoriesChange=o._onCategoriesChange.bind((0,u.default)(o)),o}return(0,c.default)(a,[{key:"_initMixpanel",value:function(e){this.mixPanelComponent=L.default.COMPONENTS.CREATE_CONTENT_DIALOG,this.mixPanelTitle=L.default.TITLES.INTERACT_WITH_CONTENT_ITEM_DIALOG,e.libraryItemType===Q&&(this.mixPanelComponent=L.default.COMPONENTS.CREATE_CHANNEL_DIALOG,this.mixPanelTitle=L.default.TITLES.INTERACT_WITH_CHANNEL_ITEM_DIALOG)}},{key:"componentDidMount",value:function(){var e=this,t=this.state.groupTypeSeparator,n=""===t,a=[{id:"",label:S.default.translate("library.item.settings.modal.group-ddl.placeholder"),selected:n,className:"dropdown-component__option none-option"}];O.default.getChannelGroupTypes().then((function(n){(0,h.default)(n,(function(e){var n={id:e.id,label:e.type};t===(null==e?void 0:e.id)&&(n.selected=!0),a.push(n)})),e.setState({groupTypesForDdl:a})})),this.props.libraryItemType===q&&this.props.formMode===ee.EDIT&&this._getFuseData(this.props.defaultValues.id,this.props.defaultValues.version)}},{key:"componentWillUnmount",value:function(){this.props.defaultValues.id&&this.props.defaultValues.channelId&&I.default.releaseLock(this.props.defaultValues.id,this.props.defaultValues.channelId)}},{key:"render",value:function(){var e=this._getTranslation(),t=[{id:"cancel",text:e.cancel,type:T.default.BUTTON_TYPES.SECONDARY,onClick:this._handleCancel},{id:"done",text:e.done,type:T.default.BUTTON_TYPES.PRIMARY,onClick:this._handleDone,disabled:this._isDoneDisabled()}],n=(0,k.default)("library-item-settings",{"cropper-mode":this.state.mode===$.CROPPER},{"course-settings":this.props.libraryItemType===Q},{"allow-guest-user":this.shouldRenderAccessPermissions});return m.default.createElement(T.default,{theme:T.default.THEMES.LIGHT,styleClass:n,title:e.title,content:this.state.mode===$.CROPPER?this._renderCropper():this._renderContent(),actions:t,customActions:this.state.mode!==$.CROPPER&&this.props.courseSettingsActions,close:this._handleClose})}},{key:"_getTranslation",value:function(){if(this.state.mode===$.CROPPER)return{title:S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CROPPER.TITLE"),done:S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CROPPER.DONE_BTN"),cancel:S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CROPPER.CANCEL_BTN")};var e,t=z.default.getTypeForTranslate(this.props.libraryItemType,this.props.fileType);return t===K.default.ASSESSMENT||t===K.default.PRESENTATION?e=S.default.translate("CONTENT_EDITOR.CREATE_BOOK_FEMALE.TITLE").replace(/\$1/g,S.default.translate("BOOK.TYPE."+t)):(t===K.default.CHANNEL&&this.props.channelType===A.default.CHANNEL_TYPE.STREAM&&(t=K.default.STREAM),e=S.default.translate("CONTENT_EDITOR.CREATE_BOOK.TITLE").replace(/\$1/g,S.default.translate("BOOK.TYPE."+t))),{title:this.props.formMode===ee.EDIT?S.default.translate("CONTENT_EDITOR.CREATE_BOOK.EDIT_TITLE"):e,done:this.props.formMode===ee.EDIT?S.default.translate("CONTENT_EDITOR.CREATE_BOOK.SAVE_BTN"):S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CREATE_BTN"),cancel:this.state.mode===$.FORM?S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CANCEL_BTN"):S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CANCEL_UPLOAD_BTN")}}},{key:"_renderCropper",value:function(){var e=this;return m.default.createElement("div",{"data-automation-id":"image-cropper",className:"library-item-settings__image-cropper"},m.default.createElement("div",{className:"library-item-settings__image-cropper--text"},S.default.translate("CONTENT_EDITOR.CREATE_BOOK.CROPPER.EXPLANATION_TEXT")),m.default.createElement("div",{className:"library-item-settings__image-cropper--content"},m.default.createElement(v.default,{onInitialized:function(t){e._cropperRef=t},src:this._source,style:{height:360,width:"100%"},initialAspectRatio:this.cropSize.width/this.cropSize.height,zoomOnWheel:!1,guides:!1,autoCropArea:1,toggleDragModeOnDblclick:!1})))}},{key:"_renderContent",value:function(){return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"library-item-settings__content"},this._renderImageSection(),this._renderSettingsSection(),this._renderErrorHandlingSection()),this.state.searchOpen?this._renderImageSuggestionSection():null)}},{key:"_renderImageSuggestionSection",value:function(){return m.default.createElement("div",{className:"image-suggestion-search"},m.default.createElement(b.default,{searchString:null!=this.state.lastSearchString?this.state.lastSearchString:this.state.name,onImgSelected:this._handleImageSuggestionSelection,selectedImageId:this.state.selectedSuggestionImage,mixPanelComponent:this.mixPanelComponent,focusInputOnMount:!1,selectedLanguage:this.state.language}),m.default.createElement("div",{className:"arrow-after"}))}},{key:"_toggleImageSearch",value:function(){L.default.sendEvent(this.mixPanelTitle,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,this.state.searchOpen?"close_search":"search")),this.setState({searchOpen:!this.state.searchOpen})}},{key:"_renderImageSection",value:function(){var e=this,t=-1!==[$.PROCESS_FILE,$.IMAGE_UPLOAD].indexOf(this.state.mode),n=!!this.state.coverImageUrl,a=(0,k.default)("library-item-settings__image-section",{"in-process":t},{"has-cover-image":n});return m.default.createElement("div",{"data-automation-id":"input-form-image",className:a},m.default.createElement("div",{className:"section-title"},S.default.translate("library.item.settings.modal.image.title")),m.default.createElement("input",{type:"file",accept:A.default.IMAGE_VALID_TYPES.join(","),className:"input-form-image-input",ref:function(t){e._uploadImageRef=t},onChange:function(t){e._handleFileUploadChange(t)}}),m.default.createElement("div",{onClick:t?void 0:function(){L.default.sendEvent(e.mixPanelTitle,e.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"upload_image")),e._uploadImageRef.click()},"data-automation-id":"cover-wrapper",className:"cover-wrapper"},m.default.createElement(W.default,{type:this.props.libraryItemType,imgSrc:t?"LOADING":this.state.coverImageUrl,viewMode:"select-image-cover",roles:this.props.libraryItemRoles})),m.default.createElement("div",{className:"btn-wrapper"},m.default.createElement("span",{onClick:this._toggleImageSearch,"data-automation-id":"search-btn-wrapper",className:"search-btn-wrapper ".concat(this.state.searchOpen?" disabled":"")},m.default.createElement(N.SearchIcon,null)),m.default.createElement("span",{"data-automation-id":"upload-btn-wrapper",className:"upload-btn-wrapper",onClick:t?void 0:function(){L.default.sendEvent(e.mixPanelTitle,e.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"upload_image")),e._uploadImageRef.click()}},m.default.createElement(N.UploadIcon,null)),m.default.createElement("span",{onClick:n&&!t?this._handleDeleteImage:void 0,"data-automation-id":"delete-btn-wrapper",className:"delete-btn-wrapper"},m.default.createElement(N.DeleteIcon,null))))}},{key:"_renderSettingsSection",value:function(){var e=this.props,t=e.libraryItemType,n=e.channelType,a=t!==Z&&t!==J&&n!==A.default.CHANNEL_TYPE.EDITOR;return m.default.createElement("div",{className:"library-item-settings__settings-section"},this._renderNameField(),this._renderLanguageField(),this._renderDescriptionField(),a&&this._renderNotificationsToggle(),this._renderExternalIdField(),this._renderPublicAccessSettings(),this._renderOrgGroupsDdl(),this._renderCategories())}},{key:"_renderOrgGroupsDdl",value:function(){var e,t;if(this.props.libraryItemType!==Q||"EDITOR"===this.props.channelType)return null;var n=O.default.getAppdata();if(!(null==n||null===(e=n.appConf)||void 0===e||null===(t=e.groupSeparation)||void 0===t?void 0:t.enabled))return null;var a=this.state,i=a.groupTypesForDdl,r=a.groupTypeSeparator,o=(0,k.default)("library-item-settings__settings-section--org-groups-ddl-container__org-groups-ddl",{placeholder:!r});return m.default.createElement("div",{className:"library-item-settings__settings-section--org-type-area"},m.default.createElement("div",{className:"library-item-settings__settings-section--org-type-area__title"},S.default.translate("learning.group.tab.name.field.group-types-ddl.section-title")),m.default.createElement("div",{className:"library-item-settings__settings-section--org-groups-ddl-container"},m.default.createElement(R.default,{options:i,theme:R.DROPDOWN_THEME.CLASSIC,className:o,onChange:this._onGroupTypeSeparatorDdlChange,ignoreWidth:!0,isArrowByIcon:!0,noBorder:!0})),m.default.createElement("div",{className:"library-item-settings__settings-section--org-type-area__subtitle"},S.default.translate("library.item.settings.modal.group-ddl.explanation")))}},{key:"_onGroupTypeSeparatorDdlChange",value:function(e){var t=e.id;this.setState({groupTypeSeparator:t})}},{key:"_renderCategories",value:function(){return this.state.allCategories&&this.state.allCategories.length&&"EDITOR"!==this.props.channelType?m.default.createElement("div",{className:"library-item-settings__settings-section--categories"},m.default.createElement(E.default,{title:S.default.translate("library.item.settings.modal.categories.title"),items:this.state.allCategories,selectedItems:this.state.selectedCategories,onChange:this._onCategoriesChange,expandableView:!1,hideReset:!0,hideSeparator:!0}),m.default.createElement("div",{className:"library-item-settings__settings-section--categories-text"},S.default.translate("library.item.settings.modal.categories.footer"))):null}},{key:"_onCategoriesChange",value:function(e){this.setState({selectedCategories:e})}},{key:"_renderNameField",value:function(){var e,t=F.default.getLtrByLocale(this.state.language),n=this.props.libraryItemType===Q||this.props.libraryItemType===Z||this.props.libraryItemType===J?te.CHANNEL:te.OTHER,a=(0,k.default)("input-form-name-input",{ltr:t},{rtl:!t});return e=this.props.libraryItemType===Z?"create.course.modal.course-template-name-placeholder":this.props.libraryItemType===J?"create.course.modal.master-course-name-placeholder":this.props.libraryItemType===Q?this.props.channelType===A.default.CHANNEL_TYPE.STREAM?"create.course.modal.stream-name-placeholder":"create.course.modal.course-name-placeholder":"CONTENT_EDITOR.CREATE_BOOK.LESSON_NAME_PLACE_HOLDER",m.default.createElement("div",{className:"library-item-settings__settings-section--name"},m.default.createElement("div",{className:"section-title"},S.default.translate("library.item.settings.modal.name.title")),m.default.createElement(V.default,{value:this.state.name,onChange:this._handleNameChange,placeholder:S.default.translate(e),"data-automation-id":"input-form-name-input",className:a,maxLength:n,focusOnMount:!0,onBlur:this._generateExternalId}),m.default.createElement("span",{className:"required-identifier"},"*"))}},{key:"_handleNameChange",value:function(e){var t=e.target.value;this.setState({name:t,lastSearchString:null})}},{key:"_generateExternalId",value:function(){if(this.shouldRenderExternalIdField&&this.state.shouldGenerateExternalId){var e;if(this.state.name){var t=this.state.name.replace(/  +/g," ").replace(/[&\/\\#,+()$~%.'"`:;=*?!<>{}@^]/g,"").trim().split(" ").join("_"),n=(0,g.default)().format("YYYY-MM-DD-hhmmss");e="".concat(t,"_").concat(n)}this._handleExternalIdChange(e)}}},{key:"_renderDescriptionField",value:function(){return this.props.libraryItemType!==Q&&this.props.libraryItemType!==Z&&this.props.libraryItemType!==J?null:m.default.createElement("div",{className:"library-item-settings__settings-section--description"},m.default.createElement("div",{className:"section-title"},S.default.translate("library.item.settings.modal.description.title")),m.default.createElement("textarea",{placeholder:S.default.translate("create.course.modal.description-placeholder"),maxLength:"250",value:this.state.description,onChange:this._handleDescriptionChange}))}},{key:"_handleDescriptionChange",value:function(e){var t=e.target.value;this.setState({description:t})}},{key:"_renderExternalIdField",value:function(){var e=this;if(!this.shouldRenderExternalIdField)return null;var t=this.props.channelType,n=F.default.getLtrByLocale(this.state.language),a=(0,k.default)("input-form-external-id-input",{ltr:n},{rtl:!n}),i=t===A.default.CHANNEL_TYPE.STREAM?"library.item.settings.modal.stream-id.placeholder":"library.item.settings.modal.course-id.placeholder",r=t===A.default.CHANNEL_TYPE.STREAM?"library.item.settings.modal.stream-id.title":"library.item.settings.modal.course-id.title";return m.default.createElement("div",{className:"library-item-settings__settings-section--external-id"},m.default.createElement("div",{className:"section-title"},S.default.translate(r)),m.default.createElement(V.default,{value:this.state.externalId,onChange:function(t){return e._handleExternalIdChange(t.target.value,!0)},placeholder:S.default.translate(i),"data-automation-id":"input-form-external-id-input",className:a,maxLength:100}))}},{key:"_handleExternalIdChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={externalId:e};this.state.shouldGenerateExternalId&&t&&(n.shouldGenerateExternalId=!1),this.setState(n)}},{key:"_renderLanguageField",value:function(){return this.shouldRenderLanguageField&&this.state.mode!==$.CROPPER?m.default.createElement(Y.default,{isDisabled:this.props.formMode===ee.EDIT,selectedLanguage:this.state.language,onChange:this._handleSelectChange}):null}},{key:"_handleSelectChange",value:function(e){this.setState({language:e})}},{key:"_renderPublicAccessSettings",value:function(){if(!this.shouldRenderAccessPermissions)return null;var e=this.props.channelType;return m.default.createElement("div",{className:"library-item-settings__settings-section--permissions"},m.default.createElement("label",{htmlFor:"permissions__private",className:"library-radio-button control",onChange:this._updateRadioButtonsMode},S.default.translate(e===A.default.CHANNEL_TYPE.STREAM?"CONTENT_EDITOR.CREATE_BOOK.SETTING_MODAL.STREAM_REGISTERED_USERS":"CONTENT_EDITOR.CREATE_BOOK.SETTING_MODAL.REGISTERED_USERS"),m.default.createElement("input",{id:"permissions__private",type:"radio",name:"access-mode",value:ne,defaultChecked:!this.state.isAllowedForGuests}),m.default.createElement("div",{className:"control__indicator"})),m.default.createElement("label",{htmlFor:"permissions__public",className:"library-radio-button control",onChange:this._updateRadioButtonsMode},S.default.translate(e===A.default.CHANNEL_TYPE.STREAM?"CONTENT_EDITOR.CREATE_BOOK.SETTING_MODAL.STREAM_GUEST_USERS":"CONTENT_EDITOR.CREATE_BOOK.SETTING_MODAL.GUEST_USERS"),m.default.createElement("input",{id:"permissions__public",type:"radio",name:"access-mode",value:ae,defaultChecked:this.state.isAllowedForGuests}),m.default.createElement("div",{className:"control__indicator"})))}},{key:"_updateRadioButtonsMode",value:function(e){this.setState({isAllowedForGuests:e.target.value===ae})}},{key:"_renderErrorHandlingSection",value:function(){return this.state.submitError?m.default.createElement("div",{className:"library-item-settings__error-section","data-automation-id":"form-errors-wrapper"},m.default.createElement(y.default,{clamp:"1",ltr:F.default.getLtrByLocale(this.state.language)},this.state.submitError)):null}},{key:"_handleDone",value:(t=(0,o.default)(r.default.mark((function e(){var t,n,a,i,o,l,c,u,d,f,p,h,m,v,g,E,y,S,T,b,I,k,C,O,P=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.formMode,a=t.fileType,(i=this.state.mode)!==$.CROPPER){e.next=12;break}L.default.sendEvent(L.default.TITLES.CROP_IMAGE,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"done")),o={imageSmoothingEnabled:!0,imageSmoothingQuality:"high"},l=Object.assign({},o,this.cropSize),c=this._cropperRef.getCroppedCanvas(l),u=c.toDataURL(),d=_.default.dataUrlToFile(u),this.setState({mode:$.IMAGE_UPLOAD,uploadProgress:0},(function(){P._abortUpload=U.default.uploadFile(d,P._handleUploadProgress.bind(P),P._onUploadDone.bind(P))})),e.next=30;break;case 12:if(i!==$.FORM){e.next=30;break}return p=this.state,h=p.name,m=p.language,v=p.coverImageUrl,g=p.isAllowedForGuests,E=p.description,y=p.groupTypeSeparator,S=p.selectedCategories,T=p.externalId,b=p.enableNotifications,I={name:h.trim(),coverImageUrl:v,fileType:a},E&&(I.description=E),T&&(I.externalId=T),y&&(I.groupTypeSeparator=y),this.props.channelType&&(I.type=this.props.channelType),this.props.libraryItemType===J&&(I.isMasterChannelWorkspace=!0),f={},(0,s.default)(f,L.default.PARAMS.USER_ACTION,"done"),(0,s.default)(f,"content_item_name",I.name),k=f,this.setState({submitError:"",disableDoneOnSubmit:!0}),this.shouldRenderAccessPermissions?(I.isAllowedForGuests=g,k.type=I.isAllowedForGuests?"guests":"registered"):n===ee.EDIT&&this.props.libraryItemType===q&&this.state.originalFuseItem.fuse?I=Object.assign(I,this._setFuseSubmitData()):this.shouldRenderLanguageField&&(I.language=m,k[L.default.PARAMS.LANGUAGE]=m),I.categories=S,I.membersNotifications=b,e.next=27,this.props.onSubmit(I);case 27:C=e.sent,L.default.sendEvent(this.mixPanelTitle,this.mixPanelComponent,k),C&&C.catch?C.catch((function(e){e!==H.EXTERNAL_FILE_UPLOAD_STATUS.ABORTED&&B.default.parseServerError(e).then((function(e){return P.setState({submitError:e})})),P.setState({disableDoneOnSubmit:!1})})):(O=x.default.allChannelsWithRoles.findIndex((function(e){return e.id===P.props.defaultValues.id})))>-1&&(x.default.allChannelsWithRoles[O].properties.membersNotifications=b);case 30:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_setFuseSubmitData",value:function(){var e={},t=this.state.originalFuseItem;return e.fuseData=t.fuse,t.fuse.properties.name!==this.state.name&&(e.fuseData.properties.name=this.state.name),t.fuse.properties.image!==this.state.coverImageUrl&&(e.fuseData.properties.image=this.state.coverImageUrl),e}},{key:"_isDoneDisabled",value:function(){return this.state.mode!==$.CROPPER&&(!!this.state.disableDoneOnSubmit||(this.state.mode===$.IMAGE_UPLOAD||!(this.state.name&&this.state.name.trim())))}},{key:"_handleCancel",value:function(){var e=this.state.mode;e===$.CROPPER?(L.default.sendEvent(L.default.TITLES.CROP_IMAGE,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"cancel")),this.setState({mode:$.FORM,selectedSuggestionImage:null})):e===$.IMAGE_UPLOAD?(this._abortUpload(),this._abortUpload=void 0,this._handleDeleteImage()):(L.default.sendEvent(this.mixPanelTitle,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"exit")),this.props.onCancel())}},{key:"_handleClose",value:function(){this.state.mode===$.IMAGE_UPLOAD&&(this._abortUpload(),this._abortUpload=void 0),L.default.sendEvent(this.mixPanelTitle,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"exit")),this.props.onCancel()}},{key:"_handleDeleteImage",value:function(){var e=this;L.default.sendEvent(this.mixPanelTitle,this.mixPanelComponent,(0,s.default)({},L.default.PARAMS.USER_ACTION,"deleted")),this.setState({mode:$.FORM,coverImageUrl:"",uploadProgress:!1,selectedSuggestionImage:null},(function(){e._uploadImageRef.value="",e._source=void 0}))}},{key:"_handleFileUploadChange",value:function(e){var t=this;if(e.target.files[0]){var n=e.target.files[0];if(O.default.validateImageFileType(n)){var a=new FileReader;a.readAsDataURL(n),a.onload=function(){t._source=a.result,t.setState({mode:$.CROPPER})},a.onerror=function(){t.setState({mode:$.FORM})}}}}},{key:"_handleImageSuggestionSelection",value:function(e){var t=this,n=new XMLHttpRequest,a=new FileReader;n.open("GET",e.url,!0),n.responseType="blob",n.onload=function(){a.readAsDataURL(n.response),a.onload=function(n){t._source=n.target.result,t.setState({mode:$.CROPPER,selectedSuggestionImage:e.id,lastSearchString:e.searchString})}},n.send()}},{key:"_onUploadDone",value:function(e,t){if(this._source=void 0,e)throw e;this.setState({mode:$.FORM,coverImageUrl:t,uploadProgress:!1})}},{key:"_handleUploadProgress",value:function(e){this.setState({uploadProgress:e})}},{key:"_getFuseData",value:function(e,t){var n=this;H.default.getFuseItem(e,t).then((function(e){n.setState({originalFuseItem:e})})).catch((function(t){G.default.error({message:"failed to get fuse id ".concat(e," due to ").concat(JSON.stringify(t))})}))}}]),a}(m.Component);re.defaultProps={libraryItemRoles:[],locale:"en_US",defaultValues:{id:"",version:"",name:"",description:"",coverImageUrl:"",itemLanguage:void 0,isAllowedForGuests:!1,channelId:"",groupTypeSeparator:"",categories:[]},fileType:"",courseSettingsActions:null,channelType:"",hideLanguageField:!1,allCategories:[]};var oe=(0,C.Hoc)((function(e){return{locale:e.locale}}))(re);t.default=oe},2248:function(e,t,n){"use strict";var a=n(1)(n(2417));e.exports=a.default},2260:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CHANNEL_STATUS=void 0;var a={SCHEDULED:"SCHEDULED",ACTIVE:"ACTIVE",STARTED:"STARTED",FINISHED:"FINISHED"};t.CHANNEL_STATUS=a;var i=a;t.default=i},2263:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2289)).default;t.default=i},2264:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2396));n(2261);var r=i.default;t.default=r},2265:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2293)).default;t.default=i},2278:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2279));n(2280);var r=i.default;t.default=r},2279:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(12)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(11)));n(73);var h=i(n(237)),m=i(n(22)),v=i(n(60));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var E=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={showItems:!1,items:[],searchString:"",isLoading:!0},a.handleSearchChange=a.handleSearchChange.bind((0,s.default)(a)),a.handleInputFocus=a.handleInputFocus.bind((0,s.default)(a)),a}return(0,l.default)(n,null,[{key:"_renderLoading",value:function(){return f.default.createElement("ul",{className:"search-dropdown__item-list"},f.default.createElement("li",{className:"search-dropdown__loading"},f.default.createElement(v.default,{size:v.default.Sizes.SMALL,position:v.default.Positions.STATIC})))}}]),(0,l.default)(n,[{key:"componentDidMount",value:function(){this.handleSearchChange("")}},{key:"render",value:function(){var e=(0,p.default)("search-dropdown",(0,r.default)({},this.props.styleClass,!!this.props.styleClass));return f.default.createElement("div",{className:e},this._renderInput(),this._renderItemsArea())}},{key:"_renderInput",value:function(){return f.default.createElement(h.default,{searchPlaceholder:this.props.searchPlaceholder,minSearchLength:this.props.minSearchLength,searchChanged:this.handleSearchChange,onInputFocus:this.handleInputFocus,focusInputOnMount:this.props.focusInputOnMount,ariaLabel:this.props.ariaLabel})}},{key:"_renderItemsArea",value:function(){return this.state.showItems||this.props.keepOpen?this.state.isLoading?n._renderLoading():this.state.items.length>0?this._renderItems():this._renderErrorMessage():null}},{key:"_renderItems",value:function(){var e=this;return f.default.createElement("ul",{className:"search-dropdown__item-list"},this.state.items.map((function(t){return e._renderItem(t)})))}},{key:"_renderItem",value:function(e){var t=this,n=function(){t.props.onItemSelection(e)};return f.default.createElement("li",{className:"search-dropdown__item",onKeyDown:function(e){return 13===e.keyCode&&n()},onMouseDown:n,key:e[this.props.idField]},f.default.createElement("span",{tabIndex:"0",role:"button",className:"search-dropdown__item-name"},e[this.props.labelField]))}},{key:"_renderErrorMessage",value:function(){var e=this.state.searchString?this.props.emptyWithSearchMessage:this.props.emptyMessage;return f.default.createElement("ul",{className:"search-dropdown__item-list"},f.default.createElement("li",{className:"search-dropdown__empty-message"},e))}},{key:"handleSearchChange",value:function(e){var t=this;this.setState({isLoading:!0}),this.props.getItems(e).then((function(n){t.setState({items:n,searchString:e,isLoading:!1})})).catch((function(){t.setState({isLoading:!1})}))}},{key:"handleInputFocus",value:function(e){this.setState({showItems:e})}},{key:"updateItemsByExternalRequest",value:function(){var e=this;this.props.getItems(this.state.searchString).then((function(t){e.setState({items:t})}))}}]),n}(f.Component);E.defaultProps={searchPlaceholder:m.default.translate("search-dropdown.search-placeholder"),emptyMessage:m.default.translate("search-dropdown.empty-message"),emptyWithSearchMessage:m.default.translate("search-dropdown.empty-with-search-message"),minSearchLength:1,focusInputOnMount:!1,keepOpen:!1,styleClass:"",ariaLabel:""};var y=E;t.default=y},2280:function(e,t,n){},2289:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=i(n(22)),f=i(n(359));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return u.default.createElement(f.default,{title:d.default.translate("common.error-page.offline.title"),subTitle:d.default.translate("common.error-page.offline.sub-title"),icon:"offline"})}}]),n}(u.Component);t.default=h},2290:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(9)),l=i(n(3)),c=i(n(4)),u=i(n(12)),d=i(n(6)),f=i(n(8)),p=i(n(7)),h=a(n(0)),m=(i(n(2)),i(n(11))),v=i(n(126)),g=i(n(328)),E=i(n(37)),y=i(n(13)),_=i(n(357)),S=i(n(327)),T=i(n(202)),b=i(n(18)),I=i(n(41)),k=i(n(21)),C=i(n(601)),O=n(1224),P=i(n(2204)),N=i(n(78)),A=n(942),L=i(n(2186)),R=i(n(2264)),M=i(n(945)),w=i(n(44)),D=n(74),x=n(62),U=n(2227),B=i(n(2189)),G=i(n(2185)),F=i(n(602)),H=i(n(355)),j=i(n(334)),Y=i(n(600)),V=i(n(2292)),W=a(n(2187)),z=a(n(2246)),K=a(n(2228)),X=(a(n(2239)),i(n(2200))),q=i(n(2401)),Q=i(n(2328)),Z=i(n(2329)),J=i(n(2446)),$=i(n(2447)),ee=i(n(2330)),te=i(n(2450)),ne=i(n(2451)),ae=i(n(2452)),ie=i(n(2453)),re=i(n(2454)),oe=i(n(2298)),se=i(n(2221)),le=i(n(2332)),ce=n(2217);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var pe=L.default.Hoc,he=g.default.Hoc,me=g.default.Action,ve=g.default.LEVEL,ge=g.default.POSITION,Ee=E.default.isMobile,ye=E.default.isPhone,_e="EXEMPT",Se="LOCKED",Te="HIDDEN",be=k.default.CHANNEL_TYPE,Ie=function(e){(0,d.default)(a,e);var t,n=fe(a);function a(e){var t;return(0,l.default)(this,a),(t=n.call(this,e)).handleClick=t.handleClick.bind((0,u.default)(t)),t.renderPopupMenu=t.renderPopupMenu.bind((0,u.default)(t)),t.handleEditLibraryItemClick=t.handleEditLibraryItemClick.bind((0,u.default)(t)),t.updateNumberOfJoinedLearners=t.updateNumberOfJoinedLearners.bind((0,u.default)(t)),t.showChannelInfo=t.showChannelInfo.bind((0,u.default)(t)),t.handleShowInPlace=t.handleShowInPlace.bind((0,u.default)(t)),t.libraryItemType=void 0,t.showExemptTooltip=t.showExemptTooltip.bind((0,u.default)(t)),t.hideExemptTooltip=t.hideExemptTooltip.bind((0,u.default)(t)),t.handleLockError=t.handleLockError.bind((0,u.default)(t)),t.updateOffPlatformEventSettings=t.updateOffPlatformEventSettings.bind((0,u.default)(t)),t.state={channelMembers:0,showTooltip:!1,isDownloaded:!1,disableClick:!1},t}return(0,c.default)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.libraryItem,n=t.id,a=t.membersCount;M.default.isSupport()?w.default.isItemDownloaded({itemId:n}).then((function(t){e.setState({isDownloaded:t,channelMembers:a})})):this.setState({channelMembers:a})}},{key:"render",value:function(){var e,t=this.props,n=t.libraryItem,a=t.locale,i=t.template,r=t.selected,o=t.fromSearch,l=n.image,c=n.name,u=n.isLocked,d=n.path;this.libraryItemType=B.default.serverTypeToUiType[n.type],this.libraryItemTypeName=B.default.ServerTypeToUiTypeConvertor(this.libraryItemType)||"";var f=(0,m.default)("library-item-info-section",{"library-item-info-section-tall":this.libraryItemType!==W.CHANNEL&&y.default.isEditor(H.default.instance.contextRole)}),p=O.permissionType["".concat(this.libraryItemTypeName,"_").concat(z.ONCLICK)],v=N.default.getPermissionByActionType(p,n.channelId||n.id,U.CONTEXT.CHANNEL),g=d&&d.state&&(d.state===Te||d.state===_e),E=this.libraryItemTypeName.toLowerCase(),_=(0,m.default)("library-item",{selected:!!r},{"enable-click":v},{"on-mobile":Ee},{"no-hover":g},{"hidden-item":g},(0,s.default)({},E,!0)),S=g?function(){}:this.handleClick;return"function"==typeof i?i(o?this.handleShowInPlace:S,this.renderPopupMenu.bind(this,n,o)):h.default.createElement("div",{className:_,onClick:S},h.default.createElement(X.default,{type:this.libraryItemType,assessment:null!==(e=null==n?void 0:n.assessment)&&void 0!==e&&e,imgSrc:l,roles:n.roles,ltr:this.props.ltr,isLocked:u||d&&d.state&&d.state===Se}),this.renderPopupMenu(n),h.default.createElement("div",{className:f},this.showTitle(c),this.renderState(n),this.renderFooter(n),h.default.createElement(ee.default,{libraryItem:n,locale:a})),this.onMobileDisclaimer(),this._renderAllowedForGuestsIdentifier())}},{key:"renderPopupMenu",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.props,i=a.onRefresh,r=a.componentName,o=a.parentItemId,s=a.channelId,l=a.showMenuOnTablet;return h.default.createElement(q.default,{libraryItem:e,state:Q.default.extractState(e),onRefresh:i,onClick:this.handleClick,editStageConfig:this.getEditorStageConfig(),reportStageConfig:this.getReportStageConfig(),componentName:r,parentItemId:o,channelId:s,updateNumberOfJoinedLearners:this.updateNumberOfJoinedLearners,fromSearch:t,inPreviewMode:n,showMenuOnTablet:l,handleLockError:this.handleLockError})}},{key:"_renderAllowedForGuestsIdentifier",value:function(){var e=this.props.libraryItem;return e.properties&&e.properties.isAllowedForGuests?h.default.createElement("div",{className:"allowed-for-guests-identifier",title:b.default.translate("PUBLIC_CHANNEL.PUBLIC_TEACHING_GROUP")},h.default.createElement(re.default,null)):null}},{key:"renderState",value:function(e){var t=this.props,n=t.locale,i=t.showDueDate,r=this.state.isDownloaded,o=e.scheduling,s=!o||i,l=o&&!i,c=this.libraryItemType===W.COURSE_TEMPLATE&&e.templateType===k.default.TEMPLATE_TYPE.MASTER_CHANNEL&&e.certificateDetails;return h.default.createElement("div",{className:"library-item-state"},h.default.createElement("div",null,h.default.createElement(Q.default,{libraryItem:e,locale:n})),e.path&&h.default.createElement("div",null,h.default.createElement($.default,{path:e.path})),s&&h.default.createElement("div",null,h.default.createElement(Z.default,{assignment:e.assignment,locale:n})),l&&h.default.createElement("div",null,h.default.createElement(J.default,{scheduleData:o,locale:n})),a._getEditingPermissionIndication(e),r&&h.default.createElement("div",{className:"downloaded-indicator"},h.default.createElement("div",{className:"spacer"}),h.default.createElement("i",{className:"icon--device-download"})),c&&h.default.createElement("div",{className:(0,m.default)("certificate-indicator",{active:e.certificateDetails.certificateStatus===ce.CERTIFICATE_STATUS.ACTIVE,inactive:e.certificateDetails.certificateStatus!==ce.CERTIFICATE_STATUS.ACTIVE})},h.default.createElement(S.default,{tooltip:b.default.translate("TOOLTIPS.MASTER_COURSE_CERTIFICATE",{certificateName:e.certificateDetails.certificateName})},h.default.createElement(D.CertificateIcon,null))),this.getPathExemptionMarker(e))}},{key:"getPathExemptionMarker",value:function(e){var t=this,n=e.path;if(!n||!n.state||n.state!==_e)return null;var a=b.default.translate("PATH.EXEMPT_MESSAGE");return h.default.createElement("div",{className:"library-item-state__path-exemption",ref:function(e){t._exemptIconRef=e},onMouseEnter:this.showExemptTooltip,onMouseLeave:this.hideExemptTooltip},h.default.createElement("div",{className:"library-item-state__path-exemption-icon-wrapper"},h.default.createElement(ae.default,{style:{height:"100%",opacity:.3}})),this.state.isShowExemptTooltip&&h.default.createElement(T.default,{content:h.default.createElement("div",{className:"library-tooltip-advance library-item-state__path-exemption-tooltip"},a),parentOffsets:this._exemptIconRef.getBoundingClientRect(),position:"bottom"}))}},{key:"showExemptTooltip",value:function(){this.setState({isShowExemptTooltip:!0})}},{key:"hideExemptTooltip",value:function(){this.setState({isShowExemptTooltip:!1})}},{key:"renderFooter",value:function(e){if(this.libraryItemType===W.CHANNEL){if(y.default.isInstructor(e)){var t=y.default.getUser(),n=null;return e.creatorId&&t.id===e.creatorId&&(n=t&&t.nickname.substr(0,1).toUpperCase()),this.showChannelInfo(n,e,"INSTRUCTOR")}return y.default.isLearner(e)?this.showChannelInfo(void 0,e,"LEARNER"):null}return null}},{key:"showTitle",value:function(e){var t=this.props,n=t.channelType,a=t.libraryItem,i=t.locale,r=t.channelId,o=this.libraryItemType===W.CHANNEL,s=n===be.STREAM&&y.default.isLearner(),l=y.default.isEditor()&&a.originalChannelId&&a.originalChannelId!==r,c=o?_.default.fromChannelNameToTitle(e):e,u=h.default.createElement("span",null,l&&h.default.createElement(le.default,{portalParentElementSelector:".channel-view-items-section"}),c);return h.default.createElement("div",{className:"library-item-title",dir:"auto"},h.default.createElement(v.default,{clamp:o||n===be.STREAM?"2":"3"},u),h.default.createElement("div",{className:"library-item-title-published"},s&&Q.default.stateStr(a,i,!1)))}},{key:"showChannelInfo",value:function(e,t,n){var a,i=this.props.locale,r=1===this.state.channelMembers?b.default.translate("CHANNELS_SCREEN.LEARNERS_COUNT.LEARNER"):F.default.assignLanguageParameters(b.default.translate("CHANNELS_SCREEN.LEARNERS_COUNT.LEARNERS"),"".concat(this.state.channelMembers));switch(r.join&&(r=r.join("")),n){case"INSTRUCTOR":a=h.default.createElement("div",{className:"channel-info"},h.default.createElement("div",{className:"channel-info-count-and-state"},h.default.createElement("span",{className:"channel-learners-count",title:r},h.default.createElement(te.default,null),h.default.createElement("span",{className:"channel-learners-count-number"},this.state.channelMembers)),h.default.createElement(ie.default,{channel:t.properties,locale:i})),e&&h.default.createElement("span",{className:"channel-teaching-group-icon",title:b.default.translate("CHANNELS_SCREEN.CREATED_BY_YOU")},e));break;case"LEARNER":a=h.default.createElement("div",{className:"channel-info-learner-channel"},h.default.createElement(ie.default,{channel:t.properties,locale:i}));break;default:a=void 0}return a}},{key:"getEditorStageConfig",value:function(){var e=this.props,t=e.libraryItem,n=e.channelId;switch(this.libraryItemType){case W.LESSON:return{id:K.LESSON_EDITOR,hash:"openLesson/lessonId/".concat(encodeURIComponent(t.id),"/lessonVersion/").concat(encodeURIComponent(t.contentVersion)),queryParams:{channelId:n}};case W.BUZZ:return{id:K.BUZZ_EDITOR,hash:"openBuzz/buzzId/".concat(encodeURIComponent(t.id),"/buzzVersion/").concat(encodeURIComponent(t.contentVersion)),queryParams:{channelId:n,contentLocale:t.locale}};case W.FUSE:return{id:K.FUSE_EDITOR,hash:"openFuse/fuseId/".concat(encodeURIComponent(t.id),"/fuseVersion/").concat(encodeURIComponent(t.contentVersion)),queryParams:{channelId:n}};case W.ASSESSMENT:return{id:K.BUZZ_EDITOR,hash:"openAssessment/buzzId/".concat(encodeURIComponent(t.id),"/buzzVersion/").concat(encodeURIComponent(t.contentVersion)),queryParams:{channelId:n,contentLocale:t.locale}};case W.UCONTENT:return{id:K.CI_EDITOR,queryParams:{channelId:n,ciId:t.id}}}return null}},{key:"getReportStageConfig",value:function(){var e=this.props,t=e.libraryItem,n=e.channelId,a=this.libraryItemType===W.CHANNEL,i=this.libraryItemType===W.PATH,r=a?null:t.id,o=i?"type/path-report":void 0;return{id:K.REPORTS,queryParams:{ciId:r,channelId:n},hash:o}}},{key:"getStageConfig",value:function(){var e=this.props,t=e.libraryItem,n=e.channelId,a=t.clk,i=t.context;return{id:K.PLAYER,queryParams:de({clk:a,channelId:n},i)}}},{key:"getStageConfigForViewOnlyEditor",value:function(){var e=this.props,t=e.libraryItem,n=e.channelId,a=t.clk;return{id:K.PLAYER,queryParams:{clk:a,channelId:n,clk_draft:!0}}}},{key:"handleClick",value:function(){var e,t,n=this,a=this.props,i=a.ltr,r=a.navigate,o=a.setStage,l=a.libraryItem,c=a.channelId,u=a.channelName,d=a.channelType,f=a.urlQueryParams,p=a.onHandleClick,h=this.state.disableClick;if(!((null===(e=window)||void 0===e||null===(t=e.selectedItems)||void 0===t?void 0:t.length)>0||h))if(this.libraryItemType!==W.OFF_PLATFORM_EVENT&&window.selectedItems.push((0,x.v4)()),"function"!=typeof p){var m=f&&f.clk;if(y.default.getAppdata().appConf.featureFlags.ebookOnMobile||!ye||this.libraryItemType!==W.LESSON)if(N.default.getPermissionByActionType(O.permissionType["".concat(this.libraryItemTypeName,"_").concat(z.ONCLICK)],l.channelId||l.id,U.CONTEXT.CHANNEL)){var v=H.default.instance.contextRole,g=l.path&&l.path&&l.path.state===Se,E=l.isLocked||g,S=!1;if(l.contentItemPermission){var T=l.contentItemPermission.allowedActions.find((function(e){return e.action===O.permissionType.CONTENT_ITEM_EDIT&&!e.allowed}));S=Boolean(T)}if(this.libraryItemType===W.COURSE_TEMPLATE)l.templateType===k.default.TEMPLATE_TYPE.MASTER_CHANNEL?G.default.navigateToMasterCourse(r,l.id,l.name,c,_.default.fromChannelNameToTitle(u)):G.default.navigateToCourseTemplate(r,l.id,l.name,c,_.default.fromChannelNameToTitle(u));else if(this.libraryItemType===W.STRUCTURE)P.default.navigateToStructure(r,c,u,l.id,l.name);else if(this.libraryItemType!==W.CHANNEL||m)if(this.libraryItemType===W.OFF_PLATFORM_EVENT)this.openOffPlatformEventModal();else{var A={};if(!y.default.isEditor(v)||y.default.isInstructor(v)&&l.isPublished||S)if(y.default.isEditor(v)&&S&&!y.default.isMobile()&&d===k.default.CHANNEL_TYPE.EDITOR)A=this.getStageConfigForViewOnlyEditor(),V.default.handleGetPreviewLink(l),A=null;else if(m)A={id:K.PLAYER,queryParams:{clk:m,channelId:c}};else if(l.isPublished)if(y.default.isLearner(v)&&E){var L=g?$.default.formatLockedByPathMessage(l.path):b.default.translate("BOOK.LOCKED_ALERT");this.showNotification(L,"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),A=null}else A=this.getStageConfig();else this.showNotification(b.default.translate("BOOK.DRAFT_ALERT"),"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),A=null;else A=this.getEditorStageConfig();A&&o&&(y.default.isEditor(v)&&!S&&A.id!==K.PLAYER?C.default.obtainLock(l.id,c).then((function(e){e.acknowledged?o(A):n.handleLockError({lockResponse:e})})):o(A)),this.setState({disableClick:!0})}else{var R;G.default.navigateToChannel(r,c,_.default.fromChannelNameToTitle(u),l.roles,null,null,l.contentStructure),I.default.sendEvent(I.default.TITLES.CLICK_LEARNING_GROUP,I.default.COMPONENTS.WELCOME,(R={},(0,s.default)(R,I.default.PARAMS.LEARNING_GROUP_NAME,l.name),(0,s.default)(R,I.default.PARAMS.LEARNING_GROUP_ID,l.id),R))}}}else p()}},{key:"handleLockError",value:function(e,t){var n=this.props.ltr;if(e&&e.lockResponse){var a=e.lockResponse;this.showNotification(a.lockOwner?"".concat(a.lockOwner.firstName," ").concat(a.lockOwner.lastName," ").concat(b.default.translate("error.lock.another.user.working")):b.default.translate("CONFLICT_MODAL.MESSAGE"),"SUCCESS",n?"BOTTOM_RIGHT":"BOTTOM_LEFT")}else t&&t()}},{key:"handleShowInPlace",value:function(){var e=this.props,t=e.libraryItem,n=e.navigate,a=e.channelId,i=e.channelName,r=_.default.fromChannelNameToTitle(i),o="library";this.libraryItemType===W.FILE&&(o="files"),G.default.navigateToCI(n,a,r,o,t.id)}},{key:"handleEditLibraryItemClick",value:function(e){var t=this.props,n=t.setStage,a=t.libraryItem;(e.stopPropagation(),N.default.getPermissionByActionType(O.permissionType["".concat(this.libraryItemTypeName,"_EDIT")],a.channelId||a.id,U.CONTEXT.CHANNEL))&&n(this.getEditorStageConfig())}},{key:"onMobileDisclaimer",value:function(){return!y.default.getAppdata().appConf.featureFlags.ebookOnMobile&&ye&&this.libraryItemType===W.LESSON?h.default.createElement("div",{className:"on-mobile-disclaimer"},h.default.createElement("div",{className:"on-mobile-disclaimer-back-drop"}),h.default.createElement("div",{className:"on-mobile-disclaimer-context"},b.default.translate("BOOK.NO_MOBILE_SUPPORT"))):null}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SUCCESS",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BOTTOM_RIGHT",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,i=this.props,r=i.addNotification,o=i.removeNotification,s=r({message:e,level:ve[t],position:ge[n],autoDismiss:a,notificationEmbeddedComponents:[h.default.createElement(me,{"data-unittest-id":"notification-ok-btn",key:"notification-ok",onClick:function(){return o(s)}},b.default.translate("CONTENT_EDITOR.NOTIFICATION_OK_BUTTON"))]})}},{key:"updateNumberOfJoinedLearners",value:function(){var e=this;j.default.getNumberOfMembers(H.default.instance.accountId,this.props.channelId,"ACTIVE").then((function(t){e.setState({channelMembers:t})})).catch((function(){Y.default.error({message:"fail to retrieve number of learners"})}))}},{key:"openOffPlatformEventModal",value:function(){var e=this.props,t=e.channelId,n=e.addModal,a=e.removeModal,i=e.libraryItem,r=e.setLoader;N.default.getPermissionByActionType(O.permissionType.OFF_PLATFORM_EVENT_EDIT,t)?this.openOffPlatformEventSettings():n(h.default.createElement(oe.default,{offPlatformEvent:i,onClose:a,setLoader:r}))}},{key:"openOffPlatformEventSettings",value:function(){var e=this.props,t=e.addModal,n=e.removeModal,a=e.onRefresh,i=e.libraryItem,r=e.channelId;t(h.default.createElement(R.default,{channelId:r,eventItem:de({},i),saveEventProperties:this.updateOffPlatformEventSettings,closeCB:function(){n(),a()}}))}},{key:"updateOffPlatformEventSettings",value:(t=(0,o.default)(r.default.mark((function e(t){var n,a,i,o,s,l,c,u=arguments;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(u.length>1&&void 0!==u[1])||u[1],a=this.props,i=a.removeModal,o=a.onRefresh,s=a.libraryItem,l=a.channelId,e.next=4,se.default.updateEvent(l,s.id,s.contentVersion,t.name,t.location,t.liveSessionEvent,t.description,t.image,t.allDayEvent,t.startDate,t.endDate,t.hasScore,t.shouldPublish,t.notificationEnabled,t.sendInvitationImmediately,t.calendarInviteEnabled);case 4:return c=e.sent,n&&i(),o(),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"_getEditingPermissionIndication",value:function(e){if(y.default.isMobile())return null;if(e.contentItemPermission&&e.contentItemPermission.allowedActions&&e.contentItemPermission.allowedActions.length){var t=e.contentItemPermission.allowedActions.find((function(e){return e.action===O.permissionType.CONTENT_ITEM_EDIT}));if(t&&!t.allowed){var n=ne.default;return h.default.createElement(S.default,{tooltip:t.allowed?b.default.translate("TOOLTIPS.CONTENT_ITEM_EDIT"):b.default.translate("TOOLTIPS.CONTENT_ITEM_EDIT_VIEW")},h.default.createElement("div",{className:"editing-permission-icon ".concat(t.allowed?"edit":"show")},h.default.createElement(n,null)))}}return null}}]),a}(h.Component);Ie.defaultProps={showMenuOnTablet:!1,channelName:"",showDueDate:!1};var ke=he((function(e){return{addNotification:e.add,removeNotification:e.remove}})),Ce=(0,A.Hoc)((function(e){return{ltr:e.ltr,locale:e.locale,navigate:e.navigate,urlQueryParams:e.urlQueryParams,setStage:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.communicator).send.apply(t,["setStage"].concat(a))},setLoader:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.communicator).send.apply(t,["setLoader"].concat(a))}}}))(pe((function(e){return{addModal:e.addModal,removeModal:e.removeModal}}))(ke(Ie)));t.default=Ce},2291:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(33)),r=a(n(34)),o=a(n(9)),s=a(n(3)),l=a(n(4)),c=n(62),u=a(n(235)),d=a(n(28)),f=a(n(18)),p=a(n(13));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=d.default.Instance,g=function(){function e(){(0,s.default)(this,e)}var t,n,a;return(0,l.default)(e,null,[{key:"getStructureUrlAndConfig",value:function(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=encodeURIComponent(t),o=encodeURIComponent(a),s=!1,l="structure/".concat(e,"/").concat(r,"/").concat(n,"/").concat(o);return i&&(l=l.concat("/?".concat(i))),{url:l,config:s}}},{key:"navigateToStructure",value:function(t,n,a,i,r){var o=e.getStructureUrlAndConfig(n,a,i,r);t(o.url,o.config)}},{key:"createStructure",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"channelId",i=(0,c.v4)(),r=f.default.translate("course-structure.default-level.intro"),o=(0,c.v4)(),s=f.default.translate("course-structure.default-level.section1"),l=(0,c.v4)(),u=f.default.translate("course-structure.default-level.section2"),d=(0,c.v4)(),h=f.default.translate("course-structure.default-level.summary");return v.post("".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure?").concat(a,"=").concat(n,"&name=").concat(encodeURIComponent(t.name))).then((function(t){return e.updateStructure(m(m({},t),{},{rootLevel:{items:[{itemId:i,itemType:"Level",level:{id:i,items:[],name:r},name:r},{itemId:o,itemType:"Level",level:{id:o,items:[],name:s},name:s},{itemId:l,itemType:"Level",level:{id:l,items:[],name:u},name:u},{itemId:d,itemType:"Level",level:{id:d,items:[],name:h},name:h}]}}),n,a).then((function(){return t}))}))}},{key:"updateStructureName",value:function(e){var t=e.id,n=e.name,a=e.version;return v.put("".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure/").concat(t,"/version/").concat(a,"/rename?name=").concat(encodeURIComponent(n)))}},{key:"updateStructure",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"channelId";return v.put("".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure?").concat(n,"=").concat(t),{},m(m({},e),{},{clientModified:u.default.localToUtsTimeStamp()})).then((function(e){return e.lockResponse&&!e.lockResponse.acknowledged?Promise.reject(e.lockResponse):Promise.resolve(e)}))}},{key:"addContentItemToLevel",value:function(e){var t=e.structureId,n=e.structureVersion,a=e.levelId,i=e.itemId,r=e.channelId,o="".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure/").concat(t,"/version/").concat(n,"/addItem?itemId=").concat(i);return a&&(o=o.concat("&levelId=".concat(a))),r&&(o=o.concat("&channelId=".concat(r))),v.put(o,{},{clientModified:u.default.localToUtsTimeStamp()}).then((function(e){return e.lockResponse&&!e.lockResponse.acknowledged?Promise.reject(e.lockResponse):Promise.resolve(e)}))}},{key:"getStructure",value:function(e,t,n){return v.get("".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure/").concat(e,"/version/").concat(t,"?channelId=").concat(n))}},{key:"cloneStructureTemplate",value:(a=(0,r.default)(i.default.mark((function e(t,n,a,r){var o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("".concat(p.default.getAppdata().backend_url,"/PlayAppService/contentStructure/:structureId/version/").concat(n,"/clone?sourceChannelId=").concat(a,"&targetchannelId=").concat(r),{structureId:t});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)}))),function(e,t,n,i){return a.apply(this,arguments)})},{key:"setBulkContentDueDate",value:(n=(0,r.default)(i.default.mark((function e(t,n,a){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("".concat(p.default.getAppdata().backend_url,"/PlayAppService/assignments/channel/:channelId/bulkDueDate"),{channelId:t},a,{params:{levelId:n}});case 2:case"end":return e.stop()}}),e)}))),function(e,t,a){return n.apply(this,arguments)})},{key:"setBulkContentAvailability",value:(t=(0,r.default)(i.default.mark((function e(t,n,a){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("".concat(p.default.getAppdata().backend_url,"/PlayAppService/assignments/channel/:channelId/bulkContentAvailability"),{channelId:t},a,{params:{levelId:n}});case 2:case"end":return e.stop()}}),e)}))),function(e,n,a){return t.apply(this,arguments)})}]),e}();t.default=g},2292:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(13)),l=i(n(28)),c=i(n(355)),u=i(n(2189)),d=a(n(2187)),f=l.default.Instance,p=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"handleServerResponse",value:function(e){return e.ok||e.status<400?Promise.resolve(e):Promise.reject(e)}},{key:"getItemPreviewLink",value:function(e,t){var n="".concat(c.default.instance.backendUrl,"/LessonEditorService/lesson/:id/version/:contentVersion/preview");return f.get(n,{id:e,contentVersion:t})}},{key:"handleGetPreviewLink",value:function(e){var t,n=window.open("","_blank");switch(u.default.serverTypeToUiType[e.type]){case d.UCONTENT:case d.LESSON:case d.BUZZ:case d.FUSE:case d.ASSESSMENT:t=s.default.getDirectUrl("echoPlayer",{clk:e.clk,direct:1,clk_draft:!0,channelId:e.channelId}),n&&n.location&&(n.location.href=t);break;case d.COLLECTION:}}}]),e}();t.default=p},2293:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(40)),o=i(n(43)),s=a(n(0)),l=(i(n(2)),i(n(11))),c=i(n(36)),u=i(n(13)),d=i(n(18)),f=n(74);n(2294);var p=function(e,t,n){if(!t)return n;var a,i=localStorage.getItem("".concat(e).concat(t));if(i)try{a=JSON.parse(i),u.default.getUser().id!==a.userId?(localStorage.removeItem("".concat(e).concat(t)),a=[]):a=a.data}catch(r){a=n}else a=n;return a},h=function(e,t,n){t&&(void 0===n?localStorage.removeItem("".concat(e).concat(t)):localStorage.setItem("".concat(e).concat(t),JSON.stringify({userId:u.default.getUser().id,data:n})))};function m(e){var t=e.title,n=e.expandableView,a=e.items,i=e.selectedItems,m=e.onChange,v=e.hideReset,g=e.hideSeparator,E=e.memo,y=(0,s.useState)(i),_=(0,o.default)(y,2),S=_[0],T=_[1],b=(0,s.useState)(p("filters.expanded-state.",E,u.default.isPC())),I=(0,o.default)(b,2),k=I[0],C=I[1],O=(0,s.useState)(!1),P=(0,o.default)(O,2),N=P[0],A=P[1];(0,s.useEffect)((function(){T(i),setTimeout((function(){A(!0)}),1500)}),[i]),(0,s.useEffect)((function(){if(!i.length&&E){var e=p("filters.memo.",E,[]);T(e),m(e)}}),[]);var L,R=function(e){e.stopPropagation(),h("filters.memo.",E),T([]),m([])},M=function(e){h("filters.expanded-state.",E,e),C(e)},w=function(){return a.map((function(e){var t=-1!==S.indexOf(e.id);return s.default.createElement(c.default,{key:"filter-button-".concat(e.id),styleClass:"filter-button",text:e.name,type:t?c.default.TYPES.PRIMARY:c.default.TYPES.SECONDARY,onClick:function(){!function(e,t){var n;n=t?S.filter((function(t){return t!==e})):[].concat((0,r.default)(S),[e]),h("filters.memo.",E,n),T(n),m(n)}(e.id,t)}})}))},D=(0,l.default)("filters-container__header",{"filters-container__header--clickable":n}),x=(0,l.default)("filters-container__items",{"filters-container__items--open":!(n&&!k),"filters-container__items--close":n&&!k,"filters-container__items--prevent-animation":!N}),U=(0,l.default)("arrow","icon--drop-down",{"arrow--up":k,"arrow--down":!k,"arrow--prevent-animation":!N});return s.default.createElement("div",{className:"filters-container"},s.default.createElement("div",{className:D,onClick:n?function(){M(!k)}:null},s.default.createElement("div",{className:"title"},t),s.default.createElement("div",{className:"spacer"},!g&&s.default.createElement("hr",null)),!!S.length&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"counter"},S.length,u.default.isMobile()?"":" ".concat(d.default.translate("filter-component.selected"))),!v&&s.default.createElement("span",{className:"separator"}),!v&&s.default.createElement("div",{className:"reset",onClick:R},s.default.createElement(f.DeleteIcon,null),u.default.isMobile()?"":d.default.translate("filter-component.reset"))),n&&s.default.createElement("div",{className:U})),s.default.createElement("div",{className:x},u.default.isMobile()?(L=(0,l.default)("reset",{"reset--disabled":!S.length}),s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"filters-container__popup-header"},s.default.createElement("div",{className:"filters-container__icon--close",onClick:function(){M(!1)}})),s.default.createElement("div",{className:"filters-container__buttons-container"},w()),s.default.createElement("div",{className:"filters-container__footer"},s.default.createElement("div",{className:L,onClick:R},s.default.createElement(f.DeleteIcon,null),"Reset")))):w()))}m.defaultProps={expandableView:!0,selectedItems:[],hideReset:!1,hideSeparator:!1,memo:void 0};var v=(0,s.memo)(m);t.default=v},2294:function(e,t,n){},2295:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(601)),l=a(n(355)),c=o.default.Instance,u=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"updateContentItem",value:function(e,t){var n={id:e.id,name:e.name,type:e.type,image:e.coverImageUrl?e.coverImageUrl:null,autoReset:null==e?void 0:e.autoReset};return void 0!==e.assessment&&(n.assessment=e.assessment),void 0!==e.locale&&(n.locale=e.locale),void 0!==e.isMustCompleteQuestions&&(n.isMustCompleteQuestions=e.isMustCompleteQuestions),void 0!==e.mustCompleteTrackScorm&&(n.mustCompleteTrackScorm=e.mustCompleteTrackScorm),void 0!==e.videoCantSkip&&(n.videoCantSkip=e.videoCantSkip),s.default.obtainLock(e.id,t).then((function(a){return a.acknowledged?c.put("".concat(l.default.instance.backendUrl,"/LibraryService/library/items"),{},n).then((function(n){return s.default.releaseLock(e.id,t),n})).catch((function(n){return s.default.releaseLock(e.id,t),Promise.reject(n)})):new Promise((function(e,t){t({lockResponse:a})}))}))}},{key:"lockContentItem",value:function(e){var t={contentId:e.contentId,channelId:e.channelId};return c.post("".concat(l.default.instance.backendUrl,"/LibraryService/library/items/lock"),{},t)}},{key:"unLockContentItem",value:function(e){var t=e.contentId,n=e.channelId;return c.remove("".concat(l.default.instance.backendUrl,"/LibraryService/library/items/lock"),{},{params:{contentId:t,channelId:n}})}},{key:"getSpecificLibraryItemHeadersById",value:function(e){var t="".concat(l.default.instance.backendUrl,"/LibraryService/library/items/headers"),n={};return e&&e.length>0&&(n.id=e.join(",")),c.get(t,{},{params:n}).then((function(e){return e.libraryItems}))}}]),e}();t.default=u},2296:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(12)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=i(n(141)),p=a(n(0)),h=(i(n(2)),i(n(11))),m=i(n(22)),v=i(n(2262));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var E=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var a;(0,o.default)(this,n),a=t.call(this,e);var i=n.updateStateFromProps(e.availableItems,e.selectedItems,e.manualSelectionOrdering);return a.state={availableItems:i.availableItems,selectedItems:i.selectedItems,allFilter:"",selectedFilter:""},a.updateSelection=a.updateSelection.bind((0,s.default)(a)),a.onOrderChanged=a.onOrderChanged.bind((0,s.default)(a)),a.selectSingleItem=a.selectSingleItem.bind((0,s.default)(a)),a.selectAllItems=a.selectAllItems.bind((0,s.default)(a)),a.unselectSingleItem=a.unselectSingleItem.bind((0,s.default)(a)),a.unselectAllItems=a.unselectAllItems.bind((0,s.default)(a)),a}return(0,l.default)(n,null,[{key:"compareByLabel",value:function(e,t){return e.label.toLowerCase().localeCompare(t.label.toLowerCase())}},{key:"sortByLabel",value:function(e){e.sort(n.compareByLabel)}},{key:"insertIntoSortedArray",value:function(e,t){for(var a=!1,i=0;i<e.length;i++)if(-1===n.compareByLabel(t,e[i])){e.splice(i,0,t),a=!0;break}a||e.push(t)}},{key:"itemMatchesFilter",value:function(e,t){return e.label.toLowerCase().includes(t.toLowerCase())&&!e.isDisabled}},{key:"splitArrayByLabelFilter",value:function(e,t,a){var i=[],r=[];return e.forEach((function(e){e.subItems&&a?e.subItems.forEach((function(e){(n.itemMatchesFilter(e,t)?i:r).push(e)})):(n.itemMatchesFilter(e,t)?i:r).push(e)})),{includedItems:i,excludedItems:r}}},{key:"_setDisableStateOfItemsInArray",value:function(e,t,n){for(var a={},i=0;i<t.length;i++)a[t[i].id]=!0;for(var r=0;r<e.length;r++)a[e[r].id]&&(e[r].isDisabled=n)}},{key:"selectItemsInArray",value:function(e,t){n._setDisableStateOfItemsInArray(e,t,!0)}},{key:"unselectItemsInArray",value:function(e,t){n._setDisableStateOfItemsInArray(e,t,!1)}},{key:"updateStateFromProps",value:function(e,t,a){n.sortByLabel(e),a||n.sortByLabel(t);var i={},r=t.map((function(e){i[e.id]=!0;var t=(0,f.default)(e);return delete t.subItems,t.isInSelectedList=!0,t}));return e.forEach((function(e){i[e.id]&&(e.isDisabled=!0),e.subItems&&e.subItems.forEach((function(e){i[e.id]&&(e.isDisabled=!0)}))})),{availableItems:e,selectedItems:r}}}]),(0,l.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=n.updateStateFromProps(e.availableItems,e.selectedItems,e.manualSelectionOrdering);this.setState({availableItems:t.availableItems,selectedItems:t.selectedItems})}},{key:"render",value:function(){return p.default.createElement("div",{className:(0,h.default)("selection-page",this.props.styleClass)},this.getAllArea(),this.getSelectedArea())}},{key:"updateSelection",value:function(){this.props.onSelection(this.state.selectedItems)}},{key:"getItemArea",value:function(e,t,n,a,i,r,o){return p.default.createElement("div",{className:"selection-page__section","data-automation-id":"selection-page-".concat(i.dataAutomationId)},p.default.createElement("div",{className:"selection-page__section-header"},p.default.createElement("span",{className:"selection-page__section-label"},e),p.default.createElement("span",{className:"selection-page__section-action",onClick:n.onClick,"data-automation-id":i.dataAutomationId},n.label)),p.default.createElement(v.default,{searchPlaceholder:this.props.searchPlaceholder,searchChanged:a,action:i,items:t,renderItemView:this.props.renderItemView,manualOrdering:!!r,orderChanged:r,selectOnlyChildNodes:o}))}},{key:"getAllArea",value:function(){var e=this,t=this.props.allTitle,n={label:m.default.translate("selection-page.add-all"),onClick:this.selectAllItems},a={iconClass:"control-add",label:m.default.translate("selection-page.add"),disabledIconClass:"control-added",disabledLabel:m.default.translate("selection-page.added"),onClick:this.selectSingleItem,dataAutomationId:"control-add"};return this.getItemArea(t,this.state.availableItems,n,(function(t){e.setState({allFilter:t})}),a,null,this.props.selectOnlyChildNodes)}},{key:"selectSingleItem",value:function(e){this.props.singleItemSelected(),this.selectItems((0,r.default)({},e,!0),this.props.manualSelectionOrdering)}},{key:"selectAllItems",value:function(){this.props.allItemsSelected();var e=this.state,t=e.availableItems,a=e.allFilter,i=n.splitArrayByLabelFilter(t,a,this.props.selectOnlyChildNodes),r={};i.includedItems.forEach((function(e){r[e.id]=!0})),this.selectItems(r)}},{key:"selectItems",value:function(e,t){var a=this.state,i=a.availableItems,r=a.selectedItems,o=(0,f.default)(r),s={},l=[];i.forEach((function(t){e[t.id]&&(t.isDisabled=!0,s[t.id]||(s[t.id]=!0,l.push(t))),t.subItems&&t.subItems.forEach((function(t){e[t.id]&&(t.isDisabled=!0,s[t.id]||(s[t.id]=!0,l.push(t)))}))})),l.forEach((function(e){var a=(0,f.default)(e);delete a.subItems,a.isDisabled=!1,a.isInSelectedList=!0,t?o.push(a):n.insertIntoSortedArray(o,a)})),this.setState({availableItems:i,selectedItems:o},this.updateSelection)}},{key:"getSelectedArea",value:function(){var e=this,t=this.props.selectedTitle,n={label:m.default.translate("selection-page.remove-all"),onClick:this.unselectAllItems},a={iconClass:"control-remove",label:m.default.translate("selection-page.remove"),onClick:this.unselectSingleItem,dataAutomationId:"control-remove"},i=this.props.manualSelectionOrdering?this.onOrderChanged:null;return this.getItemArea(t,this.state.selectedItems,n,(function(t){e.setState({selectedFilter:t})}),a,i)}},{key:"unselectItems",value:function(e){var t=this.state,n=t.availableItems,a=t.selectedItems;n.forEach((function(t){e[t.id]&&(t.isDisabled=!1),t.subItems&&t.subItems.forEach((function(t){e[t.id]&&(t.isDisabled=!1)}))}));var i=a.filter((function(t){return!e[t.id]}));this.setState({availableItems:n,selectedItems:i},this.updateSelection)}},{key:"unselectSingleItem",value:function(e){this.props.singleItemUnselected(),this.unselectItems((0,r.default)({},e,!0))}},{key:"unselectAllItems",value:function(){this.props.allItemsUnselected();var e=this.state,t=e.selectedItems,a=e.selectedFilter,i=n.splitArrayByLabelFilter(t,a,this.props.selectOnlyChildNodes),r={};i.includedItems.forEach((function(e){r[e.id]=!0})),this.unselectItems(r)}},{key:"onOrderChanged",value:function(e){this.setState({selectedItems:e},this.updateSelection)}}]),n}(p.Component);E.defaultProps={allTitle:"All",selectedTitle:"Added",searchPlaceholder:"Search item name",renderItemView:void 0,availableItems:[],selectedItems:[],styleClass:"",onSelection:function(){},singleItemSelected:function(){},allItemsSelected:function(){},singleItemUnselected:function(){},allItemsUnselected:function(){},manualSelectionOrdering:!1,selectOnlyChildNodes:!1};var y=E;t.default=y},2297:function(e,t,n){},2298:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(43)),l=a(n(0)),c=(i(n(2)),i(n(18))),u=i(n(58)),d=i(n(13)),f=i(n(41)),p=i(n(947)),h=i(n(2444)),m=i(n(2221)),v=function(e){var t,n=e.offPlatformEvent,a=e.onClose,i=e.setLoader,v=n.id,g=n.startDate,E=n.hasScore,y=n.channelId,_=(0,l.useState)(void 0),S=(0,s.default)(_,2),T=S[0],b=S[1],I=d.default.isLearner();f.default.sendEvent(f.default.TITLES.CLICK_OFF_PLATFORM_EVENT,f.default.COMPONENTS.OFF_PLATFORM_EVENT);var k=function(){var e=(0,o.default)(r.default.mark((function e(){var t,n,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,m.default.getUserOffPlatformEventState(d.default.getUser().id,v,y);case 3:(null==(t=e.sent)?void 0:t.state)?b({attended:null===(n=t.state.completion)||void 0===n?void 0:n.isAttended,score:null!==(a=t.state.score)&&void 0!==a?a:0}):b({attended:!1,score:0}),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){I&&!T&&k()}),[]);var C=l.default.createElement("div",{className:"off-platform-event-dialog"},l.default.createElement(h.default,{offPlatformEvent:n}),I&&!(new Date(g)>Date.now())&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"off-platform-event-dialog__section"},l.default.createElement("div",{className:"off-platform-event-dialog__section-title"},c.default.translate("event-attendance-report.edit-all-dialog.attendance")),l.default.createElement("div",{className:"participants-report__edit-attendance-dialog-radio"},l.default.createElement(p.default,{isSelected:null==T?void 0:T.attended,content:c.default.translate("event-attendance-report.edit-all-dialog.attended"),id:"off-platform-event-dialog__attended",disabled:!0}),l.default.createElement(p.default,{isSelected:!(null==T?void 0:T.attended),content:c.default.translate("event-attendance-report.edit-all-dialog.not-attended"),id:"off-platform-event-dialog__not-attended",disabled:!0}))),E&&l.default.createElement("div",{className:"off-platform-event-dialog__section"},l.default.createElement("div",{className:"off-platform-event-dialog__section-title"},c.default.translate("event-attendance-report.score-column-title")),l.default.createElement("div",{className:"off-platform-event-dialog__section-text"},"".concat(null!==(t=null==T?void 0:T.score)&&void 0!==t?t:0,"%")))));return l.default.createElement(u.default,{styleClass:"off-platform-event-modal",theme:u.default.THEMES.LIGHT,title:c.default.translate("off-platform-event-dialog.title"),content:C,close:a})};t.default=v},2323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={dispatchCIEvent:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){},s={eventContext:{providerId:n,data:a},eventData:{dispatcher:i}};r&&(s.timestamp=r),e.send("sendMessage",{type:t,messageData:s},o)}};t.default=a},2324:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(13)),s=new(function(){function e(){(0,i.default)(this,e),this._isBuzzOpen=!1,this._isTryMeOpen=!0,this._isBuzzAnswered=!1,this._isExitDialogShown=!0,this._isInteractiveVideo=!1,this._hideSecondaryContentInPlayMode=!1,this._autoData=null}return(0,r.default)(e,[{key:"init",value:function(){this._isBuzzOpen=!1,this._isTryMeOpen=!0,this._isBuzzAnswered=!1,this._isExitDialogShown=!0}},{key:"updateTryMeOpenByViewedFusesCount",value:function(){if(!!o.default.getAppdata().appConf.featureFlags.demo)this._isTryMeOpen=!0;else{var e=o.default.getAppdata().userAppState,t=0;e&&e.viewedFuses&&e.viewedFuses.length&&(t=e.viewedFuses.length),this._isTryMeOpen=t<3}}},{key:"updateShowExitDialogFlag",value:function(){if(!!o.default.getAppdata().appConf.featureFlags.demo)this.isExitDialogShown=!0;else{var e=o.default.getAppdata().userAppState;this.isExitDialogShown=!(e&&!0===e.dotShowExitFuseDialog)}}},{key:"updateTryMeDialogFlag",value:function(){var e=!!o.default.getAppdata().appConf.featureFlags.demo,t=o.default.getAppdata().userAppState;t.noSidePanel?this.isTryMeOpen=!1:this.isTryMeOpen=!!e||!(t&&!0===t.dontShowTryMeFuse)}},{key:"updateFlagsFromState",value:function(){this.updateTryMeOpenByViewedFusesCount(),this.updateShowExitDialogFlag(),this.updateTryMeDialogFlag()}},{key:"needToAnimateSlidrawer",value:function(){return!this.isTryMeOpen&&!this.isBuzzOpen}},{key:"needToShowExitDialog",value:function(){return!this.isBuzzAnswered&&this.isExitDialogShown&&!this.isInteractiveVideo&&!this.hideSecondaryContentInPlayMode}},{key:"isBuzzOpen",get:function(){return this._isBuzzOpen},set:function(e){this._isBuzzOpen=e,e&&(this.isTryMeOpen=!1)}},{key:"isTryMeOpen",get:function(){return this._isTryMeOpen},set:function(e){this._isTryMeOpen=e}},{key:"isBuzzAnswered",get:function(){return this._isBuzzAnswered},set:function(e){this._isBuzzAnswered=e}},{key:"isExitDialogShown",get:function(){return this._isExitDialogShown},set:function(e){this._isExitDialogShown=e}},{key:"isInteractiveVideo",get:function(){return this._isInteractiveVideo},set:function(e){this._isInteractiveVideo=e}},{key:"hideSecondaryContentInPlayMode",get:function(){return this._hideSecondaryContentInPlayMode},set:function(e){this._hideSecondaryContentInPlayMode=e}},{key:"autoData",get:function(){return this._autoData},set:function(e){this._autoData=e}}]),e}());t.default=s},2325:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(11))),p=i(n(58)),h=i(n(18)),m=i(n(2215));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={name:a.props.value?a.props.value:""},a.handleNameChange=a.handleNameChange.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"handleApproval",value:function(){this.props.onSubmit(this.state.name)}},{key:"render",value:function(){var e=this,t=this.props,n=t.ltr,a=t.onCancel,i=[{id:"cancel",text:h.default.translate("MODULE.ADD_ITEMS.MODAL_CANCEL"),type:p.default.BUTTON_TYPES.SECONDARY,onClick:function(){a()}},{id:"done",text:h.default.translate("MODULE.ADD_ITEMS.MODAL_APPROVE"),type:p.default.BUTTON_TYPES.PRIMARY,disabled:!this.state.name,onClick:function(){e.handleApproval()}}],r=d.default.createElement(m.default,{value:this.state.name,onChange:this.handleNameChange,placeholder:h.default.translate("account.form.field.placeholder.learning.group"),"data-automation-id":"structure-name-title",className:"input-level-title",maxLength:70,autoFocus:!0}),o=(0,f.default)("module-level-dialog",{ltr:!!n},{rtl:!n});return d.default.createElement("div",{className:o},d.default.createElement(p.default,{styleClass:"module-level-dialog",theme:p.default.THEMES.LIGHT,title:h.default.translate("content-item.types.CHANNEL"),content:r,actions:i,close:a}))}},{key:"handleNameChange",value:function(e){var t=e.target.value;this.setState({name:t})}}]),n}(d.Component);t.default=g},2326:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43)),o=i(n(33)),s=i(n(34)),l=i(n(9)),c=i(n(3)),u=i(n(4)),d=i(n(12)),f=i(n(6)),p=i(n(8)),h=i(n(7)),m=a(n(0)),v=(i(n(2)),n(74)),g=i(n(2186)),E=i(n(615)),y=i(n(21)),_=i(n(78)),S=n(1224),T=i(n(18)),b=i(n(202)),I=i(n(41)),k=i(n(13)),C=i(n(2208)),O=i(n(2327)),P=a(n(2187)),N=i(n(2185)),A=i(n(600)),L=n(2227),R=i(n(2443));function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var w=g.default.Hoc,D="DELETE",x="DUPLICATE",U=function(e){(0,f.default)(a,e);var t,n=M(a);function a(e){var t,i;return(0,c.default)(this,a),(i=n.call(this,e))._openDeleteModal=i._openDeleteModal.bind((0,d.default)(i)),i._handleDeleteChannel=i._handleDeleteChannel.bind((0,d.default)(i)),i._handleDuplicateChannel=i._handleDuplicateChannel.bind((0,d.default)(i)),i._hideTooltip=i._hideTooltip.bind((0,d.default)(i)),i.state={showTooltipType:""},i.tooltipData=(t={},(0,l.default)(t,D,{getTarget:function(){return i._deleteCourseButton},text:T.default.translate(e.channelType===y.default.CHANNEL_TYPE.STREAM?"course-settings.modal.delete-stream":"course-settings.modal.delete")}),(0,l.default)(t,x,{getTarget:function(){return i._duplicateCourseButton},text:T.default.translate(e.channelType===y.default.CHANNEL_TYPE.STREAM?"course-settings.modal.duplicate-stream":"course-settings.modal.duplicate")}),t),i.canDeleteChannel=_.default.getPermissionByActionType(S.permissionType.CHANNEL_DELETE,e.channelId),i.canDuplicateChannel=!e.isChannelFromTemplate&&_.default.getPermissionByActionType(S.permissionType.CHANNEL_DUPLICATE,e.channelId)&&e.channelType!==y.default.CHANNEL_TYPE.STREAM,i}return(0,u.default)(a,[{key:"render",value:function(){var e=this,t=[this.canDeleteChannel&&m.default.createElement("span",{key:"course-settings__actions--delete",className:"course-settings__actions--delete",onClick:this._openDeleteModal,ref:function(t){e._deleteCourseButton=t},onMouseEnter:function(){return e._showTooltip(D)},onMouseLeave:this._hideTooltip},m.default.createElement(v.DeleteIcon,null)),this.canDuplicateChannel&&m.default.createElement("span",{key:"course-settings__actions--duplicate",className:"course-settings__actions--duplicate",onClick:this._handleDuplicateChannel,ref:function(t){e._duplicateCourseButton=t},onMouseEnter:function(){return e._showTooltip(x)},onMouseLeave:this._hideTooltip},m.default.createElement(O.default,null))];if(!t.filter(Boolean).length)return null;var n=this.state.showTooltipType;return m.default.createElement("span",{className:"course-settings__actions"},t,n&&m.default.createElement(b.default,{content:this.tooltipData[n].text,parentOffsets:this.tooltipData[n].getTarget().getBoundingClientRect(),position:"top",tooltipClasses:"course-settings__actions--tooltip"}))}},{key:"_openDeleteModal",value:function(){var e=this.props,t=e.addModal,n=e.removeModal;n(),t(m.default.createElement(C.default,{title:T.default.translate("CONTENT_EDITOR.DELETE_CONTENT_ITEM_DIALOG_TITLE").replace(/\$1/g,T.default.translate("CONTENT_EDITOR.BOOK_TYPE.".concat(P.CHANNEL))),content:T.default.translate("CONTENT_EDITOR.DELETE_DIALOG_MESSAGE"),hasToRenderConfirmQuestion:!0,onSubmit:this._handleDeleteChannel,onCancel:n}))}},{key:"_handleDeleteChannel",value:function(){var e=this.props,t=e.channelId,n=e.removeModal,i=e.onAction,r=e.setLoader;r(!0),n(),N.default.deleteChannel(t).then((function(){i(),a._sendMixPanelEvent("delete"),r(!1)})).catch((function(e){A.default.error({message:"Failed to delete channel, ".concat(JSON.stringify(e))}),r(!1)}))}},{key:"_handleDuplicateChannel",value:function(){var e=this,t=this.props,n=t.addModal,a=t.removeModal,i=t.channelId,r=t.channelContentItems;a();var o=r.filter((function(e){return e.originalChannelId!==i&&e.type!==y.default.CI_TYPE.OFF_PLATFORM_EVENT}));o.length?n(m.default.createElement(R.default,{onCancel:a,onConfirm:function(t){a(),e._duplicateChannel(t)},itemsByReference:o.map((function(e){return e.name}))})):this._duplicateChannel(!1)}},{key:"_duplicateChannel",value:(t=(0,s.default)(o.default.mark((function e(t){var n,i,r,s,l,c,u,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,i=n.channelId,r=n.onAction,s=n.showNotification,(l=n.setLoader)(!0),e.prev=2,e.next=5,k.default.getRolesByContext({channelId:i});case 5:return c=e.sent,e.next=8,N.default.cloneChannel(i,c.roles,t);case 8:return u=e.sent,e.next=11,a._getNewCourseRolesAndPermissions(u.channelId);case 11:return e.next=13,N.default.getChannelState(i);case 13:return d=e.sent,e.next=16,N.default.setChannelState(u.channelId,d);case 16:s(T.default.translate("CONTENT_EDITOR.ITEM_DUPLICATED_SUCCESSFULLY"),"SUCCESS"),r(),a._sendMixPanelEvent("duplicate"),l(!1),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(2),s(T.default.translate("modals.duplicate.body"),"ERROR"),A.default.error({message:"Failed to clone channel, ".concat(JSON.stringify(e.t0))}),l(!1);case 27:case"end":return e.stop()}}),e,this,[[2,22]])}))),function(e){return t.apply(this,arguments)})},{key:"_showTooltip",value:function(e){this.setState({showTooltipType:e})}},{key:"_hideTooltip",value:function(){this.setState({showTooltipType:""})}}],[{key:"_getNewCourseRolesAndPermissions",value:function(e){return Promise.all([k.default.getRolesByContext({channelId:e}),E.default.getPermissions(L.CONTEXT.CHANNEL,e)]).then((function(t){var n=(0,r.default)(t,2),a=n[0],i=n[1],o={entityId:e,entityType:L.CONTEXT.CHANNEL,roles:a.roles,actions:i[e]?i[e].actions:i};_.default.addPermissions(o)}))}},{key:"_sendMixPanelEvent",value:function(e){I.default.sendEvent(I.default.TITLES.INTERACT_WITH_CHANNEL_ITEM_DIALOG,I.default.COMPONENTS.CREATE_CHANNEL_DIALOG,(0,l.default)({},I.default.PARAMS.USER_ACTION,e))}}]),a}(m.Component);U.defaultProps={showNotification:function(){},channelContentItems:{},isChannelFromTemplate:!1};var B=w((function(e){return{addModal:e.addModal,removeModal:e.removeModal}}))(U);t.default=B},2327:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("path",{fill:"#fff",d:"M4.174 21.029v-1.072c-0.318-0.322-0.53-0.858-0.53-1.287v-13.404c0-1.072 0.848-2.037 2.014-2.037h8.374c0.53 0 0.954 0.214 1.272 0.536h1.060c0.424 0 0.848 0.107 1.272 0.214-0.53-1.501-1.908-2.681-3.604-2.681h-8.374c-2.12 0-3.816 1.716-3.816 3.86v13.297c0 1.716 1.060 3.11 2.65 3.646-0.212-0.214-0.318-0.643-0.318-1.072z",key:0}),a.createElement("path",{fill:"#fff",d:"M7.884 24.567v-1.072c-0.318-0.322-0.53-0.858-0.53-1.287v-13.404c0-1.072 0.848-2.037 2.014-2.037h8.374c0.53 0 0.954 0.214 1.272 0.536h1.060c0.424 0 0.848 0.107 1.272 0.214-0.53-1.501-1.908-2.681-3.604-2.681h-8.374c-2.12 0-3.816 1.716-3.816 3.86v13.511c0 1.716 1.060 3.11 2.65 3.646-0.212-0.429-0.318-0.858-0.318-1.287z",key:1}),a.createElement("path",{fill:"#fff",d:"M21.559 10.413c1.060 0 2.014 0.858 2.014 2.037v13.297c0 1.072-0.848 2.037-2.014 2.037h-8.374c-1.060 0-2.014-0.858-2.014-2.037v-13.297c0-1.072 0.848-2.037 2.014-2.037h8.374zM21.559 8.483h-8.374c-2.12 0-3.816 1.716-3.816 3.86v13.297c0 2.145 1.696 3.86 3.816 3.86h8.374c2.12 0 3.816-1.716 3.816-3.86v-13.189c0-2.145-1.696-3.968-3.816-3.968v0z",key:2})])}i.defaultProps={version:"1.1",width:"27",height:"32",viewBox:"0 0 27 32"},e.exports=i,i.default=i},2328:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=i(n(24)),p=(i(n(2)),i(n(202))),h=i(n(18)),m=n(1224),v=i(n(78)),g=i(n(602)),E=i(n(2201)),y=i(n(2189)),_=a(n(2246)),S=a(n(2239));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var b=function(e){(0,l.default)(n,e);var t=T(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={showTooltip:!1},a.onMouseOver=a.setHover.bind((0,o.default)(a),!0),a.onMouseLeave=a.setHover.bind((0,o.default)(a),!1),a}return(0,s.default)(n,null,[{key:"extractPublishDate",value:function(e){var t=e.publishExtraData;return t?t.localPublishDate:void 0}},{key:"extractState",value:function(e){var t=e.lastVersionStatus;switch(t?t.state:void 0){case"PUBLISHED":case"PUBLISHED_NOT_MODIFIED":return S.PUBLISHED;case"MODIFIED":return S.MODIFIED;default:case"UNPUBLISHED":case"DRAFT":return S.DRAFT}}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this.props,t=e.locale,a=e.libraryItem,i=n.extractState(a);return this.libraryItemType=y.default.serverTypeToUiType[a.type],this.libraryItemTypeName=y.default.ServerTypeToUiTypeConvertor(this.libraryItemType),v.default.getPermissionByActionType(m.permissionType["".concat(this.libraryItemTypeName,"_").concat(_.SHOW_PUBLISH_INFO)],a.channelId)?d.default.createElement("div",{className:"library-item-state-indication"},this.showItemStateIcon(n.stateStr(a,t),i)):null}},{key:"showItemStateIcon",value:function(e,t){var n=this,a=this.props.portalParentElementSelector,i=this.state.showTooltip,r="static-circle static-circle--";switch(t){case S.PUBLISHED:r+="published";break;case S.MODIFIED:r+="modified";break;default:r+="not-published"}var o=d.default.createElement(p.default,{content:d.default.createElement("div",{className:"library-tooltip-advance"},e),parentOffsets:this._circleRef&&this._circleRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"static-circle-tooltip"});return d.default.createElement("div",{className:"static-circle",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseLeave},d.default.createElement("div",{className:r,ref:function(e){n._circleRef=e}}),i&&(a?f.default.createPortal(o,document.querySelector(a)):o))}},{key:"setHover",value:function(e){this.setState({showTooltip:e})}}],[{key:"stateStr",value:function(e,t){var a,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.extractState(e),s=n.extractPublishDate(e),l=e&&e.publishExtraData&&e.publishExtraData.publisherName,c=e.modified,u=new Date(c);switch(o){case S.PUBLISHED:if(s){var d=new Date(s);a=E.default.getDateStringByLocale(d,t)}i=l&&r?g.default.assignLanguageParameters(h.default.translate("BOOK.WITH.PUBLISHER.PUBLISHED_ON"),a,l):g.default.assignLanguageParameters(h.default.translate("BOOK.PUBLISHED_ON"),a);break;case S.MODIFIED:if(i=E.default.getShortDateDescription(u,t,h.default.translate("BOOK.MODIFIED_MOMENTS_AGO"),h.default.translate("BOOK.MODIFIED_HOUR_AGO"),h.default.translate("BOOK.MODIFIED_HOURS_AGO"),h.default.translate("BOOK.MODIFIED_ON")),s){var f=new Date(s);a=E.default.getDateStringByLocale(f,t)}break;default:case S.DRAFT:i=h.default.translate("BOOK.NOT_PUBLISHED")}return i}}]),n}(d.Component);b.defaultProps={libraryItem:{},locale:"en_US",portalParentElementSelector:null};var I=b;t.default=I},2329:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(24))),p=i(n(202)),h=i(n(18)),m=i(n(2445)),v=i(n(2201));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).setHover=a.setHover.bind((0,o.default)(a)),a.onMouseOver=a.setHover.bind((0,o.default)(a),!0),a.onMouseLeave=a.setHover.bind((0,o.default)(a),!1),a.libraryItemType=void 0,a.state={showTooltip:!1},a}return(0,s.default)(n,null,[{key:"getCurrentDate",value:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this,t=this.state.showTooltip,a=this.props,i=a.assignment,r=a.locale,o=a.portalParentElementSelector;if(!i)return null;var s,l=n.getCurrentDate(),c=new Date(i.dueDate),u=v.default.getShortDateByLocale(c,r),p="library-item-due-date";"DONE"===i.state?(p+=" library-item-due-date-done",s=h.default.translate("DUE_DATE_DONE").replace(/\$1/g,i?v.default.getDateStringByLocale(c,r):"")||"DUE DATE",u=d.default.createElement("div",{className:"done-icon collection-name-icons-wrapper"},d.default.createElement(m.default,null))):l.getTime()<=i.dueDate?(p+=" library-item-due-date-in-progress",s=h.default.translate("DUE_DATE_IN_PROGRESS").replace(/\$1/g,i?v.default.getDateStringByLocale(c,r):"")||"DUE DATE"):(p+=" library-item-due-date-past",s=h.default.translate("DUE_DATE_PASSED").replace(/\$1/g,i?v.default.getDateStringByLocale(c,r):"")||"DUE DATE");var g=this._toolbarTemplate(s);return d.default.createElement("div",{className:p,onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseLeave},u,d.default.createElement("div",{className:"due-date-tooltip",ref:function(t){e._dueDateRef=t}},t&&(o?f.default.createPortal(g,document.querySelector(o)):g)))}},{key:"_toolbarTemplate",value:function(e){return this._dueDateRef?d.default.createElement(p.default,{content:d.default.createElement("div",{className:"library-tooltip-advance"},e),parentOffsets:this._dueDateRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"library-item-due-date-tooltip"}):null}},{key:"setHover",value:function(e){this.setState({showTooltip:e})}}]),n}(d.Component);E.defaultProps={assignment:null,locale:"en_US",portalParentElementSelector:null};var y=E;t.default=y},2330:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),n(1224)),f=i(n(78)),p=i(n(2189)),h=a(n(2246)),m=a(n(2449));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var g=function(e){(0,s.default)(n,e);var t=v(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.libraryItem,t=e.userProgress;return this.libraryItemType=p.default.serverTypeToUiType[e.type],this.libraryItemTypeName=p.default.ServerTypeToUiTypeConvertor(this.libraryItemType),f.default.getPermissionByActionType(d.permissionType["".concat(this.libraryItemTypeName,"_").concat(h.SHOW_PROGRESS)],e.channelId)?n.showProgressBar(t):null}}],[{key:"extractProgressState",value:function(e){switch(e?e.status:void 0){case"STARTED":return m.STARTED;case"COMPLETED":return m.COMPLETED;default:case"NOT_STARTED":return m.NOT_STARTED}}},{key:"showProgressBar",value:function(e){var t=n.extractProgressState(e);if(t===m.NOT_STARTED)return u.default.createElement("div",{className:"library-item-user-progress-new"});if(t===m.COMPLETED)return u.default.createElement("div",{className:"library-item-user-progress-done"});var a={width:(e&&e.progress?e.progress:0)+"%"};return u.default.createElement("div",{className:"library-item-user-progress-started"},u.default.createElement("div",{className:"library-item-user-progress-bar",style:a}))}}]),n}(u.Component);g.defaultProps={libraryItem:{}};var E=g;t.default=E},2331:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("path",{fillRule:"evenodd",d:"M23.773 9.641h-2.076c.163.661.261 1.344.288 2.047L24 11.85a12.144 12.144 0 0 0-.227-2.208zM0 12.001c0 6.626 5.375 12 12.003 12 1.082 0 2.124-.157 3.121-.425l-.665-1.894c-.788.2-1.607.318-2.456.318-5.516 0-10.002-4.486-10.002-10S6.487 2 12.003 2c2.236 0 4.293.744 5.96 1.99l-2.05 2.048 7.014 1.354L21.573.38l-2.185 2.183A11.917 11.917 0 0 0 12.003 0C5.375 0 0 5.373 0 12zm20.532 5.2a9.974 9.974 0 0 1-1.15 1.526l1.405 1.434a12.058 12.058 0 0 0 1.54-2.059l-1.795-.902zm-1.227 4.308l-1.413-1.443a9.9 9.9 0 0 1-1.555.933l.67 1.9a11.9 11.9 0 0 0 2.298-1.39zm2.548-7.826l1.998.16c-.132.853-.35 1.674-.65 2.46l-1.8-.906a10 10 0 0 0 .452-1.714zM11 6v8h7v-2h-5V6h-2z"}))}i.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24"},e.exports=i,i.default=i},2332:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43)),o=a(n(0)),s=(i(n(2)),i(n(24))),l=i(n(18)),c=i(n(202)),u=i(n(13)),d=n(74);var f=function(e){var t=e.portalParentElementSelector,n=(0,o.useRef)(),a=(0,o.useState)(!1),i=(0,r.default)(a,2),f=i[0],p=i[1];if(!u.default.isPC())return null;var h,m;return o.default.createElement("span",{className:"library-item-by-reference-indication",onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},ref:n},o.default.createElement(d.LinkIcon,null),f&&o.default.createElement("span",{className:"library-item-by-reference-tooltip-wrapper"},s.default.createPortal((m=null===(h=n.current)||void 0===h?void 0:h.getBoundingClientRect(),o.default.createElement(c.default,{content:l.default.translate("library.item.by-reference-indication.tooltip"),parentOffsets:m,position:"bottom",tooltipClasses:"library-item-by-reference-tooltip"})),document.querySelector(t))))};t.default=f},2384:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(11))),p=i(n(50)),h=i(n(970)),m=i(n(18)),v=i(n(13));function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={secondsLeft:e.secondsToRun,isDragOn:!1},a._handleDragStart=a._handleDragStart.bind((0,s.default)(a)),a._handleDragEnd=a._handleDragEnd.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.secondsToRun,a=t.onTimerEnd,i=(new Date).getTime();this._endTime=i+1e3*n,this._timerInterval=setInterval((function(){var t=e._endTime-(new Date).getTime(),n=Math.floor(t/1e3);n<=0&&(clearInterval(e._timerInterval),document.querySelector(".ci-timer").click(),e.setState({forcingSubmit:!0}),setTimeout((function(){a(),e.setState({forcingSubmit:!1,afterSubmit:!0})}),8e3)),e.setState({secondsLeft:n})}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._timerInterval)}},{key:"render",value:function(){if(this.state.forcingSubmit)return this._renderForceSubmitModal();if(!this._isTimerVisible())return null;var e=this._getRemainingTimeDisplay(),t=(0,f.default)("ci-timer",{"ci-timer--rotated":this.state.isDragOn});return d.default.createElement("div",{className:(0,f.default)("ci-timer-container",{landscape:v.default.isMobile()&&v.default.isLandscape()})},d.default.createElement(h.default,{onStart:this._handleDragStart,onStop:this._handleDragEnd,axis:v.default.isPC()?"both":"y",bounds:"parent"},d.default.createElement("div",{className:"ci-timer-wrapper"},d.default.createElement("div",{className:t},d.default.createElement("span",null,m.default.translate("ci-timer.time-remaining"))," ",e))))}},{key:"_handleDragStart",value:function(){this.setState({isDragOn:!0})}},{key:"_handleDragEnd",value:function(){this.setState({isDragOn:!1})}},{key:"_isTimerVisible",value:function(){var e=this.state,t=e.secondsLeft,n=e.afterSubmit,a=this.props,i=a.startToDisplayInSeconds;return!a.hideTimer&&("number"!=typeof i||i<=0||t<=i)&&!n}},{key:"_getRemainingTimeDisplay",value:function(){var e,t,n=this.state.secondsLeft;if(n>=86400){var a=n%60,i=(n-=a)%3600/60,r=(n-=60*i)%86400/3600,o=(n-=3600*r)/86400;t="HH:mm:ss",e=(0,p.default)("".concat(r,":").concat(i,":").concat(a),t);var s=m.default.translate("ci-timer.multiple-days",{numberOfDays:o}),l=e.format(t);return"".concat(s," ").concat(l)}if(n>=3600){var c=n%60,u=(n-=c)%3600/60,d=(n-=60*u)/3600;t="HH:mm:ss",e=(0,p.default)("".concat(d,":").concat(u,":").concat(c),t)}else{var f=n%60,h=(n-=f)%3600/60;t="mm:ss",e=(0,p.default)("".concat(h,":").concat(f),t)}return e.format(t)}},{key:"_renderForceSubmitModal",value:function(){var e=this.props,t=e.displayMessageTop,n=e.displayMessageBottom;return d.default.createElement("div",{className:"force-submit-modal"},d.default.createElement("div",{className:"force-submit-modal__message"},t&&d.default.createElement("p",null,t),n&&d.default.createElement("p",null,n)))}}]),n}(d.Component);t.default=E,E.defaultProps={onTimerEnd:function(){},startToDisplayInSeconds:600,displayMessageTop:null,displayMessageBottom:null,hideTimer:!1}},2385:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2386));n(2394);var r=i.default;t.default=r},2386:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(43)),s=i(n(3)),l=i(n(12)),c=i(n(4)),u=i(n(6)),d=i(n(8)),f=i(n(7)),p=a(n(0)),h=(i(n(2)),i(n(11))),m=n(62),v=i(n(14)),g=i(n(32)),E=i(n(179)),y=i(n(332)),_=i(n(2387)),S=i(n(2392)),T=i(n(2393));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var C=function(e){(0,u.default)(n,e);var t=k(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).changeIframSrc=a.changeIframSrc.bind((0,l.default)(a)),a.getSideMenu=a.getSideMenu.bind((0,l.default)(a)),a.saveScormState=a.saveScormState.bind((0,l.default)(a)),a.getScormState=a.getScormState.bind((0,l.default)(a)),a.iframeOnload=a.iframeOnload.bind((0,l.default)(a)),a.state={fuseSrcLink:"",indexChosen:1,showSideMenu:!0},a._commChannelId="scorm-wrapper-".concat((0,m.v4)()),a}return(0,c.default)(n,null,[{key:"addUrlParams",value:function(e){for(var t=-1===e.indexOf("?")?"?":"&",n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return"".concat(e).concat(t).concat(a.join("&"))}}]),(0,c.default)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.externalContent;t.type!==e.externalContent.type&&"SCORM"===t.type&&this._initSCORMWrapper()}},{key:"componentDidMount",value:function(){"SCORM"===this.props.externalContent.type&&this._initSCORMWrapper()}},{key:"componentWillUnmount",value:function(){this._comm&&this._comm.destroy()}},{key:"_initSCORMWrapper",value:function(){this._comm=new E.default(this._commChannelId,window,this._playerRef.contentWindow,{saveScormState:this.saveScormState,getScormState:this.getScormState},this)}},{key:"render",value:function(){var e=this.getExternalContentPlayer(),t=this.getCoverLayer(this.props.externalContent),n=(0,h.default)("fuse-external-wrapper",{"interactions-theme-2-wrapper":v.default.isFeatureEnabled("interactionsThemeV2")});return p.default.createElement("div",{className:n},e,t)}},{key:"getExternalContentPlayer",value:function(){var e,t=this,n=v.default.getAppdata(),a=this.props,i=a.externalContent,r=a.isSideBySide,s=a.allowDownloadMedia,l=a.eventData,c=a.channelId,u=n.assets_prefix,d="",f=i.entryPoint,h="iframe",m=[],g={XAPI:function(){var e=((i||{}).metadata||{}).activityId;d="".concat(u,"/players/iframes/xapiWrapper.html?entryPoint="),f=encodeURIComponent("".concat(u,"/").concat(i.entryPoint,"?endpoint=").concat(n.appConf.xApi.config.endPointUrl,"/\n&auth=Bearer ").concat(t.props.token.access_token,'\n&actor={"name":["').concat(t.props.user.username,'"],"account":[{"accountServiceHomePage":"","accountName":"').concat(t.props.user.email,'"}],"objectType":"Agent"}\n&activity_id=').concat(e))},SCORM:function(){d="".concat(u,"/players/iframes/scormWrapper.html?commChannelId=").concat(t._commChannelId,"&externalContentId=").concat(i.id,"&channelId=").concat(c,"&entryPoint="),f=encodeURIComponent("".concat(u,"/").concat(i.entryPoint)),m=((i||{}).metadata||{}).multiEntryPoints,v.default.isFeatureEnabled("enableMultiItemScorm")&&m&&m.length>2&&(h="extendIframe")},MS_OFFICE:function(){d="https://view.officeapps.live.com/op/embed.aspx?src=";var e=v.default.getCurrentSessionAssetsToken();e=e?Object.entries(e).reduce((function(e,t,n){var a=(0,o.default)(t,2),i=a[0],r=a[1];return e+=n?"&":"?",0===i.indexOf("CloudFront-")&&(i=i.substr("CloudFront-".length)),e+="".concat(i,"=").concat(r)}),""):"";var t=".com/".length,n=i.entryPoint;n.includes("https://")&&(n=n.substring(n.indexOf(".com/")+t,n.length)),f="".concat(u.includes("https:")?"":"https:").concat(u,"/").concat(n).concat(e),f=encodeURIComponent(f)},PPT_CONVERTED:function(){f=i.entryPoint,h="ppt"},VIDEO_YOUTUBE:function(){f=i.entryPoint,h="video",e="video/youtube"},VIDEO_VIMEO:function(){f=i.entryPoint,h="video",e="video/vimeo"},VIDEO_FILE:function(){f="".concat(u,"/").concat(i.entryPoint).concat(t.props.availableOffline&&!v.default.isOnline()?"?fromCache=true":""),h="video",e="video/mp4"},VIDEO_HLS:function(){f=i.entryPoint,h="video",e="application/x-mpegURL"},URL:function(){},default:function(){f="".concat(u,"/").concat(i.entryPoint)}};switch(g[i.type]?r&&"PPT_CONVERTED"===i.type?g.MS_OFFICE():g[i.type]():g.default(),h){case"iframe":return p.default.createElement("iframe",{ref:function(e){t._playerRef=e},allowFullScreen:"true",frameBorder:"0",className:"fuse-external-iframe",src:"".concat(d).concat(f),onLoad:this.iframeOnload});case"extendIframe":return this.getSideMenu(m,d,u);case"ppt":return p.default.createElement(_.default,{convertedDataSrc:f,ref:function(e){t._pptPlayerRef=e},markers:this.props.markers,pageId:this.props.pageId,setNumberOfSlidesCallBack:this.props.setNumberOfSlidesCallBack,viewMode:!this.props.editorMode,isMustCompleteQuestions:this.props.isMustCompleteQuestions});case"video":return p.default.createElement(y.default,{ref:function(e){t._videoRef=e},src:{src:f,type:e},allowDownloadMedia:s,eventData:l,eventUrl:"".concat(n.backend_url,"/Interactions/statesAndEvents"),preload:"auto",markers:this.props.markers?this.props.markers.map((function(e){return I(I({},e),{},{callback:function(){t._videoRef.pause()},overlayElement:e.overlayElement?I(I({},e.overlayElement),{},{props:I(I({},e.overlayElement.props),{},{playerType:h,closeOverlayFromPlayer:function(e){t.props.isMustCompleteQuestions&&!e&&t._videoRef.triggerReturnUserToUncompletedMarker(),t._videoRef.play()},time:e.time})}):null})})):void 0,editorMode:this.props.editorMode,setVideoDurationCallback:this.props.setVideoDurationCallback,isMustCompleteQuestions:this.props.isMustCompleteQuestions,rests:{checkFileExists:"".concat(n.backend_url,"/PlayAppService/general/assets/exists")}});default:return p.default.createElement("div",{className:"fuse-external-missing-playerType"})}}},{key:"iframeOnload",value:function(){var e=this.props.externalContent;"SCORM"===e.type&&this._comm.send("play",{conversionResultId:e.id,learner_id:v.default.getUser().id,learner_name:v.default.getUser().nickname})}},{key:"getCoverLayer",value:function(e){return this.props.showCover&&e&&"MS_OFFICE"===e.type?p.default.createElement("div",{className:"fuse-external-cover-layer"}):null}},{key:"changeIframSrc",value:function(e,t){this.setState({indexChosen:e,fuseSrcLink:t})}},{key:"getSideMenu",value:function(e,t,n){var a=this,i="",r=[];e.forEach((function(e,t){var n="fuse-side-menu-option";if(0===t&&"MAIN_TITLE"===Object.values(e)[0])i=p.default.createElement("div",{title:Object.keys(e)[0],className:"fuse-side-menu-title"},Object.keys(e)[0]);else{var o=Object.keys(e)[0];a.state.indexChosen===t&&(a.state.fuseSrcLink||(a.state.fuseSrcLink=e[o]),n="fuse-side-menu-option chosen"),r.push(p.default.createElement("div",{title:e[o],className:n,onClick:function(){a.changeIframSrc(t,e[o])}},o))}}));var o=this.state.showSideMenu?"fuse-side-menu show":"fuse-side-menu hide",s=encodeURIComponent("".concat(n,"/").concat(this.state.fuseSrcLink)),l=this.state.showSideMenu?p.default.createElement(T.default,{style:{width:"20px",height:"20px"}}):p.default.createElement(S.default,{style:{width:"20px",height:"20px"}});return p.default.createElement("div",{className:"fuse-external-fuse-side-menu"},p.default.createElement("div",{className:o},i,r),p.default.createElement("div",{className:"menu-toggle",onClick:function(){a.setState({showSideMenu:!a.state.showSideMenu})}},l),p.default.createElement("iframe",{ref:function(e){a._playerRef=e},allowFullScreen:"true",frameBorder:"0",className:"fuse-external-iframe",src:"".concat(t).concat(s)}))}},{key:"saveScormState",value:function(e,t,n){var a=v.default.getAppdata();v.default.isFeatureEnabled("reportScormProgress")&&(g.default.post("".concat(a.backend_url,"/Interactions/scormState/:externalContentId/channels/:channelId"),{externalContentId:this.props.externalContent.id,channelId:this.props.channelId},t.state),n())}},{key:"getScormState",value:function(e,t,n){var a=v.default.getAppdata();v.default.isFeatureEnabled("reportScormProgress")&&g.default.get("".concat(a.backend_url,"/Interactions/scormState/:externalContentId/channels/:channelId"),{externalContentId:this.props.externalContent.id,channelId:this.props.channelId}).then((function(e){n(e)}))}},{key:"getVideoTime",value:function(){return this._videoRef?this._videoRef.getVideoTime():null}},{key:"setVideoTime",value:function(e){return this._videoRef?this._videoRef.setVideoTime(e):null}},{key:"getVideoDuration",value:function(){return this._videoRef.getVideoDuration()}},{key:"pauseVideo",value:function(){this._videoRef.pauseVideo()}},{key:"getCurrentSlideNumber",value:function(){return this._pptPlayerRef?this._pptPlayerRef.getCurrentSlideNumber():null}},{key:"getTotalNumberOfSlides",value:function(){return this._pptPlayerRef?this._pptPlayerRef.getTotalNumberOfSlides():null}}]),n}(p.Component);C.defaultProps={token:{access_token:""},user:{username:"",email:""},externalContent:{type:"",entryPoint:""},showCover:!1,allowDownloadMedia:!1,eventData:void 0,markers:void 0,editorMode:!1,setVideoDurationCallback:function(){},setNumberOfSlidesCallBack:function(){},isSideBySide:!1,isMustCompleteQuestions:!1,availableOffline:!1,pageId:null};var O=C;t.default=O},2387:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2388)).default;t.default=i},2388:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(23)),o=i(n(9)),s=i(n(3)),l=i(n(4)),c=i(n(12)),u=i(n(6)),d=i(n(8)),f=i(n(7)),p=a(n(0)),h=i(n(11)),m=(i(n(2)),i(n(13))),v=i(n(129)),g=i(n(41));n(2389);var E=i(n(2390)),y=i(n(2391));function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var b=function(e){(0,u.default)(n,e);var t=T(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).addScriptsToIframe=a.addScriptsToIframe.bind((0,c.default)(a)),a.getCurrentSlideNumber=a.getCurrentSlideNumber.bind((0,c.default)(a)),a.getTotalNumberOfSlides=a.getTotalNumberOfSlides.bind((0,c.default)(a)),a.savePresentationDetails=a.savePresentationDetails.bind((0,c.default)(a)),a.displayInFullScreen=a.displayInFullScreen.bind((0,c.default)(a)),a.displayInNormalScreen=a.displayInNormalScreen.bind((0,c.default)(a)),a.renderToggleFullScreenIcon=a.renderToggleFullScreenIcon.bind((0,c.default)(a)),a._closeOverlay=a._closeOverlay.bind((0,c.default)(a)),a.iframeScriptElementId="srcOfConvertedPptData",a.state={isFullScreenMode:!1,markerMap:{}},a.onInitDone=a.onInitDone.bind((0,c.default)(a)),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this._communicator=new v.default("ppt-wrapper",window,this.iframeElement.contentWindow,{savePresentationDetails:this.savePresentationDetails,displayInNormalScreen:this.displayInNormalScreen,sendMixPanelEvent:n.sendMixPanelEvent,initDone:this.onInitDone,onPptClick:this.onPptClick,onEnterFullScreenMode:this.onEnterFullScreenMode,onEnterNormalScreenMode:this.onEnterNormalScreenMode},this),this.processMarkers(this.props.markers)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processMarkers(e.markers),this._updateCustomLastPage();var t=e.convertedDataSrc;this.props.convertedDataSrc!==t&&this.changeIframeScript(t)}},{key:"onInitDone",value:function(){var e=this.props.pageId;e&&this._communicator.send("goToPageByUrl",e)}},{key:"onPptClick",value:function(e,t){this.state.overlayElement&&!t.slideJustChanged?this._closeOverlay():t.shouldGoToNextSlide&&this._communicator.send("goToNextSlide")}},{key:"onEnterFullScreenMode",value:function(){this._closeOverlay()}},{key:"onEnterNormalScreenMode",value:function(){this._closeOverlay()}},{key:"savePresentationDetails",value:function(e,t){var n=this;if("ppt-wrapper"===e&&t){var a=t.currentSlideNumber;if(a&&(this.currentSlideNumber===a-1&&this._showOverlayIfExists(),this.currentSlideNumber=a),this.totalSlideNumber!==t.totalSlideNumber){var i=t.totalSlideNumber;if(i){i!==this.totalSlideNumber&&this.props.setNumberOfSlidesCallBack(i),this.totalSlideNumber=i;var r=this.props.markers&&this.props.markers.find((function(e){return e.time===n.totalSlideNumber}));this._communicator.send("thereIsInteractionsAfterLastSlide",r)}this._updateCustomLastPage()}}}},{key:"getCurrentSlideNumber",value:function(){return this.currentSlideNumber}},{key:"getTotalNumberOfSlides",value:function(){return this.totalSlideNumber}},{key:"changeIframeScript",value:function(e){this.iframeElement.contentWindow.document.getElementById(this.iframeScriptElementId).src=encodeURI(n.getS3ScriptUrlByCdn(e)),this.iframeElement.contentWindow.location.reload()}},{key:"addScriptsToIframe",value:function(){var e=this.iframeElement.contentWindow.document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src=encodeURI(n.getS3ScriptUrlByCdn(this.props.convertedDataSrc)),t.id=this.iframeScriptElementId,e.appendChild(t)}},{key:"displayInFullScreen",value:function(){m.default.isEditor()?g.default.sendEvent(g.default.TITLES.CLICK_FULL_SCREEN,g.default.COMPONENTS.CI_EDITOR):g.default.sendEvent(g.default.TITLES.CLICK_FULL_SCREEN,g.default.COMPONENTS.CI_PLAYER),document.getElementById("ppt-player-wrapper").classList.add("ppt-player-wrapper__full-screen"),this._communicator.send("toggleFullScreenMode",{fullScreenMode:!0});var e=document.getElementById("header-toolbar"),t=document.getElementById("stage");if(e&&t){var n=document.defaultView.getComputedStyle(e).zIndex;t.style.zIndex=parseInt(n,10)+1}this.setState({isFullScreenMode:!0})}},{key:"displayInNormalScreen",value:function(){var e=document.getElementById("ppt-player-wrapper");e.className=e.className.replace(/\bppt-player-wrapper__full-screen\b/g,""),this._communicator.send("toggleFullScreenMode",{fullScreenMode:!1}),document.getElementById("stage").style.zIndex="",this.setState({isFullScreenMode:!1})}},{key:"renderToggleFullScreenIcon",value:function(){return this.state.isFullScreenMode?p.default.createElement(y.default,{className:"ppt-player-wrapper__toggle-full-screen-icon",onClick:this.displayInNormalScreen}):p.default.createElement(E.default,{className:"ppt-player-wrapper__toggle-full-screen-icon",onClick:this.displayInFullScreen})}},{key:"render",value:function(){return p.default.createElement("div",{id:"ppt-player-wrapper",className:"ppt-player-wrapper"},this.props.viewMode&&this.renderToggleFullScreenIcon(this.state.isFullScreenMode),this._renderPptPlayerIframe(),this._renderInteractionOverlay())}},{key:"_renderPptPlayerIframe",value:function(){var e=this,t=this.props.ucPptPlayer,n=m.default.getOriginWithPath(),a=(0,h.default)("ppt-player-container",{"ppt-player-container__blurred":this.state.overlayElement&&(m.default.isFeatureEnabled("interactionsThemeV2")||m.default.isFeatureEnabled("unifiedContent"))});return t?p.default.createElement("iframe",{className:a,style:{width:"100%",height:"100%"},frameBorder:"0",onLoad:this.addScriptsToIframe,src:"".concat(n,"/uc-iframe-ppt-player.html"),ref:function(t){e.iframeElement=t}}):p.default.createElement("iframe",{className:a,style:{width:"100%",height:"100%"},frameBorder:"0",onLoad:this.addScriptsToIframe,src:"".concat(n,"/iframe-ppt-player.html"),ref:function(t){e.iframeElement=t}})}},{key:"processMarkers",value:function(e){var t=this;if(e){var n={};e.forEach((function(e){e.overlayElement&&(n[e.time]={overlayElement:S(S({},e.overlayElement),{},{props:S(S({},e.overlayElement.props),{},{closeOverlayFromPlayer:t._closeOverlay})})})})),this.setState({markerMap:n})}}},{key:"_updateCustomLastPage",value:function(){if(this.props.isMustCompleteQuestions){var e=this._getFirstNonDoneMarkerPageNumber();e?this._communicator.send("setCustomLastPage",{customLastPage:e}):this._communicator.send("setCustomLastPage",{customLastPage:null})}}},{key:"_closeOverlay",value:function(e){if(this.state.overlayElement){if(this.props.isMustCompleteQuestions)("boolean"==typeof e?e:this._overlayElementRef.isOverlayCompleted())||this._communicator.send("disableNextArrow");this.setState({overlayElement:null}),this._communicator.send("resumeKeystrokes"),this.currentSlideNumber&&this.totalSlideNumber&&this.currentSlideNumber===this.totalSlideNumber+1&&this._communicator.send("disableNextArrow")}}},{key:"_showOverlayIfExists",value:function(){var e=this.state.markerMap,t=this.currentSlideNumber,n=e[t]&&e[t].overlayElement;n&&(this.setState({overlayElement:n}),this._communicator.send("disableKeystrokes"))}},{key:"_renderInteractionOverlay",value:function(){var e=this,t=this.state.overlayElement;return t?p.default.createElement(t.component,(0,r.default)({},t.props,{ref:function(t){e._overlayElementRef=t}})):null}},{key:"_getFirstNonDoneMarkerPageNumber",value:function(){var e=this.props.markers,t=-1;if(e&&e.length){var n=e.find((function(e){return!e.isCompleted}));n&&(t=n.time)}return t+1}}],[{key:"sendMixPanelEvent",value:function(e,t){"ppt-wrapper"===e&&t&&g.default.sendEvent(g.default.TITLES[t.title],g.default.COMPONENTS.INTERACTIVE_POWER_POINT,t.params)}},{key:"getS3ScriptUrlByCdn",value:function(e){return"".concat(m.default.getAppdata().assets_prefix).concat(e.substring(e.indexOf("/resources"),e.length))}}]),n}(p.Component);b.defaultProps={isMustCompleteQuestions:!1,ucPptPlayer:!1};var I=b;t.default=I},2389:function(e,t,n){},2390:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#466975}\n        ")),a.createElement("g",{id:"FS",transform:"translate(-422.24 3)",key:1},[a.createElement("path",{id:"Union_14",d:"M4.528 6V2h-4V0h6v6z",className:"cls-1","data-name":"Union 14",transform:"rotate(180 214.384 7)",key:0}),a.createElement("path",{id:"Union_15",d:"M4.528 6V2h-4V0h6v6z",className:"cls-1","data-name":"Union 15",transform:"translate(432.713 -3)",key:1}),a.createElement("path",{id:"Union_16",d:"M4.528 6V2h-4V0h6v6z",className:"cls-1","data-name":"Union 16",transform:"rotate(90 215.884 223.357)",key:2}),a.createElement("path",{id:"Union_17",d:"M4.528 6V2h-4V0h6v6z",className:"cls-1","data-name":"Union 17",transform:"rotate(-90 212.884 -209.356)",key:3})])])}i.defaultProps={width:"17.001",height:"17.001",viewBox:"0 0 17.001 17.001"},e.exports=i,i.default=i},2391:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#466975}\n        ")),a.createElement("g",{id:"X",transform:"translate(-425.74 -.5)",key:1},[a.createElement("path",{id:"Path_868",d:"M0 0h12v2H0z",className:"cls-1","data-name":"Path 868",transform:"rotate(45 212.973 515.87)",key:0}),a.createElement("path",{id:"Path_869",d:"M.063.2h12v2h-12z",className:"cls-1","data-name":"Path 869",transform:"rotate(-45 223.507 -509.246)",key:1})])])}i.defaultProps={width:"9.899",height:"9.899",viewBox:"0 0 9.899 9.899"},e.exports=i,i.default=i},2392:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"nonzero"},[a.createElement("path",{d:"M13.193 3.69L7.168.64a.375.375 0 0 0-.336 0L.807 3.69a.375.375 0 0 0 0 .67l6.025 3a.375.375 0 0 0 .336 0l6.025-3a.375.375 0 0 0 0-.67zM13.193 9.69l-1.516-.746-4.174 2.087a1.13 1.13 0 0 1-1.006 0l-4.2-2.087-1.49.746a.375.375 0 0 0 0 .67l6.025 3a.375.375 0 0 0 .336 0l6.025-3a.375.375 0 0 0 0-.67z",key:0}),a.createElement("path",{d:"M13.193 6.69l-1.516-.746-4.174 2.087a1.13 1.13 0 0 1-1.006 0l-4.2-2.087-1.49.746a.375.375 0 0 0 0 .67l6.025 3a.375.375 0 0 0 .336 0l6.025-3a.375.375 0 0 0 0-.67z",key:1})]))}i.defaultProps={width:"14",height:"14",viewBox:"0 0 14 14"},e.exports=i,i.default=i},2393:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeWidth:"3"},a.createElement("path",{d:"M1.6 1.6l12.8 12.8M14.4 1.61.6 14.4"})))}i.defaultProps={width:"16",height:"16",viewBox:"0 0 16 16"},e.exports=i,i.default=i},2394:function(e,t,n){},2395:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(40)),o=i(n(3)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(37)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=f.default.isMobile,m=f.default.isPhone,v=h&&!m,g=[920,1024,1280,1440,1600,1920,2560],E=function(e){(0,l.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props.options,t=Array.from({length:n.maxNumOfColumns}).map((function(e,t){return d.default.createElement("div",{key:t,className:"library-responsive-grid-filler"})}));return d.default.createElement("div",{className:"library-responsive-grid ".concat(n.getDynamicClassStringForOptions(e))},d.default.createElement("div",{className:"library-responsive-grid-container"},this.renderChildren(),t))}},{key:"renderChildren",value:function(){var e=this.props.children;return d.default.Children.map(e,(function(e){return d.default.createElement("div",{className:"library-responsive-grid-column"},e)}))}}],[{key:"getOptionsPerDevice",value:function(e){return void 0!==e.columns?{phone:e,tablet:e,desktop:e}:e}},{key:"getClassNameForColumnsAndGutter",value:function(e,t,n){return"".concat(e,"-gutter-").concat(n,"-column-").concat(t)}},{key:"getDynamicClassStringForOptions",value:function(e){var t=n.getOptionsPerDevice(e),a={};return a=m||v?this.getClassesForMobileDevice(t):this.getClassesForDesktop(t),Object.keys(a).reduce((function(e,t){var i=a[t],o=i.columns,s=i.gutter;return[].concat((0,r.default)(e),[n.getClassNameForColumnsAndGutter(t,o,s)])}),[]).join(" ")}},{key:"getClassesForDesktop",value:function(e){var t=e.desktop,n="library-responsive-grid-desktop",a={};if(void 0!==t.columns)a[n]=t;else{var i=t.default;a[n]=i,g.forEach((function(e){var r="breakPoint".concat(e),o=t[r];void 0!==o?i=o:o=i,a["".concat(n,"-breakpoint-").concat(e)]=o}))}return a}},{key:"getClassesForMobileDevice",value:function(e){var t,n,a={};return m?(t="library-responsive-grid-phone",n=e.phone):(t="library-responsive-grid-tablet",n=e.tablet),void 0!==n.columns?a[t]=n:(a[t]=n.portrait,a["".concat(t,"-landscape")]=n.landscape),a}}]),n}(d.Component);E.maxNumOfColumns=10;var y=E;t.default=y},2396:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(33)),s=i(n(34)),l=i(n(40)),c=i(n(43)),u=a(n(0)),d=(i(n(2)),i(n(11))),f=i(n(60)),p=i(n(28)),h=i(n(2221)),m=a(n(216)),v=i(n(13)),g=a(n(1226)),E=a(n(607)),y=i(n(18)),_=a(n(2226)),S=i(n(362)),T=i(n(21)),b=i(n(2245)),I=i(n(36)),k=i(n(41)),C=i(n(327)),O=n(74),P=i(n(2238)),N=i(n(356)),A=i(n(604)),L=i(n(2374)),R=i(n(2372)),M=i(n(2373));n(2261);var w=i(n(2397)),D=i(n(2398)),x=i(n(2400));function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=p.default.Instance,F=function(e){var t=e.closeCB,n=e.eventItem,a=e.saveEventProperties,i=e.channelId,p=e.courseTemplateId,U=n.id,F=n.name,H=n.image,j=n.location,Y=n.description,V=n.startDate,W=n.endDate,z=n.hasScore,K=n.allDayEvent,X=n.liveSessionEvent,q=n.isPublished,Q=n.calendarInviteEnabled,Z=n.trainingResources,J=v.default.isInstructor(),$=v.default.isEditor(),ee=J&&!$,te={IMAGE_PICKER:y.default.getNestedJSON().interaction.IMAGE.IMAGE_PICKER,CROPPER:y.default.getNestedJSON().interaction.IMAGE.CROPPER},ne=v.default.isFeatureEnabled("scheduledEventCalendarInvite"),ae=(0,u.useRef)(),ie=(0,u.useRef)(),re=(0,u.useState)(!1),oe=(0,c.default)(re,2),se=oe[0],le=oe[1],ce=(0,u.useState)(H),ue=(0,c.default)(ce,2),de=ue[0],fe=ue[1],pe=(0,u.useState)(F),he=(0,c.default)(pe,2),me=he[0],ve=he[1],ge=(0,u.useState)(j||""),Ee=(0,c.default)(ge,2),ye=Ee[0],_e=Ee[1],Se=(0,u.useState)(Y||""),Te=(0,c.default)(Se,2),be=Te[0],Ie=Te[1],ke=(0,u.useState)("boolean"==typeof K&&K),Ce=(0,c.default)(ke,2),Oe=Ce[0],Pe=Ce[1],Ne=(0,u.useState)("boolean"==typeof X&&X),Ae=(0,c.default)(Ne,2),Le=Ae[0],Re=Ae[1],Me=(0,u.useState)(V?new Date(V).setHours(0,0,0,0):null),we=(0,c.default)(Me,2),De=we[0],xe=we[1],Ue=(0,u.useState)(W?new Date(W).setHours(0,0,0,0):null),Be=(0,c.default)(Ue,2),Ge=Be[0],Fe=Be[1],He=(0,u.useState)(z||!1),je=(0,c.default)(He,2),Ye=je[0],Ve=je[1],We=(0,u.useState)(!!ne&&("boolean"!=typeof Q||Q)),ze=(0,c.default)(We,2),Ke=ze[0],Xe=ze[1],qe=(0,u.useState)({value:0,displayValue:0}),Qe=(0,c.default)(qe,2),Ze=Qe[0],Je=Qe[1],$e=(0,u.useState)({value:0,displayValue:0}),et=(0,c.default)($e,2),tt=et[0],nt=et[1],at=(0,u.useState)(!1),it=(0,c.default)(at,2),rt=it[0],ot=it[1],st=(0,u.useState)(!1),lt=(0,c.default)(st,2),ct=lt[0],ut=lt[1],dt=(0,u.useState)(!1),ft=(0,c.default)(dt,2),pt=ft[0],ht=ft[1],mt=(0,u.useState)(),vt=(0,c.default)(mt,2),gt=vt[0],Et=vt[1],yt=(0,u.useState)([]),_t=(0,c.default)(yt,2),St=_t[0],Tt=_t[1],bt=(0,u.useState)(Z?(0,l.default)(Z):[]),It=(0,c.default)(bt,2),kt=It[0],Ct=It[1],Ot=(0,u.useState)(!1),Pt=(0,c.default)(Ot,2),Nt=Pt[0],At=Pt[1],Lt=(0,u.useState)(!1),Rt=(0,c.default)(Lt,2),Mt=Rt[0],wt=Rt[1],Dt=v.default.isFeatureEnabled("liveSession")||v.default.isFeatureEnabled("coronaPromotion")||U&&Le,xt=y.default.translate("ciEditor.eventSettingsDialog.liveSessionEvent.placeholder"),Ut=(0,u.useState)(!1),Bt=(0,c.default)(Ut,2),Gt=Bt[0],Ft=Bt[1];function Ht(e,t,n){return 60*e*60*1e3+60*t*1e3+1e3*n}function jt(e,t,n){return 60*e*60+60*t+n}function Yt(e){var t=document.querySelector("html");t&&(e?t.classList.add("time-picker-open"):t.classList.remove("time-picker-open"))}function Vt(){return Oe?new Date(Ge||De).setHours(23,59,59,999):Ge?Ge+tt.value:new Date(De).setHours(23,59,59,999)}(0,u.useEffect)((function(){if(J&&!Oe){if(V){var e=new Date(V),t=Ht(e.getHours(),e.getMinutes(),e.getSeconds()),n=jt(e.getHours(),e.getMinutes(),e.getSeconds());Je({value:t,displayValue:n}),xe(e.setHours(0,0,0,0))}if(W){var a=new Date(W),i=60*a.getHours()*60*1e3+60*a.getMinutes()*1e3+1e3*a.getSeconds(),r=60*a.getHours()*60+60*a.getMinutes()+a.getSeconds();nt({value:i,displayValue:r}),Fe(a.setHours(0,0,0,0))}}var o;ee||(null===(o=ae.current)||void 0===o||o.focus())}),[]);var Wt=function(){var e=(0,s.default)(o.default.mark((function e(){var t,n,a,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wt(!0),t=Vt(),n=79199999===t?null:t,a=Oe?De:De+Ze.value,e.next=6,G.get("".concat(v.default.getAppdata().backend_url,"/").concat("PlayAppService/training-resources"),{},{params:{dateFrom:a,dateTo:n,isActive:!0}});case 6:return i=e.sent,wt(!1),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),zt=function(){var e=(0,s.default)(o.default.mark((function e(){var t,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt();case 2:return t=e.sent,n=t.map((function(e){return e.id})),(a=(0,l.default)(kt)).filter((function(e){return!e.id})).forEach((function(e){n.indexOf(e.tempId)>-1?e.status="available":e.status="not-available"})),Ct(a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Kt(e,t){var n=[],a=Vt(),i=79199999===a?null:a;try{t.forEach(function(){var t=(0,s.default)(o.default.mark((function t(a){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={eventId:(null==e?void 0:e.cid)||U,startDate:new Date(Oe?De:De+Ze.value),endDate:new Date(i),resourceId:a.tempId},t.next=3,G.post("".concat(v.default.getAppdata().backend_url,"/").concat("PlayAppService/training-resources/:id/allocation"),{id:a.tempId},r);case 3:n.push(a.tempId);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(r){console.log(r)}return n}function Xt(e,t){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.default)(o.default.mark((function e(t,a){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.contentVersion||(null==n?void 0:n.contentVersion),e.next=3,h.default.updateEvent(i,t,r,a.name,a.location,a.liveSessionEvent,a.description,a.image,a.allDayEvent,a.startDate,a.endDate,a.hasScore,a.shouldPublish,a.notificationEnabled,a.sendInvitationImmediately,a.calendarInviteEnabled,a.trainingResources);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qt(e,t,n){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,s.default)(o.default.mark((function e(n,i,s){var c,u,d,f,h,m,g,E,y,_;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J||!$||De){e.next=3;break}return ot("startDate"),e.abrupt("return");case 3:if(c={name:me,location:ye,description:be,liveSessionEvent:Le,image:de,coverImageUrl:de,hasScore:Ye,shouldPublish:n},J?c=B(B({},c),{},{allDayEvent:Oe,startDate:Oe?De:De+Ze.value,endDate:Vt(),notificationEnabled:i,sendInvitationImmediately:s,calendarInviteEnabled:Ke}):$&&(c.courseTemplateId=p),c=B(B({},c),{},{trainingResources:kt}),!a){e.next=27;break}return e.next=9,a(c,!1);case 9:if(d=e.sent,f=(null==d?void 0:d.cid)||U,h=!1,!(v.default.isFeatureEnabled("trainingResources")&&pt&&De&&f)){e.next=25;break}return e.next=15,zt();case 15:if(m=e.sent,!((g=m.filter((function(e){return"available"===e.status}))).length>0)){e.next=25;break}return h=!0,E=Kt(d,g),(y=(0,l.default)(kt)).forEach((function(e){E.indexOf(e.id)&&(e.status="reserved")})),c=B(B({},c),{},{contentVersion:d.version,trainingResources:y.map((function(e){return B(B({},e),{},{id:e.tempId})}))}),e.next=25,Xt(f,c);case 25:_=U?n?k.default.TITLES.SAVE_AND_PUBLISH_OFF_PLATFORM_EVENT:k.default.TITLES.SAVE_OFF_PLATFORM_EVENT:k.default.TITLES.CREATE_OFF_PLATFORM_EVENT,k.default.sendEvent(_,k.default.COMPONENTS.OFF_PLATFORM_EVENT,(u={},(0,r.default)(u,k.default.PARAMS.HAS_SCORE,Ye),(0,r.default)(u,k.default.PARAMS.ALL_DAY_EVENT,Oe),(0,r.default)(u,k.default.PARAMS.LIVE_SESSION_EVENT,Le),(0,r.default)(u,k.default.PARAMS.CALENDAR_INVITE_ENABLED,Ke),(0,r.default)(u,k.default.PARAMS.SEND_INVITATION_RIGHT_NOW,s),(0,r.default)(u,k.default.PARAMS.ADDED_RESOURCES,h),u));case 27:t();case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,u.useEffect)((function(){kt.length>0&&ht(!0)}),[kt]);var Jt=function(){var e=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(U&&kt.length>0)){e.next=5;break}return e.next=4,G.remove("".concat(v.default.getAppdata().backend_url,"/").concat("PlayAppService/training-resources/:eventId/allocateAll"),{eventId:U});case 4:Xt(U,{trainingResources:[]});case 5:Ct([]),At(!1),ht(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),At(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),$t=function(e){Ft(!1),kt.length>0&&!e?At(!0):ht(e)},en=function(){var e=(0,s.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt();case 2:0===(t=(t=e.sent).filter((function(e){return!kt.find((function(t){return t.id===e.id||(null==t?void 0:t.tempId)===e.id}))}))).length?Ft(!0):Ft(!1),n=new Set,t.forEach((function(e){return n.add(e.type)})),Tt(Array.from(n)),Et(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var tn,nn,an;function rn(e){!e||!J||Date.now()>Vt()?Qt(e):ut(!0)}return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{className:"settings-open"},se?u.default.createElement(S.default,{locale:v.default.getLocale(),language:te,limitationConfiguration:v.default.getAppdata().appConf.sizeLimitation,allowCropping:!0,minCropSize:{width:255,height:160},cropToSquare:!1,validTypes:T.default.IMAGE_VALID_TYPES,uploadFile:b.default.uploadFile,onCancel:function(){le(!1)},onSubmit:function(e){fe(e),le(!1)},defaultValues:{imageUrl:de,itemName:me},useSimpleModal:!1}):null,se||ct?u.default.createElement("div",{className:"image-picker-background"}):null,ct&&(nn=A.default.allChannelsWithRoles.filter((function(e){return e.id===i}))[0],an=function(e){return void 0===e||e}(null==nn||null===(tn=nn.properties)||void 0===tn?void 0:tn.membersNotifications),u.default.createElement(P.default,{onSubmit:function(e,t){Qt(!0,e,t)},removeModal:function(){return ut(!1)},checked:an,messages:{dialogText:y.default.translate("modals.publish-confirmation-dialog.off-platform-event.dialog-text"),checkboxText:y.default.translate("modals.publish-confirmation-dialog.off-platform-event.notif-checkbox-text"),dialogTitleText:y.default.translate(J&&!$?"modals.publish-confirmation-dialog.off-platform-event.dialog-title-update":"modals.publish-confirmation-dialog.off-platform-event.dialog-title"),submitButtonText:y.default.translate(J&&!$?"ciEditor.settingsDialog.update":"modals.publish-confirmation-dialog.submit-button"),emailCheckboxText:y.default.translate("modals.publish-confirmation-dialog.calendar-invite.title"),emailCheckboxTextTooltip:y.default.translate("modals.publish-confirmation-dialog.calendar-invite.tooltip")},showEmailNotificationCheckbox:Ke,isEmailNotificationsCheckboxIndependent:!0,emailNotificationCheckboxChecked:!0,showLearnersNotification:an})),u.default.createElement("div",{className:"settings-wrapper"},u.default.createElement("div",{className:"settings-title"},y.default.translate("ciEditor.eventSettingsDialog.title"),t&&u.default.createElement("span",{className:"btn_close_dialog",onClick:t},u.default.createElement(L.default,null))),u.default.createElement("div",{className:"settings-box settings-box--event"},u.default.createElement("div",{className:"settings-box-image ".concat(de?"":"blank"),onClick:function(){le(!0)}},u.default.createElement("img",{src:de||R.default,alt:"cover"}),a&&u.default.createElement("div",{className:"settings-box-image-change"},u.default.createElement("div",null,u.default.createElement(M.default,null),u.default.createElement("br",null),y.default.translate(de?"ciEditor.settingsDialog.itemCover.change":"ciEditor.settingsDialog.itemCover.add")))),u.default.createElement("div",{className:"settings-box-title"},y.default.translate("ciEditor.eventSettingsDialog.itemCover.title")),u.default.createElement("div",{className:"settings-box-text"},y.default.translate("ciEditor.settingsDialog.name.title")),u.default.createElement("div",{className:(0,d.default)("settings-box-input",{required:!ee},{disabled:ee})},u.default.createElement("input",{type:"text",maxLength:100,defaultValue:me,onChange:ee?null:function(e){var t;ve(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},ref:ae,disabled:ee})),u.default.createElement("div",{className:"settings-box-text settings-box-text--event-location"},y.default.translate("ciEditor.eventSettingsDialog.location.title"),u.default.createElement(C.default,{tooltip:y.default.translate("ciEditor.eventSettingsDialog.location.tooltip")},u.default.createElement(O.QuestionIcon,{className:"settings-box__tooltip-icon"}))),u.default.createElement("div",{className:(0,d.default)("settings-box-input","settings-box-input--event-location")},u.default.createElement("input",{type:"text",maxLength:1e3,defaultValue:ye,ref:ie,onChange:function(e){var t;_e(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),Dt&&u.default.createElement("div",{className:"settings-box-checkbox",onClick:function(){var e=!Le;Re(e),e&&!ye?(ie.current.value=xt,_e(xt)):e||ye!==xt||(ie.current.value="",_e(""))}},u.default.createElement(N.default,{checked:Le}),u.default.createElement("div",{className:"settings-box-checkbox-text"},y.default.translate("ciEditor.eventSettingsDialog.liveSessionEvent.checkbox")))),u.default.createElement("div",{className:"settings-box-text settings-box-text--event-description"},y.default.translate("ciEditor.eventSettingsDialog.description.title")),u.default.createElement("div",{className:(0,d.default)("settings-box-input","settings-box-input--event-description")},u.default.createElement("textarea",{maxLength:250,value:be,onChange:function(e){var t;Ie(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}))),$&&!J?null:u.default.createElement("div",{className:"settings-dates-box"},u.default.createElement("div",{className:"settings-dates-box-title"},y.default.translate("ciEditor.eventSettingsDialog.when.title")),u.default.createElement("div",{className:"settings-dates-box-text"},y.default.translate("ciEditor.eventSettingsDialog.when.text")),u.default.createElement("div",{className:"settings-all-day-event-box"},u.default.createElement("div",{className:"settings-all-day-event-box-text"},y.default.translate("ciEditor.eventSettingsDialog.allDayEvent")),u.default.createElement("div",{className:"settings-all-day-event-box-toggle"},u.default.createElement(m.default,{showTooltip:!1,theme:m.TOGGLE_THEME.CLASSIC,isEnabled:Oe,onUserChangeState:function(e){Pe(e)}}))),u.default.createElement("div",{className:"settings-dates-box-dates"},u.default.createElement("div",null,u.default.createElement("div",{className:(0,d.default)("settings-availability-box-text",{required:J&&$})},y.default.translate("ciEditor.eventSettingsDialog.when.from")),u.default.createElement("div",{className:"relative-parent"},u.default.createElement("span",{className:"settings-availability-box-date settings-availability-box-text"},u.default.createElement(g.default,{theme:g.DATE_PICKER_THEME.CLASSIC,onShowCalendar:function(){ot(null)},onSelection:function(e){var t=e.setHours(0,0,0,0);(!Ge||Ge<=t)&&(Fe(t),tt.value<=Ze.value&&nt({value:Ze.value+36e5,displayValue:Ze.displayValue+3600})),xe(t)},selected:De?new Date(De):void 0,locale:v.default.getLocale(),styleClass:"startDate"===rt?"error":"",disablePastDays:!1}),"startDate"!==rt?null:u.default.createElement(_.default,{isError:!0,arrowDirection:_.ArrowDirection.UP,styleClass:"settings-availability-box-date__error-popup"},y.default.translate("SCHEDULING_DIALOG.ERRORS.NO_START_DATE"))),!Oe&&u.default.createElement("span",{className:"settings-availability-box-date"},u.default.createElement(E.default,{theme:E.TIME_PICKER_THEME.CLASSIC,startTimeInSeconds:null==Ze?void 0:Ze.displayValue,config:{format:"HH:mm",allowClear:!1,defaultValue:0,onOpenChange:Yt},onChange:function(e){var t=Ht(e.hours(),e.minutes(),e.seconds()),n=jt(e.hours(),e.minutes(),e.seconds());De===Ge&&(!tt.value||tt.value<=t)&&nt({value:t+36e5,displayValue:n+3600}),Je({value:t,displayValue:n})}})))),u.default.createElement("div",null,u.default.createElement("div",{className:(0,d.default)("settings-availability-box-text",{required:J&&$})},y.default.translate("ciEditor.eventSettingsDialog.when.until")),u.default.createElement("div",null,u.default.createElement("span",{className:"settings-availability-box-date settings-availability-box-text"},u.default.createElement(g.default,{startDate:De?new Date(De):void 0,theme:g.DATE_PICKER_THEME.CLASSIC,onSelection:function(e){var t=e.setHours(0,0,0,0);De===t&&tt.value<=Ze.value&&nt({value:Ze.value+36e5,displayValue:Ze.displayValue+3600}),Fe(t)},selected:Ge?new Date(Ge):void 0,locale:v.default.getLocale(),disablePastDays:!1,disableDateSelection:!De})),!Oe&&u.default.createElement("span",{className:"settings-availability-box-date"},u.default.createElement(E.default,{theme:E.TIME_PICKER_THEME.CLASSIC,config:{format:"HH:mm",allowClear:!1,defaultValue:0,onOpenChange:Yt,disabled:!De},startTimeInSeconds:null==tt?void 0:tt.displayValue,onChange:function(e){var t=Ht(e.hours(),e.minutes(),e.seconds()),n=jt(e.hours(),e.minutes(),e.seconds());De===Ge&&t<=Ze.value&&(t=Ze.value+36e5,n=Ze.displayValue+3600),nt({value:t,displayValue:n})}})))))),!ne||$&&!J?null:u.default.createElement("div",{className:"settings-checkbox-box"},u.default.createElement("div",{className:"settings-checkbox-box-title"},y.default.translate("ciEditor.eventSettingsDialog.calendarInvite.title")),u.default.createElement("div",{className:"settings-checkbox-box-text"},y.default.translate("ciEditor.eventSettingsDialog.calendarInvite.text")),u.default.createElement("div",{className:"settings-checkbox-box-toggle"},u.default.createElement(m.default,{showTooltip:!1,theme:m.TOGGLE_THEME.CLASSIC,isEnabled:Ke,onUserChangeState:function(e){Xe(e)}}))),J&&!$?null:u.default.createElement("div",{className:"settings-checkbox-box"},u.default.createElement("div",{className:"settings-checkbox-box-title"},y.default.translate("ciEditor.eventSettingsDialog.score.title")),u.default.createElement("div",{className:"settings-checkbox-box-text"},y.default.translate("ciEditor.eventSettingsDialog.score.text")),u.default.createElement("div",{className:"settings-checkbox-box-toggle"},u.default.createElement(m.default,{showTooltip:!1,theme:m.TOGGLE_THEME.CLASSIC,isEnabled:Ye,onUserChangeState:function(e){Ve(e)}}))),v.default.isFeatureEnabled("trainingResources")?u.default.createElement(w.default,{handleAddResource:en,hasResource:pt,selectedResources:kt,handleResourceToggle:$t,startDate:De,handleCheckResourceAvailability:zt,showNoAvailableResources:Gt}):null,u.default.createElement("div",{className:"settings-buttons"},u.default.createElement(I.default,{disabled:!1,id:"settings-button-cancel",onClick:t,text:y.default.translate("ciEditor.settingsDialog.cancel").toUpperCase(),theme:I.default.THEMES.LIGHT,type:I.default.TYPES.SECONDARY}),J&&!$&&u.default.createElement(I.default,{disabled:!1,id:"settings-button-save",onClick:function(){return rn(!0)},text:y.default.translate("ciEditor.settingsDialog.update"),theme:I.default.THEMES.LIGHT,type:I.default.TYPES.PRIMARY}),$&&(!U||!q)&&u.default.createElement(I.default,{disabled:!me||J&&!De,id:"settings-button-save",onClick:function(){return rn(!1)},text:y.default.translate(U?"ciEditor.settingsDialog.save":"ciEditor.settingsDialog.create"),theme:I.default.THEMES.LIGHT,type:I.default.TYPES.PRIMARY}),$&&u.default.createElement(I.default,{disabled:!me||J&&!De,id:"settings-button-save-publish",onClick:function(){return rn(!0)},text:y.default.translate(U?"ciEditor.eventSettingsDialog.saveAndPublish":"ciEditor.eventSettingsDialog.createAndPublish"),theme:I.default.THEMES.LIGHT,type:I.default.TYPES.PRIMARY}),(null==gt?void 0:gt.length)>0&&u.default.createElement(D.default,{types:St,resources:gt,setShowResourceModal:Et,handleResourceSave:function(e){Et(),Ct([].concat((0,l.default)(kt),[e]))}}),Nt&&u.default.createElement(x.default,{setConfirmResourceToggle:At,resourceToggleSubmit:Jt})))),Mt&&u.default.createElement(f.default,null))};F.defaultProps={closeCB:null,eventItem:void 0,saveEventProperties:void 0,courseTemplateId:void 0};var H=F;t.default=H},2397:function(e,t,n){"use strict";var a=n(1),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=a(n(18)),s=a(n(36)),l=i(n(216));var c=function(e){var t=e.handleAddResource,n=e.hasResource,a=e.handleResourceToggle,i=e.selectedResources,c=e.startDate,u=e.handleCheckResourceAvailability,d=e.showNoAvailableResources;return r.default.createElement("div",{className:"settings-checkbox-box"},r.default.createElement("div",{className:"settings-checkbox-box-title"},o.default.translate("event.resource.title.heading")),r.default.createElement("div",{className:"settings-checkbox-box-text"},o.default.translate("event.resource.title.description"),n&&r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"resources-btn-layout"},r.default.createElement("div",{className:"add-resource-button-wrapper"},r.default.createElement(s.default,{disabled:!1,id:"settings-button-add-resource",onClick:t,text:o.default.translate("event.resource.title.addbutton"),theme:s.default.THEMES.LIGHT,type:s.default.TYPES.SECONDARY}),d&&r.default.createElement("div",{className:"error"},o.default.translate("event.resource.title.addbutton-error"))),r.default.createElement("div",{className:"add-resource-button-wrapper"},r.default.createElement(s.default,{disabled:!c||0===i.length,id:"settings-button-availability",onClick:u,text:o.default.translate("event.resource.title.check-availability"),theme:s.default.THEMES.LIGHT,type:s.default.TYPES.PRIMARY}))),(null==i?void 0:i.length)>0&&r.default.createElement("div",{className:"table-grid table-layout"},r.default.createElement("span",{className:"heading"},o.default.translate("event.resource.table.resource")),r.default.createElement("span",{className:"heading"},o.default.translate("event.resource.table.type")),r.default.createElement("span",{className:"heading"},o.default.translate("event.resource.table.status")),r.default.createElement("span",{className:"heading"},o.default.translate("event.resource.table.description")),i.map((function(e){return r.default.createElement(r.Fragment,{key:(null==e?void 0:e.id)||(null==e?void 0:e.tempId)},r.default.createElement("span",{className:"cell-value highlight"},e.name),r.default.createElement("span",{className:"cell-value"},e.type),r.default.createElement("span",{className:"cell-value"},r.default.createElement("span",{className:"resource-status ".concat((null==e?void 0:e.id)?"reserved":(null==e?void 0:e.status)?e.status:"not-scheduled")},(null==e?void 0:e.id)?o.default.translate("event.resource.status.reserved"):(null==e?void 0:e.status)?o.default.translate("event.resource.status.".concat(e.status)):o.default.translate("event.resource.status.not-scheduled"))),r.default.createElement("span",{className:"cell-value"},e.description))}))))),r.default.createElement("div",{className:"settings-checkbox-box-toggle"},r.default.createElement(l.default,{showTooltip:!1,theme:l.TOGGLE_THEME.CLASSIC,isEnabled:n,onUserChangeState:function(e){a(e)}})))};t.default=c},2398:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(43)),s=a(n(0)),l=i(n(58)),c=i(n(18)),u=a(n(603)),d=i(n(13)),f=i(n(2399));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t,n=e.types,a=e.resources,i=e.setShowResourceModal,r=e.handleResourceSave,p=d.default.getAppdata(),m=null==p||null===(t=p.appConf)||void 0===t?void 0:t.currencySymbol,v=(0,s.useState)([]),g=(0,o.default)(v,2),E=g[0],y=g[1],_=(0,s.useState)({}),S=(0,o.default)(_,2),T=S[0],b=S[1],I=[{id:"1",text:c.default.translate("event.resource.modal.button.close"),type:"secondary",onClick:function(){return i(!1)}},{id:"2",text:c.default.translate("event.resource.modal.button.save"),onClick:function(){return r(T)},disabled:!(T.tempId&&T.type)}],k=s.default.createElement(f.default,null,s.default.createElement("div",{className:"resource-type"},s.default.createElement("label",{className:"model-label"},c.default.translate("event.resource.modal.resourcetype"))),s.default.createElement(u.default,{theme:u.DROPDOWN_THEME.CLASSIC,className:"channel-dropdown channel-dropdown--sort w-100",options:n.map((function(e){return{id:e,label:e,selected:e===(null==T?void 0:T.type)}})),onChange:function(e){var t=e.label;b({type:t});var n=a.filter((function(e){return e.type===t}));y(n)},ignoreWidth:!0,noBorder:!0,placeholder:c.default.translate("event.resource.modal.resourcetype-placeholder")}),s.default.createElement("div",{className:"description"},s.default.createElement("label",{className:"model-label"},c.default.translate("event.resource.modal.name"))),s.default.createElement(u.default,{theme:u.DROPDOWN_THEME.CLASSIC,className:"channel-dropdown channel-dropdown--sort w-100",options:E.map((function(e){return{id:e.id,label:e.name,cost:e.cost,selected:e.name===(null==T?void 0:T.name),description:e.description}})),onChange:function(e){var t=e.id,n=e.label,a=e.cost,i=e.description;b(h(h({},T),{},{name:n,tempId:t,cost:a,description:i,status:"not-scheduled"}))},ignoreWidth:!0,noBorder:!0,disabled:!(null==T?void 0:T.type),placeholder:c.default.translate("event.resource.modal.name-placeholder")}),(null==T?void 0:T.cost)&&s.default.createElement("div",{className:"cost"},s.default.createElement("span",{className:"model-label"},c.default.translate("event.resource.modal.cost")," :"),s.default.createElement("span",{className:"model-cost"},"".concat(m," ").concat(null==T?void 0:T.cost,"/").concat(c.default.translate("event.resource.modal.cost-time")))),s.default.createElement("div",{className:"description"},s.default.createElement("label",{className:"model-label"},c.default.translate("event.resource.table.description"))),s.default.createElement("textarea",{className:"model-textarea",value:T.description||"",style:{resize:"none"},readOnly:!0}));return s.default.createElement(l.default,{close:function(){return i([])},title:c.default.translate("event.resource.resource.add.title"),content:k,actions:I})};t.default=m},2399:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(125)).default.div.withConfig({displayName:"ResourceManagerModalStyled",componentId:"j1n49d-0"})([".resource-type{margin-bottom:5px;}.description{margin-bottom:5px;margin-top:16px;}.model-label{color:#4B6170;font-weight:600;}.model-textarea{width:calc(100% - 32px);height:60px;border-color:#cfcfcf;outline:none;padding:10px 15px;}.cost{margin-top:16px;}.model-cost{background:#f2f2f2;padding:5px 8px;border-radius:10px;}.dropdown-component{width:100%;}"]);t.default=i},2400:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.setConfirmResourceToggle,n=e.resourceToggleSubmit,a=i.default.createElement("div",null,o.default.translate("event.resource.resource.remove.description")),s=[{id:"1",text:o.default.translate("event.resource.confirm.button.no"),type:"secondary",onClick:function(){return t(!1)}},{id:"2",text:o.default.translate("event.resource.confirm.button.yes"),onClick:function(){return n()}}];return i.default.createElement("div",null,i.default.createElement(r.default,{close:function(){return t(!1)},title:o.default.translate("event.resource.resource.remove.title"),content:a,actions:s}))};var i=a(n(0)),r=a(n(58)),o=a(n(18))},2401:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(9)),l=i(n(3)),c=i(n(4)),u=i(n(12)),d=i(n(6)),f=i(n(8)),p=i(n(7)),h=a(n(0)),m=(i(n(2)),i(n(37))),v=i(n(328)),g=i(n(2402)),E=i(n(2409)),y=i(n(2186)),_=i(n(58)),S=i(n(13)),T=i(n(1231)),b=i(n(2412)),I=i(n(18)),k=i(n(41)),C=i(n(601)),O=i(n(216)),P=i(n(78)),N=n(1224),A=i(n(2238)),L=i(n(21)),R=i(n(11)),M=n(942),w=i(n(2208)),D=i(n(2288)),x=i(n(2264)),U=i(n(2221)),B=i(n(2189)),G=a(n(2247)),F=i(n(2325)),H=i(n(2418)),j=i(n(2207)),Y=i(n(2424)),V=i(n(2425)),W=i(n(2426)),z=i(n(2427)),K=i(n(2428)),X=i(n(2429)),q=a(n(2187)),Q=a(n(2430)),Z=a(n(2239)),J=i(n(1233)),$=i(n(2431)),ee=i(n(951)),te=i(n(2295)),ne=i(n(2433)),ae=i(n(2434)),ie=i(n(2240)),re=i(n(2435)),oe=i(n(600)),se=i(n(2292)),le=i(n(2185)),ce=i(n(2436)),ue=i(n(355)),de=i(n(2437)),fe=i(n(2440)),pe=i(n(2442)),he=i(n(2326)),me=i(n(2204)),ve=i(n(602)),ge=i(n(2298));function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var Se=y.default.Hoc,Te=T.default.Hoc,be=v.default.Hoc,Ie=v.default.Action,ke=v.default.LEVEL,Ce=v.default.POSITION,Oe=m.default.default?m.default.default:m.default,Pe=Oe.isMobile,Ne=Oe.isTablet,Ae=function(e){(0,d.default)(m,e);var t,n,a,i,f,p=_e(m);function m(e){var t;(0,l.default)(this,m),(t=p.call(this,e)).showStructureLinkedDialog=t.showStructureLinkedDialog.bind((0,u.default)(t)),t.libraryItemType=B.default.serverTypeToUiType[t.props.libraryItem.type],t.libraryItemTypeName=B.default.ServerTypeToUiTypeConvertor(t.libraryItemType),t.libraryItemClk="",t.state={isOpen:!1},t.showNotification=t.showNotification.bind((0,u.default)(t)),t.buildMenuItems=t.buildMenuItems.bind((0,u.default)(t)),t.openSettingsLibraryModal=t.openSettingsLibraryModal.bind((0,u.default)(t)),t.openTopicsLibraryModal=t.openTopicsLibraryModal.bind((0,u.default)(t)),t.openDeleteModal=t.openDeleteModal.bind((0,u.default)(t)),t.handleLibraryItemDelete=t.handleLibraryItemDelete.bind((0,u.default)(t)),t.handleUpdate=t.handleUpdate.bind((0,u.default)(t)),t.handleTopicsUpdate=t.handleTopicsUpdate.bind((0,u.default)(t)),t.updateSettings=t.updateSettings.bind((0,u.default)(t)),t.updateOffPlatformEventSettings=t.updateOffPlatformEventSettings.bind((0,u.default)(t)),t.updateCourseTemplate=t.updateCourseTemplate.bind((0,u.default)(t)),t.updateFuse=t.updateFuse.bind((0,u.default)(t)),t.handleLibraryItemUnpublishClick=t.handleLibraryItemUnpublishClick.bind((0,u.default)(t)),t.handleEditLibraryItemClick=t.handleEditLibraryItemClick.bind((0,u.default)(t)),t.openUnpublishModal=t.openUnpublishModal.bind((0,u.default)(t)),t.handleGetPublishLink=t.handleGetPublishLink.bind((0,u.default)(t)),t.handleReportClick=t.handleReportClick.bind((0,u.default)(t)),t.downloadCallBack=t.downloadCallBack.bind((0,u.default)(t)),t.closeExportDialogCallBack=t.closeExportDialogCallBack.bind((0,u.default)(t)),t.openLockModal=t.openLockModal.bind((0,u.default)(t)),t.handleDuplicate=t.handleDuplicate.bind((0,u.default)(t)),t.onCloseInviteLibraryModal=t.onCloseInviteLibraryModal.bind((0,u.default)(t)),t.openDuplicateContentModal=t.openDuplicateContentModal.bind((0,u.default)(t)),t.showModuleLinkedDialog=t.showModuleLinkedDialog.bind((0,u.default)(t)),t.openPermissionModal=t.openPermissionModal.bind((0,u.default)(t)),t.openSchedulingDialog=t.openSchedulingDialog.bind((0,u.default)(t)),t._onMenuToggle=t._onMenuToggle.bind((0,u.default)(t)),t.handleTryAgain=t.handleTryAgain.bind((0,u.default)(t)),t.openPublishDialog=t.openPublishDialog.bind((0,u.default)(t)),t.getIsCiPublished=t.getIsCiPublished.bind((0,u.default)(t)),t.handlePublishLibraryItemClick=t.handlePublishLibraryItemClick.bind((0,u.default)(t));var n={addWizard:e.addWizard,removeWizard:e.removeWizard,setLoader:e.setLoader,channelId:e.channelId,onRefresh:e.onRefresh,ltr:e.ltr,addModal:e.addModal,removeModal:e.removeModal,locale:e.locale,showNotification:t.showNotification};return t.assignmentWizardService=new de.default(n),t}return(0,c.default)(m,[{key:"render",value:function(){var e=this.props,t=e.showMenuOnTablet,n=e.showMenuOnMobile;if(Ne){if(!t)return null}else if(Pe&&!n)return null;var a=this.props,i=a.ltr,r=a.libraryItem,o=(0,R.default)("library-item-popup-menu",{"attach-right":!!i},{"attach-left":!i},{"popup-menu-open":this.state.isOpen});return r.isLocked&&S.default.isLearner()?null:(this.menuItems=this.buildMenuItems(),this.menuItems&&this.menuItems.length>0?h.default.createElement("div",{className:o},h.default.createElement(J.default,{listItems:this.menuItems,automationInfo:r.name,onMenuToggle:this._onMenuToggle})):null)}},{key:"renderDuplicateErrorDialog",value:function(){var e=this.props,t=e.addModal,n=e.removeModal,a=e.ltr,i=[{id:"done",text:I.default.translate("modals.duplicate.buttons.ok"),type:_.default.BUTTON_TYPES.PRIMARY,onClick:n}],r=(0,R.default)("import-content-dialog",{ltr:!!a},{rtl:!a});t(h.default.createElement("div",{className:r},h.default.createElement(_.default,{theme:_.default.THEMES.LIGHT,title:I.default.translate("modals.duplicate.title"),content:h.default.createElement("div",null,h.default.createElement("p",null," ",I.default.translate("modals.duplicate.body"))),actions:i})))}},{key:"handleLockError",value:function(e,t){var n=this.props.handleLockError;n(e,t)}},{key:"openUCSettings",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal,r=n.onRefresh,o=n.setLoader;a(h.default.createElement(D.default,{channelId:e.channelId,contentItem:ye(ye({},e),{},{cid:e.id}),saveCIProperties:function(n){S.default.isEditor()&&t.handleUpdate(e,n),r()},closeCB:function(){i()},setLoader:o,addModal:a,removeModal:i}))}},{key:"openOffPlatformEventSettings",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal,r=n.onRefresh,o=n.channelId;a(h.default.createElement(x.default,{channelId:o,eventItem:ye({},e),saveEventProperties:function(n){return t.handleUpdate(e,n)},closeCB:function(){i(),r()}}))}},{key:"openOffPlatformEventModal",value:function(e){var t=this.props,n=t.addModal,a=t.removeModal,i=t.setLoader;n(h.default.createElement(ge.default,{offPlatformEvent:e,onClose:a,setLoader:i}))}},{key:"getMenuItems",value:function(e){var t=this,n={};return n[Q.LOCK]={dictionaryKey:Q.LOCK,disabledWhenLocked:!0,disableWhenNotLocked:!1,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.LOCK),t.handleLockLibraryItem(e)}},n[Q.UNLOCK]={dictionaryKey:Q.UNLOCK,disabledWhenLocked:!1,disableWhenNotLocked:!0,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.UNLOCK),t.handleUnLockLibraryItem(e)}},n[Q.PLAY]={dictionaryKey:Q.PLAY,disableWhenNotPublished:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.PLAY),t.props.onClick()}},n[Q.SETTINGS]={dictionaryKey:Q.SETTINGS,icon:W.default,iconDisabled:W.default,disabledWhenPublished:!1,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.SETTINGS),t.libraryItemType===q.STRUCTURE?t.openStructureSettingsModal(e):t.libraryItemType===q.UCONTENT?t.openUCSettings(e):t.openSettingsLibraryModal(t.libraryItemType,e)}},n[Q.TOPICS]={dictionaryKey:Q.TOPICS,icon:W.default,iconDisabled:W.default,disabledWhenPublished:!1,hideInSearchResults:!0,onClick:function(){t.openTopicsLibraryModal(t.libraryItemType,e)}},n[Q.EDIT]={dictionaryKey:Q.EDIT,icon:W.default,iconDisabled:W.default,disabledWhenPublished:!1,hideInNotOriginalChannel:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.EDIT),t.libraryItemType===q.OFF_PLATFORM_EVENT?t.openOffPlatformEventSettings(e):t.handleEditLibraryItemClick()}},n[Q.DELETE]={dictionaryKey:Q.DELETE,icon:z.default,iconDisabled:K.default,disabledWhenPublished:!0,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.DELETE),t.openDeleteModal(e)}},n[Q.PUBLISH]={dictionaryKey:Q.PUBLISH,icon:Y.default,iconDisabled:Y.default,disabledWhenPublished:!1,disableWhenNotPublished:!1,hideInSearchResults:!0,hideInNotOriginalChannel:!0,onClick:function(){t.handlePublishLibraryItemClick(e)}},n[Q.UNPUBLISH]={dictionaryKey:Q.UNPUBLISH,icon:V.default,iconDisabled:X.default,hideInSearchResults:!0,disableWhenNotPublished:!0,hideInNotOriginalChannel:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.UNPUBLISH),t.libraryItemType===q.COURSE_TEMPLATE?t.unpublishCourseTemplate(e):t.openUnpublishModal(e)}},n[Q.PREVIEW]={dictionaryKey:Q.PREVIEW,disableWhenNotPublished:!1,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.PREVIEW),t.libraryItemType===q.OFF_PLATFORM_EVENT?t.openOffPlatformEventModal(e):se.default.handleGetPreviewLink(e)}},n[Q.REPORTS]={dictionaryKey:Q.REPORTS,disableWhenNotPublished:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.REPORTS),t.handleReportClick()}},n[Q.DUPLICATE]={hideInSearchResults:!0,dictionaryKey:Q.DUPLICATE,onClick:function(){"CHANNEL"!==e.type&&(t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.DUPLICATE),t.handleDuplicate(e.id,e.channelId,e.type,e.version))}},n[Q.EXPORT]={dictionaryKey:Q.EXPORT,hideInSearchResults:!0,disableWhenNotPublished:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.EXPORT),t.handleXApiExport(e)}},n[Q.INVITE_LEARNERS]={dictionaryKey:Q.INVITE_LEARNERS,hideInSearchResults:!0,disabledWhenPublished:!1,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.INVITE_LEARNERS),t.openInviteLibraryModal(e)}},n[Q.MANAGE_USERS]={dictionaryKey:Q.INVITE_LEARNERS,hideInSearchResults:!0,disabledWhenPublished:!1,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.MANAGE_USERS),t.openInviteLibraryModal(e)}},n[Q.ASSIGNMENT_CREATE]={dictionaryKey:Q.ASSIGNMENT_CREATE,hideWhenAssignment:!0,hideInSearchResults:!0,disableWhenNotPublished:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.ASSIGNMENT_CREATE),t.assignmentWizardService.createAssignmentWizard(e)}},n[Q.ASSIGNMENT_EDIT]={dictionaryKey:Q.ASSIGNMENT_EDIT,hideWhenNotAssignment:!0,disableWhenNotPublished:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.ASSIGNMENT_EDIT),t.assignmentWizardService.createAssignmentWizardForEdit(e)}},n[Q.ASSIGNMENT_DELETE]={dictionaryKey:Q.ASSIGNMENT_DELETE,hideWhenNotAssignment:!0,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.ASSIGNMENT_DELETE),t.assignmentWizardService.deleteAssignment(e)}},n[Q.PERMISSION]={dictionaryKey:Q.PERMISSION,isGeneralPermission:N.permissionType.CHANGE_EDITOR_PERMISSION,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.PERMISSION),t.openPermissionModal(e)}},n[Q.SCHEDULE]={dictionaryKey:Q.SCHEDULE,disableWhenNotPublished:!0,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.SCHEDULE),t.openSchedulingDialog(e)}},n[Q.TRYAGAIN]={dictionaryKey:Q.TRYAGAIN,hideInSearchResults:!0,onClick:function(){t._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.RETRIES),t.openTryAgainModal(e)}},n}},{key:"handleReportClick",value:function(){var e=this.props,t=e.setStage,n=e.reportStageConfig,a=e.libraryItem;(P.default.getPermissionByActionType(N.permissionType["".concat(this.libraryItemTypeName,"_REPORTS")],a.channelId||a.id)||S.default.isFeatureEnabled("reports"))&&t(n)}},{key:"buildMenuItems",value:function(){var e,t=this.props,n=t.libraryItem,a=t.fromSearch,i=t.inPreviewMode;if(!n)return[];var r=this.libraryItemType===q.CHANNEL,o=n.roles;if(!o){var l=ue.default.instance.contextRole;o=l&&l.roles}var c=o&&S.default.isEditor({roles:o}),u=n.isLocked||n.path&&n.path.isLocked,d=o&&S.default.isLearner(o)&&u,f=[];if(i)return this._handlePreviewMode(n,f);var p=!1,h=!1;if(n.contentItemPermission&&c){var m=n.contentItemPermission.allowedActions.find((function(e){return e.action===N.permissionType.CONTENT_ITEM_EDIT&&e.allowed}));p=Boolean(m),h=!m}var v=d?[]:P.default.getPermissionByContentType(this.libraryItemTypeName,n.channelId||n.id,!r&&q.CHANNEL);S.default.isInstructor()&&!S.default.isEditor()&&this.libraryItemType===q.UCONTENT&&v.push("SETTINGS"),v&&v.indexOf("LOCK")&&this.libraryItemType===q.UCONTENT&&(v=(v=v.filter((function(e){return"LOCK"!==e}))).filter((function(e){return"UNLOCK"!==e})));var g=[["PLAY","EDIT","DUPLICATE","PREVIEW","REPORTS"],["SETTINGS","TOPICS"],["LOCK","UNLOCK"],-1===[q.UCONTENT,q.OFF_PLATFORM_EVENT].indexOf(this.libraryItemType)?["PUBLISH","UNPUBLISH"]:["UNPUBLISH"],["EXPORT"],["DELETE"],["INVITE_LEARNERS"],["MANAGE_USERS"]],E=(e={},(0,s.default)(e,q.LESSON,!0),(0,s.default)(e,q.BUZZ,!0),(0,s.default)(e,q.ASSESSMENT,!0),(0,s.default)(e,q.FUSE,!0),e);if(B.default.serverTypeToUiType[n.type]in E&&S.default.isInstructor()&&S.default.isFeatureEnabled("scheduleCi")&&g[2].push("SCHEDULE"),B.default.serverTypeToUiType[n.type]===q.ASSESSMENT&&S.default.isInstructor()&&S.default.isFeatureEnabled("assessmentTryAgain")&&g[2].push("TRYAGAIN"),h&&(g=[["PLAY","PREVIEW"],["REPORTS"],["DUPLICATE","EXPORT"]]),v&&v.length>0&&p&&g.push(["PERMISSION"]),S.default.isFeatureEnabled("assignment")&&this.libraryItemType!==q.UCONTENT&&g.push(["ASSIGNMENT_CREATE","ASSIGNMENT_EDIT","ASSIGNMENT_DELETE"]),null!==v){var y=this.getIsCiPublished(n),_=this.getMenuItems(n);g.forEach((function(e){var t=[];e.forEach((function(e){if(void 0!==Q[e]){var i=_[Q[e]];if(void 0!==i){var s=!r&&Boolean(y&&i.disabledWhenPublished||!y&&i.disableWhenNotPublished||!n.isLocked&&i.disableWhenNotLocked||n.isLocked&&i.disabledWhenLocked);if(n.assignment&&i.hideWhenAssignment||!n.assignment&&i.hideWhenNotAssignment||i.hideInSearchResults&&a)return;if(!Pe&&i.onlyOnMobile)return;if(!S.default.isFeatureEnabled("showReportsToLearner")&&o&&S.default.isLearner({roles:o})&&"REPORTS"===e||"REPORTS"===e&&!S.default.isFeatureEnabled("reports"))return;if(!S.default.isFeatureEnabled("textTopics")&&o&&S.default.isEditor({roles:o})&&"TOPICS"===e)return;if(i.isGeneralPermission){if(!P.default.getPermissionByActionType(i.isGeneralPermission,n.channelId||n.id))return}else if(!v.length||-1===v.indexOf(e)&&e)return;t.push({key:e,ref:i.ref,onClick:i.onClick,text:I.default.translate("BOOK.MENU_ITEM_LABELS."+i.dictionaryKey),disabled:s,testString:e})}}})),t.length>0&&f.push(t)}))}return f}},{key:"_handlePreviewMode",value:function(e,t){var n=this.getMenuItems(e),a=[];return[["PREVIEW"]].forEach((function(e){e.forEach((function(e){if(void 0!==Q[e]){var t=n[Q[e]];!Pe&&t.onlyOnMobile||a.push({key:e,ref:t.ref,onClick:t.onClick,text:I.default.translate("BOOK.MENU_ITEM_LABELS."+t.dictionaryKey),disabled:!1,testString:e})}}))})),a.length>0&&t.push(a),t}},{key:"openStructureSettingsModal",value:function(e){var t=this.props,n=t.addModal,a=t.removeModal,i=t.ltr,r=t.onRefresh;n(h.default.createElement(F.default,{value:e.name,ltr:i,onSubmit:function(t){me.default.updateStructureName(ye(ye({},e),{},{name:t})).then((function(){r()})).catch((function(e){ve.default.showNotification(I.default.translate("STRUCTURE.NEW_STRUCTURE_CREATION_FAILED")),oe.default.error({message:JSON.stringify(e)})})),a()},onCancel:a}))}},{key:"openSettingsLibraryModal",value:function(e,t){var n=this,a=this.props,i=a.addModal,r=a.removeModal,o=a.onRefresh,s=a.setLoader,l=a.channelId,c=e===q.CHANNEL,u=h.default.createElement(G.default,{libraryItemType:e,libraryItemRoles:t.roles,onSubmit:function(a){return n.handleUpdate(t,a,e)},onCancel:r,formMode:G.FORM_MODE.EDIT,defaultValues:{name:t.name,coverImageUrl:t.image,id:t.id,version:t.contentVersion,itemLanguage:t.locale,isAllowedForGuests:t.properties&&t.properties.isAllowedForGuests,description:t.properties&&t.properties.description,groupTypeSeparator:t.properties&&t.properties.groupTypeSeparator,channelId:l},courseSettingsActions:c?h.default.createElement(he.default,{channelId:t.id,onAction:o,showNotification:this.showNotification,setLoader:s}):null});C.default.obtainLock(t.id,l).then((function(e){e.acknowledged?i(u):n.handleLockError({lockResponse:e})}))}},{key:"openTopicsLibraryModal",value:function(e,t){var n=this,a=this.props,i=a.addModal,r=a.removeModal,o=a.setLoader;o(!0);var s=t.id,l=t.contentVersion;ce.default.getTopics(s,l).then((function(a){var s=h.default.createElement(H.default,{libraryItemType:e,formMode:G.FORM_MODE.EDIT,defaultValues:{id:t.id,version:t.contentVersion,itemLanguage:t.locale},topicsModel:a,onCancel:r,onSubmit:n.handleTopicsUpdate});o(!1),i(s)})).catch((function(e){oe.default.error({message:"Failed to get the topics for content item, ".concat(JSON.stringify(e))})}))}},{key:"openInviteLibraryModal",value:function(e){var t=this.props,n=t.addModal,a=t.channelId;n(h.default.createElement(ee.default,{entityId:a,entitiyType:L.default.ROLE_AND_PERMISSION_CONTEXT.CHANNEL,onCancel:this.onCloseInviteLibraryModal,permissions:e.permissions,showNotification:this.showNotification,isChannelAllowedForGuests:e.properties.isAllowedForGuests}))}},{key:"onCloseInviteLibraryModal",value:function(){this.props.updateNumberOfJoinedLearners(),this.props.removeModal()}},{key:"openDeleteAlertModal",value:function(){var e=this.props,t=e.addModal,n=e.removeModal;t(h.default.createElement(_.default,{title:I.default.translate("CONTENT_EDITOR.DELETE_ALERT_TITLE"),content:I.default.translate("CONTENT_EDITOR.DELETE_ALERT_MESSAGE"),actions:[{id:"close-button",text:I.default.translate("CONTENT_EDITOR.DELETE_ALERT_CLOSE"),onClick:n}]}))}},{key:"openDeleteConfirmModal",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal;a(h.default.createElement(w.default,{title:I.default.translate("CONTENT_EDITOR.DELETE_CONTENT_ITEM_DIALOG_TITLE").replace(/\$1/g,I.default.translate("CONTENT_EDITOR.BOOK_TYPE."+B.default.itemTypeToLanguageKey(e.type))),content:I.default.translate("CONTENT_EDITOR.DELETE_DIALOG_MESSAGE"),hasToRenderConfirmQuestion:!0,onSubmit:function(){t.handleLibraryItemDelete(e)},onCancel:i}))}},{key:"openDeleteModal",value:(f=(0,o.default)(r.default.mark((function e(t){var n;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.libraryItemType!==q.STRUCTURE){e.next=7;break}return e.next=3,le.default.getChannelsWhichUseCourseStructure(t.id);case 3:(n=e.sent)&&n.length?this.openDeleteAlertModal():this.openDeleteConfirmModal(t),e.next=8;break;case 7:this.openDeleteConfirmModal(t);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"openTryAgainModal",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal,r=n.onRefresh,o=!!(e.itemProperties&&e.itemProperties.assessmentTryAgain&&e.itemProperties.assessmentTryAgain.enable);a(h.default.createElement(_.default,{theme:_.default.THEMES.LIGHT,styleClass:"assessment-try-again-modal",title:I.default.translate("modals.TRY_AGAIN.title"),content:h.default.createElement("div",null,h.default.createElement("div",{className:"content"},I.default.translate("modals.TRY_AGAIN.content")),h.default.createElement("div",{className:"toggle-btn"},h.default.createElement(O.default,{isEnabled:o,onUserChangeState:function(e){o=e},enableTooltip:I.default.translate("modals.TRY_AGAIN.toggle.enable"),disableTooltip:I.default.translate("modals.TRY_AGAIN.toggle.disable")})),!1),actions:[{id:"cancel",text:I.default.translate("modals.TRY_AGAIN.CANCEL"),type:"secondary",onClick:i},{id:"done",text:I.default.translate("modals.TRY_AGAIN.OK"),type:"primary",onClick:function(){t.handleTryAgain(e,o).then((function(){k.default.sendEvent(k.default.TITLES.SELECT_RETRIES_MODE,k.default.COMPONENTS.RETRIES_DIALOG,(0,s.default)({},k.default.PARAMS.STATUS,o?"on":"off")),i(),r()}))}}]}))}},{key:"handleTryAgain",value:function(e,t){var n=this.props.channelId;return pe.default.setAssessmentTryAgain({contentId:e.id,channelId:n,itemType:this.libraryItemType,isTryAgainEnabled:t})}},{key:"renderCannotEditPermissionDialog",value:function(){var e=this.props,t=e.addModal,n=e.ltr,a=e.removeModal,i=e.onRefresh,r=[{id:"done",text:I.default.translate("modals.CONTENT_ITEM_PERMISSION_CANNOT_EDIT.buttons.ok"),type:_.default.BUTTON_TYPES.PRIMARY,onClick:function(){i(),a()}}],o=h.default.createElement("div",null,h.default.createElement("p",null,I.default.translate("modals.CONTENT_ITEM_PERMISSION_CANNOT_EDIT.body"))),s=(0,R.default)("ci-permissions",{ltr:!!n},{rtl:!n});t(h.default.createElement("div",{className:s},h.default.createElement(_.default,{theme:_.default.THEMES.LIGHT,title:I.default.translate("modals.CONTENT_ITEM_PERMISSION_CANNOT_EDIT.title"),content:o,actions:r})))}},{key:"openPermissionModal",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal,r=n.channelId,o=n.ltr;re.default.getContentItemPermissions(e.id,r).then((function(n){var s=n.find((function(e){return e.userId===ue.default.instance.userId})),l=n.find((function(e){return"*"===e.userId})),c=s&&s.actions.find((function(e){return e.action})),u=l&&l.actions.find((function(e){return e.action}));if(c&&!c.allowed||!s&&u&&!u.allowed)t.renderCannotEditPermissionDialog();else{var d=m.buildEditorPermissionModalDictionary(),f=h.default.createElement(b.default,{hideModal:i,onClose:function(){C.default.releaseLock(e.id,r)},onPermissionChange:function(t){return re.default.setContentItemPermissions(e.id,r,t)},userId:ue.default.instance.userId,requestInfo:{userId:ue.default.instance.userId,serverVersion:e.contentItemPermission.serverVersion},serverPermissionState:n,dictionary:d,layout:o?"ltr":"rtl"});a(f)}})).catch((function(e){e.then?e.then((function(e){oe.default.error({message:"Editor Permission error - failed to get permission info, ".concat(e)})})):e.lockResponse?t.handleLockError(e):oe.default.error({message:"Editor Permission error - failed to get permission info, ".concat(e.toString())})}))}},{key:"openSchedulingDialog",value:function(e){var t=this.props,n=t.addModal,a=t.removeModal,i=t.setLoader,r=t.onRefresh;n(h.default.createElement(fe.default,{libraryItem:e,removeModalFunction:a,setLoader:i,onRefresh:r}))}},{key:"openLockModal",value:function(e){var t=this.props,n=t.addModal,a=t.removeModal;n(h.default.createElement(w.default,{title:I.default.translate("modals.LOCK.TITLE"),content:I.default.translate("modals.LOCK.MESSAGE"),submitButtonText:I.default.translate("modals.LOCK.LOCK_BTN"),onSubmit:e,onCancel:a}))}},{key:"handleXApiExport",value:function(e){var t=this;this.libraryItemClk=e.clk;var n={};switch(B.default.serverTypeToUiType[e.type]){case q.LESSON:case q.BUZZ:case q.FUSE:case q.ASSESSMENT:case q.UCONTENT:ne.default.getPublishedItemInfo(e.id).then((function(a){n.ltiLink=a.ltiLink,n.contentName=e.name,ue.default.instance.featureFlags.editorExportCi?ae.default.getUrlExportItem(e.id,t.props.channelId).then((function(e){n.exportTokenUrl=e.exportToken,t.runExportModal(n)})).catch((function(e){e.then?e.then((function(e){oe.default.error({message:"Export error - failed to get export content item, ".concat(e)})})):oe.default.error({message:"Export error - failed to get export content item, ".concat(e.toString())})})):t.runExportModal(n)})).catch((function(e){e.then?e.then((function(e){oe.default.error({message:"Export error - failed to get publish info, ".concat(e)})})):oe.default.error({message:"Export error - failed to get publish info, ".concat(e.toString())})}))}}},{key:"runExportModal",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.ltr,r=(0,R.default)("export-learners-dialog",{ltr:!!i},{rtl:!i});a(h.default.createElement("div",{className:r},h.default.createElement(E.default,{closeExportDialogCallBack:this.closeExportDialogCallBack,exportData:e,translations:{title:I.default.translate("modals.export.title"),exportLink:I.default.translate("modals.export.exportLink"),exportLinkTooltip:I.default.translate("modals.export.exportLinkTooltip"),downloadTitle:I.default.translate("modals.export.downloadTitle"),ltiLink:I.default.translate("modals.export.ltiLink"),ltiLinkTooltip:I.default.translate("modals.export.ltiLinkTooltip"),buttonCopy:I.default.translate("modals.export.buttons.copy"),buttonDownload:I.default.translate("modals.export.buttons.download")},downloadCallBack:this.downloadCallBack,copyLinkCallBack:function(){return t.showNotification(I.default.translate("modals.export.linkCopiedSuccessfully"),"SUCCESS",i?"BOTTOM_RIGHT":"BOTTOM_LEFT")}})))}},{key:"closeExportDialogCallBack",value:function(){this.props.removeModal()}},{key:"downloadCallBack",value:function(){if(this.libraryItemClk){var e=ne.default.exportUrl(this.libraryItemClk);window.open(e,"_blank")}else oe.default.error({message:"Export error - CLK was not found"})}},{key:"handleLibraryItemDelete",value:function(e){var t=this,n=this.props,a=n.onRefresh,i=n.removeModal,r=n.channelId;i(),this.libraryItemType===q.COURSE_TEMPLATE?le.default.deleteCourseTemplate(e.id).then((function(){return a()})).catch((function(e){oe.default.error({message:"Failed to delete channel, ".concat(JSON.stringify(e))})})):this.libraryItemType===q.CHANNEL?le.default.deleteChannel(r).then((function(){return a()})).catch((function(e){oe.default.error({message:"Failed to delete channel, ".concat(JSON.stringify(e))})})):this.libraryItemType===q.STRUCTURE?le.default.deleteCourseStructure(e.id).then((function(){return a()})).catch((function(e){oe.default.error({message:"Failed to delete course structure, ".concat(JSON.stringify(e))})})):this.libraryItemType===q.OFF_PLATFORM_EVENT?U.default.deleteOffPlatformEvent(e.id).then((function(){return a()})).catch((function(e){oe.default.error({message:"Failed to delete off platform event, ".concat(JSON.stringify(e))})})):le.default.deleteLibraryItemByEditor(r,e.id).then((function(){return a()})).catch((function(e){e&&e.data&&20===e.data.code?t.showModuleLinkedDialog():e&&e.data&&40===e.data.code?t.showStructureLinkedDialog():(t.handleLockError(e),oe.default.error({message:"Failed to delete an item, ".concat(JSON.stringify(e))}))}))}},{key:"handleUpdate",value:function(e,t){var n,a=t.name,i=t.location,r=t.image,o=t.coverImageUrl,l=t.externalFile,c=t.fuseData,u=t.isAllowedForGuests,d=t.description,f=t.isAssessment,p=t.isMustCompleteQuestions,h=t.language,m=t.mustCompleteTrackScorm,v=t.videoCantSkip,g=t.startDate,E=t.endDate,y=t.hasScore,_=t.allDayEvent,S=t.shouldPublish,T=t.notificationEnabled,b=t.sendInvitationImmediately,I=t.calendarInviteEnabled,k=t.liveSessionEvent,C=t.trainingResources,O=t.autoReset,P=(n={},(0,s.default)(n,q.LESSON,{method:this.updateSettings,data:{type:B.default.UiTypeToServerType[q.LESSON],id:e.id,coverImageUrl:o,name:a}}),(0,s.default)(n,q.BUZZ,{method:this.updateSettings,data:{type:B.default.UiTypeToServerType[q.BUZZ],id:e.id,coverImageUrl:o,name:a}}),(0,s.default)(n,q.FUSE,{method:this.updateFuse,data:{fuseData:c,externalFile:l}}),(0,s.default)(n,q.ASSESSMENT,{method:this.updateSettings,data:{type:B.default.UiTypeToServerType[q.ASSESSMENT],id:e.id,coverImageUrl:o,name:a}}),(0,s.default)(n,q.CHANNEL,{method:this.updateSettings,data:{type:B.default.UiTypeToServerType[q.CHANNEL],id:e.id,coverImageUrl:o,name:a,isAllowedForGuests:u,description:d}}),(0,s.default)(n,q.UCONTENT,{method:this.updateSettings,data:{type:B.default.UiTypeToServerType[q.UCONTENT],id:e.id,coverImageUrl:o,name:a,assessment:f,locale:h,isMustCompleteQuestions:p,mustCompleteTrackScorm:m,videoCantSkip:v,autoReset:O}}),(0,s.default)(n,q.COURSE_TEMPLATE,{method:this.updateCourseTemplate,data:{type:B.default.UiTypeToServerType[q.COURSE_TEMPLATE],id:e.id,coverImageUrl:o,name:a,description:d}}),(0,s.default)(n,q.OFF_PLATFORM_EVENT,{method:this.updateOffPlatformEventSettings,data:{type:B.default.UiTypeToServerType[q.OFF_PLATFORM_EVENT],id:e.id,version:e.contentVersion,image:r,name:a,location:i,liveSessionEvent:k,description:d,startDate:g,endDate:E,hasScore:y,allDayEvent:_,shouldPublish:S,notificationEnabled:T,sendInvitationImmediately:b,calendarInviteEnabled:I,trainingResources:C}}),n)[B.default.serverTypeToUiType[e.type]];return P?P.method(P.data):null}},{key:"handleTopicsUpdate",value:function(e){var t=this.props,n=t.removeModal,a=t.setLoader;a(!0),ce.default.updateTopics(e).then((function(){a(!1),n()})).catch((function(e){a(!1),n(),oe.default.error({message:"Failed to update topics, ".concat(JSON.stringify(e))})}))}},{key:"updateSettings",value:function(e){var t=this,n=this.props,a=n.removeModal,i=n.onRefresh,r=n.channelId;a(),B.default.serverTypeToUiType[e.type]===q.CHANNEL?e.name&&le.default.updateChannelSettings(e).then((function(){return i()})).catch((function(e){oe.default.error({message:"Failed to update channel name, ".concat(JSON.stringify(e))})})):te.default.updateContentItem(e,r).then((function(){return i()})).catch((function(e){t.handleLockError(e),oe.default.error({message:"Failed to update settings, ".concat(JSON.stringify(e))})}))}},{key:"updateCourseTemplate",value:(i=(0,o.default)(r.default.mark((function e(t){var n,a,i;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.removeModal,i=n.onRefresh,e.next=3,le.default.updateCourseTemplate(t);case 3:a(),i();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"updateOffPlatformEventSettings",value:(a=(0,o.default)(r.default.mark((function e(t){var n,a,i,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.removeModal,i=n.onRefresh,o=n.channelId,e.next=3,U.default.updateEvent(o,t.id,t.version,t.name,t.location,t.liveSessionEvent,t.description,t.image,t.allDayEvent,t.startDate,t.endDate,t.hasScore,t.shouldPublish,t.notificationEnabled,t.sendInvitationImmediately,t.calendarInviteEnabled,t.trainingResources);case 3:return s=e.sent,a(),i(),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"unpublishOffPlatformEvent",value:(n=(0,o.default)(r.default.mark((function e(t){var n,a,i,o,s,l;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.removeModal,i=n.onRefresh,o=n.channelId,s=t.id,l=t.contentVersion,e.next=4,U.default.unpublishEvent(s,l,o);case 4:k.default.sendEvent(k.default.TITLES.UNPUBLISH_OFF_PLATFORM_EVENT,k.default.COMPONENTS.OFF_PLATFORM_EVENT),a(),i();case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateFuse",value:function(e){var t=this,n=e.fuseData,a=this.props,i=a.removeModal,r=a.onRefresh,o=a.channelId;ie.default.updateFuse(n,null,o).then((function(){i(),r()})).catch((function(e){t.handleLockError(e),oe.default.error({message:"Failed to update a fuse, ".concat(JSON.stringify(e))})}))}},{key:"handleLockLibraryItem",value:function(e){var t=this;this.openLockModal((function(){te.default.lockContentItem({contentId:e.id,channelId:t.props.channelId,itemType:e.type}).then((function(){t.props.removeModal(),t.props.onRefresh()})).catch((function(e){oe.default.error({message:"Failed to lock content item, ".concat(JSON.stringify(e))})}))}))}},{key:"handleUnLockLibraryItem",value:function(e){var t=this;te.default.unLockContentItem({contentId:e.id,channelId:this.props.channelId,itemType:e.type}).then((function(){t.props.onRefresh()})).catch((function(e){oe.default.error({message:"Failed to unlock content item, ".concat(JSON.stringify(e))})}))}},{key:"handlePublishLibraryItemClick",value:function(e){switch(B.default.serverTypeToUiType[e.type]){case q.UCONTENT:case q.LESSON:case q.BUZZ:case q.FUSE:case q.ASSESSMENT:this.openPublishDialog(e);break;default:this.handlePublishLibraryItem(e)}}},{key:"handlePublishLibraryItem",value:function(e,t){var n=this;this._sendMixPanelEventMenuSelect(k.default.LIBRARY_ITEM_MENU_TYPES.PUBLISH);var a=this.props,i=a.ltr,r=a.onRefresh,o=a.channelId;switch(B.default.serverTypeToUiType[e.type]){case q.UCONTENT:case q.LESSON:case q.BUZZ:case q.FUSE:case q.ASSESSMENT:ne.default.publishItem(e.id,e.type,e.id,e.contentVersion,o,t).then((function(){var e=I.default.translate("CONTENT_EDITOR.PUBLISHED_SUCCESS_MESSAGE");n.showNotification(e,"SUCCESS",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),r&&r()})).catch((function(e){e.then?e.then((function(e){n.showNotification(JSON.parse(e).message,"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT")})):(n.handleLockError(e,(function(){n.showNotification(e.data&&e.data.message?e.data.message:e.message,"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT")})),oe.default.error({message:"Failed to publish an item, ".concat(JSON.stringify(e))}))}));break;case q.COURSE_TEMPLATE:ne.default.publishCourseTemplate(e).then((function(){var e=I.default.translate("CONTENT_EDITOR.PUBLISHED_SUCCESS_MESSAGE");n.showNotification(e,"SUCCESS",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),r&&r()})).catch((function(e){n.showNotification(e.data&&e.data.message?e.data.message:e.message,"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),oe.default.error({message:"Failed to publish an item, ".concat(JSON.stringify(e))})}))}}},{key:"unpublishCourseTemplate",value:function(e){var t=this,n=this.props,a=n.ltr,i=n.onRefresh;ne.default.unpublishCourseTemplate(e).then((function(){var e=I.default.translate("CONTENT_EDITOR.UNPUBLISHED_SUCCESS_MESSAGE");t.showNotification(e,"SUCCESS",a?"BOTTOM_RIGHT":"BOTTOM_LEFT"),i&&i()})).catch((function(e){t.showNotification(e.data&&e.data.message?e.data.message:e.message,"ERROR",a?"BOTTOM_RIGHT":"BOTTOM_LEFT"),oe.default.error({message:"Failed to publish an item, ".concat(JSON.stringify(e))})}))}},{key:"handleGetPublishLink",value:function(e){var t=this;switch(B.default.serverTypeToUiType[e.type]){case q.UCONTENT:case q.LESSON:case q.BUZZ:case q.FUSE:ne.default.getPublishedItemInfo(e.id).then((function(n){var a=ye({},e);a.publishData=n,t.openGetPublishLibraryItemLinkModal(a)})).catch((function(e){e.then?e.then((function(e){oe.default.error({message:"Failed to get publish info, ".concat(e)})})):oe.default.error({message:"Failed to get publish info, ".concat(e.toString())})}))}}},{key:"openGetPublishLibraryItemLinkModal",value:function(e){var t=this.props,n=t.addModal,a=t.removeModal,i=t.ltr,r=m.getPublishModalTranslations();n(h.default.createElement(g.default,{closePublishDialog:a,layoutDiraction:i?"ltr":"rtl",title:e.name,publishData:e.publishData,showPublishDialog:!0,translations:{modals:r}}))}},{key:"handleEditLibraryItemClick",value:function(){var e=this.props,t=e.libraryItem,n=e.channelId;t.originalChannelId&&t.originalChannelId!==n?this.showConfirmEditDialog(t.originalChannelId):this.editLibraryItem()}},{key:"showConfirmEditDialog",value:(t=(0,o.default)(r.default.mark((function e(t){var n,a,i,o,s,l=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.default.getChannelById(t);case 2:if(n=e.sent){e.next=7;break}this.editLibraryItem(),e.next=18;break;case 7:a=this.props,i=a.addModal,o=a.removeModal,e.t0=n.properties.type,e.next=e.t0===L.default.CHANNEL_TYPE.EDITOR?11:e.t0===L.default.CHANNEL_TYPE.COURSE?13:(e.t0,L.default.CHANNEL_TYPE.STREAM,15);break;case 11:return s=I.default.translate("modals.assign-content.duplicate.channel-type.workspace"),e.abrupt("break",17);case 13:return s=I.default.translate("modals.assign-content.duplicate.channel-type.course"),e.abrupt("break",17);case 15:return s=I.default.translate("modals.assign-content.duplicate.channel-type.stream"),e.abrupt("break",17);case 17:i(h.default.createElement(_.default,{styleClass:"ci-editor-confirm-edit-dialog",title:I.default.translate("confirm-edit-task-popup.title"),content:h.default.createElement(h.default.Fragment,null,h.default.createElement("div",{className:"ci-editor-confirm-edit-dialog__text--line1"},h.default.createElement("div",null,I.default.translate("confirm-edit-ci-popup.text-line-1"),":"),h.default.createElement("div",null,'"'.concat(n.properties.name,'" (').concat(s,")"))),h.default.createElement("div",{className:"ci-editor-confirm-edit-dialog__text--line1"},I.default.translate("confirm-edit-ci-popup.text-line-2")),h.default.createElement("div",{className:"ci-editor-confirm-edit-dialog__text--line2"},I.default.translate("confirm-edit-ci-popup.text-line-3"))),actions:[{id:"cancel",text:I.default.translate("confirm-edit-task-popup.cancel"),type:_.default.BUTTON_TYPES.PRIMARY,onClick:o,keyCode:27},{id:"continue",text:I.default.translate("confirm-edit-task-popup.continue"),type:_.default.BUTTON_TYPES.SECONDARY,onClick:function(){return l.editLibraryItem()},keyCode:13}]}));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"editLibraryItem",value:function(){var e=this,t=this.props,n=t.setStage,a=t.editStageConfig,i=t.onClick,r=t.libraryItem,o=t.channelId;P.default.getPermissionByActionType(N.permissionType["".concat(this.libraryItemTypeName,"_EDIT")],r.channelId||r.id)&&([q.STRUCTURE].indexOf(this.libraryItemType)>=0?i():C.default.obtainLock(r.id,o).then((function(t){t.acknowledged?n(a):e.handleLockError({lockResponse:t})})))}},{key:"handleLibraryItemUnpublishClick",value:function(e){var t=this,n=this.props,a=n.removeModal,i=n.ltr,r=n.channelId;a(),this.libraryItemType===q.OFF_PLATFORM_EVENT?this.unpublishOffPlatformEvent(e):ne.default.unpublishItem({id:e.id,type:e.type,channelId:r}).then((function(){var e=I.default.translate("CONTENT_EDITOR.UNPUBLISHED_SUCCESS_MESSAGE");t.showNotification(e,"SUCCESS",i?"BOTTOM_RIGHT":"BOTTOM_LEFT"),t.props.onRefresh&&t.props.onRefresh()})).catch((function(e){e&&e.data&&20===e.data.code?t.showModuleLinkedDialog():(t.handleLockError(e,(function(){var e=I.default.translate("CONTENT_EDITOR.COLLECTION_WAS_PUBLISHED_ERROR");t.showNotification(e,"ERROR",i?"BOTTOM_RIGHT":"BOTTOM_LEFT")})),oe.default.error({message:"Failed to un-publish an item, ".concat(JSON.stringify(e))}))}))}},{key:"showModuleLinkedDialog",value:function(){var e=this.props,t=e.removeModal,n=e.addModal,a=e.libraryItem;le.default.getLinkedStructures(a.id).then((function(e){var a=h.default.createElement("div",null,h.default.createElement("p",null,I.default.translate("MODULE.LINKED_ITEM_ERROR_DIALOG.MESSAGE")),h.default.createElement("div",null,h.default.createElement("ul",{className:"linked-modules-list"},e.map((function(e){return h.default.createElement("li",{key:e.id},e.name)}))))),i={actions:[{id:"confirmButton",text:I.default.translate("MODULE.LINKED_ITEM_ERROR_DIALOG.CONFIRMATION_BUTTON_TEXT"),onClick:t}],theme:_.default.THEMES.LIGHT,title:I.default.translate("MODULE.LINKED_ITEM_ERROR_DIALOG.TITLE"),content:a},r=h.default.createElement(_.default,i);n(r)})).catch((function(e){oe.default.error({message:"Failed to get the linked modules of a content item, ".concat(JSON.stringify(e))})}))}},{key:"showStructureLinkedDialog",value:function(){var e=this.props,t=e.removeModal,n=e.addModal,a=e.libraryItem;le.default.getLinkedStructures(a.id).then((function(e){var a=h.default.createElement("div",null,h.default.createElement("p",null,I.default.translate("STRUCTURE.LINKED_ITEM_ERROR_DIALOG.MESSAGE")),h.default.createElement("div",null,h.default.createElement("ul",{className:"linked-structures-list"},e.map((function(e){return h.default.createElement("li",{key:e.id},e.name)}))))),i={actions:[{id:"confirmButton",text:I.default.translate("CONTENT_EDITOR.NOTIFICATION_OK_BUTTON"),onClick:t}],theme:_.default.THEMES.LIGHT,title:I.default.translate("STRUCTURE.LINKED_ITEM_ERROR_DIALOG.TITLE"),content:a},r=h.default.createElement(_.default,i);n(r)})).catch((function(e){oe.default.error({message:"Failed to get the linked structures of a content item, ".concat(JSON.stringify(e))})}))}},{key:"openUnpublishModal",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal;a(h.default.createElement(w.default,{title:I.default.translate("CONTENT_EDITOR.UNPUBLISH_CONTENT_ITEM_DIALOG_TITLE").replace(/\$1/g,I.default.translate("CONTENT_EDITOR.BOOK_TYPE."+B.default.itemTypeToLanguageKey(e.type))),content:I.default.translate("CONTENT_EDITOR.UNPUBLISH_DIALOG_MESSAGE"),hasToRenderConfirmQuestion:!0,onSubmit:function(){t.handleLibraryItemUnpublishClick(e)},onCancel:i}))}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SUCCESS",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BOTTOM_RIGHT",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:7,i=this.props,r=i.addNotification,o=i.removeNotification,s=r({message:e,level:ke[t],position:Ce[n],autoDismiss:a,notificationEmbeddedComponents:[h.default.createElement(Ie,{"data-unittest-id":"notification-ok-btn",key:"notification-ok",onClick:function(){return o(s)}},I.default.translate("CONTENT_EDITOR.NOTIFICATION_OK_BUTTON"))]})}},{key:"handleDuplicate",value:function(e,t,n,a){var i=this;S.default.isFeatureEnabled("duplicateBetweenChannels")?le.default.getChannelsUserIsEditorIn(t).then((function(r){r.length>1?i.openDuplicateContentModal(e,n,a,r,t):i.duplicate(e,n,a,t,t)})).catch((function(e){oe.default.error("could not complete duplication method",JSON.stringify(e))})):this.duplicate(e,n,a,t,t)}},{key:"duplicate",value:function(e,t,n,a,i){var r=this,o=this.props,s=o.onRefresh,l=o.removeModal,c=o.ltr;l(),(this.libraryItemType!==q.STRUCTURE?le.default.cloneLibraryItem(e,!1,i,null):me.default.cloneStructureTemplate(e,n,a,i)).then((function(){var e=I.default.translate("CONTENT_EDITOR.ITEM_DUPLICATED_SUCCESSFULLY");r.showNotification(e,"SUCCESS",c?"BOTTOM_RIGHT":"BOTTOM_LEFT"),s()})).catch((function(e){r.renderDuplicateErrorDialog(),oe.default.error({message:"Failed to clone library item, ".concat(JSON.stringify(e))})}))}},{key:"openDuplicateContentModal",value:function(e,t,n,a,i){var r=this,o=this.props,s=o.addModal,l=o.removeModal;s(h.default.createElement($.default,{onDone:function(a){return r.duplicate(e,t,n,i,a)},onCancel:l,channelsUserIsEditorIn:a,libraryItemId:e}))}},{key:"_onMenuToggle",value:function(e){e&&this._sendMixPanelEventMenuOpen(),this.setState({isOpen:e})}},{key:"_sendMixPanelEventMenuOpen",value:function(){k.default.sendEvent(k.default.TITLES.OPEN_MENU,this._getMixPanelComponentName(),(0,s.default)({},k.default.PARAMS.LIBRARY_ITEM_TYPE,k.default.LIBRARY_ITEM_TYPES[this.props.libraryItem.type]||this.props.libraryItem.type.toLowerCase()))}},{key:"_sendMixPanelEventMenuSelect",value:function(e){var t,n=(t={},(0,s.default)(t,k.default.PARAMS.OPTION,e),(0,s.default)(t,k.default.PARAMS.LIBRARY_ITEM_TYPE,k.default.LIBRARY_ITEM_TYPES[this.props.libraryItem.type]||this.props.libraryItem.type.toLowerCase()),(0,s.default)(t,k.default.PARAMS.LIBRARY_ITEM_NAME,this.props.libraryItem.name),t);this.props.libraryItem.assignment&&(n[k.default.PARAMS.ASSIGNMENT]=k.default.CONDITIONS.YES),k.default.sendEvent(k.default.TITLES.SELECT_FROM_MENU,this._getMixPanelComponentName(),n)}},{key:"_getMixPanelComponentName",value:function(){switch(this.props.componentName){case j.default.REGULAR:return k.default.COMPONENTS.WELCOME;case j.default.CHANNEL:return k.default.COMPONENTS.LEARNING_GROUP;default:return this.props.componentName}}},{key:"getIsCiPublished",value:function(e){var t=this.props.state;return t?t===Z.PUBLISHED||t===Z.MODIFIED:e.isPublished}},{key:"openPublishDialog",value:function(e){var t=this,n=this.props,a=n.addModal,i=n.removeModal;a(h.default.createElement(A.default,{onSubmit:function(n){t.handlePublishLibraryItem(e,n)},removeModal:i,checked:!this.getIsCiPublished(e),messages:m.getMessageForPublishConfirmationDialog()}))}}],[{key:"getMessageForPublishConfirmationDialog",value:function(){return{dialogText:I.default.translate("modals.publish-confirmation-dialog.body.ci"),checkboxText:I.default.translate("modals.publish-confirmation-dialog.notification.title"),dialogTitleText:I.default.translate("modals.publish-confirmation-dialog.title"),submitButtonText:I.default.translate("modals.publish-confirmation-dialog.submit-button")}}},{key:"getPublishModalTranslations",value:function(){return{publish:{title:I.default.translate("modals.publish.title"),link:I.default.translate("modals.publish.buttons.link"),ltiLink:I.default.translate("modals.publish.ltiLink"),buttons:{copy:I.default.translate("modals.publish.buttons.copy"),ltiLinkTooltip:I.default.translate("modals.publish.ltiLinkTooltip")}}}}},{key:"buildEditorPermissionModalDictionary",value:function(){return{TITLE:I.default.translate("editorPermissionDialog.TITLE"),SUBTITLE:I.default.translate("editorPermissionDialog.SUBTITLE"),ONLYME:I.default.translate("editorPermissionDialog.ONLYME"),ANYEDITOR:I.default.translate("editorPermissionDialog.ANYEDITOR"),CANCEL:I.default.translate("editorPermissionDialog.CANCEL"),DONE:I.default.translate("editorPermissionDialog.DONE"),DIALOGTITLE:I.default.translate("editorPermissionDialog.DIALOGTITLE")}}}]),m}(h.Component);var Le=Se((function(e){return{addModal:e.addModal,removeModal:e.removeModal,setProgressProps:e.setProgressProps,showProgress:e.showProgress,hideProgress:e.hideProgress}})),Re=be((function(e){return{addNotification:e.add,removeNotification:e.remove}})),Me=Te((function(e){return{addWizard:e.addWizard,removeWizard:e.removeWizard}})),we=(0,M.Hoc)((function(e){return{ltr:e.ltr,locale:e.locale,setStage:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.communicator).send.apply(t,["setStage"].concat(a))},setLoader:function(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.communicator).send.apply(t,["setLoader"].concat(a))}}}))(Me(Re(Le(Ae))));t.default=we},2402:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2403));n(2405),n(2406),n(2407),n(2408);var r=i.default;t.default=r},2403:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(950))),p=i(n(22)),h=i(n(2404));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).selectLink=a.selectLink.bind((0,o.default)(a)),a.hideModal=a.hideModal.bind((0,o.default)(a)),a.copyLink=a.copyLink.bind((0,o.default)(a)),a.state={loading:!0},a}return(0,s.default)(n,null,[{key:"dateFormat",value:function(e){if(!(e instanceof Date))return"";var t={Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),ms:e.getMilliseconds(),tz:e.getTimezoneOffset(),tzh:e.getTimezoneOffset()/60};for(t.YYYY=t.Y.toString(),t.YY=t.Y.toString().slice(2),t.MM=t.M.toString(),t.DD=t.D.toString(),t.hh=t.h.toString(),t.mm=t.m.toString(),t.ss=t.s.toString(),t.mss=t.ms.toString(),t.MM<10&&(t.MM="0".concat(t.MM)),t.DD<10&&(t.DD="0".concat(t.DD)),t.hh<10&&(t.hh="0".concat(t.hh)),t.mm<10&&(t.mm="0".concat(t.mm)),t.ss<10&&(t.ss="0".concat(t.ss));t.mss.length<4;)t.mss="0".concat(t.mss);return"".concat(t.DD,".").concat(t.MM,".").concat(t.YYYY," ").concat(t.hh,":").concat(t.mm)}}]),(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;p.default.set(this.props.translations,void 0,void 0,{ignoreXSS:!0}).then((function(){e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this;f.default.setAppElement("body");var t="input-dark ".concat(this.props.layoutDiraction),a="modal-content ".concat(this.props.layoutDiraction);return d.default.createElement(f.default,{className:"modal-dialog modal-publish modal-sm",isOpen:this.props.showPublishDialog,onRequestClose:function(){e.props.closePublishDialog()},contentLabel:"Publish"},d.default.createElement("div",{className:a},d.default.createElement("div",{className:"modal-header"},d.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.hideModal}),d.default.createElement("h4",{className:"modal-title"},p.default.translate("modals.publish.title"))),d.default.createElement("div",{className:"modal-body"},d.default.createElement("div",{className:"content-name"},this.props.title||"Name"),d.default.createElement("div",{className:"publish-date"},n.dateFormat(new Date(this.props.publishData.date))),d.default.createElement("div",{className:"link-container"},d.default.createElement("a",{id:"published-link",className:"link",href:this.props.publishData.link,target:"_blank"},p.default.translate("modals.publish.buttons.link"))),this.props.publishData.ltiLink&&d.default.createElement("div",{className:"ltiLink-container"},d.default.createElement("div",{className:"ltiLink-title"},p.default.translate("modals.publish.ltiLink")),d.default.createElement("div",{className:"flex-container"},d.default.createElement("input",{type:"text",className:t,readOnly:!0,value:this.props.publishData.ltiLink,ref:function(t){e._ltiLink=t},onClick:this.selectLink}),d.default.createElement(h.default,{id:"btn-copy",bsStyle:"danger",onClick:this.copyLink},p.default.translate("modals.publish.buttons.copy"))),d.default.createElement("div",{className:"ltiLink-tooltip"},p.default.translate("modals.publish.ltiLinkTooltip"))))))}},{key:"copyLink",value:function(){this.selectLink(),document.queryCommandSupported&&document.queryCommandSupported("copy")?document.execCommand("copy"):window.clipboardData&&window.clipboardData.setData("Text",this._ltiLink.value)}},{key:"selectLink",value:function(){this._ltiLink.focus(),this._ltiLink.select()}},{key:"hideModal",value:function(){this.props.closePublishDialog()}}]),n}(d.Component);t.default=v},2404:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(11)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){var e,t=(0,f.default)(["btn"],(e={},(0,r.default)(e,"btn-".concat(this.props.bsStyle),!0),(0,r.default)(e,"disabled",this.props.disabled),e));return d.default.createElement("button",{id:this.props.id,type:"button",className:t,disabled:this.props.disabled,onClick:this.props.disabled?null:this.props.onClick},this.props.children)}}]),n}(d.Component);h.defaultProps={bsStyle:"default"};var m=h;t.default=m},2405:function(e,t,n){},2406:function(e,t,n){},2407:function(e,t,n){},2408:function(e,t,n){},2409:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2410));n(2411);var r=i.default;t.default=r},2410:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(58))),p=i(n(36));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).copyLink=a.copyLink.bind((0,s.default)(a)),a.selectLink=a.selectLink.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.closeExportDialogCallBack,a=t.exportData,i=t.translations,r=t.enableDownload,o=t.downloadCallBack;return d.default.createElement(f.default,{title:i.title,close:n,theme:f.default.THEMES.LIGHT},a.ltiLink&&d.default.createElement("div",{className:"link-container"},d.default.createElement("div",{className:"link-title"},i.ltiLink),d.default.createElement("div",{className:"flex-container"},d.default.createElement("input",{type:"text",className:"input-dark",readOnly:!0,value:a.ltiLink,ref:function(t){e.ltiLink=t},onClick:function(){return e.selectLink("ltiLink")}}),d.default.createElement(p.default,{id:"lti-btn-copy",onClick:function(){e.copyLink("ltiLink")},text:i.buttonCopy,type:p.default.TYPES.SECONDARY})),d.default.createElement("div",{className:"link-tooltip"},i.ltiLinkTooltip)),a.exportTokenUrl&&d.default.createElement("div",{className:"link-container"},d.default.createElement("div",{className:"link-title"},i.exportLink),d.default.createElement("div",{className:"flex-container"},d.default.createElement("input",{type:"text",className:"input-dark",readOnly:!0,value:a.exportTokenUrl,ref:function(t){e.exportLink=t},onClick:function(){return e.selectLink("exportLink")}}),d.default.createElement(p.default,{id:"btn-copy",onClick:function(){e.copyLink("exportLink")},text:i.buttonCopy,type:p.default.TYPES.SECONDARY})),d.default.createElement("div",{className:"link-tooltip"},i.exportLinkTooltip)),r&&d.default.createElement("div",null,d.default.createElement("div",{className:"link-container"},d.default.createElement("div",{className:"link-title"},i.downloadTitle),d.default.createElement("div",{className:"flex-container"},d.default.createElement("div",{className:"file-api"},a.contentName),d.default.createElement(p.default,{id:"download",onClick:o,text:i.buttonDownload,type:p.default.TYPES.SECONDARY})))))}},{key:"copyLink",value:function(e){var t=this.props.copyLinkCallBack;this.selectLink(e),document.queryCommandSupported&&document.queryCommandSupported("copy")?(document.execCommand("copy"),t()):window.clipboardData&&(window.clipboardData.setData("Text",this[e].value),t())}},{key:"selectLink",value:function(e){this[e].focus(),this[e].select()}},{key:"hideModal",value:function(){this.props.closeExportDialogCallBack()}}]),n}(d.Component);m.defaultProps={exportData:{},enableDownload:!1,downloadCallBack:function(){},copyLinkCallBack:function(){}};var v=m;t.default=v},2411:function(e,t,n){},2412:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2413));n(2414);var r=i.default;t.default=r},2413:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(58)));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=p(n);function n(){var e;(0,r.default)(this,n);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={editingPermissionMode:e.getDefaultEditingPermissionMode()},e.updateMode=e.updateMode.bind((0,o.default)(e)),e.applyEditingContributors=e.applyEditingContributors.bind((0,o.default)(e)),e.prepareEditorPermissionDialog=e.prepareEditorPermissionDialog.bind((0,o.default)(e)),e}return(0,s.default)(n,[{key:"componentWillUnmount",value:function(){this.props.onClose&&this.props.onClose()}}]),(0,s.default)(n,[{key:"getDefaultEditingPermissionMode",value:function(){var e=this.props,t=e.serverPermissionState,n=e.requestInfo;if(t&&t.length){for(var a=!1,i=!1,r=[],o=0;o<t.length;o++){var s=t[o];if(s.actions.find((function(e){return"CONTENT_ITEM:EDIT"===e.action})).allowed){if("*"===s.userId){a=!0;break}s.userId===n.userId?i=!0:r.push(s.userId)}}if(a)return"ANY_EDITOR";if(i&&!r.length)return"ONLY_ME"}return"ANY_EDITOR"}},{key:"updateMode",value:function(e){this.setState({editingPermissionMode:e.target.value})}},{key:"prepareEditorPermissionDialog",value:function(){var e=this.props.dictionary?this.props.dictionary:this.props.language,t=f.default.THEMES.LIGHT;"dark"===this.props.theme&&(t=f.default.THEMES.LIGHT);var n=d.default.createElement("div",{className:"le-permission-modal ".concat(this.props.layout)},d.default.createElement("div",{className:"permission-modal-title"},d.default.createElement("div",{className:"title"},e.TITLE),d.default.createElement("div",{className:"sub-title"},e.SUBTITLE)),d.default.createElement("div",{className:"permission-modal-options"},d.default.createElement("label",{htmlFor:"editing-permission-onlyMe",className:"control control--radio"},e.ONLYME,d.default.createElement("input",{id:"editing-permission-onlyMe",type:"radio",name:"editingPermission",onChange:this.updateMode,value:"ONLY_ME",defaultChecked:"ONLY_ME"===this.state.editingPermissionMode}),d.default.createElement("div",{className:"control__indicator"})),d.default.createElement("label",{htmlFor:"editing-permission-anyEditor",className:"control control--radio"},e.ANYEDITOR,d.default.createElement("input",{id:"editing-permission-anyEditor",type:"radio",name:"editingPermission",onChange:this.updateMode,value:"ANY_EDITOR",defaultChecked:"ANY_EDITOR"===this.state.editingPermissionMode}),d.default.createElement("div",{className:"control__indicator"})))),a=[{id:"cancel",text:e.CANCEL,type:f.default.BUTTON_TYPES.SECONDARY,onClick:this.props.hideModal},{id:"done",text:e.DONE,type:f.default.BUTTON_TYPES.PRIMARY,onClick:this.applyEditingContributors}];return d.default.createElement(f.default,{theme:t,title:e.DIALOGTITLE,content:n,close:this.props.hideModal,actions:a,styleClass:"content-dialog ".concat(this.props.layout)})}},{key:"applyEditingContributors",value:function(){var e=this,t=this.props,n=t.requestInfo,a=t.serverPermissionState,i=[];switch(this.state.editingPermissionMode){case"ONLY_ME":if(a.length){var r=!1;a.forEach((function(e){if(e.userId===n.userId){r=!0;var t=e.actions,a=t.findIndex((function(e){return"CONTENT_ITEM:EDIT"===e.action}));t[a]={action:"CONTENT_ITEM:EDIT",allowed:!0},i.push({role:n.role?n.role:"EDITOR",serverVersion:e.serverVersion,allowedActions:t,userId:e.userId})}else{var o=e.actions,s=o.findIndex((function(e){return"CONTENT_ITEM:EDIT"===e.action}));o[s]={action:"CONTENT_ITEM:EDIT",allowed:!1},i.push({role:n.role?n.role:"EDITOR",serverVersion:e.serverVersion,allowedActions:o,userId:e.userId})}})),r||i.push({role:"EDITOR",allowedActions:[{action:"CONTENT_ITEM:EDIT",allowed:!0}],userId:n.userId})}else i.push({role:"EDITOR",allowedActions:[{action:"CONTENT_ITEM:EDIT",allowed:!1}],userId:"*"}),i.push({role:"EDITOR",allowedActions:[{action:"CONTENT_ITEM:EDIT",allowed:!0}],userId:n.userId});break;case"ANY_EDITOR":a.length?a.forEach((function(e){var t=e.actions,n=t.findIndex((function(e){return"CONTENT_ITEM:EDIT"===e.action}));t[n]={action:"CONTENT_ITEM:EDIT",allowed:!0},i.push({role:e.role,serverVersion:e.serverVersion,allowedActions:t,userId:e.userId})})):i.push({role:"EDITOR",allowedActions:[{action:"CONTENT_ITEM:EDIT",allowed:!0}],userId:"*"})}this.props.onPermissionChange(i).then((function(){e.props.hideModal()})).catch((function(){e.props.hideModal()}))}},{key:"render",value:function(){return this.prepareEditorPermissionDialog()}}]),n}(d.Component);t.default=h},2414:function(e,t,n){},2415:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(18))),f=i(n(602)),p=i(n(1248));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=h(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"select-language"},u.default.createElement("span",{className:"select-language__title"},d.default.translate("create.content.modal.language")),u.default.createElement("span",{className:"select-language__select"},u.default.createElement(p.default,{initialValue:{key:this.props.selectedLanguage,display:n._getLocaleName(this.props.selectedLanguage)},values:n._getDropDownValues(),isDisabled:this.props.isDisabled,handleSelectionChange:function(t){e.props.onChange(t.key)}})))}}],[{key:"_getLocaleName",value:function(e){return d.default.translate("CONTENT_EDITOR.CREATE_BOOK.LOCALES.".concat(e,".NAME"))}},{key:"_getDropDownValues",value:function(){return d.default.getAvailableContentLocales().map((function(e){var t=d.default.translate("CONTENT_EDITOR.CREATE_BOOK.LOCALES.".concat(e,".NAME"));return{key:e,display:t,direction:f.default.isTextRTL(t)?"rtl":"ltr"}}))}}]),n}(u.Component);t.default=m,m.defaultProps={isDisabled:!1,selectedLanguage:"en_US",onChange:function(){}}},2416:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(13)),s=a(n(355)),l=a(n(2248)),c=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getTypeForTranslate",value:function(e,t){return e!==l.default.FUSE?e:t&&-1!==t.indexOf("VIDEO")?l.default.VIDEO:s.default.instance.isAccountSelfService?l.default.PRESENTATION:l.default.FUSE}},{key:"selectFuseOrPresentationByRole",value:function(){var e=s.default.instance.contextRole;return o.default.isEditor(e)&&o.default.isInstructor(e)?l.default.PRESENTATION:l.default.FUSE}}]),e}();t.default=c},2417:function(e,t,n){"use strict";var a=n(1)(n(2285));e.exports=a.default},2418:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FORM_MODE=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(18))),p=i(n(58)),h=i(n(2419)),m=i(n(11)),v=n(942);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=a(n(2187)).CHANNEL,y=0,_={EDIT:0,CREATE:1};t.FORM_MODE=_;var S=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;(0,r.default)(this,n),a=t.call(this,e);var i=e.defaultValues;return a.state={topicsModel:e.topicsModel,language:i.itemLanguage,mode:y},a._handleCancel=a._handleCancel.bind((0,s.default)(a)),a._handleDone=a._handleDone.bind((0,s.default)(a)),a._handleItemToggled=a._handleItemToggled.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e=this._getTranslation(),t=[{id:"cancel",text:e.cancel,type:p.default.BUTTON_TYPES.SECONDARY,onClick:this._handleCancel},{id:"done",text:e.done,type:p.default.BUTTON_TYPES.PRIMARY,onClick:this._handleDone,disabled:!1}],n=(0,m.default)("library-item-topics",{"course-topics":this.props.libraryItemType===E});return d.default.createElement(p.default,{theme:p.default.THEMES.LIGHT,styleClass:n,title:e.title,content:this._renderContent(),actions:t,close:this._handleCancel})}},{key:"_getTranslation",value:function(){var e=this.props.formMode===_.EDIT?f.default.translate("CONTENT_EDITOR.CREATE_BOOK.SAVE_BTN"):f.default.translate("CONTENT_EDITOR.CREATE_BOOK.CREATE_BTN");return{title:f.default.translate("library.item.topics.modal.name.title"),done:e,cancel:f.default.translate("CONTENT_EDITOR.CREATE_BOOK.CANCEL_BTN")}}},{key:"_renderContent",value:function(){return d.default.createElement("div",{className:"library-item-topics__container"},d.default.createElement("div",{className:"library-item-topics__header"},f.default.translate("library.item.topics.modal.name.sub-title")),d.default.createElement("div",{className:"library-item-topics__content"},this._renderweightedItems()))}},{key:"_renderweightedItems",value:function(){var e=this;return this.state.topicsModel.topics.length?this.state.topicsModel.topics.map((function(t){return d.default.createElement(h.default,{name:t.name,weight:t.score,active:t.active,onClick:e._handleItemToggled})})):d.default.createElement("div",{className:"zero-state"},f.default.translate("library.item.topics.modal.name.zero-state"))}},{key:"_handleCancel",value:function(){this.props.onCancel()}},{key:"_handleDone",value:function(){this.props.onSubmit(this.state.topicsModel)}},{key:"_handleItemToggled",value:function(e,t){var n=JSON.parse(JSON.stringify(this.state.topicsModel)),a=n.topics.findIndex((function(t){return t.name===e}));n.topics[a].active=t,this.setState({topicsModel:n})}}]),n}(d.Component);S.defaultProps={locale:"en_US",topicsModel:{},defaultValues:{id:"",version:"",itemLanguage:void 0}};var T=(0,v.Hoc)((function(e){return{locale:e.locale}}))(S);t.default=T},2419:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2420));n(2423);var r=i.default;t.default=r},2420:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(11))),p=i(n(2421)),h=i(n(2422));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"getItemClasses",value:function(e){return{"weighted-item":!0,"weighted-item--disabled":!e}}}]),(0,s.default)(n,[{key:"handleClick",value:function(){this.props.onClick(this.props.name,!this.props.active)}},{key:"render",value:function(){var e=(0,f.default)(n.getItemClasses(this.props.active),this.props.styleClass),t=this.calculateNameFontSize(),a=this.renderIcon();return d.default.createElement("div",{className:e,onClick:this.handleClick},d.default.createElement("div",{className:"weighted-item-name",style:{fontSize:"".concat(t,"px")}},this.props.name),d.default.createElement("div",{className:"weighted-item-icon"},a))}},{key:"renderIcon",value:function(){return this.props.active?d.default.createElement(p.default,null):d.default.createElement(h.default,null)}},{key:"calculateNameFontSize",value:function(){var e=(this.props.maxFontSize-this.props.minFontSize)*this.props.weight;return this.props.minFontSize+e}}]),n}(d.Component);v.defaultProps={weight:0,active:!0,onClick:function(){},styleClass:void 0,maxFontSize:16,minFontSize:12};var g=v;t.default=g},2421:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .weighted-item-icon-svg{fill:#000000}\n        ")),a.createElement("g",{id:"Line_67",key:1},a.createElement("rect",{x:"6.6",y:"2.9",className:"weighted-item-icon-svg",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -2.9409 7.0999)",width:"1",height:"8.5"})),a.createElement("g",{id:"Line_68",key:2},a.createElement("rect",{x:"2.9",y:"6.6",className:"weighted-item-icon-svg",transform:"matrix(0.7071 -0.7071 0.7071 0.7071 -2.9409 7.0999)",width:"8.5",height:"1"}))])}i.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 14.2 14.2",style:{enableBackground:"new 0 0 14.2 14.2"},xmlSpace:"preserve"},e.exports=i,i.default=i},2422:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .weighted-item-icon-svg{fill:#000000}\n        ")),a.createElement("path",{className:"weighted-item-icon-svg",d:"M8,2.6c-0.2,0-0.3,0-0.5,0.1v1c0.2,0,0.3-0.1,0.5-0.1c1.9,0,3.5,1.6,3.5,3.5S9.9,10.6,8,10.6S4.5,9,4.5,7.1\n\tc0-0.3,0.1-0.7,0.2-1h-1c-0.1,0.3-0.1,0.7-0.1,1c0,2.5,2,4.5,4.5,4.5s4.5-2,4.5-4.5S10.4,2.6,8,2.6z",key:1}),a.createElement("path",{className:"weighted-item-icon-svg",d:"M2.2,7.9c-0.1,0-0.3,0-0.4-0.1C1.7,7.5,1.7,7.2,1.9,7l1.8-1.8C3.8,5,4.1,5,4.3,5.2s0.2,0.5,0,0.7L2.6,7.7\n\tC2.5,7.8,2.3,7.9,2.2,7.9z",key:2}),a.createElement("path",{className:"weighted-item-icon-svg",d:"M5.7,7.9c-0.1,0-0.3,0-0.4-0.1L3.6,5.9c-0.2-0.2-0.2-0.5,0-0.7s0.5-0.2,0.7,0L6.1,7c0.2,0.2,0.2,0.5,0,0.7\n\tC6,7.8,5.9,7.9,5.7,7.9z",key:3})])}i.defaultProps={version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 14.2 14.2",style:{enableBackground:"new 0 0 14.2 14.2"},xmlSpace:"preserve"},e.exports=i,i.default=i},2423:function(e,t,n){},2424:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,".cls-1{fill:#fff;}")),a.createElement("g",{id:"Layer_2",key:1},a.createElement("g",{id:"Layer_1-2"},a.createElement("g",{id:"publish"},a.createElement("g",{id:"dropdown_3items_II"},a.createElement("g",{id:"publish-icon"},[a.createElement("path",{id:"Fill-1",className:"cls-1",d:"M14.67,3.51C13.77,1.16,12.23,0,8.68,0A5.28,5.28,0,0,0,3,5.23,3.64,3.64,0,0,0,0,9.05a3.73,3.73,0,0,0,4.05,3.62H7v-1.3H4A2.44,2.44,0,0,1,1.3,9,2.33,2.33,0,0,1,3.6,6.47a.65.65,0,0,0,.64-.65c0-2.64,1.41-4.52,4.44-4.52s4.19.9,4.91,3a.65.65,0,0,0,.59.44c2.38.11,4,1.24,4,3.24,0,2.23-1.64,3.4-3.89,3.36h-2v1.3h2c2.9.06,5.17-1.6,5.21-4.65,0-2.7-2-4.25-4.78-4.51",key:0}),a.createElement("polygon",{id:"Fill-4",className:"cls-1",points:"12.65 8.86 9.65 4.86 6.65 8.86 8.65 8.86 8.65 16.35 10.65 16.35 10.65 8.86 12.65 8.86",key:1})])))))])}i.defaultProps={viewBox:"0 0 19.45 16.35"},e.exports=i,i.default=i},2425:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("path",{fill:"#979797",d:"M10.909 27.782c-1.018 0-2.036-0.145-3.055-0.582-0.727-0.291-1.164-1.164-0.873-1.891s1.164-1.164 1.891-0.873c0.582 0.145 1.164 0.291 1.745 0.291 0.145 0 0.436 0 0.582 0h1.309c0.873 0 1.455 0.582 1.455 1.455s-0.582 1.455-1.455 1.455h-0.582c-0.145 0.145-0.436 0.145-0.582 0.145s-0.291 0-0.436 0zM29.964 27.636h-2.909c-0.873 0-1.455-0.582-1.455-1.455s0.582-1.455 1.455-1.455h2.909c0.873 0 1.455 0.582 1.455 1.455s-0.582 1.455-1.455 1.455zM21.236 27.636h-2.909c-0.873 0-1.455-0.582-1.455-1.455s0.582-1.455 1.455-1.455h2.909c0.873 0 1.455 0.582 1.455 1.455s-0.582 1.455-1.455 1.455zM35.782 26.909c-0.582 0-1.164-0.291-1.309-0.873-0.291-0.727 0-1.6 0.727-1.891s1.455-0.727 2.036-1.309c0.582-0.582 1.455-0.582 2.036 0s0.582 1.455 0 2.036c-0.873 0.727-1.745 1.455-2.909 1.891-0.291 0-0.436 0.145-0.582 0.145zM4.655 23.127c-0.727 0-1.309-0.436-1.455-1.164-0.145-0.582-0.145-1.018-0.145-1.6s0-1.164 0.145-1.745c0.145-0.727 0.873-1.309 1.745-1.164 0.727 0.145 1.309 0.873 1.164 1.745-0.145 0.436-0.145 0.873-0.145 1.309s0 0.727 0.145 1.018c0.145 0.727-0.291 1.6-1.164 1.745 0-0.145-0.145-0.145-0.291-0.145zM40.436 20.073c0 0 0 0 0 0-0.873 0-1.455-0.727-1.455-1.6v-0.436c0-0.727-0.145-1.309-0.291-1.891-0.291-0.727 0.145-1.6 0.873-1.891s1.6 0.145 1.891 0.873c0.291 0.873 0.436 1.891 0.436 2.909 0 0.145 0 0.436 0 0.582 0 0.873-0.727 1.455-1.455 1.455zM8.145 15.855c-0.582 0-1.164-0.291-1.309-0.873-0.436-0.727 0-1.6 0.727-1.891 0.582-0.145 1.018-0.436 1.6-0.436 0.291-0.436 0.727-0.727 1.309-0.727 0.873 0 1.455 0.727 1.455 1.455 0 0.145 0 0.291 0 0.582 0 0.873-0.582 1.455-1.455 1.455-0.582 0-1.164 0.145-1.745 0.291-0.291 0.145-0.436 0.145-0.582 0.145zM36.218 13.091c-0.145 0-0.436 0-0.582-0.145-0.727-0.291-1.6-0.582-2.473-0.727-0.727-0.145-1.309-0.873-1.164-1.745 0.145-0.727 0.873-1.309 1.745-1.164 1.164 0.291 2.182 0.582 3.055 1.018 0.727 0.291 1.018 1.164 0.727 1.891-0.145 0.582-0.727 0.873-1.309 0.873zM11.927 9.309c-0.291 0-0.582 0-0.727-0.145-0.727-0.436-0.873-1.309-0.436-2.036 0.582-1.018 1.309-1.891 2.182-2.618 0.582-0.436 1.6-0.436 2.036 0.291 0.436 0.582 0.436 1.6-0.145 2.036-0.727 0.436-1.164 1.018-1.6 1.745-0.291 0.436-0.727 0.727-1.309 0.727zM29.818 8.727c-0.436 0-0.873-0.145-1.164-0.582-0.436-0.582-1.018-1.164-1.745-1.6s-0.873-1.309-0.436-2.036 1.309-0.873 2.036-0.436c1.018 0.582 1.891 1.455 2.618 2.327 0.436 0.582 0.291 1.6-0.291 2.036-0.436 0.145-0.727 0.291-1.018 0.291zM22.109 5.091c0 0 0 0 0 0-0.873 0-1.891-0.145-2.764 0s-1.455-0.582-1.6-1.309c0-0.873 0.582-1.455 1.309-1.6 1.018-0.145 2.182 0 3.2 0 0.873 0 1.455 0.727 1.309 1.6 0 0.727-0.727 1.309-1.455 1.309z"}))}i.defaultProps={version:"1.1",width:"45",height:"32",viewBox:"0 0 45 32"},e.exports=i,i.default=i},2426:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"dropdown_body_03",transform:"translate(-7.000000, -19.000000)",stroke:"#FEFEFE"},a.createElement("g",{id:"settings",transform:"translate(8.000000, 20.000000)"},a.createElement("g",{id:"wrench-edit"},a.createElement("path",{d:"M12.7150476,4.9603242 L10.720531,4.17931347 L10.3097306,1.99654244 L12.5127967,0.209175585 C11.3412806,-0.19812571 9.99480687,-0.0189691268 8.96115736,0.820127528 C8.00099005,1.59903877 7.5419013,2.75865775 7.60488604,3.90497995 L0.715055709,9.49592505 C-0.112843659,10.1677622 -0.240912623,11.3952648 0.430924565,12.2231641 L0.71575554,12.5737792 C1.38759273,13.4016785 2.61509526,13.5297475 3.44299462,12.8579103 L10.332825,7.26696521 C11.4420561,7.56509296 12.6716582,7.35444401 13.6311256,6.57553277 C14.6864699,5.71894036 15.1336615,4.4032592 14.946107,3.14986294 L12.7150476,4.9603242 Z",id:"Page-1"})))))])}i.defaultProps={width:"17px",height:"15px",viewBox:"0 0 17 15",version:"1.1"},e.exports=i,i.default=i},2427:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"dropdown_body_03",transform:"translate(-10.000000, -60.000000)",fill:"#FFFFFF"},a.createElement("g",{id:"Edit_s",transform:"translate(8.000000, 22.000000)"},a.createElement("g",{id:"delete_icon",transform:"translate(2.000000, 38.000000)"},a.createElement("g",{id:"delete"},a.createElement("path",{d:"M10.2142857,4.33333333 L0.785714286,4.33333333 C0.351776268,4.33333333 0,3.96956469 0,3.52083333 L0,3.52083333 C0,3.07210197 0.351776268,2.70833333 0.785714286,2.70833333 L10.2142857,2.70833333 C10.6482237,2.70833333 11,3.07210197 11,3.52083333 L11,3.52083333 C11,3.96956469 10.6482237,4.33333333 10.2142857,4.33333333 Z M7.38571429,1.92833333 C7.38223032,2.00827452 7.37365619,2.08789143 7.36004762,2.16666667 L6.4072381,2.16666667 C6.42896748,2.08839583 6.4409374,2.00757484 6.44285714,1.92616667 C6.44285714,1.38768904 6.02072562,0.951166667 5.5,0.951166667 C4.97927438,0.951166667 4.55714286,1.38768904 4.55714286,1.92616667 C4.55888227,2.00759122 4.57085572,2.08843601 4.5927619,2.16666667 L3.63995238,2.16666667 C3.62621589,2.08791065 3.61764081,2.00828487 3.61428571,1.92833333 C3.62090657,0.861754536 4.45860966,0.000573392948 5.49004762,0 L5.49004762,0 L5.5,0 L5.50995238,0 L5.50995238,0 C6.54139034,0.000573392948 7.37909343,0.861754536 7.38571429,1.92833333 L7.38571429,1.92833333 Z M3.66666667,5.95833333 L3.66666667,10.2916667 L3.14285714,10.2916667 L3.14285714,5.95833333 L3.66666667,5.95833333 Z M5.76190476,5.95833333 L5.76190476,10.2916667 L5.23809524,10.2916667 L5.23809524,5.95833333 L5.76190476,5.95833333 Z M7.85714286,5.95833333 L7.85714286,10.2916667 L7.33333333,10.2916667 L7.33333333,5.95833333 L7.85714286,5.95833333 Z M2.0952381,11.9166667 L8.9047619,11.9166667 L8.9047619,4.875 L9.95238095,4.875 L9.95238095,11.375 C9.95238095,12.2724627 9.24882842,13 8.38095238,13 L2.61904762,13 C1.75117158,13 1.04761905,12.2724627 1.04761905,11.375 L1.04761905,4.875 L2.0952381,4.875 L2.0952381,11.9166667 Z",id:"Rectangle_20_copy_4"}))))))])}i.defaultProps={width:"11px",height:"13px",viewBox:"0 0 11 13",version:"1.1"},e.exports=i,i.default=i},2428:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"dropdown_delete_disabled",transform:"translate(-10.000000, -60.000000)",fill:"#808080"},a.createElement("g",{id:"Edit_s",transform:"translate(8.000000, 22.000000)"},a.createElement("g",{id:"delete-dis",transform:"translate(2.000000, 38.000000)"},a.createElement("g",{id:"delete"},a.createElement("path",{d:"M10.2142857,4.33333333 L0.785714286,4.33333333 C0.351776268,4.33333333 0,3.96956469 0,3.52083333 L0,3.52083333 C0,3.07210197 0.351776268,2.70833333 0.785714286,2.70833333 L10.2142857,2.70833333 C10.6482237,2.70833333 11,3.07210197 11,3.52083333 L11,3.52083333 C11,3.96956469 10.6482237,4.33333333 10.2142857,4.33333333 Z M7.38571429,1.92833333 C7.38223032,2.00827452 7.37365619,2.08789143 7.36004762,2.16666667 L6.4072381,2.16666667 C6.42896748,2.08839583 6.4409374,2.00757484 6.44285714,1.92616667 C6.44285714,1.38768904 6.02072562,0.951166667 5.5,0.951166667 C4.97927438,0.951166667 4.55714286,1.38768904 4.55714286,1.92616667 C4.55888227,2.00759122 4.57085572,2.08843601 4.5927619,2.16666667 L3.63995238,2.16666667 C3.62621589,2.08791065 3.61764081,2.00828487 3.61428571,1.92833333 C3.62090657,0.861754536 4.45860966,0.000573392948 5.49004762,0 L5.49004762,0 L5.5,0 L5.50995238,0 L5.50995238,0 C6.54139034,0.000573392948 7.37909343,0.861754536 7.38571429,1.92833333 L7.38571429,1.92833333 Z M3.66666667,5.95833333 L3.66666667,10.2916667 L3.14285714,10.2916667 L3.14285714,5.95833333 L3.66666667,5.95833333 Z M5.76190476,5.95833333 L5.76190476,10.2916667 L5.23809524,10.2916667 L5.23809524,5.95833333 L5.76190476,5.95833333 Z M7.85714286,5.95833333 L7.85714286,10.2916667 L7.33333333,10.2916667 L7.33333333,5.95833333 L7.85714286,5.95833333 Z M2.0952381,11.9166667 L8.9047619,11.9166667 L8.9047619,4.875 L9.95238095,4.875 L9.95238095,11.375 C9.95238095,12.2724627 9.24882842,13 8.38095238,13 L2.61904762,13 C1.75117158,13 1.04761905,12.2724627 1.04761905,11.375 L1.04761905,4.875 L2.0952381,4.875 L2.0952381,11.9166667 Z",id:"Rectangle_20_copy_4"}))))))])}i.defaultProps={width:"11px",height:"13px",viewBox:"0 0 11 13",version:"1.1"},e.exports=i,i.default=i},2429:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"2,4",key:2},a.createElement("g",{id:"dropdown_3items_II",transform:"translate(-6.000000, -59.000000)",stroke:"#808080",strokeWidth:"1.5"},a.createElement("path",{d:"M10.3950865,71.9955252 C8.54356335,72.033998 7.04361681,70.8795129 7,69.0281038 C7,67.2441708 8.08672354,65.8310304 9.94025555,65.7914688 C9.94025555,63.6316654 10.9927829,60.6231188 15.0281026,60.6231188 C19.2256407,60.6231188 20.0571462,62.6217261 20.5536141,64.1022628 C22.7600323,64.2001632 25.1509684,65.2575035 25.1509684,67.9877268 C25.1109714,70.9697153 22.7307926,72.0368633 20.5931756,71.9955252 L10.3950865,71.9955252 Z",id:"modified"})))])}i.defaultProps={width:"20px",height:"14px",viewBox:"0 0 20 14",version:"1.1"},e.exports=i,i.default=i},2430:function(e,t,n){"use strict";e.exports={EDIT:0,SETTINGS:1,DELETE:2,UNPUBLISH:4,PUBLISH:5,SHARE:6,REPORTS:7,PUBLISH_LINK:8,EXPORT:9,CREATE:10,SHOW:11,PLAY:12,PREVIEW:13,LOCK:14,UNLOCK:15,DUPLICATE:16,INVITE_LEARNERS:17,MANAGE_USERS:18,ASSIGNMENT_CREATE:19,ASSIGNMENT_EDIT:20,ASSIGNMENT_DELETE:21,PERMISSION:23,SCHEDULE:24,TRYAGAIN:25,TOPICS:26}},2431:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(18))),p=i(n(2432));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).handleOkClick=a.handleOkClick.bind((0,s.default)(a)),a.handleCancelClick=a.handleCancelClick.bind((0,s.default)(a)),a.handleSelectChange=a.handleSelectChange.bind((0,s.default)(a)),a.state={channelName:a.props.channelsUserIsEditorIn?a.props.channelsUserIsEditorIn[0].channelName:"",channelId:a.props.channelsUserIsEditorIn?a.props.channelsUserIsEditorIn[0].channelId:"",libraryItemId:a.props.libraryItemId},a}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.channelsUserIsEditorIn;return d.default.createElement("div",{className:"duplicate-dialog"},d.default.createElement("div",{className:"duplicate-dialog-title"},d.default.createElement("div",{className:"duplicate-dialog-header"},f.default.translate("CONTENT_EDITOR.DUPLICATE_CONTENT_ITEM_DIALOG_TITLE")),d.default.createElement("div",{className:"duplicate-dialog-close-btn",onClick:this.handleCancelClick},"✕")),d.default.createElement("div",{className:"duplicate-dialog-content"},f.default.translate("CONTENT_EDITOR.DUPLICATE_CONTENT_ITEM_DIALOG_MESSAGE")),d.default.createElement("div",null,d.default.createElement(p.default,{value:this.state.selectedChannelName,onChange:this.handleSelectChange,className:"duplicate-select"},e.map((function(e){return d.default.createElement("option",{key:e.channelId,value:e.channelId},e.channelName)})))),d.default.createElement("div",{className:"duplicate-dialog-footer"},d.default.createElement("button",{"data-automation-id":"duplicate-dialog-cancel-btn","data-unittest-id":"cancel",className:"duplicate-dialog-cancel-btn",type:"button",key:"cancel_btn_key",onClick:this.handleCancelClick},f.default.translate("CONTENT_EDITOR.CONFIRM_DIALOG_CANCEL_BTN")),d.default.createElement("button",{"data-automation-id":"duplicate-dialog-ok-btn","data-unittest-id":"ok",className:"duplicate-dialog-ok-btn",type:"button",key:"ok_btn_key",onClick:this.handleOkClick},f.default.translate("CONTENT_EDITOR.DUPLICATE_CONTENT_ITEM_DIALOG_OK_BTN"))))}},{key:"handleSelectChange",value:function(e){var t=e.target.value,n=e.target.options[e.target.selectedIndex].text;this.setState({channelId:t,channelName:n})}},{key:"handleCancelClick",value:function(e){e.stopPropagation();var t=this.props.onCancel;t&&t()}},{key:"handleOkClick",value:function(e){e.preventDefault();var t=this.props.onDone;t&&t(this.state.channelId)}}]),n}(d.Component);t.default=m},2432:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(23)),o=i(n(68)),s=i(n(3)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(11))),h=n(942);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var v=function(e){(0,c.default)(n,e);var t=m(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.ltr,a=e.disabled,i=(0,o.default)(e,["children","ltr","disabled"]),s=(0,p.default)("duplicate-select-wrapper",{disabled:!!a},{ltr:!!n},{rtl:!n});return f.default.createElement("div",{className:s},f.default.createElement("select",(0,r.default)({"data-automation-id":"duplicate-select",className:"duplicate-select",disabled:a},i),t),f.default.createElement("span",{"data-automation-id":"duplicate-select-span",className:"duplicate-select-span"},">"))}}]),n}(f.Component);var g=(0,h.Hoc)((function(e){return{ltr:e.ltr}}))(v);t.default=g},2433:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(28)),l=i(n(601)),c=i(n(355)),u=i(n(2189)),d=a(n(2187)),f=s.default.Instance,p=function(){function e(){(0,r.default)(this,e)}return(0,o.default)(e,null,[{key:"handleServerResponse",value:function(e){return e.ok||e.status<400?Promise.resolve(e):Promise.reject(e)}},{key:"publishItem",value:function(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o="/LibraryService/library/items/publish",s=u.default.serverTypeToUiTypeConvertByType(t);s===d.FUSE&&(o="/EditorService/fuse/publishV2");var p={id:e,type:t,contentId:n,contentVersion:1*a,date:new Date,notificationEnabled:r};return o="".concat(c.default.instance.backendUrl).concat(o),l.default.obtainLock(e,i).then((function(t){return t.acknowledged?f.post(o,{},p).then((function(t){return l.default.releaseLock(e,i),t})):new Promise((function(e,n){n({lockResponse:t})}))}))}},{key:"getPublishedItemInfo",value:function(e){return f.get("".concat(c.default.instance.backendUrl,"/LessonEditorService/fuse/publishInfo/:id"),{id:e})}},{key:"getPublishedItemInfoFromLibraryService",value:function(e,t){return f.get("".concat(c.default.instance.backendUrl,"/LibraryService/library/items/publishInfo?id=").concat(e,"&type=").concat(t))}},{key:"exportUrl",value:function(e){return"".concat(c.default.instance.backendUrl,"/LessonEditorService/xapi/export/").concat(e,"?access_token=").concat(c.default.instance.accessToken.access_token)}},{key:"unpublishItem",value:function(e){var t=e.id,n=e.channelId;return l.default.obtainLock(t,n).then((function(e){return e.acknowledged?f.put("".concat(c.default.instance.backendUrl,"/LibraryService/library/items/unpublish/:itemId"),{itemId:t}).then((function(e){return l.default.releaseLock(t,n),e})).catch((function(e){return l.default.releaseLock(t,n),Promise.reject(e)})):new Promise((function(t,n){n({lockResponse:e})}))}))}},{key:"publishCourseTemplate",value:function(e){return this._changeCourseTemplateStatus(e.id,!0)}},{key:"unpublishCourseTemplate",value:function(e){return this._changeCourseTemplateStatus(e.id,!1)}},{key:"_changeCourseTemplateStatus",value:function(e,t){return f.put("".concat(c.default.instance.backendUrl,"/PlayAppService/channelTemplate/:id/publish"),{id:e},{},{params:{isPublished:t}})}}]),e}();t.default=p},2434:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(355)),l=o.default.Instance,c=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getUrlExportItem",value:function(e,t){var n="/LibraryService/library/items/".concat(e,"/export?channelId=").concat(t,"&accessToken=").concat(s.default.instance.accessToken.access_token);return l.get("".concat(s.default.instance.backendUrl).concat(n))}}]),e}();t.default=c},2435:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(601)),l=a(n(355)),c=o.default.Instance,u=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"setContentItemPermissions",value:function(e,t,n){var a="".concat(l.default.instance.backendUrl,"/LibraryService/contentItemPermissions/").concat(e,"/channels/").concat(t);return c.post(a,{},n).then((function(){s.default.releaseLock(e,t)}))}},{key:"getContentItemPermissions",value:function(e,t){return s.default.obtainLock(e,t).then((function(n){if(n.acknowledged){var a="".concat(l.default.instance.backendUrl,"/LibraryService/contentItemPermissions/").concat(e,"/channels/").concat(t);return c.get(a)}return new Promise((function(e,t){t({lockResponse:n})}))}))}}]),e}();t.default=u},2436:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(355)),l=o.default.Instance,c=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getTopics",value:function(e,t){var n={};n.contentVersion=t;var a="".concat(s.default.instance.backendUrl,"/PlayAppService/content/:contentItemId/topics");return l.get(a,{contentItemId:e},{params:n})}},{key:"updateTopics",value:function(e){return l.put("".concat(s.default.instance.backendUrl,"/PlayAppService/content/topics"),{},e)}}]),e}();t.default=c},2437:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(0)),l=a(n(28)),c=a(n(18)),u=a(n(41)),d=a(n(2208)),f=a(n(2438)),p=a(n(2439)),h=a(n(355)),m=a(n(2185)),v=a(n(600)),g=l.default.Instance;function E(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},a=0;a<t.length;a++)n[t[a]]=!0;for(var i=[],r=0;r<e.length;r++){var o=e[r];n[o]||i.push(o)}return i}var y=function(){function e(t){(0,r.default)(this,e),this.utils=t,this._completeAssignmentInWizard=this._completeAssignmentInWizard.bind(this),this._updateAssignment=this._updateAssignment.bind(this)}return(0,o.default)(e,[{key:"createAssignmentWizard",value:function(t){var n=this.utils,a=n.addWizard,i=n.removeWizard,r=n.setLoader,o=n.locale;r(!0);var s={dueDate:null,instructions:"",styleClass:"library-assignment-wizard",itemId:t.id,itemType:t.type,availableLearners:[],selectedLearners:[],locale:o},l={title:c.default.translate("ASSIGNMENT_WIZARD.TITLE.CREATE"),cancel:function(t,n){e._sendMixPanelEventCancel(n),i()},next:e._sendMixPanelEventNext,back:e._sendMixPanelEventBack,save:this._completeAssignmentInWizard,steps:[{id:"details",title:c.default.translate("ASSIGNMENT_WIZARD.DETAILS.TITLE"),component:f.default,requireNextValidation:!0},{id:"learners",title:c.default.translate("ASSIGNMENT_WIZARD.LEARNERS.TITLE"),component:p.default,requireNextValidation:!0}],styleClass:"library-assignment-wizard",data:s};this._getAllLearners().then((function(e){l.data.availableLearners=e.map((function(e){return{id:e.memberId,label:e.nickname}})),a(l),r(!1)})).catch((function(e){v.default.error("Problem creating assignment wizard, ".concat(JSON.stringify(e))),r(!1)}))}},{key:"createAssignmentWizardForEdit",value:function(t){var n=this,a=this.utils,i=a.addWizard,r=a.removeWizard,o=a.setLoader,s=a.locale;o(!0);var l={dueDate:null,instructions:"",styleClass:"library-assignment-wizard",itemId:t.id,itemType:t.type,availableLearners:[],selectedLearners:[],locale:s},u={title:c.default.translate("ASSIGNMENT_WIZARD.TITLE.EDIT"),cancel:function(t,n){e._sendMixPanelEventCancel(n),r()},next:e._sendMixPanelEventNext,back:e._sendMixPanelEventBack,save:this._updateAssignment,steps:[{id:"details",title:c.default.translate("ASSIGNMENT_WIZARD.DETAILS.TITLE"),component:f.default,requireNextValidation:!0},{id:"learners",title:c.default.translate("ASSIGNMENT_WIZARD.LEARNERS.TITLE"),component:p.default,requireNextValidation:!0}],styleClass:"library-assignment-wizard",data:l,editMode:!0},d=[];this._getAllLearners().then((function(e){return d=e,n._getAssignment(t.assignment.id)})).then((function(e){l.currentAssignmentDetails=e;var t=function(e,t){for(var n={},a=[],i=[],r=0;r<t.length;r++)n[t[r]]=!0;return e.forEach((function(e){var t={id:e.memberId,label:e.nickname};a.push(t),n[e.memberId]&&i.push(t)})),{selectedLearners:i,availableLearners:a}}(d,e.userIds);l.availableLearners=t.availableLearners,l.selectedLearners=t.selectedLearners,l.dueDate=e.dueDate,l.instructions=e.instructions,u.steps[1].isInitiallyInvalid=0===t.selectedLearners.length,i(u),o(!1)})).catch((function(e){v.default.error("Problem creating assignment wizard for edit, ".concat(JSON.stringify(e))),o(!1)}))}},{key:"deleteAssignment",value:function(e){var t=this,n=this.utils,a=n.addModal,i=n.removeModal;a(s.default.createElement(d.default,{title:c.default.translate("ASSIGNMENT_WIZARD.DELETE.TITLE"),content:c.default.translate("ASSIGNMENT_WIZARD.DELETE.MESSAGE"),onSubmit:function(){return t._performDelete(e)},onCancel:i}))}},{key:"_getAllLearners",value:function(){return m.default.getChannelMembers(this.utils.channelId,"ACTIVE","LEARNER")}},{key:"_completeAssignmentInWizard",value:function(t,n){var a,i=this,r=this.utils,o=r.setLoader,s=r.removeWizard,l=r.onRefresh,u=r.ltr,d=r.showNotification;o(!0),this._createAssignment(t).then((function(e){a=e.id;var n=t.selectedLearners.map((function(e){return e.id}));return i._assignLearners(a,n)})).then((function(){o(!1),s(),l(),d(c.default.translate("ASSIGNMENT_WIZARD.NOTIFICATIONS.COMPLETE"),"SUCCESS",u?"BOTTOM_RIGHT":"BOTTOM_LEFT"),e._sendMixPanelEventSave(t,n)})).catch((function(e){o(!1),v.default.error("Problem saving assignment in wizard, ".concat(JSON.stringify(e))),l()}))}},{key:"_createAssignment",value:function(e){var t=this.utils.channelId,n=Object.assign({channelId:t,contentItems:[{id:e.itemId,type:e.itemType}],dueDate:e.dueDate},e.instructions?{instructions:e.instructions}:{});return g.post("".concat(h.default.instance.backendUrl,"/LibraryService/assignments"),{},n)}},{key:"_assignLearners",value:function(e,t){return this._connectUsersToAssignment(e,t,!0)}},{key:"_unassignLearners",value:function(e,t){return this._connectUsersToAssignment(e,t,!1)}},{key:"_connectUsersToAssignment",value:function(e,t,n){var a=t,i=n?"assignUsers":"unassignUsers",r={params:{channelId:this.utils.channelId}};return g.post("".concat(h.default.instance.backendUrl,"/LibraryService/assignments/:assignmentId/").concat(i),{assignmentId:e},a,r)}},{key:"_updateAssignmentDetails",value:function(e,t){if(e.dueDate===t.dueDate&&e.instructions===t.instructions)return Promise.resolve();var n=this.utils.channelId,a=Object.assign({channelId:n},e,{dueDate:t.dueDate,instructions:t.instructions});return delete a.userIds,g.put("".concat(h.default.instance.backendUrl,"/LibraryService/assignments"),{},a)}},{key:"_updateAssignmentLearners",value:function(e,t,n){var a=[];return t.length&&a.push(this._assignLearners(e,t)),n.length&&a.push(this._unassignLearners(e,n)),Promise.all(a)}},{key:"_updateAssignment",value:function(t,n){var a=this.utils,i=a.setLoader,r=a.onRefresh,o=a.removeWizard,s=a.ltr,l=a.showNotification;i(!0);var u=t.currentAssignmentDetails,d=u.userIds,f=t.selectedLearners.map((function(e){return e.id})),p=E(f,d),h=E(d,f);Promise.all([this._updateAssignmentDetails(u,t),this._updateAssignmentLearners(u.id,p,h)]).then((function(){i(!1),o(),r(),l(c.default.translate("ASSIGNMENT_WIZARD.NOTIFICATIONS.EDIT"),"SUCCESS",s?"BOTTOM_RIGHT":"BOTTOM_LEFT"),e._sendMixPanelEventSave(t,n,!0)})).catch((function(){i(!1),o(),r()}))}},{key:"_getAssignment",value:function(e){var t={params:{channelId:this.utils.channelId}};return g.get("".concat(h.default.instance.backendUrl,"/LibraryService/assignments/:assignmentId"),{assignmentId:e},t)}},{key:"_performDelete",value:function(e){var t=this.utils,n=t.channelId,a=t.onRefresh,i=t.removeModal,r=e.assignment,o={params:{channelId:n}};g.remove("".concat(h.default.instance.backendUrl,"/LibraryService/assignments/:assignmentId"),{assignmentId:r.id},o).then((function(){a(),i()})).catch((function(e){i(),v.default.error("Problem deleting assignment, ".concat(JSON.stringify(e)))}))}}],[{key:"_sendMixPanelEventCancel",value:function(t){e._sendMixPanelEvent(t,(0,i.default)({},u.default.PARAMS.USER_ACTION,"cancel"))}},{key:"_sendMixPanelEventNext",value:function(t,n,a){e._sendMixPanelEvent(n,(0,i.default)({},u.default.PARAMS.USER_ACTION,t?e._getMixPanelStepName(a):"next"))}},{key:"_sendMixPanelEventBack",value:function(t,n,a){e._sendMixPanelEvent(n,(0,i.default)({},u.default.PARAMS.USER_ACTION,t?e._getMixPanelStepName(a):"back"))}},{key:"_sendMixPanelEventSave",value:function(t,n,a){var r;e._sendMixPanelEvent(n,(r={},(0,i.default)(r,u.default.PARAMS.USER_ACTION,a?"update":"save"),(0,i.default)(r,u.default.PARAMS.SET_DATE,t.dueDate?new Date(t.dueDate).toISOString():""),(0,i.default)(r,u.default.PARAMS.INSTRUCTIONS,t.instructions?u.default.CONDITIONS.YES:u.default.CONDITIONS.NO),r))}},{key:"_sendMixPanelEvent",value:function(t,n){var a=e._getMixPanelStepName(t),i=u.default.COMPONENTS.ASSIGNMENT_DIALOG;u.default.sendEvent(a,i,n)}},{key:"_getMixPanelStepName",value:function(e){switch(e){case 0:return u.default.TITLES.SET_ASSIGNMENT;case 1:return u.default.TITLES.SELECT_LEARNERS;default:return""}}}]),e}();t.default=y},2438:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(4)),l=i(n(12)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(1226))),h=i(n(18));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var E=function(e){(0,c.default)(n,e);var t=g(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={data:v({},e.data)},a.updateDueDate=a.updateDueDate.bind((0,l.default)(a)),a.updateInstructions=a.updateInstructions.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"render",value:function(){var e=this.state.data,t=e.dueDate,n=e.instructions,a=e.locale,i=t?new Date(t):null;return f.default.createElement("div",null,f.default.createElement("h3",null,h.default.translate("ASSIGNMENT_WIZARD.DETAILS.SECTION_TITLES.DATE")),f.default.createElement(p.default,{onSelection:this.updateDueDate,selected:i,locale:a}),f.default.createElement("span",{className:"library-assignment-wizard__required-indication"},"*"),f.default.createElement("h3",null,h.default.translate("ASSIGNMENT_WIZARD.DETAILS.SECTION_TITLES.INSTRUCTIONS")),f.default.createElement("textarea",{onChange:this.updateInstructions,maxLength:600,defaultValue:n,placeholder:h.default.translate("ASSIGNMENT_WIZARD.DETAILS.INSTRUCTIONS_PLACEHOLDER")}))}},{key:"updateDueDate",value:function(e){var t=this;this.setState({data:v(v({},this.state.data),{},{dueDate:e.getTime()})},(function(){t.props.onDataChanged(t.state.data,t.validate())}))}},{key:"updateInstructions",value:function(e){var t=this;this.setState({data:v(v({},this.state.data),{},{instructions:e.target.value})},(function(){t.props.onDataChanged(t.state.data,t.validate())}))}},{key:"validate",value:function(){return!!this.state.data.dueDate}}]),n}(f.Component);t.default=E},2439:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=i(n(9)),f=a(n(0)),p=(i(n(2)),i(n(2229))),h=i(n(18)),m=i(n(41));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}function g(e){m.default.sendEvent(m.default.TITLES.SELECT_LEARNERS,m.default.COMPONENTS.ASSIGNMENT_DIALOG,(0,d.default)({},m.default.PARAMS.USER_ACTION,e))}var E=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).data=a.props.data,a.onSelectionChange=a.onSelectionChange.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e={allTitle:h.default.translate("ASSIGNMENT_WIZARD.LEARNERS.SECTION_TITLES.ALL"),selectedTitle:h.default.translate("ASSIGNMENT_WIZARD.LEARNERS.SECTION_TITLES.ADDED"),searchPlaceholder:h.default.translate("ASSIGNMENT_WIZARD.LEARNERS.SEARCH_PLACEHOLDER"),onSelection:this.onSelectionChange,availableItems:this.data.availableLearners,selectedItems:this.data.selectedLearners,singleItemSelected:function(){return g("add_learner")},allItemsSelected:function(){return g("add_all")},singleItemUnselected:function(){return g("remove_learner")},allItemsUnselected:function(){return g("remove_all")}};return f.default.createElement(p.default,e)}},{key:"onSelectionChange",value:function(e){this.data.selectedLearners=e,this.props.onDataChanged(this.data,e.length>0)}}]),n}(f.Component);t.default=E},2440:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(43)),s=i(n(3)),l=i(n(4)),c=i(n(12)),u=i(n(6)),d=i(n(8)),f=i(n(7)),p=a(n(0)),h=(i(n(2)),i(n(18))),m=i(n(58)),v=i(n(36)),g=i(n(1226)),E=i(n(607)),y=i(n(2278)),_=i(n(216)),S=i(n(13)),T=i(n(41)),b=i(n(50)),I=i(n(2441));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var i=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var P="SETTINGS",N="EXTENSIONS",A=function(e){(0,u.default)(n,e);var t=O(n);function n(e){var a;return(0,s.default)(this,n),(a=t.call(this,e)).state={isInitializing:!0,view:P},a.locale=S.default.getLocale(),a._clickCancelButton=a._clickCancelButton.bind((0,c.default)(a)),a._clickSaveButton=a._clickSaveButton.bind((0,c.default)(a)),a._clickBackButton=a._clickBackButton.bind((0,c.default)(a)),a._clickClearButton=a._clickClearButton.bind((0,c.default)(a)),a._clickExceptionsLink=a._clickExceptionsLink.bind((0,c.default)(a)),a._getAvailableLearners=a._getAvailableLearners.bind((0,c.default)(a)),a._addLearnerToExtensionTable=a._addLearnerToExtensionTable.bind((0,c.default)(a)),a._removeLearnerExtension=a._removeLearnerExtension.bind((0,c.default)(a)),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.libraryItem;(0,t.setLoader)(!0),Promise.all([I.default.getItemSchedule(n.id,n.channelId),I.default.getChannelLearners(n.channelId)]).then((function(t){var n=(0,o.default)(t,2),a=n[0],i=n[1];e._initializeData(a,i)}))}},{key:"render",value:function(){var e=this._getDialogProps();return p.default.createElement(m.default,e)}},{key:"_getDialogProps",value:function(){return{title:h.default.translate("SCHEDULING_DIALOG.TITLE"),content:this._getDialogContent(),actions:this._getDialogActions(),secondaryActions:this._getClearAction(),styleClass:"scheduling-dialog"}}},{key:"_getDialogContent",value:function(){return this.state.isInitializing?null:this.state.view===P?this._getSettingsContent():this._getExtensionsContent()}},{key:"_getSettingsContent",value:function(){var e=this;return p.default.createElement("div",{className:"scheduling-dialog__content"},p.default.createElement("h2",{className:"scheduling-dialog__section-title"},h.default.translate("SCHEDULING_DIALOG.DATE_RANGE_SECTION.TITLE")),p.default.createElement("div",{className:"scheduling-dialog__date-range-section"},p.default.createElement("div",{className:"scheduling-dialog__start-date-area"},p.default.createElement("h3",{className:"scheduling-dialog__control-label"},h.default.translate("SCHEDULING_DIALOG.DATE_RANGE_SECTION.START_DATE")),p.default.createElement("div",{className:"scheduling-dialog__date-time-block"},p.default.createElement(g.default,{locale:this.locale,onSelection:function(t){e.setState({startDate:t.getTime(),displayDates:C(C({},e.state.displayDates),{},{startDate:t})})},selected:this.state.displayDates.startDate,disablePastDays:!1}),p.default.createElement(E.default,{config:{format:"HH:mm",defaultValue:this.state.displayDates.startTime,allowClear:!1},onChange:function(t){e.setState({startHours:t.hours(),startMinutes:t.minutes(),displayDates:C(C({},e.state.displayDates),{},{startTime:t})})}}))),p.default.createElement("div",{className:"scheduling-dialog__end-date-area"},p.default.createElement("div",{className:"scheduling-dialog__toggle-title"},p.default.createElement("h3",{className:"scheduling-dialog__control-label"},h.default.translate("SCHEDULING_DIALOG.DATE_RANGE_SECTION.END_DATE")),p.default.createElement(_.default,{isEnabled:!this.state.disableEnd,onUserChangeState:function(t){e.setState({disableEnd:!t})}})),!this.state.disableEnd&&p.default.createElement("div",{className:"scheduling-dialog__date-time-block"},p.default.createElement(g.default,{locale:this.locale,onSelection:function(t){e.setState({endDate:t.getTime(),displayDates:C(C({},e.state.displayDates),{},{endDate:t})})},selected:this.state.displayDates.endDate,disablePastDays:!1}),p.default.createElement(E.default,{config:{format:"HH:mm",defaultValue:this.state.displayDates.endTime,allowClear:!1},onChange:function(t){e.setState({endHours:t.hours(),endMinutes:t.minutes(),displayDates:C(C({},e.state.displayDates),{},{endTime:t})})}})))),p.default.createElement("div",{className:"scheduling-dialog__toggle-title scheduling-dialog__duration-title"},p.default.createElement("h2",{className:"scheduling-dialog__section-title"},h.default.translate("SCHEDULING_DIALOG.COMPLETION_TIME_SECTION.TITLE")),p.default.createElement(_.default,{isEnabled:!this.state.disableDuration,onUserChangeState:function(t){e.setState({disableDuration:!t})}})),!this.state.disableDuration&&p.default.createElement(E.default,{config:{format:"HH:mm",disabledMinutes:function(e){return 0===e?[0]:[]},defaultValue:this.state.displayDates.completionTime,allowClear:!1},onChange:function(t){var n=60*t.hours()*60+60*t.minutes();e.setState({completionTimeInSeconds:n,displayDates:C(C({},e.state.displayDates),{},{completionTime:t})})},minTimeInSeconds:60}),!this.state.disableDuration&&p.default.createElement("div",{className:"scheduling-dialog__exceptions-link-area"},p.default.createElement("span",{className:"scheduling-dialog__exceptions-link",onClick:this._clickExceptionsLink},h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_LINK"))),this.showError())}},{key:"_getExtensionsContent",value:function(){var e=this;return p.default.createElement("div",{className:"scheduling-dialog__content"},p.default.createElement("h2",{className:"scheduling-dialog__section-title"},h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.TITLE")),p.default.createElement("div",{className:"scheduling-dialog__learner-selection-area"},p.default.createElement(y.default,{getItems:this._getAvailableLearners,onItemSelection:this._addLearnerToExtensionTable,idField:"memberId",labelField:"nickname",searchPlaceholder:h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.LEARNER_SELECTION_PLACEHOLDER"),emptyWithSearchMessage:h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.NO_LEARNERS"),ref:function(t){e.learnerDropDownRef=t}})),p.default.createElement("div",{className:"scheduling-dialog__learner-extension-area"},this._getLearnerExtensionTable()))}},{key:"_getLearnerExtensionTable",value:function(){var e=this,t=this.state,n=t.learnersWithExtensions,a=t.completionTimeInSeconds;return n.length?p.default.createElement("table",{className:"scheduling-dialog__learner-extension-table"},p.default.createElement("thead",null,p.default.createElement("tr",null,p.default.createElement("th",null,h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.NAME")),p.default.createElement("th",null,h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.ADDITIONAL_TIME")),p.default.createElement("th",null,h.default.translate("SCHEDULING_DIALOG.EXCEPTIONS_SECTION.TOTAL_TIME")))),p.default.createElement("tbody",null,n.map((function(t){var i=t.extensionTimeInSeconds,r=i+a,o=Math.floor(i/3600),s=Math.floor(i%3600/60),l=(0,b.default)("".concat(o,":").concat(s),"HH:mm"),c=Math.floor(r/3600),u=Math.floor(r%3600/60),d=u<10?"0"+u:u,f="".concat(c<10?"0"+c:c,":").concat(d);return p.default.createElement("tr",{key:t.memberId},p.default.createElement("td",null,t.nickname),p.default.createElement("td",null,p.default.createElement(E.default,{config:{format:"HH:mm",defaultValue:l},onChange:function(a){t.extensionTimeInSeconds=3600*a.hours()+60*a.minutes(),e.setState({learnersWithExtensions:n})}})),p.default.createElement("td",null,p.default.createElement("span",{className:"scheduling-dialog__total-time-display"},f)),p.default.createElement("td",null,p.default.createElement("span",{className:"scheduling-dialog__remove-extension-button icon--close",onClick:function(){e._removeLearnerExtension(t)}})))})))):null}},{key:"_getDialogActions",value:function(){return this.state.isInitializing?null:this.state.view===P?this._getSettingsActions():this._getExtensionsActions()}},{key:"_getSettingsActions",value:function(){return[{id:"cancel",text:h.default.translate("SCHEDULING_DIALOG.BUTTONS.CANCEL"),type:v.default.TYPES.SECONDARY,onClick:this._clickCancelButton},{id:"done",text:h.default.translate("SCHEDULING_DIALOG.BUTTONS.DONE"),type:v.default.TYPES.PRIMARY,onClick:this._clickSaveButton}]}},{key:"_getExtensionsActions",value:function(){return[{id:"back",text:h.default.translate("SCHEDULING_DIALOG.BUTTONS.BACK"),type:v.default.TYPES.PRIMARY,onClick:this._clickBackButton}]}},{key:"_getClearAction",value:function(){return this.state.view===N||this.state.isInitializing?null:[{id:"clear",text:h.default.translate("SCHEDULING_DIALOG.BUTTONS.CLEAR"),type:v.default.TYPES.PRIMARY,onClick:this._clickClearButton,disabled:this.state.disableRemoveScheduling}]}},{key:"_sendFullMixPanelEvent",value:function(e){var t,n=this.state,a=!!n.endDate,i=!n.disableDuration;T.default.sendEvent(T.default.TITLES.MANAGE_SCHEDULING_DIALOG,T.default.COMPONENTS.SCHEDULING_DIALOG,(t={},(0,r.default)(t,T.default.PARAMS.USER_ACTION,e),(0,r.default)(t,T.default.PARAMS.END_DATE,a),(0,r.default)(t,T.default.PARAMS.TIME_TO_COMPLETE,i),t))}},{key:"_clickCancelButton",value:function(){this.props.removeModalFunction(),this._sendFullMixPanelEvent("cancel")}},{key:"_clickSaveButton",value:function(){var e,t=this.props,n=t.removeModalFunction,a=t.onRefresh,i=this.state,r=i.startDate,o=i.endDate,s=i.disableEnd,l=this._getFullStartDate(),c=this._getFullEndDate();r?s||o?!s&&l>=c&&(e=h.default.translate("SCHEDULING_DIALOG.ERRORS.START_AFTER_END")):e=h.default.translate("SCHEDULING_DIALOG.ERRORS.NO_END_DATE"):e=h.default.translate("SCHEDULING_DIALOG.ERRORS.NO_START_DATE"),this.setState({errorMessage:e}),e||(I.default.setItemSchedule(this._getSchedulingDataModel()).then((function(){n(),a()})),this._sendFullMixPanelEvent("done"))}},{key:"_clickBackButton",value:function(){this.setState({view:P}),T.default.sendEvent(T.default.TITLES.MANAGE_SCHEDULING_DIALOG,T.default.COMPONENTS.SCHEDULING_DIALOG,(0,r.default)({},T.default.PARAMS.USER_ACTION,"back"))}},{key:"_clickClearButton",value:function(){var e=this.props,t=e.libraryItem,n=e.removeModalFunction,a=e.onRefresh;I.default.setItemSchedule({lockType:"MANUAL",contentId:t.id,channelId:t.channelId}).then((function(){n(),a()})),this._sendFullMixPanelEvent("remove")}},{key:"_clickExceptionsLink",value:function(){this.setState({view:N}),this._sendFullMixPanelEvent("learner_exceptions")}},{key:"_getSchedulingDataModel",value:function(){var e=this.props.libraryItem,t=this.state,n=t.learnersWithExtensions,a=t.disableEnd,i=t.disableDuration,r={};n.forEach((function(e){r[e.memberId]=e.extensionTimeInSeconds}));var o={lockType:"SCHEDULED",contentId:e.id,channelId:e.channelId,scheduleProperties:{startFrom:this._getFullStartDate(),userTimeExtensionInSeconds:r}};return Object.assign(o.scheduleProperties,a?{}:{startUntil:this._getFullEndDate()},i?{}:{durationInSeconds:this.state.completionTimeInSeconds}),o}},{key:"_getFullStartDate",value:function(){var e=this.state;return e.startDate+60*e.startHours*60*1e3+60*e.startMinutes*1e3}},{key:"_getFullEndDate",value:function(){var e=this.state;return e.endDate+60*e.endHours*60*1e3+60*e.endMinutes*1e3}},{key:"_initializeData",value:function(e,t){var a=this.props.setLoader,i={isInitializing:!1};if(e&&"SCHEDULED"===e.lockType){var r=n._getTimeSettings(e.scheduleProperties),o=n._getLearnerStructure(e,t);Object.assign(i,r,o)}else Object.assign(i,{startDate:0,startHours:0,startMinutes:0,endDate:0,endHours:0,endMinutes:0,completionTimeInSeconds:3600,displayDates:{completionTime:(0,b.default)("01:00","HH:mm")},disableEnd:!0,disableDuration:!0,disableRemoveScheduling:!0},{learnersWithExtensions:[],availableLearners:t});a(!1),this.setState(i)}},{key:"_getAvailableLearners",value:function(e){var t=this.state.availableLearners,n=e?e.toLowerCase():"",a=t.filter((function(e){var t=!e.extensionTimeInSeconds,a=e.nickname.toLowerCase().includes(n);return t&&a}));return new Promise((function(e){e(a)}))}},{key:"_addLearnerToExtensionTable",value:function(e){var t=this,n=this.state.learnersWithExtensions;e.extensionTimeInSeconds=900,n.unshift(e),this.setState({learnersWithExtensions:n},(function(){t.learnerDropDownRef.updateItemsByExternalRequest()}))}},{key:"_removeLearnerExtension",value:function(e){var t=this,n=this.state.learnersWithExtensions;e.extensionTimeInSeconds=null,n=n.filter((function(t){return t.memberId!==e.memberId})),this.setState({learnersWithExtensions:n},(function(){t.learnerDropDownRef.updateItemsByExternalRequest()}))}},{key:"showError",value:function(){var e=this.state.errorMessage;return e?p.default.createElement("div",{className:"scheduling-dialog__error-section"},e):null}}],[{key:"_getTimeSettings",value:function(e){var t,a,i,r,o,s=new Date(e.startFrom),l=new Date(new Date(s).setHours(0,0,0,0)),c=s.getHours(),u=s.getMinutes();if(void 0===e.startUntil)t=0,a=0,i=0;else{var d=new Date(e.startUntil);t=new Date(new Date(d).setHours(0,0,0,0)).getTime(),a=d.getHours(),i=d.getMinutes()}return"number"==typeof e.durationInSeconds?(r=e.durationInSeconds,o=n.getMomentTimeFromSeconds(e.durationInSeconds)):(r=3600,o=(0,b.default)("01:00","HH:mm")),{startDate:l.getTime(),startHours:c,startMinutes:u,endDate:t,endHours:a,endMinutes:i,completionTimeInSeconds:r,displayDates:{startDate:l,startTime:n.getMomentTimeFromHoursAndMinutes(c,u),endDate:t,endTime:n.getMomentTimeFromHoursAndMinutes(a,i),completionTime:o},disableEnd:void 0===e.startUntil,disableDuration:void 0===e.durationInSeconds}}},{key:"getMomentTimeFromSeconds",value:function(e){var t=e%3600,n=Math.floor(t/60),a=Math.floor((e-t)/3600);return(0,b.default)("".concat(a,":").concat(n),"HH:mm")}},{key:"getMomentTimeFromHoursAndMinutes",value:function(e,t){return(0,b.default)("".concat(e,":").concat(t),"HH:mm")}},{key:"_getLearnerStructure",value:function(e,t){var n=[],a=t,i=e.scheduleProperties.userTimeExtensionInSeconds||{};return t.forEach((function(e){e.memberId in i&&(e.extensionTimeInSeconds=i[e.memberId],n.push(e))})),{learnersWithExtensions:n,availableLearners:a}}}]),n}(p.Component);A.defaultProps={};var L=A;t.default=L},2441:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(355)),l=o.default.Instance,c="PlayAppService/library/items/lock",u=function(e){return"".concat(s.default.instance.backendUrl,"/").concat(e)},d=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"getItemSchedule",value:function(e,t){var n=u(c),a={params:{contentId:e,channelId:t}};return l.get(n,{},a)}},{key:"setItemSchedule",value:function(e){var t=u(c);return l.post(t,{},e)}},{key:"getChannelLearners",value:function(e){var t=u("LibraryService/v2/channels/:channelId/members");return l.get(t,{channelId:e},{params:{status:"ACTIVE",role:"LEARNER"}})}}]),e}();t.default=d},2442:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=a(n(2187)),l=a(n(355)),c=o.default.Instance,u=function(){function e(){(0,i.default)(this,e)}return(0,r.default)(e,null,[{key:"setAssessmentTryAgain",value:function(e){var t=e.contentId,n=e.channelId,a=e.itemType,i=e.isTryAgainEnabled;if(a!==s.default.ASSESSMENT)return Promise.reject("try-again can only be set for assessments ");var r={enable:i},o="".concat(l.default.instance.backendUrl,"/LibraryService/v2/channels/").concat(n,"/assessments/").concat(t,"/tryAgain");return c.put(o,{},r)}}]),e}();t.default=u},2443:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43)),o=a(n(0)),s=(i(n(2)),i(n(58))),l=i(n(18)),c=i(n(947)),u=function(e){var t=e.onConfirm,n=e.onCancel,a=e.itemsByReference,i=(0,o.useState)(!0),u=(0,r.default)(i,2),d=u[0],f=u[1],p=function(e){f(e)};return o.default.createElement(s.default,{styleClass:"confirm-duplicate-course-dialog",theme:s.default.THEMES.LIGHT,title:l.default.translate("course-settings.modal.duplicate"),content:o.default.createElement("div",{className:"confirm-duplicate-course-dialog-content"},o.default.createElement("div",{className:"confirm-duplicate-course-dialog--explanation"},l.default.translate("confirm-duplicate-course-dialog.explanation-text")),o.default.createElement("div",{className:"confirm-duplicate-course-dialog--items-list"},o.default.createElement("ul",null,a.map((function(e){return o.default.createElement("li",null,e)})))),o.default.createElement("div",{className:"confirm-duplicate-course-dialog--items-list-title"},l.default.translate("confirm-duplicate-course-dialog.items-list-title")),o.default.createElement("div",{className:"confirm-duplicate-course-dialog--radio"},o.default.createElement(c.default,{onSelected:function(){return p(!0)},isSelected:!!d,content:l.default.translate("confirm-duplicate-course-dialog.radio-reference"),id:"confirm-duplicate-dialog__radio-reference"}),o.default.createElement(c.default,{onSelected:function(){return p(!1)},isSelected:!d,content:l.default.translate("confirm-duplicate-course-dialog.radio-local-copy"),id:"confirm-duplicate-dialog__radio-local-copy"}))),actions:[{id:"cancel",type:s.default.BUTTON_TYPES.SECONDARY,text:l.default.translate("common.cancel-btn"),onClick:n},{id:"update",type:s.default.BUTTON_TYPES.PRIMARY,text:l.default.translate("common.confirm-btn"),onClick:function(){return t(d)}}]})};u.defaultProps={itemsByReference:[]};var d=u;t.default=d},2445:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("filter",{id:"a",width:"102.7%",height:"102.2%",x:"-1.4%",y:"-1.1%",filterUnits:"objectBoundingBox"},[a.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),a.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1",key:1}),a.createElement("feColorMatrix",{in:"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0",key:2}),a.createElement("feMerge",{key:3},[a.createElement("feMergeNode",{in:"shadowMatrixOuter1",key:0}),a.createElement("feMergeNode",{in:"SourceGraphic",key:1})])])),a.createElement("path",{fill:"#B0C0CB",fillRule:"nonzero",d:"M23.253 6L25 7.707l-9.272 9.062L11 12.148l1.747-1.707 2.981 2.914z",filter:"url(#a)",transform:"translate(-9 -4)",key:1})])}i.defaultProps={width:"18",height:"15",viewBox:"0 0 18 15"},e.exports=i,i.default=i},2446:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(202))),p=i(n(18)),h=i(n(50)),m=i(n(2201));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).setHover=a.setHover.bind((0,s.default)(a)),a.onMouseOver=a.setHover.bind((0,s.default)(a),!0),a.onMouseLeave=a.setHover.bind((0,s.default)(a),!1),a.libraryItemType=void 0,a.state={showTooltip:!1},a}return(0,o.default)(n,[{key:"render",value:function(){var e=this,t=this.state.showTooltip,n=this.props,a=n.scheduleData,i=n.locale;if(!a)return null;var r,o,s=(new Date).getTime(),l=a.startFrom,c=a.startUntil,u="library-item-due-date";if(s<l){u+=" library-item-due-date-scheduled";var v=new Date,g=new Date(l),E=(0,h.default)("".concat(g.getHours(),":").concat(g.getMinutes()),"HH:mm").format("HH:mm");v.getDate()===g.getDate()&&v.getMonth()===g.getMonth()&&v.getFullYear()===g.getFullYear()?(r=E,o=p.default.translate("SCHEDULE_CARD_INFO.ITEM_WILL_BE_AVAILABLE_TODAY",{time:r})):(r=m.default.getShortDateByLocale(g,i),o=p.default.translate("SCHEDULE_CARD_INFO.ITEM_WILL_BE_AVAILABLE",{date:r,time:E}))}else if(s>l&&s<c){u+=" library-item-due-date-started",r=m.default.getShortDateByLocale(new Date(l),i);var y=new Date(c),_=(0,h.default)("".concat(y.getHours(),":").concat(y.getMinutes()),"HH:mm").format("HH:mm");o=p.default.translate("SCHEDULE_CARD_INFO.ITEM_IS_AVAILABLE",{date:m.default.getShortDateByLocale(new Date(c),i),time:_})}else{if(s>l&&void 0===c)return null;u+=" library-item-due-date-past",r=m.default.getShortDateByLocale(new Date(c),i),o=p.default.translate("SCHEDULE_CARD_INFO.ITEM_IS_NO_LONGER_AVAILABLE")}return d.default.createElement("div",{className:u,onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseLeave},r,d.default.createElement("div",{className:"due-date-tooltip",ref:function(t){e._dueDateRef=t}},t&&d.default.createElement(f.default,{content:d.default.createElement("div",{className:"library-tooltip-advance"},o),parentOffsets:this._dueDateRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"library-item-due-date-tooltip"})))}},{key:"setHover",value:function(e){this.setState({showTooltip:e})}}]),n}(d.Component);t.default=g},2447:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(37))),p=i(n(202)),h=i(n(18)),m=i(n(235)),v=i(n(13)),g=i(n(2448));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var y=f.default.isMobile,_=f.default.isPhone;var S=function(e){(0,l.default)(n,e);var t=E(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).onMouseOver=a.setHover.bind((0,o.default)(a),!0),a.onMouseLeave=a.setHover.bind((0,o.default)(a),!1),a.state={showTooltip:!1},a}return(0,s.default)(n,null,[{key:"formatPathIndex",value:function(e){return e<10?"0"+e:e}},{key:"formatLockedByPathMessage",value:function(e){var t=e.prerequisite,a=void 0===t?{}:t,i=n.formatPathIndex(a.itemIndex);if(a.programmedUnlockDate){var r=m.default.getDateStringByLocale(new Date(a.programmedUnlockDate),v.default.getLocale(),{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hourCycle:"h24"});return h.default.translate("locked-by-path.programmed-unlock.tooltip",{date:r})}return a.completionThreshold&&a.successThreshold?h.default.translate("BOOK.LOCKED_BY_PATH_PROGRESS_AND_PERFORMANCE_ALERT",{index:i,performance:a.successThreshold,completion:a.completionThreshold}):a.completionThreshold?h.default.translate("BOOK.LOCKED_BY_PATH_PROGRESS_ALERT",{index:i,completion:a.completionThreshold}):a.successThreshold?h.default.translate("BOOK.LOCKED_BY_PATH_PERFORMANCE_ALERT",{index:i,performance:a.successThreshold}):""}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this,t=this.props.path,a=this.state.showTooltip;return t?d.default.createElement("div",{className:"library-item-path-info",onMouseEnter:y?void 0:this.onMouseOver,onMouseLeave:y?void 0:this.onMouseLeave,ref:function(t){e._pathInfoRef=t}},d.default.createElement(g.default,{className:"library-item-path-info__icon"}),this.renderIndex(),a&&d.default.createElement("div",{className:"library-item-path-info__tooltip"},d.default.createElement(p.default,{content:d.default.createElement("div",{className:"library-tooltip-advance path-item-tooltip"},n._getPathTooltipMessage(t)),parentOffsets:this._pathInfoRef.getBoundingClientRect(),position:"bottom"}))):null}},{key:"renderIndex",value:function(){if(_)return null;var e=this.props.path,t=n.formatPathIndex(e.index);return d.default.createElement("div",{className:"library-item-path-info__index"},t)}},{key:"setHover",value:function(e){this.setState({showTooltip:e})}}],[{key:"_getPathTooltipMessage",value:function(e){return e.isLocked?n.formatLockedByPathMessage(e):h.default.translate("BOOK.PATH_TOOLTIP").replace(/\$1/g,n.formatPathIndex(e.index))}}]),n}(d.Component);t.default=S},2448:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{fill:"#FFF",fillRule:"evenodd",transform:"matrix(-1 0 0 1 20.313 -.238)"},[a.createElement("ellipse",{cx:"16.108",cy:"25.028",fillRule:"nonzero",rx:"1.441",ry:"3.259",transform:"rotate(-89.59 16.108 25.028)",key:0}),a.createElement("ellipse",{cx:"16.062",cy:"2.713",fillRule:"nonzero",rx:"2.217",ry:"2.232",key:1}),a.createElement("path",{d:"M2.125 3.974h13.928v9.945H2.125a2 2 0 0 1-2-2V5.974a2 2 0 0 1 2-2z",key:2}),a.createElement("path",{fillRule:"nonzero",d:"M15.028 3.214h2v21.227h-2z",key:3})]))}i.defaultProps={width:"21",height:"27",viewBox:"0 0 21 27"},e.exports=i,i.default=i},2449:function(e,t,n){"use strict";e.exports={NOT_STARTED:0,STARTED:1,COMPLETED:2}},2450:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{fill:"#8195A3",fillRule:"evenodd"},a.createElement("path",{d:"M12 13.84C12 9.747 9.312 6.43 6 6.43S0 9.746 0 13.84C0 14.479 2.688 15 6 15s6-.52 6-1.16zM6.375 0C8.24 0 9.75 1.439 9.75 3.214c0 1.776-1.51 3.215-3.375 3.215S3 4.99 3 3.214C3 1.44 4.51 0 6.375 0z"})))}i.defaultProps={width:"12",height:"15",viewBox:"0 0 12 15"},e.exports=i,i.default=i},2451:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("desc",{key:0},"Created with sketchtool."),a.createElement("defs",{key:1}),a.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:2},a.createElement("g",{id:"Show",fill:"#B7BEC2",fillRule:"nonzero"},a.createElement("g",{id:"eye"},[a.createElement("path",{d:"M22.9101046,8.39480628 C23.0299902,8.14877487 23.0299902,7.85118325 22.9101046,7.60515183 C20.7129281,3.0965445 16.4272614,0.0357277487 11.5000376,0.0357277487 C6.57281373,0.0357277487 2.28710948,3.09658639 0.0899330065,7.60515183 C-0.0299526144,7.85118325 -0.0299526144,8.14877487 0.0899330065,8.39480628 C2.28714706,12.9034136 6.57273856,15.9642723 11.5,15.9642723 C16.4272614,15.9642723 20.7128905,12.9034136 22.9101046,8.39480628 Z M11.5,14.1091099 C8.47264379,14.1091099 6.01852124,11.3739476 6.01852124,8 C6.01852124,4.62605236 8.47264379,1.89084817 11.5,1.89084817 C14.5273562,1.89084817 16.9815163,4.62601047 16.9815163,8 C16.9815163,11.3739895 14.5273562,14.1091099 11.5,14.1091099 Z",id:"Shape",key:0}),a.createElement("path",{d:"M11.5,4.88670157 C11.2693987,4.88670157 11.0454493,4.9180733 10.8311209,4.97675393 C11.0506356,5.25989529 11.18375,5.62860733 11.18375,6.03216754 C11.18375,6.92431414 10.5348268,7.64758115 9.73429902,7.64758115 C9.37219935,7.64758115 9.04136765,7.49926702 8.78731536,7.25457592 C8.7346634,7.49344503 8.70651471,7.74303665 8.70651471,8.00004188 C8.70651471,9.71949738 9.95719608,11.1133403 11.4999624,11.1133403 C13.0427288,11.1133403 14.2934101,9.7194555 14.2934101,8.00004188 C14.2934101,6.28062827 13.0428039,4.88670157 11.5,4.88670157 Z",id:"Shape",key:1})])))])}i.defaultProps={width:"23px",height:"16px",viewBox:"0 0 23 16",version:"1.1"},e.exports=i,i.default=i},2452:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{fill:"none",fillRule:"evenodd"},[a.createElement("path",{fill:"#00AF8F",d:"M50 0c27.614 0 50 22.386 50 50s-22.386 50-50 50S0 77.614 0 50 22.386 0 50 0z",opacity:".863",key:0}),a.createElement("path",{fill:"#FFF",d:"M42.92 72.885l-19.59-19.59 4.898-4.899L42.92 63.09l32.21-32.21 4.897 4.898z",key:1})]))}i.defaultProps={width:"100",height:"100",viewBox:"0 0 100 100"},e.exports=i,i.default=i},2453:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(202))),p=i(n(18)),h=i(n(2331)),m=i(n(2201)),v=n(2260);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=function(e){(0,l.default)(n,e);var t=g(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).setHover=a.setHover.bind((0,o.default)(a)),a.onMouseOver=a.setHover.bind((0,o.default)(a),!0),a.onMouseLeave=a.setHover.bind((0,o.default)(a),!1),a.libraryItemType=void 0,a.state={showTooltip:!1},a}return(0,s.default)(n,null,[{key:"getCurrentDate",value:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}}]),(0,s.default)(n,[{key:"render",value:function(){var e=this,t=this.state.showTooltip,a=this.props,i=a.channel,r=a.locale;if(!i)return null;var o,s,l=n.getCurrentDate(),c="library-item-due-date";return i.status===v.CHANNEL_STATUS.FINISHED?(c+=" library-item-due-date-finished",s=i.endDate?p.default.translate("CHANNEL_DUE_DATE_FINISHED").replace(/\$1/g,i?m.default.getDateStringByLocale(new Date(i.endDate),r):"")||"DUE DATE":null,o=d.default.createElement("div",{className:"done-icon channel-info-icons-wrapper"},d.default.createElement(h.default,{className:"sch-icon-alone"}))):i.status===v.CHANNEL_STATUS.SCHEDULED?(c+=" library-item-due-date-scheduled",s=p.default.translate("CHANNEL_DUE_DATE_SCH").replace(/\$1/g,i?m.default.getDateStringByLocale(new Date(i.startDate),r):"")||"DUE DATE",o=d.default.createElement("div",{className:"done-icon channel-info-icons-wrapper"},d.default.createElement(h.default,{className:"sch-icon"}),i.startDate&&d.default.createElement("div",null," ",m.default.getShortDateByLocale(new Date(i.startDate),r)," "))):(i.status===v.CHANNEL_STATUS.STARTED||l.getTime()<=new Date(i.startDate))&&(c+=" library-item-due-date-started",s=i.endDate?p.default.translate("CHANNEL_DUE_DATE_IN_PROGRESS").replace(/\$1/g,i?m.default.getDateStringByLocale(new Date(i.endDate),r):"")||"DUE DATE":null,(o=i.endDate?d.default.createElement("div",{className:"done-icon channel-info-icons-wrapper"},d.default.createElement(h.default,{className:"sch-icon-green"}),i.endDate&&d.default.createElement("div",{className:"date-max-length"}," ",m.default.getShortDateByLocale(new Date(i.endDate),r))):null)||(c="no style")),d.default.createElement("div",{className:c,onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseLeave},o,d.default.createElement("div",{className:"due-date-tooltip",ref:function(t){e._dueDateRef=t}},t&&s&&d.default.createElement(f.default,{content:d.default.createElement("div",{className:"library-tooltip-advance"},s),parentOffsets:this._dueDateRef.getBoundingClientRect(),position:"bottom",tooltipClasses:"library-item-due-date-tooltip"})))}},{key:"setHover",value:function(e){this.setState({showTooltip:e})}}]),n}(d.Component);t.default=E},2454:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("path",{d:"M10,0 C4.48,0 0,4.48 0,10 C0,15.52 4.48,20 10,20 C15.52,20 20,15.52 20,10 C20,4.48 15.52,0 10,0 Z M9,17.93 C5.05,17.44 2,14.08 2,10 C2,9.38 2.08,8.79 2.21,8.21 L7,13 L7,14 C7,15.1 7.9,16 9,16 L9,17.93 Z M15.9,15.39 C15.64,14.58 14.9,14 14,14 L13,14 L13,11 C13,10.45 12.55,10 12,10 L6,10 L6,8 L8,8 C8.55,8 9,7.55 9,7 L9,5 L11,5 C12.1,5 13,4.1 13,3 L13,2.59 C15.93,3.78 18,6.65 18,10 C18,12.08 17.2,13.97 15.9,15.39 Z",id:"path-1",key:0}),a.createElement("filter",{x:"-35.0%",y:"-25.0%",width:"170.0%",height:"170.0%",filterUnits:"objectBoundingBox",id:"filter-2",key:1},[a.createElement("feOffset",{dx:"0",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1",key:0}),a.createElement("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1",key:1}),a.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1",key:2})])]),a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",key:1},a.createElement("g",{id:"Public-group-indicator",transform:"translate(-289.000000, -206.000000)",fillRule:"nonzero"},a.createElement("g",{id:"baseline-public-24px",transform:"translate(293.000000, 208.000000)"},a.createElement("g",{id:"Shape"},[a.createElement("use",{fill:"black",fillOpacity:"1",filter:"url(#filter-2)",xlinkHref:"#path-1",key:0}),a.createElement("use",{fill:"#D9E0E3",xlinkHref:"#path-1",key:1})]))))])}i.defaultProps={width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1"},e.exports=i,i.default=i},2455:function(e,t,n){"use strict";n.r(t),n.d(t,"CircularProgressbar",(function(){return c})),n.d(t,"CircularProgressbarWithChildren",(function(){return u})),n.d(t,"buildStyles",(function(){return d}));var a=n(0),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var r=function(){return(r=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e){var t=e.className,n=e.counterClockwise,i=e.dashRatio,r=e.pathRadius,o=e.strokeWidth,c=e.style;return Object(a.createElement)("path",{className:t,style:Object.assign({},c,l({pathRadius:r,dashRatio:i,counterClockwise:n})),d:s({pathRadius:r,counterClockwise:n}),strokeWidth:o,fillOpacity:0})}function s(e){var t=e.pathRadius,n=e.counterClockwise?1:0;return"\n      M 50,50\n      m 0,-"+t+"\n      a "+t+","+t+" "+n+" 1 1 0,"+2*t+"\n      a "+t+","+t+" "+n+" 1 1 0,-"+2*t+"\n    "}function l(e){var t=e.counterClockwise,n=e.dashRatio,a=e.pathRadius,i=2*Math.PI*a,r=(1-n)*i;return{strokeDasharray:i+"px "+i+"px",strokeDashoffset:(t?-r:r)+"px"}}var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,n=e.minValue,a=e.maxValue;return(Math.min(Math.max(t,n),a)-n)/(a-n)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,n=e.className,i=e.classes,r=e.counterClockwise,s=e.styles,l=e.strokeWidth,c=e.text,u=this.getPathRadius(),d=this.getPathRatio();return Object(a.createElement)("svg",{className:i.root+" "+n,style:s.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?Object(a.createElement)("circle",{className:i.background,style:s.background,cx:50,cy:50,r:50}):null,Object(a.createElement)(o,{className:i.trail,counterClockwise:r,dashRatio:t,pathRadius:u,strokeWidth:l,style:s.trail}),Object(a.createElement)(o,{className:i.path,counterClockwise:r,dashRatio:d*t,pathRadius:u,strokeWidth:l,style:s.path}),c?Object(a.createElement)("text",{className:i.text,style:s.text,x:50,y:50},c):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(a.Component);function u(e){e.children;var t=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&(n[a[i]]=e[a[i]])}return n}(e,["children"]);return Object(a.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren"},Object(a.createElement)("div",{style:{position:"relative",width:"100%",height:"100%"}},Object(a.createElement)(c,r({},t)),e.children?Object(a.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren__children",style:{position:"absolute",width:"100%",height:"100%",marginTop:"-100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.children):null))}function d(e){var t=e.rotation,n=e.strokeLinecap,a=e.textColor,i=e.textSize,r=e.pathColor,o=e.pathTransition,s=e.pathTransitionDuration,l=e.trailColor,c=e.backgroundColor,u=null==t?void 0:"rotate("+t+"turn)",d=null==t?void 0:"center center";return{root:{},path:f({stroke:r,strokeLinecap:n,transform:u,transformOrigin:d,transition:o,transitionDuration:null==s?void 0:s+"s"}),trail:f({stroke:l,strokeLinecap:n,transform:u,transformOrigin:d}),text:f({fill:a,fontSize:i}),background:f({fill:c})}}function f(e){return Object.keys(e).forEach((function(t){null==e[t]&&delete e[t]})),e}},2456:function(e,t,n){},2457:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(18)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p={3:{type:"unavailable",icon:"unavailable",titleKey:"unavailable.title",subtitleKey:"unavailable.subtitle"},15:{type:"locked",icon:"locked",titleKey:"locked.title",subtitleKey:"locked.subtitle"},16:{type:"locked",icon:"locked",titleKey:"locked-by-path.title",subtitleKey:"locked-by-path.subtitle"}},h=p[3],m=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={config:p[e.error.code]||h},a}return(0,o.default)(n,[{key:"render",value:function(){var e=this.state.config;return u.default.createElement("div",{className:"unavailable"},u.default.createElement("div",{className:"unavailable--center"},u.default.createElement("div",{className:"unavailable__icon unavailable__icon--".concat(e.icon," unavailable__icon--").concat(e.type)}),u.default.createElement("div",{className:"unavailable__title unavailable__title--".concat(e.type)},d.default.translate(e.titleKey)),u.default.createElement("div",{className:"unavailable__subtitle unavailable__subtitle--".concat(e.type)},d.default.translate(e.subtitleKey))))}}]),n}(u.Component);m.defaultProps={error:{}};var v=m;t.default=v},2526:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(33)),s=i(n(34)),l=i(n(3)),c=i(n(4)),u=i(n(12)),d=i(n(6)),f=i(n(8)),p=i(n(7)),h=i(n(106)),m=a(n(0)),v=(i(n(2)),i(n(11))),g=i(n(154)),E=i(n(18)),y=i(n(13)),_=i(n(28)),S=i(n(53)),T=i(n(36)),b=n(74),I=i(n(943)),k=n(258),C=i(n(2213)),O=i(n(2192)),P=i(n(2395)),N=i(n(2290)),A=i(n(2876)),L=i(n(2877)),R=i(n(44));function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var x=_.default.Instance,U=S.default.LogManager,B=function(e){(0,d.default)(f,e);var t,n,a,i,r=D(f);function f(e){var t;return(0,l.default)(this,f),(t=r.call(this,e))._clickOnItem=t._clickOnItem.bind((0,u.default)(t)),t._showScore=t._showScore.bind((0,u.default)(t)),t.setUpdateCompletedTaskCountCallback=t.setUpdateCompletedTaskCountCallback.bind((0,u.default)(t)),t.openChannel=t.openChannel.bind((0,u.default)(t)),t.openLibrary=t.openLibrary.bind((0,u.default)(t)),t._setStage=t._setStage.bind((0,u.default)(t)),t.state={taskGroups:[],completedTasks:[],totalQuestions:0,successRate:null,successRateGroup:"",nextItems:[],showContactInstructorDialog:!1},t.isPC=y.default.isPC(),t}return(0,c.default)(f,[{key:"componentDidMount",value:(i=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.default.initApi();case 2:this._getAssignmentState(),this._loadTaskGroups();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){this.state.isDone&&t.isDone!==this.state.isDone&&this.props.onFooterUpdate()}},{key:"render",value:function(){var e=this.state,t=e.totalQuestions,n=e.completedTasks,a=e.successRate,i=this.props,r=i.isLastPageCompleted,o=i.isMustCompleteQuestions,s=0;n&&Object.keys(n)&&Object.keys(n).forEach((function(e){s+=n[e]}));var l=(0,v.default)("ci-player-footer",{"ci-player-footer--hidden":!r&&o});return m.default.createElement("div",{className:l},this._shouldShowScore()&&m.default.createElement("div",{className:"ci-player-footer-title"},null===a||0===t?E.default.translate("taskGroup.SCORE.ASSESSMENT_FOOTER_TITLE"):this._renderScore()),this._renderTasksStatus(s),null===a?m.default.createElement("div",{className:"ci-player-footer-button"},this.isPC?this._renderPcButton():m.default.createElement(T.default,{onClick:this._showScore,text:E.default.translate("common.dialog.buttons.done").toUpperCase(),theme:T.default.THEMES.LIGHT,type:T.default.TYPES.PRIMARY})):m.default.createElement("div",{className:"ci-player-footer-content"},this._renderButtons()))}},{key:"_renderPcButton",value:function(){var e=this,t=this.props,n=t.isLastPage,a=t.changePage,i=t.pages,r=t.isLastPageCompleted,o=t.isMustCompleteQuestions,s=t.isTaskGroupOverlayOpen?null:m.default.createElement("div",{className:(0,v.default)("last-page-done-wrapper","show-on-last-page")},m.default.createElement("div",{className:(0,v.default)("last-page-done-wrapper__next-button"),onClick:function(){return a(i.length)}},m.default.createElement(b.ArrowDownIcon,null))),l=m.default.createElement("div",{className:(0,v.default)("submit-ci-wrapper",{"show-on-last-page":n})},m.default.createElement(T.default,{onClick:n?function(){return e._showScore((function(){return a(i.length)}))}:this._showScore,theme:T.default.THEMES.LIGHT,type:T.default.TYPES.PRIMARY}),m.default.createElement("span",null,E.default.translate("common.dialog.buttons.done").toUpperCase()));return o?l:!r&&n?s:l}},{key:"_renderTasksStatus",value:function(e){var t=this.state,n=t.totalQuestions,a=t.successRate,i=(0,v.default)("ci-player-footer-text","margin-top-10",{"margin-bottom-0":null!==a});if(!n){var r=this.props.channelData.channelName;return m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:i},E.default.translate("taskGroup.SCORE.COMPLETED_ITEM",{channelName:r}),null!==a?m.default.createElement("div",null,m.default.createElement("hr",null)):null))}return i=(0,v.default)("ci-player-footer-text",{"margin-top-10":!a},{"margin-bottom-0":null!==a}),m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:i},E.default.translate("taskGroup.SCORE.ANSWERED_ON_1")," ",m.default.createElement("b",null,e)," ",E.default.translate("taskGroup.SCORE.ANSWERED_ON_2")," ",n," ",E.default.translate("taskGroup.SCORE.ANSWERED_ON_3")),null!==a?m.default.createElement("div",null,m.default.createElement("hr",null)):null)}},{key:"_renderScore",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.state,n=t.totalQuestions,a=t.successRate,i=t.successRateGroup;if(!n)return null;if(!e||void 0===a||"PENDING_SCORING"===i)return m.default.createElement(m.default.Fragment,null,E.default.translate("taskGroup.SCORE.REVIEW _1"),m.default.createElement("div",{className:"ci-player-footer-text margin-top-10"},E.default.translate("taskGroup.SCORE.REVIEW _2")));var r="";return i&&(r=i.toLowerCase()),m.default.createElement(m.default.Fragment,null,r?m.default.createElement("div",{className:"success-rate-icon success-rate-icon--".concat(r)}):null,E.default.translate("taskGroup.SCORE.SCORE_IS"),m.default.createElement("span",{className:"success-rate-value unit-value--".concat(r)},a>0?a:0,"%"))}},{key:"_clickOnItem",value:function(e){var t=this.props,n=t.channelId,a=t.communicator,i=t.channelData,r={clk:e.clk,channelId:n,contextItemId:i.contextItemId,contextItemType:i.contextItemType};a.send("setStage",{id:"echoPlayer",queryParams:r,options:{replace:!0}})}},{key:"_loadTaskGroups",value:function(){var e=this,t=this.props.pages,n=[],a=0,i=0;!function r(){if(i<t.length){var o=t[i],s=o.taskGroupModel;i++,s?function(t,i,r){I.default.getTaskGroupPlayerRef(e._getTaskGroupConfig(t,i,k.VIEW_MODE.QUIZ),(function(e,t){if(e)console.error(e);else{var i=t.getCheckableTaskCount();a+=i,i&&(n=(0,h.default)(n,t.getCompletedTasks())),r()}}))}(s,o.cid,r):r()}else e.setState({completedTasks:n,totalQuestions:a})}()}},{key:"_getTaskGroupConfig",value:function(e,t,n){var a=this.props,i=a.channelId,r=a.contentId,o=a.contentVersion,s=y.default.getUser();return{taskGroupIdentity:{taskGroupId:e.taskGroup.id,taskGroupVersion:e.taskGroup.version,taskGroupData:e},userStateOptions:{userId:s.id,channelId:i,isPersistent:!0},getEventsContext:function(e){e({providerId:"UCONTENT",data:{userId:s.id,id:t,contentItemId:r,contentItemVersion:o,channelId:i}})},channelId:i,viewMode:n}}},{key:"_renderButtons",value:function(){var e,t=this;if(null===(e=g.default.getStage().queryParams)||void 0===e?void 0:e.direct)return null;var n,a,i,r,o,s=this.state.nextItemsData;s&&(n=s.libraryItems,a=s.lockedByPath,i=s.pathSuccessThreshold,r=s.pathCompletionThreshold),!a&&n&&1===n.length&&(o=n[0]);var l=this.props,c=l.channelId,u=l.contentId,d=l.channelData,f=d.contextItemId,p=d.channelName,h=d.channelType;return[a?null:m.default.createElement("div",{className:"ci-player-footer-text"},n&&n.length?n&&n.length>1?[E.default.translate("taskGroup.SCORE.COMPLETED_ON_2"),m.default.createElement("br",null),E.default.translate("taskGroup.SCORE.COMPLETED_ON_2_2")]:E.default.translate("taskGroup.SCORE.COMPLETED_ON_2"):E.default.translate("taskGroup.SCORE.COMPLETED_ON_1").replace("$course_name",p)),n?[[a?[i?m.default.createElement("div",{className:"ci-player-footer-text"},E.default.translate("taskGroup.SCORE.minimumScore",{pathSuccessThreshold:i})):null,r?m.default.createElement("div",{className:"ci-player-footer-text"},E.default.translate("taskGroup.SCORE.minimumCompletion",{pathCompletionThreshold:r})):null]:null],[o?m.default.createElement(A.default,{item:o,onClick:function(){t._clickOnItem(o)}}):null],[o?null:m.default.createElement(P.default,{options:L.default},n.map((function(e){return m.default.createElement(N.default,{key:"".concat(c,"_").concat(u),libraryItem:w(w({},e),{},{channelId:c}),channelId:c,channelName:p,channelType:h,onHandleClick:function(){t._clickOnItem(e)},parentItemId:f,setStage:t._setStage,locale:y.default.getAppdata().appConf.locale})})))],m.default.createElement("div",{className:"ci-player-ci-item-buttons-wrapper"},m.default.createElement(T.default,{onClick:o?this.openChannel:this.openLibrary,text:o?E.default.translate("taskGroup.SCORE.CLOSE").toUpperCase():E.default.translate("taskGroup.SCORE.SEE_MORE").toUpperCase(),theme:T.default.THEMES.LIGHT,type:T.default.TYPES.SECONDARY}),o?m.default.createElement(T.default,{onClick:function(){t._clickOnItem(o)},text:E.default.translate("taskGroup.SCORE.NEXT_ITEM").toUpperCase(),theme:T.default.THEMES.LIGHT,type:T.default.TYPES.PRIMARY}):null)]:m.default.createElement(T.default,{onClick:this.openChannel,text:E.default.translate("taskGroup.SCORE.CLOSE").toUpperCase(),theme:T.default.THEMES.LIGHT,type:T.default.TYPES.PRIMARY})]}},{key:"_setCiIsDone",value:function(){this.isPC&&this.props.setCiIsDone()}},{key:"_shouldShowScore",value:function(){return!!this.props.pages.reduce((function(e,t){var n,a=null==t||null===(n=t.taskGroupModel)||void 0===n?void 0:n.tasks;return a?e+Object.keys(a).filter((function(e){return"NONE"!==a[e].data.checkingType})).length:e}),0)}},{key:"_showScore",value:(a=(0,s.default)(o.default.mark((function e(t){var n,a,i,r,s,l,c,u,d,f,p;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.channelId,i=n.contentId,r=n.contentVersion,s=n.communicator,l=y.default.getUser(),y.default.isCordovaOffline()&&R.default.goToOfflineHtml({workOffline:!0}),c={},!this._shouldShowScore()){e.next=14;break}return e.prev=5,e.next=8,x.get("".concat(O.default.GET_STUDENT_REPORTS_DATA),{},{params:{userId:l.id,channelId:a,ciId:i,ciVersion:r,ciType:"UCONTENT"}});case 8:c=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),U.error(e.t0);case 14:return d=(u=c).successRate,f=u.successRateGroup,e.next=17,this._getNextItems();case 17:p=e.sent,this.setState({isDone:!0,successRate:d,successRateGroup:f,nextItemsData:p}),s.send("ciSubmitted",{ciType:"UCONTENT",ciId:i,ciVersion:r}),this._setCiIsDone(),"function"==typeof t&&t();case 22:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(e){return a.apply(this,arguments)})},{key:"_getNextItems",value:(n=(0,s.default)(o.default.mark((function e(){var t,n,a,i,r,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.channelId,a=t.contentId,i=t.contentVersion,r=y.default.getUser(),s={},e.prev=3,e.next=6,x.get("".concat(O.default.GET_RECOMMENDATION_ITEMS),{},{params:{userId:r.id,channelId:n,contentItemId:a,ciVersion:i}});case 6:s=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),U.error(e.t0),e.abrupt("return",{libraryItems:[],lockedByPath:!1});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(){return n.apply(this,arguments)})},{key:"_getAssignmentState",value:(t=(0,s.default)(o.default.mark((function e(){var t,n,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.channelId,(a=t.assignmentId)&&y.default.isLearner()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,x.get("".concat(C.default.GET_ASSIGNMENT_STATE),{assignmentId:a},{params:{channelId:n}});case 6:"DONE"===e.sent.state&&(y.default.isCordovaOffline()?R.default.goToOfflineHtml({workOffline:!0}):this._showScore()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),U.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})},{key:"setUpdateCompletedTaskCountCallback",value:function(e){var t=e.taskId,n=this.state.completedTasks;n[t]=1,this.setState({isDone:!1,completedTasks:n,successRate:null})}},{key:"openChannel",value:function(){if(y.default.isCordovaOffline())R.default.goToOfflineHtml({workOffline:!0});else{var e=this.props,t=e.communicator,n=e.channelId,a=e.channelData;t.send("setStage",{id:"library",queryParams:{},hash:"channel/".concat(n,"/").concat(encodeURIComponent(a.channelName))})}}},{key:"openLibrary",value:function(){this.props.communicator.send("setStage",{id:"library"})}},{key:"_setStage",value:function(e,t,n){this.props.communicator.send("setStage",{id:e,queryParams:t,hash:n})}}]),f}(m.Component);B.defaultProps={channelId:null,contentId:null,contentVersion:null,pages:[],onFooterUpdate:function(){},assignmentId:null};var G=B;t.default=G},2811:function(e,t,n){var a=n(2812),i=n(2815)((function(e,t){return null==e?{}:a(e,t)}));e.exports=i},2812:function(e,t,n){var a=n(2813),i=n(238);e.exports=function(e,t){return a(e,t,(function(t,n){return i(e,n)}))}},2813:function(e,t,n){var a=n(516),i=n(2814),r=n(616);e.exports=function(e,t,n){for(var o=-1,s=t.length,l={};++o<s;){var c=t[o],u=a(e,c);n(u,c)&&i(l,r(c,e),u)}return l}},2814:function(e,t,n){var a=n(975),i=n(616),r=n(974),o=n(48),s=n(365);e.exports=function(e,t,n,l){if(!o(e))return e;for(var c=-1,u=(t=i(t,e)).length,d=u-1,f=e;null!=f&&++c<u;){var p=s(t[c]),h=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=d){var m=f[p];void 0===(h=l?l(m,p,f):void 0)&&(h=o(m)?m:r(t[c+1])?[]:{})}a(f,p,h),f=f[p]}return e}},2815:function(e,t,n){var a=n(157),i=n(1296),r=n(1297);e.exports=function(e){return r(i(e,void 0,a),e+"")}},2816:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(129)),s=a(n(21)),l=a(n(28)),c=a(n(53)),u=a(n(612)),d=a(n(2213)),f=n(2199),p=l.default.Instance,h=c.default.LogManager,m=[s.default.EVENT_TYPES.CI_LOADED,s.default.EVENT_TYPES.CI_TERMINATED,s.default.EVENT_TYPES.USER_ACTIVITY,s.default.EVENT_TYPES.EVENT_END],v=function(){function e(t,n,a){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};(0,i.default)(this,e),this._communicators=new Map,this._eventTypeToComm=new Map,this._hostChannel=t,this._onEvent=s,this.addCommunicator(t,window,window,o),this._eventTypes={},Object.keys(f.MESSAGE_TYPE).forEach((function(e){r._eventTypes[f.MESSAGE_TYPE[e]]=e})),this._initDispatcherManager(n,a)}return(0,r.default)(e,[{key:"addCommunicator",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,r={},s=function(e){return function(t,n,a){e.call(i,t,n,a)}};Object.keys(a).forEach((function(e){r[e]=s(a[e])})),Object.assign(r,{ready:this._ready,sendMessage:this.sendMessage,readyCallback:r.ready}),this._communicators.set(e,{communicator:new o.default(e,t,n,r,this),readyCallback:r.readyCallback||function(e,t,n){n({success:!0})}})}},{key:"getCommunicator",value:function(e){return this._communicators.get(e)?this._communicators.get(e).communicator:null}},{key:"destroyCommunicator",value:function(e){var t=this,n=this._communicators.get(e);n?(n.communicator.destroy(),this._communicators.delete(e),this._eventTypeToComm.forEach((function(n,a){t._eventTypeToComm.set(a,n.filter((function(t){return t!==e})))}))):h.warn("playanywhere",{message:"Communicator with channel ".concat(e," not found, cannot destroy")})}},{key:"sendTo",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getCommunicator(e);i?i.send(t,n,a):a(e,{error:"".concat(e," channel not found.")})}},{key:"_ready",value:function(e,t,n){var a=this,i=this._communicators.get(e);Object.assign(i,{listenTo:t.listenTo}),t.listenTo.forEach((function(t){var n=a._eventTypeToComm.get(t)||[];n.push(e),a._eventTypeToComm.set(t,n)})),i.readyCallback(e,t,n)}},{key:"sendMessage",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=this._eventTypeToComm.get(t.type);i&&i.forEach((function(a){a!==e&&n._communicators.get(a).communicator.send(n._eventTypes[t.type].toLowerCase(),t.messageData)})),this._onEvent(t.type,t.messageData);var r=this._eventTypes[t.type];if(-1!==m.indexOf(r)&&this._dispatchEvent(r,t.messageData),t.sendToServer){var o,s=t.sendToServer.method.toLowerCase();switch(s){case"get":o=[t.sendToServer.url,t.sendToServer.params,t.sendToServer.config];break;case"delete":s="remove",o=[t.sendToServer.url,t.sendToServer.params,t.sendToServer.config];break;case"put":case"post":o=[t.sendToServer.url,t.sendToServer.params,t.messageData,t.sendToServer.config];break;default:return h.warn("playanywhere",{message:"MessageRouter, send message to server - unsupported method sent: ".concat(s)}),void a()}p[s].apply(null,o).then((function(e){a({data:e})})).catch((function(e){a({error:e})}))}else a({})}},{key:"addDispatcher",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.DISPATCHER_TYPES.URL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.default.SEND_EVENTS,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._dispatcherManager.addDispatcher(e,t,n,a)}},{key:"_initDispatcherManager",value:function(e,t){this._dispatcherManager=new u.default(e,t,m)}},{key:"_dispatchEvent",value:function(e,t){this._dispatcherManager.addEventLog(e,t.eventData,!0,t.eventContext)}},{key:"destroy",value:function(){this._communicators.forEach((function(e){e.communicator.destroy()})),this._communicators=new Map,this._eventTypeToComm=new Map,this._dispatcherManager.destroy()}},{key:"clean",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=[];this._communicators.forEach((function(t,a){a!==e._hostChannel&&n.push(a)}));var a=0;n.length?n.forEach((function(i){e.sendTo(i,"destroy",null,(function(){a++,e.destroyCommunicator(i),a===n.length&&t()}))}),this):t()}}]),e}();t.default=v},2817:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(12)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(18))),h=i(n(328)),m=i(n(13)),v=i(n(53)),g=i(n(28)),E=i(n(21)),y=i(n(58)),_=i(n(41)),S=i(n(2213)),T=i(n(2384)),b=n(258),I=i(n(2818)),k=i(n(2840)),C=i(n(2841)),O=i(n(2842)),P=i(n(2846)),N=i(n(2847)),A=i(n(2853)),L=i(n(2885));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var D=g.default.Instance,x=v.default.LogManager,U="dbp",B="taskGroup",G="assessment",F="fuse",H="unified-ci",j=h.default.Provider,Y=function(e){(0,c.default)(n,e);var t=w(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._initState(e),a._initApi(),a._closeItem=a._closeItem.bind((0,s.default)(a)),a}return(0,l.default)(n,null,[{key:"_renderDialog",value:function(e,t){return"OnLockDialog"===e?f.default.createElement(C.default,t):"assignment-instructions"===e?f.default.createElement(y.default,t):null}},{key:"_setClassNameAccordingToPlayerType",value:function(e){var t=document.querySelector(".t2k-app");t&&t.classList.add(e)}},{key:"_removeClassNameAccordingToPlayerType",value:function(e){var t=document.querySelector(".t2k-app");t&&t.classList.remove(e)}},{key:"_getIframeAllowStr",value:function(){return m.default.isIos()&&m.default.isBrowserSafari()?"microphone; camera; usermedia; autoplay;":"microphone *; camera *; usermedia *; autoplay *;"}}]),(0,l.default)(n,[{key:"componentDidMount",value:function(){n._setClassNameAccordingToPlayerType(this.props.player.playerType),this._addCommunicator(),this._setPlayer();var e=document.querySelector("meta[name=viewport]");e.setAttribute("content",e.getAttribute("content").replace(",user-scalable=no",""))}},{key:"componentWillUnmount",value:function(){n._removeClassNameAccordingToPlayerType(this.props.player.playerType);var e=document.querySelector("meta[name=viewport]");e.setAttribute("content","".concat(e.getAttribute("content"),",user-scalable=no"))}},{key:"render",value:function(){var e=this.state.notice.isVisible?f.default.createElement(k.default,{text:this.state.notice.text}):"",t=this.state.dialog&&n._renderDialog(this.state.dialog.component,this.state.dialog.props),a=this.props.showCustomBackButton?f.default.createElement(L.default,{onClick:this.props.showCustomBackButtonCb}):"";return f.default.createElement("div",{className:"engage__container ".concat(this.props.className)},t,f.default.createElement(j,null,f.default.createElement("div",{id:"tools",className:"tools"},f.default.createElement(I.default,{toolbar:this.props.toolbar,messageRouter:this.props.messageRouter,engageApi:this._engageApi,locale:this.props.locale,token:this.props.token,clk:this.props.clk,channelId:this.props.channelId,channelName:this.props.channelData.channelName,contentItemId:this.props.contentItemId,quickNavigationInfo:this.props.quickNavigationInfo,setLoader:this._engageApi.setLoader}))),f.default.createElement("div",{id:"player-container",className:"player-container"}),e,a,this._renderTimer(),this._renderOverlayTaskGroup())}},{key:"_initState",value:function(){this.state={notice:{isVisible:!1,text:""},dialog:null,overlayTaskGroupProps:{}}}},{key:"_initApi",value:function(){this._engageApi=M(M({},this.props.engageApi),{},{notice:this._notice.bind(this),dialog:this._dialog.bind(this),setPlayerReadyCallback:this._setPlayerReadyCallback.bind(this)})}},{key:"_addCommunicator",value:function(){var e=this;this.props.messageRouter.addCommunicator("playerChannel",window,window,{ready:this._onPlayerReady.bind(this),addToolbarAuxiliary:function(t,n,a){e.props.addToolbar("auxiliary",n,a)},updateCustomElement:function(t,n){e.props.updateCustomElement(n)},pushTo:function(t,n){e.props.messageRouter.sendTo("echoPlayer","serverPush",n)},ciSubmitted:function(t,n,a){var i=e.props,r=i.assignmentId,o=i.player;m.default.isLearner()&&r&&(o.playerType===G||o.playerType===H)&&e._markAssignmentAsDone(a)},setStage:function(t,n,a){e._engageApi.setStage(t,n,a)},setNav:function(t,n,a){e._engageApi.setNav(t,n,a)},goBack:function(t,n,a){e._engageApi.goBack(),a()}},this)}},{key:"_setPlayer",value:function(){var e=this._getPlayer();try{this._player=new e("playerChannel",{player:M(M({},this.props.player),{},{targetId:"player-container"}),content:this.props.content,locale:this.props.locale,user:m.default.getUser(),token:this.props.token,customHeaders:this.props.customHeaders,contextItemId:this.props.contextItemId,contextItemType:this.props.contextItemType,channelId:this.props.channelId,channelData:this.props.channelData,xapiContext:this.props.xapiContext,clk:this.props.clk,hash:this.props.hash,remainingTimeInSeconds:this.props.remainingTimeInSeconds,isScheduledAssessmentCompleted:this.props.isScheduledAssessmentCompleted,enableAssessmentTryAgain:this.props.enableAssessmentTryAgain,toggleInteractionVisibility:this.toggleInteractionVisibility.bind(this),assignmentId:this.props.assignmentId})}catch(n){var t=n&&n.message?n.message:JSON.stringify(n);x.error("playanywhere",{message:"player ".concat(this.props.player.playerType," init failed: ").concat(t)})}this._showLockNotification(m.default.getIsLocked()),this._initAssignmentToolbarButtons()}},{key:"_initAssignmentToolbarButtons",value:function(){var e=this;if(this.props.assignmentId){var t=this.props,n=t.assignmentId,a=t.channelId;m.default.isInstructor()?D.get(S.default.GET_ASSIGNMENT,{assignmentId:n},{params:{channelId:a}}).then((function(t){e._assignment=t,t.instructions&&t.instructions.length>0&&e.props.addToolbar("secondary",e._getAssignmentInstructionsToolbarButtonConfig())})).catch((function(e){var t=e&&e.message?e.message:JSON.stringify(e);x.error("playanywhere",new Error("Failed to fetch assignment ".concat(n,": ").concat(t)))})):m.default.isLearner()&&D.get(S.default.GET_ASSIGNMENT_STATE,{assignmentId:n},{params:{channelId:a}}).then((function(t){e._assignment=t;var n=t.instructions&&t.instructions.length>0;n&&e.props.addToolbar("secondary",e._getAssignmentInstructionsToolbarButtonConfig()),e.props.player.playerType!==G&&e.props.player.playerType!==H&&e.props.addToolbar("secondary",e._getAssignmentDoneToolbarButtonConfig("DONE"===t.state)),"NEW"===t.state&&(n?e._showAssignmentInstructionsDialog(e._updateAssignmentState.bind(e,"OPEN")):e._updateAssignmentState("OPEN"))})).catch((function(e){var t=e&&e.message?e.message:JSON.stringify(e);x.error("playanywhere",new Error("Failed to fetch assignment state ".concat(n,": ").concat(t)))}))}}},{key:"_getAssignmentInstructionsToolbarButtonConfig",value:function(){var e=this;return{type:E.default.TOOLBAR_ELEMENT_TYPE.ICON,config:{first:!0,iconName:"instructions",id:"assignment-instructions",isClickable:!0,title:p.default.translate("assignment.toolbar-buttons.instructions.tooltip"),label:p.default.translate("assignment.toolbar-buttons.instructions.label"),callback:function(){e._showAssignmentInstructionsDialog()},mixPanel:{params:(0,r.default)({},_.default.PARAMS.TYPE,_.default.TOOLBAR_ELEMENTS.ASSIGNMENT_INSTRUCTION)}}}}},{key:"_showAssignmentInstructionsDialog",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.setState({dialog:{component:"assignment-instructions",props:{title:p.default.translate("assignment.instructions-dialog.title"),content:f.default.createElement("div",{className:"assignment-instructions-dialog__content"},this._assignment.instructions),close:function(){e.setState({dialog:null},t)},theme:y.default.THEMES.LIGHT,styleClass:"assignment-instructions-dialog"}}})}},{key:"_getAssignmentDoneToolbarButtonConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:E.default.TOOLBAR_ELEMENT_TYPE.BUTTON,config:{first:!0,id:"assignment-done",iconName:"correct",type:"primary",isDisabled:e,isClickable:!0,title:e?null:p.default.translate("assignment.toolbar-buttons.mark-done.tooltip"),label:e?p.default.translate("assignment.toolbar-buttons.done.label"):p.default.translate("assignment.toolbar-buttons.mark-done.label"),callback:e?null:this._markAssignmentAsDone.bind(this,this._updateAssignmentDoneButton.bind(this)),mixPanel:{params:(0,r.default)({},_.default.PARAMS.TYPE,_.default.TOOLBAR_ELEMENTS.ASSIGNMENT_DONE)}}}}},{key:"_markAssignmentAsDone",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._updateAssignmentState("DONE",(function(){e._player.dispatchCIEvent&&e._player.dispatchCIEvent("EVENT_END","ASSIGNMENT"),t()}))}},{key:"_updateAssignmentState",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=this.props,i=a.assignmentId,r=a.channelId,o={assignmentId:i,channelId:r,state:e,serverVersion:this._assignment.serverVersion};D.put(S.default.UPDATE_ASSIGNMENT_STATE,{},o,{}).then((function(a){t._assignment.state=e,t._assignment.serverVersion=a.serverVersion,n()})).catch((function(e){var t=e&&e.data&&e.data.message?e.data.message:JSON.stringify(e);x.error("playanywhere",{message:"Failed to update assignment state: ".concat(t)})}))}},{key:"_updateAssignmentDoneButton",value:function(){this.props.updateToolbar("secondary",this._getAssignmentDoneToolbarButtonConfig(!0))}},{key:"_dialog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState({dialog:t.dialog})}},{key:"_notice",value:function(e,t){this.setState({notice:{isVisible:t.isVisible,text:t.text||""}})}},{key:"_showLockNotification",value:function(e){this.setState({notice:{isVisible:e,text:e?p.default.translate("common.lock-lesson"):""}})}},{key:"toggleFuseExitDialog",value:function(e){this._player.toggleFuseExitDialog&&this._player.toggleFuseExitDialog(e)}},{key:"_setPlayerReadyCallback",value:function(e){this._playerReadyCallback=e,this._playerCallback&&(this._playerReadyCallback(this._playerCallback),this.props.onPlayerReady())}},{key:"_getPlayer",value:function(){var e;switch(this.props.player.playerType){case U:e=O.default;break;case B:case G:e=P.default;break;case F:e=N.default;break;case H:e=A.default}return e}},{key:"_onPlayerReady",value:function(e,t,n){this._playerReadyCallback?(this._playerReadyCallback(n),this.props.onPlayerReady()):this._playerCallback=n}},{key:"_renderTimer",value:function(){var e=this.props,t=e.player,n=e.remainingTimeInSeconds;if(e.isAssessment||!t||t.playerType===G||t.playerType===B)return null;if("number"!=typeof n)return null;var a=m.default.getAppdata().appConf,i=a&&a.scheduleCi&&a.scheduleCi.timer?60*a.scheduleCi.timer.minutesToStartDisplay:null;return f.default.createElement(T.default,{secondsToRun:n,onTimerEnd:this._closeItem,startToDisplayInSeconds:i,displayMessageTop:p.default.translate("schedule-ci.time-finished-message")})}},{key:"_closeItem",value:function(){this.props.goBack()}},{key:"_renderOverlayTaskGroup",value:function(){var e=this.state.overlayTaskGroupProps;return e.taskGroupId?f.default.createElement(b.OverlayTaskGroup,e):null}},{key:"toggleInteractionVisibility",value:function(e){this.setState({overlayTaskGroupProps:e})}}]),n}(f.Component);Y.defaultProps={channelData:{channelName:""},engageApi:{},onPlayerReady:function(){},addToolbar:function(){},updateToolbar:function(){},updateCustomElement:function(){},contextItemType:"",className:"",remainingTimeInSeconds:null,enableAssessmentTryAgain:!1,quickNavigationInfo:void 0,isAssessment:!1};var V=Y;t.default=V},2818:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(4)),l=i(n(12)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(13))),h=i(n(53)),m=i(n(328)),v=i(n(18)),g=i(n(2819)),E=n(2199),y=i(n(2820)),_=i(n(2821)),S=i(n(2822)),T=i(n(2823)),b=i(n(2824)),I=i(n(2825)),k=i(n(2830)),C=i(n(2839));function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var A=h.default.LogManager,L=m.default.Hoc,R=m.default.Action,M=m.default.LEVEL,w=m.default.POSITION,D=function(e){(0,c.default)(n,e);var t=N(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._closeTool=a._closeTool.bind((0,l.default)(a)),a.showNotification=a.showNotification.bind((0,l.default)(a)),a.rtl=p.default.isRtl(p.default.getAppdata().appConf.locale),a._messageRouter=e.messageRouter,a._toolButtonChannelMap=new Map,a._toolsIndex=new Map,a._buttonContainerMap=new Map,a._tools={},a._callbacks=[],a._buttons=[],a.state={containers:[]},a._containers=[],a._toolToClass=new Map([["reports",_.default],["qna",y.default],["whatsapp",S.default],["lock",T.default],["ciResultsLock",b.default],["downloader",I.default],["quickNavigation",k.default],["quickNavigation-prev",C.default],["quickNavigation-next",C.default]]),a._extraReadyCallback=0,a}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e={showNotification:this.showNotification};this._initTools(this.props.toolbar.tools,this.props.engageApi,e),this.props.engageApi&&this.props.engageApi.setPlayerReadyCallback&&(this.props.engageApi.setPlayerReadyCallback(this._checkAllReady.bind(this)),this._extraReadyCallback++)}},{key:"render",value:function(){var e=this;return f.default.createElement("div",{className:"tools__wrapper"},f.default.createElement(g.default,{containers:this.state.containers,onClose:function(t){e._closeTool(void 0,t)}}))}},{key:"_initTools",value:function(e,t,n){var a=this,i=[];e.forEach((function(e,r){if(e.config.isActive){i.push(e);var o="".concat(e.id,"ToolChannel");e.toolChannel=o,e.config.locale=a.props.locale,e.config.id=e.id,e.config.user=p.default.getUser(),e.config.token=a.props.token,e.config.clk=a.props.clk,e.config.channelId=a.props.channelId,e.config.channelName=a.props.channelName,e.config.contentItemId=a.props.contentItemId,e.config.quickNavigationInfo=a.props.quickNavigationInfo,e.config.notification={addNotification:n.showNotification},e.config.appData=p.default.getAppdata(),e.config.demo=p.default.getAppdata().appConf.featureFlags.demo,e.actions={setLoader:a.props.setLoader},a._messageRouter.addCommunicator(o,window,window,Object.assign({ready:a._ready,setIndicator:a._setIndicator,setButton:a._setButton,setToolbar:a._setToolbar,closeTool:a._closeTool,pushTo:function(e,t,n){a.props.messageRouter.sendTo("echoPlayer","serverPush",t,(function(e,t){return n(t)}))}},t),a),a._toolsIndex.set(o,r)}})),i.forEach((function(e){var t=a._toolToClass.get(e.id);try{a._tools[e.id]=new t(e.toolChannel,e.config,e.actions)}catch(n){A.error("playanywhere",{message:"Tool ".concat(e.id," init failed: ").concat(n.message)})}}))}},{key:"_ready",value:function(e,t,n){var a=this,i=[];t.modules?(t.modules.forEach((function(t){a._toolButtonChannelMap.set(t.button.id,e),a._buttonContainerMap.set(t.button.id,t.container),a._buttons.push(t.button),t.container.type!==E.CONTAINER_TYPE.NONE&&i.push(Object.assign(t.container,{isActive:!1}))})),this._buttons.sort((function(e,t){var n=a._toolButtonChannelMap.get(e.id),i=a._toolsIndex.get(n),r=a._toolButtonChannelMap.get(t.id);return i-a._toolsIndex.get(r)})),this._containers=this._containers.concat(i),this.setState({containers:this._containers},(function(){a._checkAllReady(n)}))):this._checkAllReady(n)}},{key:"_checkAllReady",value:function(e){this._callbacks.push(e),Object.keys(this._tools).length+this._extraReadyCallback===this._callbacks.length&&(this._buttons.length?this._messageRouter.sendMessage(null,{type:E.MESSAGE_TYPE.TOOL_BUTTONS,messageData:{buttons:this._buttons,callback:this._onButtonClick.bind(this)}},this._returnAllCallbacks.bind(this)):this._returnAllCallbacks())}},{key:"_returnAllCallbacks",value:function(){this._callbacks.forEach((function(e){e({success:!0})}))}},{key:"_onButtonClick",value:function(e){var t,n,a=this,i=e.id,r=[],o=[],s=this._buttons.find((function(e){return e.id===i}));this._buttons=this._buttons.map((function(e){return n=a._buttonContainerMap.get(e.id),e.id===i?(e.isActive=!e.dontActive&&!e.isActive,delete e.indicator,n.isActive=!n.isActive,n.buttonOffsets={height:0,width:0,right:0,left:0,top:0,bottom:0}):s.takeover&&!e.ignoreTakeover&&(e.isActive=!1,n.isActive=!1,t=a._toolButtonChannelMap.get(e.id),-1===o.indexOf(t)&&(a._messageRouter.sendTo(t,"close"),o.push(t))),n.type!==E.CONTAINER_TYPE.NONE&&r.push(n),e})),this._messageRouter.sendMessage(null,{type:E.MESSAGE_TYPE.TOOL_BUTTONS,messageData:{buttons:this._buttons}},(function(){a.setState({containers:r},(function(){t=a._toolButtonChannelMap.get(i),a._messageRouter.sendTo(t,"buttonClicked",{buttonId:i,isActive:s.isActive})}))}))}},{key:"_setIndicator",value:function(e,t,n){this._buttons=this._buttons.map((function(e){return e.id===t.id&&(e.indicator=t.indicator),e})),this._messageRouter.sendMessage(null,{type:E.MESSAGE_TYPE.TOOL_BUTTONS,messageData:{buttons:this._buttons}},n)}},{key:"_setButton",value:function(e,t,n){this._buttons=this._buttons.map((function(e){return e.id===t.id&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e})),this._messageRouter.sendMessage(null,{type:E.MESSAGE_TYPE.TOOL_BUTTONS,messageData:{buttons:this._buttons}},n)}},{key:"_setToolbar",value:function(e,t,n){this._messageRouter.sendMessage(null,{type:E.MESSAGE_TYPE.CONTROL_TOOLBAR,messageData:P({},t)},n)}},{key:"_closeTool",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=t&&t.id;if(a){var i=this._buttons.find((function(e){return e.id===a})).isActive;i&&this._onButtonClick(t)}else{var r=this._buttons.find((function(e){return e.isActive}));r&&this._onButtonClick(r)}n()}},{key:"showNotification",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SUCCESS",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,a=this.props,i=a.addNotification,r=a.removeNotification,o=this.rtl?"BOTTOM_LEFT":"BOTTOM_RIGHT",s=i({message:e,level:M[t],position:w[o],autoDismiss:n,notificationEmbeddedComponents:[f.default.createElement(R,{"data-unittest-id":"notification-ok-btn",key:"notification-ok",onClick:function(){return r(s)}},v.default.translate("notification.ok_btn"))]})}}]),n}(f.Component);var x=L((function(e){return{addNotification:e.add,removeNotification:e.remove}}));D.defaultProps={engageApi:{},toolbar:{tools:[]},quickNavigationInfo:void 0};var U=x(D);t.default=U},2819:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),n(2199));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).activeMask=null,a.wrapper=null,a.wrappedContainer=null,a.wrapperClass="",a}return(0,o.default)(n,[{key:"_wrapQna",value:function(e){var t=this;return e.isActive&&(this.activeMask="mask mask--active"),u.default.createElement("div",{id:e.id,className:"module-container__wrapper",ref:function(e){t.wrappedContainer=e}})}},{key:"_wrapQuickNavigation",value:function(e){var t,n=this,a="";return e.isActive?(this.activeMask="mask mask--active",(this.wrappedContainer&&!this.wrappedContainer.children.length||!this.wrappedContainer)&&(a=this._openAnimation(),this.wrapperClass+=" animating")):this.wrappedContainer&&this.wrappedContainer.children.length&&(this.activeMask="",t={height:this.wrappedContainer.getBoundingClientRect().height},a=this._closeAnimation(t),this.wrapperClass+=" animating"),u.default.createElement("div",{id:e.id,className:"module-container__wrapper ".concat(a),ref:function(e){n.wrappedContainer=e},style:t})}},{key:"_wrapContainer",value:function(e){var t=this,n=null;this.wrapperClass=e.isActive?"module-container--active":"module-container--not-active";var a=e.type===d.CONTAINER_TYPE.FILL?"module-container--fill":"";return n="qna-module"===e.id?this._wrapQna(e):"quick-navigation-container"===e.id?this._wrapQuickNavigation(e):u.default.createElement("div",{id:e.id,className:"module-container__wrapper"}),u.default.createElement("div",{key:e.id,className:"module-container ".concat(this.wrapperClass," ").concat(a),ref:function(e){t.wrapper=e}},n)}},{key:"_openAnimation",value:function(){return this._clearAnimation(2e3,"open-animation"),"open-animation"}},{key:"_closeAnimation",value:function(e){return this.wrappedContainer.height=e.height,this.wrappedContainer.children[0].style.overflowY="hidden",this._buildStepAnimation({delay:100,style:{transitionDuration:"100ms",height:"".concat(e.height+50,"px"),maxHeight:"".concat(130,"vh")}}),this._buildStepAnimation({delay:200,style:{transitionDuration:"700ms",height:"0px",maxHeight:"".concat(80,"vh")}}),this._clearAnimation(900,"close-animation"),"close-animation"}},{key:"_clearAnimation",value:function(e,t){var n=this;setTimeout((function(){n.wrappedContainer.removeAttribute("style"),n.wrapper.classList.remove("animating"),n.wrappedContainer.classList.remove(t)}),e)}},{key:"_buildStepAnimation",value:function(e){var t=this,n=e.style;setTimeout((function(){Object.keys(n).forEach((function(n){t.wrappedContainer.style[n]=e.style[n]}))}),e.delay)}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{id:"modules-container"},this.props.containers.map((function(t){return e._wrapContainer(t)})),u.default.createElement("div",{id:"mask",className:"".concat(this.activeMask),onClick:this.props.onClose}))}}]),n}(u.Component);p.defaultProps={containers:[]};var h=p;t.default=h},2820:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(129)),l=a(n(18)),c=a(n(21)),u=a(n(13)),d=a(n(53)),f=n(2199);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=d.default.LogManager,v=function(){function e(t,n){(0,r.default)(this,e),this.communicator=new s.default(t,window,window,{buttonClicked:function(e,t,n){return n()},lesson_metadata:this.receiveLessonMetadata,move:this.onPageMove,destroy:this._destroy},this),this.channelId=n.channelId,this.initModules()}return(0,o.default)(e,[{key:"initModules",value:function(){var e=u.default.isMobile()?f.CONTAINER_TYPE.FILL:f.CONTAINER_TYPE.PARTIAL;this.buttonConfig={listenTo:[f.MESSAGE_TYPE.LESSON_METADATA,f.MESSAGE_TYPE.MOVE],modules:[].concat(u.default.isCordovaOffline()?[]:[{button:{id:"collaboration",type:c.default.TOOLBAR_ELEMENT_TYPE.DISCUSSIONS,takeover:!0,title:u.default.isMobile()?l.default.translate("qna.title"):""},container:{id:"qna-module",type:e}}])},this.communicator.send("ready",this.buttonConfig,(function(e,t){t&&t.success||m.error("playanywhere",{message:"Q&A Tool: Parent did not return success"})})),this.elId="qna-module"}},{key:"receiveLessonMetadata",value:function(e,t,n){var a={};a.channelId=this.channelId,a.numberOfPages=t.pages?t.pages.length:0,a.libraryItemId=t.ciId,a.libraryItemType=t.ciType;var i=null;t.ciType===c.default.CI_TYPE.LESSON?i=Array.from(t.pages,(function(e){return e.id})):t.ciType===c.default.CI_TYPE.UCONTENT&&(i=Array.from(t.pages,(function(e){return e.cid}))),a.pagesIds=i,this.buttonConfig.metadata=a,this.communicator.send("setButton",h(h({},this.buttonConfig),{},{id:"collaboration"}),n)}},{key:"onPageMove",value:function(e,t,n){var a=h({},this.buttonConfig.metadata);a.pageId=t.pageId,a.pageNumber=t.pageNumber,this.communicator.send("setButton",{metadata:h({},a),id:"collaboration"},n)}},{key:"_destroy",value:function(e,t,n){this.communicator.destroy(),n()}}]),e}();t.default=v},2821:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(18)),l=a(n(129)),c=a(n(13)),u=a(n(53)),d=a(n(41)),f=n(2199),p=u.default.LogManager,h=function(){function e(t,n){(0,r.default)(this,e),this._communicator=new l.default(t,window,window,{buttonClicked:this._onClick,lesson_metadata:this._receiveLessonMetadata,register_tool_interceptor:this._receiveToolInterceptor,destroy:this._destroy,close:function(e,t,n){n()}},this),this._channelId=n.channelId,this._clk=n.clk,this._title=n.title,this._initModules(),this._openReportsStage=this._openReportsStage.bind(this)}return(0,o.default)(e,[{key:"_initModules",value:function(){this._communicator.send("ready",{listenTo:[f.MESSAGE_TYPE.REGISTER_TOOL_INTERCEPTOR,f.MESSAGE_TYPE.LESSON_METADATA],modules:[{button:{id:"reports-button",title:s.default.translate("common.reports"),iconClass:"toolbar-button__icon--report",takeover:!0},container:{type:f.CONTAINER_TYPE.NONE}}]},(function(e,t){console.info("buttons ReportsTool ready"),t&&t.success||p.error("playanywhere",{message:"ReportsTool: Parent did not return success"})}))}},{key:"_onClick",value:function(e,t,n){d.default.sendEvent(d.default.TITLES.CLICK_ICON_TOOLBAR,d.default.COMPONENTS.TOOLBAR,(0,i.default)({},d.default.PARAMS.TYPE,d.default.TOOLBAR_ELEMENTS.REPORTS)),n(),this._reportsToolInterceptor?this._reportsToolInterceptor(this._openReportsStage):this._openReportsStage()}},{key:"_openReportsStage",value:function(){this._communicator.send("setStage",{id:"reports",queryParams:{ciId:this._ciId,channelId:this._channelId}})}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),n()}},{key:"_receiveLessonMetadata",value:function(e,t,n){this._taskGroupIds=c.default.getContentIdsString(t.taskGroups),this._ciId=t.ciId,this._ciVersion=t.ciVersion,this._ciType=t.ciType,this._interactions=t.interactions,this._title=this._title||t.name,n()}},{key:"_receiveToolInterceptor",value:function(e,t,n){"reports"===t.toolId&&(this._reportsToolInterceptor=t.interceptor),n()}}]),e}();t.default=h},2822:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(18)),l=a(n(129)),c=a(n(13)),u=a(n(53)),d=a(n(41)),f=n(2199),p=u.default.LogManager,h=function(){function e(t){var n=this;(0,r.default)(this,e);var a=c.default.getAppdata().siteDetails.domain,i="".concat(window.location.origin,"/?site=").concat(a,"#/$/").concat(window.location.href.substr(window.location.href.lastIndexOf("echoPlayer")));this._whatsAppShare=encodeURIComponent(i),c.default.generateShortUrl(i).then((function(e){n._whatsAppShare=encodeURIComponent(e)})),this._communicator=new l.default(t,window,window,{buttonClicked:this._onClick,close:e._close,destroy:this._destroy,lesson_metadata:this._receiveLessonMetadata},this);var o=[{button:{id:"whatsapp-button",title:s.default.translate("whatsapp.tool.title"),iconClass:"toolbar-button__icon--whatsapp",takeover:!1},container:{type:f.CONTAINER_TYPE.NONE}}];this._communicator.send("ready",{listenTo:[f.MESSAGE_TYPE.LESSON_METADATA],modules:o},(function(e,t){t&&t.success||p.error("playanywhere",{message:"WhatsAppTool: Parent did not return success"})}))}return(0,o.default)(e,null,[{key:"_close",value:function(e,t,n){n()}},{key:"_setHref",value:function(e){window.location.href=e}}]),(0,o.default)(e,[{key:"_receiveLessonMetadata",value:function(e,t,n){this._title=encodeURIComponent(t.name),this.ciType=encodeURIComponent(t.ciType),n()}},{key:"_onClick",value:function(t,n,a){var r;d.default.sendEvent(d.default.TITLES.CLICK_ICON_TOOLBAR,d.default.COMPONENTS.TOOLBAR,(r={},(0,i.default)(r,d.default.PARAMS.TYPE,d.default.TOOLBAR_ELEMENTS.WHATSAPP_SHARE),(0,i.default)(r,d.default.PARAMS.LIBRARY_ITEM_TYPE,d.default.LIBRARY_ITEM_TYPES[this.ciType]),r));var o="".concat(encodeURIComponent(s.default.translate("whatsapp.tool.message.title")),"%20%0A%20 *_").concat(this._title,"_* -  ").concat(this._whatsAppShare),l=c.default.getWhatsappLink(o);e._setHref(l),a()}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),n()}}]),e}();t.default=h},2823:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(18)),l=a(n(129)),c=a(n(13)),u=a(n(53)),d=a(n(28)),f=a(n(41)),p=a(n(2213)),h=n(2199),m=u.default.LogManager,v=d.default.Instance,g=function(){function e(t,n){(0,r.default)(this,e),this._isLocked=c.default.getIsLocked(),this._title=encodeURIComponent(n.title),this._channelId=n.channelId,this._clk=n.clk,this._contentItemId=n.contentItemId,this.onClose=this.onClose.bind(this),this._communicator=new l.default(t,window,window,{buttonClicked:this._onClick,close:e._close,lesson_metadata:this._receiveLessonMetadata,destroy:this._destroy},this);var a=[{button:{id:"CIlock-button",title:s.default.translate("".concat(this._isLocked?"un":"","lock.tool.title")),iconName:"CI".concat(this._isLocked?"":"un","lock-button"),dontActive:!0},container:{type:h.CONTAINER_TYPE.NONE}}];this._communicator.send("ready",{listenTo:[h.MESSAGE_TYPE.LESSON_METADATA],modules:a},(function(e,t){t&&t.success||m.error("playanywhere",{message:"LockTool: Parent did not return success"})}))}return(0,o.default)(e,null,[{key:"_close",value:function(e,t,n){n()}}]),(0,o.default)(e,[{key:"_receiveLessonMetadata",value:function(e,t,n){this._libraryItemId=t.ciId,this._libraryItemType=t.ciType,n()}},{key:"_renderModal",value:function(){this._communicator.send("dialog",{dialog:{component:"OnLockDialog",props:{show:!0,onClose:this.onClose,isLocked:this._isLocked}}})}},{key:"onClose",value:function(e){var t=this;this._hideDialog(),e&&(this._isLocked=!this._isLocked,this._isLocked?v.post(p.default.SET_CI_LOCK,{},{contentId:this._contentItemId,channelId:this._channelId}).then((function(){t._handleLockSuccess(t._isLocked)})).catch((function(e){m.error("echo",{message:"Failed to update content item lock status: ".concat(JSON.stringify(e))})})):v.remove(p.default.SET_CI_UNLOCK,{},{params:{contentId:this._contentItemId,channelId:this._channelId}}).then((function(){t._handleLockSuccess(t._isLocked)})).catch((function(e){m.error("echo",{message:"Failed to update content item lock status: ".concat(JSON.stringify(e))})})))}},{key:"_handleLockSuccess",value:function(e){c.default.setIsLocked(e),this._communicator.send("setButton",{id:"CIlock-button",title:s.default.translate("".concat(e?"un":"","lock.tool.title")),iconName:"CI".concat(e?"":"un","lock-button")},this._showLockNotification.bind(this,e))}},{key:"_hideDialog",value:function(){this._communicator.send("dialog",{dialog:{component:null,props:null}})}},{key:"_showLockNotification",value:function(e){this._communicator.send("notice",{isVisible:e,text:e?s.default.translate("common.lock-lesson"):""})}},{key:"_onClick",value:function(e,t,n){f.default.sendEvent(f.default.TITLES.CLICK_ICON_TOOLBAR,f.default.COMPONENTS.TOOLBAR,(0,i.default)({},f.default.PARAMS.TYPE,this._isLocked?f.default.TOOLBAR_ELEMENTS.UNLOCK:f.default.TOOLBAR_ELEMENTS.LOCK)),this._isLocked?this.onClose(!0):this._renderModal(),n()}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),n()}}]),e}();t.default=g},2824:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(18)),l=a(n(13)),c=a(n(129)),u=a(n(53)),d=a(n(28)),f=a(n(21)),p=a(n(41)),h=a(n(2213)),m=n(2199);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=u.default.LogManager,y=d.default.Instance,_=function(){function e(t,n){(0,r.default)(this,e),this._isLocked=l.default.getIsReportLocked(),this._accountId=n.appData.accountDetails.id,this._channelId=n.channelId,this._communicator=new c.default(t,window,window,{buttonClicked:this._onClick,close:e._close,lesson_metadata:this._receiveLessonMetadata,destroy:this._destroy},this);var a=[{button:g({},e._getLockButton(this._isLocked)),container:{type:m.CONTAINER_TYPE.NONE}}];this._communicator.send("ready",{listenTo:[m.MESSAGE_TYPE.LESSON_METADATA],modules:a},(function(e,t){t&&t.success||E.error("playanywhere",{message:"CiResultsLockTool: Parent did not return success"})}))}return(0,o.default)(e,null,[{key:"_close",value:function(e,t,n){n()}},{key:"_getLockButton",value:function(e){return{type:f.default.TOOLBAR_ELEMENT_TYPE.BUTTON,id:"publish-grades",iconName:e?"unpublish-grades":"publish-grades",dontActive:!0,isClickable:!0,hasStateOn:!e,iconSize:"large",title:e?s.default.translate("assessment.toolbar-buttons.un-publish-grades.tooltip"):s.default.translate("assessment.toolbar-buttons.publish-grades.tooltip"),label:s.default.translate("assessment.toolbar-buttons.publish-grades.label")}}}]),(0,o.default)(e,[{key:"_receiveLessonMetadata",value:function(e,t,n){this._libraryItemId=t.ciId,this._libraryItemType=t.ciType,n()}},{key:"switchLocker",value:function(){var e=this;this._isLocked=!this._isLocked,p.default.sendEvent(p.default.TITLES.CLICK_ICON_TOOLBAR,p.default.COMPONENTS.TOOLBAR,(0,i.default)({},p.default.PARAMS.TYPE,(this._isLocked,p.default.TOOLBAR_ELEMENTS.UNLOCK))),this._isLocked?y.post(h.default.SET_CI_RESULTS_LOCK,{},{accountId:this._accountId,channelId:this._channelId,contentId:this._libraryItemId}).then((function(){e._setButton(e._isLocked)})).catch((function(e){E.error("echo",{message:"Failed to update content item results lock status: ".concat(JSON.stringify(e))})})):y.remove(h.default.SET_CI_RESULTS_LOCK,{},{params:{channelId:this._channelId,contentId:this._libraryItemId}}).then((function(){e._setButton(e._isLocked)})).catch((function(e){E.error("echo",{message:"Failed to update content item results lock status: ".concat(JSON.stringify(e))})}))}},{key:"_setButton",value:function(t,n){this._communicator.send("setButton",e._getLockButton(t),n)}},{key:"_onClick",value:function(e,t,n){this.switchLocker(),n()}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),n()}}]),e}();t.default=_},2825:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(0)),l=a(n(24)),c=a(n(18)),u=a(n(129)),d=a(n(53)),f=a(n(945)),p=a(n(41)),h=a(n(44)),m=n(2199),v=a(n(2826)),g=d.default.LogManager,E=function(){function e(t,n){(0,r.default)(this,e),this._isDialogClosed=!0,this._abort=this._abort.bind(this),this._close=this._close.bind(this),this._error=this._error.bind(this),this._cancelDelete=this._cancelDelete.bind(this),this._cancelDownload=this._cancelDownload.bind(this),this._startDownload=this._startDownload.bind(this),this._onError=this._onError.bind(this),this._progressChanged=this._progressChanged.bind(this),this._delete=this._delete.bind(this),this._containerId="downloader-container",this._channelId=n.channelId,this._channelName=n.channelName,this._clk=n.clk,this._communicator=new u.default(t,window,window,{buttonClicked:this._onClick,close:this._close,destroy:this._destroy,lesson_metadata:this._receiveLessonMetadata},this);var a=[{button:{id:"downloader-button",title:c.default.translate("downloader.tool.toolbar.download"),iconClass:"toolbar-button__icon--device-download",takeover:!1,dontActive:!0},container:{id:this._containerId,type:m.CONTAINER_TYPE.PARTIAL}}];this._communicator.send("ready",{listenTo:[m.MESSAGE_TYPE.LESSON_METADATA],modules:a},(function(e,t){t&&t.success||g.error("playanywhere",{message:"DownloaderTool: Parent did not return success"})}))}return(0,o.default)(e,[{key:"_receiveLessonMetadata",value:function(e,t,n){var a=this;this._ciId=t.ciId,this._ciVersion=t.ciVersion,this._ciType=t.ciType,this._additionalData={playerType:this._ciType,clk:this._clk,ciName:t.name,channelName:this._channelName},f.default.isSupport()?h.default.isItemDownloaded({itemId:t.ciId,version:t.ciVersion}).then((function(e){a._setButton(e),n()})):n()}},{key:"_onClick",value:function(e,t,n){this._ciId&&this._ciVersion&&this._ciType&&(p.default.sendEvent(p.default.TITLES.CLICK_ICON_TOOLBAR,p.default.COMPONENTS.TOOLBAR,(0,i.default)({},p.default.PARAMS.TYPE,this._isDownloaded?"remove_offline":"work_offline")),this._isDownloaded?this._askRemove():this._askDownload()),n()}},{key:"_askDownload",value:function(){this._isUpdating=void 0,this._isDialogClosed=!1,this._progress=void 0,this._errorText=void 0,this._render()}},{key:"_startDownload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.USER_ACTION,"make_available_offline")),this._isUpdating=t,this._isDialogClosed=!1,f.default.download(this._channelId,this._ciId,this._ciVersion,this._additionalData,this._progressChanged).then((function(){e._isUpdating=void 0,e._isDownloaded=!0,e._setButton(e._isDownloaded),e._close()})).catch((function(t){p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.USER_ACTION,"make_available_offline_failed")),e._onError(t)}))}},{key:"_abort",value:function(){f.default.abort(),this._close()}},{key:"_progressChanged",value:function(e){this._isDialogClosed=!1,this._progress=e,this._errorText=void 0,this._render()}},{key:"_onError",value:function(e){if(e&&"quota"===e.status)this._isDownloaded=!1,this._errorText=c.default.translate("downloader.tool.error.quota"),p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.STATE,"download failed insufficient space"));else if(e&&"not_supported"===e.status)this._errorText=c.default.translate("downloader.tool.error.not-support");else{if(e&&"aborted"===e.status)return this._isUpdating=void 0,this._progress=void 0,this._isDownloaded=!1,this._isDialogClosed=!0,this._errorText=void 0,void this._close();p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.STATE,"download failed with unknown reason")),this._errorText=c.default.translate("downloader.tool.error.unexpected")}this._isUpdating=void 0,this._isDialogClosed=!1,this._progress=void 0,this._render()}},{key:"_askRemove",value:function(){this._isUpdating=void 0,this._isDialogClosed=!1,this._progress=void 0,this._errorText=void 0,this._render()}},{key:"_delete",value:function(){var e=this;this._isDeleting||(p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.USER_ACTION,"make_unavailable_offline")),this._isUpdating=void 0,this._isDeleting=!0,h.default.listDirectory(window.cordova.file.dataDirectory).then((function(t){e._isDownloaded=!1,e._setButton(e._isDownloaded),e._close(),e._isDeleting=!1,t.find((function(t){return t.name===e._ciId})).removeRecursively(),console.log("folder ".concat(e._ciId," deleted"))})).catch((function(t){e._onError(t),e._isDeleting=!1})))}},{key:"_error",value:function(){this._close()}},{key:"_cancelDownload",value:function(){p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.USER_ACTION,"cancel_download")),this._close()}},{key:"_cancelDelete",value:function(){p.default.sendEvent(p.default.TITLES.INTERACT_WITH_OFFLINE_DIALOG,p.default.COMPONENTS.OFFLINE_DIALOG,(0,i.default)({},p.default.PARAMS.USER_ACTION,"cancel_delete")),this._close()}},{key:"_close",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=document.getElementById(this._containerId);a&&(this._isDialogClosed=!0),this._render(n)}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),this._close(e,t,n)}},{key:"_setButton",value:function(e){this._isDownloaded=e,this._communicator.send("setButton",{id:"downloader-button",title:c.default.translate(e?"downloader.tool.toolbar.delete":"downloader.tool.toolbar.download"),iconName:e?"toolbar-button__icon--device-remove":"toolbar-button__icon--device-download"})}},{key:"_render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=document.getElementById(this._containerId);t?l.default.render(s.default.createElement(v.default,{isClosed:this._isDialogClosed,progress:this._progress,abort:this._abort,errorText:this._errorText,errorCB:this._error,isDownloaded:this._isDownloaded,cancelDeleteCB:this._cancelDelete,idUpdating:this._isUpdating,cancelDownloadCB:this._cancelDownload,downloadCB:this._startDownload,deleteCB:this._delete}),t,e):e()}}]),e}();t.default=E},2826:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=i(n(61)),d=a(n(0)),f=(i(n(2)),i(n(18))),p=i(n(58)),h=i(n(2827));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=m(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e,t,n=p.default.THEMES.LIGHT,a=this.props,i=a.progress,r=a.abort,o=a.errorText,s=a.isDownloaded,l=a.idUpdating,c=a.cancelDownloadCB,m=a.errorCB,v=a.cancelDeleteCB,g=a.downloadCB,E=a.deleteCB;return a.isClosed?null:(o?(e=o,t=[{id:"close",type:p.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("downloader.tool.dialog.close"),onClick:m}]):(0,u.default)(i)?s?(e=f.default.translate("downloader.tool.dialog.delete-content"),t=[{id:"delete",type:p.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("downloader.tool.dialog.delete-button"),onClick:E},{id:"cancel",type:p.default.BUTTON_TYPES.SECONDARY,text:f.default.translate("downloader.tool.dialog.cancel"),onClick:v}]):(e=f.default.translate("downloader.tool.dialog.download-content"),t=[{id:"download",type:p.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("downloader.tool.dialog.download-button"),onClick:function(){g(!1)}},{id:"cancel",type:p.default.BUTTON_TYPES.SECONDARY,text:f.default.translate("downloader.tool.dialog.cancel"),onClick:c}]):(e=d.default.createElement(h.default,{styleClass:"downloader-progress",progress:i,abortFunction:r,abortText:f.default.translate("downloader.tool.dialog.abort"),title:l?f.default.translate("downloader.tool.dialog.updating-title"):f.default.translate("downloader.tool.dialog.download-title")}),n=p.default.THEMES.LIGHT),d.default.createElement(p.default,{theme:n,title:f.default.translate("downloader.tool.dialog.title"),content:e,actions:t}))}}]),n}(d.Component);v.defaultProps={progress:void 0,abort:void 0,errorText:void 0,isDownloaded:void 0,idUpdating:void 0,cancelDownloadCB:void 0,errorCB:void 0,cancelDeleteCB:void 0,downloadCB:void 0,deleteCB:void 0,isClosed:!0};var g=v;t.default=g},2827:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(2828));n(2829);var r=i.default;t.default=r},2828:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(0)),r=(a(n(2)),a(n(11))),o=a(n(22)),s=a(n(36));var l=function(e){var t=e.styleClass,n=e.title,a=e.progress,l=e.abortFunction,c=e.abortText,u=e.color,d=e.isFinished,f=(0,r.default)("t2k-progressBar",t);return i.default.createElement("div",{className:f},function(e){return e?i.default.createElement("h3",{className:"t2k-progressBar__title"},e):null}(n),function(e){var t,n=e.progress,a=e.color;(t=isNaN(n)?0:Number(n))<0&&(t=0),t>100&&(t=100);var r={width:"".concat(t,"%"),backgroundColor:a||"#00af8f"};return i.default.createElement("div",{className:"t2k-progressBar__content"},i.default.createElement("div",{className:"t2k-progressBar__bar-container"},i.default.createElement("div",{className:"t2k-progressBar__bar",style:r})),i.default.createElement("div",{className:"t2k-progressBar__percent"},t," %"))}({progress:a,color:u}),function(e){var t=e.abortFunction,n=e.abortText,a=e.progress,r=e.isFinished;if(!t||r)return null;var l=n||o.default.translate("progress-bar.abort-button.text");return i.default.createElement(s.default,{text:l,onClick:t,disabled:a>=100})}({abortFunction:l,abortText:c,progress:a,isFinished:d}))};t.default=l},2829:function(e,t,n){},2830:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(18)),l=a(n(129)),c=a(n(13)),u=a(n(53)),d=a(n(28)),f=a(n(41)),p=a(n(21)),h=a(n(24)),m=a(n(0)),v=a(n(2213)),g=n(2199),E=a(n(2831));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=u.default.LogManager,T=d.default.Instance,b=function(){function e(t,n,a){(0,r.default)(this,e),this._close=this._close.bind(this),this._updateIconTool=this._updateIconTool.bind(this),this._abortOpening=!1,this._startOpening=!1,this._abortClosing=!1,this._startClosing=!1,this._isDialogClosed=!0,this._isLocked=c.default.getIsLocked(),this._title=encodeURIComponent(n.title),this._channelId=n.channelId,this._clk=n.clk,this._quickNavigationInfo=n.quickNavigationInfo,this._containerId="quick-navigation-container",this._communicator=new l.default(t,window,window,{buttonClicked:this._onClick,close:this._close,lesson_metadata:this._receiveLessonMetadata,destroy:this._destroy},this),this.setLoader=a.setLoader;var i=[{button:{id:"quickNavigation",title:s.default.translate("quickNavigation.open"),iconName:"open-nav",takeover:!0,quickAccess:!0},container:{id:this._containerId,type:g.CONTAINER_TYPE.PARTIAL}}];this._communicator.send("ready",{listenTo:[g.MESSAGE_TYPE.LESSON_METADATA],modules:i},(function(e,t){t&&t.success||S.error("playanywhere",{message:"LockTool: Parent did not return success"})}))}return(0,o.default)(e,null,[{key:"_calcStatus",value:function(e,t,n){return e?"LOCKED":t||n}}]),(0,o.default)(e,[{key:"_receiveLessonMetadata",value:function(e,t,n){this._libraryItemId=t.ciId,n()}},{key:"_updateIconTool",value:function(e){this._communicator.send("setButton",{id:"quickNavigation",iconName:"".concat(e?"close-nav":"open-nav animate"),takeover:!0,title:e?c.default.isMobile()?s.default.translate("quickNavigation.close"):void 0:s.default.translate("quickNavigation.open")})}},{key:"_onClick",value:function(e,t,n){var a=this;if(!t.isActive&&this._startOpening?this._abortOpening=!0:t.isActive&&this._startClosing&&(this._abortClosing=!0),this._quickNavigationInfo){this._quickNavigationInfo.currentItemId=this._libraryItemId;var r,o=this._quickNavigationInfo,s=o.id,l=o.type,c=o.version,u=o.moduleLevelId;l===p.default.LIBRARY_ITEM_CONTEXT_TYPE.LEARNING_PATH?(this._quickNavigationType=f.default.LIBRARY_ITEM_TYPES.PATH,r=function(){return T.get(v.default.GET_PATH_ITEMS,{pathId:s},{params:{channelId:a._channelId},failOnOffline:!0})}):l===p.default.LIBRARY_ITEM_CONTEXT_TYPE.MODULE&&(this._quickNavigationType=f.default.LIBRARY_ITEM_TYPES.MODULE,r=function(){return T.get(v.default.GET_MODULE_ITEMS,{moduleId:s,version:c},{params:{levelId:u,channelId:a._channelId},failOnOffline:!0})}),s&&this._isDialogClosed&&t.isActive?(this._startOpening=!0,this.setLoader(!0),r().then((function(e){var t;(a.setLoader(!1),a._abortOpening)?a._abortOpening=!1:(f.default.sendEvent(f.default.TITLES.CLICK_QUICK_NAVIGATION,f.default.COMPONENTS.CI_PLAYER,(t={},(0,i.default)(t,f.default.PARAMS.USER_ACTION,"open_menu"),(0,i.default)(t,f.default.PARAMS.CONTENT_ITEM_TYPE,a._quickNavigationType),t)),a.items=a._extractItemsIntoWrapperStructure(e),a._isDialogClosed=!1,setTimeout((function(){a._abortOpening?a._abortOpening=!1:a._updateIconTool(!0),a._startOpening=!1}),1e3),a.multiStepWrapper?a.multiStepWrapper.updateFromOutSide(a.items):a._render());a._startOpening=!1})).catch((function(){a.setLoader(!1)}))):s&&!this._isDialogClosed&&(this._startClosing=!0,this._isDialogClosed=!0,setTimeout((function(){a._abortClosing?a._abortClosing=!1:a._updateIconTool(!1),a._startClosing=!1}),600),this.multiStepWrapper&&this.multiStepWrapper.cleanItemState())}n()}},{key:"_navigateToCI",value:function(e){if(this._quickNavigationInfo){var t=this._quickNavigationInfo,n=t.id,a=t.type,i=t.version,r=t.moduleLevelId;this._communicator.send("setStage",{id:"echoPlayer",queryParams:{channelId:this._channelId,clk:e,contextItemId:n,contextItemType:a,contextItemVersion:i,moduleLevelId:r}})}}},{key:"_extractItemsIntoWrapperStructure",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t){var i=[];return t.forEach((function(t,r,o){var s=e._calcStatus(t.isLocked,t.path&&t.path.state,t.userProgress&&t.userProgress.status),l=r===o.length-1;i.push(_({id:t.id,current:t.id===n._libraryItemId,title:n._quickNavigationInfo?n._quickNavigationInfo.name:"",subtitle:t.name,status:s,itemType:t.type,expanded:!0,lastChild:l,onItemClick:function(){n._onItemClick(t,s)},index:r},a))})),i}return[]}},{key:"_onItemClick",value:function(e,t){if("LOCKED"!==t){var n,a=e.id===this._libraryItemId?"replay_ci":"move_to_another_CI";f.default.sendEvent(f.default.TITLES.CLICK_QUICK_NAVIGATION,f.default.COMPONENTS.CI_PLAYER,(n={},(0,i.default)(n,f.default.PARAMS.USER_ACTION,a),(0,i.default)(n,f.default.PARAMS.CONTENT_ITEM_TYPE,this._quickNavigationType),n)),this._navigateToCI(e.clk)}}},{key:"_toggleStepItems",value:function(e){this.items.forEach((function(t){t.parentId&&t.parentId===e&&(t.expanded=!t.expanded),t.id===e&&(t.parent=!t.parent)})),this.multiStepWrapper&&this.multiStepWrapper.updateFromOutSide(this.items)}},{key:"_render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=document.getElementById(this._containerId);n?h.default.render(m.default.createElement(E.default,{afterRenderCallBack:this._updateIconTool,containerEl:n,isClosed:this._isDialogClosed,closeCB:this._close,resetCallBack:function(){},items:this.items,ref:function(t){e.multiStepWrapper=t}}),n,t):t()}},{key:"_close",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=document.getElementById(this._containerId);a&&(this._updateIconTool(!1),this._isDialogClosed=!0),this._render(n)}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),this._close(e,t,n)}}]),e}();t.default=b},2831:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(2832)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={steps:[],items:a.props.items,isClosed:!1},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this._createSteps(),this.multiStepWrapper&&this.multiStepWrapper.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;JSON.stringify(this.props.items)!==JSON.stringify(e.items)&&this.setState({items:e.items},(function(){return t._createSteps}))}},{key:"componentWillUnmount",value:function(){this.props.resetCallBack()}},{key:"updateFromOutSide",value:function(e){this.setState({items:e,isClosed:!1},this._createSteps)}},{key:"cleanItemState",value:function(){var e=this;setTimeout((function(){e.setState({isClosed:!0})}),600)}},{key:"_createSteps",value:function(){var e=this.state.items;if(e){var t=[],n=e.slice(0).reverse().filter((function(e){return e.expanded}))[0];e.forEach((function(e){t.push(u.default.createElement(d.default,{item:e,key:e.id,isLastItem:e===n}))})),this.setState({steps:t})}}},{key:"render",value:function(){return this.props.isClosed||this.state.isClosed?null:u.default.createElement("div",{id:"t2k-multi-step-wrapper",className:"multi-step-wrapper scrollable"},u.default.createElement("ul",{className:"quick-nav-steps"},this.state.steps))}}]),n}(u.Component);t.default=p},2832:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(12)),s=i(n(4)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=i(n(11)),p=(i(n(2)),i(n(21))),h=i(n(2833)),m=i(n(2834)),v=i(n(2835)),g=i(n(2836)),E=i(n(2837)),y=i(n(2838));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var S=function(e){(0,l.default)(n,e);var t=_(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={ready:!1},a.itemWasClicked=!1,a.isOffPlatformEvent=e.item.itemType===p.default.CI_TYPE.OFF_PLATFORM_EVENT,a._scrollTo=a._scrollTo.bind((0,o.default)(a)),a.getCollectionChevron=a.getCollectionChevron.bind((0,o.default)(a)),a.getCollectionActionIcons=a.getCollectionActionIcons.bind((0,o.default)(a)),a}return(0,s.default)(n,null,[{key:"_isElementInViewport",value:function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}]),(0,s.default)(n,[{key:"componentDidMount",value:function(){this._scrollTo()}},{key:"_scrollTo",value:function(){this.props.item.current&&this.self&&(n._isElementInViewport(this.self)||this.self.scrollIntoView())}},{key:"_onItemClick",value:function(){var e=this.props.item;this.itemWasClicked=!0,e.onItemClick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,a=t.isLastItem,i=this.getQuickNavItemClass(),r=(0,f.default)("step-line-border",{"last-item":a}),o=n.parentId?"title-and-subtitle padding":"title-and-subtitle",s=n.parentId?null:d.default.createElement(h.default,{className:"flag-icon"}),l=n.parentId?.1*n.index:null,c=null!==l?{animationDelay:"".concat(.1*n.index+.1,"s")}:{};return d.default.createElement("li",{ref:function(t){e.self=t},className:i,onClick:this.isOffPlatformEvent?null:function(){e._onItemClick()}},this.renderStepBulletsSection(l),d.default.createElement("div",{className:"step-content-wrapper",style:c},d.default.createElement("div",{className:"step-content"},d.default.createElement("div",{className:o},d.default.createElement("div",{className:"step-title"},s," ",n.title),d.default.createElement("div",{className:"step-subtitle"},n.subtitle)),d.default.createElement("div",{className:r})),this.renderItemActionSection()))}},{key:"renderStepBulletsSection",value:function(e){var t=this.props.item,n=null!==e?{animationDelay:"".concat(.1*t.index,"s")}:{},a=null!==e?{animationDelay:"".concat(.1*t.index+.1,"s")}:{};return d.default.createElement("div",{className:"step-bullets"},d.default.createElement("div",{className:"step-line-indicator",style:n}),t.parent&&d.default.createElement("div",{className:"step-expend-parent-corner"}),t.parentId&&d.default.createElement("div",{className:"expended-step-indicator",style:n}),t.current&&d.default.createElement(y.default,{className:"current-icon"}),t.current&&d.default.createElement(E.default,{className:"current-ring"}),d.default.createElement("div",{className:"step-bullet",style:a}))}},{key:"renderItemActionSection",value:function(){if(this.isOffPlatformEvent)return null;var e=this.props.item.current?d.default.createElement(v.default,{className:"quick-nav-rings-item-refresh"}):d.default.createElement(m.default,{className:"quick-nav-ring-item"}),t=d.default.createElement("span",null,d.default.createElement(g.default,{className:"quick-nav-ring"})," ",e);return d.default.createElement("div",{className:"step-item-action"},t)}},{key:"getQuickNavItemClass",value:function(){var e=this.props.item,t=e.parentId?"quick-nav-step-progress-item expend":"quick-nav-step-progress-item";return(0,f.default)(t,{lock:"LOCKED"===e.status,"is-done":"COMPLETED"===e.status,hide:!e.expanded,"last-child":e.lastChild,event:this.isOffPlatformEvent})}},{key:"getCollectionActionIcons",value:function(){return d.default.createElement("div",{className:"quick-nav-step-collection-action-wrapper"},this.getCollectionChevron())}},{key:"getCollectionChevron",value:function(){var e=this.props.item.parent?"chevron-close":"chevron-open",t="quick-nav-step-chevron ".concat(e," ").concat(this.itemWasClicked?"animate":null);return this.itemWasClicked=!this.itemWasClicked&&this.itemWasClicked,d.default.createElement("div",{className:t})}}]),n}(d.Component);t.default=S},2833:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},[a.createElement("style",{key:0},"\n            .cls-flag-1{fill:#cdd1d3}.cls-flag-2{clip-path:url(#clip-path)}.cls-flag-3{clip-path:url(#clip-path-2)}.cls-flag-4{clip-path:url(#clip-path-3)}\n        "),a.createElement("clipPath",{id:"clip-path",key:1},a.createElement("path",{id:"Path_53",d:"M3.156-17.37v-.108a.727.727 0 0 0-.727-.727.727.727 0 0 0-.727.727v14.239C.715-3.107 0-2.7 0-2.232 0-1.661 1.069-1.2 2.379-1.214s2.368-.48 2.364-1.052c0-.45-.665-.829-1.585-.965v-7h9.388A1.446 1.446 0 0 0 14-11.665v-4.27a1.446 1.446 0 0 0-1.455-1.437H3.156z",className:"cls-flag-1","data-name":"Path 53",transform:"translate(0 18.206)"})),a.createElement("clipPath",{id:"clip-path-2",key:2},a.createElement("path",{id:"Rectangle_55",d:"M0 0h23.333v27.067H0z",className:"cls-flag-1","data-name":"Rectangle 55"})),a.createElement("clipPath",{id:"clip-path-3",key:3},a.createElement("path",{id:"Path_52",d:"M0-1.267h14V-19H0z",className:"cls-flag-1","data-name":"Path 52",transform:"translate(0 19)"}))]),a.createElement("g",{id:"Group_86",className:"cls-flag-2","data-name":"Group 86",key:1},a.createElement("g",{id:"Group_85",className:"cls-flag-3","data-name":"Group 85",transform:"translate(-4.667 -5.408)"},a.createElement("g",{id:"Group_84",className:"cls-flag-4","data-name":"Group 84",transform:"translate(4.667 4.667)"},a.createElement("path",{id:"Path_51",d:"M-5 3.12h23.333v-26.326H-5z",className:"cls-flag-1","data-name":"Path 51",transform:"translate(.333 19.28)"}))))])}i.defaultProps={viewBox:"0 0 14 16.992"},e.exports=i,i.default=i},2834:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,".cls-1{fill:#fff;}")),a.createElement("g",{id:"Layer_2","data-name":"Layer 2",key:1},a.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},a.createElement("path",{id:"Subtraction_2","data-name":"Subtraction 2",className:"cls-1",d:"M0,12H0V0L8,6Z"})))])}i.defaultProps={viewBox:"0 0 8 12"},e.exports=i,i.default=i},2835:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0}),a.createElement("g",{id:"Layer_2","data-name":"Layer 2",key:1},a.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},a.createElement("g",{id:"Layer_2-2","data-name":"Layer 2"},a.createElement("g",{id:"Layer_1-2-2","data-name":"Layer 1-2"},a.createElement("g",{id:"Group_39","data-name":"Group 39"},a.createElement("path",{id:"Path_41","data-name":"Path 41",className:"cls-1",d:"M7.2,14.27a6,6,0,0,0-.62-12V.62A.12.12,0,0,0,6.45.51a.06.06,0,0,0-.06,0L3.05,3a.12.12,0,0,0,0,.14h0L6.39,5.57a.14.14,0,0,0,.15,0h0V3.91A4.37,4.37,0,1,1,2.15,9a.82.82,0,0,0-.92-.73.82.82,0,0,0-.72.92v.06A6,6,0,0,0,7.2,14.27Z"}))))))])}i.defaultProps={viewBox:"0 0 13.4 14.81"},e.exports=i,i.default=i},2836:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,".cls-1{fill:#777;}")),a.createElement("g",{id:"Layer_2","data-name":"Layer 2",key:1},a.createElement("g",{id:"Layer_1-2","data-name":"Layer 1"},a.createElement("path",{className:"cls-1",d:"M25,50A25,25,0,1,1,50,25,25,25,0,0,1,25,50ZM25,8A17,17,0,1,0,42,25,17,17,0,0,0,25,8Z"})))])}i.defaultProps={viewBox:"0 0 50 50"},e.exports=i,i.default=i},2837:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n      .Ellipse-cls-1 {\n        fill: #38474e;\n        stroke: #b4b4b4;\n        stroke-width: 6px;\n      }\n\n      .Ellipse-cls-2 {\n        stroke: none;\n      }\n\n      .Ellipse-cls-3 {\n        fill: none;\n      }\n    ")),a.createElement("g",{id:"Ellipse_2","data-name":"Ellipse 2",className:"Ellipse-cls-1",transform:"translate(6 6)",key:1},[a.createElement("circle",{className:"Ellipse-cls-2",cx:"14",cy:"14",r:"14",key:0}),a.createElement("circle",{className:"Ellipse-cls-3",cx:"14",cy:"14",r:"17",key:1})])])}i.defaultProps={viewBox:"0 0 40 40"},e.exports=i,i.default=i},2838:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,[a.createElement("defs",{key:0},a.createElement("style",null,"\n            .cls-1{fill:#b4b4b4;opacity:.999}\n        ")),a.createElement("path",{id:"Subtraction_4",d:"M-6296.973-401.8A19.981 19.981 0 0 0-6292-415a19.983 19.983 0 0 0-4.978-13.2L-6280-415z",className:"cls-1","data-name":"Subtraction 4",transform:"translate(6296.979 428.204)",key:1})])}i.defaultProps={viewBox:"0 0 16.98 26.405"},e.exports=i,i.default=i},2839:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(129)),l=a(n(13)),c=a(n(18)),u=a(n(53)),d=a(n(28)),f=a(n(41)),p=a(n(21)),h=n(2199),m=a(n(2213)),v=u.default.LogManager,g=d.default.Instance,E=function(){function e(t,n){(0,r.default)(this,e),this.addNotification=n.notification.addNotification,this.mode=n.mode,this.quickNavigationInfo=n.quickNavigationInfo,this.clk="next"===this.mode?this.quickNavigationInfo.nextClk:this.quickNavigationInfo.prevClk,this._channelId=n.channelId,this._communicator=new s.default(t,window,window,{buttonClicked:this._onClick,destroy:this._destroy},this);var a=!this.clk,i=[{button:{id:"quickNavigation-".concat(this.mode),title:c.default.translate("quickNavigation".concat(l.default.isMobile()?".mobile":"",".").concat(this.mode)),iconName:"".concat(l.default.isMobile()?"mobile-":"","nextprev-nav"),className:"nextprev-nav-".concat(this.mode).concat(a?" disabled":"").concat(l.default.isMobile()?" mobile":""),isClickable:!a,isDisabled:a},container:{type:h.CONTAINER_TYPE.NONE}}];this._communicator.send("ready",{listenTo:[],modules:i},(function(e,t){t&&t.success||v.error("playanywhere",{message:"Parent did not return success"})}))}return(0,o.default)(e,[{key:"_onClick",value:function(){var e=this;if(this.quickNavigationInfo&&this.clk){var t=this.quickNavigationInfo,n=t.id,a=t.type,r=t.version,o=t.moduleLevelId,s=this.clk,l=this.mode;g.get(m.default.IS_ITEM_AVAILABLE,{},{params:{channelId:this._channelId,contextItemId:n,contextItemType:a,clk:s},failOnOffline:!0}).then((function(t){var u,d,h;t.isAvailable?(a===p.default.LIBRARY_ITEM_CONTEXT_TYPE.LEARNING_PATH?(d=f.default.LIBRARY_ITEM_TYPES.PATH,h={clk:s,channelId:e._channelId,contextItemId:n,contextItemType:a}):a===p.default.LIBRARY_ITEM_CONTEXT_TYPE.MODULE&&(d=f.default.LIBRARY_ITEM_TYPES.MODULE,h={clk:s,channelId:e._channelId,contextItemId:n,contextItemType:a,contextItemVersion:r,moduleLevelId:o}),f.default.sendEvent(f.default.TITLES.CLICK_QUICK_NAVIGATION,f.default.COMPONENTS.CI_PLAYER,(u={},(0,i.default)(u,f.default.PARAMS.USER_ACTION,"next"===e.mode?"next":"previous"),(0,i.default)(u,f.default.PARAMS.CONTENT_ITEM_TYPE,d),u)),e._communicator.send("setStage",{id:"echoPlayer",queryParams:h,options:{replace:!0}})):e.addNotification(c.default.translate("quickNavigation.cannotNavigate.".concat(l,".").concat(t.reason)))}))}}},{key:"_destroy",value:function(e,t,n){this._communicator.destroy(),n()}}]),e}();t.default=E},2840:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0));i(n(2));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=d(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return u.default.createElement("div",{className:"notice-container"},u.default.createElement("div",{className:"notice-container__notice"},this.props.text))}}]),n}(u.Component);t.default=f},2841:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(18))),p=i(n(58));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var m=function(e){(0,l.default)(n,e);var t=h(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={dialogState:!1===a.props.show?"CLOSED":"OPEN"},a._closeDialog=a._closeDialog.bind((0,s.default)(a)),a._key=a.props.isLocked?"unlock":"onlock",a}return(0,o.default)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.show!==e.show&&!1===e.show?this.setState({dialogState:"CLOSED"}):e.show&&"CLOSED"===this.state.dialogState&&this.setState({dialogState:"OPEN"})}},{key:"render",value:function(){var e=this;if("CLOSED"===this.state.dialogState)return null;var t=[{id:"cancel",text:f.default.translate("".concat(this._key,".buttons.cancel")),type:p.default.BUTTON_TYPES.SECONDARY,onClick:function(){e.props.onClose(!1),e._closeDialog()}},{id:"ok",type:p.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("".concat(this._key,".buttons.ok")),onClick:function(){e.props.onClose(!0),e._closeDialog()}}];return d.default.createElement(p.default,{theme:p.default.THEMES.LIGHT,title:f.default.translate("".concat(this._key,".title")),content:f.default.translate("".concat(this._key,".content")),actions:t})}},{key:"_closeDialog",value:function(){this.setState({dialogState:"CLOSED"})}}]),n}(d.Component);t.default=m},2842:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(1227)),l=a(n(946)),c=a(n(2843)),u=a(n(141)),d=a(n(129)),f=a(n(21)),p=a(n(945)),h=a(n(13)),m=a(n(53)),v=a(n(610));n(1303);var g=n(258),E=a(n(2323)),y=n(2199),_=a(n(2844));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=m.default.LogManager,I=function(){function e(t,n){(0,r.default)(this,e),this._loadedTimestamp=Date.now(),this._keepAlive=new v.default(this._sendAliveEvent.bind(this)),this._player=n.player,this._userId=n.user.id,this._channelId=n.channelId,this._clk=n.clk,this._previewMode=n.player.additionalPlayerInfo.previewMode;var a,i,o,s=n.player.additionalPlayerInfo.interactions,l=h.default.getAppdata();if(n.hash){var c=n.hash?n.hash.split("/"):[""];this._first_page_id=(a="activePageId",i="",-1!==(o=c.indexOf(a))?c[o+1]:i)}this._interactions=T(T({},s),{},{userId:this._userId,token:n.token,serviceHeaders:n.customHeaders,config:{serviceUrl:l.backend_url,assetsPrefix:l.assets_prefix,isReadOnly:!1,isPersistent:h.default.isLearner(),showPollResults:h.default.isInstructor(),appData:h.default.getAppdata(),videoIframeOrigin:h.default.getOriginWithPath(),isInteractionsThemeV2:!1},context:{providerId:"ECHO_LESSON",contextObject:T(T({},s.context),{},{userId:this._userId,channelId:n.channelId})}}),h.default.isFeatureEnabled("gamified")&&h.default.isInstructor()&&!this._previewMode&&(this._interactions.config.taskButtons={id:"present",type:g.TASK_BUTTONS.SHOW}),this._interactions.config.showFlagInteractionButton=h.default.isLearner(),n.xapiContext&&(this._interactions.config.xapiContext=n.xapiContext),this._content=n.content,this._communicator=new d.default(t,window,window,{move:this._onPageMove,destroy:this._destroy},this),this._taskGroups=[],this._playerEnums=window.dbp.enums,this._boundCILoadedEvent=this._sendCILoadedEvent.bind(this,!1,(function(){})),this.toggleInteractionVisibility=n.toggleInteractionVisibility?n.toggleInteractionVisibility:function(){},window.addEventListener("beforeunload",this._boundCILoadedEvent),this._getLessonData()}return(0,o.default)(e,null,[{key:"_convertPageData",value:function(e){var t=(0,u.default)(e);return t.page_url=t.href,delete t.href,t.thumbnail_url=t.thumbnailHref,delete t.thumbnailHref,t.overlay_elements_data=t.overlayElements,delete t.overlayElements,t.overlay_elements_data.forEach((function(e){e.content.data.resource=e.content.data.href,e.content.data.version=e.content.data.version||1,delete e.content.data.href})),t}},{key:"_convertUserState",value:function(e){var t={};return Object.keys(e).forEach((function(n){t[n]={},Object.keys(e[n]).forEach((function(a){var i=e[n][a].data;t[n][a]="bookmarks"!==a?Object.values(i):i}))})),t}},{key:"_convertContextToDBPContext",value:function(e){return{provider_id:e.providerId,context_object:e.contextObject}}}]),(0,o.default)(e,[{key:"_getLessonData",value:function(){this._communicator.send("sendMessage",{sendToServer:{url:this._content.contentUri,method:"GET",config:{}}},this._getLessonState.bind(this))}},{key:"_getLessonState",value:function(e,t){var n=this,a=t.data.lesson.id,i=t.data.lesson.version;this._UserStateService=new _.default("server",{lessonId:a,lessonVersion:i}),p.default.isItemDownloaded(this._channelId,a,i).then((function(e){return n._interactions.config.isOnline=h.default.isOnline(),n._interactions.config.availableOffline=e,n._UserStateService.getState()})).then((function(e){n._initPlayer(t,e)}))}},{key:"_initPlayer",value:function(t,n){this._contentData=t.data,this._lessonId=t.data.lesson.id,this._lessonVersion=t.data.lesson.version,this._contentSessionId="".concat(this._lessonId,"_").concat(Date.now()),this._interactions.context.contextObject=T(T({},this._interactions.context.contextObject),{},{lessonId:this._lessonId,contentItemId:this._lessonId,contentItemVersion:this._lessonVersion,contentSessionId:this._contentSessionId});var a={player_url:h.default.getAssetPath(this._player.additionalPlayerInfo.playerUrl),target_id:this._player.targetId},i=t.data.lesson.properties.locale,r={assets_path_prefix:this._content.assetsUri,assets_token:h.default.getCurrentSessionAssetsToken(),book_path_prefix:this._content.assetsUri,player_type:this._playerEnums.PLAYER_TYPE.VIEWER,use_external_player:!1,dual_page_enabled:!0,is_rtl:h.default.isRtl(i),stage_mode:this._playerEnums.STAGE_MODE.SINGLE_PAGE,disable_internal_links:!1,running_mode:this._playerEnums.RUNNING_MODE.ONLINE,read_only:!1,viewer_toolbar_enabled:!0,localization_locale:i,first_page_id:this._first_page_id||"",search_data_path:"",thumbnails_bar_enabled:!0,navigation_enabled:!0,search_enabled:!1,bookmark_enabled:!0,highlight_enabled:!0,comments_enabled:!0,primary_color:"#02b28e",load_customization_pack:!1,interactions:T(T({},this._interactions),{},{context:e._convertContextToDBPContext(this._interactions.context),full_screen:h.default.isFeatureEnabled("fullScreenEbookInteractions")}),appData:h.default.getAppdata()};this._pagesArray=this._getPagesByStructure(t.data.lesson.structure,t.data.pages),this._pagesArray.length&&(this._currentPageIndex=0,this._currentPageId=this._pagesArray[0].id);var o={table_of_contents:this._pagesArray},s=e._convertUserState(n);this._sendCILoadedEvent(!0),this._innerPlayer=new window.dbp.book_player(a,r,o,s,this._sendPlayerReady.bind(this))}},{key:"_sendPlayerReady",value:function(){var e=this;this._keepAlive.elementKeepAlive(document.body),this._communicator.send("ready",{listenTo:[y.MESSAGE_TYPE.STOP,y.MESSAGE_TYPE.MOVE,y.MESSAGE_TYPE.RESUME,y.MESSAGE_TYPE.BREAK]},(function(t,n){n&&n.success||b.error("playanywhere",{message:"LessonPlayer: Parent did not return success"}),e._sendLessonMetaData(),e._setEvents(),e._sendMovePage()}))}},{key:"dispatchCIEvent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=T(T({},this._interactions.context.contextObject),{},{channelId:this._channelId,lessonId:this._lessonId,contentItemId:this._lessonId,contentItemVersion:this._lessonVersion,userId:this._userId,contentSessionId:this._contentSessionId}),r={type:"DBP_PLAYER",id:this._contentData.lesson.id,version:this._contentData.lesson.version};n||(n=Date.now()),E.default.dispatchCIEvent(this._communicator,e,t,i,r,n,a)}},{key:"_sendCILoadedEvent",value:function(e,t){var n=e?y.MESSAGE_TYPE.CI_LOADED:y.MESSAGE_TYPE.CI_TERMINATED;this.dispatchCIEvent(n,"ECHO_LESSON",this._loadedTimestamp,t)}},{key:"_sendAliveEvent",value:function(){this.dispatchCIEvent(y.MESSAGE_TYPE.USER_ACTIVITY,"ECHO_LESSON")}},{key:"_sendLessonMetaData",value:function(){var e=this._pagesArray.map((function(e){return{id:e.id,title:e.title}}));this._communicator.send("sendMessage",{type:y.MESSAGE_TYPE.LESSON_METADATA,messageData:{taskGroups:this._taskGroups,pages:e,ciType:f.default.CI_TYPE.LESSON,ciId:this._contentData.lesson.id,ciVersion:this._contentData.lesson.version,name:this._contentData.lesson.properties.name,interactions:{serviceUrl:this._interactions.config.serviceUrl,assetsPrefix:this._interactions.config.assetsPrefix,context:this._interactions.context,jsUrl:this._interactions.js,cssUrl:this._interactions.css}}})}},{key:"_getPagesByStructure",value:function(t,n){var a=this,i=[];return t.rootLevel&&t.rootLevel.forEach((function(r){var o=t.components[r];if("SECTION"===o.type)o.children.forEach((function(t){a._insertTaskGroupFromPage(n[t]);var r=e._convertPageData(n[t]);i.push(r)}));else if("PAGE"===o.type){a._insertTaskGroupFromPage(n[o.id]);var s=e._convertPageData(n[o.id]);i.push(s)}})),this._taskGroups=(0,c.default)(this._taskGroups,s.default),i}},{key:"_insertTaskGroupFromPage",value:function(e){if(e.overlayElements&&e.overlayElements.length)for(var t=0;t<e.overlayElements.length;++t){var n=e.overlayElements[t];n.content.type===this._playerEnums.OVERLAY_ELEMENT.CONTENT_TYPE.INTERACTION&&this._taskGroups.push({id:n.content.data.id,version:n.content.data.version||1})}}},{key:"_setEvents",value:function(){var e=this,t={page_changed:this._handlePageChanged,keep_alive:this._setKeepAlive,bookmark_added:this._handleBookmarkAdded,bookmark_removed:this._handleBookmarkRemoved,highlights_state:this._handleStateChanged,comments_state:this._handleStateChanged,interaction_button_clicked:this._handleInteractionButtonClick,open_interaction_clicked:this._handleOpenInteraction,book_body_clicked:this._handleCloseInteraction};Object.keys(t).forEach((function(n){e._innerPlayer.callbacks.register(n,t[n].bind(e))}))}},{key:"_handleInteractionButtonClick",value:function(e){"present"===e.buttonId&&this._onPresentTask(e.taskInfo,e.context)}},{key:"_handleOpenInteraction",value:function(e){var t={context:{providerId:this._interactions.context.providerId,contextObject:this._interactions.context.contextObject},taskGroupId:e.data.content.data.id,taskGroupVersion:e.data.content.data.version,isPersistent:h.default.isLearner(),customHeaders:this._interactions.serviceHeaders,xapiContext:this._interactions.config.xapiContext,taskButtons:this._interactions.config.taskButtons,isPreview:this._previewMode,token:this._interactions.token,collapsedModeDisabled:!0,closeOverlayFromPlayer:this._handleCloseInteraction.bind(this),availableOffline:this._interactions.config.availableOffline,loggerName:"playanywhere"};this.toggleInteractionVisibility(t)}},{key:"_handleCloseInteraction",value:function(){this.toggleInteractionVisibility({})}},{key:"_handlePageChanged",value:function(e){var t=this;e.success&&(this._currentPageId=e.new_page_id,this._currentPageIndex=(0,l.default)(this._pagesArray,(function(e){return e.id===t._currentPageId})),this._sendMovePage())}},{key:"_setKeepAlive",value:function(){this._keepAlive.setKeepAlive(!0)}},{key:"_onPresentTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.taskVersion,a=e.taskGroupId,i=e.taskGroupVersion,r=e.taskIndex,o=e.taskType,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=this._interactions.context.contextObject,c={providerId:this._interactions.context.providerId,contextObject:T(T({},l),{},{pageId:s.data.pageId})};delete c.contextObject.userId,this._communicator.send("pushTo",{type:f.default.SERVER_PUSH_TYPES.SEND,channel:[f.default.LOCAL_CHANNEL,"user/".concat(h.default.getUser().id)],data:{event:"PRESENT_TASK",title:this._contentData.lesson.properties.name,taskGroup:{id:a,version:i},task:{id:t,version:n,index:r,type:o},ci:{id:l.contentItemId,version:i,type:f.default.CI_TYPE.LESSON},clk:this._clk,channelId:this._channelId,context:c}})}},{key:"_sendMovePage",value:function(){this._pagesArray.length&&this._communicator.send("sendMessage",{type:y.MESSAGE_TYPE.MOVE,messageData:{pageId:this._currentPageId,pageNumber:this._currentPageIndex+1}})}},{key:"_onPageMove",value:function(e,t,n){var a={limit_page_range:{start:t.pageId||"-1",end:t.pageId||"-1"}};this._innerPlayer.configure(a),this._innerPlayer.switch_to_page(t.pageId),n()}},{key:"_handleBookmarkAdded",value:function(e){this._handleBookmarkChanged(e,!0)}},{key:"_handleBookmarkRemoved",value:function(e){this._handleBookmarkChanged(e,!1)}},{key:"_handleBookmarkChanged",value:function(e,t){var n=e.page_id,a={bookmarks:{data:{is_bookmarked:t}}};this._saveState(n,"bookmarks",a)}},{key:"_handleStateChanged",value:function(e){var t=Object.keys(e)[0],n=e[t],a=Object.keys(n)[0],r=n[a][t],o=(0,i.default)({},t,{data:Object.assign({},r)});this._saveState(a,t,o)}},{key:"_saveState",value:function(e,t,n){var a=this._contentData.pages[e].version,r=(0,i.default)({},e,T({pageVersion:a},n));this._UserStateService.saveState(r,[e,t])}},{key:"_destroy",value:function(e,t,n){var a=this;this._keepAlive.destroy(),this._innerPlayer.terminate((function(){a._sendCILoadedEvent(!1,(function(){window.removeEventListener("beforeunload",a._boundCILoadedEvent),n(),a._communicator.destroy()}))}))}}]),e}();t.default=I},2843:function(e,t,n){var a=n(366);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?a(e,void 0,t):[]}},2844:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(106)),s=a(n(53)),l=a(n(2213)),c=a(n(2845)),u=function(){function e(t,n){(0,i.default)(this,e),this._queue=[],this._userStateStrategy=new c.default(t),this._restParams=n,this._serverVersions={},this.saveInProgress=!1}return(0,r.default)(e,null,[{key:"_traverseStateObj",value:function(e,t){return t.forEach((function(t){e=e[t]||{}})),e}}]),(0,r.default)(e,[{key:"saveState",value:function(e,t){this._addSaveToQueue({state:e,keys:t}),this.saveInProgress||this._executeSaveInQueue()}},{key:"getState",value:function(){var e=this;return new Promise((function(t){e._userStateStrategy.getUserState({rest:l.default.SET_USER_STATE,params:e._restParams}).then((function(n){e._userState=n,t(n)}))}))}},{key:"_addSaveToQueue",value:function(e){var t=e.state,n=e.keys;this._queue.push({state:t,keys:n})}},{key:"_executeSaveInQueue",value:function(){var t=this;this.saveInProgress=!0;var n=this._queue.shift(),a=n.keys,i=this._setServerVersionInState(n.state,a);this._userStateStrategy.save({rest:l.default.SET_USER_STATE,body:i,params:this._restParams}).then((function(n){t.saveInProgress=!1,e._traverseStateObj(n,a).error?s.default.LogManager.error("echo",{message:"Failed to update user state in lesson player: ".concat(JSON.stringify(n))}):t._updateLocalServerVersions(n),t._queue.length>0&&t._executeSaveInQueue()}))}},{key:"_updateLocalServerVersions",value:function(e){(0,o.default)(this._userState,e)}},{key:"_setServerVersionInState",value:function(t,n){var a=e._traverseStateObj(this._userState,n),i=a&&a.serverVersion?a.serverVersion:0;return e._traverseStateObj(t,n).serverVersion=i,t}}]),e}();t.default=u},2845:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(28)),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"server";switch((0,i.default)(this,e),this._strategy=t,this._strategy){case"server":default:this._server=o.default.Instance;break;case"localStorage":this._localStorage=localStorage;break;case"sessionStorage":this._sessionStorage=sessionStorage}}return(0,r.default)(e,[{key:"setStrategy",value:function(e){this._strategy=e}},{key:"save",value:function(e){var t=e.rest,n=e.body,a=e.params;switch(this._strategy){case"server":default:return this._saveServerStrategy({rest:t,body:n,params:a});case"localStorage":return this._saveLocalStorageStrategy({rest:t,body:n,params:a});case"sessionStorage":return this._saveSessionStorageStrategy({rest:t,body:n,params:a})}}},{key:"getUserState",value:function(e){var t=e.rest,n=e.params;switch(this._strategy){case"server":default:return this._getServerStrategy({rest:t,params:n});case"localStorage":return this._getLocalStorageStrategy({rest:t,params:n});case"sessionStorage":return this._getSessionStorageStrategy({rest:t,params:n})}}},{key:"_saveServerStrategy",value:function(e){var t=e.rest,n=e.body,a=e.params;return this._server.post(t,{},n,{params:a})}},{key:"_saveLocalStorageStrategy",value:function(e){var t=this,n=e.rest,a=e.body,i=e.params;return function(){return new Promise((function(e){t._localStorage.setItem("".concat(n,":").concat(i.lessonId,":").concat(i.lessonVersion),a),e(a)}))}}},{key:"_saveSessionStorageStrategy",value:function(e){var t=this,n=e.rest,a=e.body,i=e.params;return function(){return new Promise((function(e){t._sessionStorage.setItem("".concat(n,":").concat(i.lessonId,":").concat(i.lessonVersion),a),e({serverVersion:1})}))}}},{key:"_getServerStrategy",value:function(e){var t=e.rest,n=e.params;return this._server.get(t,{},{params:n})}},{key:"_getLocalStorageStrategy",value:function(e){var t=this,n=e.rest,a=e.params;return new Promise((function(e,i){var r=t._localStorage.getItem("".concat(n,":").concat(a.lessonId,":").concat(a.lessonVersion));return r?e(r):i({error:"no key: ".concat(n,":").concat(a.lessonId,":").concat(a.lessonVersion," found in LocalStorage.")})}))}},{key:"_getSessionStorageStrategy",value:function(e){var t=this,n=e.rest,a=e.params;return new Promise((function(e,i){var r=t._sessionStorage.getItem("".concat(n,":").concat(a.lessonId,":").concat(a.lessonVersion));return r?e(r):i({error:"no key: ".concat(n,":").concat(a.lessonId,":").concat(a.lessonVersion," found in SessionStorage.")})}))}}]),e}();t.default=s},2846:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(33)),r=a(n(34)),o=a(n(9)),s=a(n(3)),l=a(n(4)),c=a(n(0)),u=a(n(24)),d=a(n(129)),f=a(n(21)),p=a(n(13)),h=a(n(945)),m=a(n(53)),v=a(n(610)),g=a(n(58)),E=a(n(18)),y=n(258),_=a(n(2384)),S=a(n(41)),T=a(n(2323)),b=n(2199);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=m.default.LogManager,O=function(){function e(t,n){var a=this;(0,s.default)(this,e),this._onPlayerLoaded=this._onPlayerLoaded.bind(this),this._sendPlayerReady=this._sendPlayerReady.bind(this),this._initPlayer=this._initPlayer.bind(this),this._onPresentTask=this._onPresentTask.bind(this),this._reportsToolInterceptor=this._reportsToolInterceptor.bind(this),this._renderPlayer=this._renderPlayer.bind(this),this._onAssessmentSubmit=this._onAssessmentSubmit.bind(this),this._submitPromise=new Promise((function(e){a._submitPromiseResolve=e})),this._forceSubmit=this._forceSubmit.bind(this),this._loadedTimestamp=Date.now(),this._keepAlive=new v.default(this._sendAliveEvent.bind(this)),this._player=n.player,this._remainingTimeInSeconds=n.remainingTimeInSeconds,this._enableAssessmentTryAgain=n.enableAssessmentTryAgain,this._hasTimer="number"==typeof this._remainingTimeInSeconds,this._keepTimerInBackground=!!n.isScheduledAssessmentCompleted,this._content=n.content,this._user=n.user,this._channelId=n.channelId,this._token=n.token,this._customHeaders=n.customHeaders,this._xapiContext=n.xapiContext,this._clk=n.clk,this._previewMode=n.player.additionalPlayerInfo.previewMode;var i=n.player.additionalPlayerInfo.interactions;this._interactions={context:{providerId:this.interactionsContextProviderId,contextObject:k(k({},i.context),{},{userId:n.user.id,channelId:n.channelId})}},this._communicator=new d.default(t,window,window,{destroy:this._destroy},this),this._el=document.getElementById(this._player.targetId),this._isPersistent=p.default.isLearner(),this._boundCILoadedEvent=this._sendCILoadedEvent.bind(this,!1,(function(){})),window.addEventListener("beforeunload",this._boundCILoadedEvent),this._getContentItem()}var t,n;return(0,l.default)(e,[{key:"_getContentItem",value:function(){this._communicator.send("sendMessage",{sendToServer:{url:this._content.contentUri,method:"GET",config:{}}},this._initPlayer)}},{key:"_initPlayer",value:(n=(0,r.default)(i.default.mark((function e(t,n){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initiateContentData(n);case 2:this._setInteractionsContext(),this._sendCILoadedEvent(!0),this._renderPlayer(),this._sendReportsToolInterceptor();case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"_onPresentTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.taskVersion,a=e.taskGroupId,i=e.taskGroupVersion,r=e.taskIndex,s=e.taskType;S.default.sendEvent(S.default.TITLES.PRESENT_QUESTION,S.default.COMPONENTS.CI_PLAYER,(0,o.default)({},S.default.PARAMS.LIBRARY_ITEM_TYPE,S.default.LIBRARY_ITEM_TYPES[this.ciType]||this.ciType));var l=this._interactions.context.contextObject,c={providerId:this._interactions.context.providerId,contextObject:l};delete c.contextObject.userId,this._communicator.send("pushTo",{type:f.default.SERVER_PUSH_TYPES.SEND,channel:[f.default.LOCAL_CHANNEL,"user/".concat(p.default.getUser().id)],data:{event:"PRESENT_TASK",title:this._name,taskGroup:{id:a,version:i},task:{id:t,version:n,index:r,type:s},ci:{id:l.contentItemId,version:l.contentItemVersion,type:this.ciType},clk:this._clk,channelId:this._channelId,context:c}})}},{key:"_initiateContentData",value:(t=(0,r.default)(i.default.mark((function e(t){var n,a,r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this._player.playerType,e.t0=n,e.next="assessment"===e.t0?4:(e.t0,11);break;case 4:return a=t,this._taskGroupId=a.data.structure.order[0],this._taskGroupVersion=a.data.structure.components[this._taskGroupId].version,this._ciId=a.data.id,this._ciVersion=a.data.version,this._name=a.data.properties.name,e.abrupt("break",17);case 11:r=t,this._taskGroupId=r.data.taskGroup.id,this._taskGroupVersion=r.data.taskGroup.version,this._ciId=this._taskGroupId,this._ciVersion=this._taskGroupVersion,this._name=r.data.taskGroup.properties.title;case 17:return this._contentSessionId="".concat(this._taskGroupId,"_").concat(Date.now()),e.next=20,h.default.isItemDownloaded(this._channelId,this._ciId,this._ciVersion);case 20:this._isDownloaded=e.sent;case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_setInteractionsContext",value:function(){this._interactions.context.contextObject=k(k({},this._interactions.context.contextObject),{},{contentItemId:this._ciId,contentItemVersion:this._ciVersion,contentSessionId:this._contentSessionId})}},{key:"_renderPlayer",value:function(){var e,t,n=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this._player.playerType,r=!!p.default.getAppdata().appConf.featureFlags.gamified&&"assessment"!==i;r&&p.default.isInstructor()&&!this._previewMode&&(e={type:y.TASK_BUTTONS.SHOW,callback:this._onPresentTask}),p.default.isInstructor()&&(t={enableShowAnswers:!0}),p.default.isLearner()&&(t={enableAssessmentTryAgain:!!this._enableAssessmentTryAgain});var o=a?this._getDialog():null,s=this._getTimerDisplay(),l=p.default.getAppdata();u.default.render(c.default.createElement("div",null,c.default.createElement(y.TaskGroup,{serviceUrl:l.backend_url,token:this._token,userId:this._user.id,context:this._interactions.context,taskGroupId:this._taskGroupId,taskGroupVersion:this._taskGroupVersion,isReadOnly:!1,isPersistent:this._isPersistent,showReport:this._isPersistent,singleTaskMode:!1,loadTaskGroupCallback:this._sendPlayerReady,loggerName:"playanywhere",customHeaders:this._customHeaders,viewMode:"assessment"===i?y.VIEW_MODE.ASSESSMENT:y.VIEW_MODE.QUIZ,xapiContext:this._xapiContext,ref:function(e){n._taskGroupView=e},taskButtons:e,onPlayerLoaded:this._onPlayerLoaded,onAssessmentSubmit:this._onAssessmentSubmit,showPollResults:p.default.isInstructor(),taskGroupOptions:t,isPreview:this._previewMode,forceSubmitPromise:this._submitPromise,showFlagInteractionButton:p.default.isLearner(),availableOffline:this._isDownloaded}),o,s),this._el)}},{key:"_onAssessmentSubmit",value:function(){this._communicator.send("ciSubmitted",{ciType:this.ciType,ciId:this._ciId,ciVersion:this._ciVersion}),this.submissionOccurred=!0,this._renderPlayer()}},{key:"_getDialog",value:function(){var e=this,t=[{id:"done",text:E.default.translate("common.dialog.buttons.done"),type:g.default.BUTTON_TYPES.PRIMARY,onClick:function(){e._renderPlayer(!1)}}];return c.default.createElement(g.default,{theme:g.default.THEMES.LIGHT,title:E.default.translate("reports.not-final-dialog.title"),content:E.default.translate("reports.not-final-dialog.message"),actions:t})}},{key:"_getTimerDisplay",value:function(){if(!this._hasTimer||this.submissionOccurred)return null;var e=60*p.default.getAppdata().appConf.scheduleCi.timer.minutesToStartDisplay;return c.default.createElement(_.default,{secondsToRun:this._remainingTimeInSeconds,onTimerEnd:this._forceSubmit,startToDisplayInSeconds:e,displayMessageTop:E.default.translate("force-submit-message-part-one"),displayMessageBottom:E.default.translate("force-submit-message-part-two"),hideTimer:this._keepTimerInBackground})}},{key:"_forceSubmit",value:function(){this._submitPromiseResolve()}},{key:"_sendPlayerReady",value:function(){var e=this;this._keepAlive.elementKeepAlive(document.body),this._communicator.send("ready",{listenTo:[b.MESSAGE_TYPE.STOP,b.MESSAGE_TYPE.MOVE,b.MESSAGE_TYPE.RESUME,b.MESSAGE_TYPE.BREAK]},(function(t,n){n&&n.success||C.error("playanywhere",{message:"TaskGroupPlayer: Parent did not return success"}),e._sendLessonMetaData()}))}},{key:"_sendLessonMetaData",value:function(){this._communicator.send("sendMessage",{type:b.MESSAGE_TYPE.LESSON_METADATA,messageData:{name:this._name,taskGroups:[{id:this._taskGroupId,version:this._taskGroupVersion}],ciType:this.ciType,ciId:this._ciId,ciVersion:this._ciVersion,interactions:{serviceUrl:p.default.getAppdata().backend_url,context:this._interactions.context,jsUrl:this._interactions.js,cssUrl:this._interactions.css}}})}},{key:"dispatchCIEvent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=k(k({},this._interactions.context.contextObject),{},{channelId:this._channelId,contentItemId:this._ciId,contentItemVersion:this._ciVersion,userId:this._user.id,contentSessionId:this._contentSessionId}),r={type:"BUZZ_PLAYER",id:this._taskGroupId,version:this._taskGroupVersion};n||(n=Date.now()),T.default.dispatchCIEvent(this._communicator,e,t,i,r,n,a)}},{key:"_sendCILoadedEvent",value:function(e,t){var n=e?b.MESSAGE_TYPE.CI_LOADED:b.MESSAGE_TYPE.CI_TERMINATED;this.dispatchCIEvent(n,"ECHO_TG",this._loadedTimestamp,t)}},{key:"_onPlayerLoaded",value:function(e){this._playerApi=e}},{key:"_sendReportsToolInterceptor",value:function(){this.ciType===f.default.CI_TYPE.ASSESSMENT&&p.default.isLearner()&&this._communicator.send("sendMessage",{type:b.MESSAGE_TYPE.REGISTER_TOOL_INTERCEPTOR,messageData:{toolId:"reports",interceptor:this._reportsToolInterceptor}})}},{key:"_reportsToolInterceptor",value:function(e){this._playerApi&&(this._playerApi.isTaskGroupPendingCheck()?this._renderPlayer(!0):e())}},{key:"_sendAliveEvent",value:function(){this.dispatchCIEvent(b.MESSAGE_TYPE.USER_ACTIVITY,"ECHO_TG")}},{key:"_finishDestroy",value:function(e){var t=this;this._sendCILoadedEvent(!1,(function(){t._communicator.destroy(),u.default.render(c.default.createElement("div",null),t._el,e)}))}},{key:"_destroy",value:function(e,t,n){this._keepAlive.destroy(),window.removeEventListener("beforeunload",this._boundCILoadedEvent),this._taskGroupView?this._taskGroupView.unmountView(this._finishDestroy.bind(this,n)):this._finishDestroy(n)}},{key:"isAssessmentSubmitted",value:function(){return!!this._playerApi&&this._playerApi.isAssessmentSubmitted()}},{key:"interactionsContextProviderId",get:function(){return this.ciType===f.default.CI_TYPE.ASSESSMENT?"ECHO_ASSESSMENT":"ECHO_TG"}},{key:"ciType",get:function(){switch(this._player.playerType){case"assessment":return f.default.CI_TYPE.ASSESSMENT;case"taskgroup":default:return f.default.CI_TYPE.WORK_SHEET}}}]),e}();t.default=O},2847:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(9)),r=a(n(3)),o=a(n(4)),s=a(n(0)),l=a(n(24)),c=n(62),u=a(n(129)),d=a(n(21)),f=a(n(13)),p=a(n(945)),h=a(n(28)),m=a(n(53)),v=a(n(610)),g=n(258),E=a(n(2213)),y=a(n(2323)),_=n(2199),S=a(n(2848)),T=a(n(2324));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=h.default.Instance,C=m.default.LogManager,O="PARALLEL",P="LAYERED",N=function(){function e(t,n){(0,r.default)(this,e),this._loadedTimestamp=Date.now(),this._messageReceivedBind=this._messageReceived.bind(this),this._sendPlayerReady=this._sendPlayerReady.bind(this),window.addEventListener("message",this._messageReceivedBind,!1),this._keepAlive=new v.default(this._sendAliveEvent.bind(this)),this._player=n.player,this._content=n.content,this._user=n.user,this._channelId=n.channelId,this._token=n.token,this._customHeaders=n.customHeaders,this._xapiContext=n.xapiContext,this._clk=n.clk,this._previewMode=n.player.additionalPlayerInfo.previewMode;var a=n.player.additionalPlayerInfo.interactions;this._interactions={context:{providerId:"ECHO_FUSE",contextObject:I(I({},a.context),{},{userId:n.user.id,channelId:n.channelId})}},this._communicator=new u.default(t,window,window,{destroy:this._destroy},this),this._el=document.getElementById(this._player.targetId),this._isPersistent=f.default.isLearner(),this.toggleFuseExitDialog=this._toggleFuseExitDialog.bind(this),this._boundCILoadedEvent=this._sendCILoadedEvent.bind(this,!1,(function(){})),window.addEventListener("beforeunload",this._boundCILoadedEvent),T.default.init(),T.default.updateFlagsFromState(),this._getContentItem()}return(0,o.default)(e,null,[{key:"_onTryMeClosed",value:function(){var e={dontShowTryMeFuse:!0};k.post(E.default.SEND_USER_APP_STATE,{},e,{failOnOffline:!0}).then((function(){var t=f.default.getAppdata();Object.assign(t.userAppState,e),f.default.setAppdata(t)})).catch((function(e){e&&"offline"===e.message||C.error("echo",{message:"Failed to update user app state: ".concat(JSON.stringify(e))})}))}},{key:"getQuestionTooltip",value:function(e,t){if(1===t)return e;var n=e+t-1;return"".concat(e,"-").concat(n)}}]),(0,o.default)(e,[{key:"_getContentItem",value:function(){this._communicator.send("sendMessage",{sendToServer:{url:this._content.contentUri,method:"GET",config:{}}},this._initPlayer.bind(this))}},{key:"_getUserState",value:function(e,t){var n=this;this._communicator.send("sendMessage",{sendToServer:{url:"".concat(e,"/ReportsService/report/studentPerformance"),method:"GET",params:{},config:{params:{userId:this._user.id,ciId:this._fuseId,ciVersion:this._fuseVersion,ciType:"FUSE",channelId:this._channelId},failOnOffline:!0}}},(function(e,a){a&&a.data&&a.data.tasks&&(n._taskStates=a.data.tasks,n._taskStates&&n._taskStates.length&&(T.default.isBuzzAnswered=!0)),t()}))}},{key:"_initPlayer",value:function(t,n){var a,i,r,o,c,u=this;try{o=n.data.fuse,a=o.components.filter((function(e){return e.isExternal}))[0],i=o.components.filter((function(e){return!e.isExternal}))[0],r=n.data.externalContents.filter((function(e){return e.id===a.contentId}))[0],c=o.hideSecondaryContentInPlayMode,T.default.hideSecondaryContentInPlayMode=c}catch(y){C.error("playanywhere",{message:"Fuse: missing data"})}if(o&&i){this._taskGroupId=i.contentId,this._taskGroupVersion=i.version,this._fuseId=o.id,this._fuseVersion=o.version,this._interactions.context.contextObject.contentItemId=this._fuseId,this._interactions.context.contextObject.contentItemVersion=this._fuseVersion,this._name=o.properties.name,this._isMustCompleteQuestions=f.default.isLearner()&&o.properties.isMustCompleteQuestions,this._contentSessionId="".concat(this._fuseId,"_").concat(Date.now());var d=o.properties.type;this._playerMode="INTERACTIVE_VIDEO"===d||"INTERACTIVE_SLIDES"===d?P:O,T.default.isInteractiveVideo="INTERACTIVE_VIDEO"===d;var h=f.default.getAppdata(),m=!1,v=function(){var t,n,a,i=this,u={onFuseOpenBuzz:this._onFuseOpenBuzz.bind(this),onFuseCloseBuzz:this._onFuseCloseBuzz.bind(this),onFuseExit:this._onFuseExitCallback.bind(this),onTryMeClosed:e._onTryMeClosed};this._sendCILoadedEvent(!0),f.default.isFeatureEnabled("gamified")&&f.default.isInstructor()&&!this._previewMode&&(t={type:g.TASK_BUTTONS.SHOW,callback:this._onPresentTask.bind(this)}),f.default.isInstructor()&&(n={enableShowAnswers:!0,enableHint:!0}),this._playerMode===P&&(a=this._getMarkers(o.interactive,t,n,this._isMustCompleteQuestions,m));var d=null;(c||this._playerMode===P)&&((null==h?void 0:h.userAppState)&&(h.userAppState.noSidePanel=!0),d="expand--full");var p=this._playerMode===O;l.default.render(s.default.createElement(S.default,{ref:function(e){i.fuseComponent=e},externalContent:r,markers:a,token:this._token,user:this._user,callbacks:u,communicator:this._communicator,channelId:this._channelId,eventData:{channelId:this._channelId,providerId:"ECHO_FUSE",contentItemId:this._fuseId,userId:this._user.id,playerType:"FUSE_PLAYER",contentSessionId:this._contentSessionId,dispatcherId:this._fuseId,version:this._fuseVersion},externalContentClassName:d,isSideBySide:p,isMustCompleteQuestions:this._isMustCompleteQuestions,availableOffline:m},p&&!c&&s.default.createElement(g.TaskGroup,{serviceUrl:h.backend_url,token:this._token,userId:this._user.id,context:this._interactions.context,taskGroupId:this._taskGroupId,taskGroupVersion:this._taskGroupVersion,isReadOnly:!1,isPersistent:this._isPersistent,showReport:this._isPersistent,singleTaskMode:!1,loadTaskGroupCallback:this._sendPlayerReady,loggerName:"playanywhere",customHeaders:this._customHeaders,isTaskGroupVisible:!1,ref:function(e){i._taskGroupView=e},xapiContext:this._xapiContext,taskButtons:t,showPollResults:f.default.isInstructor(),taskGroupOptions:n,isPreview:this._previewMode,showFlagInteractionButton:f.default.isLearner(),availableOffline:m})),this._el,(function(){(i._playerMode===P||c)&&i._sendPlayerReady()}))}.bind(this),E=function(e){m=e,f.default.isLearner()&&u._playerMode===P?u._getUserState(h.appConf.backendUrl,v):v()};p.default.isItemDownloaded(this._channelId,this._fuseId,this._fuseVersion).then(E).catch((function(){E(!1)}))}}},{key:"_getMarkers",value:function(t,n,a,i,r){var o=this;if(!t)return[];var s=1;return Object.keys(t.timeToTasks).map((function(l){var u=s,d=t.timeToTasks[l].length;s+=d;var p=t.timeToTasks[l],h=o._isMarkerCompleted(p),m=(0,c.v4)();return{markerId:m,time:Number(l),text:e.getQuestionTooltip(u,d),class:h?"is-completed":"",isCompleted:h,overlayElement:{component:g.OverlayTaskGroup,props:{token:o._token,context:o._interactions.context,taskGroupId:o._taskGroupId,taskGroupVersion:o._taskGroupVersion,isPersistent:o._isPersistent,customHeaders:o._customHeaders,xapiContext:o._xapiContext,taskButtons:n,taskGroupOptions:a,isPreview:o._previewMode,taskIds:p,startIndex:u,updateMarkerCompletion:o._updateMarkerCompletion.bind(o,m),isBlockingInteraction:i,isCompleted:h,time:Number(l),availableOffline:r,onAnsweredTaskGroup:e._handleAnsweredTaskGroup,loggerName:"playanywhere",isInteractionsThemeV2:f.default.isFeatureEnabled("interactionsThemeV2")}}}}))}},{key:"_isMarkerCompleted",value:function(e){var t=this,n=!1;return this._taskStates&&(n=e.map((function(e){var n=t._taskStates.find((function(t){return t.taskId===e}));return!n||"unanswered"!==n.completion})).every((function(e){return!0===e}))),n}},{key:"_updateMarkerCompletion",value:function(e,t){var n=this.fuseComponent.getMarkers();if(n){var a=n.map((function(n){return n.markerId===e&&(n.isCompleted=t,n.overlayElement.props.isCompleted=t,n.class=t?"is-completed":""),n}));this.fuseComponent.setMarkers(a)}}},{key:"_onPresentTask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.taskVersion,a=e.taskGroupId,i=e.taskGroupVersion,r=e.taskIndex,o=e.taskType,s=this._interactions.context.contextObject,l={providerId:this._interactions.context.providerId,contextObject:s};delete l.contextObject.userId,this._communicator.send("pushTo",{type:d.default.SERVER_PUSH_TYPES.SEND,channel:[d.default.LOCAL_CHANNEL,"user/".concat(f.default.getUser().id)],data:{event:"PRESENT_TASK",title:this._name,taskGroup:{id:a,version:i},task:{id:t,version:n,index:r,type:o},ci:{id:a,version:i,type:d.default.CI_TYPE.FUSE},clk:this._clk,channelId:this._channelId,context:l}})}},{key:"_toggleFuseExitDialog",value:function(e){this.fuseExitCallback=e,this.fuseComponent&&this.fuseComponent.toggleFuseExitDialog()}},{key:"_onFuseExitCallback",value:function(e){var t={dotShowExitFuseDialog:!T.default.isExitDialogShown};k.post(E.default.SEND_USER_APP_STATE,{},t,{failOnOffline:!0}).then((function(){var e=f.default.getAppdata();Object.assign(e.userAppState,t),f.default.setAppdata(e)})).catch((function(e){e&&"offline"===e.message||C.error("echo",{message:"Failed to update user app state: ".concat(JSON.stringify(e))})})),!e&&this.fuseExitCallback&&this.fuseExitCallback()}},{key:"_onFuseOpenBuzz",value:function(){T.default.isBuzzAnswered=!0;var e=f.default.getAppdata().userAppState.viewedFuses||[];if(e.indexOf(this._fuseId)<0){var t={viewedFuses:e.concat([this._fuseId])};k.post(E.default.SEND_USER_APP_STATE,{},t,{failOnOffline:!0}).then((function(){var e=f.default.getAppdata();Object.assign(e.userAppState,t),f.default.setAppdata(e)})).catch((function(e){e&&"offline"===e.message||C.error("echo",{message:"Failed to update user app state: ".concat(JSON.stringify(e))})}))}this._taskGroupView.setActive(!0)}},{key:"_onFuseCloseBuzz",value:function(){this._taskGroupView.setActive(!1)}},{key:"dispatchCIEvent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=I(I({},this._interactions.context.contextObject),{},{channelId:this._channelId,contentItemId:this._fuseId,contentItemVersion:this._fuseVersion,userId:this._user.id,contentSessionId:this._contentSessionId}),r={type:"FUSE_PLAYER",id:this._fuseId,version:this._fuseVersion};n||(n=Date.now()),y.default.dispatchCIEvent(this._communicator,e,t,i,r,n,a)}},{key:"_sendCILoadedEvent",value:function(e,t){var n=e?_.MESSAGE_TYPE.CI_LOADED:_.MESSAGE_TYPE.CI_TERMINATED;this.dispatchCIEvent(n,"ECHO_FUSE",this._loadedTimestamp,t)}},{key:"_messageReceived",value:function(e){e&&e.data&&"KEEP_ALIVE"===e.data.type&&this._keepAlive.setKeepAlive(!0)}},{key:"_sendAliveEvent",value:function(){this.dispatchCIEvent(_.MESSAGE_TYPE.USER_ACTIVITY,"ECHO_FUSE")}},{key:"_sendPlayerReady",value:function(){var e=this;this._keepAlive.elementKeepAlive(document.body),this._communicator.send("ready",{listenTo:[_.MESSAGE_TYPE.STOP,_.MESSAGE_TYPE.MOVE,_.MESSAGE_TYPE.RESUME,_.MESSAGE_TYPE.BREAK]},(function(t,n){n&&n.success||C.error("playanywhere",{message:"TaskGroupPlayer: Parent did not return success"}),e._sendLessonMetaData()}))}},{key:"_sendLessonMetaData",value:function(){this._communicator.send("sendMessage",{type:_.MESSAGE_TYPE.LESSON_METADATA,messageData:{name:this._name,taskGroups:[{id:this._taskGroupId,version:this._taskGroupVersion}],ciType:d.default.CI_TYPE.FUSE,ciId:this._fuseId,ciVersion:this._fuseVersion,interactions:{serviceUrl:f.default.getAppdata().backend_url,context:this._interactions.context,jsUrl:this._interactions.js,cssUrl:this._interactions.css}}})}},{key:"_finishDestroy",value:function(e){var t=this;this._sendCILoadedEvent(!1,(function(){t._communicator.destroy(),l.default.render(s.default.createElement("div",null),t._el,e)}))}},{key:"_destroy",value:function(e,t,n){this._keepAlive.destroy(),window.removeEventListener("message",this._messageReceivedBind,!1),window.removeEventListener("beforeunload",this._boundCILoadedEvent),this._taskGroupView?this._taskGroupView.unmountView(this._finishDestroy.bind(this,n)):this._finishDestroy(n)}}],[{key:"_handleAnsweredTaskGroup",value:function(){T.default.isBuzzAnswered=!0}}]),e}();t.default=N},2848:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(12)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=a(n(0)),p=(i(n(2)),i(n(11))),h=i(n(13)),m=i(n(2385)),v=i(n(2849)),g=i(n(2850)),E=i(n(2852)),y=i(n(2324));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var S=function(e){(0,c.default)(n,e);var t=_(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e)).state={showBuzz:!1,needToWiggleSidebar:y.default.needToAnimateSlidrawer(),showOnFuseExitDialog:!1,clicked:!1,isOnMobile:!!n.isMobile(),markers:a.props.markers},a.rtl=h.default.isRtl(h.default.getAppdata().appConf.locale),a.onToggle=a.onToggle.bind((0,s.default)(a)),a.onTryMeClosed=a.onTryMeClosed.bind((0,s.default)(a)),a.onLeave=a._onLeave.bind((0,s.default)(a)),a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){window&&window.screen&&window.screen.orientation&&(window.screen.orientation.onchange=function(e){if(e.currentTarget.type.includes("landscape")){var t=document.querySelector("#stage");t&&n.setFullScreen(t)}else n.exitFullScreen()})}}],[{key:"isMobile",value:function(){var e=navigator.userAgent;return/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(e)}},{key:"setFullScreen",value:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},{key:"exitFullScreen",value:function(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)&&(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())}}]),(0,l.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=document.querySelector(".engage__container .player-container");e&&this.state.isOnMobile&&screen.width<=768&&(h.default.isBrowserSafari()?e.style.overflow="hidden":e.style.overflowY="hidden")}},{key:"componentWillUnmount",value:function(){var e=document.querySelector(".engage__container .player-container");e&&this.state.isOnMobile&&(h.default.isBrowserSafari()?e.style.overflow="":e.style.overflowY=""),window&&window.screen&&window.screen.orientation&&(window.screen.orientation.onchange=null)}},{key:"render",value:function(){var e=(0,p.default)("buzz",{clicked:this.state.clicked,closed:!this.state.showBuzz,open:this.state.showBuzz,wiggle:!h.default.isMobile()&&this.state.needToWiggleSidebar,rtl:this.rtl}),t=(0,p.default)("fuseplayer",{"safari-browser":h.default.isBrowserSafari()}),n=this.state.showOnFuseExitDialog?f.default.createElement(E.default,{show:y.default.needToShowExitDialog(),onLeave:this.onLeave}):"",a=!!h.default.getAppdata().appConf.featureFlags.disableOfficePlayerToolbar,i=h.default.isFeatureEnabled("allowDownloadMedia"),o=(0,p.default)("external",{"safari-browser":h.default.isBrowserSafari()},(0,r.default)({},this.props.externalContentClassName,this.props.externalContentClassName));return f.default.createElement("div",{className:t},f.default.createElement("div",{className:"fuse-container"},this.props.children&&f.default.createElement(g.default,{show:y.default.isTryMeOpen,onClose:this.onTryMeClosed}),n,f.default.createElement("div",{className:"".concat(this.state.showBuzz?"backdrop":"backdrop hidden")}),f.default.createElement("div",{className:o},f.default.createElement(m.default,{token:this.props.token,isSideBySide:this.props.isSideBySide,user:this.props.user,channelId:this.props.channelId,externalContent:this.props.externalContent,showCover:a,allowDownloadMedia:i,eventData:this.props.eventData,markers:this.state.markers,isMustCompleteQuestions:this.props.isMustCompleteQuestions,availableOffline:this.props.availableOffline})),this.props.children&&f.default.createElement("div",{className:e},f.default.createElement(v.default,{onClick:this.onToggle,isOnMobile:this.state.isOnMobile,state:this.state.showBuzz?"open":"close",communicator:this.props.communicator}),f.default.createElement("div",{className:"buzz-content"},this.props.children))))}},{key:"onTryMeClosed",value:function(){y.default.isTryMeOpen=!1,this.setState({needToWiggleSidebar:y.default.needToAnimateSlidrawer()}),this.props.callbacks.onTryMeClosed()}},{key:"onToggle",value:function(){y.default.isBuzzOpen=!0;var e=!this.state.showBuzz;this.setState({showBuzz:e,needToWiggleSidebar:y.default.needToAnimateSlidrawer(),clicked:!0}),this.props.callbacks[e?"onFuseOpenBuzz":"onFuseCloseBuzz"](),this._delayedSetState({clicked:!1},800)}},{key:"_delayedSetState",value:function(e,t){var n=this;setTimeout((function(){n.setState(e)}),t)}},{key:"_onLeave",value:function(e,t){this.toggleFuseExitDialog(),this.props.callbacks.onFuseExit(e,t)}},{key:"toggleFuseExitDialog",value:function(){var e=!this.state.showOnFuseExitDialog;this.setState({showOnFuseExitDialog:e})}},{key:"getMarkers",value:function(){return this.state.markers}},{key:"setMarkers",value:function(e){this.setState(e)}}]),n}(f.Component);S.defaultProps={token:{},user:{username:"",email:""},externalContent:{},callbacks:{onFuseOpenBuzz:function(){},onFuseCloseBuzz:function(){},onFuseExit:function(){},onTryMeClosed:function(){}},children:null,communicator:null,markers:null,externalContentClassName:null,isSideBySide:!1,isMustCompleteQuestions:!1,availableOffline:!1};var T=S;t.default=T},2849:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(11))),f=i(n(13));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e;return(0,r.default)(this,n),(e=t.call(this)).rtl=f.default.isRtl(f.default.getAppdata().appConf.locale),e}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.onClick,t=(0,d.default)("slidDrawer-tab",{rtl:this.rtl}),n=document.querySelector(".stage .tools"),a=(0,d.default)("slidrawer",{"safari-browser":f.default.isBrowserSafari(),"tools-appear":n&&n.getBoundingClientRect().width>0});return u.default.createElement("div",{className:a},u.default.createElement("div",{className:"slidrawer-wrapper"},u.default.createElement("div",{className:"slidrawer-border"}),u.default.createElement("div",{className:t,onClick:e})))}}]),n}(u.Component);t.default=h},2850:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(11))),f=i(n(18)),p=i(n(2851));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=h(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={dialogState:!1===e.show?"CLOSED":"OPEN"},a}return(0,o.default)(n,[{key:"UNSAFE_componentWillUpdate",value:function(e){this.props.show!==e.show&&!1===e.show&&this.setState({dialogState:"CLOSED"})}},{key:"render",value:function(){var e=this;if("CLOSED"===this.state.dialogState)return null;var t=[{id:"close",label:f.default.translate("tryme.close"),primary:!0,callback:function(){e.props.onClose(),e._closeDialog()}}],n=(0,d.default)("tryme__dialog-wrapper",{"tryme__dialog-wrapper--hidden":"HIDDEN"===this.state.dialogState});return u.default.createElement("div",{className:n,ref:function(t){e._dialog=t}},u.default.createElement(p.default,{dialogStyle:"tryme",message:f.default.translate("tryme.message"),options:t}))}},{key:"_closeDialog",value:function(){this.setState({dialogState:"CLOSED"})}}]),n}(u.Component);t.default=m},2851:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(11)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return u.default.createElement("div",{className:"".concat(this.props.dialogStyle," dialog")},this.props.onClose&&u.default.createElement("div",{className:"closeButton-icon--close",onClick:this.props.onClose}),u.default.createElement("div",{className:"dialog__message"},this.props.message),u.default.createElement("div",{className:"dialog__options"},this.props.options.map((function(e){var t=(0,d.default)("dialog__option",{"dialog__option--primary":e.primary});return u.default.createElement("div",{className:t,onClick:e.callback,key:"option-".concat(e.id)},e.label)}))))}}]),n}(u.Component);p.defaultProps={dialogStyle:"",message:"",options:[],onClose:null};var h=p;t.default=h},2852:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(18))),p=i(n(58)),h=i(n(356)),m=i(n(2324));function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=v(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).state={dialogState:!1===m.default.isExitDialogShown?"CLOSED":"OPEN",dontShowAgain:!1},a._toggleDontShowMeAgain=a._toggleDontShowMeAgain.bind((0,s.default)(a)),a._closeDialog=a._closeDialog.bind((0,s.default)(a)),a}return(0,o.default)(n,[{key:"render",value:function(){var e=this;if("CLOSED"===this.state.dialogState)return null;var t=[{id:"stay",type:p.default.BUTTON_TYPES.SECONDARY,text:f.default.translate("onexitfuse.buttons.stay"),onClick:function(){e._closeDialog(!0)}},{id:"leave",type:p.default.BUTTON_TYPES.PRIMARY,text:f.default.translate("onexitfuse.buttons.leave"),onClick:function(){e._closeDialog(!1)}}];return d.default.createElement(p.default,{theme:p.default.THEMES.LIGHT,title:f.default.translate("onexitfuse.title"),content:this._dialogBody(),actions:t,styleClass:"onexit-content",overlayStyleClass:"onexit-content__mask"})}},{key:"_dialogBody",value:function(){return d.default.createElement("div",{className:"onexit-content__dialog-body"},d.default.createElement("div",{className:"dialog-body-content"},f.default.translate("onexitfuse.content")),d.default.createElement("div",{className:"dialog-body-check"},d.default.createElement(h.default,{id:"chk-dont-show-onexit",checked:this.state.dontShowAgain,onClick:this._toggleDontShowMeAgain}),f.default.translate("onexitfuse.dontaskmeagain")))}},{key:"_toggleDontShowMeAgain",value:function(){var e=!this.state.dontShowAgain;this.setState({dontShowAgain:e}),m.default.isExitDialogShown=e}},{key:"_closeDialog",value:function(e){var t=this;this.setState({dialogState:"CLOSED"},(function(){t.props.onLeave(e)}))}}]),n}(d.Component);g.defaultProps={onLeave:function(){}};var E=g;t.default=E},2853:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PROVIDER_ID=void 0;var i=a(n(9)),r=a(n(33)),o=a(n(34)),s=a(n(3)),l=a(n(4)),c=a(n(1301)),u=a(n(946)),d=a(n(0)),f=a(n(24)),p=a(n(129)),h=a(n(21)),m=a(n(13)),v=a(n(53)),g=a(n(28)),E=a(n(610)),y=n(258),_=a(n(943)),S=n(114),T=a(n(44)),b=a(n(2213)),I=a(n(2323)),k=n(2199),C=a(n(2854)),O=a(n(945));function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=v.default.LogManager,L=g.default.Instance;t.PROVIDER_ID="UCONTENT";var R=function(){function e(t,n){(0,s.default)(this,e),this._messageReceived=this._messageReceived.bind(this),this._sendPlayerReady=this._sendPlayerReady.bind(this),this.renderPlayer=this.renderPlayer.bind(this),this._sendCompletedEvent=this._sendCompletedEvent.bind(this),this._communicator=new p.default(t,window,window,{destroy:this._destroy},this),this.initAttributes(n),window.addEventListener("message",this._messageReceived,!1),window.addEventListener("beforeunload",this._boundCILoadedEvent),this._getContentItem()}var t,n;return(0,l.default)(e,[{key:"initAttributes",value:function(e){var t,n;this._keepAlive=new E.default(this._sendAliveEvent.bind(this)),this._loadedTimestamp=Date.now(),this._player=e.player,this._content=e.content,this._user=e.user,this._channelId=e.channelId,this._channelData=e.channelData,this._token=e.token,this._customHeaders=e.customHeaders,this._contextItemId=e.contextItemId,this._contextItemType=e.contextItemType,this._clk=e.clk,this._previewMode=null!==(t=e.player.additionalPlayerInfo.previewMode)&&void 0!==t&&t,this._pageIndex=null!==(n=e.player.additionalPlayerInfo.pageIndex)&&void 0!==n?n:0,this._el=document.getElementById(this._player.targetId),this._isPersistent=m.default.isLearner(),this._hash=e.hash,this._boundCILoadedEvent=this._sendCILoadedEvent.bind(this,!1,(function(){})),this._onPageChanged=this._onPageChanged.bind(this),this._assignmentId=e.assignmentId,this._remainingTimeInSeconds=e.remainingTimeInSeconds}},{key:"_getContentItem",value:function(){var e=this;this._communicator.send("sendMessage",{sendToServer:{url:this._content.contentUri,method:"GET",config:{}}},function(){var t=(0,o.default)(r.default.mark((function t(n,a){var i,o,s,l;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l=a.data.ci,e._isMustCompleteQuestions=(m.default.isLearner()||e._previewMode)&&(null==l||null===(i=l.properties)||void 0===i?void 0:i.isMustCompleteQuestions),e._mustCompleteTrackScorm=null==l||null===(o=l.properties)||void 0===o?void 0:o.mustCompleteTrackScorm,e._videoCantSkip=(m.default.isLearner()||e._previewMode)&&(null==l||null===(s=l.properties)||void 0===s?void 0:s.videoCantSkip),!O.default.isSupport()){t.next=11;break}return t.next=8,T.default.isItemDownloaded({itemId:l.cid}).then((function(t){e.setState({isItemDownloaded:t})}));case 8:e._availableOffline=t.sent,t.next=12;break;case 11:e._availableOffline=!1;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),e._availableOffline=!1,A.warn(t.t0);case 18:return t.prev=18,e._initPlayer(n,a),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,14,18,21]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"_initPlayer",value:(n=(0,o.default)(r.default.mark((function t(n,a){var i,o,s=this;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=a.data.ci,t.next=4,e.getPagesFromManifest(a.data.pages);case 4:o=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A.error("playanywhere",{message:"CI: missing data"});case 10:if(this._ciData=i,i&&o){t.next=14;break}return this._sendPlayerReady(),t.abrupt("return");case 14:return this._currentPageId=e.getPageFromHash(this._hash),this._currentPageIndex=(0,u.default)(i.pages,(function(e){return e.cid===s._currentPageId})),this._ciId=i.cid,this._ciVersion=i.version,this._name=i.name,this._contentSessionId="".concat(this._ciId,"_").concat(Date.now()),o=this._getPagesInOrder(o),t.next=23,_.default.initApi();case 23:this._isMustCompleteQuestions?this._getPagesCompletion(o,(function(e){s.renderPlayer(i,o,e)})):this._getPagesCompletion(o,(function(e){for(var t=0;t<e.length-1;t++)e[t].ignore=!0,e[t].isLocked=!1;e[e.length-1].isLocked=!1,s.renderPlayer(i,o,e)}));case 24:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(e,t){return n.apply(this,arguments)})},{key:"_getPagesInOrder",value:function(e){return this._ciData.pages.map((function(t){var n=t.cid;return e[n]}))}},{key:"_getPagesCompletion",value:function(e,t){var n=this,a=!1,i=Object.keys(e),s=[],l=!1,u=function(){var d=(0,o.default)(r.default.mark((function o(){var d,f,p,v,g,E,y,_,S=arguments;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((d=S.length>0&&void 0!==S[0]?S[0]:0)>=i.length)){r.next=5;break}return l||n._sendCompletedEvent(),t(s),r.abrupt("return");case 5:if(f=e[i[d]],!(p=f.taskGroupModel)){r.next=11;break}n._getTaskGroupApi(p,(function(e){if(n._ciData.assessment)e.userStateStore.initializeCompletedTaskCount(),g=e.completedTasksCount,v=e.getCheckableTaskCount(),E=g===v;else{var t=e.isTaskGroupCompleted();v=t.countAnswerable,g=t.countCompleted,E=t.taskGroupCompleted}s.push({cid:f.cid,countAnswerable:v,countCompleted:g,isLocked:a}),E||(a=!0),v>0&&(l=!0),u(d+1)})),r.next=29;break;case 11:if(!n._mustCompleteTrackScorm||f.type!==h.default.CI_PAGE_TYPES.SCORM||!m.default.isScormSupportedVersion(f.presentation.metadata.schemaversion)){r.next=27;break}return r.prev=12,r.next=15,L.get(b.default.GET_SCORM_STATE,{conversionResultId:f.presentation.conversionResultId},{params:{channelId:n._channelId}});case 15:_=r.sent,y="completed"===(0,c.default)(null==_?void 0:_.state,null==_?void 0:_.CMI_COMPLETION_STATUS),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(12),y=!0;case 22:s.push({cid:f.cid,countAnswerable:1,countCompleted:y?1:0,isLocked:a}),a=!y,u(d+1),r.next=29;break;case 27:s.push({cid:f.cid,countAnswerable:0,countCompleted:0,isLocked:a}),u(d+1);case 29:case"end":return r.stop()}}),o,null,[[12,19]])})));return function(){return d.apply(this,arguments)}}();u()}},{key:"_getTaskGroupApi",value:function(e,t){var n,a,i=this,r=m.default.getUser(),o={taskGroupIdentity:{taskGroupId:null==e||null===(n=e.taskGroup)||void 0===n?void 0:n.id,taskGroupVersion:null==e||null===(a=e.taskGroup)||void 0===a?void 0:a.version,taskGroupData:e},userStateOptions:{userId:m.default.isLearner()?r.id:void 0,channelId:this._channelId,isPersistent:!1},getEventsContext:function(e){e({providerId:"UCONTENT",data:{userId:m.default.isLearner()?r.id:void 0,id:i._ciId,contentItemId:i._ciId,contentItemVersion:i._ciVersion,channelId:i._channelId}})},channelId:this._channelId,viewMode:y.VIEW_MODE.QUIZ};_.default.getTaskGroupPlayerRef(o,(function(e,n){e&&(console.error(e),t(null)),t(n)}))}},{key:"renderPlayer",value:function(e,t,n){this._sendCILoadedEvent(!0),this._sendPlayerReady(),f.default.render(d.default.createElement(C.default,{availableOffline:this._availableOffline,communicator:this._communicator,channelId:this._channelId,channelData:N(N({},this._channelData),{},{contextItemId:this._contextItemId,contextItemType:this._contextItemType}),ciData:e,clk:this._clk,pages:t,pagesLock:n,contentId:this._ciId,contentVersion:this._ciVersion,assignmentId:this._assignmentId,pageId:this._currentPageId,onPageChanged:this._onPageChanged,isPreview:this._previewMode,isPersistent:m.default.isLearner(),pageIndex:this._pageIndex,isMustCompleteQuestions:this._isMustCompleteQuestions,videoCantSkip:this._videoCantSkip,remainingTimeInSeconds:this._remainingTimeInSeconds,eventData:{channelId:this._channelId,providerId:"UCONTENT",contentItemId:this._ciId,userId:this._user.id,playerType:"CI_PLAYER",contentSessionId:this._contentSessionId,dispatcherId:this._ciId,version:this._ciVersion},sendCompletedEvent:this._sendCompletedEvent}),this._el)}},{key:"dispatchCIEvent",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i={channelId:this._channelId,contentItemId:this._ciId,contentItemVersion:this._ciVersion,userId:this._user.id,contentSessionId:this._contentSessionId},r={type:"CI_PLAYER",id:this._ciId};n||(n=Date.now()),I.default.dispatchCIEvent(this._communicator,e,t,i,r,n,a)}},{key:"_sendCILoadedEvent",value:function(e,t){var n=e?k.MESSAGE_TYPE.CI_LOADED:k.MESSAGE_TYPE.CI_TERMINATED;this.dispatchCIEvent(n,"UCONTENT",this._loadedTimestamp,t)}},{key:"_messageReceived",value:function(e){e&&e.data&&"KEEP_ALIVE"===e.data.type&&this._keepAlive.setKeepAlive(!0)}},{key:"_sendAliveEvent",value:function(){this.dispatchCIEvent(k.MESSAGE_TYPE.USER_ACTIVITY,"UCONTENT")}},{key:"_sendPlayerReady",value:function(){var e=this;this._keepAlive.elementKeepAlive(document.body),this._communicator.send("ready",{listenTo:[k.MESSAGE_TYPE.STOP,k.MESSAGE_TYPE.MOVE,k.MESSAGE_TYPE.RESUME,k.MESSAGE_TYPE.BREAK]},(function(t,n){n&&n.success||A.error("playanywhere",{message:"CIPlayer: Parent did not return success"}),e._sendLessonMetaData(),e._sendMovePage()}))}},{key:"_sendCompletedEvent",value:function(){var e="".concat(m.default.getAppdata().backend_url).concat(S.PATH).concat(S.USER_STATE_POST_PATH);return L.post(e,{},{logEvents:[this._getTaskGroupCompletedEvent()]})}},{key:"_getTaskGroupCompletedEvent",value:function(){return{action:"TASK_GROUP_COMPLETED",contextObject:{channelId:this._channelId,contentItemId:this._ciId,contentItemVersion:this._ciVersion,userId:this._user.id,contentSessionId:this._contentSessionId},contextProviderId:"UCONTENT",dispatcher:{type:"CI_PLAYER",id:this._ciId,version:this._ciVersion},eventData:{channelId:this._channelId,contentItemId:this._ciId,contentItemVersion:this._ciVersion,userId:this._user.id},timestamp:(new Date).getTime()}}},{key:"_sendLessonMetaData",value:function(){this._communicator.send("sendMessage",{type:k.MESSAGE_TYPE.LESSON_METADATA,messageData:{pages:this._ciData.pages,name:this._name,ciType:h.default.CI_TYPE.UCONTENT,ciId:this._ciId,ciVersion:this._ciVersion}})}},{key:"_onPageChanged",value:function(e,t){this._currentPageIndex=e,this._currentPageId=t,this._sendMovePage()}},{key:"_sendMovePage",value:function(){this._ciData.pages.length&&this._communicator.send("sendMessage",{type:k.MESSAGE_TYPE.MOVE,messageData:{pageId:this._currentPageId,pageNumber:this._currentPageIndex+1}})}},{key:"_finishDestroy",value:function(e){var t=this;this._sendCILoadedEvent(!1,(function(){t._communicator.destroy(),f.default.render(d.default.createElement("div",null),t._el,e)}))}},{key:"_destroy",value:function(e,t,n){this._keepAlive.destroy(),window.removeEventListener("message",this._messageReceived,!1),window.removeEventListener("beforeunload",this._boundCILoadedEvent),this._finishDestroy(n)}}],[{key:"getPagesFromManifest",value:(t=(0,o.default)(r.default.mark((function e(t){var n,a,i,o=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&0!==t.length){e.next=3;break}return e.abrupt("return",null);case 3:return t.forEach((function(e){var t=L.get(e.url);n.push(t)})),e.prev=4,e.next=7,Promise.all(n);case 7:return a=e.sent,i={},a.forEach((function(e){Object.assign(i,e.pages),o.extractInteractionsModelPerPage(e)})),e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(4),A.error(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[4,13]])}))),function(e){return t.apply(this,arguments)})},{key:"extractInteractionsModelPerPage",value:function(e){e.pagesOrder.forEach((function(t){var n=e.pages[t],a=n.taskGroup&&n.taskGroup.content?n.taskGroup.content.cid:"";a&&(n.taskGroupModel=e.interactions[a])}))}},{key:"getPageFromHash",value:function(e){try{var t=(e=e?e.split("/"):[]).indexOf("page");return-1!==t?e[t+1]:this._ciData.pages[0]}catch(n){return}}}]),e}();t.default=R},2854:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(33)),o=i(n(34)),s=i(n(40)),l=i(n(3)),c=i(n(4)),u=i(n(12)),d=i(n(6)),f=i(n(8)),p=i(n(7)),h=i(n(61)),m=i(n(946)),v=a(n(0)),g=(i(n(2)),i(n(13))),E=n(608),y=i(n(2855)),_=i(n(2857)),S=a(n(1236));function T(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var k=function(e){(0,d.default)(a,e);var t,n=I(a);function a(e){var t,i;(0,l.default)(this,a),(i=n.call(this,e)).keyDown=function(e){"27"!==e.keyCode&&"Escape"!==e.code||i.props.communicator.send("goBack")};var r=(0,h.default)(e.pageId)?e.pageIndex:Math.max(0,(0,m.default)(e.ciData.pages,{cid:e.pageId}));return(null===(t=e.pagesLock)||void 0===t?void 0:t[r].isLocked)&&(r=0),i.state={currentPageIndex:r,showMustCompleteMessage:!1,showMustCompleteMessageFadeout:!1,pagesLock:e.pagesLock,isLastPageCompleted:e.pagesLock&&i._isLastPageCompleted(e.pagesLock),enabledPageListClick:!0},i.stageRef=v.default.createRef(),i.handleChangePage=i.handleChangePage.bind((0,u.default)(i)),i.handleSelectPage=i.handleSelectPage.bind((0,u.default)(i)),i.updatePageLock=i.updatePageLock.bind((0,u.default)(i)),i._onListToggle=i._onListToggle.bind((0,u.default)(i)),i._isPageLocked=i._isPageLocked.bind((0,u.default)(i)),i._enabledPageListClick=i._enabledPageListClick.bind((0,u.default)(i)),i}return(0,c.default)(a,[{key:"componentDidMount",value:function(){this.handleSelectPage(this.state.currentPageIndex),window.addEventListener("keydown",this.keyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyDown)}},{key:"renderPlayerThumbnails",value:function(){return v.default.createElement(y.default,{contentId:this.props.contentId,pages:this.props.pages,isPageLocked:this._isPageLocked,currentPageIndex:this.state.currentPageIndex,changePage:this.handleChangePage,onToggle:this._onListToggle,numOfLocked:this.state.pagesLock?this.state.pagesLock.reduce((function(e,t){return e+(t.isLocked?1:0)}),0):0,disabled:!this.state.enabledPageListClick})}},{key:"_enabledPageListClick",value:function(e){this.setState({enabledPageListClick:e})}},{key:"_onListToggle",value:function(){var e=this;setTimeout((function(){e.stageRef.current._onResize()}),200)}},{key:"renderPageMessage",value:function(){var e=this,t=this.state,n=t.currentPageIndex,a=t.showMustCompleteMessage,i=t.pagesLock,r=t.showMustCompleteMessageFadeout;if(null===n||!a||!i)return null;var o=null;return(o="string"==typeof a?i.find((function(e){return e.cid===a})):i[n])?v.default.createElement(E.PageMessage,{pageId:o.cid,notCompletedTasksCount:o.countAnswerable-o.countCompleted,totalTasksCount:o.countAnswerable,onCloseClick:function(){e.setState({showMustCompleteMessage:!1})},fadeout:r}):null}},{key:"updatePageLock",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=this.state.pagesLock;if(a){var i=a.findIndex((function(e){return e.cid===t})),r=a[i];if(r){var o,l;if(r.countAnswerable?(r.countCompleted+=e?n:-n,r.countCompleted=Math.min(r.countCompleted,r.countAnswerable)):e=!0,e){if(((null!==(o=r.countAnswerable)&&void 0!==o?o:0)===(null!==(l=r.countCompleted)&&void 0!==l?l:0)||r.ignore)&&-1!==(i=a.findIndex((function(e){return null==e?void 0:e.isLocked})))){var c=a[i];c.isLocked=!1,r=c;for(var u=i+1;u<a.length;++u){var d,f;if(c=a[u],(null!==(d=r.countAnswerable)&&void 0!==d?d:0)!==(null!==(f=r.countCompleted)&&void 0!==f?f:0)&&!r.ignore)break;c.isLocked=!1,r=c}}}else if(this.props.isMustCompleteQuestions)for(var p=i+1;p<a.length;++p)a[p].isLocked=!0;var h=(0,s.default)(a);this._sendEventIfCompleted(h),this.setState({pagesLock:h,isLastPageCompleted:this._isLastPageCompleted(h)})}}}},{key:"_sendEventIfCompleted",value:(t=(0,o.default)(r.default.mark((function e(t){var n,a,i,o,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.default.isLearner()&&!this.props.ciData.assessment){e.next=2;break}return e.abrupt("return");case 2:n=T(t),e.prev=3,n.s();case 5:if((a=n.n()).done){e.next=11;break}if(s=a.value,!((null!==(i=s.countAnswerable)&&void 0!==i?i:0)>(null!==(o=s.countCompleted)&&void 0!==o?o:0))){e.next=9;break}return e.abrupt("return");case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:this.props.sendCompletedEvent();case 20:case"end":return e.stop()}}),e,this,[[3,13,16,19]])}))),function(e){return t.apply(this,arguments)})},{key:"renderPlayerStage",value:function(){var e=this,t=this.props,n=t.channelId,a=t.contentId,i=t.contentVersion,r=t.availableOffline,o=t.ciData,s=t.channelData,l=t.communicator,c=t.isPreview,u=t.clk,d=t.isMustCompleteQuestions,f=t.eventData,p=t.assignmentId,h=t.videoCantSkip,m=t.remainingTimeInSeconds;return v.default.createElement(_.default,{ref:this.stageRef,pages:this.props.pages,currentPageIndex:this.state.currentPageIndex,changePage:this.handleChangePage,channelId:n,contentId:a,contentVersion:i,assignmentId:p,availableOffline:r,ciData:o,clk:u,channelData:s,communicator:l,isPreview:c,isMustCompleteQuestions:d,shouldRenderMustCompleteMessage:d?function(t){e.setState({showMustCompleteMessage:t})}:void 0,isPageLocked:this._isPageLocked,isLastPageCompleted:this.state.isLastPageCompleted,eventData:f,enabledPageListClick:this._enabledPageListClick,videoCantSkip:h,remainingTimeInSeconds:m})}},{key:"_isPageLocked",value:function(e){var t,n,a=this.state.pagesLock;return!!a&&(null!==(t=null===(n=a[e])||void 0===n?void 0:n.isLocked)&&void 0!==t&&t)}},{key:"_isPageCompleted",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.pagesLock;if(!a)return!0;var i=a.findIndex((function(t){return t.cid===e})),r=a[i];return(null!==(t=null==r?void 0:r.countAnswerable)&&void 0!==t?t:0)===(null!==(n=null==r?void 0:r.countCompleted)&&void 0!==n?n:0)}},{key:"_isLastPageCompleted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.pagesLock,t=this.props.pages;return this._isPageCompleted(t[t.length-1].cid,e)}},{key:"handleChangePage",value:function(e){var t=this;this._isPageLocked(e)?this.setState({showMustCompleteMessage:!0}):(this._isPageLocked(e+1)&&(this.setState({showMustCompleteMessage:!0}),setTimeout((function(){t.setState({showMustCompleteMessageFadeout:!0},(function(){setTimeout((function(){t.setState({showMustCompleteMessageFadeout:!1,showMustCompleteMessage:!1})}),300)}))}),3e3)),this.setState({currentPageIndex:e}),this.handleSelectPage(e))}},{key:"handleSelectPage",value:function(e){if(this.props.pages[e]){var t=this.props.pages[e].cid;this.props.onPageChanged(e,t),this.setNav("page/".concat(t))}}},{key:"setNav",value:function(e){this.props.communicator.send("setNav",{id:"echoPlayer",hash:e,options:{replace:!0}})}},{key:"render",value:function(){return v.default.createElement("div",{className:"ci-player-base-container"},v.default.createElement(S.PagesProvider,{value:{pagesLock:this.state.pagesLock,updatePageLock:this.updatePageLock}},this.renderPageMessage(),!g.default.isMobile()&&!g.default.isTablet()&&this.renderPlayerThumbnails(),this.renderPlayerStage()))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"number"==typeof e.currentPageIndex&&e.currentPageIndex!==t.currentPageIndex?{showMustCompleteMessage:!1}:null}}]),a}(v.Component);k.defaultProps={availableOffline:!1,isMustCompleteQuestions:!1,communicator:null,clk:"",channelId:"",channelData:{},pageId:void 0,pageIndex:0,pagesLock:void 0,assignmentId:null,videoCantSkip:!1,remainingTimeInSeconds:void 0},k.contextType=S.default;var C=k;t.default=C},2855:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(2523))),p=i(n(13)),h=i(n(2856));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e,a){var i;(0,r.default)(this,n),(i=t.call(this,e,a))._storeKey="PlayerPageList-state-".concat(e.contentId);var o,l=localStorage.getItem(i._storeKey);return o=l?"true"===l:!p.default.getAppdata().appConf.collapsedPageListDefault,i.state={isPanelOpen:o},i.toggleClosePanel=i.toggleClosePanel.bind((0,s.default)(i)),i}return(0,o.default)(n,[{key:"render",value:function(){var e=this.state.isPanelOpen;return d.default.createElement("nav",{className:"ci-player-page-list-panel ".concat(e?"page-list-panel-open":"page-list-panel-close")},this.renderPageList(),this.renderTabSection())}},{key:"renderPageList",value:function(){var e=this.props,t=e.changePage,n=e.pages,a=e.currentPageIndex,i=e.isPageLocked,r=e.numOfLocked,o=e.disabled,s=this.state.isPanelOpen;return d.default.createElement(f.default,{disabled:o,pages:n,currentPageIndex:a,changePage:t,isPageLocked:i,classStyle:"ci-player-page-list-panel__page-list".concat(s?"":"--hide"),ignoreGenerateThumbnailAnimation:!0,numOfLocked:r,isPanelOpen:s})}},{key:"renderTabSection",value:function(){var e=this.state.isPanelOpen?"t2kInt-icon-chevron-left":"t2kInt-icon-chevron-right";return d.default.createElement("div",{className:"ci-player-page-list-panel__tab",onClick:this.toggleClosePanel,tabIndex:"0",role:"button","aria-label":"Slides navigation"},d.default.createElement(h.default,null),d.default.createElement("span",{className:"ci-player-page-list-panel__tab__arrow-icon ".concat(e)}))}},{key:"toggleClosePanel",value:function(){var e=this.state.isPanelOpen;localStorage.setItem(this._storeKey,!e),this.setState((function(){return{isPanelOpen:!e}}),this.props.onToggle)}}]),n}(d.Component);v.defaultProps={isPageLocked:void 0,changePage:function(){},onToggle:function(){},currentPageIndex:0,numOfLocked:0,disabled:!1};var g=v;t.default=g},2856:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("path",{id:"Union_36","data-name":"Union 36",d:"M5871-869.794V-972h.031a7.912,7.912,0,0,0,7.174,7.174v.031H5877a10,10,0,0,1,10,10v68a10,10,0,0,1-9.878,10,7.913,7.913,0,0,0-6.09,7Z",transform:"translate(-5871 972)",fill:"#fff"}))}i.defaultProps={width:"16",height:"102.207",viewBox:"0 0 16 102.207"},e.exports=i,i.default=i},2857:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9)),o=i(n(3)),s=i(n(4)),l=i(n(12)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=i(n(962)),p=a(n(0)),h=(i(n(2)),i(n(11))),m=n(258),v=i(n(28)),g=i(n(2213)),E=i(n(13)),y=i(n(21)),_=i(n(129)),S=i(n(18)),T=a(n(2858)),b=i(n(2864)),I=a(n(608)),k=i(n(1239)),C=i(n(2384)),O=i(n(1294)),P=i(n(2878)),N=i(n(2882)),A=n(1236),L=i(n(2884));function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}var U=[".ci-player-page-list-panel",".t2k-app__inbox-wrapper",".t2k-app__qna-wrapper",".header-toolbar",".leaderboard",".normal-scroll-element",".t2k-text-area"],B={paddingBottom:"54px",normalScrollElements:U.join(", "),scrollOverflow:!0,scrollOverflowOptions:{scrollbars:!1,preventDefault:!1}},G="portrait",F="landscape",H=v.default.Instance,j=function(e){(0,c.default)(n,e);var t=x(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._onResize=E.default.debounce(a.handleWindowResized.bind((0,l.default)(a)),100),a.changePage=a.changePage.bind((0,l.default)(a)),a.throttledHandleWheel=(0,f.default)(a.handleWheel,1e3).bind((0,l.default)(a)),a.throttledHandleKeydown=(0,f.default)(a.handleKeydown,1e3).bind((0,l.default)(a)),a.debouncedSetStateVisibilityOfPages=E.default.debounce((function(){a.setState({visibilityOfPages:a.visibilityOfPagesTemp})}),500),a.updateCompletedTaskCountCallback=a.updateCompletedTaskCountCallback.bind((0,l.default)(a)),a.onFooterUpdate=a.onFooterUpdate.bind((0,l.default)(a)),a.setAssessmentSubmitted=a.setAssessmentSubmitted.bind((0,l.default)(a)),a.setCiIsDone=a.setCiIsDone.bind((0,l.default)(a)),a.handlePreScreenHidden=function(){return a.setState({isPreScreenShown:!1})},a.hideResetDialog=function(e){a.setState({showResetCIDialog:!1},(function(){e&&location.reload()}))},a.playerStageRef=(0,p.createRef)(),a.sectionManagerRef=(0,p.createRef)(),a.footerRef=(0,p.createRef)(),a.showFooter=E.default.isLearner()&&!E.default.getAppdata().appConf.hideEndOfCI,a.communicators=[],a.visibilityOfPagesTemp=new Array(e.pages.length).fill(!1),a.taskGroupConfigurations=new Array(e.pages.length).fill(null),a.mobileOrientation=E.default.isMobile()||E.default.isTablet()?n.getMobileOrientation():null,a.maxMobileHeightLandscape=0,a.autoRunAnimationTimeouts={},a.hasTimer="number"==typeof e.remainingTimeInSeconds,a.state={pageSizeFactor:1,shouldReloadTaskGroup:!1,isPreScreenShown:E.default.isMobile()||E.default.isTablet(),isTaskGroupOverlayOpen:!1,visibilityOfPages:new Array(e.pages.length).fill(!1),pagesCidWithAnimation:{},ciIsDone:!1,ciResultsHidden:!1,isScheduledAssessmentCompleted:void 0},a._submitPromise=new Promise((function(e){a._submitPromiseResolve=e})),a.closePlayer=a.closePlayer.bind((0,l.default)(a)),a.renderTaskGroupOverlay=a.renderTaskGroupOverlay.bind((0,l.default)(a)),a.getTaskGroupConfig=a.getTaskGroupConfig.bind((0,l.default)(a)),a.handleToggleTaskGroupOverlay=a.handleToggleTaskGroupOverlay.bind((0,l.default)(a)),a.handlePageVisibilityChanged=a.handlePageVisibilityChanged.bind((0,l.default)(a)),a.handleKeydown=a.handleKeydown.bind((0,l.default)(a)),a.handleWheel=a.handleWheel.bind((0,l.default)(a)),a.onPageResize=a.onPageResize.bind((0,l.default)(a)),a.jumpNext=a.jumpNext.bind((0,l.default)(a)),a._forceSubmit=a._forceSubmit.bind((0,l.default)(a)),a}return(0,s.default)(n,[{key:"getStageDimensions",value:function(){if(E.default.isMobile()||E.default.isTablet()){var e=window.innerWidth,t=window.innerHeight;return E.default.isLandscape()&&!E.default.isCordova()&&(t=Math.max(t,this.maxMobileHeightLandscape),this.maxMobileHeightLandscape=t),{stageWidth:e,stageHeight:t}}if(this.playerStageRef.current){var n=this.playerStageRef.current;return{stageWidth:n.offsetWidth,stageHeight:n.offsetHeight}}return{stageWidth:0,stageHeight:0}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.contentId,a=t.contentVersion,i=t.ciData,r=t.channelId;H.get(g.default.GET_SLIDE_TO_PAGE_CID_MAP,{contentId:n,contentVersion:a}).then((function(t){e.pptLinksMap=t})),i.assessment&&E.default.isLearner()&&H.get(g.default.GET_IS_CI_RESULTS_HIDDEN,{},{params:{channelId:r,contentId:n}}).then((function(t){e.setState({ciResultsHidden:null==t?void 0:t.isReportLocked})})),window.addEventListener("resize",this._onResize),this.onPageResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._onResize),this.communicators.forEach((function(e){return e&&e.destroy()}))}},{key:"handleWindowResized",value:function(){var e=this;if(E.default.isMobile()||E.default.isTablet()){if(E.default.isLandscape()&&this.mobileOrientation===F||!E.default.isLandscape()&&this.mobileOrientation===G)return;this.mobileOrientation=n.getMobileOrientation()}this.onPageResize(),(E.default.isMobile()||E.default.isTablet())&&setTimeout((function(){e.onPageResize()}),1e3)}},{key:"onPageResize",value:function(){var e=this.getStageDimensions(),t=n.getPadding(e),a=(e.stageWidth-2*t)/y.default.CI_PAGE_BASE_SIZE.WIDTH;this.setState({pageSizeFactor:a}),E.default.isMobile()||E.default.isTablet()||!this.playerStageRef.current||(this.playerStageRef.current.style.padding="0 ".concat(t,"px"))}},{key:"getPageWidth",value:function(){return this.state.pageSizeFactor*y.default.CI_PAGE_BASE_SIZE.WIDTH}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.pages;this.updateScrollController(),t.forEach((function(t,n){var a=e.shouldShowPageContent(n);a&&!e.communicators[n]?e.communicateWithPage(t):!a&&e.communicators[n]&&(e.communicators[n].destroy(),e.communicators[n]=null)}))}},{key:"setStageAsScrollController",value:function(e){var t=e?document.addEventListener:document.removeEventListener;t("wheel",this.throttledHandleWheel),t("keydown",this.throttledHandleKeydown)}},{key:"updateScrollController",value:function(){var e,t=this.props,n=t.pages,a=t.currentPageIndex;this.setStageAsScrollController(!1),this.state.isTaskGroupOverlayOpen||(null===(e=n[a])||void 0===e?void 0:e.type)!==y.default.CI_PAGE_TYPES.PPT_FILE||this.setStageAsScrollController(!0)}},{key:"communicateWithPage",value:function(e){var t=this,n=this.props.pages,a=this.getPageIndex(e),i=n.length-1+(this.showFooter?1:0);if(e.type===y.default.CI_PAGE_TYPES.PPT_FILE){var o="ppt-wrapper-".concat(e.cid),s=document.getElementById(o);s&&(this.communicators[a]=new _.default(o,window,s.contentWindow,{onScrollBeforeFirstAnimation:function(e,n,r){if(!t.state.isTaskGroupOverlayOpen){var o=a-1;t.props.currentPageIndex===a&&o>=0?t.props.changePage(o):t.showFooter&&t.props.currentPageIndex===i&&t.props.changePage(i-1),r()}},onScrollAfterLastAnimation:function(e,n,r){if(!t.state.isTaskGroupOverlayOpen){var o=a+1;t.props.currentPageIndex===a&&o<=i&&t.props.changePage(o),r()}},onPptLinkClick:function(a,i,r){var o;if(!t.state.isTaskGroupOverlayOpen){var s=t.props.changePage,l=i.gotoSlide,c=null==e||null===(o=e.presentation)||void 0===o?void 0:o.conversionResultId;r();var u=t.pptLinksMap[c];if(u){var d=u[l];if(d)if(E.default.isMobile()||E.default.isTablet()){var f=document.getElementById("pageWrapper-".concat(d));if(!f)return;f.scrollIntoView({behavior:"auto",block:"center",inline:"center"})}else{var p=n.findIndex((function(e){return e.cid===d}));t.sectionManagerRef.current.setScrollingSpeed(0),s(p),setTimeout((function(){t.sectionManagerRef.current.setScrollingSpeed(700)}),0)}}}},onPageLoaded:function(e,a,i){var o=-1,s=t.communicators.find((function(t,n){return(null==t?void 0:t._channel)===e&&(o=n,!0)}));if(s&&-1!==o){if(E.default.isPC()){var l=t.communicators[t.props.currentPageIndex];(null==l?void 0:l._channel)===e||s.send("pausePage")}else t.state.visibilityOfPages[o]||s.send("pausePage");if(a.totalAnimationSteps&&!t.state.pagesCidWithAnimation[n[o].cid]){var c=D(D({},t.state.pagesCidWithAnimation),{},(0,r.default)({},n[o].cid,!0));t.setState({pagesCidWithAnimation:c},i)}}}},this))}}},{key:"getPageIndex",value:function(e){return this.props.pages.findIndex((function(t){return t.cid===e.cid}))}},{key:"changePage",value:function(e){var t=this.props,n=t.pages,a=t.currentPageIndex,i=n[a];if("number"!=typeof e||(null==i?void 0:i.type)!==y.default.CI_PAGE_TYPES.PPT_FILE)this.props.changePage(e);else{var r=this.communicators[a];r&&r.send("goToNextAnimation")}}},{key:"handleWheel",value:function(e){var t,n=this.communicators[this.props.currentPageIndex],a=!0,i=R(U);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(e.target.closest(r)){a=!1;break}}}catch(s){i.e(s)}finally{i.f()}if(n&&a){var o=e.deltaY;o<0?n.send("goToPrevAnimation"):o>0&&n.send("goToNextAnimation")}}},{key:"handleKeydown",value:function(e){var t=this.communicators[this.props.currentPageIndex];t&&("ArrowUp"===e.key?t.send("goToPrevAnimation"):"ArrowDown"===e.key&&t.send("goToNextAnimation"))}},{key:"handleToggleTaskGroupOverlay",value:function(e,t){var a=this;n.isPageWithScrollOverflow(e)&&E.default.isPC()&&n.toggleFixedAspectRatioForPage(e),this.setState({isTaskGroupOverlayOpen:t},(function(){a.props.enabledPageListClick(!t)}))}},{key:"handlePageVisibilityChanged",value:function(e,t){var n,a=this.getPageIndex(e);if(this.visibilityOfPagesTemp[a]!==t&&(this.visibilityOfPagesTemp[a]=t,this.debouncedSetStateVisibilityOfPages()),(null===(n=this.communicators)||void 0===n?void 0:n.length)&&e.type===y.default.CI_PAGE_TYPES.PPT_FILE){var i=this.communicators[a];null==i||i.send(t?"playPage":"pausePage")}}},{key:"renderPages",value:function(){var e=this,t=this.props.pages,a=E.default.isMobile()||E.default.isTablet()?{padding:"0 ".concat(n.getPadding(this.getStageDimensions()),"px"),boxSizing:"border-box"}:null;return t.map((function(t,n){var i=(0,h.default)("ci-player-stage-page","ci-player-stage-page-".concat(t.cid));return p.default.createElement("div",{className:i,key:t.cid,id:t.cid,style:a},e.renderPage(t,n))}))}},{key:"renderPage",value:function(e,t){var a=this,i=this.props,r=i.channelId,o=i.contentId,s=i.contentVersion,l=i.availableOffline,c=i.communicator,u=i.clk,d=i.ciData,f=i.isMustCompleteQuestions,h=i.eventData,m=i.isPageLocked,v=i.isPreview,g=i.videoCantSkip,y=this.state.pagesCidWithAnimation;this.taskGroupConfigurations[t]||(this.taskGroupConfigurations[t]=this.getTaskGroupConfig(e));var _=y[e.cid];return p.default.createElement(p.default.Fragment,null,p.default.createElement(A.PagesConsumer,null,(function(n){return p.default.createElement(I.default,{availableOffline:l,isMustCompleteQuestions:f,backgroundColor:e.presentation&&e.presentation.bgColor,page:e,isLocked:m(t),channelId:r,contentId:o,contentVersion:s,borderBetweenPages:!1,pageMode:I.PageMode.PLAYER,overlayComponent:a.renderTaskGroupOverlay(e),defaultTaskGroupConfig:a.taskGroupConfigurations[t],pageWidth:a.getPageWidth(),showPageContent:a.shouldShowPageContent(t),disableVisibilityCheck:!(!E.default.isMobile()&&!E.default.isTablet())&&a.state.isTaskGroupOverlayOpen,onVisibilityChange:a.handlePageVisibilityChanged,communicator:c,ciName:d.name,clk:u,eventData:h,updatePageLock:n.updatePageLock,hasPptAnimation:_,isPreview:v,isAssessment:!!d.assessment,videoCantSkip:g})})),E.default.isMobile()||E.default.isTablet()?n.renderPageNumberIndicator(t):null)}},{key:"shouldShowPageContent",value:function(e){var t=this.props.pages,n=this.state.visibilityOfPages;if(t[e].type===y.default.CI_PAGE_TYPES.SCORM||t[e].type===y.default.CI_PAGE_TYPES.HTML)return n[e];var a=E.default.isMobile()||E.default.isTablet()?3:1,i=Math.max(0,e-a),r=Math.min(n.length-1,e+a);return n.slice(i,r+1).some((function(e){return e}))}},{key:"renderTaskGroupOverlay",value:function(e){var t=this.state,n=t.pageSizeFactor,a=t.shouldReloadTaskGroup,i=t.ciResultsHidden,r=this.props,o=r.channelId,s=r.clk,l=r.ciData,c=r.communicator,u=r.shouldRenderMustCompleteMessage,d=r.currentPageIndex,f=this.getPageIndex(e);return p.default.createElement(O.default,{page:e,pageSizeFactor:n,taskGroupConfig:this.taskGroupConfigurations[f],onToggleTaskGroupOverlay:this.handleToggleTaskGroupOverlay,shouldReloadTaskGroup:a,shouldRenderMustCompleteMessage:u,communicator:c,channelId:o,ciName:l.name,clk:s,jumpNext:this.jumpNext,ciResultsHidden:i,notInCurrentPage:E.default.isPC()&&f!==d})}},{key:"jumpNext",value:function(e){var t=this.props,n=t.pages,a=t.isPageLocked,i=this.getPageIndex(e);if(!a(i+1)){var r=i+1;if(r<=n.length-1+(this.showFooter?1:0)&&(this.props.changePage(r),E.default.isMobile()||E.default.isTablet())){var o=this.props.pages[r];if(o){var s,l=document.getElementById(o.cid);if(l.scrollIntoView(),null===(s=o.taskGroup)||void 0===s?void 0:s.presentation){var c=Object.keys(o.taskGroup.presentation);if(1===c.length&&o.taskGroup.presentation[c[0]].displayType===y.default.CI_PAGE_TASK_PRESENTATION_DISPLAY_TYPES.FULL_PAGE){var u,d=3;!function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;setTimeout((function(){(u=l.getElementsByClassName("mobile-fullpage-question")[0])?u.click():d>0&&(d--,e())}),t)}(0)}}}else{var f=E.default.isAndroid()?document.getElementById("t2k-app"):window,p=E.default.isAndroid()?f:document.documentElement;p.scrollTop=p.scrollHeight}}}}},{key:"getTaskGroupConfig",value:function(e){var t=this.props,n=t.channelId,a=t.contentId,i=t.contentVersion,r=t.ciData,o=t.isPreview,s=e.taskGroupModel,l=e.taskGroup,c=E.default.getUser(),u=r.locale,d=E.default.getAppdata().appConf.locale,f=(0,k.default)(n,u,d),p=l&&l.content?{taskGroupId:l.content.cid,taskGroupVersion:l.content.version}:{},h={contextObject:{userId:c.id,pageId:e.cid,contentItemId:a,contentItemVersion:i,channelId:n},providerId:"UCONTENT"};return Object.assign({},f,p,{context:h,taskGroupData:s,isPersistent:E.default.isLearner(),isPreview:o,viewMode:r.assessment?m.VIEW_MODE.ASSESSMENT:m.VIEW_MODE.QUIZ,updateCompletedTaskCountCallback:this.updateCompletedTaskCountCallback})}},{key:"updateCompletedTaskCountCallback",value:function(e){this.footerRef&&this.footerRef.current&&this.footerRef.current.setUpdateCompletedTaskCountCallback(e)}},{key:"onFooterUpdate",value:function(){this.sectionManagerRef&&this.sectionManagerRef.current&&this.sectionManagerRef.current.reBuild()}},{key:"renderFooter",value:function(e){var t=this.props,n=t.pages,a=t.channelId,i=t.contentId,r=t.contentVersion,o=t.ciData,s=t.communicator,l=t.channelData,c=t.currentPageIndex,u=t.changePage,d=t.assignmentId,f=t.isMustCompleteQuestions,h=t.isLastPageCompleted,m=t.eventData,v=this.state.isTaskGroupOverlayOpen;return this.showFooter?p.default.createElement(b.default,{ref:this.footerRef,pages:n,channelId:a,channelData:l,contentId:i,contentVersion:r,isAssessment:!!o.assessment,assignmentId:d,communicator:s,onFooterUpdate:this.onFooterUpdate,setAssessmentSubmitted:this.setAssessmentSubmitted,setCiIsDone:this.setCiIsDone,changePage:u,isLastPage:!e&&c===n.length-1,isLastPageCompleted:h,isMustCompleteQuestions:f,isTaskGroupOverlayOpen:v,eventData:m,forceSubmitPromise:this.hasTimer?this._submitPromise:null}):null}},{key:"createSectionsConfigurations",value:function(){var e=this;return this.props.pages.map((function(t){var a=n.isPageWithScrollOverflow(t);return{isScrollOverflowAllowed:a&&"PDF"===t.type,isScrollOverflowBlocked:a&&e.state.isTaskGroupOverlayOpen}}))}},{key:"setAssessmentSubmitted",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a={isScheduledAssessmentCompleted:e,showResetCIDialog:null==n?void 0:n.resetCI,autoResetResult:n};t&&(a.shouldReloadTaskGroup=!this.state.shouldReloadTaskGroup),this.setState(a)}},{key:"setCiIsDone",value:function(){this.setState({ciIsDone:!0})}},{key:"renderStageContent",value:function(){if(E.default.isMobile()||E.default.isTablet())return p.default.createElement(p.default.Fragment,null,this.renderPages(),this.renderFooter());var e,t=this.state,n=t.isTaskGroupOverlayOpen,a=t.pagesCidWithAnimation,i=this.props,r=i.pages,o=i.currentPageIndex,s=i.isPageLocked,l=r[o],c=s(o+1),u="number"==typeof o&&o<r.length&&a[l.cid];return e=n?{allow:!1,direction:T.SCROLLING_DIRECTIONS.ALL}:[{allow:!c&&(null==l?void 0:l.type)!==y.default.CI_PAGE_TYPES.PPT_FILE,direction:T.SCROLLING_DIRECTIONS.DOWN},{allow:!0,direction:T.SCROLLING_DIRECTIONS.UP}],p.default.createElement(T.default,{ref:this.sectionManagerRef,content:this.renderPages(),footer:this.renderFooter(u),allowScrolling:e,currentSectionIndex:o,onSectionChanged:this.changePage,fullPageProps:B,sectionConfigurations:this.createSectionsConfigurations(),ciIsDone:this.state.ciIsDone,isNextPageLocked:c,hasPptAnimation:u,onCloseClick:this.closePlayer,isTaskGroupOverlayOpen:n})}},{key:"closePlayer",value:function(){this.props.communicator.send("goBack")}},{key:"renderPreScreen",value:function(){return!E.default.isMobile()&&!E.default.isTablet()||!this.state.isPreScreenShown||E.default.isLandscape()?null:p.default.createElement(P.default,{duration:4e3,onPreScreenHidden:this.handlePreScreenHidden})}},{key:"render",value:function(){var e=this.state,t=e.showResetCIDialog,n=e.autoResetResult,a=this.props.changePage,i=!E.default.isMobile()&&!E.default.isTablet(),r=(0,h.default)("ci-player-stage",{"ci-player-stage--anchor-scrolling":i,"ci-player-stage--normal-scrolling":!i});return p.default.createElement("div",{className:r,ref:this.playerStageRef},this.renderStageContent(),this.renderPreScreen(),(E.default.isMobile()||E.default.isTablet())&&p.default.createElement(N.default,{contentLocale:E.default.getLocale()}),this._renderTimer(),t&&p.default.createElement(L.default,{changePage:a,hideResetDialog:this.hideResetDialog,autoResetResult:n}))}},{key:"_forceSubmit",value:function(){this._submitPromiseResolve()}},{key:"_renderTimer",value:function(){var e;if(!this.hasTimer||"boolean"!=typeof this.state.isScheduledAssessmentCompleted||this.state.isScheduledAssessmentCompleted)return null;var t=60*(null===(e=E.default.getAppdata().appConf)||void 0===e?void 0:e.scheduleCi.timer.minutesToStartDisplay);return p.default.createElement(C.default,{secondsToRun:this.props.remainingTimeInSeconds,onTimerEnd:this._forceSubmit,startToDisplayInSeconds:t,displayMessageTop:S.default.translate("force-submit-message-part-one"),displayMessageBottom:S.default.translate("force-submit-message-part-two")})}}],[{key:"calculateMobilePadding",value:function(e){var t=e.stageHeight,n=e.stageWidth,a=E.default.isLandscape()?0:54,i=10;t/n<9/16&&(i=(n-(t-a)/9*16)/2);return i}},{key:"calculateDesktopPadding",value:function(e){var t=e.stageHeight,n=e.stageWidth,a=(t-100)/9*16;return Math.max(n-a,40)/2}},{key:"getPadding",value:function(e){return E.default.isMobile()||E.default.isTablet()?n.calculateMobilePadding(e):n.calculateDesktopPadding(e)}},{key:"getMobileOrientation",value:function(){return E.default.isLandscape()?F:G}},{key:"isPageWithScrollOverflow",value:function(e){return e.presentation.height/e.presentation.width>9/16}},{key:"toggleFixedAspectRatioForPage",value:function(e){var t=document.getElementById("pageResizer-".concat(e.cid));t&&t.classList.toggle("ratio-16-9")}},{key:"renderPageNumberIndicator",value:function(e){return p.default.createElement("div",{style:{fontSize:"12px",textAlign:"right",color:"#121212"}},e+1)}}]),n}(p.Component);j.defaultProps={channelId:null,clk:"",contentVersion:null,pages:[],currentPageIndex:0,changePage:function(){},isPageLocked:function(){return!1},isLastPageCompleted:!0,availableOffline:!1,channelData:{},isPreview:!1,isMustCompleteQuestions:!1,shouldRenderMustCompleteMessage:null,assignmentId:null,remainingTimeInSeconds:void 0};var Y=j;t.default=Y},2858:function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SCROLLING_DIRECTIONS",{enumerable:!0,get:function(){return i.SCROLLING_DIRECTIONS}}),t.default=void 0;var i=a(n(2859));n(2863);var r=i.default;t.default=r},2859:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SCROLLING_DIRECTIONS=void 0;var r=i(n(23)),o=i(n(3)),s=i(n(12)),l=i(n(4)),c=i(n(6)),u=i(n(8)),d=i(n(7)),f=i(n(72)),p=a(n(0)),h=(i(n(2)),i(n(11))),m=n(2652),v=i(n(36)),g=i(n(18)),E=a(n(2860)),y=n(74),_=i(n(13));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var i=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,u.default)(this,n)}}t.SCROLLING_DIRECTIONS={ALL:"all",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"};var T=function(e){(0,c.default)(n,e);var t=S(n);function n(e){var a;return(0,o.default)(this,n),(a=t.call(this,e))._fullPageAfterLoad=a._fullPageAfterLoad.bind((0,s.default)(a)),a._fullPageOnLeave=a._fullPageOnLeave.bind((0,s.default)(a)),a._fullPageRender=a._fullPageRender.bind((0,s.default)(a)),a.goToNextSectionBtnRef=(0,p.createRef)(),a.initialized=!1,a.fullPageApi=null,a.state={shouldRenderNextButton:n.shouldRenderNextButton(e.currentSectionIndex,e.content.length,e.ciIsDone,e.isTaskGroupOverlayOpen),shouldRenderCloseButton:a.shouldRenderCloseButton(e.currentSectionIndex,e.content.length),isTaskGroupOverlayOpen:e.isTaskGroupOverlayOpen},a}return(0,l.default)(n,null,[{key:"iterateSectionElements",value:function(e,t){e&&e.querySelectorAll("*").forEach((function(e){return t(e)}))}},{key:"unmarkNormalScrollElement",value:function(e){e&&e.classList&&e.classList.remove("normal-scroll-element")}},{key:"markNormalScrollElement",value:function(e){e&&e.classList&&("auto"===getComputedStyle(e).overflowY&&e.offsetHeight<e.scrollHeight&&e.classList.add("normal-scroll-element"))}},{key:"setNormalScrollElementsInSection",value:function(e){setTimeout((function(){n.iterateSectionElements(e.item,n.unmarkNormalScrollElement),n.iterateSectionElements(e.item,n.markNormalScrollElement)}),1e3)}}]),(0,l.default)(n,[{key:"reBuild",value:function(){this.fullPageApi&&this.fullPageApi.reBuild()}},{key:"setScrollingSpeed",value:function(e){this.fullPageApi&&this.fullPageApi.setScrollingSpeed(e)}},{key:"componentDidUpdate",value:function(){var e=this.props.sectionConfigurations,t=this.fullPageApi.getActiveSection(),n=t.index,a=t.item,i=e[n];i&&i.isScrollOverflowAllowed&&(i.isScrollOverflowBlocked?a.classList.add("scroll-overflow-block"):a.classList.remove("scroll-overflow-block"))}},{key:"shouldRenderCloseButton",value:function(e,t){return e===t-1&&!!this.props.onCloseClick&&_.default.getAppdata().appConf.hideEndOfCI}},{key:"renderNextButton",value:function(){var e=this,t=function(){};return"number"==typeof this.props.currentSectionIndex&&(t=function(){return e.props.onSectionChanged(e.props.currentSectionIndex+1)}),p.default.createElement(m.CSSTransition,{in:this.state.shouldRenderNextButton,timeout:1e3,classNames:"section-manager__next-button-animation",unmountOnExit:!0},p.default.createElement("div",{tabIndex:"0",role:"button","aria-label":"Next",ref:this.goToNextSectionBtnRef,className:(0,h.default)("section-manager__next-button",{disabled:this.props.isNextPageLocked}),onClick:t,onKeyDown:function(e){return 13===e.keyCode&&t()}},p.default.createElement(y.ArrowDownIcon,null)))}},{key:"renderCloseButton",value:function(){return p.default.createElement(m.CSSTransition,{in:this.state.shouldRenderCloseButton,timeout:1e3,classNames:"section-manager__next-button-animation",unmountOnExit:!0},p.default.createElement("div",{className:"section-manager__close"},p.default.createElement(v.default,{text:g.default.translate("section-manager.close"),onClick:this.props.onCloseClick})))}},{key:"renderSection",value:function(e){var t=this,n=this.state.shouldRenderNextButton,a=this.props,i=a.content,r=a.sectionConfigurations[e],o=(0,h.default)("section-manager__section",{"fp-noscroll":!r.isScrollOverflowAllowed});return p.default.createElement("div",{key:"section_".concat(e),className:o},p.default.createElement("div",{className:"section-manager__section-content"},i[e],n&&p.default.createElement("div",{tabIndex:"0",role:"link",onFocus:function(){var e,n;return null===(e=t.goToNextSectionBtnRef)||void 0===e||null===(n=e.current)||void 0===n?void 0:n.focus()}})))}},{key:"renderFooter",value:function(){var e=this.props.footer;if(!e)return null;var t=(0,h.default)("section-manager__section","section-manager__footer","fp-auto-height");return p.default.createElement("div",{className:t},e)}},{key:"renderSections",value:function(){var e=this;return this.props.content.map((function(t,n){return e.renderSection(n)}))}},{key:"_fullPageAfterLoad",value:function(e,t){var n=this;this.initialized&&(_.default.isPC()&&null!==this.props.currentSectionIndex?setTimeout((function(){n.props.onSectionChanged(t.index)}),0):this.props.onSectionChanged(t.index))}},{key:"_fullPageOnLeave",value:function(e,t){var a=this.props,i=a.onSectionChanged,r=a.content,o=a.ciIsDone,s=a.hasPptAnimation,l=a.isTaskGroupOverlayOpen;i(null),this.setState({shouldRenderNextButton:n.shouldRenderNextButton(t.index,r.length,o,s,l),shouldRenderCloseButton:this.shouldRenderCloseButton(t.index,r.length)})}},{key:"_fullPageRender",value:function(e){var t=e.state,a=e.fullpageApi,i=this.props.allowScrolling;if(this.fullPageApi=a,t.initialized&&a){this.initialized=!0;var r=a.getActiveSection();null!==this.props.currentSectionIndex&&this.props.currentSectionIndex!==r.index&&a.moveTo(this.props.currentSectionIndex+1),n.setNormalScrollElementsInSection(r),((0,f.default)(i)?i:[i]).forEach((function(e){a.setAllowScrolling(e.allow,e.direction),a.setKeyboardScrolling(e.allow,e.direction)}))}return p.default.createElement(E.default.Wrapper,null,this.renderSections(),this.renderFooter())}},{key:"render",value:function(){return p.default.createElement("div",{className:"section-manager"},p.default.createElement(E.default,(0,r.default)({licenseKey:"3D72AA61-DA7E44B2-A9CA6232-EF795316",pluginWrapper:E.pluginWrapper,sectionSelector:".section-manager__section",afterLoad:this._fullPageAfterLoad,onLeave:this._fullPageOnLeave,render:this._fullPageRender,scrollingSpeed:1e3,lazyLoading:!1},this.props.fullPageProps)),this.renderNextButton(),this.renderCloseButton())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=n.shouldRenderNextButton(e.currentSectionIndex,e.content.length,e.ciIsDone,e.hasPptAnimation,e.isTaskGroupOverlayOpen);return e.isTaskGroupOverlayOpen!==t.isTaskGroupOverlayOpen?{shouldRenderNextButton:a,isTaskGroupOverlayOpen:e.isTaskGroupOverlayOpen}:e.hasPptAnimation&&!t.shouldRenderNextButton&&a?{shouldRenderNextButton:!0,isTaskGroupOverlayOpen:e.isTaskGroupOverlayOpen}:null}},{key:"shouldRenderNextButton",value:function(e,t,n,a,i){return!i&&(_.default.isLearner()?e<(n||a?t:t-1):e<(a?t:t-1))}}]),n}(p.PureComponent);T.defaultProps={currentSectionIndex:0,onSectionChanged:function(){},fullPageProps:{},allowScrolling:{allow:!0,direction:""},content:null,footer:null,sectionConfigurations:null,onCloseClick:void 0};var b=T;t.default=b},2860:function(e,t,n){"use strict";var a=n(5);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pluginWrapper",{enumerable:!0,get:function(){return i.pluginWrapper}}),t.default=void 0;var i=a(n(2861)),r=i.default;t.default=r},2861:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pluginWrapper=void 0;var i=a(n(2862));t.pluginWrapper=function(){};var r=i.default;t.default=r},2862:function(e,t,n){e.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=48)}([function(e,t,n){var a=n(29)("wks"),i=n(14),r=n(1).Symbol,o="function"==typeof r;(e.exports=function(e){return a[e]||(a[e]=o&&r[e]||(o?r:i)("Symbol."+e))}).store=a},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=n(0)},function(e,t,n){var a=n(11),i=n(18);e.exports=n(10)?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a="fullpage",i="#".concat(a),r=".section",o=".SLIDE"},function(e,t,n){var a=n(39),i=n(17);e.exports=function(e){return a(i(e))}},function(e,t,n){var a=n(1),i=n(13),r=n(3),o=n(15),s=n(41),l=function(e,t,n){var c,u,d,f,p=e&l.F,h=e&l.G,m=e&l.S,v=e&l.P,g=e&l.B,E=h?a:m?a[t]||(a[t]={}):(a[t]||{}).prototype,y=h?i:i[t]||(i[t]={}),_=y.prototype||(y.prototype={});for(c in h&&(n=t),n)d=((u=!p&&E&&void 0!==E[c])?E:n)[c],f=g&&u?s(d,a):v&&"function"==typeof d?s(Function.call,d):d,E&&o(E,c,d,e&l.U),y[c]!=d&&r(y,c,f),v&&_[c]!=d&&(_[c]=d)};a.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){e.exports=!n(9)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var a=n(19),i=n(47),r=n(30),o=Object.defineProperty;t.f=n(10)?Object.defineProperty:function(e,t,n){if(a(e),t=r(t,!0),a(n),i)try{return o(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var a=n(40),i=n(25);e.exports=Object.keys||function(e){return a(e,i)}},function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},function(e,t,n){var a=n(1),i=n(3),r=n(4),o=n(14)("src"),s=Function.toString,l=(""+s).split("toString");n(13).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(r(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(r(n,o)||i(n,o,e[t]?""+e[t]:l.join(String(t)))),e===a?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[o]||s.call(this)}))},function(e,t){e.exports=!1},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var a=n(5);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";t.a=function(e,t){return e?function(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=console).log.apply(e,["<".concat(t,"/> Debug Log: ")].concat(a))}:function(){}}},function(e,t,n){var a=n(17);e.exports=function(e){return Object(a(e))}},function(e,t){e.exports={}},function(e,t,n){var a=n(0)("unscopables"),i=Array.prototype;null==i[a]&&n(3)(i,a,{}),e.exports=function(e){i[a][e]=!0}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var a=n(29)("keys"),i=n(14);e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var a=n(11).f,i=n(4),r=n(0)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,r)&&a(e,r,{configurable:!0,value:t})}},function(e,t,n){var a=n(13),i=n(1),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:n(16)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var a=n(5);e.exports=function(e,t){if(!a(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!a(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";var a=n(23),i=n(72),r=n(22),o=n(7);e.exports=n(71)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),r.Arguments=r.Array,a("keys"),a("values"),a("entries")},function(e,t,n){var a=n(40),i=n(25).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,i)}},function(e,t,n){var a=n(19),i=n(77),r=n(25),o=n(26)("IE_PROTO"),s=function(){},l=function(){var e,t=n(46)("iframe"),a=r.length;for(t.style.display="none",n(76).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;a--;)delete l.prototype[r[a]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=a(e),n=new s,s.prototype=null,n[o]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var a=n(27);e.exports=Array.isArray||function(e){return"Array"==a(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},function(e,t,n){var a=n(36),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},function(e,t,n){var a=n(7),i=n(37),r=n(78);e.exports=function(e){return function(t,n,o){var s,l=a(t),c=i(l.length),u=r(o,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},function(e,t,n){var a=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},function(e,t,n){var a=n(4),i=n(7),r=n(38)(!1),o=n(26)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)n!=o&&a(s,n)&&c.push(n);for(;t.length>l;)a(s,n=t[l++])&&(~r(c,n)||c.push(n));return c}},function(e,t,n){var a=n(81);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,i){return e.call(t,n,a,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";var a=n(1),i=n(4),r=n(10),o=n(8),s=n(15),l=n(80).KEY,c=n(9),u=n(29),d=n(28),f=n(14),p=n(0),h=n(43),m=n(44),v=n(79),g=n(34),E=n(19),y=n(5),_=n(7),S=n(30),T=n(18),b=n(33),I=n(75),k=n(74),C=n(11),O=n(12),P=k.f,N=C.f,A=I.f,L=a.Symbol,R=a.JSON,M=R&&R.stringify,w=p("_hidden"),D=p("toPrimitive"),x={}.propertyIsEnumerable,U=u("symbol-registry"),B=u("symbols"),G=u("op-symbols"),F=Object.prototype,H="function"==typeof L,j=a.QObject,Y=!j||!j.prototype||!j.prototype.findChild,V=r&&c((function(){return 7!=b(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var a=P(F,t);a&&delete F[t],N(e,t,n),a&&e!==F&&N(F,t,a)}:N,W=function(e){var t=B[e]=b(L.prototype);return t._k=e,t},z=H&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},K=function(e,t,n){return e===F&&K(G,t,n),E(e),t=S(t,!0),E(n),i(B,t)?(n.enumerable?(i(e,w)&&e[w][t]&&(e[w][t]=!1),n=b(n,{enumerable:T(0,!1)})):(i(e,w)||N(e,w,T(1,{})),e[w][t]=!0),V(e,t,n)):N(e,t,n)},X=function(e,t){E(e);for(var n,a=v(t=_(t)),i=0,r=a.length;r>i;)K(e,n=a[i++],t[n]);return e},q=function(e){var t=x.call(this,e=S(e,!0));return!(this===F&&i(B,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,w)&&this[w][e])||t)},Q=function(e,t){if(e=_(e),t=S(t,!0),e!==F||!i(B,t)||i(G,t)){var n=P(e,t);return!n||!i(B,t)||i(e,w)&&e[w][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=A(_(e)),a=[],r=0;n.length>r;)i(B,t=n[r++])||t==w||t==l||a.push(t);return a},J=function(e){for(var t,n=e===F,a=A(n?G:_(e)),r=[],o=0;a.length>o;)!i(B,t=a[o++])||n&&!i(F,t)||r.push(B[t]);return r};H||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(G,n),i(this,w)&&i(this[w],e)&&(this[w][e]=!1),V(this,e,T(1,n))};return r&&Y&&V(F,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),k.f=Q,C.f=K,n(32).f=I.f=Z,n(24).f=q,n(35).f=J,r&&!n(16)&&s(F,"propertyIsEnumerable",q,!0),h.f=function(e){return W(p(e))}),o(o.G+o.W+o.F*!H,{Symbol:L});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)p($[ee++]);for(var te=O(p.store),ne=0;te.length>ne;)m(te[ne++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=L(e)},keyFor:function(e){if(!z(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?b(e):X(b(e),t)},defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),R&&o(o.S+o.F*(!H||c((function(){var e=L();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,a=[e],i=1;arguments.length>i;)a.push(arguments[i++]);if(n=t=a[1],(y(t)||void 0!==e)&&!z(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!z(t))return t}),a[1]=t,M.apply(R,a)}}),L.prototype[D]||n(3)(L.prototype,D,L.prototype.valueOf),d(L,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},function(e,t,n){t.f=n(0)},function(e,t,n){var a=n(1),i=n(13),r=n(16),o=n(43),s=n(11).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:a.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,n){n(44)("asyncIterator")},function(e,t,n){var a=n(5),i=n(1).document,r=a(i)&&a(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,n){e.exports=!n(10)&&!n(9)((function(){return 7!=Object.defineProperty(n(46)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";n.r(t);n(84);var a,i=n(2),r=n.n(i),o=function(e){var t=e.children;return r.a.createElement(i.Fragment,null,t)};t.default=((a=function(){if("undefined"==typeof window)return!1;try{return!"production".toLowerCase().match(/test/)}catch(e){return!0}}()?n(82).default:n(49).default).Wrapper=o,a)},function(e,t,n){"use strict";n.r(t);n(45),n(42);var a=n(2),i=n.n(a),r=n(20),o=n(6);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).state={},n.log=Object(r.a)(n.props.debug,"ReactFullpageShell"),n.log("Building component"),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return i.a.createElement("div",{id:o.d},this.props.render(this))}}])&&l(n.prototype,a),s&&l(n,s),t}(i.a.Component);t.default=f},function(e,t){window.fp_easings={def:"easeOutQuad",linear:function(e,t,n,a){return n*e/a+t},swing:function(e,t,n,a){return window.fp_easings[window.fp_easings.def](e,t,n,a)},easeInQuad:function(e,t,n,a){return n*(e/=a)*e+t},easeOutQuad:function(e,t,n,a){return-n*(e/=a)*(e-2)+t},easeInOutQuad:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,a){return n*(e/=a)*e*e+t},easeOutCubic:function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,a){return n*(e/=a)*e*e*e+t},easeOutQuart:function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},easeOutQuint:function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},easeOutSine:function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(e,t,n,a){return 0==e?t:n*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(e,t,n,a){return 0==e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,a){var i=1.70158,r=0,o=n;return 0==e?t:1==(e/=a)?t+n:(r||(r=.3*a),o<Math.abs(n)?(o=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/o),-o*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)+t)},easeOutElastic:function(e,t,n,a){var i=1.70158,r=0,o=n;return 0==e?t:1==(e/=a)?t+n:(r||(r=.3*a),o<Math.abs(n)?(o=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin((e*a-i)*(2*Math.PI)/r)+n+t)},easeInOutElastic:function(e,t,n,a){var i=1.70158,r=0,o=n;return 0==e?t:2==(e/=a/2)?t+n:(r||(r=a*(.3*1.5)),o<Math.abs(n)?(o=n,i=r/4):i=r/(2*Math.PI)*Math.asin(n/o),e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*a-i)*(2*Math.PI)/r)*.5+n+t)},easeInBack:function(e,t,n,a,i){return null==i&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,a,i){return null==i&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,a,i){return null==i&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,n,a){return n-window.fp_easings.easeOutBounce(a-e,0,n,a)+t},easeOutBounce:function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,a){return e<a/2?.5*window.fp_easings.easeInBounce(2*e,0,n,a)+t:.5*window.fp_easings.easeOutBounce(2*e-a,0,n,a)+.5*n+t}}},function(e,t,n){var a,i,r;!function(i,r,o){var s=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(e){i.setTimeout(e,1e3/60)},l=function(){var e={},t=r.createElement("div").style,n=function(){for(var e=["t","webkitT","MozT","msT","OT"],n=0,a=e.length;n<a;n++)if(e[n]+"ransform"in t)return e[n].substr(0,e[n].length-1);return!1}();function a(e){return!1!==n&&(""===n?e:n+e.charAt(0).toUpperCase()+e.substr(1))}e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(e,t){for(var n in t)e[n]=t[n]},e.addEvent=function(e,t,n,a){e.addEventListener(t,n,!!a)},e.removeEvent=function(e,t,n,a){e.removeEventListener(t,n,!!a)},e.prefixPointerEvent=function(e){return i.MSPointerEvent?"MSPointer"+e.charAt(7).toUpperCase()+e.substr(8):e},e.momentum=function(e,t,n,a,i,r){var s,l,c=e-t,u=o.abs(c)/n;return l=u/(r=void 0===r?6e-4:r),(s=e+u*u/(2*r)*(c<0?-1:1))<a?(s=i?a-i/2.5*(u/8):a,l=(c=o.abs(s-e))/u):0<s&&(s=i?i/2.5*(u/8):0,l=(c=o.abs(e)+s)/u),{destination:o.round(s),duration:l}};var s=a("transform");return e.extend(e,{hasTransform:!1!==s,hasPerspective:a("perspective")in t,hasTouch:"ontouchstart"in i,hasPointer:!(!i.PointerEvent&&!i.MSPointerEvent),hasTransition:a("transition")in t}),e.isBadAndroid=function(){var e=i.navigator.appVersion;if(!/Android/.test(e)||/Chrome\/\d/.test(e))return!1;var t=e.match(/Safari\/(\d+.\d)/);return!(t&&"object"==typeof t&&2<=t.length)||parseFloat(t[1])<535.19}(),e.extend(e.style={},{transform:s,transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration"),transitionDelay:a("transitionDelay"),transformOrigin:a("transformOrigin")}),e.hasClass=function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.addClass=function(t,n){if(!e.hasClass(t,n)){var a=t.className.split(" ");a.push(n),t.className=a.join(" ")}},e.removeClass=function(t,n){if(e.hasClass(t,n)){var a=new RegExp("(^|\\s)"+n+"(\\s|$)","g");t.className=t.className.replace(a," ")}},e.offset=function(e){for(var t=-e.offsetLeft,n=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},e.preventDefaultException=function(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1},e.extend(e.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),e.extend(e.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return o.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){return(e-=1)*e*(5*e+4)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){return 0===e?0:1==e?1:.4*o.pow(2,-10*e)*o.sin((e-.055)*(2*o.PI)/.22)+1}}}),e.tap=function(e,t){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)},e.click=function(e){var t,n=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||((t=r.createEvent(i.MouseEvent?"MouseEvents":"Event")).initEvent("click",!0,!0),t.view=e.view||i,t.detail=1,t.screenX=n.screenX||0,t.screenY=n.screenY||0,t.clientX=n.clientX||0,t.clientY=n.clientY||0,t.ctrlKey=!!e.ctrlKey,t.altKey=!!e.altKey,t.shiftKey=!!e.shiftKey,t.metaKey=!!e.metaKey,t.button=0,t.relatedTarget=null,t._constructed=!0,n.dispatchEvent(t))},e}();function c(e,t){for(var n in this.wrapper="string"==typeof e?r.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!l.hasPointer,disableTouch:l.hasPointer||!l.hasTouch,disableMouse:l.hasPointer||l.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|LABEL)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:void 0===i.onmousedown},t)this.options[n]=t[n];this.translateZ=this.options.HWCompositing&&l.hasPerspective?" translateZ(0)":"",this.options.useTransition=l.hasTransition&&this.options.useTransition,this.options.useTransform=l.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?l.ease[this.options.bounceEasing]||l.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function u(e,t,n){var a=r.createElement("div"),i=r.createElement("div");return!0===n&&(a.style.cssText="position:absolute;z-index:9999",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),i.className="iScrollIndicator",a.className="h"==e?(!0===n&&(a.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",i.style.height="100%"),"iScrollHorizontalScrollbar"):(!0===n&&(a.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",i.style.width="100%"),"iScrollVerticalScrollbar"),a.style.cssText+=";overflow:hidden",t||(a.style.pointerEvents="none"),a.appendChild(i),a}function d(e,t){for(var n in this.wrapper="string"==typeof t.el?r.querySelector(t.el):t.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0},t)this.options[n]=t[n];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(l.addEvent(this.indicator,"touchstart",this),l.addEvent(i,"touchend",this)),this.options.disablePointer||(l.addEvent(this.indicator,l.prefixPointerEvent("pointerdown"),this),l.addEvent(i,l.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(l.addEvent(this.indicator,"mousedown",this),l.addEvent(i,"mouseup",this))),this.options.fade){this.wrapperStyle[l.style.transform]=this.scroller.translateZ;var a=l.style.transitionDuration;if(!a)return;this.wrapperStyle[a]=l.isBadAndroid?"0.0001ms":"0ms";var o=this;l.isBadAndroid&&s((function(){"0.0001ms"===o.wrapperStyle[a]&&(o.wrapperStyle[a]="0s")})),this.wrapperStyle.opacity="0"}}c.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if((1==l.eventType[e.type]||0===(e.which?e.button:e.button<2?0:4==e.button?1:2))&&this.enabled&&(!this.initiated||l.eventType[e.type]===this.initiated)){!this.options.preventDefault||l.isBadAndroid||l.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,n=e.touches?e.touches[0]:e;this.initiated=l.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=l.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,t=this.getComputedPosition(),this._translate(o.round(t.x),o.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&l.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,n,a,i,r=e.touches?e.touches[0]:e,s=r.pageX-this.pointX,c=r.pageY-this.pointY,u=l.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=s,this.distY+=c,a=o.abs(this.distX),i=o.abs(this.distY),!(300<u-this.endTime&&a<10&&i<10)){if(this.directionLocked||this.options.freeScroll||(a>i+this.options.directionLockThreshold?this.directionLocked="h":i>=a+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,c=this.hasVerticalScroll?c:0,t=this.x+s,n=this.y+c,(0<t||t<this.maxScrollX)&&(t=this.options.bounce?this.x+s/3:0<t?0:this.maxScrollX),(0<n||n<this.maxScrollY)&&(n=this.options.bounce?this.y+c/3:0<n?0:this.maxScrollY),this.directionX=0<s?-1:s<0?1:0,this.directionY=0<c?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,n),300<u-this.startTime&&(this.startTime=u,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&l.eventType[e.type]===this.initiated){this.options.preventDefault&&!l.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault(),e.changedTouches&&e.changedTouches[0];var t,n,a=l.getTime()-this.startTime,i=o.round(this.x),r=o.round(this.y),s=o.abs(i-this.startX),c=o.abs(r-this.startY),u=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=l.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(i,r),!this.moved)return this.options.tap&&l.tap(e,this.options.tap),this.options.click&&l.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&a<200&&s<100&&c<100)this._execEvent("flick");else{if(this.options.momentum&&a<300&&(t=this.hasHorizontalScroll?l.momentum(this.x,this.startX,a,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:i,duration:0},n=this.hasVerticalScroll?l.momentum(this.y,this.startY,a,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},i=t.destination,r=n.destination,u=o.max(t.duration,n.duration),this.isInTransition=1),this.options.snap){var f=this._nearestSnap(i,r);this.currentPage=f,u=this.options.snapSpeed||o.max(o.max(o.min(o.abs(i-f.x),1e3),o.min(o.abs(r-f.y),1e3)),300),i=f.x,r=f.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(i!=this.x||r!=this.y)return(0<i||i<this.maxScrollX||0<r||r<this.maxScrollY)&&(d=l.ease.quadratic),void this.scrollTo(i,r,u,d);this._execEvent("scrollEnd")}}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){e.refresh()}),this.options.resizePolling)},resetPosition:function(e){var t=this.x,n=this.y;return e=e||0,!this.hasHorizontalScroll||0<this.x?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||0<this.y?n=0:this.y<this.maxScrollY&&(n=this.maxScrollY),(t!=this.x||n!=this.y)&&(this.scrollTo(t,n,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight,this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=l.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var n=this._events[e].indexOf(t);-1<n&&this._events[e].splice(n,1)}},_execEvent:function(e){if(this._events[e]){var t=0,n=this._events[e].length;if(n)for(;t<n;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,n,a){e=this.x+e,t=this.y+t,n=n||0,this.scrollTo(e,t,n,a)},scrollTo:function(e,t,n,a){a=a||l.ease.circular,this.isInTransition=this.options.useTransition&&0<n;var i=this.options.useTransition&&a.style;!n||i?(i&&(this._transitionTimingFunction(a.style),this._transitionTime(n)),this._translate(e,t)):this._animate(e,t,n,a.fn)},scrollToElement:function(e,t,n,a,i){if(e=e.nodeType?e:this.scroller.querySelector(e)){var r=l.offset(e);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,!0===n&&(n=o.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===a&&(a=o.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=n||0,r.top-=a||0,r.left=0<r.left?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=0<r.top?0:r.top<this.maxScrollY?this.maxScrollY:r.top,t=null==t||"auto"===t?o.max(o.abs(this.x-r.left),o.abs(this.y-r.top)):t,this.scrollTo(r.left,r.top,t,i)}},_transitionTime:function(e){if(this.options.useTransition){e=e||0;var t=l.style.transitionDuration;if(t){if(this.scrollerStyle[t]=e+"ms",!e&&l.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var n=this;s((function(){"0.0001ms"===n.scrollerStyle[t]&&(n.scrollerStyle[t]="0s")}))}if(this.indicators)for(var a=this.indicators.length;a--;)this.indicators[a].transitionTime(e)}}},_transitionTimingFunction:function(e){if(this.scrollerStyle[l.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[l.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=o.round(e),t=o.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(e){var t=e?l.removeEvent:l.addEvent,n=this.options.bindToWrapper?this.wrapper:i;t(i,"orientationchange",this),t(i,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(n,"mousemove",this),t(n,"mousecancel",this),t(n,"mouseup",this)),l.hasPointer&&!this.options.disablePointer&&(t(this.wrapper,l.prefixPointerEvent("pointerdown"),this),t(n,l.prefixPointerEvent("pointermove"),this),t(n,l.prefixPointerEvent("pointercancel"),this),t(n,l.prefixPointerEvent("pointerup"),this)),l.hasTouch&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(n,"touchmove",this),t(n,"touchcancel",this),t(n,"touchend",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,t,n=i.getComputedStyle(this.scroller,null);return t=this.options.useTransform?(e=+((n=n[l.style.transform].split(")")[0].split(", "))[12]||n[4]),+(n[13]||n[5])):(e=+n.left.replace(/[^-\d.]/g,""),+n.top.replace(/[^-\d.]/g,"")),{x:e,y:t}},_initIndicators:function(){var e,t=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,a=[],i=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:u("v",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),a.push(e)),this.options.scrollX&&(e={el:u("h",t,this.options.scrollbars),interactive:t,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),a.push(e))),this.options.indicators&&(a=a.concat(this.options.indicators));for(var r=a.length;r--;)this.indicators.push(new d(this,a[r]));function o(e){if(i.indicators)for(var t=i.indicators.length;t--;)e.call(i.indicators[t])}this.options.fadeScrollbars&&(this.on("scrollEnd",(function(){o((function(){this.fade()}))})),this.on("scrollCancel",(function(){o((function(){this.fade()}))})),this.on("scrollStart",(function(){o((function(){this.fade(1)}))})),this.on("beforeScrollStart",(function(){o((function(){this.fade(1,!0)}))}))),this.on("refresh",(function(){o((function(){this.refresh()}))})),this.on("destroy",(function(){o((function(){this.destroy()})),delete this.indicators}))},_initWheel:function(){l.addEvent(this.wrapper,"wheel",this),l.addEvent(this.wrapper,"mousewheel",this),l.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",(function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,l.removeEvent(this.wrapper,"wheel",this),l.removeEvent(this.wrapper,"mousewheel",this),l.removeEvent(this.wrapper,"DOMMouseScroll",this)}))},_wheel:function(e){if(this.enabled){i.navigator.userAgent.match(/(MSIE|Trident)/)||e.preventDefault();var t,n,a,r,s=this;if(void 0===this.wheelTimeout&&s._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((function(){s.options.snap||s._execEvent("scrollEnd"),s.wheelTimeout=void 0}),400),"deltaX"in e)n=1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,n=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=n=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=n=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,n*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=n,n=0),this.options.snap)return a=this.currentPage.pageX,r=this.currentPage.pageY,0<t?a--:t<0&&a++,0<n?r--:n<0&&r++,void this.goToPage(a,r);a=this.x+o.round(this.hasHorizontalScroll?t:0),r=this.y+o.round(this.hasVerticalScroll?n:0),this.directionX=0<t?-1:t<0?1:0,this.directionY=0<n?-1:n<0?1:0,0<a?a=0:a<this.maxScrollX&&(a=this.maxScrollX),0<r?r=0:r<this.maxScrollY&&(r=this.maxScrollY),this.scrollTo(a,r,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",(function(){var e,t,n,a,i,r,s=0,l=0,c=0,u=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(n=o.round(u/2),a=o.round(d/2);c>-this.scrollerWidth;){for(this.pages[s]=[],i=e=0;i>-this.scrollerHeight;)this.pages[s][e]={x:o.max(c,this.maxScrollX),y:o.max(i,this.maxScrollY),width:u,height:d,cx:c-n,cy:i-a},i-=d,e++;c-=u,s++}else for(e=(r=this.options.snap).length,t=-1;s<e;s++)(0===s||r[s].offsetLeft<=r[s-1].offsetLeft)&&(l=0,t++),this.pages[l]||(this.pages[l]=[]),c=o.max(-r[s].offsetLeft,this.maxScrollX),i=o.max(-r[s].offsetTop,this.maxScrollY),n=c-o.round(r[s].offsetWidth/2),a=i-o.round(r[s].offsetHeight/2),this.pages[l][t]={x:c,y:i,width:r[s].offsetWidth,height:r[s].offsetHeight,cx:n,cy:a},c>this.maxScrollX&&l++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})),this.on("flick",(function(){var e=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.x-this.startX),1e3),o.min(o.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)}))},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,a=this.pages.length,i=0;if(o.abs(e-this.absStartX)<this.snapThresholdX&&o.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(0<e?e=0:e<this.maxScrollX&&(e=this.maxScrollX),0<t?t=0:t<this.maxScrollY&&(t=this.maxScrollY);n<a;n++)if(e>=this.pages[n][0].cx){e=this.pages[n][0].x;break}for(a=this.pages[n].length;i<a;i++)if(t>=this.pages[0][i].cy){t=this.pages[0][i].y;break}return n==this.currentPage.pageX&&((n+=this.directionX)<0?n=0:n>=this.pages.length&&(n=this.pages.length-1),e=this.pages[n][0].x),i==this.currentPage.pageY&&((i+=this.directionY)<0?i=0:i>=this.pages[0].length&&(i=this.pages[0].length-1),t=this.pages[0][i].y),{x:e,y:t,pageX:n,pageY:i}},goToPage:function(e,t,n,a){a=a||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var i=this.pages[e][t].x,r=this.pages[e][t].y;n=void 0===n?this.options.snapSpeed||o.max(o.max(o.min(o.abs(i-this.x),1e3),o.min(o.abs(r-this.y),1e3)),300):n,this.currentPage={x:i,y:r,pageX:e,pageY:t},this.scrollTo(i,r,n,a)},next:function(e,t){var n=this.currentPage.pageX,a=this.currentPage.pageY;++n>=this.pages.length&&this.hasVerticalScroll&&(n=0,a++),this.goToPage(n,a,e,t)},prev:function(e,t){var n=this.currentPage.pageX,a=this.currentPage.pageY;--n<0&&this.hasVerticalScroll&&(n=0,a--),this.goToPage(n,a,e,t)},_initKeys:function(e){var t,n={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in n)this.options.keyBindings[t]=this.options.keyBindings[t]||n[t];l.addEvent(i,"keydown",this),this.on("destroy",(function(){l.removeEvent(i,"keydown",this)}))},_key:function(e){if(this.enabled){var t,n=this.options.snap,a=n?this.currentPage.pageX:this.x,i=n?this.currentPage.pageY:this.y,r=l.getTime(),s=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(o.round(t.x),o.round(t.y)),this.isInTransition=!1),this.keyAcceleration=r-s<200?o.min(this.keyAcceleration+.25,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?a+=n?1:this.wrapperWidth:i+=n?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?a-=n?1:this.wrapperWidth:i-=n?1:this.wrapperHeight;break;case this.options.keyBindings.end:a=n?this.pages.length-1:this.maxScrollX,i=n?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:i=a=0;break;case this.options.keyBindings.left:a+=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:i+=n?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:a-=n?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:i-=n?1:5+this.keyAcceleration>>0;break;default:return}n?this.goToPage(a,i):(0<a?(a=0,this.keyAcceleration=0):a<this.maxScrollX&&(a=this.maxScrollX,this.keyAcceleration=0),0<i?(i=0,this.keyAcceleration=0):i<this.maxScrollY&&(i=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(a,i,0),this.keyTime=r)}},_animate:function(e,t,n,a){var i=this,r=this.x,o=this.y,c=l.getTime(),u=c+n;this.isAnimating=!0,function d(){var f,p,h,m=l.getTime();if(u<=m)return i.isAnimating=!1,i._translate(e,t),void(i.resetPosition(i.options.bounceTime)||i._execEvent("scrollEnd"));h=a(m=(m-c)/n),f=(e-r)*h+r,p=(t-o)*h+o,i._translate(f,p),i.isAnimating&&s(d)}()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},d.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(l.removeEvent(this.indicator,"touchstart",this),l.removeEvent(this.indicator,l.prefixPointerEvent("pointerdown"),this),l.removeEvent(this.indicator,"mousedown",this),l.removeEvent(i,"touchmove",this),l.removeEvent(i,l.prefixPointerEvent("pointermove"),this),l.removeEvent(i,"mousemove",this),l.removeEvent(i,"touchend",this),l.removeEvent(i,l.prefixPointerEvent("pointerup"),this),l.removeEvent(i,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=l.getTime(),this.options.disableTouch||l.addEvent(i,"touchmove",this),this.options.disablePointer||l.addEvent(i,l.prefixPointerEvent("pointermove"),this),this.options.disableMouse||l.addEvent(i,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,n,a,i,r=e.touches?e.touches[0]:e;l.getTime(),this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=r.pageX-this.lastPointX,this.lastPointX=r.pageX,n=r.pageY-this.lastPointY,this.lastPointY=r.pageY,a=this.x+t,i=this.y+n,this._pos(a,i),e.preventDefault(),e.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),l.removeEvent(i,"touchmove",this),l.removeEvent(i,l.prefixPointerEvent("pointermove"),this),l.removeEvent(i,"mousemove",this),this.scroller.options.snap){var t=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),n=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.scroller.x-t.x),1e3),o.min(o.abs(this.scroller.y-t.y),1e3)),300);this.scroller.x==t.x&&this.scroller.y==t.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=t,this.scroller.scrollTo(t.x,t.y,n,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=l.style.transitionDuration;if(t&&(this.indicatorStyle[t]=e+"ms",!e&&l.isBadAndroid)){this.indicatorStyle[t]="0.0001ms";var n=this;s((function(){"0.0001ms"===n.indicatorStyle[t]&&(n.indicatorStyle[t]="0s")}))}},transitionTimingFunction:function(e){this.indicatorStyle[l.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(l.addClass(this.wrapper,"iScrollBothScrollbars"),l.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(l.removeClass(this.wrapper,"iScrollBothScrollbars"),l.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),this.wrapper.offsetHeight,this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=o.max(o.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=o.max(o.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&o.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&o.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=o.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?e="scale"==this.options.shrink?(this.width=o.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",this.maxPosX+this.indicatorWidth-this.width):this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=o.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?t="scale"==this.options.shrink?(this.height=o.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",this.maxPosY+this.indicatorHeight-this.height):this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[l.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?o.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?o.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var n=e?250:500,a=e?0:300;e=e?"1":"0",this.wrapperStyle[l.style.transitionDuration]=n+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),a)}}},c.utils=l,void 0!==e&&e.exports?e.exports=c:(void 0!==(a=function(){return c}.call(t,n,t,e))&&(e.exports=a),void 0!==i&&(i.IScroll=c))}(window,document,Math),i=window,r=document,i.fp_scrolloverflow=function(){i.IScroll||(i.IScroll=e.exports);var t="fp-scrollable",n="."+t,a=".fp-section",o=a+".active",s=".fp-tableCell";function l(){var e=this;function t(){var t;fp_utils.hasClass(r.body,"fp-responsive")?(t=e.options.scrollOverflowHandler,o((function(e){fp_utils.hasClass(fp_utils.closest(e,a),"fp-auto-height-responsive")&&t.remove(e)}))):o(n)}function n(t){if(!fp_utils.hasClass(t,"fp-noscroll")){fp_utils.css(t,{overflow:"hidden"});var n,i,r,o=e.options.scrollOverflowHandler,l=o.wrapContent(),u=fp_utils.closest(t,a),d=o.scrollable(t),f=(i=u,null!=(r=fp_utils.closest(i,a))?parseInt(getComputedStyle(r)["padding-bottom"])+parseInt(getComputedStyle(r)["padding-top"]):0);null!=d?n=o.scrollHeight(t):(n=t.scrollHeight,e.options.verticalCentered&&(n=c(s,t)[0].scrollHeight));var p=fp_utils.getWindowHeight(),h=p-f;p<n+f?null!=d?o.update(t,h):(e.options.verticalCentered?(fp_utils.wrapInner(c(s,t)[0],l.scroller),fp_utils.wrapInner(c(s,t)[0],l.scrollable)):(fp_utils.wrapInner(t,l.scroller),fp_utils.wrapInner(t,l.scrollable)),o.create(t,h,e.iscrollOptions)):o.remove(t),fp_utils.css(t,{overflow:""})}}function o(e){c(a).forEach((function(t){var n=c(".fp-slide",t);n.length?n.forEach((function(t){e(t)})):e(t)}))}e.options=null,e.init=function(n,a){return e.options=n,e.iscrollOptions=a,"complete"===r.readyState&&(t(),fullpage_api.shared.afterRenderActions()),i.addEventListener("load",(function(){t(),fullpage_api.shared.afterRenderActions()})),e},e.createScrollBarForAll=t,e.createScrollBar=n}IScroll.prototype.wheelOn=function(){this.wrapper.addEventListener("wheel",this),this.wrapper.addEventListener("mousewheel",this),this.wrapper.addEventListener("DOMMouseScroll",this)},IScroll.prototype.wheelOff=function(){this.wrapper.removeEventListener("wheel",this),this.wrapper.removeEventListener("mousewheel",this),this.wrapper.removeEventListener("DOMMouseScroll",this)};var c=null,u=null,d={refreshId:null,iScrollInstances:[],lastScrollY:null,hasBeenInit:!1,iscrollOptions:{scrollbars:!0,mouseWheel:!0,hideScrollbars:!1,fadeScrollbars:!1,disableMouse:!0,interactiveScrollbars:!0},init:function(e){c=fp_utils.$,u=e;var t="ontouchstart"in i||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints;return d.iscrollOptions.click=t,d.hasBeenInit=!0,d.iscrollOptions=fp_utils.deepExtend(d.iscrollOptions,e.scrollOverflowOptions),(new l).init(e,d.iscrollOptions)},toggleWheel:function(e){c(n,c(o)[0]).forEach((function(t){var n=t.fp_iscrollInstance;null!=n&&(e?n.wheelOn():n.wheelOff())}))},setIscroll:function(e,t){if(d.hasBeenInit){var a=fp_utils.closest(e,n)||c(n,e)[0],i=t?"enable":"disable";a&&a.fp_iscrollInstance[i]()}},onLeave:function(){d.toggleWheel(!1)},beforeLeave:function(){d.onLeave()},afterLoad:function(){d.toggleWheel(!0)},create:function(e,t,i){c(n,e).forEach((function(n){fp_utils.css(n,{height:t+"px"});var r=n.fp_iscrollInstance;null!=r&&d.iScrollInstances.forEach((function(e){e.destroy()})),r=new IScroll(n,i),d.iScrollInstances.push(r),fp_utils.hasClass(fp_utils.closest(e,a),"active")||r.wheelOff(),n.fp_iscrollInstance=r}))},isScrolled:function(e,t){var n=t.fp_iscrollInstance;return!n||("top"===e?0<=n.y&&!fp_utils.getScrollTop(t):"bottom"===e?0-n.y+fp_utils.getScrollTop(t)+t.offsetHeight>=t.scrollHeight:void 0)},scrollable:function(e){return c(".fp-slides",e).length?c(n,c(".fp-slide.active",e)[0])[0]:c(n,e)[0]},scrollHeight:function(e){return c(".fp-scroller",c(n,e)[0])[0].scrollHeight},remove:function(e){if(null!=e){var t=c(n,e)[0];if(null!=t){var a=t.fp_iscrollInstance;null!=a&&a.destroy(),t.fp_iscrollInstance=null,fp_utils.unwrap(c(".fp-scroller",e)[0]),fp_utils.unwrap(c(n,e)[0])}}},update:function(e,t){clearTimeout(d.refreshId),d.refreshId=setTimeout((function(){d.iScrollInstances.forEach((function(e){e.refresh(),fullpage_api.silentMoveTo(fp_utils.index(c(o)[0])+1)}))}),150),fp_utils.css(c(n,e)[0],{height:t+"px"}),u.verticalCentered&&fp_utils.css(c(n,e)[0].parentNode,{height:t+"px"})},wrapContent:function(){var e=r.createElement("div");e.className=t;var n=r.createElement("div");return n.className="fp-scroller",{scrollable:e,scroller:n}}};return{iscrollHandler:d}}()},function(e,t,n){var a,i,r,o;i=this,r=window,o=document,void 0===(a=function(){return i.fullpage=function(e,t){"use strict";var n="fullpage-wrapper",a="."+n,i="fp-responsive",r="fp-notransition",o="fp-destroyed",s="fp-enabled",l="fp-viewing",c="active",u="."+c,d="fp-completely",f="fp-section",p="."+f,h=p+u,m="fp-tableCell",v="."+m,g="fp-auto-height",E="fp-normal-scroll",y="fp-nav",_="#"+y,S="fp-tooltip",T="fp-slide",b="."+T,I=b+u,k="fp-slides",C="."+k,O="fp-slidesContainer",P="."+O,N="fp-table",A="fp-slidesNav",L="."+A,R=L+" a",M=".fp-controlArrow",w="fp-prev",D=M+".fp-prev",x=M+".fp-next";function U(t,n){e.console&&e.console[t]&&e.console[t]("fullPage: "+n)}function B(e,n){return(n=1<arguments.length?n:t)?n.querySelectorAll(e):null}function G(e){e=e||{};for(var t=1,n=arguments.length;t<n;++t){var a=arguments[t];if(a)for(var i in a)a.hasOwnProperty(i)&&("[object Object]"!==Object.prototype.toString.call(a[i])?e[i]=a[i]:e[i]=G(e[i],a[i]))}return e}function F(e,t){return null!=e&&(e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className))}function H(){return"innerHeight"in e?e.innerHeight:t.documentElement.offsetHeight}function j(){return e.innerWidth}function Y(e,t){var n;for(n in e=Z(e),t)if(t.hasOwnProperty(n)&&null!==n)for(var a=0;a<e.length;a++)e[a].style[n]=t[n];return e}function V(e,t,n){for(var a=e[n];a&&!ge(a,t);)a=a[n];return a}function W(e,t){return V(e,t,"previousElementSibling")}function z(e,t){return V(e,t,"nextElementSibling")}function K(e,t){if(null==t)return e.previousElementSibling;var n=K(e);return n&&ge(n,t)?n:null}function X(e,t){if(null==t)return e.nextElementSibling;var n=X(e);return n&&ge(n,t)?n:null}function q(e){return e[e.length-1]}function Q(e,t){e=ee(e)?e[0]:e;for(var n=null!=t?B(t,e.parentNode):e.parentNode.childNodes,a=0,i=0;i<n.length;i++){if(n[i]==e)return a;1==n[i].nodeType&&a++}return-1}function Z(e){return ee(e)?e:[e]}function J(e){e=Z(e);for(var t=0;t<e.length;t++)e[t].style.display="none";return e}function $(e){e=Z(e);for(var t=0;t<e.length;t++)e[t].style.display="block";return e}function ee(e){return"[object Array]"===Object.prototype.toString.call(e)||"[object NodeList]"===Object.prototype.toString.call(e)}function te(e,t){e=Z(e);for(var n=0;n<e.length;n++){var a=e[n];a.classList?a.classList.add(t):a.className+=" "+t}return e}function ne(e,t){e=Z(e);for(var n=t.split(" "),a=0;a<n.length;a++){t=n[a];for(var i=0;i<e.length;i++){var r=e[i];r.classList?r.classList.remove(t):r.className=r.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}}return e}function ae(e,t){t.appendChild(e)}function ie(e,n,a){var i;n=n||t.createElement("div");for(var r=0;r<e.length;r++){var o=e[r];(a&&!r||!a)&&(i=n.cloneNode(!0),o.parentNode.insertBefore(i,o)),i.appendChild(o)}return e}function re(e,t){ie(e,t,!0)}function oe(e,t){for("string"==typeof t&&(t=ye(t)),e.appendChild(t);e.firstChild!==t;)t.appendChild(e.firstChild)}function se(e){for(var n=t.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);e.parentNode.replaceChild(n,e)}function le(e,t){return e&&1===e.nodeType?ge(e,t)?e:le(e.parentNode,t):null}function ce(e,t){de(e,e.nextSibling,t)}function ue(e,t){de(e,e,t)}function de(e,t,n){ee(n)||("string"==typeof n&&(n=ye(n)),n=[n]);for(var a=0;a<n.length;a++)e.parentNode.insertBefore(n[a],t)}function fe(){var n=t.documentElement;return(e.pageYOffset||n.scrollTop)-(n.clientTop||0)}function pe(e){return Array.prototype.filter.call(e.parentNode.children,(function(t){return t!==e}))}function he(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function me(e){if("function"==typeof e)return!0;var t=Object.prototype.toString(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}function ve(n,a,i){var r;i=void 0===i?{}:i,"function"==typeof e.CustomEvent?r=new CustomEvent(a,{detail:i}):(r=t.createEvent("CustomEvent")).initCustomEvent(a,!0,!0,i),n.dispatchEvent(r)}function ge(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function Ee(e,t){if("boolean"==typeof t)for(var n=0;n<e.length;n++)e[n].style.display=t?"block":"none";return e}function ye(e){var n=t.createElement("div");return n.innerHTML=e.trim(),n.firstChild}function _e(e){e=Z(e);for(var t=0;t<e.length;t++){var n=e[t];n&&n.parentElement&&n.parentNode.removeChild(n)}}function Se(e,t,n){for(var a=e[n],i=[];a;)(ge(a,t)||null==t)&&i.push(a),a=a[n];return i}function Te(e,t){return Se(e,t,"nextElementSibling")}function be(e,t){return Se(e,t,"previousElementSibling")}function Ie(e,t){e.insertBefore(t,e.firstChild)}return e.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,n){n=n||e;for(var a=0;a<this.length;a++)t.call(n,this[a],a,this)}),e.fp_utils={$:B,deepExtend:G,hasClass:F,getWindowHeight:H,css:Y,until:V,prevUntil:W,nextUntil:z,prev:K,next:X,last:q,index:Q,getList:Z,hide:J,show:$,isArrayOrList:ee,addClass:te,removeClass:ne,appendTo:ae,wrap:ie,wrapAll:re,wrapInner:oe,unwrap:se,closest:le,after:ce,before:ue,insertBefore:de,getScrollTop:fe,siblings:pe,preventDefault:he,isFunction:me,trigger:ve,matches:ge,toggle:Ee,createElementFromHTML:ye,remove:_e,filter:function(e,t){Array.prototype.filter.call(e,t)},untilAll:Se,nextAll:Te,prevAll:be,showError:U,prependTo:Ie,toggleClass:function(e,t,n){if(e.classList&&null==n)e.classList.toggle(t);else{var a=F(e,t);a&&null==n||!n?ne(e,t):(!a&&null==n||n)&&te(e,t)}}},function(V,Z){var ie=Z&&new RegExp("([\\d\\w]{8}-){3}[\\d\\w]{8}|^(?=.*?[A-Y])(?=.*?[a-y])(?=.*?[0-8])(?=.*?[#?!@$%^&*-]).{8,}$").test(Z.licenseKey)||-1<t.domain.indexOf("alvarotrigo.com"),de=B("html, body"),Se=B("html")[0],ke=B("body")[0];if(!F(Se,s)){var Ce={};Z=G({menu:!1,anchors:[],lockAnchors:!1,navigation:!1,navigationPosition:"right",navigationTooltips:[],showActiveTooltip:!1,slidesNavigation:!1,slidesNavPosition:"bottom",scrollBar:!1,hybrid:!1,css3:!0,scrollingSpeed:700,autoScrolling:!0,fitToSection:!0,fitToSectionDelay:1e3,easing:"easeInOutCubic",easingcss3:"ease",loopBottom:!1,loopTop:!1,loopHorizontal:!0,continuousVertical:!1,continuousHorizontal:!1,scrollHorizontally:!1,interlockedSlides:!1,dragAndMove:!1,offsetSections:!1,resetSliders:!1,fadingEffect:!1,normalScrollElements:null,scrollOverflow:!1,scrollOverflowReset:!1,scrollOverflowHandler:e.fp_scrolloverflow?e.fp_scrolloverflow.iscrollHandler:null,scrollOverflowOptions:null,touchSensitivity:5,touchWrapper:"string"==typeof V?B(V)[0]:V,bigSectionsDestination:null,keyboardScrolling:!0,animateAnchor:!0,recordHistory:!0,controlArrows:!0,controlArrowColor:"#fff",verticalCentered:!0,sectionsColor:[],paddingTop:0,paddingBottom:0,fixedElements:null,responsive:0,responsiveWidth:0,responsiveHeight:0,responsiveSlides:!1,parallax:!1,parallaxOptions:{type:"reveal",percentage:62,property:"translate"},cards:!1,cardsOptions:{perspective:100,fadeContent:!0,fadeBackground:!0},sectionSelector:".section",slideSelector:".slide",v2compatible:!1,afterLoad:null,onLeave:null,afterRender:null,afterResize:null,afterReBuild:null,afterSlideLoad:null,onSlideLeave:null,afterResponsive:null,lazyLoading:!0},Z);var Oe,Pe,Ne,Ae,Le=!1,Re=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/),Me="ontouchstart"in e||0<navigator.msMaxTouchPoints||navigator.maxTouchPoints,we="string"==typeof V?B(V)[0]:V,De=H(),xe=j(),Ue=!1,Be=!0,Ge=!0,Fe=[],He={m:{up:!0,down:!0,left:!0,right:!0}};He.k=G({},He.m);var je,Ye,Ve,We,ze,Ke,Xe,qe,Qe,Ze,Je=sa(),$e={touchmove:"ontouchmove"in e?"touchmove":Je.move,touchstart:"ontouchstart"in e?"touchstart":Je.down},et=!1,tt=!F(ke,bn("OHNsd3AtZnVsbHBhZ2UtanM5T20=")),nt='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable]',at=!1;try{var it=Object.defineProperty({},"passive",{get:function(){at=!0}});e.addEventListener("testPassive",null,it),e.removeEventListener("testPassive",null,it)}catch(V){}var rt,ot,st=G({},Z),lt=!1,ct=!0,ut={};ya(),e.fp_easings=G(e.fp_easings,{easeInOutCubic:function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t}}),we&&(Ce.version="3.0.8",Ce.setAutoScrolling=bt,Ce.setRecordHistory=It,Ce.setScrollingSpeed=kt,Ce.setFitToSection=Ct,Ce.setLockAnchors=function(e){Z.lockAnchors=e},Ce.setMouseWheelScrolling=Ot,Ce.setAllowScrolling=Pt,Ce.setKeyboardScrolling=At,Ce.moveSectionUp=Lt,Ce.moveSectionDown=Rt,Ce.silentMoveTo=Mt,Ce.moveTo=wt,Ce.moveSlideRight=Dt,Ce.moveSlideLeft=xt,Ce.fitToSection=Zt,Ce.reBuild=Ut,Ce.setResponsive=Gt,Ce.getFullpageData=function(){return{options:Z,internals:{container:we,canScroll:Ge,isScrollAllowed:He,getDestinationPosition:ln,isTouch:Me,c:On,getXmovement:Qn,removeAnimation:Kn,getTransforms:da,lazyLoad:gn,addAnimation:zn,performHorizontalMove:jn,landscapeScroll:Gn,silentLandscapeScroll:ca,keepSlidesPosition:sn,silentScroll:ua,styleSlides:Wt,styleSection:Kt,scrollHandler:Qt,getEventsPage:la,getMSPointer:sa,isReallyTouch:tn,usingExtension:ha,toggleControlArrows:Fn,touchStartHandler:nn,touchMoveHandler:en}}},Ce.destroy=function(n){ve(we,"destroy",n),bt(!1,"internal"),Pt(!0),Nt(!1),At(!1),te(we,o),[ze,We,Ye,Ke,Xe,Qe,Ve].forEach((function(e){clearTimeout(e)})),e.removeEventListener("scroll",Qt),e.removeEventListener("hashchange",An),e.removeEventListener("resize",Yn),t.removeEventListener("keydown",Rn),t.removeEventListener("keyup",Mn),["click","touchstart"].forEach((function(e){t.removeEventListener(e,Ft)})),["mouseenter","touchstart","mouseleave","touchend"].forEach((function(e){t.removeEventListener(e,jt,!0)})),ma("dragAndMove","destroy"),n&&(ua(0),B("img[data-src], source[data-src], audio[data-src], iframe[data-src]",we).forEach((function(e){mn(e,"src")})),B("img[data-srcset]").forEach((function(e){mn(e,"srcset")})),_e(B(_+", "+L+", "+M)),Y(B(p),{height:"","background-color":"",padding:""}),Y(B(b),{width:""}),Y(we,{height:"",position:"","-ms-touch-action":"","touch-action":""}),Y(de,{overflow:"",height:""}),ne(Se,s),ne(ke,i),ke.className.split(/\s+/).forEach((function(e){0===e.indexOf(l)&&ne(ke,e)})),B(p+", "+b).forEach((function(e){Z.scrollOverflowHandler&&Z.scrollOverflow&&Z.scrollOverflowHandler.remove(e),ne(e,N+" "+c+" "+d),e.getAttribute("data-fp-styles")&&e.setAttribute("style",e.getAttribute("data-fp-styles")),F(e,f)&&!lt&&e.removeAttribute("data-anchor")})),pa(we),[v,P,C].forEach((function(e){B(e,we).forEach((function(e){se(e)}))})),e.scrollTo(0,0),[f,T,O].forEach((function(e){ne(B("."+e),e)})))},Ce.getActiveSection=function(){return new ba(B(h)[0])},Ce.getActiveSlide=function(){return fn(B(I,B(h)[0])[0])},Ce.landscapeScroll=Gn,Ce.test={top:"0px",translate3d:"translate3d(0px, 0px, 0px)",translate3dH:function(){for(var e=[],t=0;t<B(Z.sectionSelector,we).length;t++)e.push("translate3d(0px, 0px, 0px)");return e}(),left:function(){for(var e=[],t=0;t<B(Z.sectionSelector,we).length;t++)e.push(0);return e}(),options:Z,setAutoScrolling:bt},Ce.shared={afterRenderActions:qt,isNormalScrollElement:!1},e.fullpage_api=Ce,e.fullpage_extensions=!0,Z.$&&Object.keys(Ce).forEach((function(e){Z.$.fn.fullpage[e]=Ce[e]})),Vt("continuousHorizontal"),Vt("scrollHorizontally"),Vt("resetSliders"),Vt("interlockedSlides"),Vt("responsiveSlides"),Vt("fadingEffect"),Vt("dragAndMove"),Vt("offsetSections"),Vt("scrollOverflowReset"),Vt("parallax"),Vt("cards"),ma("dragAndMove","init"),Z.css3&&(Z.css3=function(){var n,a=t.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var r in a.style.display="block",t.body.insertBefore(a,null),i)void 0!==a.style[r]&&(a.style[r]="translate3d(1px,1px,1px)",n=e.getComputedStyle(a).getPropertyValue(i[r]));return t.body.removeChild(a),void 0!==n&&0<n.length&&"none"!==n}()),Z.scrollBar=Z.scrollBar||Z.hybrid,function(){if(!Z.anchors.length){var e="[data-anchor]",t=B(Z.sectionSelector.split(",").join(e+",")+e,we);t.length&&(lt=!0,t.forEach((function(e){Z.anchors.push(e.getAttribute("data-anchor").toString())})))}if(!Z.navigationTooltips.length){var n="[data-tooltip]",a=B(Z.sectionSelector.split(",").join(n+",")+n,we);a.length&&a.forEach((function(e){Z.navigationTooltips.push(e.getAttribute("data-tooltip").toString())}))}}(),function(){Y(we,{height:"100%",position:"relative"}),te(we,n),te(Se,s),De=H(),ne(we,o),te(B(Z.sectionSelector,we),f),te(B(Z.slideSelector,we),T),ma("parallax","init");for(var e=B(p),i=0;i<e.length;i++){var r=i,l=e[i],u=B(b,l),d=u.length;l.setAttribute("data-fp-styles",l.getAttribute("style")),Kt(l,r),m=l,v=r,void 0!==Z.anchors[v]&&F(m,c)&&Xn(Z.anchors[v],v),Z.menu&&Z.css3&&null!=le(B(Z.menu)[0],a)&&B(Z.menu).forEach((function(e){ke.appendChild(e)})),0<d?Wt(l,u,d):Z.verticalCentered&&Zn(l)}var m,v;Z.fixedElements&&Z.css3&&B(Z.fixedElements).forEach((function(e){ke.appendChild(e)})),Z.navigation&&function(){var e=t.createElement("div");e.setAttribute("id",y);var n=t.createElement("ul");e.appendChild(n),ae(e,ke);var a=B(_)[0];te(a,"fp-"+Z.navigationPosition),Z.showActiveTooltip&&te(a,"fp-show-active");for(var i="",r=0;r<B(p).length;r++){var o="";Z.anchors.length&&(o=Z.anchors[r]),i+='<li><a href="#'+o+'"><span class="fp-sr-only">'+Xt(r,"Section")+"</span><span></span></a>";var s=Z.navigationTooltips[r];void 0!==s&&""!==s&&(i+='<div class="'+S+" fp-"+Z.navigationPosition+'">'+s+"</div>"),i+="</li>"}B("ul",a)[0].innerHTML=i,Y(B(_),{"margin-top":"-"+B(_)[0].offsetHeight/2+"px"}),te(B("a",B("li",B(_)[0])[Q(B(h)[0],p)]),c)}(),B('iframe[src*="youtube.com/embed/"]',we).forEach((function(e){var t,n,a;n="enablejsapi=1",a=(t=e).getAttribute("src"),t.setAttribute("src",a+(/\?/.test(a)?"&":"?")+n)})),ma("fadingEffect","apply"),ma("cards","init"),Z.scrollOverflow&&(je=Z.scrollOverflowHandler.init(Z))}(),Pt(!0),Nt(!0),bt(Z.autoScrolling,"internal"),Wn(),oa(),"complete"===t.readyState&&Nn(),e.addEventListener("load",Nn),Z.scrollOverflow||qt(),function(){for(var e=1;e<4;e++)Qe=setTimeout(Yt,350*e)}(),tt||On("l"),e.addEventListener("scroll",Qt),e.addEventListener("hashchange",An),e.addEventListener("blur",Un),e.addEventListener("resize",Yn),t.addEventListener("keydown",Rn),t.addEventListener("keyup",Mn),["click","touchstart"].forEach((function(e){t.addEventListener(e,Ft)})),Z.normalScrollElements&&(["mouseenter","touchstart"].forEach((function(e){Ht(e,!1)})),["mouseleave","touchend"].forEach((function(e){Ht(e,!0)}))),ma("dragAndMove","turnOffTouch"));var dt,ft,pt,ht=!1,mt=0,vt=0,gt=0,Et=0,yt=(new Date).getTime(),_t=0,St=0,Tt=De;return Ce}function bt(e,t){e||ua(0),Ea("autoScrolling",e,t);var n=B(h)[0];if(Z.autoScrolling&&!Z.scrollBar)Y(de,{overflow:"hidden",height:"100%"}),It(st.recordHistory,"internal"),Y(we,{"-ms-touch-action":"none","touch-action":"none"}),null!=n&&ua(n.offsetTop);else if(Y(de,{overflow:"visible",height:"initial"}),It(!!Z.autoScrolling&&st.recordHistory,"internal"),Y(we,{"-ms-touch-action":"","touch-action":""}),pa(we),null!=n){var a=pn(n.offsetTop);a.element.scrollTo(0,a.options)}ve(we,"setAutoScrolling",e)}function It(e,t){Ea("recordHistory",e,t)}function kt(e,t){"internal"!==t&&ha("fadingEffect")&&Ce.fadingEffect.update(e),ha("cards")&&Ce.cards.update(e),Ea("scrollingSpeed",e,t)}function Ct(e,t){Ea("fitToSection",e,t)}function Ot(n){n?(function(){var n,a="";e.addEventListener?n="addEventListener":(n="attachEvent",a="on");var i="onwheel"in t.createElement("div")?"wheel":void 0!==t.onmousewheel?"mousewheel":"DOMMouseScroll",r=!!at&&{passive:!1};"DOMMouseScroll"==i?t[n](a+"MozMousePixelScroll",rn,r):t[n](a+i,rn,r)}(),we.addEventListener("mousedown",wn),we.addEventListener("mouseup",Dn)):(t.addEventListener?(t.removeEventListener("mousewheel",rn,!1),t.removeEventListener("wheel",rn,!1),t.removeEventListener("MozMousePixelScroll",rn,!1)):t.detachEvent("onmousewheel",rn),we.removeEventListener("mousedown",wn),we.removeEventListener("mouseup",Dn))}function Pt(e,t){void 0!==t?(t=t.replace(/ /g,"").split(",")).forEach((function(t){fa(e,t,"m")})):fa(e,"all","m"),ve(we,"setAllowScrolling",{value:e,directions:t})}function Nt(e){e?(Ot(!0),function(){if(Re||Me){Z.autoScrolling&&(ke.removeEventListener($e.touchmove,$t,{passive:!1}),ke.addEventListener($e.touchmove,$t,{passive:!1}));var e=Z.touchWrapper;e.removeEventListener($e.touchstart,nn),e.removeEventListener($e.touchmove,en,{passive:!1}),e.addEventListener($e.touchstart,nn),e.addEventListener($e.touchmove,en,{passive:!1})}}()):(Ot(!1),function(){if(Re||Me){Z.autoScrolling&&(ke.removeEventListener($e.touchmove,en,{passive:!1}),ke.removeEventListener($e.touchmove,$t,{passive:!1}));var e=Z.touchWrapper;e.removeEventListener($e.touchstart,nn),e.removeEventListener($e.touchmove,en,{passive:!1})}}())}function At(e,t){void 0!==t?(t=t.replace(/ /g,"").split(",")).forEach((function(t){fa(e,t,"k")})):(fa(e,"all","k"),Z.keyboardScrolling=e)}function Lt(){var e=W(B(h)[0],p);e||!Z.loopTop&&!Z.continuousVertical||(e=q(B(p))),null!=e&&cn(e,null,!0)}function Rt(){var e=z(B(h)[0],p);e||!Z.loopBottom&&!Z.continuousVertical||(e=B(p)[0]),null!=e&&cn(e,null,!1)}function Mt(e,t){kt(0,"internal"),wt(e,t),kt(st.scrollingSpeed,"internal")}function wt(e,t){var n=ea(e);void 0!==t?ta(e,t):null!=n&&cn(n)}function Dt(e){on("right",e)}function xt(e){on("left",e)}function Ut(t){if(!F(we,o)){Ue=!0,De=H(),xe=j();for(var n=B(p),a=0;a<n.length;++a){var i=n[a],r=B(C,i)[0],s=B(b,i);Z.verticalCentered&&Y(B(v,i),{height:Jn(i)+"px"}),Y(i,{height:zt(i)+"px"}),1<s.length&&Gn(r,B(I,r)[0])}Z.scrollOverflow&&je.createScrollBarForAll();var l=Q(B(h)[0],p);l&&!ha("fadingEffect")&&Mt(l+1),Ue=!1,me(Z.afterResize)&&t&&Z.afterResize.call(we,e.innerWidth,e.innerHeight),me(Z.afterReBuild)&&!t&&Z.afterReBuild.call(we),ve(we,"afterRebuild")}}function Bt(){return F(ke,i)}function Gt(e){var t=Bt();e?t||(bt(!1,"internal"),Ct(!1,"internal"),J(B(_)),te(ke,i),me(Z.afterResponsive)&&Z.afterResponsive.call(we,e),ma("responsiveSlides","toSections"),ve(we,"afterResponsive",e),Z.scrollOverflow&&je.createScrollBarForAll()):t&&(bt(st.autoScrolling,"internal"),Ct(st.autoScrolling,"internal"),$(B(_)),ne(ke,i),me(Z.afterResponsive)&&Z.afterResponsive.call(we,e),ma("responsiveSlides","toSlides"),ve(we,"afterResponsive",e))}function Ft(e){var t=e.target;t&&le(t,_+" a")?function(e){he(e);var t=Q(le(this,_+" li"));cn(B(p)[t])}.call(t,e):ge(t,".fp-tooltip")?function(){ve(K(this),"click")}.call(t):ge(t,M)?function(){var e=le(this,p);F(this,w)?He.m.left&&xt(e):He.m.right&&Dt(e)}.call(t,e):ge(t,R)||null!=le(t,R)?function(e){he(e);var t=B(C,le(this,p))[0];Gn(t,B(b,t)[Q(le(this,"li"))])}.call(t,e):le(t,Z.menu+" [data-menuanchor]")&&function(e){!B(Z.menu)[0]||!Z.lockAnchors&&Z.anchors.length||(he(e),wt(this.getAttribute("data-menuanchor")))}.call(t,e)}function Ht(e,n){t["fp_"+e]=n,t.addEventListener(e,jt,!0)}function jt(e){var n=e.type,a=!1,i=Z.scrollOverflow,r="mouseleave"===n?e.toElement||e.relatedTarget:e.target;if(r==t||!r)return Nt(!0),void(i&&Z.scrollOverflowHandler.setIscroll(r,!0));"touchend"===n&&(ct=!1,setTimeout((function(){ct=!0}),800)),("mouseenter"!==n||ct)&&(Z.normalScrollElements.split(",").forEach((function(e){if(!a){var t=ge(r,e),n=le(r,e);(t||n)&&(Ce.shared.isNormalScrollElement||(Nt(!1),i&&Z.scrollOverflowHandler.setIscroll(r,!1)),Ce.shared.isNormalScrollElement=!0,a=!0)}})),!a&&Ce.shared.isNormalScrollElement&&(Nt(!0),i&&Z.scrollOverflowHandler.setIscroll(r,!0),Ce.shared.isNormalScrollElement=!1))}function Yt(){var e=H(),t=j();De===e&&xe===t||(De=e,xe=t,Ut(!0))}function Vt(t){var n="fp_"+t+"Extension";ut[t]=Z[t+"Key"],Ce[t]=void 0!==e[n]?new e[n]:null,Ce[t]&&Ce[t].c(t)}function Wt(e,n,a){var i=100*a,r=100/a,o=t.createElement("div");o.className=k,re(n,o);var s,l,u=t.createElement("div");u.className=O,re(n,u),Y(B(P,e),{width:i+"%"}),1<a&&(Z.controlArrows&&(s=e,l=[ye('<div class="fp-controlArrow fp-prev"></div>'),ye('<div class="fp-controlArrow fp-next"></div>')],ce(B(C,s)[0],l),"#fff"!==Z.controlArrowColor&&(Y(B(x,s),{"border-color":"transparent transparent transparent "+Z.controlArrowColor}),Y(B(D,s),{"border-color":"transparent "+Z.controlArrowColor+" transparent transparent"})),Z.loopHorizontal||J(B(D,s))),Z.slidesNavigation&&function(e,t){ae(ye('<div class="'+A+'"><ul></ul></div>'),e);var n=B(L,e)[0];te(n,"fp-"+Z.slidesNavPosition);for(var a=0;a<t;a++)ae(ye('<li><a href="#"><span class="fp-sr-only">'+Xt(a,"Slide")+"</span><span></span></a></li>"),B("ul",n)[0]);Y(n,{"margin-left":"-"+n.innerWidth/2+"px"}),te(B("a",B("li",n)[0]),c)}(e,a)),n.forEach((function(e){Y(e,{width:r+"%"}),Z.verticalCentered&&Zn(e)}));var d=B(I,e)[0];null!=d&&(0!==Q(B(h),p)||0===Q(B(h),p)&&0!==Q(d))?(ca(d,"internal"),te(d,"fp-initial")):te(n[0],c)}function zt(e){return Z.offsetSections&&Ce.offsetSections?Math.round(Ce.offsetSections.getWindowHeight(e)):H()}function Kt(e,t){t||null!=B(h)[0]||te(e,c),Ae=B(h)[0],Y(e,{height:zt(e)+"px"}),Z.paddingTop&&Y(e,{"padding-top":Z.paddingTop}),Z.paddingBottom&&Y(e,{"padding-bottom":Z.paddingBottom}),void 0!==Z.sectionsColor[t]&&Y(e,{"background-color":Z.sectionsColor[t]}),void 0!==Z.anchors[t]&&e.setAttribute("data-anchor",Z.anchors[t])}function Xt(e,t){return Z.navigationTooltips[e]||Z.anchors[e]||t+" "+(e+1)}function qt(){var e,t,n=B(h)[0];te(n,d),gn(n),vn(),yn(n),Z.scrollOverflow&&Z.scrollOverflowHandler.afterLoad(),t=ea((e=Ln()).section),e.section&&t&&(void 0===t||Q(t)!==Q(Ae))||!me(Z.afterLoad)||un("afterLoad",{activeSection:n,element:n,direction:null,anchorLink:n.getAttribute("data-anchor"),sectionIndex:Q(n,p)}),me(Z.afterRender)&&un("afterRender"),ve(we,"afterRender")}function Qt(){var e;if(ve(we,"onScroll"),(!Z.autoScrolling||Z.scrollBar||ha("dragAndMove"))&&!ga()){var t=ha("dragAndMove")?Math.abs(Ce.dragAndMove.getCurrentScroll()):fe(),n=0,a=t+H()/2,i=(ha("dragAndMove")?Ce.dragAndMove.getDocumentHeight():ke.offsetHeight-H())===t,r=B(p);if(i)n=r.length-1;else if(t)for(var o=0;o<r.length;++o)r[o].offsetTop<=a&&(n=o);else n=0;if(!F(e=r[n],c)){ht=!0;var s,l,u=B(h)[0],d=Q(u,p)+1,f=qn(e),m=e.getAttribute("data-anchor"),v=Q(e,p)+1,g=B(I,e)[0],E={activeSection:u,sectionIndex:v-1,anchorLink:m,element:e,leavingSection:d,direction:f};g&&(l=g.getAttribute("data-anchor"),s=Q(g)),Ge&&(te(e,c),ne(pe(e),c),ma("parallax","afterLoad"),me(Z.onLeave)&&un("onLeave",E),me(Z.afterLoad)&&un("afterLoad",E),ha("resetSliders")&&Ce.resetSliders.apply({localIsResizing:Ue,leavingSection:d}),Sn(u),gn(e),yn(e),Xn(m,v-1),Z.anchors.length&&(Oe=m),aa(s,l,m)),clearTimeout(Ke),Ke=setTimeout((function(){ht=!1}),100)}Z.fitToSection&&(clearTimeout(Xe),Xe=setTimeout((function(){Z.fitToSection&&B(h)[0].offsetHeight<=De&&Zt()}),Z.fitToSectionDelay))}}function Zt(){Ge&&(Ue=!0,cn(B(h)[0]),Ue=!1)}function Jt(e){if(He.m[e]){var t="down"===e?Rt:Lt;if(ha("scrollHorizontally")&&(t=Ce.scrollHorizontally.getScrollSection(e,t)),Z.scrollOverflow){var n=Z.scrollOverflowHandler.scrollable(B(h)[0]),a="down"===e?"bottom":"top";if(null!=n){if(!Z.scrollOverflowHandler.isScrolled(a,n))return!0;t()}else t()}else t()}}function $t(e){Z.autoScrolling&&tn(e)&&He.m.up&&he(e)}function en(t){var n=le(t.target,p)||B(h)[0];if(tn(t)){Z.autoScrolling&&he(t);var a=la(t);gt=a.y,Et=a.x,B(C,n).length&&Math.abs(vt-Et)>Math.abs(mt-gt)?!Le&&Math.abs(vt-Et)>j()/100*Z.touchSensitivity&&(Et<vt?He.m.right&&Dt(n):He.m.left&&xt(n)):Z.autoScrolling&&Ge&&Math.abs(mt-gt)>e.innerHeight/100*Z.touchSensitivity&&(gt<mt?Jt("down"):mt<gt&&Jt("up"))}}function tn(e){return void 0===e.pointerType||"mouse"!=e.pointerType}function nn(e){if(Z.fitToSection&&(rt=!1),tn(e)){var t=la(e);mt=t.y,vt=t.x}}function an(e,t){for(var n=0,a=e.slice(Math.max(e.length-t,1)),i=0;i<a.length;i++)n+=a[i];return Math.ceil(n/t)}function rn(t){var n=(new Date).getTime(),a=F(B(".fp-completely")[0],E);if(!He.m.down&&!He.m.up)return he(t),!1;if(Z.autoScrolling&&!Ne&&!a){var i=(t=t||e.event).wheelDelta||-t.deltaY||-t.detail,r=Math.max(-1,Math.min(1,i)),o=void 0!==t.wheelDeltaX||void 0!==t.deltaX,s=Math.abs(t.wheelDeltaX)<Math.abs(t.wheelDelta)||Math.abs(t.deltaX)<Math.abs(t.deltaY)||!o;149<Fe.length&&Fe.shift(),Fe.push(Math.abs(i)),Z.scrollBar&&he(t);var l=n-yt;if(yt=n,200<l&&(Fe=[]),Ge&&!va()){var c=an(Fe,10);an(Fe,70)<=c&&s&&Jt(r<0?"down":"up")}return!1}Z.fitToSection&&(rt=!1)}function on(e,t){var n=null==t?B(h)[0]:t,a=B(C,n)[0];if(!(null==a||va()||Le||B(b,a).length<2)){var i=B(I,a)[0],r=null;if(null==(r="left"===e?W(i,b):z(i,b))){if(!Z.loopHorizontal)return;var o=pe(i);r="left"===e?o[o.length-1]:o[0]}Le=!Ce.test.isTesting,Gn(a,r,e)}}function sn(){for(var e=B(I),t=0;t<e.length;t++)ca(e[t],"internal")}function ln(e){var t=e.offsetHeight,n=e.offsetTop,a=n,i=ha("dragAndMove")&&Ce.dragAndMove.isGrabbing?Ce.dragAndMove.isScrollingDown():_t<n,r=a-De+t,o=Z.bigSectionsDestination;return De<t?(i||o)&&"bottom"!==o||(a=r):(i||Ue&&null==X(e))&&(a=r),Z.offsetSections&&Ce.offsetSections&&(a=Ce.offsetSections.getSectionPosition(i,a,e)),_t=a}function cn(e,t,n){if(null!=e){var i,r,o={element:e,callback:t,isMovementUp:n,dtop:ln(e),yMovement:qn(e),anchorLink:e.getAttribute("data-anchor"),sectionIndex:Q(e,p),activeSlide:B(I,e)[0],activeSection:B(h)[0],leavingSection:Q(B(h),p)+1,localIsResizing:Ue};if(!(o.activeSection==e&&!Ue||Z.scrollBar&&fe()===o.dtop&&!F(e,g))){if(null!=o.activeSlide&&(i=o.activeSlide.getAttribute("data-anchor"),r=Q(o.activeSlide)),!o.localIsResizing){var s=o.yMovement;if(void 0!==n&&(s=n?"up":"down"),o.direction=s,me(Z.onLeave)&&!1===un("onLeave",o))return}var l;ma("parallax","apply",o),ma("cards","apply",o),Z.autoScrolling&&Z.continuousVertical&&void 0!==o.isMovementUp&&(!o.isMovementUp&&"up"==o.yMovement||o.isMovementUp&&"down"==o.yMovement)&&((u=o).isMovementUp?ue(B(h)[0],Te(u.activeSection,p)):ce(B(h)[0],be(u.activeSection,p).reverse()),ua(B(h)[0].offsetTop),sn(),u.wrapAroundElements=u.activeSection,u.dtop=u.element.offsetTop,u.yMovement=qn(u.element),u.leavingSection=Q(u.activeSection,p)+1,u.sectionIndex=Q(u.element,p),ve(B(a)[0],"onContinuousVertical",u),o=u),ha("scrollOverflowReset")&&Ce.scrollOverflowReset.setPrevious(o.activeSection),o.localIsResizing||Sn(o.activeSection),Z.scrollOverflow&&Z.scrollOverflowHandler.beforeLeave(),te(e,c),ne(pe(e),c),gn(e),Z.scrollOverflow&&Z.scrollOverflowHandler.onLeave(),Ge=Ce.test.isTesting,aa(r,i,o.anchorLink,o.sectionIndex),function(e){if(Z.css3&&Z.autoScrolling&&!Z.scrollBar)$n("translate3d(0px, -"+Math.round(e.dtop)+"px, 0px)",!0),Z.scrollingSpeed?(clearTimeout(We),We=setTimeout((function(){hn(e)}),Z.scrollingSpeed)):hn(e);else{var t=pn(e.dtop);Ce.test.top=-e.dtop+"px",_a(t.element,t.options,Z.scrollingSpeed,(function(){Z.scrollBar?setTimeout((function(){hn(e)}),30):hn(e)}))}}(o),Oe=o.anchorLink,Xn(o.anchorLink,null==(l=o).wrapAroundElements?l.sectionIndex:l.isMovementUp?B(p).length-1:0)}}var u}function un(e,t){var n,a,i,r,o=(a=e,i=t,(r=Z.v2compatible?{afterRender:function(){return[we]},onLeave:function(){return[i.activeSection,i.leavingSection,i.sectionIndex+1,i.direction]},afterLoad:function(){return[i.element,i.anchorLink,i.sectionIndex+1]},afterSlideLoad:function(){return[i.destiny,i.anchorLink,i.sectionIndex+1,i.slideAnchor,i.slideIndex]},onSlideLeave:function(){return[i.prevSlide,i.anchorLink,i.sectionIndex+1,i.prevSlideIndex,i.direction,i.slideIndex]}}:{afterRender:function(){return{section:dn(B(h)[0]),slide:fn(B(I,B(h)[0])[0])}},onLeave:function(){return{origin:dn(i.activeSection),destination:dn(i.element),direction:i.direction}},afterLoad:function(){return r.onLeave()},afterSlideLoad:function(){return{section:dn(i.section),origin:fn(i.prevSlide),destination:fn(i.destiny),direction:i.direction}},onSlideLeave:function(){return r.afterSlideLoad()}})[a]());if(Z.v2compatible){if(!1===Z[e].apply(o[0],o.slice(1)))return!1}else if(ve(we,e,o),!1===Z[e].apply(o[Object.keys(o)[0]],(n=o,Object.keys(n).map((function(e){return n[e]})))))return!1;return!0}function dn(e){return e?new ba(e):null}function fn(e){return e?new Ia(e):null}function pn(t){var n={};return Z.autoScrolling&&!Z.scrollBar?(n.options=-t,n.element=B(a)[0]):(n.options=t,n.element=e),n}function hn(e){var t;null!=(t=e).wrapAroundElements&&(t.isMovementUp?ue(B(p)[0],t.wrapAroundElements):ce(B(p)[B(p).length-1],t.wrapAroundElements),ua(B(h)[0].offsetTop),sn(),t.sectionIndex=Q(t.element,p),t.leavingSection=Q(t.activeSection,p)+1),me(Z.afterLoad)&&!e.localIsResizing&&un("afterLoad",e),Z.scrollOverflow&&Z.scrollOverflowHandler.afterLoad(),ma("parallax","afterLoad"),ma("scrollOverflowReset","reset"),ha("resetSliders")&&Ce.resetSliders.apply(e),e.localIsResizing||yn(e.element),te(e.element,d),ne(pe(e.element),d),vn(),Ge=!0,me(e.callback)&&e.callback()}function mn(e,t){e.setAttribute(t,e.getAttribute("data-"+t)),e.removeAttribute("data-"+t)}function vn(){var e=B(".fp-auto-height")[0]||Bt()&&B(".fp-auto-height-responsive")[0];Z.lazyLoading&&e&&B(p+":not("+u+")").forEach((function(e){var t,n,a;n=(t=e.getBoundingClientRect()).top,a=t.bottom,(n+2<De&&0<n||2<a&&a<De)&&gn(e)}))}function gn(e){Z.lazyLoading&&B("img[data-src], img[data-srcset], source[data-src], source[data-srcset], video[data-src], audio[data-src], iframe[data-src]",Tn(e)).forEach((function(t){if(["src","srcset"].forEach((function(n){var a=t.getAttribute("data-"+n);null!=a&&a&&(mn(t,n),t.addEventListener("load",(function(){En(e)})))})),ge(t,"source")){var n=le(t,"video, audio");n&&(n.load(),n.onloadeddata=function(){En(e)})}}))}function En(e){Z.scrollOverflow&&(clearTimeout(ot),ot=setTimeout((function(){je.createScrollBar(e)}),200))}function yn(e){var t=Tn(e);B("video, audio",t).forEach((function(e){e.hasAttribute("data-autoplay")&&"function"==typeof e.play&&e.play()})),B('iframe[src*="youtube.com/embed/"]',t).forEach((function(e){e.hasAttribute("data-autoplay")&&_n(e),e.onload=function(){e.hasAttribute("data-autoplay")&&_n(e)}}))}function _n(e){e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}function Sn(e){var t=Tn(e);B("video, audio",t).forEach((function(e){e.hasAttribute("data-keepplaying")||"function"!=typeof e.pause||e.pause()})),B('iframe[src*="youtube.com/embed/"]',t).forEach((function(e){/youtube\.com\/embed\//.test(e.getAttribute("src"))&&!e.hasAttribute("data-keepplaying")&&e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}))}function Tn(e){var t=B(I,e);return t.length&&(e=t[0]),e}function bn(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(e){var n,a,i,r,o,s,l="",c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");c<e.length;)n=t.indexOf(e.charAt(c++))<<2|(r=t.indexOf(e.charAt(c++)))>>4,a=(15&r)<<4|(o=t.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(s=t.indexOf(e.charAt(c++))),l+=String.fromCharCode(n),64!=o&&(l+=String.fromCharCode(a)),64!=s&&(l+=String.fromCharCode(i));return function(e){for(var t,n="",a=0,i=0,r=0;a<e.length;)(i=e.charCodeAt(a))<128?(n+=String.fromCharCode(i),a++):191<i&&i<224?(r=e.charCodeAt(a+1),n+=String.fromCharCode((31&i)<<6|63&r),a+=2):(r=e.charCodeAt(a+1),t=e.charCodeAt(a+2),n+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&t),a+=3);return n}(l)}function a(e){return e.slice(3).slice(0,-3)}return function(e){var t=e.split("_");if(1<t.length){var i=t[1];return e.replace(a(t[1]),"").split("_")[0]+"_"+n(i.slice(3).slice(0,-3))}return a(e)}(n(e))}function In(e){var n=void 0!==ut[e]&&ut[e].length,a=[],i=!1;return ee(ut[e])?a=ut[e]:a.push(ut[e]),a.forEach((function(a){var r=function(){if(t.domain.length){for(var e=t.domain.replace(/^(www\.)/,"").split(".");2<e.length;)e.shift();return e.join(".").replace(/(^\.*)|(\.*$)/g,"")}return""}(),o=["MTM0bG9jYWxob3N0MjM0","MTM0MC4xMjM0","MTM0anNoZWxsLm5ldDIzNA==","UDdDQU5ZNlNN"],s=bn(o[0]),l=bn(o[1]),c=bn(o[2]),u=bn(o[3]),d=[s,l,c].indexOf(r)<0&&0!==r.length;if(!n&&d)return!1;var f=n?bn(a):"",p=1<(f=f.split("_")).length&&-1<f[1].indexOf(e,f[1].length-e.length),h=f[0].indexOf(r,f[0].length-r.length)<0;i=i||!(h&&d&&u!=f[0])&&p||!d})),i}function kn(t){t.forEach((function(t){if(t.removedNodes[0]&&t.removedNodes[0].isEqualNode(ft)){clearTimeout(pt);var n=bn("bDIwc2V0VGltZW91dDAzbA==");pt=e[n](Cn,900)}}))}function Cn(){et=!1}function On(n){if(ft=t.createElement("div"),dt=bn("MTIzPGRpdj48YSBocmVmPSJodHRwOi8vYWx2YXJvdHJpZ28uY29tL2Z1bGxQYWdlL2V4dGVuc2lvbnMvIiBzdHlsZT0iY29sb3I6ICNmZmYgIWltcG9ydGFudDsgdGV4dC1kZWNvcmF0aW9uOm5vbmUgIWltcG9ydGFudDsiPlVubGljZW5zZWQgZnVsbFBhZ2UuanMgRXh0ZW5zaW9uPC9hPjwvZGl2PjEyMw=="),tt||(dt=dt.replace("extensions/","").replace("Extension","")),ft.innerHTML=dt,ft=ft.firstChild,"MutationObserver"in e&&new MutationObserver(kn).observe(t.body,{childList:!0,subtree:!1}),(!tt||ha(n)&&Ce[n])&&(!In(n)||!tt)){Pn();var a=bn("MzQ1c2V0SW50ZXJ2YWwxMjM=");e[a](Pn,2e3)}}function Pn(){ft&&(et||(Math.random()<.5?Ie(ke,ft):ae(ft,ke),et=!0),ft.setAttribute("style",bn("MTIzei1pbmRleDo5OTk5OTk5O3Bvc2l0aW9uOmZpeGVkO3RvcDoyMHB4O2JvdHRvbTphdXRvO2xlZnQ6MjBweDtyaWdodDphdXRvO2JhY2tncm91bmQ6cmVkO3BhZGRpbmc6N3B4IDE1cHg7Zm9udC1zaXplOjE0cHg7Zm9udC1mYW1pbHk6YXJpYWw7Y29sb3I6I2ZmZjtkaXNwbGF5OmlubGluZS1ibG9jazt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApO29wYWNpdHk6MTtoZWlnaHQ6YXV0bzt3aWR0aDphdXRvO3pvb206MTttYXJnaW46YXV0bztib3JkZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7Y2xpcC1wYXRoOm5vbmU7MTIz").replace(/;/g,bn("MTIzICFpbXBvcnRhbnQ7MzQ1"))))}function Nn(){var e=Ln(),t=e.section,n=e.slide;t&&(Z.animateAnchor?ta(t,n):Mt(t,n))}function An(){if(!ht&&!Z.lockAnchors){var e=Ln(),t=e.section,n=e.slide,a=void 0===Oe,i=void 0===Oe&&void 0===n&&!Le;if(t&&t.length){var r=!ha("dragAndMove")||Pe;(t&&t!==Oe&&!a||i||!Le&&Pe!=n&&r)&&ta(t,n)}}}function Ln(){var t,n,a=e.location.hash;if(a.length){var i=a.replace("#","").split("/"),r=-1<a.indexOf("#/");t=r?"/"+i[1]:decodeURIComponent(i[0]);var o=r?i[2]:i[1];o&&o.length&&(n=decodeURIComponent(o))}return{section:t,slide:n}}function Rn(e){clearTimeout(qe);var n=t.activeElement,a=e.keyCode;9===a?function(e){var n,a,i,r,o,s,l=e.shiftKey,c=t.activeElement,u=xn(Tn(B(h)[0]));function d(e){return he(e),u[0]?u[0].focus():null}n=e,i=(a=xn(t)).indexOf(t.activeElement),o=fn(le(r=a[n.shiftKey?i-1:i+1],b)),s=dn(le(r,p)),(o||s)&&(c?null==le(c,h+","+h+" "+I)&&(c=d(e)):d(e),(!l&&c==u[u.length-1]||l&&c==u[0])&&he(e))}(e):ge(n,"textarea")||ge(n,"input")||ge(n,"select")||"true"===n.getAttribute("contentEditable")||""===n.getAttribute("contentEditable")||!Z.keyboardScrolling||!Z.autoScrolling||(-1<[40,38,32,33,34].indexOf(a)&&he(e),Ne=e.ctrlKey,qe=setTimeout((function(){!function(e){var n=e.shiftKey,a=t.activeElement,i=ge(a,"video")||ge(a,"audio");if(Ge||!([37,39].indexOf(e.keyCode)<0))switch(e.keyCode){case 38:case 33:He.k.up&&Lt();break;case 32:if(n&&He.k.up&&!i){Lt();break}case 40:case 34:He.k.down&&(32===e.keyCode&&i||Rt());break;case 36:He.k.up&&wt(1);break;case 35:He.k.down&&wt(B(p).length);break;case 37:He.k.left&&xt();break;case 39:He.k.right&&Dt()}}(e)}),150))}function Mn(e){Be&&(Ne=e.ctrlKey)}function wn(e){2==e.which&&(St=e.pageY,we.addEventListener("mousemove",Bn))}function Dn(e){2==e.which&&we.removeEventListener("mousemove",Bn)}function xn(e){return[].slice.call(B(nt,e)).filter((function(e){return"-1"!==e.getAttribute("tabindex")&&null!==e.offsetParent}))}function Un(){Ne=Be=!1}function Bn(e){Z.autoScrolling&&(Ge&&(e.pageY<St&&He.m.up?Lt():e.pageY>St&&He.m.down&&Rt()),St=e.pageY)}function Gn(e,t,n){var a=le(e,p),i={slides:e,destiny:t,direction:n,destinyPos:{left:t.offsetLeft},slideIndex:Q(t),section:a,sectionIndex:Q(a,p),anchorLink:a.getAttribute("data-anchor"),slidesNav:B(L,a)[0],slideAnchor:ra(t),prevSlide:B(I,a)[0],prevSlideIndex:Q(B(I,a)[0]),localIsResizing:Ue};i.xMovement=Qn(i.prevSlideIndex,i.slideIndex),i.direction=i.direction?i.direction:i.xMovement,i.localIsResizing||(Ge=!1),ma("parallax","applyHorizontal",i),ma("cards","apply",i),Z.onSlideLeave&&!i.localIsResizing&&"none"!==i.xMovement&&me(Z.onSlideLeave)&&!1===un("onSlideLeave",i)?Le=!1:(te(t,c),ne(pe(t),c),i.localIsResizing||(Sn(i.prevSlide),gn(t)),Fn(i),F(a,c)&&!i.localIsResizing&&aa(i.slideIndex,i.slideAnchor,i.anchorLink,i.sectionIndex),Ce.continuousHorizontal&&Ce.continuousHorizontal.apply(i),ga()?Hn(i):jn(e,i,!0),Z.interlockedSlides&&Ce.interlockedSlides&&(ha("continuousHorizontal")&&void 0!==n&&n!==i.xMovement||Ce.interlockedSlides.apply(i)))}function Fn(e){!Z.loopHorizontal&&Z.controlArrows&&(Ee(B(D,e.section),0!==e.slideIndex),Ee(B(x,e.section),null!=X(e.destiny)))}function Hn(e){var t,n;Ce.continuousHorizontal&&Ce.continuousHorizontal.afterSlideLoads(e),t=e.slidesNav,n=e.slideIndex,Z.slidesNavigation&&null!=t&&(ne(B(u,t),c),te(B("a",B("li",t)[n]),c)),e.localIsResizing||(ma("parallax","afterSlideLoads"),ma("scrollOverflowReset","setPrevious",e.prevSlide),ma("scrollOverflowReset","reset"),me(Z.afterSlideLoad)&&un("afterSlideLoad",e),Ge=!0,yn(e.destiny)),Le=!1,ha("interlockedSlides")&&Ce.interlockedSlides.apply(e)}function jn(e,t,n){var a=t.destinyPos;if(Z.css3){var i="translate3d(-"+Math.round(a.left)+"px, 0px, 0px)";Ce.test.translate3dH[t.sectionIndex]=i,Y(zn(B(P,e)),da(i)),ze=setTimeout((function(){n&&Hn(t)}),Z.scrollingSpeed)}else Ce.test.left[t.sectionIndex]=Math.round(a.left),_a(e,Math.round(a.left),Z.scrollingSpeed,(function(){n&&Hn(t)}))}function Yn(){clearTimeout(Ye),Ye=setTimeout((function(){for(var e=0;e<4;e++)Ve=setTimeout(Vn,200*e)}),200)}function Vn(){if(ve(we,"onResize"),Wn(),Re){var e=t.activeElement;if(!ge(e,"textarea")&&!ge(e,"input")&&!ge(e,"select")){var n=H();Math.abs(n-Tt)>20*Math.max(Tt,n)/100&&(Ut(!0),Tt=n)}}else Yt()}function Wn(){var t=Z.responsive||Z.responsiveWidth,n=Z.responsiveHeight,a=t&&e.innerWidth<t,i=n&&e.innerHeight<n;t&&n?Gt(a||i):t?Gt(a):n&&Gt(i)}function zn(e){var t="all "+Z.scrollingSpeed+"ms "+Z.easingcss3;return ne(e,r),Y(e,{"-webkit-transition":t,transition:t})}function Kn(e){return te(e,r)}function Xn(e,t){var n,a,i,r;n=e,B(Z.menu).forEach((function(e){Z.menu&&null!=e&&(ne(B(u,e),c),te(B('[data-menuanchor="'+n+'"]',e),c))})),a=e,i=t,r=B(_)[0],Z.navigation&&null!=r&&"none"!==r.style.display&&(ne(B(u,B(_)[0]),c),te(a?B('a[href="#'+a+'"]',B(_)[0]):B("a",B("li",B(_)[0])[i]),c))}function qn(e){var t=Q(B(h)[0],p),n=Q(e,p);return t==n?"none":n<t?"up":"down"}function Qn(e,t){return e==t?"none":t<e?"left":"right"}function Zn(e){if(!F(e,N)){var n=t.createElement("div");n.className=m,n.style.height=Jn(e)+"px",te(e,N),oe(e,n)}}function Jn(e){var t=zt(e);if(Z.paddingTop||Z.paddingBottom){var n=e;F(n,f)||(n=le(e,p)),t-=parseInt(getComputedStyle(n)["padding-top"])+parseInt(getComputedStyle(n)["padding-bottom"])}return t}function $n(e,t){t?zn(we):Kn(we),clearTimeout(Ze),Y(we,da(e)),Ce.test.translate3d=e,Ze=setTimeout((function(){ne(we,r)}),10)}function ea(e){var t=B(p+'[data-anchor="'+e+'"]',we)[0];if(!t){var n=void 0!==e?e-1:0;t=B(p)[n]}return t}function ta(e,t){var n=ea(e);if(null!=n){var a,i,r,o=(null==(r=B(b+'[data-anchor="'+(a=t)+'"]',i=n)[0])&&(a=void 0!==a?a:0,r=B(b,i)[a]),r);ra(n)===Oe||F(n,c)?na(o):cn(n,(function(){na(o)}))}}function na(e){null!=e&&Gn(le(e,C),e)}function aa(e,t,n,a){var i="";Z.anchors.length&&!Z.lockAnchors&&(e?(null!=n&&(i=n),null==t&&(t=e),ia(i+"/"+(Pe=t))):(null!=e&&(Pe=t),ia(n))),oa()}function ia(t){if(Z.recordHistory)location.hash=t;else if(Re||Me)e.history.replaceState(void 0,void 0,"#"+t);else{var n=e.location.href.split("#")[0];e.location.replace(n+"#"+t)}}function ra(e){if(!e)return null;var t=e.getAttribute("data-anchor"),n=Q(e);return null==t&&(t=n),t}function oa(){var e=B(h)[0],t=B(I,e)[0],n=ra(e),a=ra(t),i=String(n);t&&(i=i+"-"+a),i=i.replace("/","-").replace("#","");var r=new RegExp("\\b\\s?"+l+"-[^\\s]+\\b","g");ke.className=ke.className.replace(r,""),te(ke,l+"-"+i)}function sa(){return e.PointerEvent?{down:"pointerdown",move:"pointermove"}:{down:"MSPointerDown",move:"MSPointerMove"}}function la(e){var t=[];return t.y=void 0!==e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,t.x=void 0!==e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,Me&&tn(e)&&Z.scrollBar&&void 0!==e.touches&&(t.y=e.touches[0].pageY,t.x=e.touches[0].pageX),t}function ca(e,t){kt(0,"internal"),void 0!==t&&(Ue=!0),Gn(le(e,C),e),void 0!==t&&(Ue=!1),kt(st.scrollingSpeed,"internal")}function ua(e){var t=Math.round(e);if(Z.css3&&Z.autoScrolling&&!Z.scrollBar)$n("translate3d(0px, -"+t+"px, 0px)",!1);else if(Z.autoScrolling&&!Z.scrollBar)Y(we,{top:-t+"px"}),Ce.test.top=-t+"px";else{var n=pn(t);Sa(n.element,n.options)}}function da(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}}function fa(e,t,n){"all"!==t?He[n][t]=e:Object.keys(He[n]).forEach((function(t){He[n][t]=e}))}function pa(e){return Y(e,{"-webkit-transition":"none",transition:"none"})}function ha(e){return null!==Z[e]&&"[object Array]"===Object.prototype.toString.call(Z[e])?Z[e].length&&Ce[e]:Z[e]&&Ce[e]}function ma(e,t,n){if(ha(e))return Ce[e][t](n)}function va(){return ha("dragAndMove")&&Ce.dragAndMove.isAnimating}function ga(){return ha("dragAndMove")&&Ce.dragAndMove.isGrabbing}function Ea(e,t,n){Z[e]=t,"internal"!==n&&(st[e]=t)}function ya(){var e=Z.licenseKey,t="font-size: 15px;background:yellow;";ie?e&&e.length<20&&(console.warn("%c This website was made using fullPage.js slider. More info on the following website:",t),console.warn("%c https://alvarotrigo.com/fullPage/",t)):(U("error","Fullpage.js version 3 has changed its license to GPLv3 and it requires a `licenseKey` option. Read about it here:"),U("error","https://github.com/alvarotrigo/fullPage.js#options.")),F(Se,s)?U("error","Fullpage.js can only be initialized once and you are doing it multiple times!"):(Z.continuousVertical&&(Z.loopTop||Z.loopBottom)&&(Z.continuousVertical=!1,U("warn","Option `loopTop/loopBottom` is mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),!Z.scrollOverflow||!Z.scrollBar&&Z.autoScrolling||U("warn","Options scrollBar:true and autoScrolling:false are mutually exclusive with scrollOverflow:true. Sections with scrollOverflow might not work well in Firefox"),!Z.continuousVertical||!Z.scrollBar&&Z.autoScrolling||(Z.continuousVertical=!1,U("warn","Scroll bars (`scrollBar:true` or `autoScrolling:false`) are mutually exclusive with `continuousVertical`; `continuousVertical` disabled")),Z.scrollOverflow&&null==Z.scrollOverflowHandler&&(Z.scrollOverflow=!1,U("error","The option `scrollOverflow:true` requires the file `scrolloverflow.min.js`. Please include it before fullPage.js.")),Z.anchors.forEach((function(e){var t=[].slice.call(B("[name]")).filter((function(t){return t.getAttribute("name")&&t.getAttribute("name").toLowerCase()==e.toLowerCase()})),n=[].slice.call(B("[id]")).filter((function(t){return t.getAttribute("id")&&t.getAttribute("id").toLowerCase()==e.toLowerCase()}));if(n.length||t.length){U("error","data-anchor tags can not have the same value as any `id` element on the site (or `name` element for IE).");var a=n.length?"id":"name";(n.length||t.length)&&U("error",'"'+e+'" is is being used by another element `'+a+"` property")}})))}function _a(t,n,a,i){var r,o=(r=t).self!=e&&F(r,k)?r.scrollLeft:!Z.autoScrolling||Z.scrollBar?fe():r.offsetTop,s=n-o,l=0;rt=!0;var c=function(){if(rt){var r=n;l+=20,a&&(r=e.fp_easings[Z.easing](l,o,s,a)),Sa(t,r),l<a?setTimeout(c,20):void 0!==i&&i()}else l<a&&i()};c()}function Sa(t,n){!Z.autoScrolling||Z.scrollBar||t.self!=e&&F(t,k)?t.self!=e&&F(t,k)?t.scrollLeft=n:t.scrollTo(0,n):t.style.top=n+"px"}function Ta(e,t){this.anchor=e.getAttribute("data-anchor"),this.item=e,this.index=Q(e,t),this.isLast=this.index===e.parentElement.querySelectorAll(t).length-1,this.isFirst=!this.index}function ba(e){Ta.call(this,e,p)}function Ia(e){Ta.call(this,e,b)}ya()}}(r,o),i.fullpage}.call(t,n,t,e))||(e.exports=a),window.jQuery&&window.fullpage&&function(e,t){"use strict";e&&t?e.fn.fullpage=function(n){n=e.extend({},n,{$:e}),new t(this[0],n)}:window.fp_utils.showError("error","jQuery is required to use the jQuery fullpage adapter!")}(window.jQuery,window.fullpage)},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,a=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,r=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:a+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){var a,i,r={},o=(a=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=a.apply(this,arguments)),i}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(a){n=null}t[e]=n}return t[e]}}(),c=null,u=0,d=[],f=n(53);function p(e,t){for(var n=0;n<e.length;n++){var a=e[n],i=r[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(y(a.parts[o],t))}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(y(a.parts[o],t));r[a.id]={id:a.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],a={},i=0;i<e.length;i++){var r=e[i],o=t.base?r[0]+t.base:r[0],s={css:r[1],media:r[2],sourceMap:r[3]};a[o]?a[o].parts.push(s):n.push(a[o]={id:o,parts:[s]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var a=d[d.length-1];if("top"===e.insertAt)a?a.nextSibling?n.insertBefore(t,a.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);t>=0&&d.splice(t,1)}function g(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),E(t,e.attrs),m(e,t),t}function E(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function y(e,t){var n,a,i,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var o=u++;n=c||(c=g(t)),a=T.bind(null,n,o,!1),i=T.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",E(t,e.attrs),m(e,t),t}(t),a=I.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),a=b.bind(null,n),i=function(){v(n)});return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return p(n,t),function(e){for(var a=[],i=0;i<n.length;i++){var o=n[i];(s=r[o.id]).refs--,a.push(s)}e&&p(h(e,t),t);for(i=0;i<a.length;i++){var s;if(0===(s=a[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete r[s.id]}}}};var _,S=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function T(e,t,n,a){var i=n?"":a.css;if(e.styleSheet)e.styleSheet.cssText=S(t,i);else{var r=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function b(e,t){var n=t.css,a=t.media;if(a&&e.setAttribute("media",a),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function I(e,t,n){var a=n.css,i=n.sourceMap,r=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||r)&&(a=f(a)),i&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([a],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",a=e[3];if(!a)return n;if(t&&"function"==typeof btoa){var i=(o=a,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=a.sources.map((function(e){return"/*# sourceURL="+a.sourceRoot+e+" */"}));return[n].concat(r).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(a[r]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&a[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){(e.exports=n(55)(!1)).push([e.i,"/*!\r\n * fullPage 3.0.8\r\n * https://github.com/alvarotrigo/fullPage.js\r\n *\r\n * @license GPLv3 for open source use only\r\n * or Fullpage Commercial License for commercial use\r\n * http://alvarotrigo.com/fullPage/pricing/\r\n *\r\n * Copyright (C) 2018 http://alvarotrigo.com/fullPage - A project by Alvaro Trigo\r\n */.fp-enabled body,html.fp-enabled{margin:0;padding:0;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0)}.fp-section{position:relative;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.fp-slide{float:left}.fp-slide,.fp-slidesContainer{height:100%;display:block}.fp-slides{z-index:1;height:100%;overflow:hidden;position:relative;-webkit-transition:all .3s ease-out;transition:all .3s ease-out}.fp-section.fp-table,.fp-slide.fp-table{display:table;table-layout:fixed;width:100%}.fp-tableCell{display:table-cell;vertical-align:middle;width:100%;height:100%}.fp-slidesContainer{float:left;position:relative}.fp-controlArrow{-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;-ms-user-select:none;position:absolute;z-index:4;top:50%;cursor:pointer;width:0;height:0;border-style:solid;margin-top:-38px;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0)}.fp-controlArrow.fp-prev{left:15px;width:0;border-width:38.5px 34px 38.5px 0;border-color:transparent #fff transparent transparent}.fp-controlArrow.fp-next{right:15px;border-width:38.5px 0 38.5px 34px;border-color:transparent transparent transparent #fff}.fp-scrollable{position:relative}.fp-scrollable,.fp-scroller{overflow:hidden}.iScrollIndicator{border:0!important}.fp-notransition{-webkit-transition:none!important;transition:none!important}#fp-nav{position:fixed;z-index:100;margin-top:-32px;top:50%;opacity:1;-webkit-transform:translateZ(0)}#fp-nav.fp-right{right:17px}#fp-nav.fp-left{left:17px}.fp-slidesNav{position:absolute;z-index:4;opacity:1;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);left:0!important;right:0;margin:0 auto!important}.fp-slidesNav.fp-bottom{bottom:17px}.fp-slidesNav.fp-top{top:17px}#fp-nav ul,.fp-slidesNav ul{margin:0;padding:0}#fp-nav ul li,.fp-slidesNav ul li{display:block;width:14px;height:13px;margin:7px;position:relative}.fp-slidesNav ul li{display:inline-block}#fp-nav ul li a,.fp-slidesNav ul li a{display:block;position:relative;z-index:1;width:100%;height:100%;cursor:pointer;text-decoration:none}#fp-nav ul li:hover a.active span,#fp-nav ul li a.active span,.fp-slidesNav ul li:hover a.active span,.fp-slidesNav ul li a.active span{height:12px;width:12px;margin:-6px 0 0 -6px;border-radius:100%}#fp-nav ul li a span,.fp-slidesNav ul li a span{border-radius:50%;position:absolute;z-index:1;height:4px;width:4px;border:0;background:#333;left:50%;top:50%;margin:-2px 0 0 -2px;-webkit-transition:all .1s ease-in-out;-moz-transition:all .1s ease-in-out;-o-transition:all .1s ease-in-out;transition:all .1s ease-in-out}#fp-nav ul li:hover a span,.fp-slidesNav ul li:hover a span{width:10px;height:10px;margin:-5px 0 0 -5px}#fp-nav ul li .fp-tooltip{position:absolute;top:-2px;color:#fff;font-size:14px;font-family:arial,helvetica,sans-serif;white-space:nowrap;max-width:220px;overflow:hidden;display:block;opacity:0;width:0;cursor:pointer}#fp-nav.fp-show-active a.active+.fp-tooltip,#fp-nav ul li:hover .fp-tooltip{-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;width:auto;opacity:1}#fp-nav ul li .fp-tooltip.fp-right{right:20px}#fp-nav ul li .fp-tooltip.fp-left{left:20px}.fp-auto-height.fp-section,.fp-auto-height .fp-slide,.fp-auto-height .fp-tableCell,.fp-responsive .fp-auto-height-responsive.fp-section,.fp-responsive .fp-auto-height-responsive .fp-slide,.fp-responsive .fp-auto-height-responsive .fp-tableCell{height:auto!important}.fp-sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}",""])},function(e,t,n){var a=n(56);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:undefined,insertInto:void 0};n(54)(a,i);a.locals&&(e.exports=a.locals)},function(e,t,n){var a=n(5),i=n(34),r=n(0)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var a=n(58);e.exports=function(e,t){return new(a(e))(t)}},function(e,t,n){var a=n(41),i=n(39),r=n(21),o=n(37),s=n(59);e.exports=function(e,t){var n=1==e,l=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,g=r(t),E=i(g),y=a(s,h,3),_=o(E.length),S=0,T=n?p(t,_):l?p(t,0):void 0;_>S;S++)if((f||S in E)&&(v=y(m=E[S],S,g),e))if(n)T[S]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return S;case 2:T.push(m)}else if(u)return!1;return d?-1:c||u?u:T}}},function(e,t,n){"use strict";var a=n(8),i=n(60)(5),r=!0;"find"in[]&&Array(1).find((function(){r=!1})),a(a.P+a.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(23)("find")},function(e,t,n){var a=n(0)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,!"/./"[e](t)}catch(i){}}return!0}},function(e,t,n){var a=n(5),i=n(27),r=n(0)("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},function(e,t,n){var a=n(63),i=n(17);e.exports=function(e,t,n){if(a(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){"use strict";var a=n(8),i=n(64);a(a.P+a.F*n(62)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var a=n(8),i=n(38)(!0);a(a.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(23)("includes")},function(e,t,n){var a=n(8),i=n(13),r=n(9);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),a(a.S+a.F*r((function(){n(1)})),"Object",o)}},function(e,t,n){var a=n(21),i=n(12);n(67)("keys",(function(){return function(e){return i(a(e))}}))},function(e,t,n){var a=n(4),i=n(21),r=n(26)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),a(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){"use strict";var a=n(33),i=n(18),r=n(28),o={};n(3)(o,n(0)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=a(o,{next:i(1,n)}),r(e,t+" Iterator")}},function(e,t,n){"use strict";var a=n(16),i=n(8),r=n(15),o=n(3),s=n(22),l=n(70),c=n(28),u=n(69),d=n(0)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,v,g){l(n,t,h);var E,y,_,S=function(e){if(!f&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",b="values"==m,I=!1,k=e.prototype,C=k[d]||k["@@iterator"]||m&&k[m],O=C||S(m),P=m?b?S("entries"):O:void 0,N="Array"==t&&k.entries||C;if(N&&(_=u(N.call(new e)))!==Object.prototype&&_.next&&(c(_,T,!0),a||"function"==typeof _[d]||o(_,d,p)),b&&C&&"values"!==C.name&&(I=!0,O=function(){return C.call(this)}),a&&!g||!f&&!I&&k[d]||o(k,d,O),s[t]=O,s[T]=p,m)if(E={values:b?O:S("values"),keys:v?O:S("keys"),entries:P},g)for(y in E)y in k||r(k,y,E[y]);else i(i.P+i.F*(f||I),t,E);return E}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){for(var a=n(31),i=n(12),r=n(15),o=n(1),s=n(3),l=n(22),c=n(0),u=c("iterator"),d=c("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),m=0;m<h.length;m++){var v,g=h[m],E=p[g],y=o[g],_=y&&y.prototype;if(_&&(_[u]||s(_,u,f),_[d]||s(_,d,g),l[g]=f,E))for(v in a)_[v]||r(_,v,a[v],!0)}},function(e,t,n){var a=n(24),i=n(18),r=n(7),o=n(30),s=n(4),l=n(47),c=Object.getOwnPropertyDescriptor;t.f=n(10)?c:function(e,t){if(e=r(e),t=o(t,!0),l)try{return c(e,t)}catch(n){}if(s(e,t))return i(!a.f.call(e,t),e[t])}},function(e,t,n){var a=n(7),i=n(32).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==r.call(e)?function(e){try{return i(e)}catch(t){return o.slice()}}(e):i(a(e))}},function(e,t,n){var a=n(1).document;e.exports=a&&a.documentElement},function(e,t,n){var a=n(11),i=n(19),r=n(12);e.exports=n(10)?Object.defineProperties:function(e,t){i(e);for(var n,o=r(t),s=o.length,l=0;s>l;)a.f(e,n=o[l++],t[n]);return e}},function(e,t,n){var a=n(36),i=Math.max,r=Math.min;e.exports=function(e,t){return(e=a(e))<0?i(e+t,0):r(e,t)}},function(e,t,n){var a=n(12),i=n(35),r=n(24);e.exports=function(e){var t=a(e),n=i.f;if(n)for(var o,s=n(e),l=r.f,c=0;s.length>c;)l.call(e,o=s[c++])&&t.push(o);return t}},function(e,t,n){var a=n(14)("meta"),i=n(5),r=n(4),o=n(11).f,s=0,l=Object.isExtensible||function(){return!0},c=!n(9)((function(){return l(Object.preventExtensions({}))})),u=function(e){o(e,a,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:a,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,a)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[a].i},getWeak:function(e,t){if(!r(e,a)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[a].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!r(e,a)&&u(e),e}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";n.r(t);n(45),n(42),n(73),n(31),n(68),n(66),n(65),n(61);var a,i=n(2),r=n.n(i),o=(n(57),n(20)),s=n(6);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=["afterLoad","afterRender","afterResize","afterResponsive","afterSlideLoad","onLeave","onSlideLeave"],v=function(e){function t(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(i=f(this,p(t).call(this,e))).props,s=r.render,l=r.pluginWrapper;if("function"!=typeof s)throw new Error("must provide render prop to <ReactFullpage />");return i.log=Object(o.a)(i.props.debug,"ReactFullpage"),i.log("Building component"),i.log("Importing vendor files"),i.importVendors(),l&&(i.log("Calling plugin wrapper"),l()),i.log("Requiring fullpage.js"),a=n(52),i.state={initialized:!1,sectionCount:0,slideCount:0},i}var i,l,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),i=t,(l=[{key:"componentDidMount",value:function(){var e=this.buildOptions();this.log("React Lifecycle: componentDidMount()"),a&&(this.init(e),this.markInitialized())}},{key:"componentDidUpdate",value:function(e){this.log("React Lifecycle: componentDidUpdate()");var t,n,a=this.getSectionCount(),i=this.getSlideCount(),r=this.state,o=r.sectionCount,s=r.slideCount;if(t=e.sectionsColor,n=this.props.sectionsColor,t.length!==n.length||null!=t.find((function(e){return!n.includes(e)})))return this.log("rebuilding due to a change in fullpage.js props"),void this.reRender();o===a&&s===i||(this.log("rebuilding due to a change in fullpage.js sections/slides"),this.reRender())}},{key:"componentWillUnmount",value:function(){this.destroy()}},{key:"getSectionCount",value:function(){var e=this.props.sectionSelector,t=void 0===e?s.a:e;return document.querySelectorAll(t).length}},{key:"getSlideCount",value:function(){var e=this.props.slideSelector,t=void 0===e?s.b:e;return document.querySelectorAll(t).length}},{key:"importVendors",value:function(){var e=this.props,t=e.scrollOverflow,a=e.easing;t&&n(51),a&&n(50)}},{key:"init",value:function(e){this.log("Reinitializing fullpage with options",e),new a(s.c,e),this.fullpageApi=window.fullpage_api,this.fpUtils=window.fp_utils,this.fpEasings=window.fp_easings}},{key:"destroy",value:function(){this.log("Destroying fullpage instance"),this.fullpageApi.destroy("all")}},{key:"reRender",value:function(){this.destroy(),this.init(this.buildOptions())}},{key:"markInitialized",value:function(){this.log("Marking initialized"),this.setState({initialized:!0,sectionCount:this.getSectionCount(),slideCount:this.getSlideCount()})}},{key:"buildOptions",value:function(){var e=this,t=m.filter((function(t){return!!Object.keys(e.props).find((function(e){return e===t}))})).reduce((function(t,n){return c({},t,u({},n,(function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return e.update.apply(e,[n].concat(a))})))}),{}),n=c({},this.props,t);return this.log("Building fullpage.js options: ",n),n}},{key:"update",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];this.log("Event trigger: ",e);var r=c({},this.state,{sectionCount:this.getSectionCount(),slideCount:this.getSlideCount()}),o=function(t){return c({},r,t,{lastEvent:e})},s=function(e){return e.reduce((function(e,t,n){var i=a[n];return e[t]=i,e}),{})};switch(e){case"afterLoad":r=o(s(["origin","destination","direction"]));break;case"afterResize":r=o(s([""]));break;case"afterResponsive":r=o(s(["isResponsive"]));break;case"afterSlideLoad":r=o(s(["section","origin","destination","direction"]));break;case"onLeave":r=o(s(["origin","destination","direction"]));break;case"onSlideLeave":r=o(s(["section","origin","slideIndex","destination","direction"]))}var l=(t=this.props)[e].apply(t,a);return this.log("Called callback: Returning => ",l),this.log("Updating State => ",r),this.setState(r),l}},{key:"render",value:function(){return this.log("<== Rendering ==>"),r.a.createElement("div",{id:s.d},this.props.render(this))}}])&&d(i.prototype,l),v&&d(i,v),t}(r.a.Component);v.defaultProps={sectionsColor:[]},t.default=v},function(e,t,n){"use strict";var a=n(3),i=n(15),r=n(9),o=n(17),s=n(0);e.exports=function(e,t,n){var l=s(e),c=n(o,l,""[e]),u=c[0],d=c[1];r((function(){var t={};return t[l]=function(){return 7},7!=""[e](t)}))&&(i(String.prototype,e,u),a(RegExp.prototype,l,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},function(e,t,n){n(83)("match",1,(function(e,t,n){return[function(n){"use strict";var a=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},n]}))}])},2863:function(e,t,n){},2864:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(12)),l=i(n(6)),c=i(n(8)),u=i(n(7)),d=a(n(0)),f=(i(n(2)),i(n(13))),p=i(n(2865)),h=i(n(2526));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,l.default)(n,e);var t=m(n);function n(e){var a;return(0,r.default)(this,n),(a=t.call(this,e)).setUpdateCompletedTaskCountCallback=a.setUpdateCompletedTaskCountCallback.bind((0,s.default)(a)),a.footerRef=(0,d.createRef)(),a}return(0,o.default)(n,[{key:"render",value:function(){if(!f.default.isLearner()||f.default.getAppdata().appConf.hideEndOfCI)return null;var e=this.props,t=e.channelId,n=e.contentId,a=e.contentVersion,i=e.pages,r=e.isAssessment,o=e.communicator,s=e.channelData,l=e.eventData,c=e.onFooterUpdate,u=e.setAssessmentSubmitted,m=e.setCiIsDone,v=e.changePage,g=e.isLastPage,E=e.assignmentId,y=e.isLastPageCompleted,_=e.isMustCompleteQuestions,S=e.isTaskGroupOverlayOpen,T=e.forceSubmitPromise;return r?d.default.createElement(p.default,{ref:this.footerRef,channelId:t,contentId:n,contentVersion:a,pages:i,communicator:o,channelData:s,onFooterUpdate:c,setAssessmentSubmitted:u,setCiIsDone:m,changePage:v,isLastPage:g,isLastPageCompleted:y,isMustCompleteQuestions:_,isTaskGroupOverlayOpen:S,eventData:l,forceSubmitPromise:T}):d.default.createElement(h.default,{ref:this.footerRef,channelId:t,contentId:n,contentVersion:a,pages:i,communicator:o,channelData:s,onFooterUpdate:c,setCiIsDone:m,changePage:v,isLastPage:g,assignmentId:E,isLastPageCompleted:y,isMustCompleteQuestions:_,isTaskGroupOverlayOpen:S})}},{key:"setUpdateCompletedTaskCountCallback",value:function(e){this.footerRef&&this.footerRef.current&&this.footerRef.current.setUpdateCompletedTaskCountCallback(e)}}]),n}(d.PureComponent);v.defaultProps={channelId:null,contentId:null,contentVersion:null,pages:[],isAssessment:!1,assignmentId:null,isMustCompleteQuestions:!1,isTaskGroupOverlayOpen:!1,forceSubmitPromise:function(){}};var g=v;t.default=g},2865:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(43)),r=a(n(33)),o=a(n(9)),s=a(n(34)),l=a(n(3)),c=a(n(12)),u=a(n(4)),d=a(n(6)),f=a(n(8)),p=a(n(7)),h=a(n(106)),m=a(n(61)),v=a(n(2517)),g=a(n(0)),E=a(n(2)),y=a(n(11)),_=a(n(18)),S=n(74),T=a(n(13)),b=n(114),I=a(n(28)),k=a(n(53)),C=a(n(58)),O=a(n(36)),P=a(n(943)),N=n(258),A=n(264),L=n(102),R=a(n(2526));function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var i=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var x=I.default.Instance,U=k.default.LogManager,B=function(e){(0,d.default)(f,e);var t,n,a=D(f);function f(e){var t;if((0,l.default)(this,f),(t=a.call(this,e)).setUpdateCompletedTaskCountCallback=t.setUpdateCompletedTaskCountCallback.bind((0,c.default)(t)),t._hasManualScoreInteraction=function(){var e=t.state.taskGroups,n=!1;for(var a in e)if(e.hasOwnProperty(a))for(var i in e[a]._taskGroupData.tasks)e[a]._taskGroupData.tasks.hasOwnProperty(i)&&(n=e[a]._taskGroupData.tasks[i].data.checkingType===L.MANUAL);return n},t._submitAssessment=t._submitAssessment.bind((0,c.default)(t)),t._renderMissingQuestionsModal=t._renderMissingQuestionsModal.bind((0,c.default)(t)),t.state={taskGroups:[],assessmentSubmitted:!1,completedTasksCount:[],totalQuestions:0,dialog:null,successRate:null,successRateGroup:""},t.isPC=T.default.isPC(),e.forceSubmitPromise){var n=t.props,i=n.changePage,r=n.pages;e.forceSubmitPromise.then((function(){return t._submitAssessment(!0,(function(){return i(r.length)}))}))}return t}return(0,u.default)(f,null,[{key:"saveUserState",value:(t=(0,s.default)(r.default.mark((function e(t,n){var a,i,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(T.default.getAppdata().backend_url).concat(b.PATH).concat(b.USER_STATE_POST_PATH),i={},e.prev=2,e.next=5,x.post(a,{},w({},t));case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),i.error=e.t0;case 11:return o=i.taskStates,Object.keys(n).forEach((function(e){var t=w({},o);Object.keys(t).forEach((function(n){t[n].taskGroupId!==e&&delete t[n]})),n[e](i.error,{taskStates:t})})),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,null,[[2,8]])}))),function(e,n){return t.apply(this,arguments)})}]),(0,u.default)(f,[{key:"componentDidMount",value:(n=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.default.initApi();case 2:this._loadTaskGroups();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.assessmentSubmitted,n=e.isAssessmentFullyChecked,a=e.completedTasksCount,i=e.dialog,r=this.props,o=r.isLastPageCompleted,s=r.isMustCompleteQuestions,l=0;a&&Object.keys(a)&&Object.keys(a).forEach((function(e){l+=a[e]}));var c=(0,y.default)("ci-player-footer",{"ci-player-footer--hidden":!o&&s});return t?g.default.createElement("div",{className:"ci-player-footer"},g.default.createElement("div",{className:"ci-player-footer-title"},this._renderScore(n),this._renderTasksStatus(l)),this._renderButtons()):g.default.createElement("div",{className:c},g.default.createElement("div",{className:"ci-player-footer-title"},_.default.translate("taskGroup.SCORE.ASSESSMENT_FOOTER_TITLE")),this._renderTasksStatus(l),g.default.createElement("div",{className:"ci-player-footer-text"},_.default.translate("taskGroup.SCORE.ASSESSMENT_FOOTER_TEXT").split("\\n").map((function(e){return[e,g.default.createElement("br",null)]}))),g.default.createElement("div",{className:"ci-player-footer-button"},this.isPC?this._renderPcButton():g.default.createElement(O.default,{onClick:this._submitAssessment,text:_.default.translate("taskGroup.SCORE.SUBMIT").toUpperCase(),theme:O.default.THEMES.LIGHT,type:O.default.TYPES.PRIMARY})),i)}},{key:"_renderPcButton",value:function(){var e=this,t=this.props,n=t.isLastPage,a=t.changePage,i=t.pages,r=t.isLastPageCompleted,o=t.isMustCompleteQuestions,s=t.isTaskGroupOverlayOpen?null:g.default.createElement("div",{className:(0,y.default)("last-page-done-wrapper","show-on-last-page")},g.default.createElement("div",{className:(0,y.default)("last-page-done-wrapper__next-button"),onClick:function(){return a(i.length)}},g.default.createElement(S.ArrowDownIcon,null))),l=g.default.createElement("div",{className:(0,y.default)("submit-assessment-wrapper",{"show-on-last-page":n})},g.default.createElement(O.default,{onClick:n?function(){return e._submitAssessment(!1,(function(){return a(i.length)}))}:this._submitAssessment,theme:O.default.THEMES.LIGHT,type:O.default.TYPES.PRIMARY}),g.default.createElement("span",null,_.default.translate("taskGroup.SCORE.SUBMIT").toUpperCase()));return o?l:!r&&n?s:l}},{key:"_loadTaskGroups",value:function(e){var t=this,n=this.props,a=n.pages,i=n.setAssessmentSubmitted,r=[],o=[],s=0,l=!0,c=!0,u=0;!function n(){if(u<a.length){var d=a[u],f=d.taskGroupModel;u++,f?function(e,n,a){P.default.getTaskGroupPlayerRef(t._getTaskGroupConfig(e,n,N.VIEW_MODE.ASSESSMENT),(function(t,n){if(t)console.error(t);else{r[e.taskGroup.id]=n;var i=n.getAnswerableTasksCount();s+=i,i&&(n.userStateStore.initializeCompletedTaskCount(),o[e.taskGroup.id]=n.completedTasksCount,l=l&&n.isAssessmentSubmitted(),c=n.isAssessmentFullyChecked()&&c),a()}}))}(f,d.cid,n):n()}else e?t.setState({taskGroups:r,completedTasksCount:o,totalQuestions:s,assessmentSubmitted:l,isAssessmentFullyChecked:c},(function(){setTimeout((function(){e()}),0)})):(t.setState({completedTasksCount:o,totalQuestions:s,assessmentSubmitted:l,isAssessmentFullyChecked:c}),l&&t._showScore(),i(l,!1))}()}},{key:"setUpdateCompletedTaskCountCallback",value:function(e){var t=e.updateCount,n=e.taskGroupId,a=this.state.completedTasksCount;(0,m.default)(a[n])||(a[n]+=t,this.setState({completedTasksCount:a}))}},{key:"_submitAssessment",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,a=this.props.communicator;a.send("setLoader",!0),this._loadTaskGroups((function(){var l=e.state,c=l.taskGroups,u=l.totalQuestions,d=l.completedTasksCount,p=e.props.setAssessmentSubmitted;if(c){var m=Object.keys(c).length;if(m){if(!0!==t){var g=0;if(d&&Object.keys(d)&&Object.keys(d).forEach((function(e){g+=d[e]})),u>g)return void e._renderMissingQuestionsModal(u-g,n)}var E=[],y=0,_=!0,S={logEvents:[],states:{}};Object.keys(c).forEach((function(t){c[t].submitAssessment(function(){var l=(0,s.default)(r.default.mark((function s(l,u,d){var g,b,I,k,C,O,P,N,L,R,M,w,D,B,G,F,H,j,Y,V,W,z,K,X,q,Q,Z,J,$,ee,te,ne;return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(E[l]=d,u.logEvents&&(S.logEvents=(0,v.default)(S.logEvents,u.logEvents)),u.states&&(S.states=(0,h.default)(S.states,u.states)),_=c[t].isAssessmentFullyChecked()&&_,g=[],b=T.default.getAppdata(),I=T.default.getAppdata().backend_url,T.default.isFeatureEnabled("antiPlagiarism"))for(k=c[t].userStateStore.taskStates,C=0,O=Object.entries(k);C<O.length;C++)F=(0,i.default)(O[C],2),H=F[0],j=F[1],Y=j.taskModel.interaction.entry,V=null===(P=j.taskModel.interaction.interactions[Y].data)||void 0===P?void 0:P.plagiarismScanType,W=j.interactionId,z=V===A.INPUT_TYPES_KEYS.FILE?"fileUrl":"textAnswer",K=(null===(N=j.data)||void 0===N||null===(L=N.interaction[W])||void 0===L||null===(R=L.data)||void 0===R?void 0:R.files)&&(null===(M=j.data.interaction[W])||void 0===M||null===(w=M.data)||void 0===w||null===(D=w.files[0])||void 0===D?void 0:D.src),X=(null===(B=j.data.interaction[W])||void 0===B||null===(G=B.data)||void 0===G?void 0:G.textAnswer)||K,V&&X&&(Q=x.post("".concat(I,"/PlayAppService/antiPlagiarism/scan/submit"),{},(q={accountId:b.accountDetails.id,siteId:b.siteDetails.id,taskId:H},(0,o.default)(q,z,X),(0,o.default)(q,"userId",b.userDetails.id),(0,o.default)(q,"contentItemVersion",e.props.contentVersion),q)),g.push(Q));if(++y!==m){r.next=27;break}return S.logEvents.push(e._getTaskGroupCompletedEvent()),r.next=13,f.saveUserState(S,E);case 13:if(e.setState({assessmentSubmitted:!0,isAssessmentFullyChecked:_}),!(T.default.isFeatureEnabled("antiPlagiarism")&&g.length>0)){r.next=17;break}return r.next=17,Promise.all(g);case 17:if(!T.default.isFeatureEnabled("autoResetCI")||e._hasManualScoreInteraction()){r.next=22;break}return $=e.props,ee=$.channelId,te=$.contentId,r.next=21,x.post("".concat(I,"/PlayAppService/assessments/submit"),{},{},{params:{channelId:ee,contentId:te}});case 21:J=r.sent;case 22:p(!0,!0,J),ne=(null===(Z=J)||void 0===Z?void 0:Z.resetCI)?void 0:n,e._showScore(ne),a.send("setLoader",!1),U.log({message:"assessment submitted:\n".concat(JSON.stringify(S)),forceSend:!0});case 27:case"end":return r.stop()}}),s)})));return function(e,t,n){return l.apply(this,arguments)}}())}))}}}))}},{key:"_getTaskGroupCompletedEvent",value:function(){var e=this.props.eventData,t={channelId:e.channelId,contentItemId:e.contentItemId,contentItemVersion:e.version,userId:e.userId,contentSessionId:e.contentSessionId},n={type:e.playerType,id:e.contentItemId,version:e.version};return{action:"TASK_GROUP_COMPLETED",contextObject:t,contextProviderId:e.providerId,dispatcher:n,eventData:{channelId:e.channelId,contentItemId:e.contentItemId,contentItemVersion:e.version,userId:e.userId},timestamp:(new Date).getTime()}}},{key:"_renderMissingQuestionsModal",value:function(e,t){var n=this,a=g.default.createElement(C.default,{theme:C.default.THEMES.UC,title:_.default.translate("taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT.TITLE",{missingQuestionsCount:e}),content:_.default.translate("taskGroup.SCORE.CONFIRM_ASSESSMENT_SUBMIT.TEXT"),actions:[{id:"cancel",type:C.default.BUTTON_TYPES.SECONDARY,text:_.default.translate("common.cancel-btn").toUpperCase(),onClick:function(){n.setState({dialog:null})}},{id:"reset",type:C.default.BUTTON_TYPES.PRIMARY,text:_.default.translate("taskGroup.SCORE.SUBMIT").toUpperCase(),onClick:function(){return n._submitAssessment(!0,t)}}]});this.setState({dialog:a})}}]),f}(R.default);B.propTypes={channelId:E.default.string,contentId:E.default.string,contentVersion:E.default.oneOfType([E.default.number,E.default.string]),pages:E.default.arrayOf(E.default.shape({})),setAssessmentSubmitted:E.default.func,setCiIsDone:E.default.func.isRequired,changePage:E.default.func.isRequired,isLastPage:E.default.bool.isRequired,eventData:E.default.shape({providerId:E.default.string,contentItemId:E.default.string,userId:E.default.string,playerType:E.default.string,contentSessionId:E.default.string,dispatcherId:E.default.string,version:E.default.oneOfType([E.default.string,E.default.number])}).isRequired,forceSubmitPromise:E.default.func},B.defaultProps={channelId:null,contentId:null,contentVersion:null,pages:[],setAssessmentSubmitted:function(){},isLastPage:!1,forceSubmitPromise:null};var G=B;t.default=G},2876:function(e,t,n){"use strict";var a=n(1),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=a(n(606));function s(e){var t=e.item,n=e.onClick;return r.default.createElement("div",{className:"ci-player-ci-item",key:t.id,onClick:n},r.default.createElement("div",{className:"ci-player-ci-item--image item-cover"},r.default.createElement(o.default,{imgSrc:t.image})),r.default.createElement("div",{className:"ci-player-ci-item--content"},t.name))}var l=(0,r.memo)(s);t.default=l},2877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={phone:{portrait:{columns:2,gutter:12},landscape:{columns:3,gutter:16}},tablet:{portrait:{columns:3,gutter:12},landscape:{columns:4,gutter:18}},desktop:{default:{columns:3,gutter:18},breakPoint2560:{columns:5,gutter:18},breakPoint1920:{columns:5,gutter:18},breakPoint1600:{columns:5,gutter:18},breakPoint1440:{columns:5,gutter:18},breakPoint1280:{columns:5,gutter:18},breakPoint1024:{columns:5,gutter:18},breakPoint920:{columns:5,gutter:18}}};t.default=a},2878:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43)),o=a(n(0)),s=i(n(24)),l=(i(n(2)),i(n(11))),c=i(n(13)),u=i(n(18)),d=i(n(2879));n(2881);var f=function(e){var t=e.duration,n=e.onPreScreenHidden,a=(0,o.useState)(!0),i=(0,r.default)(a,2),f=i[0],p=i[1];(0,o.useEffect)((function(){setTimeout((function(){return p(!1)}),t),setTimeout((function(){return n()}),t+1e3)}));var h,m=(0,l.default)("preScreen",{"preScreen--hide":!f,"preScreen--show":f});return s.default.createPortal(o.default.createElement("div",{className:m},o.default.createElement(d.default,{isLandscape:c.default.isLandscape()}),o.default.createElement("div",{className:"preScreen__text"},(h=c.default.isLandscape()?"L2P":"P2L",u.default.translateWithItems("ciPlayer.preScreen.text",{mode:u.default.translate("ciPlayer.preScreen.".concat(h,".mode")),result:o.default.createElement("b",null,o.default.createElement("br",null),u.default.translate("ciPlayer.preScreen.".concat(h,".result")))})))),c.default.getAppOverlay())};f.defaultProps={duration:2e3,onPreScreenHidden:function(){}};var p=(0,o.memo)(f);t.default=p},2879:function(e,t,n){"use strict";var a=n(1),i=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=a(n(11)),s=a(n(13));n(2880);var l=function(e){var t=e.isLandscape,n=(0,o.default)("animatedDevice__phone",{"animatedDevice__phone--p2l":!t,"animatedDevice__phone--l2p":t});function a(){return r.default.createElement("div",{className:"animatedDevice__pages"},r.default.createElement("div",{className:"animatedDevice__page"}),r.default.createElement("div",{className:"animatedDevice__page"}),r.default.createElement("div",{className:"animatedDevice__page"}))}return r.default.createElement("div",{className:n},r.default.createElement("div",{className:"animatedDevice__stage"},a(),s.default.isLandscape()?a():null))},c=(0,r.memo)(l);t.default=c},2880:function(e,t,n){},2881:function(e,t,n){},2882:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(43)),o=i(n(962)),s=a(n(0)),l=n(2455),c=i(n(11)),u=i(n(13));n(2456),n(2883);var d=function(e){var t=e.contentLocale,n=(0,s.useState)(0),a=(0,r.default)(n,2),i=a[0],d=a[1],f=(0,s.useState)(!0),p=(0,r.default)(f,2),h=p[0],m=p[1],v=(0,s.useRef)(h);v.current=h;var g=null,E=function(){g=setTimeout((function(){m(!1),g=null}),3e3)};function y(){v.current?(g&&(clearTimeout(g),g=null),E()):m(!0)}function _(e){!function(e){var t=e.scrollHeight-e.offsetHeight,n=e.scrollTop;d(n/t*100)}(e),y()}(0,s.useEffect)((function(){var e=u.default.isAndroid()?document.getElementById("t2k-app"):window,t=u.default.isAndroid()?e:document.documentElement;if(e){var n=(0,o.default)((function(){return _(t)}),100);return e.addEventListener("scroll",n),function(){return e.removeEventListener("scroll",n)}}return function(){}}),[]),(0,s.useEffect)((function(){return E(),function(){return clearTimeout(g)}}),[]);var S=u.default.isRtl(t),T=(0,c.default)("scrollProgressIndicator",{"scrollProgressIndicator--show":h,"scrollProgressIndicator--hide":!h,ltr:!S,rtl:S});return s.default.createElement("div",{className:T},s.default.createElement("div",{className:"scrollProgressIndicator-content"},s.default.createElement(l.CircularProgressbar,{value:i,strokeWidth:12,styles:(0,l.buildStyles)({strokeLinecap:"butt",pathColor:"white",trailColor:"rgba(255,255,255,0.3)"})})))},f=(0,s.memo)(d);t.default=f},2883:function(e,t,n){},2884:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.changePage,n=e.hideResetDialog,a=e.autoResetResult,s=0===(null==a?void 0:a.attemptsRemaining)?"ci-player_reset-dialog_content-no-more-attempts":"ci-player_reset-dialog_content",l=i.default.createElement("div",null,o.default.translate(s,{minimumScore:null==a?void 0:a.minimumScore}));return i.default.createElement(r.default,{title:o.default.translate("ci-player_reset-dialog_title"),content:l,actions:[{id:"reset-ci-approve-button",type:r.default.BUTTON_TYPES.PRIMARY,text:o.default.translate("ci-player_reset-dialog_button"),onClick:function(){0===(null==a?void 0:a.attemptsRemaining)?n(!1):(t(0),n(!0))}}]})};var i=a(n(0)),r=a(n(58)),o=a(n(18))},2885:function(e,t,n){"use strict";var a=n(5),i=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(3)),o=i(n(4)),s=i(n(6)),l=i(n(8)),c=i(n(7)),u=a(n(0)),d=(i(n(2)),i(n(2886)));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var i=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return(0,l.default)(this,n)}}var p=function(e){(0,s.default)(n,e);var t=f(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){return u.default.createElement("div",{id:"floating-back-button",className:"floatingbackbutton",onClick:this.props.onClick},u.default.createElement(d.default,null))}}]),n}(u.Component);t.default=p},2886:function(e,t,n){var a=n(0);function i(e){return a.createElement("svg",e,a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("g",{id:"Artboard",fill:"#00ACC1",fillRule:"nonzero"},a.createElement("g",{id:"back-button-copy"},a.createElement("path",{d:"M28.9062092,14.0625 C28.2952614,14.0625 27.7452614,14.3015523 27.3265523,14.6843954 L27.3218137,14.6781046 L17.9468954,23.2718954 C17.4640523,23.7172386 17.1875,24.3422386 17.1875,25 C17.1875,25.6577614 17.4640523,26.2827614 17.9468954,26.7281046 L27.3218954,35.3218954 L27.326634,35.3156863 C27.7453431,35.6985294 28.2953431,35.9375 28.9062908,35.9375 C30.2000817,35.9375 31.2500817,34.8875 31.2500817,33.5937092 C31.2500817,32.9109477 30.9531863,32.2999183 30.4859477,31.8718137 L30.4906863,31.8656046 L23,25 L30.4906046,18.1328431 L30.485866,18.1265523 C30.9531046,17.7 31.25,17.0906046 31.25,16.4062092 C31.25,15.1125 30.2,14.0625 28.9062092,14.0625 Z M25,0 C11.1937908,0 0,11.1937908 0,25 C0,38.8062092 11.1937908,50 25,50 C38.8062092,50 50,38.8062092 50,25 C50,11.1937908 38.8062092,0 25,0 Z M25,45.3125 C13.8,45.3125 4.6875,36.2 4.6875,25 C4.6875,13.8 13.8,4.6875 25,4.6875 C36.2,4.6875 45.3125,13.8 45.3125,25 C45.3125,36.2 36.2,45.3125 25,45.3125 Z",id:"Shape"})))))}i.defaultProps={width:"50px",height:"50px",viewBox:"0 0 50 50",version:"1.1"},e.exports=i,i.default=i},2887:function(e,t,n){},610:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(619)).default;t.default=i},619:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(3)),r=a(n(4)),o=a(n(13)),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4;(0,i.default)(this,e),this._itsAliveCallback=t,this._interval=n,this.setKeepAlive(!1),this._bindedSetKeepAlive=this.setKeepAlive.bind(this,!0),this._checkUsageTimeout=setTimeout(this._checkUsage.bind(this),this._interval),this._elements=[]}return(0,r.default)(e,[{key:"elementKeepAlive",value:function(e){try{e.addEventListener("click",this._bindedSetKeepAlive,!0),e.addEventListener("scroll",this._bindedSetKeepAlive,!0),e.addEventListener("mousemove",this._bindedSetKeepAlive,!0),this._elements.push(e)}catch(t){0}}},{key:"allIframeKeepAlive",value:function(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++)try{e[t].contentWindow.document.body.addEventListener("click",this._bindedSetKeepAlive,!0),e[t].contentWindow.document.body.addEventListener("scroll",this._bindedSetKeepAlive,!0),e[t].contentWindow.document.body.addEventListener("mousemove",this._bindedSetKeepAlive,!0),this._elements.push(e[t])}catch(n){0}}},{key:"_checkUsage",value:function(){this.getKeepAlive()&&(this._itsAliveCallback(),this.setKeepAlive(!1)),this._checkUsageTimeout=setTimeout(this._checkUsage.bind(this),this._interval)}},{key:"setKeepAlive",value:function(e){this._isAlive=e}},{key:"getKeepAlive",value:function(){return!(!o.default.isMobile()&&!o.default.isTablet())||this._isAlive}},{key:"destroy",value:function(){var e=this;clearTimeout(this._checkUsageTimeout),this._elements.forEach((function(t){t.removeEventListener("click",e._bindedSetKeepAlive,!0),t.removeEventListener("scroll",e._bindedSetKeepAlive,!0),t.removeEventListener("mousemove",e._bindedSetKeepAlive,!0)}))}}]),e}();t.default=s}}]);